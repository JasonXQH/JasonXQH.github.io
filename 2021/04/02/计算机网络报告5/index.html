<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=">


  <link rel="mask-icon" href="/images/logo.svg?v=" color="#222">





  <meta name="keywords" content="计算机网络," />










<meta name="description" content="计算机网络报告51.实验目的 熟悉HTTP协议 了解HTTP协议在实际网络中的运行过程 熟悉SMTP和POP3协议 了解SMTP和POP3协议在实际网络中的运行过程  2.实验任务 通过wireshark分析HTTP协议  通过wireshark分析SMTP和POP3协议   3. 协议简介3.1 HTTP协议HTTP协议(超文本传输协议HyperText Transfer Protocol)，它">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机网络报告5">
<meta property="og:url" content="https://jasonxqh.github.io/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/index.html">
<meta property="og:site_name" content="Jason‘s Blog">
<meta property="og:description" content="计算机网络报告51.实验目的 熟悉HTTP协议 了解HTTP协议在实际网络中的运行过程 熟悉SMTP和POP3协议 了解SMTP和POP3协议在实际网络中的运行过程  2.实验任务 通过wireshark分析HTTP协议  通过wireshark分析SMTP和POP3协议   3. 协议简介3.1 HTTP协议HTTP协议(超文本传输协议HyperText Transfer Protocol)，它">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://jasonxqh.github.io/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/5.png">
<meta property="og:image" content="https://jasonxqh.github.io/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/6.png">
<meta property="og:image" content="https://jasonxqh.github.io/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/7.png">
<meta property="og:image" content="https://jasonxqh.github.io/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/8.png">
<meta property="og:image" content="https://jasonxqh.github.io/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/9.png">
<meta property="og:image" content="https://jasonxqh.github.io/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/11.png">
<meta property="og:image" content="https://jasonxqh.github.io/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/10.png">
<meta property="og:image" content="https://jasonxqh.github.io/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/12.png">
<meta property="og:image" content="https://jasonxqh.github.io/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/4.png">
<meta property="og:image" content="https://jasonxqh.github.io/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/14.png">
<meta property="og:image" content="https://jasonxqh.github.io/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/15.png">
<meta property="og:image" content="https://jasonxqh.github.io/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/17.png">
<meta property="og:image" content="https://jasonxqh.github.io/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/18.png">
<meta property="og:image" content="https://jasonxqh.github.io/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/19.png">
<meta property="og:image" content="https://jasonxqh.github.io/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/20.png">
<meta property="og:image" content="https://jasonxqh.github.io/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/13.png">
<meta property="og:image" content="https://jasonxqh.github.io/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/21.png">
<meta property="og:image" content="https://jasonxqh.github.io/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/22.png">
<meta property="og:image" content="https://jasonxqh.github.io/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/23.png">
<meta property="og:image" content="https://jasonxqh.github.io/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/24.png">
<meta property="og:image" content="https://jasonxqh.github.io/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/25.png">
<meta property="og:image" content="https://jasonxqh.github.io/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/26.png">
<meta property="article:published_time" content="2021-04-02T04:27:30.000Z">
<meta property="article:modified_time" content="2022-08-24T20:31:00.000Z">
<meta property="article:author" content="Jason">
<meta property="article:tag" content="计算机网络">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://jasonxqh.github.io/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/5.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '',
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    fancybox: false,
    tabs: ,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: 'undefined',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>







  <title>计算机网络报告5 | Jason‘s Blog</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', '[object Object]', 'auto');
  ga('send', 'pageview');
</script>





<meta name="generator" content="Hexo 4.2.0"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">
  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>
<a href="https://github.com/JasonXQH/JasonXQH.github.io" target="_blank" rel="noopener" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Jason‘s Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/%20" rel="section">
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/%20" rel="section">
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/%20" rel="section">
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/%20" rel="section">
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/%20" rel="section">
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/%5Bobject%20Object%5D">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">计算机网络报告5</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2021-04-02T12:27:30+08:00">
                2021-04-02
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2022-08-25T04:31:00+08:00">
                2022-08-25
              </time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="计算机网络报告5"><a href="#计算机网络报告5" class="headerlink" title="计算机网络报告5"></a>计算机网络报告5</h1><h2 id="1-实验目的"><a href="#1-实验目的" class="headerlink" title="1.实验目的"></a>1.实验目的</h2><ul>
<li>熟悉HTTP协议</li>
<li>了解HTTP协议在实际网络中的运行过程</li>
<li>熟悉SMTP和POP3协议</li>
<li>了解SMTP和POP3协议在实际网络中的运行过程</li>
</ul>
<h2 id="2-实验任务"><a href="#2-实验任务" class="headerlink" title="2.实验任务"></a>2.实验任务</h2><ul>
<li><p>通过wireshark分析HTTP协议</p>
</li>
<li><p>通过wireshark分析SMTP和POP3协议</p>
</li>
</ul>
<h2 id="3-协议简介"><a href="#3-协议简介" class="headerlink" title="3. 协议简介"></a>3. 协议简介</h2><h3 id="3-1-HTTP协议"><a href="#3-1-HTTP协议" class="headerlink" title="3.1 HTTP协议"></a>3.1 HTTP协议</h3><p>HTTP协议(超文本传输协议HyperText Transfer Protocol)，它是基于TCP协议的应用层传输协议，简单来说就是客户端和服务端进行数据传输的一种规则。</p>
<p>HTTP 是一种无状态 (stateless) 协议, HTTP协议本身不会对发送过的请求和相应的通信状态进行持久化处理。这样做的目的是为了保持HTTP协议的简单性，从而能够快速处理大量的事务, 提高效率。然而，在许多应用场景中，我们需要保持用户登录的状态或记录用户购物车中的商品。由于HTTP是无状态协议，所以必须引入一些技术来记录管理状态，例如Cookie。</p>
<h3 id="3-2-SMTP协议"><a href="#3-2-SMTP协议" class="headerlink" title="3.2 SMTP协议"></a>3.2 SMTP协议</h3><p>SMTP（Simple Mail Transfer Protocol）即简单邮件传输协议,它是一组用于由源地址到目的地址传送邮件的规则，由它来控制信件的中转方式。SMTP协议属于TCP/IP协议簇，它帮助每台计算机在发送或中转信件时找到下一个目的地。通过SMTP协议所指定的服务器,就可以把E-mail寄到收信人的服务器上了，整个过程只要几分钟。SMTP服务器则是遵循SMTP协议的发送邮件服务器，用来发送或中转发出的电子邮件。SMTP是一种TCP协议支持的提供可靠且有效电子邮件传输的应用层协议。</p>
<h3 id="3-3-POP3协议"><a href="#3-3-POP3协议" class="headerlink" title="3.3 POP3协议"></a>3.3 POP3协议</h3><p>POP3（Post Office Protocol version3）：邮局协议第三版本，协助用户代理（即客户端）从邮件服务器上获取邮件。POP3允许用户从服务器上把邮件存储到本地主机（即自己的计算机）上，同时删除保存在邮件服务器上的邮件，而POP3服务器则是遵循POP3协议的接收邮件服务器，用来接收电子邮件的。</p>
<h2 id="4-实验过程"><a href="#4-实验过程" class="headerlink" title="4.实验过程"></a>4.实验过程</h2><h3 id="4-1"><a href="#4-1" class="headerlink" title="4.1"></a>4.1</h3><p>抓取HTTP数据包，并分析HTTP协议具体细节（主要是分析HTTP数据包的组成）</p>
<p><strong>操作步骤：</strong></p>
<p>(1) 清空Web浏览器的缓存，保证数据是从网络中获取的</p>
<p>(2) 启动Wireshark，开始Wireshark抓包。</p>
<p>(3) 在浏览器地址栏中前往网址<a href="http://www.ecnu.edu.cn" target="_blank" rel="noopener">http://www.ecnu.edu.cn</a></p>
<p>(4) 单击测览器中的“刷新”按钮。</p>
<p>(5) 停止Wireshark分组俘获，过滤筛选处输入“http”显示捕获到的HTTP报文。</p>
<h3 id="Task1-amp-2："><a href="#Task1-amp-2：" class="headerlink" title="Task1&amp;2："></a>Task1&amp;2：</h3><p><strong>抓取HTTP网络包，分析HTTP请求网络包/响应网络包的组成</strong></p>
<p>我发现当我们用http来请求 www.ecnu.edu.cn 的时候，浏览器总是会自动切换到 https协议，导致我们的Wireshark抓取到的都是TLS协议的包。我用筛选条件<code>http and ip.addr == 202.120.92.50</code>抓取不到任何的报文。这可能是因为网站强制HTTPS来加密访问，只有确保网站的安全之后才会启用。</p>
<p>但是在我多刷新了几次过后，突然在Wireshark中出现了一个http请求报文和一个http相应报文(但是我并不知道它们是怎么出现的)我将其截图放在下面</p>
<p><strong>请求报文</strong></p>
<p><img src="/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/5.png" style="zoom: 80%;"></p>
<p><strong>响应报文</strong></p>
<p><img src="/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/6.png" style="zoom:130%;"></p>
<p>但这种http的报文出现是不可复制的，我在晚上又试了好几个不同的浏览器都无法抓到包。我还是认为这和https协议有关。所以我找到了平常在用的美剧天堂网站，它只需要http协议即可访问，这样抓取http协议的包就是可复制的了。我这里也给出美剧天堂的筛选条件：<code>http and ip.addr == 61.111.129.175</code> </p>
<p>需要注意的是，在抓包前需要关闭VPN或者代理服务器，否则我们发送的http请求都是先中转到代理服务商，收到的http响应也是从代理服务商发出的，无法达成直接和网站进行”握手“的操作。</p>
<p>截图如下</p>
<p><img src="/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/7.png" style="zoom:130%;"></p>
<p>现在，我们来用 <a href="http://www.ecnu.edu.cn" target="_blank" rel="noopener">http://www.ecnu.edu.cn</a> 来分析一下HTTP请求报文与响应报文。</p>
<h4 id="请求报文"><a href="#请求报文" class="headerlink" title="请求报文"></a>请求报文</h4><p><strong>首先我们看请求行的三个部分</strong></p>
<ul>
<li><p>请求方法： GET</p>
</li>
<li><p>请求内容： / 这里显示的是网站的相对路由的url，因为我访问的是学校网站的主页，因此其相对路由就是 <code>/</code> </p>
</li>
<li><p>协议版本：HTTP/1.1</p>
</li>
</ul>
<p><strong>然后我们来看首部行</strong></p>
<ul>
<li><p><code>Connection: keep-alive</code> 这是让客户端与服务端保持连接。</p>
</li>
<li><p><code>User-Agent: Mozilla/5.0 .......</code> 这是发送请求的操作系统即浏览器信息，我是用Chrome访问的网站，但这里一开始现实的是Mozilla/5.0，这是因为Mozilla是较早支持框架的浏览器，后来的浏览器为了兼容，都把自己伪装成Mozilla。</p>
</li>
<li><p><code>Accept: text/html application/xhtml+xml</code>这边列举的是客户端可以识别的内容类型，用于指定客户端接受哪些类型的信息</p>
</li>
<li><p><code>Accept-Encoding ： gzip, deflate</code> ,客户端可识别的数据编码.  这边简单介绍一下这两个编码格式：利用Apache中的<code>Gzip</code>模块，我们可以使用<code>Gzip</code>压缩算法来对Apache服务器发布的网页内容进行压缩后再传输到客户端浏览器。这样经过压缩后实际上降低了网络传输的字节数，最明显的好处就是可以加快网页加载的速度； <code>DEFLATE</code>是同时使用了LZ77算法与哈夫曼编码（Huffman Coding）的一个无损数据压缩算法。 deflate与gzip解压的代码几乎相同，可以合成一块代码。</p>
</li>
<li><p><code>Accepet-Language: zh-CN ，zh; q= 0.9,en; q=0.8,en-GB...</code> 这是浏览器所支持的语言类型</p>
</li>
</ul>
<h4 id="响应报文"><a href="#响应报文" class="headerlink" title="响应报文"></a>响应报文</h4><ul>
<li><code>HTTP/1.1 301 Moved Permanently</code>，这边校园网给我返回的状态码是301，也就是永久性转移，说明浏览器在拿到服务器返回的这个状态码之后会自动跳转到一个新的URL地址，这个地址在接下来的<code>Location</code>部分。在我们用户看来，就是地址 <code>http://www.ecnu.edu.cn</code> 瞬间变成了 <code>https://www.ecnu.edu.cn</code> 。这代表http 开头的旧地址的资源已经被永久移除了，搜索引擎在抓取新的内容的同时也将旧的网址交换为重定向之后的网址。所以很可能是我没有完全删除浏览器的缓存导致后面多次刷新也无法发起向 www.ecnu.edu.cn 的get请求。而是直接使用 https 加密协议。</li>
<li><code>Content-Type text/html</code>  告诉客户端，实际返回的内容的类型</li>
<li><code>Content-Length: 167\r\n</code> 消息主体的到校</li>
<li><code>Connection: keep-alive</code>表明连接状态： 保持连接</li>
<li><code>Location: https://www,ecnu.edu.cn:443</code> 这就是获得的新地址。浏览器实际上访问的是这个新地址。 443 代表网页浏览器端口，主要用于HTTPS服务。</li>
</ul>
<p>实际上这个响应并没有给我们很多信息，因为都转移到TLS协议去了。</p>
<h3 id="Task3："><a href="#Task3：" class="headerlink" title="Task3："></a>Task3：</h3><p><strong>学习了解GET和POST方法，分析对比GET和POST方法的请求和响应报文</strong></p>
<p>在我写的关于NodeJs 的博客中又一个章节 <a href="https://jasonxqh.github.io/2020/06/07/Nodejs基础1/#RESTful-Services">RESTful Services</a> 介绍了四种 Http 请求。分别是： Get 用于获取信息，Put用于更新数据，Delete用于删除操作，Post用于新建操作。</p>
<p>然后我又想到了去年Web课程编写的网页，里面可以发送各种类型的 http 请求，因此我们来试一下。 我的项目是本地运行的，因此我们在Wireshark中选择<strong>Adapter for loopback traffic capture</strong>。后台是挂在 8080端口上的，因此筛选条件是：<code>http and tcp.port == 8080</code></p>
<h4 id="get"><a href="#get" class="headerlink" title="get"></a>get</h4><p>当我刷新首页的时候，现实的就是一系列的 Get类型的请求。</p>
<p>一开始是请求用户的信息，然后请求首页内容。</p>
<p><img src="/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/8.png" style="zoom:67%;"></p>
<h4 id="post"><a href="#post" class="headerlink" title="post"></a>post</h4><p>对于post请求，我们可以在数据库中新建一条信息(如下图所示)，那么前端就会向后端发送一条post请求。</p>
<p><img src="/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/9.png" style="zoom:67%;"></p>
<p>我们抓到的包如下：</p>
<p><img src="/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/11.png" style="zoom:67%;"></p>
<p>我们点击最后的 <code>JavaScript Object Notation</code>,会出现Post中包含的一些关于新建对象信息：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">JavaScript Object Notation: application&#x2F;json</span><br><span class="line">    Object</span><br><span class="line">        Member Key: title</span><br><span class="line">            String value: 黑镜第五季</span><br><span class="line">            Key: title</span><br><span class="line">        Member Key: actors</span><br><span class="line">            String value: 安德鲁·斯科特,麦莉·赛勒斯</span><br><span class="line">            Key: actors</span><br><span class="line">        Member Key: country</span><br><span class="line">            String value: 英国</span><br><span class="line">            Key: country</span><br><span class="line">        Member Key: type</span><br><span class="line">            String value: 魔幻&#x2F;科幻</span><br><span class="line">            Key: type</span><br><span class="line">        Member Key: single</span><br><span class="line">            String value: 90</span><br><span class="line">            Key: single</span><br><span class="line">        Member Key: first_date</span><br><span class="line">            String value: </span><br><span class="line">            Key: first_date</span><br><span class="line">        Member Key: station</span><br><span class="line">            String value: Channel 4</span><br><span class="line">            Key: station</span><br><span class="line">        Member Key: url</span><br><span class="line">            String value: http:&#x2F;&#x2F;www.meiju8.cc&#x2F;movie&#x2F;48600.html</span><br><span class="line">            Key: url</span><br></pre></td></tr></table></figure>
<h4 id="分析与总结"><a href="#分析与总结" class="headerlink" title="分析与总结"></a>分析与总结</h4><h5 id="Get-和-Post-请求报文区别"><a href="#Get-和-Post-请求报文区别" class="headerlink" title="Get 和 Post 请求报文区别"></a>Get 和 Post 请求报文区别</h5><p><img src="/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/10.png" style="zoom:67%;"></p>
<p>这两份报文最大的区别就是在请求方法上的不同，一个是Get，另一个是Post</p>
<p>此外由于在操作界面上的不同，两者请求的Url也不一样。</p>
<p>相比 Post的请求报文，Get的请求报文在这里还多了一个 Authorization，其内容是一大串编码, 原因是我在设计系统的时候规定在请求信息的时候前端必须把用户的信息token放在Get报文中发送给后端，后端验明身份后才可以发送数据库中的信息给前端。因此这里的密码就是用户的token信息。</p>
<p>相比 Get的请求报文，Post的请求报文在底部还有一行 <code>File Data : 217 bytes</code> ,这是因为我新建了一条信息，夹带在请求报文中，发送给后端，后端解析后将其存入数据库当中。</p>
<p>和之前向 www.ecnu.edu.cn 发送的报文相比，这两份报文多了几个字段： </p>
<p><code>Sec-Fetch-Site： same-site</code> 这个请求头表示一个请求发起者的来源与目标资源来源之间的关系；same-site表示发起和目标站点源完全一致</p>
<p><code>Sec-Fetch-Mode: cors</code>该请求头表明了一个请求的模式；cors代表跨域请求。因为前端端口设在3000，后端端口设在8080，http请求需要跨域</p>
<p><code>Sec-Fetch-Dest: empty</code> 表示请求的目的地，即如何使用获取的数据；</p>
<p>Sec-Fetch-*请求头这是用来干嘛的呢，简单来说，就是网络请求的元数据描述，服务端根据这些补充数据进行细粒度的控制响应，换句话说，服务端可以精确判断请求的合法性，杜绝非法请求和攻击，提高web服务的安全性。</p>
<h5 id="Get和post响应报文区别"><a href="#Get和post响应报文区别" class="headerlink" title="Get和post响应报文区别"></a>Get和post响应报文区别</h5><p><img src="/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/12.png" style="zoom:67%;"></p>
<p>现在我们来分析Get和Post的响应报文。</p>
<p>我们发现Get 与 Post 的响应报文大同小异，但是Post响应报文并没有报告模板中写着的那样有 Server字段，我并不知道是什么原因。</p>
<p>但是与之前 www.ecnu.edu.cn的响应报文相比，这次的相应报文多了很多 X-* 开始的响应头.我在 MDN Web Docs上找到了相关解释：</p>
<p><code>X-DNS-Prefetch-Control: off</code> 这个响应头控制着浏览器的DNS预读取功能。 DNS 预读取是一项使浏览器主动去执行域名解析的功能，其范围包括文档的所有链接，无论是图片的，CSS 的，还是 JavaScript 等其他用户能够点击的 URL。因为预读取会在后台执行，所以 DNS 很可能在链接对应的东西出现之前就已经解析完毕。这能够减少用户点击链接时的延迟。这里的off就是关闭DNS预解析。</p>
<p><code>X-Frame-Options: SAMEORIGIN</code>  这个响应头是用来给浏览器指示允许一个页面 可否在<code>&lt;frame&gt;</code>，<code>&lt;embed&gt;</code>或者<code>&lt;object&gt;</code>中展现的标记。sameorigin表示该页面可以在相同域名页面的 frame 中展示。</p>
<p><code>X-Download-Options: noopen</code> 这个响应头是用于放置直接打开用户下载文件。noopen用于指定 IE 8级以上的版本的用户不打开文件而直接保存文件，在下载对话框中不显示“打开”选项</p>
<p><code>X-SXX-Protection: 1; mode=bloack</code> 这个响应头是 Internet Explorer，Chrome 和 Safari 的一个特性，当检测到跨站脚本攻击 (<a href="https://developer.mozilla.org/en-US/docs/Glossary/Cross-site_scripting" target="_blank" rel="noopener">XSS</a>)时，浏览器将停止加载页面。这里，<code>1;mode=block</code> 代表启用XSS过滤。 如果检测到攻击，浏览器将不会清除页面，而是阻止页面加载。</p>
<h3 id="Task4"><a href="#Task4" class="headerlink" title="Task4"></a>Task4</h3><p><strong>抓取HTTP数据包，并分析HTTP协议交互流程（主要是客户端和服务器之间通过HTTP协议进行交互的流程）</strong></p>
<p><img src="/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/4.png" style="zoom:67%;"></p>
<p>HTTP协议的流程可以概括为下图：</p>
<p><img src="/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/14.png" style="zoom:120%;"></p>
<p>我们看到按照上面这个图片，可以总结为下面四点：</p>
<ol>
<li>客户端通过TCP三次握手与服务器建立连接。</li>
<li>TCP建立连接成功后，向服务器发送HTTP请求。</li>
<li>服务器接收客户端的HTTP请求后，将返回应答，并向客户端发送数据</li>
<li>客户端通过TCP四次断开，与服务器断开TCP连接。</li>
</ol>
<p>为了直观，我们还是抓取了本地项目的报文来做分析</p>
<p><img src="/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/15.png" style="zoom:120%;"></p>
<p>首先是三次握手的过程。前端端口是3645，后端端口是8080</p>
<ul>
<li>第一份TCP报文是前端发送给后端使用SYN同步序列号，用来发起一个TCP连接，这时候 Seq=0。</li>
<li>第二份TCP报文是服务器发送的[SYN,ACK]确认报文，此时 Seq=0,Ack =1。这代表已经收到序列号为0的报文，现在请求要1的报文</li>
<li>第三份TCP报文是服务端发送的 Seq=1,Ack=1的[ACK]确认报文。</li>
</ul>
<p>我们发现和图片上的三次握手一一对应，现在客户端和服务端已经开始建立了联系，开始相互通讯了。下面的HTTP请求就是之前我们分析的报文。</p>
<p>四次挥手我们用 访问百度的例子：</p>
<p><img src="/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/17.png" style="zoom:120%;"></p>
<p>第一次挥手：首先客户端给服务器发送 [FIN,ACK] 包，用来关闭客户端到服务器的数据传送。Seq=1,Ack=1</p>
<p>第二次挥手：当服务器收到FIN之后，发挥一个 Ack=2 的TCP包。</p>
<p>第三次挥手：仍然是服务器给PC发送TCP包，用来关闭于客户端的连接。 <code>Seq=1 Ack=2</code></p>
<p>第四次挥手，客户端收到服务器发送的FIN之后，发送 <code>Seq=2,Ack=2</code> 的TCP包给客户端，结束链接，但是这里百度的客户端已经和我们断开了连接，因此出现了重新发送的情况。</p>
<h3 id="Task5-amp-6"><a href="#Task5-amp-6" class="headerlink" title="Task5&amp;6"></a>Task5&amp;6</h3><p><strong>抓取SMTP和POP3数据包，并分析SMTP和POP3协议具体细节（主要是分析SMTP和POP3数据包的组成) 和 协议交互流程（主要是SMTP和POP3协议在网络中运行的流程）</strong></p>
<p>为了方便起见，我将数据包的组成和交互流程放在一起分析：</p>
<h4 id="SMTP-协议"><a href="#SMTP-协议" class="headerlink" title="SMTP 协议"></a>SMTP 协议</h4><p>操作步骤：</p>
<p>（1） 打开Wireshark，开始捕获网络包。</p>
<p>（2） 在本地用foxmail（或其他）登录两个邮箱，用A邮箱发送邮件给B邮箱。</p>
<p>（3） 抓取smtp和pop3协议的数据包。</p>
<p><img src="/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/18.png" style="zoom:120%;"></p>
<p>如果我们在使用 Foxmail发送邮件，需要先在设置中将取消使用SSL 加密邮件的功能，否则我们是抓取不到任何包裹的。</p>
<p><img src="/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/19.png" style="zoom:120%;"></p>
<p>Wireshark 抓到的包如下：</p>
<p><img src="/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/20.png" style="zoom:120%;"></p>
<p>现在我们分析SMTP和POP3协议具体细节和流程。</p>
<p><img src="/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/13.png" style="zoom:67%;"></p>
<p>第一条是邮件服务器发送给PC的报文，220 代表连接 SMTP 服务器成功。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Simple Mail Transfer Protocol</span><br><span class="line">    Response: 220 newxmesmtplogicsvrszc7.qq.com XMail Esmtp QQ Mail Server.\r\n</span><br><span class="line">        Response code: &lt;domain&gt; Service ready (220)</span><br><span class="line">        Response parameter: newxmesmtplogicsvrszc7.qq.com XMail Esmtp QQ Mail Server.</span><br></pre></td></tr></table></figure>
<p>第二条是PC发送给邮件服务器的报文，EHLO表明邮件带有身份验证，是没有办法伪造的，也就是可以规避垃圾邮件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Simple Mail Transfer Protocol</span><br><span class="line">    Command Line: EHLO JasonsT90\r\n</span><br></pre></td></tr></table></figure>
<p>第三条邮件服务器发送给PC的报文,状态字250代表与 服务器握手成功</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Simple Mail Transfer Protocol</span><br><span class="line">    Response: 250-newxmesmtplogicsvrszc7.qq.com\r\n</span><br><span class="line">        Response code: Requested mail action okay, completed (250)</span><br><span class="line">        Response parameter: newxmesmtplogicsvrszc7.qq.com</span><br><span class="line">        Response parameter: PIPELINING</span><br><span class="line">        Response parameter: SIZE 73400320</span><br><span class="line">        Response parameter: STARTTLS</span><br><span class="line">        Response parameter: AUTH LOGIN PLAIN XOAUTH XOAUTH2</span><br><span class="line">        Response parameter: AUTH&#x3D;LOGIN</span><br><span class="line">        Response parameter: MAILCOMPRESS</span><br><span class="line">        Response parameter: 8BITMIME</span><br></pre></td></tr></table></figure>
<p>第四条是PC发送给邮件服务器的报文，这边是用户登录命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Simple Mail Transfer Protocol</span><br><span class="line">    Command Line: AUTH LOGIN\r\n</span><br><span class="line">        Command: AUTH</span><br><span class="line">        Request parameter: LOGIN</span><br></pre></td></tr></table></figure>
<p>第五条是邮件服务器发送给PC的报文，状态码是334，代表接受用户登录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Simple Mail Transfer Protocol</span><br><span class="line">    Response: 334 VXNlcm5hbWU6\r\n</span><br><span class="line">        Response code: AUTH input (334)</span><br><span class="line">        Response parameter: VXNlcm5hbWU6</span><br></pre></td></tr></table></figure>
<p>第六条是PC发送给邮件服务器的报文，包含了登陆的用户名的信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Simple Mail Transfer Protocol</span><br><span class="line">    Username: MjY5Nzc2NzE2MEBxcS5jb20&#x3D;</span><br></pre></td></tr></table></figure>
<p>第七条又是表示 邮件服务器接受用户登录</p>
<p>第八条是PC发送给邮件服务器的报文，包含了用户登录服务器的密码</p>
<p>第九条是邮件服务器发送给PC的报文，状态字235代表用户登录成功</p>
<p>第十条是PC发送给邮件服务器的报文，记录了邮件的发送者：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Simple Mail Transfer Protocol</span><br><span class="line">    Command Line: MAIL FROM: &lt;2697767160@qq.com&gt; SIZE&#x3D;1354\r\n</span><br><span class="line">        Command: MAIL</span><br><span class="line">        Request parameter: FROM: &lt;2697767160@qq.com&gt; SIZE&#x3D;1354</span><br></pre></td></tr></table></figure>
<p>第十一条是邮件服务器发送给PC的报文，状态字250表示与服务器握手成功</p>
<p>第十二条是PC发送给邮件服务器的报文，记录了邮件的接收者：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Simple Mail Transfer Protocol</span><br><span class="line">    Command Line: RCPT TO: &lt;10195501423@stu.ecnu.edu.cn&gt;\r\n</span><br><span class="line">        Command: RCPT</span><br><span class="line">        Request parameter: TO: &lt;10195501423@stu.ecnu.edu.cn&gt;</span><br></pre></td></tr></table></figure>
<p>第十三条是邮件服务器发送给PC的报文，也是250关键字</p>
<p>第十四条是PC发送给邮件服务器的报文，内容为DATA，表示邮件正文</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Simple Mail Transfer Protocol</span><br><span class="line">    Command Line: DATA\r\n</span><br><span class="line">        Command: DATA</span><br></pre></td></tr></table></figure>
<p>第十五条是邮件服务器发送给PC的报文</p>
<p>第十六条是PC发送给邮件服务器的报文，记载着邮件的详细信息：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Simple Mail Transfer Protocol</span><br><span class="line">    Line-based text data (13 lines)</span><br><span class="line">        Date: Sun, 4 Apr 2021 12:48:46 +0800\r\n</span><br><span class="line">        From: &quot;2697767160@qq.com&quot; &lt;2697767160@qq.com&gt;\r\n</span><br><span class="line">        To: &#x3D;?GB2312?B?0OyGorq9?&#x3D; &lt;10195501423@stu.ecnu.edu.cn&gt;\r\n</span><br><span class="line">        Subject: test\r\n</span><br><span class="line">        X-Priority: 3\r\n</span><br><span class="line">        X-GUID: C085913A-BCC1-425E-9D61-8E390342FC2A\r\n</span><br><span class="line">        X-Has-Attach: no\r\n</span><br><span class="line">        X-Mailer: Foxmail 7.2.20.273[cn]\r\n</span><br><span class="line">        Mime-Version: 1.0\r\n</span><br><span class="line">        Message-ID: &lt;202104041248465541575@qq.com&gt;\r\n</span><br><span class="line">        Content-Type: multipart&#x2F;alternative;\r\n</span><br><span class="line">        \tboundary&#x3D;&quot;----&#x3D;_001_NextPart310261260277_&#x3D;----&quot;\r\n</span><br><span class="line">        \r\n</span><br><span class="line">    [Reassembled DATA in frame: 974]</span><br></pre></td></tr></table></figure>
<p>第十七条是邮件服务器发送给PC的报文，状态字250表示握手成功</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Simple Mail Transfer Protocol</span><br><span class="line">    Response: 250 OK: queued as.\r\n</span><br><span class="line">        Response code: Requested mail action okay, completed (250)</span><br><span class="line">        Response parameter: OK: queued as.</span><br></pre></td></tr></table></figure>
<p>第十八条是PC发送给邮件服务器的报文，内容是QUIT，代表推出SMTP服务器</p>
<p>第十九条是邮件服务器发送给PC的报文，状态字221,代表与PC断开连接。服务关闭</p>
<h4 id="POP3协议"><a href="#POP3协议" class="headerlink" title="POP3协议"></a>POP3协议</h4><p>由于我使用的都是默认配置的邮箱，因此qq邮箱和企业邮箱都是使用IMAP类型的邮箱，无法收到POP协议的报文。因此我又重新配置了我的两个邮箱：</p>
<p><img src="/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/21.png" style="zoom:67%;"></p>
<ol>
<li>由于POP3协议默认的传输协议是TCP协议，因此，客户端连接服务器需要先进行三次握手建立端到端的连接。</li>
</ol>
<p><img src="/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/22.png" style="zoom:67%;"></p>
<ol>
<li>在客户端和服务器建立了连接之后，pop3服务器回向pop3客户端发送 带有OK的信息，通知客户端，服务器已经准备就绪，请开始认证阶段。</li>
</ol>
<p><img src="/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/23.png" style="zoom:67%;"></p>
<ol>
<li>还是参照上图，客户端会向服务器发送用户名、授权码，邮箱服务器也会返回OK作为回应</li>
<li>接下来客户端向服务器发送 LIST指令，服务器会返回邮件数量的大小。</li>
</ol>
<p><img src="/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/24.png" style="zoom:67%;"></p>
<p>我们看到POP服务器上一共有91份待收取的邮件。</p>
<p>接下来，客户端依次向POP服务器发送 RETR XX(代表第XX封邮件)，从RETR 91 一直到 RETR 1.服务器返回命令执行的状态(都是OK)以及第XX封邮件的全部内容。</p>
<p><img src="/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/25.png" style="zoom:67%;"></p>
<p>每一份回传的OK的POP类型报文内容如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Post Office Protocol</span><br><span class="line">    +OK 17826\r\n</span><br><span class="line">    Received: from 66.203.125.14 (unknown [66.203.125.14])\r\n</span><br><span class="line">    \tby newmx31.qq.com (NewMx) with SMTP id \r\n</span><br><span class="line">    \tfor &lt;2697767160@qq.com&gt;; Wed, 10 Mar 2021 19:49:16 +0800\r\n</span><br><span class="line">    X-QQ-FEAT: cNGXrfP6b70WZB63pTXQMF109vshIAanTTfx8LrW82o&#x3D;\r\n</span><br><span class="line">    X-QQ-MAILINFO: MfiUJyQXz1c0MzpywYY9SZw82ms4O&#x2F;PNVMLpO9XG6T+YtCzTTfIxosGvW\r\n</span><br><span class="line">    \tGLtLTpNB6P6inseKmkcTT32W0twW00gkYhYWthuNeRGuMTLnB+eupX2zEdw+cI&#x3D;\r\n</span><br><span class="line">    X-QQ-mid: mxszc32t1615376953ta55hzshz\r\n</span><br><span class="line">    X-QQ-CSender: support+2697767160&#x3D;qq.com@mega.nz\r\n</span><br><span class="line">    X-QQ-ORGSender: support+2697767160&#x3D;qq.com@mega.nz\r\n</span><br><span class="line">    X-QQ-XMAILINFO: M2oFKfa0&#x2F;bfew2IwrID4iBasCNw8ww5ZmGVMCIlyGoUiPp1ZLokBv3JVRg4cLf\r\n</span><br><span class="line">    \t qdL1LytVljSPoYupd&#x2F;84PH64vr1LeLYuFDDvP&#x2F;LUNEiRf12ixQby9M2kKdRpXpSil5j1i69EWO68\r\n</span><br><span class="line">    \t 2RGSVu1ROA7mtPgjCRvHW&#x2F;PNtO3TLLMxAH8suiNHigFEw0GRN+drbQgVlpONXXJVb89q2pX&#x2F;pzFS\r\n</span><br><span class="line">    \t SdSvinFTax&#x2F;wB5jK6HPQqw1Xbnf2sUNSp036IOJRzC5KEgXPyebiCZpzxtS+PWS8kXL9iUacIlU2\r\n</span><br><span class="line">    \t EmZ3wQZen&#x2F;uFbHHEzSQfmFjDWpdy532VDeN5XqVsbHnlHh&#x2F;8kEl+Q9gPAVe5bJ1RJRabr7XyE0Av\r\n</span><br><span class="line">    \t loor6GeJUoDoBRDb1bb8mChh4h9k7UaO5wz8sv0mMh6HhKr3Ujx3b3Lse27w&#x2F;NOpvYghW2qA8RrS\r\n</span><br><span class="line">    \t wrw&#x2F;o0FqMWS4j0jFoBDa7P0foQdla168q2vbww1lMBSZWggXLxEaLHurlLFPvUpZ93+pwG5jRAWK\r\n</span><br><span class="line">    \t aebTM7ekTKZP8zDQIyUgQ+Vtg9GWiHyV1GSamnciZXrQisdO7g3nE+v8HfxACgv&#x2F;UkDF57WLe7rh\r\n</span><br><span class="line">    \t pXJIbvRnBuw4udVFzRRbwaZK67y&#x2F;2cFr3JZCtDqtiEG+C+6aDtU+&#x2F;0FxuehYwf0P3VbxbYhHcHn1\r\n</span><br><span class="line">    \t uXvvAL0sty3zSbweWINddy3GP2I9a2WX8MLkgMwoFhII+bbTxKdtN&#x2F;ayYW+N0&#x2F;331HfnxFvLtUNV\r\n</span><br><span class="line">    \t lIuxgBK+55V8&#x2F;p5BtjidmhkgkG1Tk9xi+zcpj+6J1q3u5vlNU2rZj6stX8F30M4bPXWc6Iqd+g7M\r\n</span><br><span class="line">    \t vkynns4nr537VzSL7YaM8HhBxhlsfXGLoOE3Ief2Wk3u58FOIf5cEK</span><br></pre></td></tr></table></figure>
<p><code>Received :  from  66.203.125.14</code> 表示从哪里收到的信息</p>
<p><code>by newmx31.qq.com (NewMx) with SMTP id</code> 表示发件服务器的信息</p>
<p><code>for &lt;2697767160@qq.com&gt;; Wed, 10 Mar 2021 19:49:16 +0800</code> 表示收件人信息和收件时间</p>
<p> <code>X-QQ-CSender: support+2697767160=qq.com@mega.nz</code> 弹回域名 </p>
<ol>
<li>最后客户端发送QUIT指令，退出处理状态。服务器也返回 OK Bye作为回应。并通过 TCP四次挥手断开连接。</li>
</ol>
<p><img src="/2021/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%A5%E5%91%8A5/26.png" style="zoom:67%;"></p>
<p>那么 IMAP类型的邮箱和POP类型的邮箱有什么区别？</p>
<p>POP允许电子邮件客户端下载服务器上的邮件，但是我在电子邮件客户端的操作（如：移动邮件、标记已读等），这是不会反馈到服务器上的，比如：您通过电子邮件客户端收取了QQ邮箱中的3封邮件并移动到了其他文件夹，这些移动动作是不会反馈到服务器上的，也就是说，QQ邮箱服务器上的这些邮件是没有同时被移动的。</p>
<p>但是IMAP就不同了，电子邮件客户端的操作都会反馈到服务器上，我对邮件进行的操作（如：移动邮件、标记已读等），服务器上的邮件也会做相应的动作。也就是说，IMAP是“双向”的。</p>
<p>同时，IMAP可以只下载邮件的主题，只有当我真正需要的时候，才会下载邮件的所有内容。</p>
<h2 id="进阶（依据自身情况完成）"><a href="#进阶（依据自身情况完成）" class="headerlink" title="进阶（依据自身情况完成）"></a>进阶（依据自身情况完成）</h2><h3 id="第一题"><a href="#第一题" class="headerlink" title="第一题"></a>第一题</h3><p>利用Web邮件客户端进行邮件发送和接收，抓取相应的数据包，分析其流程。</p>
<h3 id="第二题"><a href="#第二题" class="headerlink" title="第二题"></a>第二题</h3><p>在GitHub上寻找基于java实现的邮件收发客户端，找到之后运行它，实现正常的邮件收发，并抓取相应的网络包，分析判断其网络交互流程。</p>
<p><a href="https://github.com/RawSanj/java-mail-clients" target="_blank" rel="noopener">https://github.com/RawSanj/java-mail-clients</a></p>

      
    </div>
    
    
    
    <div>
      
        <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束，感谢您的阅读-------------</div>
    
</div>

      
    </div>
    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" rel="tag"><i class="fa fa-tag"></i> 计算机网络</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2021/03/21/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2/" rel="next" title="计算机网络实验报告2">
                <i class="fa fa-chevron-left"></i> 计算机网络实验报告2
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2021/04/04/%E5%A4%9A%E7%BB%B4%E9%9A%8F%E6%9C%BA%E5%8F%98%E9%87%8F3-1-3-3/" rel="prev" title="多维随机变量3.1-3.3">
                多维随机变量3.1-3.3 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/%5Bobject%20Object%5D"
                alt="Jason" />
            
              <p class="site-author-name" itemprop="name">Jason</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%20%7C%7C%20fa%20fa-archive">
              
                  <span class="site-state-item-count">435</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">61</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#计算机网络报告5"><span class="nav-number">1.</span> <span class="nav-text">计算机网络报告5</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-实验目的"><span class="nav-number">1.1.</span> <span class="nav-text">1.实验目的</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-实验任务"><span class="nav-number">1.2.</span> <span class="nav-text">2.实验任务</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-协议简介"><span class="nav-number">1.3.</span> <span class="nav-text">3. 协议简介</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-HTTP协议"><span class="nav-number">1.3.1.</span> <span class="nav-text">3.1 HTTP协议</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-SMTP协议"><span class="nav-number">1.3.2.</span> <span class="nav-text">3.2 SMTP协议</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-POP3协议"><span class="nav-number">1.3.3.</span> <span class="nav-text">3.3 POP3协议</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-实验过程"><span class="nav-number">1.4.</span> <span class="nav-text">4.实验过程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1"><span class="nav-number">1.4.1.</span> <span class="nav-text">4.1</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Task1-amp-2："><span class="nav-number">1.4.2.</span> <span class="nav-text">Task1&amp;2：</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#请求报文"><span class="nav-number">1.4.2.1.</span> <span class="nav-text">请求报文</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#响应报文"><span class="nav-number">1.4.2.2.</span> <span class="nav-text">响应报文</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Task3："><span class="nav-number">1.4.3.</span> <span class="nav-text">Task3：</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#get"><span class="nav-number">1.4.3.1.</span> <span class="nav-text">get</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#post"><span class="nav-number">1.4.3.2.</span> <span class="nav-text">post</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#分析与总结"><span class="nav-number">1.4.3.3.</span> <span class="nav-text">分析与总结</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Get-和-Post-请求报文区别"><span class="nav-number">1.4.3.3.1.</span> <span class="nav-text">Get 和 Post 请求报文区别</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Get和post响应报文区别"><span class="nav-number">1.4.3.3.2.</span> <span class="nav-text">Get和post响应报文区别</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Task4"><span class="nav-number">1.4.4.</span> <span class="nav-text">Task4</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Task5-amp-6"><span class="nav-number">1.4.5.</span> <span class="nav-text">Task5&amp;6</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#SMTP-协议"><span class="nav-number">1.4.5.1.</span> <span class="nav-text">SMTP 协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#POP3协议"><span class="nav-number">1.4.5.2.</span> <span class="nav-text">POP3协议</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#进阶（依据自身情况完成）"><span class="nav-number">1.5.</span> <span class="nav-text">进阶（依据自身情况完成）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#第一题"><span class="nav-number">1.5.1.</span> <span class="nav-text">第一题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#第二题"><span class="nav-number">1.5.2.</span> <span class="nav-text">第二题</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart" aria-hidden="true"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jason</span>
 <!--
  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>







-->
        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>




















  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v="></script>

  <script type="text/javascript" src="/js/src/motion.js?v="></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v="></script>
<script type="text/javascript" src="/js/src/post-details.js?v="></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v="></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>

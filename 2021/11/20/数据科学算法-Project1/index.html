<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="google-site-verification" content="y0-26jFM_8wn6Slpy1ahkB8ndR7w0OOGyAU6IaXjLUI" />














  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="《数据科学与工程算法基础》实践报告报告题目：  利用PCA对图像降维  姓 名： 徐啟航  学 号： 10195501423  完成日期：11.21 提供中英文摘要摘要 [中文]：在这次试验中，我采用了三种不同的方式，利用PCA对同一文件夹下的100张图片进行降维操作，第一种是对一百张图片分别进行PCA降维；第二种则是将一百张图片扁平化后一起用PCA技术降维;第三种采用了2D-2DPCA的方法，对">
<meta property="og:type" content="article">
<meta property="og:title" content="《数据科学与工程算法基础》实践报告">
<meta property="og:url" content="https://jasonxqh.github.io/2021/11/20/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E7%AE%97%E6%B3%95-Project1/index.html">
<meta property="og:site_name" content="Jason‘s Blog">
<meta property="og:description" content="《数据科学与工程算法基础》实践报告报告题目：  利用PCA对图像降维  姓 名： 徐啟航  学 号： 10195501423  完成日期：11.21 提供中英文摘要摘要 [中文]：在这次试验中，我采用了三种不同的方式，利用PCA对同一文件夹下的100张图片进行降维操作，第一种是对一百张图片分别进行PCA降维；第二种则是将一百张图片扁平化后一起用PCA技术降维;第三种采用了2D-2DPCA的方法，对">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://jasonxqh.github.io/2021/11/20/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E7%AE%97%E6%B3%95-Project1/11.png">
<meta property="og:image" content="https://jasonxqh.github.io/2021/11/20/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E7%AE%97%E6%B3%95-Project1/5.png">
<meta property="og:image" content="https://jasonxqh.github.io/2021/11/20/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E7%AE%97%E6%B3%95-Project1/4.png">
<meta property="og:image" content="https://jasonxqh.github.io/2021/11/20/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E7%AE%97%E6%B3%95-Project1/12.png">
<meta property="og:image" content="https://jasonxqh.github.io/2021/11/20/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E7%AE%97%E6%B3%95-Project1/6.png">
<meta property="og:image" content="https://jasonxqh.github.io/2021/11/20/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E7%AE%97%E6%B3%95-Project1/3.png">
<meta property="og:image" content="https://jasonxqh.github.io/2021/11/20/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E7%AE%97%E6%B3%95-Project1/1.png">
<meta property="og:image" content="https://jasonxqh.github.io/2021/11/20/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E7%AE%97%E6%B3%95-Project1/13.png">
<meta property="og:image" content="https://jasonxqh.github.io/2021/11/20/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E7%AE%97%E6%B3%95-Project1/9.png">
<meta property="og:image" content="https://jasonxqh.github.io/2021/11/20/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E7%AE%97%E6%B3%95-Project1/7.png">
<meta property="article:published_time" content="2021-11-20T08:54:30.000Z">
<meta property="article:modified_time" content="2021-11-28T16:50:34.000Z">
<meta property="article:author" content="Jason">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://jasonxqh.github.io/2021/11/20/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E7%AE%97%E6%B3%95-Project1/11.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":true,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://jasonxqh.github.io/2021/11/20/数据科学算法-Project1/"/>





  <title>《数据科学与工程算法基础》实践报告 | Jason‘s Blog</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-170027658-1', 'auto');
  ga('send', 'pageview');
</script>





<meta name="generator" content="Hexo 4.2.0"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">
  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>
<a href="https://github.com/JasonXQH/JasonXQH.github.io" target="_blank" rel="noopener" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Jason‘s Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            Sitemap
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2021/11/20/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E7%AE%97%E6%B3%95-Project1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">《数据科学与工程算法基础》实践报告</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2021-11-20T16:54:30+08:00">
                2021-11-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  3.8k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  15
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="《数据科学与工程算法基础》实践报告"><a href="#《数据科学与工程算法基础》实践报告" class="headerlink" title="《数据科学与工程算法基础》实践报告"></a>《数据科学与工程算法基础》实践报告</h1><p>报告题目：  利用PCA对图像降维 </p>
<p>姓 名： 徐啟航 </p>
<p>学 号： 10195501423 </p>
<p>完成日期：11.21</p>
<h3 id="提供中英文摘要"><a href="#提供中英文摘要" class="headerlink" title="提供中英文摘要"></a>提供中英文摘要</h3><h4 id="摘要-中文-："><a href="#摘要-中文-：" class="headerlink" title="摘要 [中文]："></a>摘要 [中文]：</h4><p>在这次试验中，我采用了三种不同的方式，利用PCA对同一文件夹下的100张图片进行降维操作，第一种是对一百张图片分别进行PCA降维；第二种则是将一百张图片扁平化后一起用PCA技术降维;第三种采用了2D-2DPCA的方法，对行和列同时进行主成分分析，提取特征矩阵并降维。同时，我记录了两种方法的表现结果以及压缩性能,  如MSE、节省的空间、压缩率等。</p>
<h4 id="Abstract-英语"><a href="#Abstract-英语" class="headerlink" title="Abstract [英语]"></a>Abstract [英语]</h4><p>In this experiment, I used two different ways to reduce the dimension of 100 pictures in the same folder by PCA(Principal Component Analysis). The first is to reduce the dimension of 100 pictures by PCA respectively; The second is to flatten 100 pictures and reduce the dimension together.The third method uses 2d-2dpca to perform principal component analysis on rows and columns at the same time, extract the feature matrix and reduce the dimension At the same time, the performance results and compression performance of the two methods are recorded, such as reconstruction error, saved space, compression rate and so on</p>
<h3 id="项目概述（阐明该项目的科学和应用价值，以及相关工作进展并描述项目的主要内容）"><a href="#项目概述（阐明该项目的科学和应用价值，以及相关工作进展并描述项目的主要内容）" class="headerlink" title="项目概述（阐明该项目的科学和应用价值，以及相关工作进展并描述项目的主要内容）"></a>项目概述（阐明该项目的科学和应用价值，以及相关工作进展并描述项目的主要内容）</h3><p>PCA的全称是主成分分析，利用这种方法可以有效地找出数据中最主要结构并去除较为相似的特征。将数据降维之后，可以将其应用于机器学习和深度学习当中，以进行进一步数据分析。</p>
<p>通过PCA，可以解决以下三类问题：</p>
<ol>
<li><p>缓解维度灾难问题</p>
</li>
<li><p>可以在压缩数据的同时让信息损失最小化</p>
</li>
<li><p>理解高维数据结构是困难的，低维数据结构更容易理解</p>
</li>
</ol>
<p>在这个项目中，我们主要用PCA来对图片这类高维数据进行降维处理。从而可以对数据进行更好的观察和探索，并简化之后机器学习模型的训练与预测</p>
<h3 id="问题描述（问题定义）"><a href="#问题描述（问题定义）" class="headerlink" title="问题描述（问题定义）"></a>问题描述（问题定义）</h3><p>在这个项目中的重点就是对图片进行PCA降维。需要对(256x256)的高维数据降维并投影到新的维度空间中去。因此，我们需要找到图片中的主成分，即最大程度保留原有特征但是k权重较小的部分。最后我们要对100张图片进行降维并记录相应数据。</p>
<h3 id="方法（问题解决步骤和实现细节）"><a href="#方法（问题解决步骤和实现细节）" class="headerlink" title="方法（问题解决步骤和实现细节）"></a>方法（问题解决步骤和实现细节）</h3><h4 id="PCA"><a href="#PCA" class="headerlink" title="PCA"></a>PCA</h4><ol>
<li>对样本中心化 </li>
<li>计算协方差矩阵，进一步得到其特征值与特征向量</li>
<li>选取主成分。利用以下公式选取主成分的个数，取满足精度要求的最小特征值个数。 ($\alpha$为压缩的精度，用以限定主成分对原始数据的解释能力。在实验中我们通过对比不同$\alpha$​​​取值下的压缩率，MSE等值分析PCA降维中精度对最后压缩结果的影响)</li>
</ol>
<script type="math/tex; mode=display">
k = \arg\min_{l}\{\frac{\sum_{i=1}^l\lambda_i}{\sum_{i=1}^{\text{rank(A)}}\lambda_i}\geq\alpha\}</script><ol>
<li>投影到新的空间。将降维后的数据投影到新的空间后，计算节省的空间以及压缩率。<ul>
<li>压缩率的计算：(重构矩阵元素个数+特征向量大小+样本中心大小) / 原图像大小</li>
<li>MSE的计算： 还原后的矩阵和原矩阵的差值的平方和 除以原矩阵大小</li>
<li>节省空间的计算:  原图像大小 — (重构矩阵元素个数+特征向量大小+样本中心大小) </li>
</ul>
</li>
<li>重构图像。</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">PCA</span><span class="params">(image_2d,alpha)</span>:</span> </span><br><span class="line">    cov_mat=image_2d-np.mean(image_2d,axis=<span class="number">0</span>)</span><br><span class="line">    center=np.mean(image_2d,axis=<span class="number">0</span>)</span><br><span class="line">    eig_val,eig_vec=LA.eig(np.cov(cov_mat))</span><br><span class="line">    <span class="comment">#特征值排序</span></span><br><span class="line">    index=np.argsort(eig_val)</span><br><span class="line">    index=index[::<span class="number">-1</span>]</span><br><span class="line">    eig_vec=eig_vec[:,index]</span><br><span class="line">    eig_val=eig_val[index]</span><br><span class="line">    <span class="comment">#特征值选取</span></span><br><span class="line">    eig_val_sum=np.sum(eig_val)</span><br><span class="line">    p=LA.matrix_rank(image_2d)<span class="comment">#矩阵的秩的个数</span></span><br><span class="line">    part_eig_val=<span class="number">0</span></span><br><span class="line">    contribution = []</span><br><span class="line">    <span class="comment">#如果特征值大于 压缩精度*特征值总和，停止迭代</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(p):</span><br><span class="line">        part_eig_val=part_eig_val+eig_val[i]</span><br><span class="line">        <span class="comment"># 记录累计贡献率</span></span><br><span class="line">        contribution.append(part_eig_val/eig_val_sum)</span><br><span class="line">        <span class="keyword">if</span> part_eig_val&gt;(<span class="number">0.01</span>*alpha*eig_val_sum):</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    numpc=i<span class="comment">#主特征的个数</span></span><br><span class="line">    eig_vec=eig_vec[:,range(numpc)]</span><br><span class="line">    <span class="comment">#投影到新的空间</span></span><br><span class="line">    score=np.dot(eig_vec.T,cov_mat)</span><br><span class="line">    x=(np.size(eig_vec)+np.size(score)+np.size(center))/np.size(image_2d)</span><br><span class="line">    y=np.size(image_2d)-(np.size(eig_vec)+np.size(score)+np.size(center))</span><br><span class="line">    <span class="comment">#重构图片 </span></span><br><span class="line">    recon=np.dot(eig_vec,score)+np.mean(image_2d,axis=<span class="number">0</span>).T</span><br><span class="line">    <span class="comment">#将去除的中心加回来 图像质量更好，后面有对比图</span></span><br><span class="line">    <span class="comment">#转换编码，使得能将重构的图片显现出来</span></span><br><span class="line">    recon_img_mat=np.uint8(np.absolute(recon))</span><br><span class="line">    <span class="comment">#计算MSE</span></span><br><span class="line">    MSE  = LA.norm(recon_img_mat .astype(int) - image_2d.astype(int)) </span><br><span class="line">    <span class="keyword">return</span> recon_img_mat ,MSE,x ,y</span><br></pre></td></tr></table></figure>
<h3 id="2D-2DPCA"><a href="#2D-2DPCA" class="headerlink" title="2D-2DPCA"></a>2D-2DPCA</h3><p>普通的PCA，我们只对数据进行了行维度上的降维，但是，现在我们对列上也进行降维。</p>
<script type="math/tex; mode=display">
C = Z^TAX</script><p>X为行方向上2D PCA得到的变换矩阵，Z为列方向上2D PCA得到的变换矩阵,A 为元数据</p>
<p>要还原图片数据的话，我们只要做简单的矩阵变换即可：</p>
<script type="math/tex; mode=display">
A = ZCX^T</script><p>具体的变换矩阵的计算原理，和PCA一样，这里不做赘述</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">TwoDPCA</span><span class="params">(samples,alpha)</span>:</span> </span><br><span class="line">    size = samples[<span class="number">0</span>].shape</span><br><span class="line">    mean = np.zeros(size)</span><br><span class="line">    <span class="keyword">for</span> s <span class="keyword">in</span> samples:</span><br><span class="line">        mean = mean + s</span><br><span class="line">    mean /= float(len(samples))</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 行矩阵</span></span><br><span class="line">    cov_row = np.zeros((size[<span class="number">1</span>],size[<span class="number">1</span>]))</span><br><span class="line">    <span class="keyword">for</span> sample <span class="keyword">in</span> samples:</span><br><span class="line">        diff = sample-mean;</span><br><span class="line">        cov_row = cov_row+np.dot(diff.T,diff)</span><br><span class="line">    cov_row /= float(len(samples))</span><br><span class="line">    row_eval, row_evec = np.linalg.eig(cov_row)</span><br><span class="line">    <span class="comment">#特征值排序</span></span><br><span class="line">    row_eval_sum=np.sum(row_eval)</span><br><span class="line">    sorted_index_row=np.argsort(row_eval)</span><br><span class="line">    p_row=LA.matrix_rank(cov_row)<span class="comment">#矩阵的秩的个数</span></span><br><span class="line">    part_row_eval=<span class="number">0</span></span><br><span class="line">    contribution = []</span><br><span class="line">    <span class="comment">#如果特征值大于 压缩精度*特征值总和，停止迭代</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(p_row):</span><br><span class="line">        part_row_eval=part_row_eval+row_eval[i]</span><br><span class="line">        contribution.append(part_row_eval/row_eval_sum)</span><br><span class="line">        <span class="keyword">if</span> part_row_eval&gt;(<span class="number">0.01</span>*alpha*row_eval_sum):</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    num_row = i</span><br><span class="line">    <span class="comment"># 列矩阵</span></span><br><span class="line">    cov_col = np.zeros((size[<span class="number">0</span>], size[<span class="number">0</span>]))</span><br><span class="line">    <span class="keyword">for</span> s <span class="keyword">in</span> samples:</span><br><span class="line">        diff = s - mean;</span><br><span class="line">        cov_col += np.dot(diff,diff.T)</span><br><span class="line">    cov_col /= float(len(samples))</span><br><span class="line">    col_eval, col_evec = np.linalg.eig(cov_col)</span><br><span class="line">    <span class="comment"># 列特征值选取</span></span><br><span class="line">    col_eval_sum=np.sum(col_eval)</span><br><span class="line">    sorted_index_col=np.argsort(col_eval)</span><br><span class="line">    X = col_evec[:,sorted_index_col[:<span class="number">-90</span><span class="number">-1</span> : <span class="number">-1</span>]]</span><br><span class="line">    p_col=LA.matrix_rank(cov_col)<span class="comment">#矩阵的秩的个数</span></span><br><span class="line">    part_col_eval=<span class="number">0</span></span><br><span class="line">    contribution = []</span><br><span class="line">    <span class="comment">#如果特征值大于 压缩精度*特征值总和，停止迭代</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(p_col):</span><br><span class="line">        part_col_eval=part_col_eval+col_eval[i]</span><br><span class="line">        contribution.append(part_col_eval/col_eval_sum)</span><br><span class="line">        <span class="keyword">if</span> part_col_eval&gt;(<span class="number">0.01</span>*alpha*col_eval_sum):</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    num_col = i</span><br><span class="line">    <span class="comment"># 最终选取的特征值个数取决于行特征个数列特征个数的平均值</span></span><br><span class="line">    final_num = int((num_col+num_col)/<span class="number">2</span>)</span><br><span class="line">    X = row_evec[:,sorted_index_row[:-final_num<span class="number">-1</span> : <span class="number">-1</span>]]</span><br><span class="line">    Z = col_evec[:,sorted_index_col[:-final_num<span class="number">-1</span> : <span class="number">-1</span>]]</span><br><span class="line">    new_samples = []</span><br><span class="line">    m_mse = <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    temp = np.dot(Z.T, np.dot(samples[i], X))</span><br><span class="line">    <span class="comment"># 计算压缩率</span></span><br><span class="line">    x=(np.size(temp)+<span class="number">256</span>)/np.size(samples[<span class="number">0</span>])</span><br><span class="line">    y = <span class="number">0</span></span><br><span class="line">    <span class="comment"># 计算mse,压缩空间</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, len(samples)):</span><br><span class="line">        res = np.dot(Z.T, np.dot(samples[i], X))</span><br><span class="line">        res = np.dot(Z, np.dot(res, X.T))</span><br><span class="line">        m_mse = m_mse+mse(res.astype(int) - samples[i].astype(int))/ np.size(samples[i])</span><br><span class="line">        y=y+(np.size(samples[i])-(np.size(X)+np.size(Z)))</span><br><span class="line">        new_samples.append(res)</span><br><span class="line">    m_mse = m_mse / len(samples)</span><br><span class="line">    new_samples=np.uint8(np.absolute(new_samples))</span><br><span class="line">    avg_y = y/<span class="number">100</span></span><br><span class="line">    <span class="keyword">return</span> X,Z,new_samples,m_mse,x,avg_y,contribution</span><br></pre></td></tr></table></figure>
<h4 id="方法1-对图片分别降维"><a href="#方法1-对图片分别降维" class="headerlink" title="方法1-对图片分别降维"></a>方法1-对图片分别降维</h4><p>图片处理函数，提出RGB三个通道之后，对每一张图片分别进行降维处理，最后计算得到MSE、压缩率、压缩空间的均值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">image_result1</span><span class="params">(img_path,alpha)</span>:</span></span><br><span class="line">    a=imageio.imread(img_path)</span><br><span class="line">    a_np=np.array(a)</span><br><span class="line">    <span class="comment"># 提出RGB三个通道</span></span><br><span class="line">    a_r=a_np[:,:,<span class="number">0</span>]</span><br><span class="line">    a_g=a_np[:,:,<span class="number">1</span>]</span><br><span class="line">    a_b=a_np[:,:,<span class="number">2</span>]</span><br><span class="line">   	<span class="comment"># 获得降维后的向量与原图的误差、压缩率，节省空间</span></span><br><span class="line">    a_r_recon,a_r_recon_error,r_x,r_y,r_contribution =PCA(a_r,alpha)</span><br><span class="line">    a_g_recon,a_g_recon_error,g_x,g_y,g_contribution =PCA(a_g,alpha)</span><br><span class="line">    a_b_recon,a_b_recon_error,b_x,b_y,b_contribution =PCA(a_b,alpha)</span><br><span class="line">    recon_color_img=np.dstack((a_r_recon,a_g_recon,a_b_recon))</span><br><span class="line">    recon_color_img=Image.fromarray(recon_color_img)</span><br><span class="line">    mse = a_r_recon_error+a_g_recon_error+a_b_recon_error</span><br><span class="line">		<span class="comment"># recon_color_img.show()#显示图像</span></span><br><span class="line">    <span class="keyword">return</span> 	a_r_recon_error,a_g_recon_error,a_b_recon_error,</span><br><span class="line">						r_x,g_x,b_x,</span><br><span class="line">  					r_y,g_y,b_y,</span><br><span class="line">    				mse,r_contribution</span><br><span class="line">errors_r1=[]</span><br><span class="line">errors_g1=[]</span><br><span class="line">errors_b1=[]</span><br><span class="line">errors_avg1 = []</span><br><span class="line">cr1=[]</span><br><span class="line">compacts1=[]</span><br><span class="line">dir=os.listdir(<span class="string">"./airplane/"</span>)</span><br></pre></td></tr></table></figure>
<h4 id="方法2-合并降维"><a href="#方法2-合并降维" class="headerlink" title="方法2-合并降维"></a>方法2-合并降维</h4><p>第二种方法，在将RGB通道提取出来然后将所有的图像reshape称一个一维向量，然后按行堆叠成为一个大矩阵。并进行PCA降维。最后再将得到的重构矩阵分割变回(256,256,3)的矩阵</p>
<p>首先我们来写一个扁平化的函数，并对不是256x256的图片进行补0操作</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">flatten</span><span class="params">(path)</span>:</span></span><br><span class="line">    a=imageio.imread(path)</span><br><span class="line">    a_np=np.array(a)</span><br><span class="line">    a_r=a_np[:,:,<span class="number">0</span>] <span class="comment"># shape:(256,256)</span></span><br><span class="line">    a_g=a_np[:,:,<span class="number">1</span>]</span><br><span class="line">    a_b=a_np[:,:,<span class="number">2</span>]</span><br><span class="line">    a_rs=a_r.reshape(<span class="number">1</span>,<span class="number">-1</span>)</span><br><span class="line">    a_gs=a_g.reshape(<span class="number">1</span>,<span class="number">-1</span>)</span><br><span class="line">    a_bs=a_b.reshape(<span class="number">1</span>,<span class="number">-1</span>)</span><br><span class="line">    n=a_rs.shape[<span class="number">1</span>]</span><br><span class="line">    m=a_gs.shape[<span class="number">1</span>]</span><br><span class="line">    k=a_bs.shape[<span class="number">1</span>]</span><br><span class="line">		<span class="comment"># 在这里我发现并不是所有的图像都是(256*256)的，因此我们在最后用0来填充</span></span><br><span class="line">    <span class="keyword">if</span> n!=<span class="number">65536</span>:</span><br><span class="line">        a_rs=np.pad(a_rs,((<span class="number">0</span>,<span class="number">0</span>),(<span class="number">0</span>,<span class="number">65536</span>-n)))</span><br><span class="line">    <span class="keyword">if</span> m!=<span class="number">65536</span>:</span><br><span class="line">        a_gs=np.pad(a_gs,((<span class="number">0</span>,<span class="number">0</span>),(<span class="number">0</span>,<span class="number">65536</span>-m)))</span><br><span class="line">    <span class="keyword">if</span> k!=<span class="number">65536</span>:</span><br><span class="line">        a_bs=np.pad(a_bs,((<span class="number">0</span>,<span class="number">0</span>),(<span class="number">0</span>,<span class="number">65536</span>-k)))</span><br><span class="line">    <span class="keyword">return</span> a_rs,a_gs,a_bs</span><br></pre></td></tr></table></figure>
<h4 id="方法3-2D-2DPCA"><a href="#方法3-2D-2DPCA" class="headerlink" title="方法3:2D-2DPCA"></a>方法3:2D-2DPCA</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">def</span> <span class="title">image_result3</span><span class="params">(alpha)</span>:</span></span><br><span class="line">    reconstruction_error=<span class="number">0</span></span><br><span class="line">    dir=os.listdir(<span class="string">"./airplane/"</span>)</span><br><span class="line">    count=<span class="number">0</span></span><br><span class="line">    <span class="comment"># 这一段的作用就是将不是256x256的图像补0，</span></span><br><span class="line">    samples_r = []</span><br><span class="line">    samples_g = []</span><br><span class="line">    samples_b = []</span><br><span class="line">    <span class="keyword">for</span> d <span class="keyword">in</span> dir:</span><br><span class="line">        <span class="keyword">if</span> d == <span class="string">'.DS_Store'</span>:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        path = <span class="string">"./airplane/"</span>+d</span><br><span class="line">        a_rs,a_gs,a_bs = flatten(path)</span><br><span class="line">        <span class="keyword">if</span> count==<span class="number">0</span>:</span><br><span class="line">            array_nr=a_rs</span><br><span class="line">            array_ng=a_gs</span><br><span class="line">            array_nb=a_bs</span><br><span class="line">        <span class="keyword">elif</span> count&gt;=<span class="number">99</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        a_r_pad = a_rs.reshape(<span class="number">256</span>,<span class="number">256</span>)</span><br><span class="line">        a_g_pad = a_gs.reshape(<span class="number">256</span>,<span class="number">256</span>)</span><br><span class="line">        a_b_pad = a_bs.reshape(<span class="number">256</span>,<span class="number">256</span>)</span><br><span class="line">        <span class="comment"># 最后拼接称一个图片列表</span></span><br><span class="line">        samples_r.append(a_r_pad)</span><br><span class="line">        samples_g.append(a_g_pad)</span><br><span class="line">        samples_b.append(a_b_pad)</span><br><span class="line">        count=count+<span class="number">1</span></span><br><span class="line">   </span><br><span class="line">    X_r,Z_r,new_samples_r,m_mse_r,r_x,r_y,cont_r = TwoDPCA(samples_r,alpha) </span><br><span class="line">    X_g,Z_g,new_samples_g,m_mse_g,g_x,g_y,cont_g = TwoDPCA(samples_g,alpha) </span><br><span class="line">    X_b,Z_b,new_samples_b,m_mse_b,b_x,b_y,cont_b = TwoDPCA(samples_b,alpha) </span><br><span class="line">    <span class="comment"># 计算总mse</span></span><br><span class="line">    total_mse = m_mse_r+m_mse_g+m_mse_b</span><br><span class="line">    <span class="comment"># 计算压缩率</span></span><br><span class="line">    avgx = (r_x+g_x+b_x)/<span class="number">3</span></span><br><span class="line">    <span class="comment"># 计算节省空间</span></span><br><span class="line">    total_decl = r_y+g_y+b_y</span><br><span class="line"><span class="comment">#     recon_color_img=np.dstack((new_samples_r[0],new_samples_g[0],new_samples_b[0]))</span></span><br><span class="line"><span class="comment">#     recon_color_img=Image.fromarray(recon_color_img)</span></span><br><span class="line"><span class="comment">#     recon_color_img.show()#显示图像</span></span><br><span class="line">    <span class="keyword">return</span> total_mse,avgx,total_decl,cont_r</span><br></pre></td></tr></table></figure>
<h3 id="实验结果（验证提出方法的有效性和高效性）"><a href="#实验结果（验证提出方法的有效性和高效性）" class="headerlink" title="实验结果（验证提出方法的有效性和高效性）"></a>实验结果（验证提出方法的有效性和高效性）</h3><h4 id="两种方法在不同压缩精度下的降维表现"><a href="#两种方法在不同压缩精度下的降维表现" class="headerlink" title="两种方法在不同压缩精度下的降维表现"></a>两种方法在不同压缩精度下的降维表现</h4><p>首先我们来看看三种方法的主成分选取 </p>
<p><img src="/2021/11/20/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E7%AE%97%E6%B3%95-Project1/11.png" style="zoom: 100%;"></p>
<p>分析：</p>
<p>我们发现无论是那种方法，前几个特征值的贡献率非常高，越到后面特征值的贡献度越低。整个曲线的斜率随着选取特征值的数量的增多而逐渐变慢。 这就导致了随着压缩精度的增加，后期每提升一个单位(这里是5%)的压缩精度，会选择更多的特征向量，即包含更多的图片细节。</p>
<p>此外，从这张图里我们还可以知道，在相同的压缩精度下，共同压缩的方法选择的特征值要多于独立压缩方法的特征值，也就是说保持压缩精度相同的情况下，第二种方法降维得到的图片要比第一种方法保留下更多的信息。</p>
<p>从下面两掌对比图我们也可以很清楚地看到，第二种方法在压缩精度50%左右就能达到第一种方法90%左右的效能。这样一来，我们会发现第二种共同降维的方法会比第一种方法更为高效</p>
<p><img src="/2021/11/20/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E7%AE%97%E6%B3%95-Project1/5.png" style="zoom:150%;"></p>
<p><img src="/2021/11/20/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E7%AE%97%E6%B3%95-Project1/4.png" style="zoom:150%;"></p>
<p>对于第三种方法2D-2DPCA,情况有了些变化，从上面曲线图可以看出，这种方法位于前两种方法中间。按照理论来说应该是相同压缩精度下效果要好于单独压缩方法、差与共同压缩方法。但是从下图可以看出，在alpha相等的情况下，这种方法甚至不如第一种，这可能是和将所有图片求平均后，靠前的主成分包含了太多图片中相似的地方，导致重构出来的图片非常模糊</p>
<p><img src="/2021/11/20/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E7%AE%97%E6%B3%95-Project1/12.png" style="zoom:150%;"></p>
<h4 id="RGB三通道在不同压缩精度下的MSE"><a href="#RGB三通道在不同压缩精度下的MSE" class="headerlink" title="RGB三通道在不同压缩精度下的MSE"></a>RGB三通道在不同压缩精度下的MSE</h4><p><img src="/2021/11/20/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E7%AE%97%E6%B3%95-Project1/6.png" style="zoom:67%;"></p>
<p>我们发现，随着压缩精度的提升，RGB三个通道的MSE普遍称减小态势。而且到了80%-95%这个阶段MSE下降的斜率增大了，这可能是因为在这个阶段单位压缩精度的提升将会选取更多的特征向量，从而导致MSE的迅速减小</p>
<p>此外，我们还发现相比于红色和绿色，蓝色通道的MSE会更小一点。而红色和绿色的下降趋势基本一致，在最后阶段绿色下降的更快一些</p>
<h4 id="重构是否加回中心"><a href="#重构是否加回中心" class="headerlink" title="重构是否加回中心"></a>重构是否加回中心</h4><p>返回加上均值后的压缩图片，如下</p>
<p><img src="/2021/11/20/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E7%AE%97%E6%B3%95-Project1/3.png" style="zoom:150%;"></p>
<p>返回不加均值后的压缩图片，如下</p>
<p><img src="/2021/11/20/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E7%AE%97%E6%B3%95-Project1/1.png" style="zoom:150%;"></p>
<p>我们发现，加上均值以后的图片仿佛就像上了颜色一样，这是因为在这幅图片中背景大多数是一个颜色的，当我们减去均值的时候就约等于去掉了背景的颜色。</p>
<p>因此加上均值的图片会更加清晰，画质也会更好</p>
<h4 id="三种方法的效果比较"><a href="#三种方法的效果比较" class="headerlink" title="三种方法的效果比较"></a>三种方法的效果比较</h4><p><img src="/2021/11/20/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E7%AE%97%E6%B3%95-Project1/13.png"></p>
<ul>
<li>从上图我们可以看出，无论采用哪种方法，随着压缩精度的提升，所有方法的MSE都呈下降趋势。这符合逻辑，因为保留的细节增加了，误差自然下降了</li>
<li>这里我没有搞明白的一点就是为什么一张图片，单独压缩的MSE要远远大于共同压缩的MSE以及2D-2DPCA得到的MSE。有点不太符合逻辑。虽然单独压缩保留的信息最少，但是也不至于大70倍之多。因此可能是设计逻辑出现了点问题，还没完全弄明白。</li>
</ul>
<hr>
<p><img src="/2021/11/20/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E7%AE%97%E6%B3%95-Project1/9.png"></p>
<ul>
<li><p>上图表现了两种方法在不同精度下的压缩率，压缩率指的是 压缩后大小/压缩前大小。我们发现随着压缩精度的提高，选择的特征向量也就越多，因此保留的图片信息也就越复杂。进而压缩率也越高。因为相同压缩精度下，100张图片共同压缩方法能选取更多的特征向量，因此共同压缩的压缩率普遍高于单独压缩的压缩率。</p>
</li>
<li><p>第三种方法比较特别，因为经过行和列两个维度上的降维，导致得到的特征矩阵很小，表现在压缩率比前两种方法都要小上，符合逻辑</p>
</li>
</ul>
<hr>
<p><img src="/2021/11/20/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E7%AE%97%E6%B3%95-Project1/7.png"></p>
<ul>
<li><p>最后来看三种方法的节省的空间与压缩精度的变化关系。这张图可以和第一章主成分贡献率相呼应。随着压缩精度的增加，选取的特征向量的个数也就越多，进而得到的重构矩阵也就越大，节省的空间也越来越小，且称加速趋势。</p>
</li>
<li><p>此外，第一种单独压缩的方法选择了最少的特征值，因此节省的空间始终最多。第二种共同压缩的方法选择了最多的特征值，因此节省的空间始终最少。第三种2D-2DPCA的方法选择的特征值处于两者之间，进而节省的空间也介于两者之中。</p>
</li>
</ul>
<h3 id="结论-对使用的方法可能存在的不足进行分析，以及未来可能的研究方向进行讨论）"><a href="#结论-对使用的方法可能存在的不足进行分析，以及未来可能的研究方向进行讨论）" class="headerlink" title="结论(对使用的方法可能存在的不足进行分析，以及未来可能的研究方向进行讨论）"></a>结论(对使用的方法可能存在的不足进行分析，以及未来可能的研究方向进行讨论）</h3><p> 不足点还是有很多的：</p>
<ol>
<li>对如何界定节省的空间，不同的方法我没有很好的统一起来，只能定性得分析、对比一下。</li>
<li>对于MSE为何三种方法相差那么大，我并没有给出一个很好的解释。</li>
<li>没有探讨如何更科学的评估、测试一个PCA算法的好坏</li>
<li>只用了一个测试集，此算法在另外两个测试集效果如何仍然未知</li>
<li>对于参数的把握有点粗糙，可以再打磨一下</li>
</ol>
<p>未来可能的研究方向：</p>
<ol>
<li>研究KPCA 核主成分分析方法，应该可以达到更好的降维效果</li>
</ol>

      
    </div>
    
    
    
    <div>
      
        <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束，感谢您的阅读-------------</div>
    
</div>

      
    </div>
    

    

    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>Post author:</strong>
    Jason
  </li>
  <li class="post-copyright-link">
    <strong>Post link:</strong>
    <a href="https://jasonxqh.github.io/2021/11/20/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E7%AE%97%E6%B3%95-Project1/" title="《数据科学与工程算法基础》实践报告">https://jasonxqh.github.io/2021/11/20/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E7%AE%97%E6%B3%95-Project1/</a>
  </li>
  <li class="post-copyright-license">
    <strong>Copyright Notice: </strong>
    All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> unless stating additionally.
  </li>
</ul>

      </div>
    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2021/11/15/%E6%95%B0%E6%8D%AE%E6%AD%A3%E7%A1%AE%E6%80%A7%E4%B8%8E%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86/" rel="next" title="数据正确性与事务处理">
                <i class="fa fa-chevron-left"></i> 数据正确性与事务处理
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2021/11/23/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E7%AE%97%E6%B3%95ch11-%E6%95%B4%E6%95%B0%E8%A7%84%E5%88%92/" rel="prev" title="数据科学算法ch11-整数规划">
                数据科学算法ch11-整数规划 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="lv-container" data-id="city" data-uid="MTAyMC80OTgyMC8yNjMxMQ=="></div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Jason</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives%7C%7C%20archive">
              
                  <span class="site-state-item-count">423</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">57</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/JasonXQH" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:10195501423@stu.ecnu.edu.cn" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://yanghong.tech/" title="友链:杨弘的博客" target="_blank">友链:杨弘的博客</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://ankate.github.io/" title="友链:赵奕轲的博客" target="_blank">友链:赵奕轲的博客</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://github.com/JasonXQH/JasonXQH.github.io" title="Like it, STAR ME" target="_blank">Like it, STAR ME</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#《数据科学与工程算法基础》实践报告"><span class="nav-number">1.</span> <span class="nav-text">《数据科学与工程算法基础》实践报告</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#提供中英文摘要"><span class="nav-number">1.0.1.</span> <span class="nav-text">提供中英文摘要</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#摘要-中文-："><span class="nav-number">1.0.1.1.</span> <span class="nav-text">摘要 [中文]：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Abstract-英语"><span class="nav-number">1.0.1.2.</span> <span class="nav-text">Abstract [英语]</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#项目概述（阐明该项目的科学和应用价值，以及相关工作进展并描述项目的主要内容）"><span class="nav-number">1.0.2.</span> <span class="nav-text">项目概述（阐明该项目的科学和应用价值，以及相关工作进展并描述项目的主要内容）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#问题描述（问题定义）"><span class="nav-number">1.0.3.</span> <span class="nav-text">问题描述（问题定义）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#方法（问题解决步骤和实现细节）"><span class="nav-number">1.0.4.</span> <span class="nav-text">方法（问题解决步骤和实现细节）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#PCA"><span class="nav-number">1.0.4.1.</span> <span class="nav-text">PCA</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2D-2DPCA"><span class="nav-number">1.0.5.</span> <span class="nav-text">2D-2DPCA</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#方法1-对图片分别降维"><span class="nav-number">1.0.5.1.</span> <span class="nav-text">方法1-对图片分别降维</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#方法2-合并降维"><span class="nav-number">1.0.5.2.</span> <span class="nav-text">方法2-合并降维</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#方法3-2D-2DPCA"><span class="nav-number">1.0.5.3.</span> <span class="nav-text">方法3:2D-2DPCA</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实验结果（验证提出方法的有效性和高效性）"><span class="nav-number">1.0.6.</span> <span class="nav-text">实验结果（验证提出方法的有效性和高效性）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#两种方法在不同压缩精度下的降维表现"><span class="nav-number">1.0.6.1.</span> <span class="nav-text">两种方法在不同压缩精度下的降维表现</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#RGB三通道在不同压缩精度下的MSE"><span class="nav-number">1.0.6.2.</span> <span class="nav-text">RGB三通道在不同压缩精度下的MSE</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#重构是否加回中心"><span class="nav-number">1.0.6.3.</span> <span class="nav-text">重构是否加回中心</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#三种方法的效果比较"><span class="nav-number">1.0.6.4.</span> <span class="nav-text">三种方法的效果比较</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#结论-对使用的方法可能存在的不足进行分析，以及未来可能的研究方向进行讨论）"><span class="nav-number">1.0.7.</span> <span class="nav-text">结论(对使用的方法可能存在的不足进行分析，以及未来可能的研究方向进行讨论）</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart" aria-hidden="true"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jason</span>
 <!--
  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">1233.1k</span>
  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>



-->
        







        
      </div>
    </footer>

    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  
    <script type="text/javascript">
      (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
      })(document, 'script');
    </script>
  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('-1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  


  

  

</body>
</html>

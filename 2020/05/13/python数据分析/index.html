<!DOCTYPE html>
<html lang="en">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"jasonxqh.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="python数据分析这篇博文是对anaconda中的jupyter notebook进行的学习 学习网站点这里  Series in Pandasdocumentation ，里面介绍了很多 api  How does a Pandas Series differ from a Python list or dict?Series against dict:Similarities:  Acces">
<meta property="og:type" content="article">
<meta property="og:title" content="python数据分析">
<meta property="og:url" content="https://jasonxqh.github.io/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/index.html">
<meta property="og:site_name" content="Jason‘s Blog">
<meta property="og:description" content="python数据分析这篇博文是对anaconda中的jupyter notebook进行的学习 学习网站点这里  Series in Pandasdocumentation ，里面介绍了很多 api  How does a Pandas Series differ from a Python list or dict?Series against dict:Similarities:  Acces">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://jasonxqh.github.io/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/1.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/2.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/3.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/5.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/4.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/6.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/8.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/7.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/9.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/10.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/11.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/12.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/13.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/14.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/15.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/16.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/17.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/18.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/19.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/20.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/21.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/22.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/23.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/24.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/25.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/0.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/28.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/29.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/30.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/31.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/32.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/34.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/35.png">
<meta property="article:published_time" content="2020-05-13T06:18:08.000Z">
<meta property="article:modified_time" content="2020-06-11T16:59:46.000Z">
<meta property="article:author" content="Jason">
<meta property="article:tag" content="python">
<meta property="article:tag" content="数据可视化">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://jasonxqh.github.io/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/1.png">

<link rel="canonical" href="https://jasonxqh.github.io/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>python数据分析 | Jason‘s Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Jason‘s Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          python数据分析
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-05-13 14:18:08" itemprop="dateCreated datePublished" datetime="2020-05-13T14:18:08+08:00">2020-05-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-06-12 00:59:46" itemprop="dateModified" datetime="2020-06-12T00:59:46+08:00">2020-06-12</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="python数据分析"><a href="#python数据分析" class="headerlink" title="python数据分析"></a>python数据分析</h1><p>这篇博文是对anaconda中的jupyter notebook进行的学习</p>
<p><a href="https://milliams.com/courses/data_analysis_python/index.html" target="_blank" rel="noopener">学习网站点这里 </a></p>
<h2 id="Series-in-Pandas"><a href="#Series-in-Pandas" class="headerlink" title="Series in Pandas"></a>Series in Pandas</h2><p><a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.html" target="_blank" rel="noopener">documentation</a> ，里面介绍了很多 api</p>
<p><img src="/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/1.png" style="zoom:67%;"></p>
<h2 id="How-does-a-Pandas-Series-differ-from-a-Python-list-or-dict"><a href="#How-does-a-Pandas-Series-differ-from-a-Python-list-or-dict" class="headerlink" title="How does a Pandas Series differ from a Python list or dict?"></a>How does a Pandas <code>Series</code> differ from a Python <code>list</code> or <code>dict</code>?</h2><h4 id="Series-against-dict"><a href="#Series-against-dict" class="headerlink" title="Series against dict:"></a><code>Series</code> against <code>dict</code>:</h4><p>Similarities:</p>
<ul>
<li>Access by any kind of key</li>
</ul>
<p>Differences:</p>
<ul>
<li><code>Series</code> is ordered where <code>dict</code>s are not</li>
<li><code>Series</code> can have repeated indices</li>
<li>The data inside is stored with a <code>dtype</code> which makes things faster</li>
</ul>
<h4 id="Series-against-list"><a href="#Series-against-list" class="headerlink" title="Series against list"></a><code>Series</code> against <code>list</code></h4><p>Simila rities:</p>
<ul>
<li>The data inside has an order</li>
<li>Can index by integer</li>
</ul>
<p>Differences:</p>
<ul>
<li>Even is indexed by integer, the index does not denote position necessarily</li>
<li>Can index by any kind of key in principle</li>
<li>The data inside is stored with a <code>dtype</code> which makes things faster</li>
</ul>
<h3 id="Series-operations"><a href="#Series-operations" class="headerlink" title="Series operations"></a>Series operations</h3><p> Series 和 list 、dict都不一样，单都吸收了他们的优点。</p>
<p>比如我们要把列表中的数字都乘2，那么</p>
<p>当我们直接用list*2 发现只是列表复制了一遍，大小扩充了一倍。如果要实现我们的目标必须运用for语句</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[i * <span class="number">2</span> <span class="keyword">for</span> i <span class="keyword">in</span> my_list]</span><br></pre></td></tr></table></figure>
<p>但是对Series，我们直接可以进行上述操作，*2就是所有元素乘2，-2就是把所有元素-2，&lt;8就是把判断所有元素是否小于8</p>
<p><img src="/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/2.png" style="zoom:67%;"></p>
<h3 id="Querying"><a href="#Querying" class="headerlink" title="Querying"></a>Querying</h3><p> 可以直接在Series中括号中筛选数据，而不是通过判断来人工筛选</p>
<p><img src="/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/3.png" style="zoom:75%;"></p>
<h3 id="Multi-Series-operations"><a href="#Multi-Series-operations" class="headerlink" title="Multi-Series operations"></a>Multi-Series operations</h3><p>It is also possible to perform operations between two <code>Series</code> objects:</p>
<p>注意到这里的数据类型变成了float，一是因为我有个数据是5.5，二是因为int里面没有NaN这个数，只有float里面有</p>
<p><img src="/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/5.png" style="zoom:75%;"></p>
<h1 id="DataFrame"><a href="#DataFrame" class="headerlink" title="DataFrame"></a>DataFrame</h1><p>While you can think of the <code>Series</code> as a one-dimensional list of data, pandas’ <code>DataFrame</code> is a two (or possibly more) dimensional <em>table</em> of data. You can think of each column in the table as being a <code>Series</code>.</p>
<p><img src="/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/4.png" style="zoom:75%;"></p>
<p>我们有三列数据，因为再data字典中有三个列表</p>
<ul>
<li>我们也可以对dataframe进行筛选，可以从头部也可以从尾部开始筛选</li>
</ul>
<p><img src="/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/6.png" style="zoom:75%;"></p>
<p><img src="/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/8.png" style="zoom:75%;"></p>
<ul>
<li>也可以筛选一列中的数据</li>
</ul>
<p><img src="/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/7.png" style="zoom:75%;"></p>
<h3 id="Querying-1"><a href="#Querying-1" class="headerlink" title="Querying"></a>Querying</h3><p>We can start to ask questions of our data in the same way as we did with <code>Series</code>. If we grab a column from the <code>DataFrame</code> and do a comparison operation on it:</p>
<p>也可以判断、筛选 一个Series中的数据</p>
<p><img src="/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/9.png" style="zoom:75%;"></p>
<p><img src="/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/10.png" style="zoom:75%;"></p>
<p><img src="/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/11.png" style="zoom:75%;"></p>
<h3 id="Getting-rows"><a href="#Getting-rows" class="headerlink" title="Getting rows"></a>Getting rows</h3><p>If you want to select a <strong>row</strong> from a <code>DataFrame</code> then you can use the <code>.loc</code> attribute which allows you to pass index values like:</p>
<p>检索一个行中各类信息、特定信息</p>
<p><img src="/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/12.png" style="zoom:75%;"></p>
<h3 id="Add-and-Delete-columns"><a href="#Add-and-Delete-columns" class="headerlink" title="Add and Delete columns"></a>Add and Delete columns</h3><p><img src="/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/13.png" style="zoom:75%;"></p>
<h3 id="Exercise"><a href="#Exercise" class="headerlink" title="Exercise"></a>Exercise</h3><ul>
<li>Select the data for the year 2001. Which city had the smallest population that year?</li>
</ul>
<ol>
<li>首先选出year=2001年的pop列</li>
<li>在pop列中使用idxmin()，获取最小值的idx值，如果使用min()，那么显示2.148</li>
<li>在df中city列中查询idx，得到Paris</li>
<li>把他们合在一起，就是这样的检索方式</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df[<span class="string">"city"</span>][df[df[<span class="string">"year"</span>]==<span class="number">2001</span>][<span class="string">"pop"</span>].idxmin()]</span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/14.png" style="zoom:75%;"></p>
<ul>
<li>Find all the cities which had a population smaller than 2.6 million.</li>
</ul>
<p><img src="/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/15.png" style="zoom:75%;"></p>
<h1 id="Reading-from-file"><a href="#Reading-from-file" class="headerlink" title="Reading from file"></a>Reading from file</h1><p>One of the msot common situations is that you have some data file containing the data you want to read. Perhaps this is data you’ve produced yourself or maybe it’s from a collegue. In an ideal world the file will be perfectly formatted and will be trivial to import into pandas but since this is so often not the case, it provides a number of features to make your ife easier.</p>
<p>Full information on reading and writing is available in the pandas manual on <a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/io.html" target="_blank" rel="noopener">IO tools</a> but first it’s worth noting the common formats that pandas can work with:</p>
<ul>
<li>Comma separated tables (or tab-separated or space-separated etc.)</li>
<li>Excel spreadsheets</li>
<li>HDF5 files</li>
<li>SQL databases</li>
</ul>
<h3 id="Openfiles"><a href="#Openfiles" class="headerlink" title="Openfiles"></a>Openfiles</h3><p>首先我们利用pandas打开文件的操作，对于不同的文件有着不同的打开函数，可以看上面的IO tools查询</p>
<p>先来打开这个csv文件</p>
<p><img src="/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/16.png" style="zoom:75%;"></p>
<p>可以看到一开始的数据非常的混乱和糟糕，先让我们用skiprows函数跳过几行，直接到表格内容</p>
<p><img src="/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/17.png" style="zoom:75%;"></p>
<p>然后我们要找到能够把这个分割成一列一列的函数，这个函数时sep</p>
<p><img src="/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/18.png" style="zoom:75%;"></p>
<p>随后我们发现有些数据是-1，这是因为这里的数据没有被读取，我们要用na_values 把它标记为NaN</p>
<p><img src="/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/19.png" style="zoom:75%;"></p>
<p>但是这里的索引是0，1….不是很美观，我们想要用year当作索引，可以利用index_col函数</p>
<p><img src="/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/20.png" style="zoom:75%;"></p>
<p>这样就可以对文件中的数据进行处理和筛选了</p>
<h3 id="Exercise-1"><a href="#Exercise-1" class="headerlink" title="Exercise"></a>Exercise</h3><ul>
<li>Open the file at <a href="https://milliams.com/courses/data_analysis_python/cetml1659on.dat" target="_blank" rel="noopener">https://milliams.com/courses/data_analysis_python/cetml1659on.dat</a> into Pandas (this data is originally from the <a href="https://www.metoffice.gov.uk/hadobs/hadcet/data/download.html" target="_blank" rel="noopener">Met Office</a>). This contains some historical weather data for a location in the UK. Import that file as a Pandas <code>DataFrame</code> using <code>read_csv()</code>, making sure that you cover all the possible NaN values.</li>
<li>How many years had a negative average temperature in January?</li>
<li>What was the average temperature in June over the years in the data set? Tip: look in the <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.html" target="_blank" rel="noopener">documentation</a> for which method to call.</li>
</ul>
<p>好，我们看到这张数据表长这样</p>
<p><img src="/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/21.png" style="zoom:75%;"></p>
<p>所以按章上面的处理方式，我们并不能通过sep函数来分割列，所以这里用了函数，来分割</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delim_whitespace=<span class="literal">True</span>,  <span class="comment"># whitespace separated</span></span><br></pre></td></tr></table></figure>
<p>我们看到最后几个月没有数据，所以我们通过na_values函数把他们设置成NaN</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">na_values=[<span class="string">'-99.9'</span>, <span class="string">'-99.99'</span>],  <span class="comment"># NaNs</span></span><br></pre></td></tr></table></figure>
<p>然后要我们处理How many years had a negative average temperature in January?</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df3[df3[<span class="string">"JAN"</span>]&lt;<span class="number">0</span>]</span><br></pre></td></tr></table></figure>
<p>这样一句就出来了</p>
<p><img src="/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/22.png" style="zoom:75%;"></p>
<p>利用 len()求出数据条数</p>
<p><img src="/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/23.png" style="zoom:75%;"></p>
<p>利用mean()函数求出平均数</p>
<p><img src="/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/24.png" style="zoom:100%;"></p>
<p><img src="/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/25.png" style="zoom:75%;"></p>
<h2 id="利用matplotlib进行画图"><a href="#利用matplotlib进行画图" class="headerlink" title="利用matplotlib进行画图"></a>利用matplotlib进行画图</h2><h3 id="线状图"><a href="#线状图" class="headerlink" title="线状图"></a>线状图</h3><p>首先导入matplotlib ，然后导入数据库</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> pandas <span class="keyword">import</span> Series</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">df = pd.read_csv(</span><br><span class="line">    <span class="string">"https://milliams.com/courses/data_analysis_python/cetml1659on.dat"</span>,  <span class="comment"># file name</span></span><br><span class="line">    skiprows=<span class="number">6</span>,  <span class="comment"># skip header</span></span><br><span class="line">    delim_whitespace=<span class="literal">True</span>,  <span class="comment"># whitespace separated</span></span><br><span class="line">    na_values=[<span class="string">'-99.9'</span>, <span class="string">'-99.99'</span>],  <span class="comment"># NaNs</span></span><br><span class="line">)</span><br><span class="line">df.plot()</span><br></pre></td></tr></table></figure>
<p>如果我们直接写df.plot()那么就会很难看的一张图。。</p>
<p><img src="/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/0.png" style="zoom:75%;"></p>
<p>接下来我们要画出特定的一根线</p>
<p><img src="/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/28.png" style="zoom:75%;"></p>
<p>光秃秃的不好看，所以我们要加点标题</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">year_plot = df[<span class="string">"YEAR"</span>].plot()</span><br><span class="line">year_plot.set_ylabel(<span class="string">r"Temperature($^\circ$C)"</span>)</span><br></pre></td></tr></table></figure>
<p>$$中的就是数学公式，显示为 $^\circ$C</p>
<p><img src="/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/29.png" style="zoom:75%;"></p>
<h3 id="Exercise-2"><a href="#Exercise-2" class="headerlink" title="Exercise"></a>Exercise</h3><ul>
<li>Make sure you can reproduce the plot above. Try tweaking the labels or which column is plotted.</li>
<li>Try putting in two <code>plot()</code> calls with different months (January and July for example) before calling <code>show()</code>.</li>
<li>Add in a x-axis label</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">year_plot = df[<span class="string">'JAN'</span>].plot()</span><br><span class="line">year_plot = df[<span class="string">'JUN'</span>].plot()</span><br><span class="line"></span><br><span class="line">year_plot.set_xlabel(<span class="string">r'Year'</span>)</span><br><span class="line">year_plot.set_ylabel(<span class="string">r'Temperature ($^\circ$C)'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/30.png" style="zoom:75%;"></p>
<p>那最后的效果就像这样</p>
<p>字母前加r表示raw string，也叫原始字符串常量。一般用在一下两个方面:</p>
<p><img src="/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/31.png" style="zoom:75%;"></p>
<h3 id="柱状图"><a href="#柱状图" class="headerlink" title="柱状图"></a>柱状图</h3><p>如果我们直接用 </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df[<span class="string">"YEAR"</span>].plot.bar()</span><br></pre></td></tr></table></figure>
<p>那将会是很恐怖的一件事情，因为柱状图会很密很密</p>
<p><img src="/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/32.png" style="zoom:75%;"></p>
<p>所以我们要对单位做一个分割，用10年做一个分割。这是个重点</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pandas <span class="keyword">import</span> Series</span><br><span class="line"><span class="comment"># 这个就是让索引=index，创造一个存储index的列，并把它转换成str</span></span><br><span class="line">years = Series(df.index, index=df.index).apply(str)</span><br><span class="line"><span class="comment"># 运用lambda函数，对字符串进行分割后加上0，形成一个十年期</span></span><br><span class="line">decade=years.apply(<span class="keyword">lambda</span> x:x[:<span class="number">3</span>]+<span class="string">"0"</span>)</span><br><span class="line"><span class="comment"># 新增一列decade</span></span><br><span class="line">df[<span class="string">"decade"</span>] = decade</span><br><span class="line"><span class="comment"># 求出每隔十年的平均数，df[](指输出数据的结果属性名称).groupby([df[属性],df[属性])(指分类的属性，数据的限定定语，可以有多个).mean()(对于数据的计算方式——函数名称)</span></span><br><span class="line"><span class="comment"># 这里，对整个df表进行该操作,根据decade划分，相等的化为一组</span></span><br><span class="line">by_decade = df.groupby(df[<span class="string">"decade"</span>]).mean()</span><br><span class="line"><span class="comment"># 画出图像</span></span><br><span class="line">by_decade[<span class="string">"YEAR"</span>].plot.bar()</span><br></pre></td></tr></table></figure>
<p>直接输出by_decade结果如下：</p>
<p><img src="/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/34.png" style="zoom:75%;"></p>
<p><img src="/2020/05/13/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/35.png" style="zoom:75%;"></p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/python/" rel="tag"># python</a>
              <a href="/tags/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/" rel="tag"># 数据可视化</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/05/13/71%E7%AE%80%E5%8C%96%E8%B7%AF%E5%BE%84/" rel="prev" title="71简化路径">
      <i class="fa fa-chevron-left"></i> 71简化路径
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/05/13/%E5%AF%B9%E5%9D%90%E6%A0%87%E7%9A%84%E6%9B%B2%E9%9D%A2%E7%A7%AF%E5%88%86/" rel="next" title="对坐标的曲面积分">
      对坐标的曲面积分 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#python数据分析"><span class="nav-number">1.</span> <span class="nav-text">python数据分析</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Series-in-Pandas"><span class="nav-number">1.1.</span> <span class="nav-text">Series in Pandas</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-does-a-Pandas-Series-differ-from-a-Python-list-or-dict"><span class="nav-number">1.2.</span> <span class="nav-text">How does a Pandas Series differ from a Python list or dict?</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Series-against-dict"><span class="nav-number">1.2.0.1.</span> <span class="nav-text">Series against dict:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Series-against-list"><span class="nav-number">1.2.0.2.</span> <span class="nav-text">Series against list</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Series-operations"><span class="nav-number">1.2.1.</span> <span class="nav-text">Series operations</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Querying"><span class="nav-number">1.2.2.</span> <span class="nav-text">Querying</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Multi-Series-operations"><span class="nav-number">1.2.3.</span> <span class="nav-text">Multi-Series operations</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#DataFrame"><span class="nav-number">2.</span> <span class="nav-text">DataFrame</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Querying-1"><span class="nav-number">2.0.1.</span> <span class="nav-text">Querying</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Getting-rows"><span class="nav-number">2.0.2.</span> <span class="nav-text">Getting rows</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Add-and-Delete-columns"><span class="nav-number">2.0.3.</span> <span class="nav-text">Add and Delete columns</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Exercise"><span class="nav-number">2.0.4.</span> <span class="nav-text">Exercise</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Reading-from-file"><span class="nav-number">3.</span> <span class="nav-text">Reading from file</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Openfiles"><span class="nav-number">3.0.1.</span> <span class="nav-text">Openfiles</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Exercise-1"><span class="nav-number">3.0.2.</span> <span class="nav-text">Exercise</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#利用matplotlib进行画图"><span class="nav-number">3.1.</span> <span class="nav-text">利用matplotlib进行画图</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#线状图"><span class="nav-number">3.1.1.</span> <span class="nav-text">线状图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Exercise-2"><span class="nav-number">3.1.2.</span> <span class="nav-text">Exercise</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#柱状图"><span class="nav-number">3.1.3.</span> <span class="nav-text">柱状图</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Jason</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">439</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">68</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jason</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->




  















  

  

  

</body>
</html>

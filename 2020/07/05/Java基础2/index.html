<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="google-site-verification" content="y0-26jFM_8wn6Slpy1ahkB8ndR7w0OOGyAU6IaXjLUI" />














  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="java," />










<meta name="description" content="Java基础2ClassesClasses and Objects我们常常混淆 类和对象的概念。我们可见简单的将类看作是一个模板。比如说我定义了一个车的类。这个类里面有一些属性(Fields)和一些方法(Methods)：  而 Object 是 Class的实例。比如说 Car1，Car2，Car3.这些对象都有 Car Class的属性和方法，但是它们之间又是相互独立的。 Creating C">
<meta property="og:type" content="article">
<meta property="og:title" content="Java基础2">
<meta property="og:url" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/index.html">
<meta property="og:site_name" content="Jason‘s Blog">
<meta property="og:description" content="Java基础2ClassesClasses and Objects我们常常混淆 类和对象的概念。我们可见简单的将类看作是一个模板。比如说我定义了一个车的类。这个类里面有一些属性(Fields)和一些方法(Methods)：  而 Object 是 Class的实例。比如说 Car1，Car2，Car3.这些对象都有 Car Class的属性和方法，但是它们之间又是相互独立的。 Creating C">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/1.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/2.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/3.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/4.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/5.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/6.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/7.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/8.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/9.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/10.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/11.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/12.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/13.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/14.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/17.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/18.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/20.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/21.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/22.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/23.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/24.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/25.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/26.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/27.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/28.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/29.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/30.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/31.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/32.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/33.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/34.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/35.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/36.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/37.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/38.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/39.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/40.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/41.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/42.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/43.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/44.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/45.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/47.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/46.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/48.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/49.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/54.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/51.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/50.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/52.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/53.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/55.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/56.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/57.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/58.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/59.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/60.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/61.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/_posts/Java%E5%9F%BA%E7%A1%802/62.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/_posts/Java%E5%9F%BA%E7%A1%802/63.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/_posts/Java%E5%9F%BA%E7%A1%802/64.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/_posts/Java%E5%9F%BA%E7%A1%802/65.png">
<meta property="article:published_time" content="2020-07-05T10:26:43.000Z">
<meta property="article:modified_time" content="2022-08-24T20:29:50.000Z">
<meta property="article:author" content="Jason">
<meta property="article:tag" content="java">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/1.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":true,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://jasonxqh.github.io/2020/07/05/Java基础2/"/>





  <title>Java基础2 | Jason‘s Blog</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-170027658-1', 'auto');
  ga('send', 'pageview');
</script>





<meta name="generator" content="Hexo 4.2.0"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">
  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>
<a href="https://github.com/JasonXQH/JasonXQH.github.io" target="_blank" rel="noopener" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Jason‘s Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            Sitemap
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Java基础2</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-07-05T18:26:43+08:00">
                2020-07-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  11.2k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  45
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="Java基础2"><a href="#Java基础2" class="headerlink" title="Java基础2"></a>Java基础2</h1><h2 id="Classes"><a href="#Classes" class="headerlink" title="Classes"></a>Classes</h2><h3 id="Classes-and-Objects"><a href="#Classes-and-Objects" class="headerlink" title="Classes and Objects"></a>Classes and Objects</h3><p>我们常常混淆 类和对象的概念。我们可见简单的将类看作是一个模板。比如说我定义了一个车的类。这个类里面有一些属性(Fields)和一些方法(Methods)：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/1.png" style="zoom: 100%;"></p>
<p>而 Object 是 Class的实例。比如说 Car1，Car2，Car3.这些对象都有 Car Class的属性和方法，但是它们之间又是相互独立的。</p>
<h3 id="Creating-Classes"><a href="#Creating-Classes" class="headerlink" title="Creating Classes"></a>Creating Classes</h3><p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/2.png" style="zoom: 100%;"></p>
<p>注意，这里我把text初始化为了 “” 这是因为如果不初始化，那么新建对象的时候如果不调用setText, TextBox中的text就会被设置为null，而当我们对null进行字符串操作的时候，整个程序就会down掉</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TextBox</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String text = <span class="string">""</span>; <span class="comment">//field</span></span><br><span class="line">	<span class="comment">//method</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setText</span><span class="params">(String text)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.text = text;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span></span>&#123;</span><br><span class="line">        text = <span class="string">""</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Creating-Objects"><a href="#Creating-Objects" class="headerlink" title="Creating Objects"></a>Creating Objects</h3><p>回到 Main.java 我们可以对刚才创建的类示例化，也就是创建对象</p>
<p>我们不需要 用 TextBox textBox1来新建一个对象，直接 var textBox1 = new TextBox()即可，java会自动判断新建的对象是属于什么类的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> textBox1 = <span class="keyword">new</span> TextBox();</span><br><span class="line">        textBox1.setText(<span class="string">"Box 1"</span>);</span><br><span class="line">        System.out.println(textBox1.text.toUpperCase());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> textBox2 = <span class="keyword">new</span> TextBox();</span><br><span class="line">        textBox2.setText(<span class="string">"Box 2"</span>);</span><br><span class="line">        System.out.println(textBox1.text);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Memory-Allocation"><a href="#Memory-Allocation" class="headerlink" title="Memory Allocation"></a>Memory Allocation</h3><p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/3.png" style="zoom: 60%;"></p>
<p><a href="https://www.jianshu.com/p/ef0c80d1782c" target="_blank" rel="noopener">https://www.jianshu.com/p/ef0c80d1782c</a></p>
<ul>
<li><h5 id="Java-的内存管理就是对象的分配和释放的处理"><a href="#Java-的内存管理就是对象的分配和释放的处理" class="headerlink" title="Java 的内存管理就是对象的分配和释放的处理"></a>Java 的内存管理就是对象的分配和释放的处理</h5></li>
</ul>
<p>1.分配：通过关键字new创建对象分配内存空间，对象存在堆中。<br>2.释放 ：对象的释放是由垃圾回收机制决定和执行的。如果发现某一对象一段时间没有使用过后，就会被自动回收，不需要我们用C++的方法手动释放内存。</p>
<ul>
<li><h5 id="Java内存泄漏："><a href="#Java内存泄漏：" class="headerlink" title="Java内存泄漏："></a>Java内存泄漏：</h5></li>
</ul>
<p>当对象存在内存的引用，却不会再继续使用，对象会占用内存无法被GC回收，这些对象就会判定为内存泄漏。</p>
<ul>
<li><h5 id="Java内存区域划分："><a href="#Java内存区域划分：" class="headerlink" title="Java内存区域划分："></a>Java内存区域划分：</h5></li>
</ul>
<p>1.栈：<br> 在函数中定义的基本类型变量和对象的引用变量都在函数的栈内存中分配。栈数据可以共享。但缺点是，存在栈中的数据大小与生存期必须是确定的，缺乏灵活性。</p>
<p>2.堆：<br> 通过new生成的对象都存放在堆中，对于堆中的对象生命周期的管理由Java虚拟机的垃圾回收机制GC进行回收和统一管理。优点是可以动态分配内存大小，缺点是由于动态分配内存导致存取速度慢。</p>
<p>3.方法区：<br> 是各个线程共享的内存区域，它用于存储class二进制文件，包含了虚拟机加载的类信息、常量(常量池)、静态变量(静态域)、即时编译后的代码等数据。</p>
<p>1.常量池：<br> 常量池在编译期间就将一部分数据存放于该区域，包含以final修饰的基本数据类型的常量值、String字符串。</p>
<p>2.静态域：<br> 存放类中以static声明的静态成员变量。</p>
<p>3.程序计数器<br> 当前线程所执行的行号指示器。通过改变计数器的值来确定下一条指令，比如循环，分支，跳转，异常处理，线程恢复等都是依赖计数器来完成。 </p>
<h3 id="Procedural-Programming"><a href="#Procedural-Programming" class="headerlink" title="Procedural Programming"></a>Procedural Programming</h3><p>这段代码看起来是面向对象的编程，但是还是属于面向过程的编程。</p>
<p>面向过程的编程会有这样的特点，一个method和class中有很多很多的变量</p>
<p>这样的代码一旦出现了bug就会很难维护</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> baseSalary = <span class="number">50_000</span>;</span><br><span class="line">        <span class="keyword">int</span> extraHours = <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">int</span> hourlyRate = <span class="number">20</span>;</span><br><span class="line">        <span class="keyword">int</span> wage = calculateWage(baseSalary,extraHours,hourlyRate);</span><br><span class="line">        System.out.println(wage);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">calculateWage</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">int</span> baseSalary,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">int</span> extraHours,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">int</span> hourlyRate</span></span></span><br><span class="line"><span class="function"><span class="params">    )</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> baseSalary+(extraHours*hourlyRate);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Encapsulation"><a href="#Encapsulation" class="headerlink" title="Encapsulation"></a>Encapsulation</h3><p>为了避免类中成员暴露在外，使得类成员变量被随意赋值或者更改。所以我们需要封装来实现数据的隐藏。应禁止直接访问一个对象中数据的实际表示。</p>
<p>我们把变量和方法都放在了一个类当中，在main类中创建Employee实例。</p>
<p>因为extraHours每个月可能都会不一样，所以我们可以把他作为方法中的一个变量传入。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Emoloyee</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> baseSalary;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> hourlyRate;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">calculateWage</span><span class="params">(<span class="keyword">int</span> extraHours)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> baseSalary+(hourlyRate*extraHours);</span><br><span class="line">    &#125;</span><br><span class="line">        </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们看到，一个职员的基本薪资、公式都是public的，这属于商业机密，不能公开，因此需要用private来修饰。如果不用的话，我们在Main类中就可以随意修改Employee的敏感信息了</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> employee = <span class="keyword">new</span> Emoloyee();</span><br><span class="line">        employee.baseSalary = <span class="number">50_000</span>;</span><br><span class="line">        employee.hourlyRate = <span class="number">20</span>;</span><br><span class="line">        <span class="keyword">int</span> wage = employee.calculateWage(<span class="number">10</span>);</span><br><span class="line">        System.out.println(wage);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>因此，我们需要用到 getter和setter，来获取和设置类中的private变量</p>
<h3 id="Getters-and-Setters-Title"><a href="#Getters-and-Setters-Title" class="headerlink" title="Getters and Setters - Title"></a>Getters and Setters - Title</h3><p>但是像上面那样程序会存在bug，因为我如果把baseSalary =-1，这会出现错误。所以我们在程序当中需要用到一些验证手段。</p>
<p>我们把baseSalary 和hourlyRate</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/4.png" style="zoom: 100%;"></p>
<p>我们可以点击 hourlyRate 这个变量 alt+enter 唤出 encapsulate field hourlyRate 然后出现上面的界面。我们可以把这个变量设置为可读或者可改的。然后idea就会帮我们自己生成这个变量的getter和setter，我们只需要添加我们想要的验证代码即可。</p>
<p>更美妙的是，回到Main.java 我们发现：idea已经自动把刚才的 employee.hourlyRate = 20 替换成了employee.setHourlyRate(20); 美哉</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Emoloyee</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> baseSalary;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> hourlyRate;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Emoloyee</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">calculateWage</span><span class="params">(<span class="keyword">int</span> extraHours)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> baseSalary+(getHourlyRate() *extraHours);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBaseSalary</span><span class="params">(<span class="keyword">int</span> baseSalary)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(baseSalary &lt;= <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Salary cannot be 0 or less"</span>);</span><br><span class="line">        <span class="keyword">this</span>.baseSalary = baseSalary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getBaseSalary</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> baseSalary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getHourlyRate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> hourlyRate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHourlyRate</span><span class="params">(<span class="keyword">int</span> hourlyRate)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(hourlyRate&lt;=<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"hourlyRate cannot be 0 or less"</span>);</span><br><span class="line">        <span class="keyword">this</span>.hourlyRate = hourlyRate;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Abstraction"><a href="#Abstraction" class="headerlink" title="Abstraction"></a>Abstraction</h3><p>Reduce complexity by hiding unnecessary details</p>
<p><a href="https://jasonxqh.github.io/2020/05/26/OOP-in-JavaScript/#Abstraction">见JavaScript中的Abstraction</a></p>
<h3 id="Coupling-耦合度"><a href="#Coupling-耦合度" class="headerlink" title="Coupling 耦合度"></a>Coupling 耦合度</h3><p>Coupling is the level of dependency between classes</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/5.png" style="zoom: 60%;"></p>
<p>我们可以将一些没有必要的方法设置为private，把一些必要的methods 暴露出去，这样就可以降低类和类之间的耦合度。</p>
<h3 id="Reducing-Coupling"><a href="#Reducing-Coupling" class="headerlink" title="Reducing Coupling"></a>Reducing Coupling</h3><p>下面是降低耦合度的例子，我们新建一个<code>Browser.java</code>类，我们把没必要暴露的 <code>sendHttpRequest</code> 和 <code>findIpAddress</code> 这两个 Methods ，所以我们把它设置为 private，这样它们只能在类内被调用，在其它类中无法被调用。只把最重要的 <code>navigate()</code>方法设置为public，这样在 Main class 当中，实例化一个类的时候只能用 navigate这个方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Browser</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">navigate</span><span class="params">(String address)</span></span>&#123;</span><br><span class="line">        String ip = findIpAddress(address);</span><br><span class="line">        String html = sendHttpRequest(ip);</span><br><span class="line">        System.out.println(html);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">sendHttpRequest</span><span class="params">(String ip)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"&lt;html&gt;&lt;/html&gt;"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">findIpAddress</span><span class="params">(String address )</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"127.0.0.1"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> browser = <span class="keyword">new</span> Browser();</span><br><span class="line">        browser.navigate(<span class="string">"..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Constructors"><a href="#Constructors" class="headerlink" title="Constructors"></a>Constructors</h3><p>我们发现，现在的main.java 是这样的：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> employee = <span class="keyword">new</span> Emoloyee();</span><br><span class="line">        employee.setBaseSalary(<span class="number">50_000</span>);</span><br><span class="line">        employee.setHourlyRate(<span class="number">20</span>); </span><br><span class="line">        <span class="keyword">int</span> wage = employee.calculateWage(<span class="number">10</span>);</span><br><span class="line">        System.out.println(wage);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这是一个bad design，因为我们如果要使用employee类，我们就必须要依次调用setBaseSalary和setHourRate方法，否则baseSalary和HourlyRate就是0。</p>
<p>所以我们要简化这个类的接口，这样我们操作起来就比较方便。所以我们就要用到构造函数<strong>Constructor</strong>，在我们声明新对象的时候就把数据传入。</p>
<p>在Employee类中，我们这样修改：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> baseSalary;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> hourlyRate;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(<span class="keyword">int</span> baseSalary, <span class="keyword">int</span> hourlyRate)</span> </span>&#123;</span><br><span class="line">        setBaseSalary(baseSalary);</span><br><span class="line">        setHourlyRate(hourlyRate);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">calculateWage</span><span class="params">(<span class="keyword">int</span> extraHours)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> baseSalary+(getHourlyRate() *extraHours);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setBaseSalary</span><span class="params">(<span class="keyword">int</span> baseSalary)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(baseSalary &lt;= <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Salary cannot be 0 or less"</span>);</span><br><span class="line">        <span class="keyword">this</span>.baseSalary = baseSalary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">getBaseSalary</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> baseSalary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">getHourlyRate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> hourlyRate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setHourlyRate</span><span class="params">(<span class="keyword">int</span> hourlyRate)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(hourlyRate&lt;=<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"hourlyRate cannot be 0 or less"</span>);</span><br><span class="line">        <span class="keyword">this</span>.hourlyRate = hourlyRate;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>也就是说我们新建一个构造函数 Employee ,然后在这个构造函数中传入两个参数 baseSalary和hourlyRate，再调用setter方法(因为setter会做一个合法性判断，比直接赋值来的安全)将两个参数的值赋给类中两个成员。此外，我们还需要把两个setter改成private，以防止在调用constructor之后再对baseSalary和hourlyRate两个值进行修改，这样暴露在外的接口就只剩下calculateWage了。</p>
<p>这样在main函数中代码可以变得更为精简</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> employee = <span class="keyword">new</span> Employee(</span><br><span class="line">                <span class="number">50_000</span>,</span><br><span class="line">                <span class="number">20</span>);</span><br><span class="line">        <span class="keyword">int</span> wage = employee.calculateWage(<span class="number">10</span>);</span><br><span class="line">        System.out.println(wage);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>和C++一样，如果我们不声明一个构造函数，那么java会自动帮我们创建一个缺省的构造函数。他会帮我们初始化成员值：int 类型的都设置为0 ，Boolean类型的都设置为False等。</p>
<h3 id="Method-Overloading"><a href="#Method-Overloading" class="headerlink" title="Method Overloading"></a>Method Overloading</h3><p>方法重载，我们可以用这种办法定义很多方法名字相同但是参数不同的方法，比如说现在我受伤的calculateWage方法，通过重载，我可以既传入一个extraHours参数，也可以什么都不传，代表着extraHours=0。代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">calculateWage</span><span class="params">(<span class="keyword">int</span> extraHours)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> baseSalary+(getHourlyRate() *extraHours);</span><br><span class="line">&#125;   </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">calculateWage</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> baseSalary;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当然我们不建议多次重载，这样会让软件很难维护。通常一个方法需要接受多种不同类型的参数的时候才会用到重载。</p>
<h3 id="Constructor-Overloading"><a href="#Constructor-Overloading" class="headerlink" title="Constructor Overloading"></a>Constructor Overloading</h3><p>我们也可以重载构造函数。如下：</p>
<p>利用this(),直接调用构造函数。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(<span class="keyword">int</span> baseSalary, <span class="keyword">int</span> hourlyRate)</span> </span>&#123;</span><br><span class="line">    setBaseSalary(baseSalary);</span><br><span class="line">    setHourlyRate(hourlyRate);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(<span class="keyword">int</span> baseSalary )</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>(baseSalary,<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Static-Members"><a href="#Static-Members" class="headerlink" title="Static Members"></a>Static Members</h3><p>静态成员，包括静态方法和静态变量，是只能在类中实现的，它们不属于任何一个实例对象。</p>
<p>比如我可以新建一个 Employee.numberOfEmplotees和printNumberOfEmployees方法来计算和输出Employee的个数，但这个属性不属于任何一个实例Employee对象而是属于这个Employee类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> numberOfEmployees;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printNumberOfEmployees</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(numberOfEmployees);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(<span class="keyword">int</span> baseSalary, <span class="keyword">int</span> hourlyRate)</span> </span>&#123;</span><br><span class="line">    setBaseSalary(baseSalary);</span><br><span class="line">    setHourlyRate(hourlyRate);</span><br><span class="line">    numberOfEmployees++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但是要注意，我们在static 方法当中不能调用类中的出static方法以外的其他方法，如calculateWage().这也是为什么我们一开始在Main类当中添加的方法都被声明为static方法，这是为了在main方法中能够调用他们(都是static可以调用)</p>
<p>那么为什么main方法是静态的呢？这是为了能让Java能不创建一个新的对象，而直接调用这个main方法</p>
<p>我们同样可以发现，System 类中也有很多很多的静态方法：System.out,System.in 又比如说 Interger.parseInt()(转换为整数)也属于静态方法</p>
<h3 id="Classes-Quiz"><a href="#Classes-Quiz" class="headerlink" title="Classes Quiz"></a>Classes Quiz</h3><p>1- A class is a blueprint or template for creating objects. An object is an instance of a class.<br>2- Instantiating means creating an instance of a class: new Customer()<br>3- Stack is used for storing primitive types (numbers, boolean and character) and variables that store references to objects in the heap. Variables stored in the stack are immediately cleared when they go out of scope (eg when a method finishes execution). Objects stored in the heap get removed later on when they’re no longer references. This is done by Java’s garbage collector.<br>4- Big classes with several unrelated methods focusing on different concerns and responsibilities. These methods often have several parameters. You often see the same group of parameters repeated across these methods. All you see is procedures calling each other passing arguments around.<br>By applying object-oriented programming techniques, we extract these repetitive parameters and declare them as fields in our classes. Our classes will then encapsulate both the data and the operations on the data (methods). As a result, our methods will have fewer parameters and our code will be cleaner and more reusable.<br>5- Encapsulation is the first principle of object-oriented programming. It suggests that we should bundle the data and operations on the data inside a single unit (class).<br>6- How we store data in an object is considered an implementation detail. We may change how we store the data internally. Plus, we don’t want our objects to go into a bad state (hold bad data). That’s why we should declare fields as private and provide getters and or setters only if required. These setters can ensure our objects don’t go into a bad state by validating the values that are passed to them.<br>7- Abstraction is the second principle of object-oriented programming. It suggests that we should reduce complexity by hiding the unnecessary implementation details. As a metaphor, think of the remote control of your TV. All the complexity inside the remote control is hidden from you. It’s abstracted away. You just work with a simple interface to control your TV. We want our objects to be like our remote controls.<br>8- Coupling represents the level of dependency between software entities (eg classes). The more our classes are dependent on each other, the harder it is to change them. Changing one class may result in several cascading and breaking changes.<br>9- By hiding the implementation details, we prevent other classes from getting affected when we change these details. For example, if the logic board and transistors inside a remote control change from one model to another, we’re not affected. We still use the same interface to work with our TV. Also, reducing these details and exposing fewer methods makes<br>our classes easier to use. For example, remote controls with fewer buttons are easier to use.<br>10- Constructors are called when we instantiate our class. We use them to initialize our objects. Initialization means putting an object into an early or initial state (eg giving it initial values).<br>11- Method overloading means declaring a method with the same name but with different signatures. The number, type and order of its parameters will be different.<br>12- Static methods are accessible via classes, not objects</p>
<h2 id="Refactoring-Towards-an-Object-oriented-Design"><a href="#Refactoring-Towards-an-Object-oriented-Design" class="headerlink" title="Refactoring Towards an Object-oriented Design"></a>Refactoring Towards an Object-oriented Design</h2><h3 id="The-Problem"><a href="#The-Problem" class="headerlink" title="The Problem"></a>The Problem</h3><p>我们看到这个程序：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">package com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.<span class="built_in">text</span>.NumberFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> &#123;</span></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">byte</span> MONTHS_IN_YEAR = <span class="number">12</span>;</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">byte</span> PERCENT = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">String</span>[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">int</span> principal = (<span class="keyword">int</span>) readNumber(<span class="string">"Principal: "</span>,<span class="number">1000</span>,<span class="number">1000000</span>);</span><br><span class="line">        <span class="keyword">float</span> annualInterest = (<span class="keyword">float</span>)readNumber(<span class="string">"Annual Interest Rate: "</span>,<span class="number">1</span>,<span class="number">30</span>);</span><br><span class="line">        <span class="keyword">byte</span> years = (<span class="keyword">byte</span>)readNumber(<span class="string">"Period (Years): "</span>,<span class="number">1</span>,<span class="number">30</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">double</span> mortgage = calculateMortage(principal,annualInterest,years);</span><br><span class="line">        <span class="keyword">String</span> mortgageFormatted =</span><br><span class="line">                NumberFormat.getCurrencyInstance().format(mortgage);</span><br><span class="line">        System.out.<span class="built_in">println</span>();</span><br><span class="line">        System.out.<span class="built_in">println</span>(<span class="string">"MORTAGE"</span>);</span><br><span class="line">        System.out.<span class="built_in">println</span>(<span class="string">"------"</span>);</span><br><span class="line">        System.out.<span class="built_in">println</span>(<span class="string">"Mortgage: "</span> + mortgageFormatted);</span><br><span class="line"></span><br><span class="line">        System.out.<span class="built_in">println</span>();</span><br><span class="line">        System.out.<span class="built_in">println</span>(<span class="string">"PAYMENT SCHEDULE"</span>);</span><br><span class="line">        System.out.<span class="built_in">println</span>(<span class="string">"------"</span>);</span><br><span class="line">        <span class="keyword">for</span>(short month = <span class="number">1</span>;month&lt;= years*MONTHS_IN_YEAR;month++)&#123;</span><br><span class="line">            <span class="keyword">double</span> balance = calculateBalance(principal,annualInterest,years,month);</span><br><span class="line">            System.out.<span class="built_in">println</span>(NumberFormat.getCurrencyInstance().format(balance));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">readNumber</span><span class="params">(<span class="keyword">String</span> prompt,<span class="keyword">double</span> <span class="built_in">min</span>,<span class="keyword">double</span> <span class="built_in">max</span>)</span></span>&#123;</span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">double</span> value;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            System.out.<span class="built_in">print</span>(prompt);</span><br><span class="line">            value = scanner.nextInt();</span><br><span class="line">            <span class="keyword">if</span> (value &gt;= <span class="built_in">min</span> &amp;&amp; value &lt;= <span class="built_in">max</span>)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            System.out.<span class="built_in">println</span>(<span class="string">"Enter a value between "</span>+<span class="built_in">min</span>+<span class="string">" and "</span>+<span class="built_in">max</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">calculateBalance</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">int</span> principal,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">float</span> annualInterest,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">byte</span> years,</span></span></span><br><span class="line"><span class="function"><span class="params">            short numberOfPaymentMade)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        short numberOfPayments = (short)(years * MONTHS_IN_YEAR);</span><br><span class="line">        <span class="keyword">float</span> monthlyInterest = annualInterest / PERCENT / MONTHS_IN_YEAR;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">double</span> balance = principal*(Math.<span class="built_in">pow</span>(<span class="number">1</span>+monthlyInterest,numberOfPayments)-Math.<span class="built_in">pow</span>(<span class="number">1</span>+monthlyInterest,numberOfPaymentMade))/(Math.<span class="built_in">pow</span>(<span class="number">1</span>+monthlyInterest,numberOfPayments)<span class="number">-1</span>);</span><br><span class="line">        <span class="keyword">return</span> balance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">calculateMortage</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">int</span> principal,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">float</span> annualInterest,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">byte</span> years)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        short numberOfPayments = (short)(years * MONTHS_IN_YEAR);</span><br><span class="line">        <span class="keyword">float</span> monthlyInterest = annualInterest / PERCENT / MONTHS_IN_YEAR;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> principal</span><br><span class="line">                * (monthlyInterest * Math.<span class="built_in">pow</span>(<span class="number">1</span> + monthlyInterest, numberOfPayments))</span><br><span class="line">                / (Math.<span class="built_in">pow</span>(<span class="number">1</span> + monthlyInterest, numberOfPayments) - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>虽然这个程序可以正常运行，但是可以发现这个程序非常过程化，里面的methods都是互不联系的。我们既没有encapsulation，也没有abstraction 。我们现在我们需要把它重构成面向对象的代码。</p>
<h3 id="What-Classes-Do-We-Need"><a href="#What-Classes-Do-We-Need" class="headerlink" title="What Classes Do We Need?"></a>What Classes Do We Need?</h3><p>对于这个程序，我们需要设一个什么类呢？</p>
<p>比如 principal、annualInterest、years 这三个需要被读入的数据，我们可以建一个console class, 专门从命令行中读取数据。我们还有printMortgage、printPaymentSchedule这些用来打印数据的方法，我们可以新建一个 Mortgage report类来把这些方法放在那。注意，这两个方法不要放到console class当中去，因为console class只管读入数据，对于内部程序的运行尽量不要参与。</p>
<p>对于calculatebalance和calculateMortage这两个方法，传入的参数有三个相同，所以我们可以把他们放到一个类中，并由类来管理这三个相同的数据。</p>
<h3 id="Extracting-the-Console-Class"><a href="#Extracting-the-Console-Class" class="headerlink" title="Extracting the Console Class"></a>Extracting the Console Class</h3><p>我们利用Idea给的重构工具可以很方便的将一个method变成一个类。点击readNumber这个方法，然后点击Refactor，选Move Members，选择public</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/6.png" style="zoom: 110%;"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Console</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">readNumber</span><span class="params">(String prompt, <span class="keyword">double</span> min, <span class="keyword">double</span> max)</span></span>&#123;</span><br><span class="line">       	<span class="keyword">private</span> <span class="keyword">static</span>  Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">double</span> value;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            System.out.print(prompt);</span><br><span class="line">            value = scanner.nextInt();</span><br><span class="line">            <span class="keyword">if</span> (value &gt;= min &amp;&amp; value &lt;= max)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            System.out.println(<span class="string">"Enter a value between "</span>+min+<span class="string">" and "</span>+max);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Overloading-Methods"><a href="#Overloading-Methods" class="headerlink" title="Overloading Methods"></a>Overloading Methods</h3><p>我们对Console类进行重载，因为我们想要一个仅仅返回一个数字的readNumber方法。因为两个readNumber 都需Scanner，所以直接将Scanner提出</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Console</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span>  Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">readNumber</span><span class="params">(String prompt)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> scanner.nextDouble();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">readNumber</span><span class="params">(String prompt, <span class="keyword">double</span> min, <span class="keyword">double</span> max)</span></span>&#123;</span><br><span class="line">        <span class="keyword">double</span> value;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            System.out.print(prompt);</span><br><span class="line">            value = scanner.nextInt();</span><br><span class="line">            <span class="keyword">if</span> (value &gt;= min &amp;&amp; value &lt;= max)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            System.out.println(<span class="string">"Enter a value between "</span>+min+<span class="string">" and "</span>+max);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Extracting-the-MortgageReport-Class"><a href="#Extracting-the-MortgageReport-Class" class="headerlink" title="Extracting the MortgageReport Class"></a>Extracting the MortgageReport Class</h3><p>现在我们要将main函数中打印利息和每月还剩余代还金额的代码提出来单独成一个类。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printMortgage</span><span class="params">(<span class="keyword">int</span> principal,<span class="keyword">float</span> annualInterest,<span class="keyword">byte</span> years)</span></span>&#123;</span><br><span class="line">      <span class="keyword">double</span> mortgage = calculateMortage(principal,annualInterest,years);</span><br><span class="line">      String mortgageFormatted =</span><br><span class="line">              NumberFormat.getCurrencyInstance().format(mortgage);</span><br><span class="line">      System.out.println();</span><br><span class="line">      System.out.println(<span class="string">"MORTAGE"</span>);</span><br><span class="line">      System.out.println(<span class="string">"------"</span>);</span><br><span class="line">      System.out.println(<span class="string">"Monthly Payments: "</span> + mortgageFormatted);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printPaymentShedule</span><span class="params">(<span class="keyword">int</span> principal,<span class="keyword">float</span> annualInterest,<span class="keyword">byte</span> years)</span></span>&#123;</span><br><span class="line">      System.out.println();</span><br><span class="line">      System.out.println(<span class="string">"PAYMENT SCHEDULE"</span>);</span><br><span class="line">      System.out.println(<span class="string">"------"</span>);</span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">short</span> month = <span class="number">1</span>;month&lt;= years*MONTHS_IN_YEAR;month++)&#123;</span><br><span class="line">          <span class="keyword">double</span> balance = calculateBalance(principal,annualInterest,years,month);</span><br><span class="line">          System.out.println(NumberFormat.getCurrencyInstance().format(balance));</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>选中这两个方法后，我们选择重构中的  Convert to instance method ，如下图：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/7.png" style="zoom: 67%;"></p>
<p>然后我们创建一个新的 Class并将这两个方法选中，设置为Public</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/8.png" style="zoom: 80%;"></p>
<p>结果如下图所示：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/9.png" style="zoom: 67%;"></p>
<p>但是我们注意到 printMortage 中 calculateMortage函数是引用的Main class中的方法，这是不应该出现的。我们需要将Mainclass中的两个计算方法独立出来成为一个类。</p>
<h3 id="Extracting-the-MortgageCalculator-Class"><a href="#Extracting-the-MortgageCalculator-Class" class="headerlink" title="Extracting the MortgageCalculator Class"></a>Extracting the MortgageCalculator Class</h3><p>现在我们选中两个 calculate方法并新建一个 MortgageCalculator 类。</p>
<p>新建完成后，结果如下：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/10.png" style="zoom: 67%;"></p>
<p>这还没完，我们之前学了encapsulation，也就是将方法中的变量放到类中，并设置 constructor或者getter/setter .而不是在引用方法的时候将参数传入。因此我们可以对代码进行如下修改：</p>
<p>首先我们将方法中需要的变量 <code>principal</code> ，<code>annualInterest</code> ，<code>years</code> 定义在class当中，设置为 <code>private</code></p>
<p>然后我们可以选择快捷方式：在code菜单中下拉到generate，然后点击 <code>constructor</code></p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/11.png" style="zoom: 80%;"></p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/12.png" style="zoom: 80%;"></p>
<p>然后，Java就自动为我们创建好了 这个类的构造器：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MortgageReport</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">int</span> principal;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> annualInterest;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">byte</span> year;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MortgageReport</span><span class="params">(<span class="keyword">int</span> principal, <span class="keyword">float</span> annualInterest, <span class="keyword">byte</span> year)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.principal = principal;</span><br><span class="line">        <span class="keyword">this</span>.annualInterest = annualInterest;</span><br><span class="line">        <span class="keyword">this</span>.year = year;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>紧接着，我们可以通过 Idea的快捷方法将calculateBalance这些方法中使用到的变量改为本地变量。在 <code>Refactor</code>中选择 <code>Change Signature</code></p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/13.png" style="zoom: 80%;"></p>
<p>在界面中，我们将这三个由构造器固定下来的参数删除即可</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/14.png" style="zoom: 80%;"></p>
<p>删除之后我们发现，这些变量无法被识别。这是因为我们的 <code>calculateBalance</code>是 静态函数，静态函数只能识别出静态的 <code>Fields</code> ,因此，我们还需要重构一下，将方法转换成 Instance Method，也就是将 static关键字删除。</p>
<p>结果如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MortgageCalculator</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">int</span> principal;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> annualInterest;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">byte</span> years;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MortgageCalculator</span><span class="params">(<span class="keyword">int</span> principal, <span class="keyword">float</span> annualInterest, <span class="keyword">byte</span> years)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.principal = principal;</span><br><span class="line">        <span class="keyword">this</span>.annualInterest = annualInterest;</span><br><span class="line">        <span class="keyword">this</span>.years = years;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">calculateBalance</span><span class="params">(<span class="keyword">short</span> numberOfPaymentMade)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">short</span> numberOfPayments = (<span class="keyword">short</span>)(years * Main.MONTHS_IN_YEAR);</span><br><span class="line">        <span class="keyword">float</span> monthlyInterest = annualInterest / Main.PERCENT / Main.MONTHS_IN_YEAR;</span><br><span class="line">        <span class="keyword">double</span> balance = principal*(Math.pow(<span class="number">1</span>+monthlyInterest,numberOfPayments)-Math.pow(<span class="number">1</span>+monthlyInterest,numberOfPaymentMade))/(Math.pow(<span class="number">1</span>+monthlyInterest,numberOfPayments)-<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> balance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">double</span> <span class="title">calculateMortage</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">short</span> numberOfPayments = (<span class="keyword">short</span>)(years * Main.MONTHS_IN_YEAR);</span><br><span class="line">        <span class="keyword">float</span> monthlyInterest = annualInterest / Main.PERCENT / Main.MONTHS_IN_YEAR;</span><br><span class="line">        <span class="keyword">return</span> principal</span><br><span class="line">                * (monthlyInterest * Math.pow(<span class="number">1</span> + monthlyInterest, numberOfPayments))</span><br><span class="line">                / (Math.pow(<span class="number">1</span> + monthlyInterest, numberOfPayments) - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Moving-Away-from-Static-Members"><a href="#Moving-Away-from-Static-Members" class="headerlink" title="Moving Away from Static Members"></a>Moving Away from Static Members</h3><p>但是问题又出现了，我们删除了 static关键字之后，我们就不能直接用 <code>类名.方法</code> 的形式来引用我们的<code>calculateBalance</code>和<code>calculateMortage</code>方法了。因此我们必须找出这两个方法在别的类中的引用，并修改。</p>
<p>我们可以通过右键方法名称，Find usages快速找到方法在其它类中被引用的地方。发现是在 <code>MortgageReport</code>中。不能直接用 <code>.</code> 来访问，那么我们就不得不新建一个MortgageCalculator实例。</p>
<p>问题又出现了，我不想在两个方法中都新建一个MortagageCalculator实例，因此我希望直接将其定义成类中的 Field</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/17.png" style="zoom: 80%;"></p>
<p>结果如下：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/18.png" style="zoom: 80%;"></p>
<p>但我还是不满意，因为这样子我们还是不得不将我们的<code>calculator</code>对象放在 <code>printMortage</code>方法当中.</p>
<p>在这个 <code>MortgageReport</code> 类当中，两个方法只用到了一次 <code>years</code>变量，因此我们只需要为years设置一个 <code>getter</code>, 然后将 calculator作为一个参数传入到MortageReport这个类当中去。 因此我们可以为这个class设置一个 Constructor。然后将两个方法从static method 改成 instance method.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.text.NumberFormat;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MortgageReport</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> MortgageCalculator calculator;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MortgageReport</span><span class="params">(MortgageCalculator calculator)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.calculator = calculator;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printPaymentShedule</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println();</span><br><span class="line">        System.out.println(<span class="string">"PAYMENT SCHEDULE"</span>);</span><br><span class="line">        System.out.println(<span class="string">"------"</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">short</span> month = <span class="number">1</span>; month&lt;= calculator.getYears()* Main.MONTHS_IN_YEAR; month++)&#123;</span><br><span class="line">            <span class="keyword">double</span> balance = calculator.calculateBalance(month);</span><br><span class="line">            System.out.println(NumberFormat.getCurrencyInstance().format(balance));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printMortgage</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">double</span> mortgage = calculator.calculateMortage();</span><br><span class="line">        String mortgageFormatted =</span><br><span class="line">                NumberFormat.getCurrencyInstance().format(mortgage);</span><br><span class="line">        System.out.println();</span><br><span class="line">        System.out.println(<span class="string">"MORTAGE"</span>);</span><br><span class="line">        System.out.println(<span class="string">"------"</span>);</span><br><span class="line">        System.out.println(<span class="string">"Monthly Payments: "</span> + mortgageFormatted);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>将这里的方法改成实例方法(Instance method)之后，Main class中的代码也需要随之更改了：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/20.png" style="zoom: 80%;"></p>
<h3 id="Moving-Static-Fields"><a href="#Moving-Static-Fields" class="headerlink" title="Moving Static Fields"></a>Moving Static Fields</h3><p>现在我们的程序结构变得越来越严谨和简洁了。但是我们发现Main CLass中还是有噪音。那就是 开头的两个 静态变量。很显然，这两个静态变量是不属于Main函数的，放在这里很突兀。因此我们需要给它们找到合适的归宿。</p>
<p>查看这个MONTHS_IN_YEAR 的用法，我们发现，在MortageCalculator类中用到两次，在MortageReport类中用到一次。</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/21.png" style="zoom: 80%;"></p>
<p>因此我们应该将这两个静态变量移动到 <code>MortageCalculator</code> 类当中去，然后让<code>MortageReport</code>引用它。注意，这里要设置<code>public</code> </p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/22.png" style="zoom: 80%;"></p>
<p>结果如下：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/23.png" style="zoom: 80%;"></p>
<h3 id="Extracting-Duplicate-Logic"><a href="#Extracting-Duplicate-Logic" class="headerlink" title="Extracting Duplicate Logic"></a>Extracting Duplicate Logic</h3><p>现在，我们将焦点放到 MortgageCalculator 类上。</p>
<p>我们发现， calculateBalance和 calculateMortgage 这两个方法的内部逻辑都差不多。比如，<code>numberOfPayments</code>和<code>monthlyInterest</code> 都是重复计算的。因此我们可以通过一些方法来简化这两个函数</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/24.png" style="zoom: 80%;"></p>
<p>因此，将这两个变量的计算抽象成单独的 Private Method是一个不错的方法。</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/25.png" style="zoom: 80%;"></p>
<p>将两个变量都操作完之后，我们得到了两个类似于getter的函数(因为是private的，所以和public的getter还是有区别的)。一般，我们把getter和setter都放到整个类的最底部。如下图所示：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/26.png" style="zoom: 80%;"></p>
<p>这样设计的好处，是分工特别明确。 MortagageCalculator只需要负责计算就可以了，当参数进行修改之后，不需要再通过复杂的传入就能实现计算。</p>
<h3 id="Extracting-getRemainingBalances-Title"><a href="#Extracting-getRemainingBalances-Title" class="headerlink" title="Extracting getRemainingBalances - Title"></a>Extracting getRemainingBalances - Title</h3><p>现在还有一个问题，就是 在 <code>MortgageReport</code> 类中的 <code>printPaymentShedule()</code>方法</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/27.png" style="zoom: 80%;"></p>
<p>我们发现这个for循环在这里就显得比较突兀。因为这个方法 <code>printPaymentShedule</code>的功能只是打印结果，而不应该有计算功能。因此我需要将这段代码抽象出来，放到负责计算的<code>MortgageCalculator</code>类当中去</p>
<p>在<code>MortagageCalculator</code> 中我们创建一个这样的方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">double</span>[] getRemainingBalances()&#123;</span><br><span class="line">       <span class="keyword">double</span>[] balances = <span class="keyword">new</span> <span class="keyword">double</span>[getNumberOfPayments()];</span><br><span class="line">       <span class="keyword">for</span>(<span class="keyword">short</span> month = <span class="number">1</span>; month&lt;= balances.length; month++)&#123;</span><br><span class="line">           balances[month-<span class="number">1</span>] = calculateBalance(month);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> balances;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>这个方法返回一个double类型的数组。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printPaymentShedule</span><span class="params">()</span></span>&#123;</span><br><span class="line">    System.out.println();</span><br><span class="line">    System.out.println(<span class="string">"PAYMENT SCHEDULE"</span>);</span><br><span class="line">    System.out.println(<span class="string">"------"</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">double</span> balance: calculator.getRemainingBalances())</span><br><span class="line">        System.out.println(NumberFormat.getCurrencyInstance().format(balance));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>因为在 <code>printPaymentShedule</code>中没有用到 getYears方法了，我们在calculator类中删除这个方法。</p>
<p>此外，我们也没有在<code>MortgageReport</code>类中用到 <code>MONTHS_IN_YEAR</code>和<code>PERCENT</code>这两个变量，因此我们可以将其改为private，以将Calculator类变得更加鲁棒。</p>
<h3 id="One-Last-Touch"><a href="#One-Last-Touch" class="headerlink" title="One Last Touch"></a>One Last Touch</h3><p> 最后，我们发现， <code>MortgageReport</code>类中的 NumberFormat.getCurrencyInstance()还可以变得更简单一些，于是，我们将其定义为这个类中的一个变量。如下图所示</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/28.png" style="zoom: 80%;"></p>
<h2 id="Inheritance"><a href="#Inheritance" class="headerlink" title="Inheritance"></a>Inheritance</h2><h3 id="Inheritance-1"><a href="#Inheritance-1" class="headerlink" title="Inheritance"></a>Inheritance</h3><p>继承，顾名思义就是能让我们重复利用一些代码。比如说我们要设计一组表单。那么我们可以参考这样的设计语言：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/29.png"></p>
<p>首先我们新建一个java类  <code>UIControl</code>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UIControl</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> isEnabled = <span class="keyword">true</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">enable</span><span class="params">()</span></span>&#123;</span><br><span class="line">        isEnabled = <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">disable</span><span class="params">()</span></span>&#123;</span><br><span class="line">        isEnabled = <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEnsabled</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> isEnabled;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>现在我们再新建一个<code>TextBox</code> 类：我们用 <strong>子类 extends 父类</strong>  来表示继承语法</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/30.png"></p>
<p>然后，这个子类就拥有了父类中的三个public方法： <code>enable(),disable(), isEnsabled()</code></p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/31.png"></p>
<h3 id="The-Object-Class"><a href="#The-Object-Class" class="headerlink" title="The Object Class"></a>The Object Class</h3><p>我记得在 <a href="https://jasonxqh.github.io/2020/05/26/OOP-in-JavaScript/">https://jasonxqh.github.io/2020/05/26/OOP-in-JavaScript/</a> 中讲过， 在Javascript中所有的对象都有一个对象的子对象。这个对象就叫做 <code>Object Class</code>  .在 Java中也是这样。Java中的任何一个类都是由Object类扩展而来，但不用写<code>class a extends Object</code>，无论是否指出，Object都被认为是此类的直接超类或间接超类。所以任何类都可以调用Object类中方法</p>
<p>比如说 <code>hashcode()</code>方法</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/32.png"></p>
<p>注意了，hashcode是每一个类专属的编码。如果我们直接用<code>equals</code> 方法比较 两个 <code>TextBox</code>实例，发现是false的。以后我们会将怎么通过比较类中的方法、参数来判断它们是否会向等。</p>
<h3 id="Constructors-and-Inheritance"><a href="#Constructors-and-Inheritance" class="headerlink" title="Constructors and Inheritance"></a>Constructors and Inheritance</h3><p>Java类中的布局一般是： 前面放参数，然后放构造函数，最后放一些 方法。</p>
<p>和C++、Javascript中一样，创建一个子类的实例对象的时候，会先调用其父类的构造函数，然后调用子类的构造函数。</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/33.png"></p>
<p>结果是先打印 UIControl，再打印TextBox。</p>
<p>但是如果我们再UIControl的构造器中加入一个setter：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/34.png"></p>
<p>那么这时候在 TextBox中的构造器就会报错。因为这时候父类已经不是默认构造函数了，而是有参构造函数。因此，我们想要调用子类的构造函数 ，就要手动调用父类中的构造函数，语法如下：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/35.png"></p>
<p>注意，这里 <code>super(参数)</code> 一定要写在构造器的第一行，位置改变就会报错。</p>
<h3 id="Access-Modifiers"><a href="#Access-Modifiers" class="headerlink" title="Access Modifiers"></a>Access Modifiers</h3><p>我们只要深刻了解这张表格就可以了，基本上和 C++ 是一样的。</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/36.png" style="zoom:150%;"></p>
<p>但是Protected不建议使用，因为界定不明确，容易误用。</p>
<h3 id="Overriding-Methods"><a href="#Overriding-Methods" class="headerlink" title="Overriding Methods"></a>Overriding Methods</h3><p>在java中，方法覆盖(重写)的实现是在子类中对从父类中继承过来的<strong>非私有方法</strong>的内容进行修改的一个动作。比如说我想在 TextBox中写一个函数 <code>toString()</code>  而这个函数其实是Object 类中的一个方法。因此我们就要使用 Method Overriding</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/37.png" style="zoom:150%;"></p>
<h3 id="Upcasting-and-Downcasting"><a href="#Upcasting-and-Downcasting" class="headerlink" title="Upcasting and Downcasting"></a>Upcasting and Downcasting</h3><p>Upcasting就是向上转型，Downcasting就是向下转型</p>
<p>在C++中我们提到过向上转型和向下转型。向上转型，就是java多态中的<strong>父类引用</strong>指向<strong>子类对象</strong>。但要注意的是 父类引用不可以访问子类新增加的成员(属性和方法)。换句话说，就是把子类类型转换为父类类型</p>
<p>向下转型则是相反，将一个对象”下放”成它的一个子类对象。</p>
<p>这里有一个例子，我们创建了一个 UIControl对象和TextBox对象。然后对其使用 <code>show()</code>  函数，我们发现堆textBox这个对象，使用 println()方法是无法打印出东西的。这是为什么？</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/38.png" style="zoom:150%;"></p>
<p>因为show函数传入的参数是一个Object对象，打印需要使用到对象的<code>toString()</code>函数，但是我们之前将textBox类中的<code>toString()</code>函数给重写了，并让其返回textBox中的参数text，然而此时我们仅仅是声明了textBox对象，并未设置其text属性，因此打印出来的是一个空字符串</p>
<p>然而我们要么在show方法的外面通过<code>textBox.setText(&quot;&quot;)</code>来设置text，要么在<code>show</code>函数里面设置text。但是问题又出现了。如果我们在show方法中直接使用 <code>control.</code>来访问，发现并没有<code>setText(&quot;&quot;)</code>函数，因为Object是 TextBox class的祖先对象，TextBox class中的方法并不会出现在Object class当中 。这时候我们就需要选择向下转型了：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/39.png" style="zoom: 80%;"></p>
<p>但是注意了，这边我们可以使用<code>show(textBox)</code>吗？ 答案是不行的：因为每一个textBox都是一个Object对象，但是不一定每个Object的对象都是textBox. 所以这里如果传进去一个非TextBox的实例，就会报错。</p>
<p>报错信息：<code>class com.company.UIControl cannot be cast to class com.company.TextBox</code></p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/40.png"></p>
<h3 id="Comparing-Objects"><a href="#Comparing-Objects" class="headerlink" title="Comparing Objects"></a>Comparing Objects</h3><p>现在我新建一个类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> x;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> y;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Point</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.x = x;</span><br><span class="line">        <span class="keyword">this</span>.y = y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>同时，我们在 main函数中新建两个 Point对象,它们有相同的x、y值，然后我们可以通过 == 或者 equals()来比较它们是否相等。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> point1 = <span class="keyword">new</span> Point(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line">    <span class="keyword">var</span> point2 = <span class="keyword">new</span> Point(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line">    System.out.println(point1==point2);</span><br><span class="line">    System.out.println(point1.equals(point2));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果是两个 false，因为不管是 == 还是默认的 equals() 都是比较这两个对象的引用。所以我们希望重写这个类的 equals() 方法，然后将其改为比较两个对象的 x、y值是否相等。</p>
<p>我们可以这样重写 equals函数。注意了，首先我们需要将Object类的参数obj 向下转型成当前的TextBox类，因为传入的参数是无法改变的(否则就是重载函数了)。 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> other = (Point)obj;</span><br><span class="line">    <span class="keyword">return</span> other.x==x &amp;&amp; other.y==y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>现在再运行 <code>point1.equals(point2)</code> ，结果为true</p>
<p>但这样写，是有一个bug的，那就是如果我 <code>point1.equals(new TextBox())</code> 的话 ，TextBox显然不能被强制转换成 Point类，因此，整个程序就crush了。</p>
<p>为了解决这个问题，我们还是可以选择条件语句：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">     <span class="keyword">if</span> (!(obj <span class="keyword">instanceof</span> Point))</span><br><span class="line">         <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">     <span class="keyword">var</span> other = (Point)obj;</span><br><span class="line">     <span class="keyword">return</span> other.x==x &amp;&amp; other.y==y;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>那么问题来了，如果我直接 <code>point1.equal(point1)</code> 会怎么样？毫无疑问是返回true的，但还是通过比较<code>other.x==x &amp;&amp; other.y==y;</code> 来实现的，这样程序的性能就会变差。</p>
<p>我们可以先比较一下他们的reference是否相同。如果相同就直接返回true。</p>
<p>此外，我们在重写 equals()的同时也要重写hashcode方法。</p>
<p>我们先来看一下Object.hashCode的通用约定<br>　　1.在一个应用程序执行期间，如果一个对象的equals方法做比较所用到的信息没有被修改的话，那么，对该对象调用hashCode方法多次，它必须始终如一地返回同一个整数。在同一个应用程序的多次执行过程中，这个整数可以不同，即这个应用程序这次执行返回的整数与下一次执行返回的整数可以不一致。<br>　　2.如果两个对象根据equals(Object)方法是相等的，那么调用这<strong>两个对象中任一个对象的hashCode方法必须产生同样的整数</strong>结果。<br>　　3.如果两个对象根据equals(Object)方法是不相等的，那么调用这两个对象中任一个对象的hashCode方法，<strong>不要求必须产生不同的整数结果 </strong>。然而，程序员应该意识到这样的事实，<strong>对于不相等的对象产生截然不同的整数结果 </strong>，有可能提高散列表（hash table）的性能。</p>
<p>　　如果只重写了equals方法而没有重写hashCode方法的话，则会违反约定的第二条：相等的对象必须具有相等的散列码（hashCode）</p>
<p>因为：两个对象相等，hashcode一定相等</p>
<p>　　    两个对象不等，hashcode不一定不等</p>
<p>　　    hashcode相等，两个对象不一定相等</p>
<p>　　    hashcode不等，两个对象一定不等</p>
<p>我们可以直接通过 Idea内置的方法来帮我们生成这两个函数：在generate中点击 equals和hashCode ，就可以生成了：Java帮我们自动生成的代码覆盖面更广，更全面。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (<span class="keyword">this</span> == o) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">       <span class="keyword">if</span> (o == <span class="keyword">null</span> || getClass() != o.getClass()) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">       Point point = (Point) o;</span><br><span class="line">       <span class="keyword">return</span> x == point.x &amp;&amp;</span><br><span class="line">               y == point.y;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       <span class="keyword">return</span> Objects.hash(x, y);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h3 id="Polymorphism"><a href="#Polymorphism" class="headerlink" title="Polymorphism"></a>Polymorphism</h3><p>Polymorphism就是多态。所谓多态，就是同一个行为具有多个不同表现形式或形态的能力。比如说下面这个例子，<code>TextBox()</code> <code>CheckBox()</code>  都是继承自 UIControl 的，但是我们希望当controls数组中的元素是TextBox()时，就渲染出TextBox的内容，反之，如果时CheckBox，那么就渲染出CheckBox。这样我们就可以不使用 if语句。</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/41.png"></p>
<p>为了实现这个方法，我们首先在 UIControl 中新建一个 render方法。然后我们分别在TextBox和CheckBox中重写这个render方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CheckBox</span> <span class="keyword">extends</span> <span class="title">UIControl</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">render</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Render CheckBox"</span>);<span class="comment">//System.out.println("Render TextBox");</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最后我们在main函数中这样写，结果是我们想见到的。：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/42.png"></p>
<h3 id="Abstract-Classes-and-Methods"><a href="#Abstract-Classes-and-Methods" class="headerlink" title="Abstract Classes and Methods"></a>Abstract Classes and Methods</h3><p>抽象类和抽象方法就是不能被实例化的类。比如说这里的 UIControl 方法。UIControl 是一种概念，一种共同属性的抽象几何，因此我们可以用<code>abstract</code> 关键字来定义抽象类。抽象类的作用仅仅是表达一个接口，并不是写具体的实现细节。抽象类中可以存在抽象方法，抽象方法也是使用 <code>abstract</code> 关键字来修饰的。抽象的method是不完全的，他只有声明，没有 大括号{}</p>
<p>这里我们堆UIControl类进行一个改造</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/43.png"></p>
<p>当我们声明了一个类为 抽象类，并在这里声明了一个抽象函数的时候。他的子类要么是继承这个抽象类的，要么是将这个类中的抽象方法进行重写。否则会报错</p>
<h3 id="Final-Classes-and-Methods"><a href="#Final-Classes-and-Methods" class="headerlink" title="Final Classes and Methods"></a>Final Classes and Methods</h3><p>我们知道 抽象类是不能实例化的，他们只能被继承。 Final则相反。当我们声明一个类是final class的时候，他就不能再被继承了。</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/44.png"></p>
<p>一般来说我们不要轻易得用 final去修饰一个类。因为这就堵住了这个类被继承的可能性。</p>
<p>当我们 将一个 方法定成 final method的时候，这个方法就不能再被重写了</p>
<h3 id="Deep-Inheritance-Hierarchies"><a href="#Deep-Inheritance-Hierarchies" class="headerlink" title="Deep Inheritance Hierarchies"></a>Deep Inheritance Hierarchies</h3><p>注意，不要一直使用继承结构！</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/45.png"></p>
<p>比如说这个情况，这样一直继承很多代就会导致代码的耦合度非常非常高，后期维护起来异常困难。</p>
<p>所以这里 虽然 Instructor和Student之间可能存在相同的逻辑，但是他们也不应该通过继承联系起来。</p>
<h3 id="Multiple-Inheritance"><a href="#Multiple-Inheritance" class="headerlink" title="Multiple Inheritance"></a>Multiple Inheritance</h3><p>在Java中，不像C++，可能有多个 Parent对象。 菱形继承在Java中是不可行的。</p>
<h2 id="Interfaces"><a href="#Interfaces" class="headerlink" title="Interfaces"></a>Interfaces</h2><h3 id="What-are-Interfaces"><a href="#What-are-Interfaces" class="headerlink" title="What are Interfaces"></a>What are Interfaces</h3><p>Interfaces (接口) 在 JAVA中是一个抽象类型。它可以帮助我们构建低耦合的、易继承的、易测试的软件。</p>
<p>因为我们希望类与类之间的耦合度降到最低，这样我们就可以尽可能少的“牵一发而动全身”</p>
<p>原来A、B两个类可能是这样的：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/47.png"></p>
<p>但是使用了 Interface之后，他们的关系就成了这样：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/46.png"></p>
<p>也就是说，现在修改B甚至替换B，不会对A造成任何影响</p>
<p><strong>接口与类相似点：</strong></p>
<ul>
<li>一个接口可以有多个方法。</li>
<li>接口文件保存在 .java 结尾的文件中，文件名使用接口名。</li>
<li>接口的字节码文件保存在 .class 结尾的文件中。</li>
<li>接口相应的字节码文件必须在与包名称相匹配的目录结构中。</li>
</ul>
<p><strong>接口与类的区别：</strong> </p>
<ul>
<li>接口<strong>不能用于实例化对象</strong>。</li>
<li>接口<strong>没有构造方法</strong>。</li>
<li>接口中所有的方法必须是<strong>抽象方法</strong>。</li>
<li>接口不能包含成员变量，除了 static 和 final 变量。</li>
<li>接口<strong>不是被类继承</strong>了，而是要<strong>被类实现</strong>。</li>
<li>接口是说：应该做<strong>什么</strong> ，而类是说：应该<strong>怎么</strong>做</li>
<li>接口<strong>支持多继承</strong>。</li>
</ul>
<p>比如说，我在接口中定义了一个 Sorting，那么我们就可以在不同的类中实现不同的排序算法。</p>
<p>又比如说，税率计算器，我在接口中定义了一个计算器，但是每年税务政策不同，我就要用不同的 类来实现不同的计算方法</p>
<h3 id="Tightly-coupled-Code"><a href="#Tightly-coupled-Code" class="headerlink" title="Tightly-coupled Code"></a>Tightly-coupled Code</h3><p>现在我声明两个类：<code>TaxCalculator</code>和<code>TaxReport</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TaxCalculator</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> taxableIncome;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TaxCalculator</span><span class="params">(<span class="keyword">double</span> taxableIncome)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.taxableIncome = taxableIncome;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">calculateTax</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> taxableIncome*<span class="number">0.3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TaxReport</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> TaxCalculator calculator;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TaxReport</span><span class="params">()</span></span>&#123;</span><br><span class="line">        calculator = <span class="keyword">new</span> TaxCalculator(<span class="number">100_000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">var</span> tax = calculator.calculateTax();</span><br><span class="line">        System.out.println(tax);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们发现这两个类实际上是高耦合的。</p>
<p>比如说， <code>TaxReport</code> 中新建了 TaxCalculator 实例，导致当 <code>TaxCalculator</code>修改变量个数时，<code>TaxReport</code> 就会报错。</p>
<h3 id="Creating-an-Interface"><a href="#Creating-an-Interface" class="headerlink" title="Creating an Interface"></a>Creating an Interface</h3><p>现在我们新建一个 <code>Interface</code></p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/48.png"></p>
<p>然后将原来的 <code>TaxCalculator</code> 改为 <code>TaxCalculator2020</code> </p>
<p>一般来说，Interface的命名规则是加上一个 前缀 <code>can</code> 或者 <code>I</code>, 或者是 <code>**able</code> 之类的词语。</p>
<p>因为这是一个接口，只做方法声明，并且这个方法是要被其他的类实现的，必然是public的。所以，在声明方法的时候并不需要加 public。</p>
<p>在 <code>TaxCalculator2020</code>这个类中调用 接口，我们需要这样来写：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TaxCalculator2020</span> <span class="keyword">implements</span> <span class="title">TaxCalculator</span></span>&#123;...&#125;</span><br></pre></td></tr></table></figure>
<p>如果还有继承，那么 我们一般把继承写在引入接口的前面：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TaxCalculator2020</span> <span class="keyword">extends</span> <span class="title">Object</span> <span class="keyword">implements</span> <span class="title">TaxCalculator</span></span>&#123;...&#125;</span><br></pre></td></tr></table></figure>
<p>在实现接口中的函数的时候(这里时 <code>calculateTax</code>) 我们最好在前面写一个 <code>@Override</code> ，这样，当接口中这个方法被删除的时候，@Override 就会报错，作为一个提醒。</p>
<p>接下来，我们要在 <code>TaxReport</code> 类中使用接口</p>
<h3 id="Dependency-Injection"><a href="#Dependency-Injection" class="headerlink" title="Dependency Injection"></a>Dependency Injection</h3><p>现在我们来讲一个很重要的概念： 依赖嵌入(Dependency Injection)</p>
<p>这个意思是说，我们的类不应该实例化他们的依赖项(dependencies)</p>
<p>也就是说 TaxReport这个类不应该去创建一个实例化的Calculator对象出来，而是仅仅使用它。Injection的意思时注射，这非常形象，我们要做的就是通过某种方法来给<code>TaxReport</code> <strong>注射</strong>一个Calculator实例化对象。</p>
<p>我们有很多的方法来实现这一想法：下面会一一介绍 Constructor Injection，Setter Injection以及 Method Injection</p>
<h3 id="Constructor-Injection"><a href="#Constructor-Injection" class="headerlink" title="Constructor Injection"></a>Constructor Injection</h3><p>我们先用 Constructor 来实现 Dependency Injection.</p>
<p>对于刚才耦合度很高的 TaxReport 代码，我们做出如下修改:</p>
<p>我们将实例化的 <code>TaxCalculator2020</code>改成了调用一个接口 <code>TaxCalculator</code> ,然后直接调用 <code>TaxCalculator</code>中的 <code>calculateTax()</code> 代码。</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/49.png"></p>
<p>这样我们在main中可以声明一个  <code>TaxCalculator2020</code> 的实例化对象，然后传入到 <code>TaxReport</code> 的构造函数中去，但是完全没有报错。</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/54.png"></p>
<p>这就叫 <code>Programming against interface</code></p>
<p>通过这样的技巧，当<code>TaxCalculator</code> 中的方法进行修改，或者新创建了一个实现接口的类<code>TaxCalculator2019</code> ，都不会影响到 <code>TaxReport</code> ,这个类不需要重新编译了，因为他引用的只是一个接口罢了。</p>
<p>在这个简单的程序中我们只有2个类，但是在大型的项目中，可能有成百上千的类。并且这些类可能都含有很多的 <code>dependency</code> 那么这时候在main函数中自己申明这么多对象就显得不现实了。因此，spring等框架就是帮我们减少这部分的工作量的。</p>
<h3 id="Setter-Injection"><a href="#Setter-Injection" class="headerlink" title="Setter Injection"></a>Setter Injection</h3><p>同样的，我们可以通过setter来 给 TaxReport类<strong>注射</strong>实例化对象，首先我们必须在<code>TaxReport</code> 中创建一个setter</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/51.png"></p>
<p>然后，我新建了一个 <code>TaxCalculator2019</code> 的类，并将其通过 setter注射给了report</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/50.png"></p>
<p>相比于 setter Injection ，Constructor Injection是一种更加普遍的方法。</p>
<h3 id="Method-Injection"><a href="#Method-Injection" class="headerlink" title="Method Injection"></a>Method Injection</h3><p>Method相比于前两种方法更为精简。也就是将 <strong>实例化对象</strong> 直接通过一个方法注射进 <code>TaxReport</code>类当中去。</p>
<p>比如说，我这样修改我的 <code>show()</code>函数：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/52.png"></p>
<p>然后在 <code>Main()</code>函数中，我们就直接通过 show()传对象就行了。</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/53.png"></p>
<p>对于Method Injection ，Constructor Injection 可以更明显的告诉我们两个类之间的 dependency,因为我们是通类的构造函数传入的，非常直观。</p>
<p>虽然现在我们的耦合度已经很低了，但是class或多或少还是和 Interface存在着一些关联性。所以在设计接口的时候，我们要尽量轻量化、简洁化，不要搞一个很重型的接口。</p>
<h3 id="Interface-Segregation-Principle"><a href="#Interface-Segregation-Principle" class="headerlink" title="Interface Segregation Principle"></a>Interface Segregation Principle</h3><p>接口分离原则，简单来说就是将“大(函数多、复杂)” 的接口拆分成一些更小、更轻量化的接口</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/55.png" style="zoom:67%;"></p>
<p>比如说我这里新建了一个 <code>UIWidget</code> 类，主要是一些窗口小部件之类的(如 text boxes) ，然后在其中声明三个方法： <code>drag</code>, <code>resize</code>,<code>render</code> </p>
<p>然后我又去新建了一个 <code>Dragger</code> 类，然后我们要用到UIWidget接口中的 drag方法。如下图所示：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/56.png" style="zoom:80%;"></p>
<p>但是这样的话，就会显得耦合度过高。比如说，我在 <code>UIWidget</code> 中修改 <code>resize()</code> ,那么即使我们没有修改任何关于<code>drag()</code>中的内容，<code>drag()</code>以及 <code>Dragger</code> 中的也会重新编译一遍。这还是只有三个方法的接口，那么当一个接口中有十几二十个方法的时候，修改接口中的一个方法，波及到用到接口的所有的类以及类的子类们，这个代价恐怕是非常大的。因此我们可以将接口拆封成几个更小的接口,如下图所示：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/57.png" style="zoom:80%;"></p>
<p>我们将<code>Drag()</code> 单独拉出来成立一个 接口。然后在<code>Dragger</code>类中只使用<code>Draggable</code>接口，这样就降低了很多耦合的情况。</p>
<p>如果我觉得一定要将这三个功能(drag,resize,render)放在一起，我们可以使用 <code>接口 extends 接口</code>的操作：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/58.png" style="zoom:80%;"></p>
<p>这样 <code>UIWidget</code> 就会继承 <code>Draggable</code> 接口，并且我在<code>Dragger</code>中传入<code>UIWidget</code>对象也不会报错。</p>
<p>接下来我们使用 <code>Idea</code>的内置方法来帮助我们自动生成接口：</p>
<p>选中 resize 方法，用 <code>control+t</code> 快捷键打开Refactor菜单，向下找到 <code>Extract Interface</code>选项，点击并重命名新的接口名称为 <code>Resizable</code> </p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/59.png" style="zoom:80%;"></p>
<p>然后IDEA会提醒我们说： IDEA可以分析UIWidget的用法，并在可能的情况下将其替换为Resizable的用法，我们选择不需要。结果如下：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/60.png" style="zoom:80%;"></p>
<p>但是 Interface segregation 并不是要求我们将每一个函数都独立成一个接口。而是让我们要将不同功能的方法给区分开来。比如说在这个例子里，对一个对象来说，resizing和redragging 是两种不同的操作。但是在resize中我们有可能存在很多不同的方法：比如<code>void  resize(int x,int y)(通过坐标修改)</code>,<code>resizeTo(UIWidget widget) 将一个对象的形状赋值给另一个对象等</code> 这些都可以放到同一个接口当中。</p>
<p>我们还注意到一个接口可以继承多个接口，而在类中这是不能实现的。</p>
<h3 id="Fields-in-Interfaces"><a href="#Fields-in-Interfaces" class="headerlink" title="Fields in Interfaces"></a>Fields in Interfaces</h3><p>最近几年，Java的接口多了很多新的特性。但是这并不是一个很好的发展方向。我们在使用这些新的特性的时候，必须清楚自己到底在干什么，合不合理，否则不要滥用。</p>
<p>第一个特性就是在接口中定义参数。</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/61.png" style="zoom:80%;"></p>
<p>这时候的参数，默认是一个常数，是不能被改变的。但这个功能比较鸡肋，尽量不要使用。因为如果修改了这个参数，所有与其相关的类都会受到影响。</p>
<h3 id="Static-Methods"><a href="#Static-Methods" class="headerlink" title="Static Methods"></a>Static Methods</h3><p>还是一样的道理，我们如果修改了method内部的逻辑，就会影响到与接口相关的所有类。</p>
<h3 id="Private-Methods"><a href="#Private-Methods" class="headerlink" title="Private Methods"></a>Private Methods</h3><p>私有方法在接口中就显得更加突兀了。这应该是细节，并不是要在接口这么抽象的东西中实现。</p>
<h3 id="Interfaces-and-Abstract-Classes"><a href="#Interfaces-and-Abstract-Classes" class="headerlink" title="Interfaces and Abstract Classes"></a>Interfaces and Abstract Classes</h3><p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/_posts/Java基础2/62.png" alt="62" style="zoom:67%;"></p>
<p>现在我们来谈谈 接口和抽象类之间的区别。以前，接口只做声明、没有具体代码和执行操作。我们用其实现低耦合的、易继承的、易测试的软件。但是抽象类 则是在不同的类之间共享一段相似的代码。两者的区别是十分清晰的。但是现在，接口中出现了很多不好的特性：静态函数、私有函数、变量等。让他越来越像是一个类了，此外，由于接口的多继承特性，它常常被用来hack 掉java不能多继承的原则。如下图：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/_posts/Java基础2/63.png" alt="62" style="zoom:67%;"></p>
<p>再说一遍，接口不要和类混为一谈！</p>
<h3 id="When-to-Use-Interfaces"><a href="#When-to-Use-Interfaces" class="headerlink" title="When to Use Interfaces"></a>When to Use Interfaces</h3><ul>
<li>Swap Implementations:  自从利用了接口之后，我们就降低了类与类之间的耦合度。对于一个app来说可以很容易的切换它所需要用到的服务。比如这里，当使用不同的 VideoEncoder的服务，我们就可以直接修改Encoder当中的内置算法，但对VideoProcessor并不会产生影响，对于 <code>VideoProcessor</code>来说，接口好像是一个黑匣子，只要把一个对象传进去就可以了。</li>
</ul>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/_posts/Java基础2/64.png" alt="62" style="zoom:67%;"></p>
<ul>
<li>Extend Your Applications: 当我们设计了一套框架，想给别人用的时候，也需要用到接口。比如说我们有这样一个逻辑：我们的框架应该有一个 模板引擎来处理客户端发来的http请求。这时候我们就可以使用接口，来让我们的http反馈通过接口传给用户。这样，用户也能通过其他的模板引擎处理http请求。</li>
</ul>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/_posts/Java基础2/65.png" alt="62" style="zoom:67%;"></p>
<ul>
<li>Test Your Class in Isolation</li>
</ul>
<p>如果我们的类在使用 邮箱服务或者是存储引擎，我们可以通过接口来单独测试这个类。这就是我们所说的 单元测试。</p>

      
    </div>
    
    
    
    <div>
      
        <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束，感谢您的阅读-------------</div>
    
</div>

      
    </div>
    

    

    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>Post author:</strong>
    Jason
  </li>
  <li class="post-copyright-link">
    <strong>Post link:</strong>
    <a href="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/" title="Java基础2">https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/</a>
  </li>
  <li class="post-copyright-license">
    <strong>Copyright Notice: </strong>
    All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> unless stating additionally.
  </li>
</ul>

      </div>
    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/java/" rel="tag"><i class="fa fa-tag"></i> java</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/07/03/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE4/" rel="next" title="离散数学之图4">
                <i class="fa fa-chevron-left"></i> 离散数学之图4
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/07/07/%E5%BA%A6%E9%87%8F%E5%92%8C%E6%8A%95%E5%BD%B1/" rel="prev" title="度量和投影">
                度量和投影 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="lv-container" data-id="city" data-uid="MTAyMC80OTgyMC8yNjMxMQ=="></div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Jason</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives%7C%7C%20archive">
              
                  <span class="site-state-item-count">439</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">68</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/JasonXQH" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:10195501423@stu.ecnu.edu.cn" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://yanghong.tech/" title="友链:杨弘的博客" target="_blank">友链:杨弘的博客</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://ankate.github.io/" title="友链:赵奕轲的博客" target="_blank">友链:赵奕轲的博客</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://github.com/JasonXQH/JasonXQH.github.io" title="Like it, STAR ME" target="_blank">Like it, STAR ME</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Java基础2"><span class="nav-number">1.</span> <span class="nav-text">Java基础2</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Classes"><span class="nav-number">1.1.</span> <span class="nav-text">Classes</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Classes-and-Objects"><span class="nav-number">1.1.1.</span> <span class="nav-text">Classes and Objects</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Creating-Classes"><span class="nav-number">1.1.2.</span> <span class="nav-text">Creating Classes</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Creating-Objects"><span class="nav-number">1.1.3.</span> <span class="nav-text">Creating Objects</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Memory-Allocation"><span class="nav-number">1.1.4.</span> <span class="nav-text">Memory Allocation</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Java-的内存管理就是对象的分配和释放的处理"><span class="nav-number">1.1.4.0.1.</span> <span class="nav-text">Java 的内存管理就是对象的分配和释放的处理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Java内存泄漏："><span class="nav-number">1.1.4.0.2.</span> <span class="nav-text">Java内存泄漏：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Java内存区域划分："><span class="nav-number">1.1.4.0.3.</span> <span class="nav-text">Java内存区域划分：</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Procedural-Programming"><span class="nav-number">1.1.5.</span> <span class="nav-text">Procedural Programming</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Encapsulation"><span class="nav-number">1.1.6.</span> <span class="nav-text">Encapsulation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Getters-and-Setters-Title"><span class="nav-number">1.1.7.</span> <span class="nav-text">Getters and Setters - Title</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Abstraction"><span class="nav-number">1.1.8.</span> <span class="nav-text">Abstraction</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Coupling-耦合度"><span class="nav-number">1.1.9.</span> <span class="nav-text">Coupling 耦合度</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Reducing-Coupling"><span class="nav-number">1.1.10.</span> <span class="nav-text">Reducing Coupling</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Constructors"><span class="nav-number">1.1.11.</span> <span class="nav-text">Constructors</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Method-Overloading"><span class="nav-number">1.1.12.</span> <span class="nav-text">Method Overloading</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Constructor-Overloading"><span class="nav-number">1.1.13.</span> <span class="nav-text">Constructor Overloading</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Static-Members"><span class="nav-number">1.1.14.</span> <span class="nav-text">Static Members</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Classes-Quiz"><span class="nav-number">1.1.15.</span> <span class="nav-text">Classes Quiz</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Refactoring-Towards-an-Object-oriented-Design"><span class="nav-number">1.2.</span> <span class="nav-text">Refactoring Towards an Object-oriented Design</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#The-Problem"><span class="nav-number">1.2.1.</span> <span class="nav-text">The Problem</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#What-Classes-Do-We-Need"><span class="nav-number">1.2.2.</span> <span class="nav-text">What Classes Do We Need?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Extracting-the-Console-Class"><span class="nav-number">1.2.3.</span> <span class="nav-text">Extracting the Console Class</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Overloading-Methods"><span class="nav-number">1.2.4.</span> <span class="nav-text">Overloading Methods</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Extracting-the-MortgageReport-Class"><span class="nav-number">1.2.5.</span> <span class="nav-text">Extracting the MortgageReport Class</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Extracting-the-MortgageCalculator-Class"><span class="nav-number">1.2.6.</span> <span class="nav-text">Extracting the MortgageCalculator Class</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Moving-Away-from-Static-Members"><span class="nav-number">1.2.7.</span> <span class="nav-text">Moving Away from Static Members</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Moving-Static-Fields"><span class="nav-number">1.2.8.</span> <span class="nav-text">Moving Static Fields</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Extracting-Duplicate-Logic"><span class="nav-number">1.2.9.</span> <span class="nav-text">Extracting Duplicate Logic</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Extracting-getRemainingBalances-Title"><span class="nav-number">1.2.10.</span> <span class="nav-text">Extracting getRemainingBalances - Title</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#One-Last-Touch"><span class="nav-number">1.2.11.</span> <span class="nav-text">One Last Touch</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Inheritance"><span class="nav-number">1.3.</span> <span class="nav-text">Inheritance</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Inheritance-1"><span class="nav-number">1.3.1.</span> <span class="nav-text">Inheritance</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#The-Object-Class"><span class="nav-number">1.3.2.</span> <span class="nav-text">The Object Class</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Constructors-and-Inheritance"><span class="nav-number">1.3.3.</span> <span class="nav-text">Constructors and Inheritance</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Access-Modifiers"><span class="nav-number">1.3.4.</span> <span class="nav-text">Access Modifiers</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Overriding-Methods"><span class="nav-number">1.3.5.</span> <span class="nav-text">Overriding Methods</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Upcasting-and-Downcasting"><span class="nav-number">1.3.6.</span> <span class="nav-text">Upcasting and Downcasting</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Comparing-Objects"><span class="nav-number">1.3.7.</span> <span class="nav-text">Comparing Objects</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Polymorphism"><span class="nav-number">1.3.8.</span> <span class="nav-text">Polymorphism</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Abstract-Classes-and-Methods"><span class="nav-number">1.3.9.</span> <span class="nav-text">Abstract Classes and Methods</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Final-Classes-and-Methods"><span class="nav-number">1.3.10.</span> <span class="nav-text">Final Classes and Methods</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Deep-Inheritance-Hierarchies"><span class="nav-number">1.3.11.</span> <span class="nav-text">Deep Inheritance Hierarchies</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Multiple-Inheritance"><span class="nav-number">1.3.12.</span> <span class="nav-text">Multiple Inheritance</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Interfaces"><span class="nav-number">1.4.</span> <span class="nav-text">Interfaces</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#What-are-Interfaces"><span class="nav-number">1.4.1.</span> <span class="nav-text">What are Interfaces</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Tightly-coupled-Code"><span class="nav-number">1.4.2.</span> <span class="nav-text">Tightly-coupled Code</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Creating-an-Interface"><span class="nav-number">1.4.3.</span> <span class="nav-text">Creating an Interface</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Dependency-Injection"><span class="nav-number">1.4.4.</span> <span class="nav-text">Dependency Injection</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Constructor-Injection"><span class="nav-number">1.4.5.</span> <span class="nav-text">Constructor Injection</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Setter-Injection"><span class="nav-number">1.4.6.</span> <span class="nav-text">Setter Injection</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Method-Injection"><span class="nav-number">1.4.7.</span> <span class="nav-text">Method Injection</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Interface-Segregation-Principle"><span class="nav-number">1.4.8.</span> <span class="nav-text">Interface Segregation Principle</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Fields-in-Interfaces"><span class="nav-number">1.4.9.</span> <span class="nav-text">Fields in Interfaces</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Static-Methods"><span class="nav-number">1.4.10.</span> <span class="nav-text">Static Methods</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Private-Methods"><span class="nav-number">1.4.11.</span> <span class="nav-text">Private Methods</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Interfaces-and-Abstract-Classes"><span class="nav-number">1.4.12.</span> <span class="nav-text">Interfaces and Abstract Classes</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#When-to-Use-Interfaces"><span class="nav-number">1.4.13.</span> <span class="nav-text">When to Use Interfaces</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart" aria-hidden="true"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jason</span>
 <!--
  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">1290.3k</span>
  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>



-->
        







        
      </div>
    </footer>

    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  
    <script type="text/javascript">
      (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
      })(document, 'script');
    </script>
  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('-1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  


  

  

</body>
</html>

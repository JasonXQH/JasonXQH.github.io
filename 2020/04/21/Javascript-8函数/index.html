<!DOCTYPE html>
<html lang="en">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"jasonxqh.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="JavaScript-8函数概况 形参实参 this 对象的方法 构造函数 函数即对象 闭包 函数可以嵌套在其他函数中定义，这样他们就可以访问他们被定义时所处的作用域中的任何变量，这意味着Javascript函数构成了一个闭包    8.1函数定义 两种方式 函数定义表达式 函数声明语句   函数定义的必须部分 函数名称标识符 一对圆括号。包含由0个或者多个用逗号隔开的标识符组成的列表，这些标识符">
<meta property="og:type" content="article">
<meta property="og:title" content="Javascript-8函数">
<meta property="og:url" content="https://jasonxqh.github.io/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/index.html">
<meta property="og:site_name" content="Jason‘s Blog">
<meta property="og:description" content="JavaScript-8函数概况 形参实参 this 对象的方法 构造函数 函数即对象 闭包 函数可以嵌套在其他函数中定义，这样他们就可以访问他们被定义时所处的作用域中的任何变量，这意味着Javascript函数构成了一个闭包    8.1函数定义 两种方式 函数定义表达式 函数声明语句   函数定义的必须部分 函数名称标识符 一对圆括号。包含由0个或者多个用逗号隔开的标识符组成的列表，这些标识符">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://jasonxqh.github.io/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/1.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/2.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/3.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/4.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/5.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/6.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/7.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/8.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/9.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/11.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/10.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/12.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/13.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/projects/JasonXQH.github.io/source/_posts/Javascript-8%E5%87%BD%E6%95%B0/13.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/14.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/15.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/16.png">
<meta property="og:image" content="https://jasonxqh.github.io/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/04/21/Javascript-8%E5%87%BD%E6%95%B0/17.png">
<meta property="article:published_time" content="2020-04-21T10:30:17.000Z">
<meta property="article:modified_time" content="2020-05-08T08:59:54.000Z">
<meta property="article:author" content="Jason">
<meta property="article:tag" content="JavaScript">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://jasonxqh.github.io/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/1.png">

<link rel="canonical" href="https://jasonxqh.github.io/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>Javascript-8函数 | Jason‘s Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Jason‘s Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Javascript-8函数
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-04-21 18:30:17" itemprop="dateCreated datePublished" datetime="2020-04-21T18:30:17+08:00">2020-04-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-05-08 16:59:54" itemprop="dateModified" datetime="2020-05-08T16:59:54+08:00">2020-05-08</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="JavaScript-8函数"><a href="#JavaScript-8函数" class="headerlink" title="JavaScript-8函数"></a>JavaScript-8函数</h1><h2 id="概况"><a href="#概况" class="headerlink" title="概况"></a>概况</h2><ul>
<li>形参实参</li>
<li>this</li>
<li>对象的方法</li>
<li>构造函数</li>
<li>函数即对象</li>
<li>闭包<ul>
<li>函数可以嵌套在其他函数中定义，这样他们就可以访问他们被定义时所处的作用域中的任何变量，这意味着Javascript函数构成了一个闭包</li>
</ul>
</li>
</ul>
<h3 id="8-1函数定义"><a href="#8-1函数定义" class="headerlink" title="8.1函数定义"></a>8.1函数定义</h3><ul>
<li>两种方式<ul>
<li>函数定义表达式</li>
<li>函数声明语句</li>
</ul>
</li>
<li>函数定义的必须部分<ul>
<li>函数名称标识符</li>
<li>一对圆括号。包含由0个或者多个用逗号隔开的标识符组成的列表，这些标识符是函数的参数名称，他们就像函数体中的局部变量一样</li>
<li>一对花括号（包含0或多条JavaScript语句，这些语句构成了函数体）</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> square = <span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123; <span class="keyword">return</span> x*x ;&#125;</span><br><span class="line"><span class="comment">//函数表达式可以包含名称，这在递归时很有用</span></span><br><span class="line"><span class="keyword">var</span> f = <span class="function"><span class="keyword">function</span> <span class="title">fact</span>(<span class="params">x</span>)</span>&#123;<span class="keyword">if</span>(x&lt;<span class="number">1</span>)<span class="keyword">return</span> <span class="number">1</span>; <span class="keyword">else</span> <span class="keyword">return</span> x*fact(x<span class="number">-1</span>)&#125;;</span><br><span class="line"><span class="comment">//函数表达式也可以作为参数传给其他函数</span></span><br><span class="line">data.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>)</span>&#123; <span class="keyword">return</span> a-b; &#125;);</span><br><span class="line"><span class="comment">//函数表达式有时定义后立即调用</span></span><br><span class="line"><span class="keyword">var</span> tensquared = (<span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;<span class="keyword">return</span> x*x;&#125;(<span class="number">10</span>));</span><br></pre></td></tr></table></figure>
<ul>
<li>函数声明语句的例子</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printprops</span>(<span class="params">o</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">var</span> p <span class="keyword">in</span> o)</span><br><span class="line">		<span class="built_in">console</span>.log(p+ <span class="string">"："</span> +o[p]+ <span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/1.png" alt="示例"></p>
<p><img src="/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/2.png" alt="示例"></p>
<p><img src="/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/3.png" alt="示例"></p>
<h4 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h4><p>​    为什么叫Arrow Function？因为它的定义用的就是一个箭头</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">x=&gt;x*x;</span><br><span class="line">===</span><br><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> x*x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>箭头函数相当于匿名函数，有两种格式<ul>
<li>只包含一个表达式， 省略了{…}和return，就像上面</li>
<li>包含多条语句，这时不能省略</li>
<li>如果参数不是一个，就需要用括号（）括起来</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//一个参数</span></span><br><span class="line">x=&gt;&#123;</span><br><span class="line">	<span class="keyword">if</span>(x&gt;<span class="number">0</span>)&#123;<span class="keyword">return</span> x*x ;&#125;</span><br><span class="line">	<span class="keyword">else</span> &#123;<span class="keyword">return</span> -x*x ;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//两个参数</span></span><br><span class="line">(x,y)=&gt;x*x+y*y</span><br><span class="line"><span class="comment">//无参数 （）=&gt;3.14;</span></span><br><span class="line"><span class="comment">//可变函数</span></span><br><span class="line">(x,y,...rest)=&gt;&#123;</span><br><span class="line">    <span class="keyword">var</span> i,sum = x+y;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;rest.length;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            sum+=rest[i];</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>如果要返回一个对象，就要注意，如果是单表达式，这么写会报错：</p>
<ul>
<li>x=&gt;{foo:x}</li>
</ul>
</li>
<li><p>因为和函数体的{…}有语法冲突，所以要改为：</p>
<ul>
<li>x=&gt;({foo:x})</li>
</ul>
</li>
<li>箭头函数和匿名函数有个明显的区别：箭头函数内部的this是词法作用域，由上下文确定</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj=&#123;</span><br><span class="line">	birth: <span class="number">1997</span>,</span><br><span class="line">	getAge: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="keyword">var</span> b = <span class="keyword">this</span>.birth;</span><br><span class="line">		<span class="keyword">var</span> fn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>().getFullYear()-<span class="keyword">this</span>.birth;</span><br><span class="line">            <span class="comment">//this指向undefined而不是obj</span></span><br><span class="line">		&#125;;</span><br><span class="line">		<span class="keyword">return</span> fn();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//这样逻辑是有问题的</span></span><br><span class="line">obj.getAge();<span class="comment">//NaN</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj =&#123;</span><br><span class="line">    birth:<span class="number">1997</span>,</span><br><span class="line">    getAge:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> b = <span class="keyword">this</span>.birth;</span><br><span class="line">        <span class="keyword">var</span> fn = <span class="function"><span class="params">()</span>=&gt;</span><span class="keyword">new</span> <span class="built_in">Date</span>().getFullYear()-<span class="keyword">this</span>.birth;</span><br><span class="line">        <span class="keyword">return</span> fn();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">obj.getAge();<span class="comment">//23</span></span><br><span class="line"><span class="comment">//这样箭头函数完全修复了this的指向，this总是指向词法作用域，也就是最外层调用者obj</span></span><br></pre></td></tr></table></figure>
<h3 id="8-2-函数调用"><a href="#8-2-函数调用" class="headerlink" title="8.2 函数调用"></a>8.2 函数调用</h3><ul>
<li>调用JavaScript函数的四种方式<ul>
<li>作为函数</li>
<li>作为方法</li>
<li>作为构造函数</li>
<li>通过他们的call()和aply（）方法间接调用</li>
</ul>
</li>
</ul>
<h4 id="函数调用"><a href="#函数调用" class="headerlink" title="函数调用"></a>函数调用</h4> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">printprops(&#123;<span class="attr">x</span>:<span class="number">1</span>&#125;);</span><br><span class="line"><span class="keyword">var</span> total = distance(<span class="number">0</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">1</span>)+distance(<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">5</span>);</span><br><span class="line"><span class="keyword">var</span> probability = factorial(<span class="number">5</span>)/factorial(<span class="number">13</span>);</span><br></pre></td></tr></table></figure>
<h4 id="方法调用"><a href="#方法调用" class="headerlink" title="方法调用"></a>方法调用</h4><ul>
<li>方法调用和汉时调用的重要区别：<ul>
<li>调用上下文</li>
</ul>
</li>
<li>方法调用通过属性访问表达式</li>
<li>属性访问表达式由两部分组成<ul>
<li>一个对象（o)： 调用上下文，函数体可以用this引用</li>
<li>属性名称(m)</li>
</ul>
</li>
<li>方法是个保存在一个对象的属性里的JavaScript函数</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">o.m = f;</span><br></pre></td></tr></table></figure>
<p>给对象o定义了方法m（）,调用时候她就像这样</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">o.m();</span><br><span class="line">o.m(x,y);</span><br><span class="line">o[<span class="string">"m"</span>](x,y);	<span class="comment">//o.m(x,y);的另一种写法</span></span><br></pre></td></tr></table></figure>
<ul>
<li>例子</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> calculator = &#123;</span><br><span class="line">	operand1:<span class="number">1</span>,</span><br><span class="line">	operand2:<span class="number">1</span>,</span><br><span class="line">	add: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.result = <span class="keyword">this</span>.operand1+<span class="keyword">this</span>.operand2;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line">calculator.add(); 	<span class="comment">//这个方法调用计算1+1的结果</span></span><br><span class="line">calculator.result ;<span class="comment">// =&gt;2</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">这个例子和上面的例子是不一样的，上面的例子中，this外面还有一层函数，在那个函数中用匿名函数</span></span><br><span class="line"><span class="comment">	会不指向obj，而是指向第二层函数。</span></span><br><span class="line"><span class="comment">    var obj=&#123;</span></span><br><span class="line"><span class="comment">        birth: 1997,</span></span><br><span class="line"><span class="comment">        getAge: function()&#123;</span></span><br><span class="line"><span class="comment">            var b = this.birth;</span></span><br><span class="line"><span class="comment">            var fn = function()&#123;</span></span><br><span class="line"><span class="comment">                return new Date().getFullYear()-this.birth;</span></span><br><span class="line"><span class="comment">                //this指向undefined而不是obj</span></span><br><span class="line"><span class="comment">            &#125;;</span></span><br><span class="line"><span class="comment">		return fn();</span></span><br><span class="line"><span class="comment">	&#125;</span></span><br><span class="line"><span class="comment">&#125;;</span></span><br><span class="line"><span class="comment">	但是这个例子中，只有一层，this直接指向obj</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h5 id="方法链"><a href="#方法链" class="headerlink" title="方法链"></a>方法链</h5><ul>
<li>当方法的返回值是一个对象，这个对象还可以再调用他的方法。形成链，每次调用的结果都是另外一个表达式的组成部分</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">customer.surname.toUpperCase();	<span class="comment">//调用customer.surname的方法</span></span><br><span class="line">f().m();	<span class="comment">//在f()调用结束后继续调用返回值的方法m()</span></span><br><span class="line"><span class="comment">//下面这个表达式是说：找到所有的header，取得他们id的映射，转换成数组并对它们进行排序</span></span><br><span class="line"><span class="comment">//$(": header").map(function()&#123;return this.id&#125;).get().sort();</span></span><br></pre></td></tr></table></figure>
<ul>
<li>如果在设计的API中一直采用这种方式（每个方法都返回this）就可以进行链式调用</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shape.setX(100).setY(100).setSize(50).setOutline(&quot;red&quot;).setFill(&quot;blue&quot;).draw();</span><br></pre></td></tr></table></figure>
<ul>
<li><p>注意</p>
<ul>
<li><p>不要把方法的链式调用和构造函数的链式调用混为一谈</p>
</li>
<li><p>方法和this关键词是JS面向对象编程的核心</p>
</li>
<li><p>方法调用实际上都会传入一个隐式实参（一个对象）,方法调用的母体就是这个对象</p>
</li>
<li><p>```javascript<br>rect.setSize(width,height);<br>setRectSize(rect,width,height);</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  + 我们假设这两行代码的功能完全一样，他们都作用于一个假定的对象rect。可以看出第一行的方法调用语法非常清晰的表明这个函数执行的载体是rect对象，函数中的所有操作都将基于这个对象</span><br><span class="line"></span><br><span class="line">  + this是一个关键字，不是变量也不是属性名，不允许给this赋值</span><br><span class="line"></span><br><span class="line">&#96;&#96;&#96;javascript</span><br><span class="line">var o &#x3D;&#123;</span><br><span class="line">	m:function()&#123;</span><br><span class="line">		var self &#x3D; this;		&#x2F;&#x2F;讲this的值保存到一个变量中去</span><br><span class="line">		console.log(this&#x3D;&#x3D;&#x3D;0);	&#x2F;&#x2F;输出true，this就是这个对象o</span><br><span class="line">		f();					&#x2F;&#x2F;调用辅助函数f()</span><br><span class="line">		</span><br><span class="line">		function f()&#123;</span><br><span class="line">			console.log(this&#x3D;&#x3D;&#x3D;o);&#x2F;&#x2F;false:this的值是全局对象或者undefined</span><br><span class="line">			console.log(self&#x3D;&#x3D;&#x3D;o);&#x2F;&#x2F;true:self指外部函数的this值，也就是o</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getAge</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="keyword">var</span> y = <span class="keyword">new</span> <span class="built_in">Date</span>().getFullYear();</span><br><span class="line">	<span class="keyword">return</span> y-<span class="keyword">this</span>.birth();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> xiaoming =&#123;</span><br><span class="line">	name: <span class="string">'小明'</span>,</span><br><span class="line">	birth: <span class="number">1990</span>,</span><br><span class="line">	age: getAge</span><br><span class="line">&#125;;</span><br><span class="line">xiaoming.age();<span class="comment">//30</span></span><br><span class="line">getAge();		<span class="comment">//NaN 因为this指向全局去了，全局里面并没有birth()</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fn = xiaoming.age;</span><br><span class="line">fn();			<span class="comment">//这样也是NaN</span></span><br></pre></td></tr></table></figure>
<p>这样是不对的！！！</p>
<p><img src="/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/4.png" alt="示例"></p>
<p>这样就对了</p>
<p><img src="/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/5.png" alt="示例"></p>
<h4 id="创建对象时构造"><a href="#创建对象时构造" class="headerlink" title="创建对象时构造"></a>创建对象时构造</h4><ul>
<li>创建过程<ul>
<li>首先创建一个新的空对象，然后传入指定的参数并将这个新对象当作this的值来调用与i个指定的函数。这个函数使用this来初始化新创建对象的属性</li>
<li>构造函数一般不会返回值，这个新创建并被初始化后的对象就是整个对象创建表达式的值</li>
<li>如果构造函数确实会返回一个对象值，则此时对象作为整个对象创建表达式的值，新创建的对象就废弃了</li>
<li>如果构造函数使用return单没有指定返回值，或者返回一个原始值，这时将忽略返回值，而使用这个新对象作为调用结果</li>
</ul>
</li>
</ul>
<h4 id="间接调用"><a href="#间接调用" class="headerlink" title="间接调用"></a>间接调用</h4><p><img src="/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/6.png" alt="示例"></p>
<h3 id="8-3函数的实参和形参"><a href="#8-3函数的实参和形参" class="headerlink" title="8.3函数的实参和形参"></a>8.3函数的实参和形参</h3><h4 id="存在的问题"><a href="#存在的问题" class="headerlink" title="存在的问题"></a>存在的问题</h4><ul>
<li>函数定义未指定函数形参的类型</li>
<li>函数调用没有对传入的实参值做类型检查</li>
<li>不检查传入形参的个数</li>
</ul>
<h4 id="可选形参"><a href="#可选形参" class="headerlink" title="可选形参"></a>可选形参</h4><ul>
<li>若传入的实参比函数声明式指定的形参个数少，剩下的形参都将是只给undefined值<ul>
<li>应该给省略的参数赋一个合理的默认值</li>
</ul>
</li>
</ul>
<p><img src="/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/7.png" alt="示例"></p>
<ul>
<li>注意<ul>
<li>用这种可选形参来实现函数时，需要将可选形参放在参数列表的最后，否则必须传入null或者undefined作为第一个形参<ul>
<li>在函数定义中使用注释/<em>optional</em>/来强调形参式可选的</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="可变长的实参列表：实参对象"><a href="#可变长的实参列表：实参对象" class="headerlink" title="可变长的实参列表：实参对象"></a>可变长的实参列表：实参对象</h4><ul>
<li>若传入的实参个数超过函数定义时的形参个数，使用参数对象解决<h5 id="函数体内，标识符arguments式指向实参对象的引用"><a href="#函数体内，标识符arguments式指向实参对象的引用" class="headerlink" title="函数体内，标识符arguments式指向实参对象的引用"></a>函数体内，标识符arguments式指向实参对象的引用</h5><ul>
<li>通过数字下表就能访问传入函数的实参值</li>
<li>省略的实参都是undefined，多出的参数自动省略</li>
<li>arguments并不是真正的数组，他是一个实参对象（它是一个对象，只是碰巧具有以数字为索引的属性），实参对象式一个类数组对象</li>
</ul>
</li>
</ul>
<p><img src="/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/8.png" alt="示例"></p>
<p><img src="/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/9.png" alt="示例"></p>
<ul>
<li>在非严格模式下，当一个函数包含若干形参，实参对象的数组元素是函数形参所对应实参的别名，并且形参名称可以认为是相同变量的不同命名，单严格模式下不行</li>
</ul>
<h5 id="剩余参数"><a href="#剩余参数" class="headerlink" title="剩余参数"></a>剩余参数</h5><p>剩余参数语法允许我们将一个补丁数量的参数表示为一个数组</p>
<ul>
<li>语法</li>
<li><img src="/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/11.png" alt="示例"></li>
<li>例子</li>
<li><img src="/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/10.png" alt="示例"></li>
<li><img src="/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/12.png" alt="示例"></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">...Args</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> theArgs.reduce((previous,current)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> previous+current;</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(sum(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)); 	<span class="comment">//6</span></span><br></pre></td></tr></table></figure>
<h5 id="剩余参数和arguments对象的区别"><a href="#剩余参数和arguments对象的区别" class="headerlink" title="剩余参数和arguments对象的区别"></a>剩余参数和arguments对象的区别</h5><ul>
<li>剩余参数只包含哪些没有对应形参的实参，arguments对象包含了传给函数的所有实参</li>
<li>arguments对象不是一个真正的数组，而剩余函数是真正的array实例，也就是你能够在它上面直接使用所有的数组方法，比如sort，map，forEach和pop（）</li>
</ul>
<h4 id="将对象属性用作实参"><a href="#将对象属性用作实参" class="headerlink" title="将对象属性用作实参"></a>将对象属性用作实参</h4><ul>
<li>通过名/值 对的形式传入参数，是参数顺序无关紧要</li>
<li>例子</li>
</ul>
<p><img src="/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/13.png" alt="示例"></p>
<p> <img src="/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/projects\JasonXQH.github.io\source\_posts\Javascript-8函数\13.png" alt="13"></p>
<h4 id="实参类型"><a href="#实参类型" class="headerlink" title="实参类型"></a>实参类型</h4><ul>
<li>JavaScript方法的形参并未声明类型，在形参传入函数体之前也没有做类型检查</li>
<li>应当在程序中添加实参类型检查逻辑</li>
</ul>
<p><img src="/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/14.png" alt="示例"></p>
<h4 id="默认参数值"><a href="#默认参数值" class="headerlink" title="默认参数值"></a>默认参数值</h4><ul>
<li>函数默认参数允许在没有值或undefined被传入时使用默认形参</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function multiply(a,b&#x3D;1)&#123;</span><br><span class="line">return a*b;</span><br><span class="line">&#125;</span><br><span class="line">console(multiply(5,2));	&#x2F;&#x2F;10</span><br><span class="line">console(multiply(5))	&#x2F;&#x2F;5</span><br></pre></td></tr></table></figure>
<h3 id="8-4作为值的函数"><a href="#8-4作为值的函数" class="headerlink" title="8.4作为值的函数"></a>8.4作为值的函数</h3><ul>
<li>函数不仅是一种语法，也是值<ul>
<li>可以将函数赋值给变量，存储在对象的属性或数组的元素中，作为参数传入另外一个函数等<h4 id="赋值给变量"><a href="#赋值给变量" class="headerlink" title="赋值给变量"></a>赋值给变量</h4></li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">square</span>(<span class="params">x</span>)</span>&#123; <span class="keyword">return</span> x*x ;&#125;</span><br><span class="line"><span class="keyword">var</span> s = square; 	<span class="comment">//s 和 square指代同一个函数</span></span><br><span class="line">square(<span class="number">4</span>);			<span class="comment">//16</span></span><br><span class="line">s(<span class="number">4</span>);				<span class="comment">//16</span></span><br></pre></td></tr></table></figure>
<h4 id="赋值给对象的属性"><a href="#赋值给对象的属性" class="headerlink" title="赋值给对象的属性"></a>赋值给对象的属性</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;<span class="attr">square</span>: <span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;<span class="keyword">return</span> x*x ;&#125;&#125; <span class="comment">//对象直接量</span></span><br><span class="line"><span class="keyword">var</span> y = o.squre(<span class="number">16</span>);						<span class="comment">//y=256</span></span><br></pre></td></tr></table></figure>
<h4 id="赋值给数组元素"><a href="#赋值给数组元素" class="headerlink" title="赋值给数组元素"></a>赋值给数组元素</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;<span class="keyword">return</span> x*x ;&#125;,<span class="number">20</span>];	<span class="comment">//作为数组的一个成员</span></span><br><span class="line">a[<span class="number">0</span>](a[<span class="number">1</span>]);			<span class="comment">//400</span></span><br></pre></td></tr></table></figure>
<h4 id="作为参数传入另一个函数"><a href="#作为参数传入另一个函数" class="headerlink" title="作为参数传入另一个函数"></a>作为参数传入另一个函数</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x,y</span>)</span>&#123; <span class="keyword">return</span> x+y ;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">substract</span>(<span class="params">x,y</span>)</span>&#123;<span class="keyword">return</span> x-y;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">multiply</span>(<span class="params">x,y</span>)</span>&#123;<span class="keyword">return</span> x*y ;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">multiply</span>(<span class="params">x,y</span>)</span>&#123;<span class="keyword">return</span> x/y;&#125;</span><br><span class="line"><span class="comment">//这里的函数以上面的某个函数作为参数</span></span><br><span class="line"><span class="comment">//并给他传入两个操作数然后调用它</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">operate</span>(<span class="params">operator,operad1,operand2</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> operaor(operand1,operand2);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//这行代码所示的函数调用实际上计算了（2+3）+（4*5）的值</span></span><br><span class="line"><span class="keyword">var</span> i = operate(add,operate(add,<span class="number">2</span>,<span class="number">3</span>),operate(multiply,<span class="number">4</span>,<span class="number">5</span>));</span><br></pre></td></tr></table></figure>
<h4 id="自定义函数属性"><a href="#自定义函数属性" class="headerlink" title="自定义函数属性"></a>自定义函数属性</h4><ul>
<li>函数可以拥有属性</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//初始化函数对象的计数器属性</span></span><br><span class="line"><span class="comment">// 有序函数声明被提前了，因此这里是可以在函数声明之前给他成员赋值的</span></span><br><span class="line">uniqueInteger.counter = <span class="number">0</span>;</span><br><span class="line"><span class="comment">//每次调用这个函数都会返回一个不同的整数</span></span><br><span class="line"><span class="comment">//它使用一个属性来记住下一次将要返回的值</span></span><br><span class="line"><span class="function">function <span class="title">uniqueInteger</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> uniqueInteget.counter++;<span class="comment">//先返回计数器的值，然后计数器自增</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>例子</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//计算阶乘，并将结果缓存到函数的属性中</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">factorial</span>(<span class="params">n</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(<span class="built_in">isFinite</span>(n)&amp;&amp;n&gt;<span class="number">0</span>&amp;&amp;n==<span class="built_in">Math</span>.round(n))&#123;	</span><br><span class="line">        <span class="comment">//有限的正整数，round是四舍五入的函数，这里来判断n是不是整数。isFinite()判断是否无限</span></span><br><span class="line">		<span class="keyword">if</span>(!(n <span class="keyword">in</span> factorial))<span class="comment">//如果这个位置没有缓存结果</span></span><br><span class="line">			factorial[n]=n*factorial(n<span class="number">-1</span>);</span><br><span class="line">		<span class="keyword">return</span> factorial[n];		<span class="comment">//返回缓存结果</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">NaN</span>;</span><br><span class="line">&#125;</span><br><span class="line">factorial[<span class="number">1</span>]=<span class="number">1</span></span><br></pre></td></tr></table></figure>
<h3 id="8-5-作为命名空间的函数"><a href="#8-5-作为命名空间的函数" class="headerlink" title="8.5 作为命名空间的函数"></a>8.5 作为命名空间的函数</h3><ul>
<li>不在任何函数内声明的变量是全局变量，在整个JavaScript程序中都是可见的</li>
<li>我们常常就简单的定义一个函数用作临时的命名空间，在这个命名空间内定义的变量都不会污染到全局命名空间                 </li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mymodule</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="comment">//模块代码</span></span><br><span class="line">	<span class="comment">//这个模块所使用的所有变量都是局部变量</span></span><br><span class="line">	<span class="comment">//而不是污染全局命名空间</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>();</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="comment">//模块代码</span></span><br><span class="line">&#125;());<span class="comment">//结束函数定义并立即调用它</span></span><br></pre></td></tr></table></figure>
<h3 id="8-6-闭包"><a href="#8-6-闭包" class="headerlink" title="8.6 闭包"></a>8.6 闭包</h3><ul>
<li>闭包：函数对象可以通过作用域链相互关联起来，函数体内部的变量都可以保存在函数的作用域内</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> scope =<span class="string">"global scope"</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkscope</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="keyword">var</span> scope = <span class="string">"local scope"</span>;</span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> scope;&#125;</span><br><span class="line">	<span class="keyword">return</span> f();</span><br><span class="line">&#125;</span><br><span class="line">checkscope(); =&gt; <span class="string">"local scope"</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> scope =<span class="string">"global scope"</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkscope</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="keyword">var</span> scope = <span class="string">"local scope"</span>;</span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> scope;&#125;</span><br><span class="line">	<span class="keyword">return</span> f;</span><br><span class="line">&#125;</span><br><span class="line">checkscope()(); =&gt; 返回值是什么？ 也是<span class="string">"local scope"</span></span><br></pre></td></tr></table></figure>
<ul>
<li>闭包可以捕捉到局部变量（和参数），并一直保存下来，看起来想这些变量绑定到了在其中定义他们的外部函数</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> uniqueInteger = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="comment">//定义函数并立即调用</span></span><br><span class="line">	<span class="keyword">var</span> counter = <span class="number">0</span>;	<span class="comment">//函数的私有状态，外面访问不到counter属性</span></span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> counter++;&#125;;</span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure>
<ul>
<li>例子</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">counter</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="keyword">var</span> n = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		count : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> n++;&#125;</span><br><span class="line">		reset : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;n=<span class="number">0</span>;&#125;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> c= counter().d= counter();</span><br><span class="line">c.count()		<span class="comment">//0</span></span><br><span class="line">d.count()		<span class="comment">//0 c d 互不干扰</span></span><br><span class="line">c.reset()		<span class="comment">//reset()和count()方法共享状态</span></span><br><span class="line">c.count()		<span class="comment">//0:因为我们把c重置了</span></span><br><span class="line">d.count()		<span class="comment">//1：没有重置d</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">counter</span>(<span class="params">n</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span>&#123;</span><br><span class="line">		<span class="keyword">get</span> count()&#123;<span class="keyword">return</span> n++;&#125;</span><br><span class="line">		<span class="keyword">set</span> count(m)&#123;</span><br><span class="line">		<span class="keyword">if</span>(m&gt;=n)n=m;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">throw</span> <span class="built_in">Error</span>(<span class="string">"count can only be set to a larger value"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> c= counter(<span class="number">1000</span>);</span><br><span class="line">c.count;			<span class="comment">//1000</span></span><br><span class="line">c.count;			<span class="comment">//1001</span></span><br><span class="line">c.count = <span class="number">2000</span>;		</span><br><span class="line">c.count;			<span class="comment">//2000</span></span><br><span class="line">c.count = <span class="number">2000</span>;		<span class="comment">//Error</span></span><br><span class="line"><span class="comment">//也不是很好</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addPrivateProperty</span>(<span class="params">o,name,predicate</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">var</span> value;</span><br><span class="line">	o[<span class="string">"get"</span>+name] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">return</span> value;&#125;</span><br><span class="line">	o[<span class="string">"set"</span>+ name]=<span class="function"><span class="keyword">function</span>(<span class="params">v</span>)</span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(predicate&amp;&amp;!predicate(v))</span><br><span class="line">			<span class="keyword">throw</span> <span class="built_in">Error</span>(<span class="string">"set"</span>+name+<span class="string">": invalid value "</span>+v);</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			value =v;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> o =&#123;&#125;;</span><br><span class="line">addPrivateProperty(o,<span class="string">"Name"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;<span class="keyword">return</span> <span class="keyword">typeof</span> x==<span class="string">"string"</span>;&#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li>例子</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这个函数返回一个总是返回v的函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">constfunc</span>(<span class="params">v</span>)</span>&#123; <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> v;&#125;;&#125;</span><br><span class="line"><span class="comment">//创建一个数组用来存储常数函数</span></span><br><span class="line"><span class="keyword">var</span> funcs = [];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++) funcs[i] = constfunc(i);</span><br><span class="line"><span class="comment">//在第五个位置的元素所表示的函数返回值为5</span></span><br><span class="line">funcs[<span class="number">5</span>]() <span class="comment">//=&gt; 5</span></span><br></pre></td></tr></table></figure>
<ul>
<li>例子</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//返回一个 函数 组成的数组，它们的返回值是0-9</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">constfuncs</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="keyword">var</span> funcs = [];</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)</span><br><span class="line">        <span class="comment">//这时候创建了10个闭包，都共享了i，当i变化，所有的闭包都会返回相同的值</span></span><br><span class="line">		funcs[i] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> i;&#125;</span><br><span class="line">	<span class="keyword">return</span> funcs;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> funcs = constfuncs();<span class="comment">//变量i的值是10</span></span><br><span class="line">funcs[<span class="number">5</span>]()<span class="comment">//返回值是什么,是10</span></span><br></pre></td></tr></table></figure>
<ul>
<li>注意<ul>
<li>每个函数调用都包含一个this值，闭包在外部函数里是无法访问this的<ul>
<li>除非外部函数将this转存为一个变量</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> self = <span class="keyword">this</span>;<span class="comment">//将this保存至一个变量中，以便嵌套的函数能够访问它</span></span><br></pre></td></tr></table></figure>
<ul>
<li>闭包具有自己所绑定的arguments，因此闭包内无法直接访问外部函数的参数数组<ul>
<li>除非外部函数将参数数组保存到另外一个变量中：</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> outerArguments = <span class="built_in">arguments</span>;	<span class="comment">//保存起来以便嵌套的函数能使用它</span></span><br></pre></td></tr></table></figure>
<h3 id="8-7函数属性、方法和构造函数"><a href="#8-7函数属性、方法和构造函数" class="headerlink" title="8.7函数属性、方法和构造函数"></a>8.7函数属性、方法和构造函数</h3><ul>
<li>函数也是对象，他们也可以拥有属性和方法<ul>
<li>函数属性和方法</li>
<li>Function()构造函数</li>
</ul>
</li>
</ul>
<h4 id="length属性"><a href="#length属性" class="headerlink" title="length属性"></a>length属性</h4><ul>
<li>arguments.length 表示传入函数的实参的个数</li>
<li>函数本身的length属性值得是形参的数量</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">check</span>(<span class="params">args</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">var</span> actual = args.length;			<span class="comment">//实参的真是个数</span></span><br><span class="line">	<span class="keyword">var</span> excepted = args.callee.length;	<span class="comment">//期望的实参个数</span></span><br><span class="line">	<span class="keyword">if</span>(actual!== expected)				<span class="comment">//如果不同则抛出异常</span></span><br><span class="line">		<span class="keyword">throw</span> <span class="built_in">Error</span>(<span class="string">"Expected"</span>+ expected + <span class="string">"args;got "</span>+ actual);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x,y,z</span>)</span>&#123;</span><br><span class="line">	check(<span class="built_in">arguments</span>);	<span class="comment">// 检查实参个数和期望的实参个数是否一致</span></span><br><span class="line">	<span class="keyword">return</span> x+y+z;		<span class="comment">// 再执行函数的后续逻辑</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span> (<span class="params">a,b,...rest</span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'a='</span>+a);</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'b='</span>+b);</span><br><span class="line">&#125;</span><br><span class="line">foo.length;			<span class="comment">//2 不会管..rest</span></span><br></pre></td></tr></table></figure>
<h4 id="prototype属性，在第九章进一步讨论"><a href="#prototype属性，在第九章进一步讨论" class="headerlink" title="prototype属性，在第九章进一步讨论"></a>prototype属性，在第九章进一步讨论</h4><h4 id="call-和-apply"><a href="#call-和-apply" class="headerlink" title="call() 和 apply()"></a>call() 和 apply()</h4><ul>
<li>call()和apply()的第一个实参都变为this的值，即使传入的实参是原始值或者null或者undefined</li>
<li>call()，第一个参数之后的所有实参是要传入带调用函数的值；</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">f.call(o,<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line"><span class="comment">//对于这个对象来说调用函数，传入参数1，2</span></span><br></pre></td></tr></table></figure>
<ul>
<li>apply()实参都放到一个数组</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f.apply(o,[<span class="number">1</span>,<span class="number">2</span>]);</span><br></pre></td></tr></table></figure>
<h5 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getAge</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="keyword">var</span> y = <span class="keyword">new</span> <span class="built_in">Date</span>().getFullYear();</span><br><span class="line">	<span class="keyword">return</span> y = <span class="keyword">this</span>.birth;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> xm = &#123;</span><br><span class="line">	name:<span class="string">"小明"</span>,</span><br><span class="line">	birth:<span class="number">1990</span>;</span><br><span class="line">	age: getAge;</span><br><span class="line">&#125;</span><br><span class="line">xm.age();</span><br><span class="line">getAge.apply(xm,[])<span class="comment">//25，this指向xm这个对象</span></span><br><span class="line"><span class="comment">//apply是应用的意思，可以理解为把函数引用到这个对象上</span></span><br></pre></td></tr></table></figure>
<h4 id="bind-方法"><a href="#bind-方法" class="headerlink" title="bind()方法"></a>bind()方法</h4><ul>
<li>作用是把函数绑定到某个对象</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">y</span>)</span>&#123;<span class="keyword">return</span> <span class="keyword">this</span>.x+y;&#125;	<span class="comment">//这是个待绑定的函数</span></span><br><span class="line"><span class="keyword">var</span> o = &#123;<span class="attr">x</span>:<span class="number">1</span>&#125;;					<span class="comment">//将要绑定的对象</span></span><br><span class="line"><span class="keyword">var</span> g = f.bind(o);				<span class="comment">//通过调用g(x)来调用o.f(x)</span></span><br><span class="line">g(<span class="number">2</span>)<span class="comment">//3</span></span><br></pre></td></tr></table></figure>
<ul>
<li>除了第一个实参之外，传入bind()的实参也会绑定到this</li>
<li><img src="/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/15.png" alt="示例"></li>
</ul>
<h3 id="toString-方法"><a href="#toString-方法" class="headerlink" title="toString()方法"></a>toString()方法</h3><p><img src="/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/16.png" alt="示例"></p>
<h3 id="Function-构造函数"><a href="#Function-构造函数" class="headerlink" title="Function()构造函数"></a>Function()构造函数</h3><ul>
<li>FUnction()构造函数可以传入任意数量的字符串实参，最后一个实参所表示的文本就是函数体</li>
<li>除了最后一个实参，其他实参字符串是指定函数的形参名字的字符串</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> f = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">"x"</span>,<span class="string">"y"</span>,<span class="string">"return x*y"</span>);</span><br><span class="line"><span class="keyword">var</span> f = <span class="function"><span class="keyword">function</span>(<span class="params">x,y</span>)</span>&#123;<span class="keyword">return</span> x*y;&#125;</span><br><span class="line"><span class="comment">//这两个是一样的</span></span><br></pre></td></tr></table></figure>
<ul>
<li>需要特别注意<ul>
<li>在运行时动态的创建并编译函数 </li>
<li>每次调用Function（）构造函数都会解析函数体，并创建新的函数对象</li>
<li>所创建的函数代码的编译总是会在顶层函数（全局作用域）执行</li>
</ul>
</li>
</ul>
<img src="/2020/04/21/Javascript-8%E5%87%BD%E6%95%B0/04/21/Javascript-8%E5%87%BD%E6%95%B0/17.png" class>
<h3 id="8-8函数式编程"><a href="#8-8函数式编程" class="headerlink" title="8.8函数式编程"></a>8.8函数式编程</h3><ul>
<li>在JavaScript中可以像操控对象一样操控函数，也就是说可以在Javascript中应用函数式编程技术、</li>
</ul>
<h4 id="使用函数处理数组"><a href="#使用函数处理数组" class="headerlink" title="使用函数处理数组"></a>使用函数处理数组</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//首先定义两个简单的函数</span></span><br><span class="line"><span class="keyword">var</span> sum = <span class="function"><span class="keyword">function</span>(<span class="params">x,y</span>)</span>&#123;<span class="keyword">return</span> x+y;&#125;</span><br><span class="line"><span class="keyword">var</span> square = <span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;<span class="keyword">return</span> x*x;&#125;</span><br><span class="line"><span class="comment">//然后将这些函数和数组的方法配合使用计算出平均数和标准差</span></span><br><span class="line"><span class="keyword">var</span> data = [<span class="number">1</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">5</span>];</span><br><span class="line"><span class="keyword">var</span> mean = data.reduce(sum)/data.length;</span><br><span class="line"><span class="keyword">var</span> deviation = data.map(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;<span class="keyword">return</span> x-mean;&#125;);</span><br><span class="line"><span class="comment">//计算标准差</span></span><br><span class="line"><span class="keyword">var</span> stddev = <span class="built_in">Math</span>.sqrt(deviation.map(square).reduce(sum)/(data.length <span class="number">-1</span>));</span><br></pre></td></tr></table></figure>
<h4 id="高阶函数"><a href="#高阶函数" class="headerlink" title="高阶函数"></a>高阶函数</h4><ul>
<li>操作函数的函数，它姐手一个或者多个函数作为参数，并返回一个新函数</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这个高阶函数会返回一个新的函数，这个新函数将他的实参传入f()</span></span><br><span class="line"><span class="comment">//并且返回f的返回值的逻辑非</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">not</span>(<span class="params">f</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="keyword">var</span> result = f,apply(<span class="keyword">this</span>,<span class="built_in">arguments</span>);</span><br><span class="line">		<span class="keyword">return</span> !result;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> even = <span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123; 	<span class="comment">//判断是否是偶数</span></span><br><span class="line">	<span class="keyword">return</span> x%<span class="number">2</span> === <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> odd=not(even);</span><br><span class="line">[<span class="number">1</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">5</span>].every(odd)		<span class="comment">//true 每个元素都是奇数</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//所返回的函数的参数应当是一个实参数组，并对每个数组元素执行函数f()</span></span><br><span class="line"><span class="comment">//并返回所有计算结果组成的数组</span></span><br><span class="line"><span class="comment">//可以对比一下这个函数和上文提到的map()函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mapper</span>(<span class="params">f</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">a</span>)</span>&#123; <span class="keyword">return</span> map(a,f)&#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> increment = <span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;<span class="keyword">return</span> x+<span class="number">1</span>;&#125;;</span><br><span class="line"><span class="keyword">var</span> incrementer = mapper(increment);</span><br><span class="line">incrementer([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]) ; <span class="comment">// [2,3,4]</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//返回一个新的可以计算f(g(...))的函数</span></span><br><span class="line"><span class="comment">//返回的函数h()将它所有的实参传入g()，然后将g()的返回值传入f()</span></span><br><span class="line"><span class="comment">//调用f()和g()时的this值和调用h()时的this是同一个this</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">compose</span>(<span class="params">f,g</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="comment">//需要给f()传入一个参数，所以使用f()的call方法</span></span><br><span class="line">		<span class="comment">//需要给g()传入很多参数。所以用g()的apply()方法</span></span><br><span class="line">		<span class="keyword">return</span> f.call(<span class="keyword">this</span>,g.apply(<span class="keyword">this</span>,<span class="built_in">arguments</span>));</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> sum = <span class="function"><span class="keyword">function</span>(<span class="params">x,y</span>)</span>&#123;<span class="keyword">return</span> x+y;&#125;</span><br><span class="line"><span class="keyword">var</span> square = <span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;<span class="keyword">return</span> x*x;&#125;</span><br><span class="line"><span class="keyword">var</span> squareofsum = compose(square,sum);</span><br><span class="line">squareofsum(<span class="number">2</span>,<span class="number">3</span>) ;<span class="comment">//25</span></span><br></pre></td></tr></table></figure>
<h3 id="不完全函数"><a href="#不完全函数" class="headerlink" title="不完全函数"></a>不完全函数</h3><ul>
<li>这个函数可以接受一些参数，这些参数中有一些参数可以被绑定成其他函数，然后返回一个新的函数，这个新的函数接收剩下的未绑定的的参数</li>
</ul>
<h3 id="记忆"><a href="#记忆" class="headerlink" title="记忆"></a>记忆</h3><ul>
<li>将上次的计算结果缓存起来，在函数式编程当中，这种缓存技巧叫做记忆</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//返回f()的带有记忆功能的版本</span></span><br><span class="line"><span class="comment">//只有当f()的实参的字符串表示都不相同时它才会工作</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">memorize</span>(<span class="params">f</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> cache = &#123;&#125;;<span class="comment">//将值保存在闭包内</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">//将实参转换为字符串形式，并将其用作缓存的键</span></span><br><span class="line">        <span class="keyword">var</span> key = <span class="built_in">arguments</span>.length + <span class="built_in">Array</span>.prototype.join.call(<span class="built_in">arguments</span>,<span class="string">","</span>);</span><br><span class="line">        <span class="keyword">if</span>(key <span class="keyword">in</span> cache) <span class="keyword">return</span> cache[key];<span class="comment">//找到的话直接返回</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span>  cache[key] = f.apply(<span class="keyword">this</span>,<span class="built_in">arguments</span>);<span class="comment">//否则把新的再调用</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//返回两个整数的最大公约数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">gcd</span>(<span class="params">a,b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> t;</span><br><span class="line">    <span class="keyword">if</span>(a&lt;b) &#123;</span><br><span class="line">        t=b,b=a&amp;t , a=t;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (b!=<span class="number">0</span>)&#123;</span><br><span class="line">        t=b,b=a%b , a=t;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> gcdmemo = memorize(gcd);</span><br><span class="line">gcdmemo(<span class="number">85</span>,<span class="number">187</span>)<span class="comment">//17</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//注意，当我们写一个递归函数是，往往需要实现记忆功能</span></span><br><span class="line"><span class="comment">// 我们更希望调用实现了记忆功能的递归函数，而不是原递归函数</span></span><br><span class="line"><span class="keyword">var</span>  factorial = memorize(<span class="function"><span class="keyword">function</span> (<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (n&lt;=<span class="number">1</span>)? <span class="number">1</span>: n*factorial(n<span class="number">-1</span>);</span><br><span class="line">&#125;);</span><br><span class="line">factorial(<span class="number">5</span>);	<span class="comment">//120</span></span><br><span class="line"><span class="comment">//先计算了factorial（1）。。。（4）并且有缓存，不会重复计算</span></span><br></pre></td></tr></table></figure>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/JavaScript/" rel="tag"># JavaScript</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/04/21/Javascript-7%E6%95%B0%E7%BB%84/" rel="prev" title="Javascript-7数组">
      <i class="fa fa-chevron-left"></i> Javascript-7数组
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/04/21/496%E4%B8%8B%E4%B8%80%E4%B8%AA%E6%9B%B4%E5%A4%A7%E7%9A%84%E6%95%B0/" rel="next" title="496下一个更大的数">
      496下一个更大的数 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#JavaScript-8函数"><span class="nav-number">1.</span> <span class="nav-text">JavaScript-8函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#概况"><span class="nav-number">1.1.</span> <span class="nav-text">概况</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#8-1函数定义"><span class="nav-number">1.1.1.</span> <span class="nav-text">8.1函数定义</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#箭头函数"><span class="nav-number">1.1.1.1.</span> <span class="nav-text">箭头函数</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-2-函数调用"><span class="nav-number">1.1.2.</span> <span class="nav-text">8.2 函数调用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#函数调用"><span class="nav-number">1.1.2.1.</span> <span class="nav-text">函数调用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#方法调用"><span class="nav-number">1.1.2.2.</span> <span class="nav-text">方法调用</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#方法链"><span class="nav-number">1.1.2.2.1.</span> <span class="nav-text">方法链</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#创建对象时构造"><span class="nav-number">1.1.2.3.</span> <span class="nav-text">创建对象时构造</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#间接调用"><span class="nav-number">1.1.2.4.</span> <span class="nav-text">间接调用</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-3函数的实参和形参"><span class="nav-number">1.1.3.</span> <span class="nav-text">8.3函数的实参和形参</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#存在的问题"><span class="nav-number">1.1.3.1.</span> <span class="nav-text">存在的问题</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#可选形参"><span class="nav-number">1.1.3.2.</span> <span class="nav-text">可选形参</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#可变长的实参列表：实参对象"><span class="nav-number">1.1.3.3.</span> <span class="nav-text">可变长的实参列表：实参对象</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#函数体内，标识符arguments式指向实参对象的引用"><span class="nav-number">1.1.3.3.1.</span> <span class="nav-text">函数体内，标识符arguments式指向实参对象的引用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#剩余参数"><span class="nav-number">1.1.3.3.2.</span> <span class="nav-text">剩余参数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#剩余参数和arguments对象的区别"><span class="nav-number">1.1.3.3.3.</span> <span class="nav-text">剩余参数和arguments对象的区别</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#将对象属性用作实参"><span class="nav-number">1.1.3.4.</span> <span class="nav-text">将对象属性用作实参</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#实参类型"><span class="nav-number">1.1.3.5.</span> <span class="nav-text">实参类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#默认参数值"><span class="nav-number">1.1.3.6.</span> <span class="nav-text">默认参数值</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-4作为值的函数"><span class="nav-number">1.1.4.</span> <span class="nav-text">8.4作为值的函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#赋值给变量"><span class="nav-number">1.1.4.1.</span> <span class="nav-text">赋值给变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#赋值给对象的属性"><span class="nav-number">1.1.4.2.</span> <span class="nav-text">赋值给对象的属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#赋值给数组元素"><span class="nav-number">1.1.4.3.</span> <span class="nav-text">赋值给数组元素</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#作为参数传入另一个函数"><span class="nav-number">1.1.4.4.</span> <span class="nav-text">作为参数传入另一个函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#自定义函数属性"><span class="nav-number">1.1.4.5.</span> <span class="nav-text">自定义函数属性</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-5-作为命名空间的函数"><span class="nav-number">1.1.5.</span> <span class="nav-text">8.5 作为命名空间的函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-6-闭包"><span class="nav-number">1.1.6.</span> <span class="nav-text">8.6 闭包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-7函数属性、方法和构造函数"><span class="nav-number">1.1.7.</span> <span class="nav-text">8.7函数属性、方法和构造函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#length属性"><span class="nav-number">1.1.7.1.</span> <span class="nav-text">length属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#prototype属性，在第九章进一步讨论"><span class="nav-number">1.1.7.2.</span> <span class="nav-text">prototype属性，在第九章进一步讨论</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#call-和-apply"><span class="nav-number">1.1.7.3.</span> <span class="nav-text">call() 和 apply()</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#例子"><span class="nav-number">1.1.7.3.1.</span> <span class="nav-text">例子</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#bind-方法"><span class="nav-number">1.1.7.4.</span> <span class="nav-text">bind()方法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#toString-方法"><span class="nav-number">1.1.8.</span> <span class="nav-text">toString()方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Function-构造函数"><span class="nav-number">1.1.9.</span> <span class="nav-text">Function()构造函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-8函数式编程"><span class="nav-number">1.1.10.</span> <span class="nav-text">8.8函数式编程</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#使用函数处理数组"><span class="nav-number">1.1.10.1.</span> <span class="nav-text">使用函数处理数组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#高阶函数"><span class="nav-number">1.1.10.2.</span> <span class="nav-text">高阶函数</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#不完全函数"><span class="nav-number">1.1.11.</span> <span class="nav-text">不完全函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#记忆"><span class="nav-number">1.1.12.</span> <span class="nav-text">记忆</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Jason</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">439</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">68</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jason</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->




  















  

  

  

</body>
</html>

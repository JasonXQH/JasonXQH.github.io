<!DOCTYPE html>
<html lang="en">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"jasonxqh.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Jason‘s Blog">
<meta property="og:url" content="https://jasonxqh.github.io/page/23/index.html">
<meta property="og:site_name" content="Jason‘s Blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Jason">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://jasonxqh.github.io/page/23/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Jason‘s Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Jason‘s Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/07/03/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/07/03/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE4/" class="post-title-link" itemprop="url">离散数学之图4</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-07-03 10:51:14" itemprop="dateCreated datePublished" datetime="2020-07-03T10:51:14+08:00">2020-07-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-07-06 13:14:20" itemprop="dateModified" datetime="2020-07-06T13:14:20+08:00">2020-07-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%9B%BE/" itemprop="url" rel="index"><span itemprop="name">图</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="离散数学之图4"><a href="#离散数学之图4" class="headerlink" title="离散数学之图4"></a>离散数学之图4</h1><p>我们在购物的时候，常常会收到宝贝推荐，那么网站是根据什么原理来推送给我们的呢？</p>
<p>我们需要了解<strong>协同过滤</strong>的概念. 也就是我们需要衡量两个对象之间的距离、亲和度</p>
<h2 id="Community-Structures"><a href="#Community-Structures" class="headerlink" title="Community Structures"></a>Community Structures</h2><h3 id="Definition"><a href="#Definition" class="headerlink" title="Definition"></a>Definition</h3><p>Community structure indicates that the network divides naturally into groups of nodes with dense connections internally and sparser connections between groups.</p>
<p>Community structure  就是说把一些节点分成几个部分，在每一个部分中节点之间连接比较紧密；但是在组和组之间的连接比较稀疏。比如根据国家与国家之间的关系网络，分成几大阵营</p>
<ul>
<li>Global community structures: clustering-based approach,spectral clustering, modularity-based approach, etc. 把每一个节点至少划分到一个社团当中</li>
<li>Local community structures: node-centric community, group-centric community 只关心一小部分<ul>
<li>Traditional network: clique完全图, quasi-clique接近完全图, k-clique, k-core, etc. </li>
<li>Bipartite network: bi-clique二分完全图, quasi-bi-clique, etc.</li>
<li>Signed network: antagonistic community, quasi-antagonistic community, etc. Signed network就是节点和节点之间有一条边，边可以是negative或者positive的：negative代表敌对，positive代表联合<ul>
<li>敌人的敌人就是朋友</li>
<li><img src="/2020/07/03/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE4/1.png" style="zoom:80%;"></li>
<li>只有当三个符号相乘为正号的时候，才能说这个三角关系是稳定的，如果这三个符号相乘为符号，最终也会通过一个符号的改变趋于稳定。如果全是负号，说明三者都不对付，那么两个势必联合起来对服实力较强的一方从而转化成 - - +；又比如仅有一个负号，那么这两方就会劝另一方进入自己的阵营。变成—+或者两方和解称为+++</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="Global-Structure"><a href="#Global-Structure" class="headerlink" title="Global Structure"></a>Global Structure</h3><p>我们可以利用Global Structure 进行可视化：可以把社交圈分成几个部分</p>
<p>经过community detection之后，我们可以看到相同的圈子里，建立一条边非常容易。但是不同圈子里的人就很难联系上。所以利用这个可以做好友推荐。</p>
<p><img src="/2020/07/03/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE4/2.png" style="zoom:90%;"></p>
<h4 id="Clustering-based-on-vertex-similarity"><a href="#Clustering-based-on-vertex-similarity" class="headerlink" title="Clustering based on vertex similarity"></a>Clustering based on vertex similarity</h4><p>K-means是一种无监督的方法，也就是说不需要训练数据。给我一堆数据就可以挑选出什么是一类的，什么不是一类的。 K就代表 cluster（类）的数量</p>
<p>首先把点放到一个高维的空间当中，然后不断地计算点和点之间的距离，距离相近地归类，然后重新计算类中心。</p>
<p>经过多次 K-means的运算，一直到类的中心不再变化。完成聚类。</p>
<p><img src="/2020/07/03/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE4/3.png" style="zoom:90%;"></p>
<p><img src="/2020/07/03/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE4/1.jpg" style="zoom:80%;"></p>
<h4 id="Spectral-clustering"><a href="#Spectral-clustering" class="headerlink" title="Spectral clustering"></a>Spectral clustering</h4><p>Let $L$ be normalized Laplacian of graph $G$, the algorithm partitions nodes into two sets $(B1, B2) $based on the eigenvector <strong>v</strong> corresponding to the second-smallest eigenvalue of $L$. Partitioning may be done in<br>various ways:</p>
<ul>
<li>Assign all nodes whose component in <strong>v</strong> satises certain condition in $B_1$, and $B_2$ otherwise, e.g., larger than median, the sign of each entry of <strong>v</strong>.</li>
<li>The algorithm can be used for hierarchical clustering by repeatedly partitioning the subsets in this fashion.</li>
</ul>
<h4 id="Modularity-模块度"><a href="#Modularity-模块度" class="headerlink" title="Modularity 模块度"></a>Modularity 模块度</h4><p><img src="/2020/07/03/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE4/4.png" style="zoom:90%;"></p>
<h4 id="Louvain-method"><a href="#Louvain-method" class="headerlink" title="Louvain method"></a>Louvain method</h4><p><img src="/2020/07/03/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE4/2.jpg" style="zoom: 67%;"></p>
<h4 id="Clique"><a href="#Clique" class="headerlink" title="Clique"></a>Clique</h4><p><img src="/2020/07/03/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE4/5.png" style="zoom: 80%;"></p>
<h4 id="Extensions-of-clique"><a href="#Extensions-of-clique" class="headerlink" title="Extensions of clique"></a>Extensions of clique</h4><p><img src="/2020/07/03/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE4/6.png" style="zoom: 80%;"></p>
<h3 id="local-Structure"><a href="#local-Structure" class="headerlink" title="local Structure"></a>local Structure</h3><p><img src="/2020/07/03/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE4/7.png" style="zoom: 80%;"></p>
<h2 id="Node-Proximity-顶点亲和度"><a href="#Node-Proximity-顶点亲和度" class="headerlink" title="Node Proximity 顶点亲和度"></a>Node Proximity 顶点亲和度</h2><p>Node proximity (= similarity or closeness, but $\not=$ distance) measures:</p>
<ul>
<li>Information exchange</li>
<li>Latency/speed of information exchange</li>
<li>Likelihood of future link</li>
<li>Propagation of a product/idea/service/ disease</li>
<li>Relevance: ranking</li>
</ul>
<p>通过顶点和顶点之间的亲和度，我们可以计算出信息之间交换可能性的大小，信息传递速率的快慢，两点之间未来产生一条边的概率,产品、idea、服务、疾病的扩散情况,。</p>
<h3 id="Simple-Approaches"><a href="#Simple-Approaches" class="headerlink" title="Simple Approaches"></a>Simple Approaches</h3><p>Jaccard比Common neighbors计算出来的相似度更准确</p>
<p>Adamic/Adar：公共好友的neighbors越多，那么做出的贡献越小。</p>
<p><img src="/2020/07/03/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE4/8.png" style="zoom: 90%;"></p>
<p>缺点就是把这张图看成了集合，没有考虑朋友的朋友</p>
<h3 id="Graph-theoretic-Approaches"><a href="#Graph-theoretic-Approaches" class="headerlink" title="Graph-theoretic Approaches"></a>Graph-theoretic Approaches</h3><p><img src="/2020/07/03/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE4/9.png" style="zoom: 90%;"></p>
<p><img src="/2020/07/03/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE4/10.png" style="zoom: 90%;"></p>
<h3 id="SimRank"><a href="#SimRank" class="headerlink" title="SimRank"></a>SimRank</h3><p>SimRank假设每两个点之间都有一个相似度。然后迭代来算，每一轮计算a与b的相似度的时候，根据上一轮的结果来计算。如果a!=b,那么根据这个公式，通过c和d（ab的好友）的相似度加权集合来计算a和b的相似度</p>
<p><img src="/2020/07/03/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE4/11.png" style="zoom: 90%;"></p>
<h3 id="Random-Walk-based-Approaches"><a href="#Random-Walk-based-Approaches" class="headerlink" title="Random Walk based Approaches"></a>Random Walk based Approaches</h3><p><img src="/2020/07/03/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE4/12.png" style="zoom: 90%;"></p>
<p><img src="/2020/07/03/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE4/13.png" style="zoom: 90%;"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/" class="post-title-link" itemprop="url">数据科学与工程数学基础1</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-07-01 23:23:08" itemprop="dateCreated datePublished" datetime="2020-07-01T23:23:08+08:00">2020-07-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-05-04 20:12:42" itemprop="dateModified" datetime="2021-05-04T20:12:42+08:00">2021-05-04</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="第二章-向量与矩阵基础"><a href="#第二章-向量与矩阵基础" class="headerlink" title="第二章:向量与矩阵基础"></a>第二章:向量与矩阵基础</h1><p> 课程 :<a href="http://mooc1.chaoxing.com/nodedetailcontroller/visitnodedetail?courseId=208843967&amp;knowledgeId=282612421" target="_blank" rel="noopener">http://mooc1.chaoxing.com/nodedetailcontroller/visitnodedetail?courseId=208843967&amp;knowledgeId=282612421</a></p>
<h2 id="第二讲-向量与矩阵的基本概念与运算"><a href="#第二讲-向量与矩阵的基本概念与运算" class="headerlink" title="第二讲:向量与矩阵的基本概念与运算"></a>第二讲:向量与矩阵的基本概念与运算</h2><h3 id="2-1向量与矩阵的基本概念"><a href="#2-1向量与矩阵的基本概念" class="headerlink" title="2.1向量与矩阵的基本概念"></a>2.1向量与矩阵的基本概念</h3><p>点的平面、空间坐标；球在空间当中的位置；力、加速度等，需要多个数字来刻画</p>
<p>在数据科学，模式分析，人工智能领域，我们也需要刻画来自网络世界中的对象：一副图像，一段文字，一条记录等等。为了准确理解这些传感器中的数值以及数据，我们也需要根据一定的顺序来排列这些数据，让他形成有序的数组来避免混淆。</p>
<p>我们把数组抽象出来，那么就会形成向量的概念。数组中每个数据由n个索引来确定，那么这个数组就被称为n元有序数组，也会称其为数表。如果这个数表是 nXm 的，那么将其抽象出来就得到了矩阵的概念。</p>
<p>比如，我们用词袋模型来解释一下：</p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/1.png" style="zoom:80%;"></p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/2.png" style="zoom:80%;"></p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/3.png" style="zoom:80%;"></p>
<h4 id="向量的定义："><a href="#向量的定义：" class="headerlink" title="向量的定义："></a>向量的定义：</h4><p>在给出响亮的形式化定义之前，我们先给出数组中的数值定义一个所属的范围，以方便向量进行代数运算，也就是数域</p>
<h5 id="定义一："><a href="#定义一：" class="headerlink" title="定义一："></a>定义一：</h5><p>设 $\mathbb K$ 是由一些数组成的集合，如果 $\mathbb K$ 中包含0与1 ，并且$\mathbb K$ 中任意两个数的和，差，积，商（除数不为0）仍在$\mathbb K$中，则称 $\mathbb K$是一个数域</p>
<p>有理数集，实数集和复数集都是数域，他们分别称为有理数域$\mathbb Q$ 实数域 $\mathbb R$ 和 复数域 $\mathbb C$</p>
<h5 id="定义二："><a href="#定义二：" class="headerlink" title="定义二："></a>定义二：</h5><p>由数域  $\mathbb K$ 中的n个数 组城的有序数组$(a_1,a_2,….a_n)$称为 $\mathbb K$ 上的n维向量，记为 <strong>a</strong>$=(a_1,a_2,….a_n)$ ,其中第i个数$a_i$ 称为 <strong>a</strong> 的第i个分量</p>
<p>当 <strong>a</strong> 的每个分量是实数时，则称 <strong>a</strong> 为<strong>实向量</strong>。所有n维实向量构成的集合记为 $\mathbb R^n$ </p>
<p>当 <strong>a</strong> 的每个分量是复数时，则称 <strong>a</strong> 为<strong>复向量</strong>。所有n维复向量构成的集合记为 $\mathbb C^n$ </p>
<p>上述定义的是行向量。在实际使用中，我们通常使用列向量。我们可以使用转置把列向量转换成行向量，或者把行向量转换成列向量        </p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/4.png" style="zoom:80%;"></p>
<p>根据上述定义，例一中的四个数组用向量表示即为：</p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/5.png" style="zoom:80%;"></p>
<p>在科学和工程中遇到的向量可以分为以下三种：</p>
<p>1）<strong>物理向量</strong>：泛指既有幅值，又有方向的物理量：如速度、加速度、位移等</p>
<p>2）<strong>几何向量</strong>：为了把物理向量可视化，常用带方向的线段表示。这种有向线段被称为集合向量。例如：$v=\vec{AB}$ 表示的有向线段。起点为 A，终点为B。</p>
<p>3）<strong>代数向量</strong>：几何向量可以用代数形式表示。例如，若平面上的几何向量 $v=\vec{AB}$ 的起点坐标为$A=(a_1,a_2)$ 终点坐标为$B= (b_1,b_2)$ 则该集合向量可以表示为代数形式 $\left(\begin{matrix}b_1-a_1\b_2-a_2\end{matrix}\right)$  .这种代数形式表示的集合向量成为代数向量。</p>
<p>可以这样细分：</p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/6.png" style="zoom:80%;"></p>
<p>根据取值种类不同，代数向量又可以分为下面三种：</p>
<p>1) 常数向量： 向量的元素全部为实常数或者复常数，如 <strong>a</strong> = $[1,5,4]^T$ 等</p>
<p>2) 函数向量： 向量的元素包含了函数，如 $x = [1,x^2,x^3,…,x^n]^T$ 等</p>
<p>3) 随机向量： 向量的元素为随机变量或者随机过程 如 $x(n) = [x_1(n),…,x_m(n)]^T$ 其中  $x_1(n),…x_m(n)$是m个随机过程或者随机信号（概率基础部分会讨论）</p>
<h4 id="文本向量集的表示"><a href="#文本向量集的表示" class="headerlink" title="文本向量集的表示"></a>文本向量集的表示</h4><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/7.png" style="zoom:80%;"></p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/8.png" style="zoom:80%;"></p>
<h4 id="矩阵的定义："><a href="#矩阵的定义：" class="headerlink" title="矩阵的定义："></a>矩阵的定义：</h4><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/9.png" style="zoom:67%;"></p>
<ul>
<li>矩阵是一个二元数组，二向量是矩阵的一种特殊形式，当 m = 1 或者 n= 1的时候，矩阵退化为向量<ul>
<li>1Xn 的矩阵称之为行向量</li>
<li>mX1的矩阵称之为列向量</li>
</ul>
</li>
<li>当A的每个元素是是实数，则称A是实矩阵。所有n维实矩阵构成的集合为 $\mathbb R^{mxn}$</li>
<li>当A的每个元素是是复数，则称A是复矩阵。所有n维复矩阵构成的集合为 $\mathbb C^{mxn}$</li>
</ul>
<p>在例二中，6X4 的 而原数组被称为一个词项-文档矩阵，这个矩阵的每一列表示一个新闻提要的词频向量，每一行表示每个词项在各个新闻中出现的权重。</p>
<p>在例三中，15X14 的而原数组被称为一个灰度图像矩阵，这个矩阵的每一行代表水平像素，每一列代表垂直像素</p>
<h3 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h3><p>一元数组：向量</p>
<p>二元数组:  矩阵</p>
<p>三元数组及以上的高维数组：</p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/10.png" style="zoom:80%;"></p>
<p><strong>更好的表示</strong></p>
<ul>
<li>寻找原始特征向量的低维近似： 主成分分析和奇异值分解</li>
<li>寻找原始特征向量的高维表示:    利用特征映射构造原始特征向量的高维非线性组合。</li>
</ul>
<h3 id="2-2向量和矩阵的运算"><a href="#2-2向量和矩阵的运算" class="headerlink" title="2.2向量和矩阵的运算"></a>2.2向量和矩阵的运算</h3><h4 id="向量的线性运算"><a href="#向量的线性运算" class="headerlink" title="向量的线性运算"></a>向量的线性运算</h4><p>向量之间的基本代数运算有两种:加法和数乘，统称为向量的线性运算</p>
<h5 id="定义4"><a href="#定义4" class="headerlink" title="定义4"></a>定义4</h5><p>设向量 $a = (a_1,a_2…,a_n),b=(b_1,b_2…,b_n)$则向量 $(a_1+b_1,a_2+b_2,…,a_n+b_n)$称为 向量a和向量b的和，记作 <strong>a+b</strong> 即 <strong>a+b</strong> = $(a_1+b_1,a_2+b_2,…,a_n+b_n)$</p>
<h5 id="定义-5"><a href="#定义-5" class="headerlink" title="定义 5"></a>定义 5</h5><p>设向量 $a = (a_1,a_2…,a_n)$ k 是数域 $\mathbb K$ 中的数，则向量 $(ka_1,ka_2,…,ka_n)$称为 数k与向量a的乘积，简称数乘。记作 k<strong>a</strong> 即 k<strong>a</strong> = $(ka_1,ka_2,…,ka_n)$</p>
<h5 id="定理"><a href="#定理" class="headerlink" title="定理"></a>定理</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/11.png" style="zoom:80%;"></p>
<h4 id="矩阵的加法"><a href="#矩阵的加法" class="headerlink" title="矩阵的加法"></a>矩阵的加法</h4><h5 id="定义6"><a href="#定义6" class="headerlink" title="定义6"></a>定义6</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/12.png" style="zoom:80%;"></p>
<h5 id="定理2"><a href="#定理2" class="headerlink" title="定理2"></a>定理2</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/13.png" style="zoom:80%;"></p>
<h4 id="矩阵的乘法"><a href="#矩阵的乘法" class="headerlink" title="矩阵的乘法"></a>矩阵的乘法</h4><h5 id="定义7"><a href="#定义7" class="headerlink" title="定义7"></a>定义7</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/14.png" style="zoom:80%;"></p>
<h5 id="定理3"><a href="#定理3" class="headerlink" title="定理3"></a>定理3</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/15.png" style="zoom:80%;"></p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/16.png" style="zoom:80%;"></p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/17.png" style="zoom:80%;"></p>
<h5 id="定义8"><a href="#定义8" class="headerlink" title="定义8"></a>定义8</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/18.png" style="zoom:80%;"></p>
<h5 id="定义9"><a href="#定义9" class="headerlink" title="定义9"></a>定义9</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/19.png" style="zoom:80%;"></p>
<h5 id="定理4"><a href="#定理4" class="headerlink" title="定理4"></a>定理4</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/20.png" style="zoom:80%;"></p>
<h4 id="矩阵的分块乘法"><a href="#矩阵的分块乘法" class="headerlink" title="矩阵的分块乘法"></a>矩阵的分块乘法</h4><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/21.png" style="zoom:80%;"></p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/22.png" style="zoom:80%;"></p>
<p>例如： </p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/23.png" style="zoom:80%;"></p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/24.png" style="zoom:80%;"></p>
<h4 id="初等矩阵"><a href="#初等矩阵" class="headerlink" title="初等矩阵"></a>初等矩阵</h4><h5 id="定义10"><a href="#定义10" class="headerlink" title="定义10"></a>定义10</h5><p>所谓数域$\mathbb K$ 上的矩阵的初等行（列） 变换是指下列三种变换:</p>
<p>1) 以$\mathbb K$ 中一个非零的数乘矩阵的某一行（列）</p>
<p>2）把矩阵的某一行(列)的c倍加到另一行（列），这里c是 $\mathbb K$ 的任意一个数字</p>
<p>3） 呼唤矩阵中两行（列）的位置</p>
<h5 id="定义11"><a href="#定义11" class="headerlink" title="定义11"></a>定义11</h5><p>由单位矩阵I经过一次初等行(列)变换得到的 矩阵被称为初等矩阵</p>
<h5 id="定理5"><a href="#定理5" class="headerlink" title="定理5"></a>定理5</h5><p>对一个m x n 的矩阵 A 作一初等变换就相当于在A左边呈上相应的mXm 的初等矩阵；对A作一初等列变换就相当于在A右边乘上相应的 nxn 的初等矩阵</p>
<p>例题：</p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/26.png" style="zoom:80%;"></p>
<h4 id="矩阵的逆"><a href="#矩阵的逆" class="headerlink" title="矩阵的逆"></a>矩阵的逆</h4><h5 id="定义12"><a href="#定义12" class="headerlink" title="定义12"></a>定义12</h5><p>设 A是 数域$\mathbb K$ 上的 nxn 矩阵，如果存在 $\mathbb K$上的nxn矩阵 B，使得 $AB = BA = I $，则称 A 为可逆矩阵，简称A 可逆，而B则称为 A的逆矩阵，记作 A^-1^ </p>
<p>并不是每个 nxn的举证都可逆，如果A可逆，我们称A是可逆的或正规的或非奇异的，否则称A 是奇异的或非可逆的</p>
<h5 id="定理6"><a href="#定理6" class="headerlink" title="定理6"></a>定理6</h5><p>n 阶矩阵 A 可逆的充分必要条件是它能表示成一些初等矩阵 $Q_1,Q_2,…,Q_m$ 的乘积： $A= Q_1Q_2…Q_m$ </p>
<p>例题：</p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/27.png" style="zoom:80%;"></p>
<h4 id="矩阵的转置"><a href="#矩阵的转置" class="headerlink" title="矩阵的转置"></a>矩阵的转置</h4><h5 id="定义13"><a href="#定义13" class="headerlink" title="定义13"></a>定义13</h5><p>设 $A=(a<em>{ij})</em>{m<em>n}$ , 把 A 的 行列互换所得到的矩阵称为A的转置，记作$A^T$ 或者 $A’$ ,即 $A^T=A = (a<em>{ij})</em>{m</em>n}$</p>
<p>对于一个方阵A, $A^T$相当于我们把A沿着它的对角线做一个镜像，而且如果A是对称的 ，则 $A=A^T$</p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/28.png" style="zoom:80%;"></p>
<h4 id="用矩阵表示线性方程组"><a href="#用矩阵表示线性方程组" class="headerlink" title="用矩阵表示线性方程组"></a>用矩阵表示线性方程组</h4><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/30.png" style="zoom:80%;"></p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/31.png" style="zoom:80%;"></p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/32.png" style="zoom:80%;"></p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/33.png" style="zoom:80%;"></p>
<h3 id="小结："><a href="#小结：" class="headerlink" title="小结："></a>小结：</h3><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/29.png" style="zoom:80%;"></p>
<h2 id="第三讲-向量空间与子空间"><a href="#第三讲-向量空间与子空间" class="headerlink" title="第三讲:向量空间与子空间"></a>第三讲:向量空间与子空间</h2><h3 id="3-1向量空间的基本概念"><a href="#3-1向量空间的基本概念" class="headerlink" title="3.1向量空间的基本概念"></a>3.1向量空间的基本概念</h3><h4 id="引例"><a href="#引例" class="headerlink" title="引例"></a>引例</h4><p>这是一个鸢尾花数据集，这是一个四维的数据集。我们希望把它降维来变成二维或者三维的数据，这样就可以进行数据可视化了。横坐标和纵坐标是原特征的一些线性组和，通过这两个坐标可以反应原向量的性质。所以向量空间和子空间是数据科学、人工智能、机器学习领域的出发点。一些基本的处理任务，都可以放到向量空间以及子空间来考虑。</p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/34.png" style="zoom:80%;"></p>
<p>向量空间是数据处理空间的出发点</p>
<h4 id="定义1"><a href="#定义1" class="headerlink" title="定义1"></a>定义1</h4><p>设 $\mathbb V$ 是由n维向量组成的非空集合，$\mathbb K$ 是一个数域。在 $\mathbb V$ 上定义了加法，在 $\mathbb K$ 与集合 $\mathbb V$上定义了数乘，并且 $\forall a,b\in \mathbb V$ 及任意数 $k\in\mathbb K$ ，由 $a+b,ka\in \mathbb V$,则称$\mathbb V$ 对于向量的加法和数乘两种运算封闭，$\mathbb V$ 为数域$\mathbb K$ 上 n维向量空间或者线性空间。</p>
<h4 id="例1"><a href="#例1" class="headerlink" title="例1"></a>例1</h4><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/35.png" style="zoom:80%;"></p>
<p>同样的我们把 $\mathbb R^n$和 $\mathbb C^n$ 命名为实向量空间和复向量空间</p>
<h4 id="例2"><a href="#例2" class="headerlink" title="例2"></a>例2</h4><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/36.png" style="zoom:80%;"></p>
<h4 id="例3"><a href="#例3" class="headerlink" title="例3"></a>例3</h4><p>刚才我们假设 $\mathbb {V,K}$ 都是相等的，那么下面这个例子  $\mathbb {V,K}$  是不相等的。</p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/37.png" style="zoom:80%;"></p>
<h4 id="例4"><a href="#例4" class="headerlink" title="例4"></a>例4</h4><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/38.png" style="zoom:80%;"></p>
<p>所以我们可以看出向量空间中的元素不一定是数字向量，可以是矩阵也可以是多项式。向量空间的本质就是集合对加法和数乘运算封闭。这两个运算是线性运算，所以我们也称向量空间为线性空间。</p>
<h3 id="3-2向量子空间"><a href="#3-2向量子空间" class="headerlink" title="3.2向量子空间"></a>3.2向量子空间</h3><p>在数据科学当中，我们常常得到海量的高维数据。但这些数据经常是只有几个维度和我们的预测问题有关。也就是说我们只要考虑高维空间中的低维子空间就能解决问题。</p>
<h4 id="定义2"><a href="#定义2" class="headerlink" title="定义2"></a>定义2</h4><p>设$\mathbb X$ 是 $\mathbb K$上的n维线性空间，$\mathbb Y$ 是$\mathbb X$ 的子集，且满足： 若 $x,y\in \mathbb Y $,则 $x+y\in \mathbb Y$ ;若 $a\in \mathbb K,x\in \mathbb Y$ 则 $ax\in \mathbb Y$ ,则称$\mathbb Y$是$\mathbb X$ 的线性子空间，简称子空间</p>
<h4 id="例5"><a href="#例5" class="headerlink" title="例5"></a>例5</h4><p>非空线性空间一定会有的子空间： 自身和{0}. 我们把只含零向量的子集称为零子空间。零子空间和线性空间本身统称为平凡子空间。其他的子空间叫做非平凡子空间。</p>
<h4 id="例6"><a href="#例6" class="headerlink" title="例6"></a>例6</h4><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/39.png" style="zoom:80%;"></p>
<p>ABC都不是子空间，只有D是子空间。</p>
<h4 id="例7"><a href="#例7" class="headerlink" title="例7"></a>例7</h4><ol>
<li>线性方程组 Ax=0的解空间是 $\mathbb R^n$ 中常见的子空间</li>
<li>线性方程组Ax = b的解空间，当 b不等于0的时候，不是子空间<ol>
<li>令$ Ax_1=b Ax_2=b A(x_1+x_2) = Ax_1+Ax_2 = 2b \not=  b$</li>
</ol>
</li>
<li>线性方程组Ax = 0的解空间和Bx=0的解空间的交集也是$\mathbb R^n$ 中的子空间<ol>
<li>$Ax=0$的解为$V_1, Bx=0$ 的解为$V_2$ 那么 令 $x_1,x_2\in V_1\cap V_2,Ax_1=Ax_2=0,Bx_1=Bx_2=0,A(x_1+x_2)=B(x_1+x_2)=0$说明对加法封闭。同理对数乘也是封闭的。</li>
</ol>
</li>
</ol>
<h4 id="子空间的交、和、直和"><a href="#子空间的交、和、直和" class="headerlink" title="子空间的交、和、直和"></a>子空间的交、和、直和</h4><h5 id="定理1"><a href="#定理1" class="headerlink" title="定理1"></a>定理1</h5><p>设$\mathbb Y_1$ 与$\mathbb Y_2$  都是数域$\mathbb K$上的线性空间 $\mathbb X$ 的子空间。若用$\mathbb Y_1\cap \mathbb Y_2$ 表示 $\mathbb Y_1$ 与$\mathbb Y_2$中$\mathbb Y_1\cap \mathbb Y_2$的公共元素集合，则$\mathbb Y_1\cap \mathbb Y_2$也是$\mathbb X$ 的子空间。且称 $\mathbb Y_1\cap \mathbb Y_2$ 为 $\mathbb Y_1$ 与 $ \mathbb Y_2$ 的交</p>
<h5 id="定理2-1"><a href="#定理2-1" class="headerlink" title="定理2"></a>定理2</h5><p>设$\mathbb Y_1$ 与$\mathbb Y_2$  都是数域$\mathbb K$上的线性空间 $\mathbb X$ 的子空间。若用$\mathbb Y_1 + \mathbb Y_2$ 表示全体形如$y_1+y_2(y_1\in\mathbb Y_1,y_2\in \mathbb Y_2)$  的向量组成的集合，则$\mathbb Y_1 + \mathbb Y_2$ 也是 $\mathbb X$ 的子空间，且称 $\mathbb Y_1 + \mathbb Y_2$ 为 $\mathbb Y_1$和 $\mathbb Y_2$ 的和</p>
<h5 id="定义3"><a href="#定义3" class="headerlink" title="定义3"></a>定义3</h5><p>如果 $\mathbb Y$ 中的每个向量x可<strong>唯一</strong>地表成 $x=y_1+y_2(y_1\in\mathbb Y_1,y_2\in \mathbb Y_2)$ 地形式，则称$\mathbb Y$ 为$\mathbb Y_1$ 与$\mathbb Y_2$ 的直和，记作 $\mathbb Y = \mathbb {Y_1+Y_2}$或者$\mathbb Y_1 \bigoplus \mathbb Y_2$  </p>
<h5 id="定理3-1"><a href="#定理3-1" class="headerlink" title="定理3"></a>定理3</h5><p>如果 $\mathbb Y$ 中的每个向量x可唯一地表成 $x=y_1+y_2(y_1\in\mathbb Y_1,y_2\in \mathbb Y_2)$ 可推出$y_1=y_2=0$ </p>
<h5 id="推论"><a href="#推论" class="headerlink" title="推论"></a>推论</h5><p>$\mathbb Y_1 + \mathbb Y_2$ 为直和地充分必要条件是 ：有$\mathbb Y_1\cap \mathbb Y_2 = {0}$</p>
<p>注意，子空间的并集不一定是子空间。假设$\mathbb X$是由 $R^2$构成的，那么令 x,y轴为连个子空间，那么这两个子空间的和就是整个平面上的点，但是这两个集合的并仅仅是x、y轴上的点，不能构成子空间</p>
<h3 id="3-3线性无关性"><a href="#3-3线性无关性" class="headerlink" title="3.3线性无关性"></a>3.3线性无关性</h3><h4 id="线性表出定义"><a href="#线性表出定义" class="headerlink" title="线性表出定义"></a>线性表出定义</h4><h5 id="定义4-1"><a href="#定义4-1" class="headerlink" title="定义4"></a>定义4</h5><p>设向量$a_1,a_2…,a_s$是数域$\mathbb K$ 上的n维向量组。 $k_1,k_2,…,k_s$是数域$\mathbb K$上的一组数，那么表达式 $k_1a_1+k_2a_2+…+k_sa_s$ 称为向量组$a_1,a_2…,a_s$的一个线性组合，而$k_1,k_2,…,k_s$称为组合系数</p>
<h5 id="定义5"><a href="#定义5" class="headerlink" title="定义5"></a>定义5</h5><p>若向量b是向量组 $a_1,a_2…,a_s$ 的一个线性组合，即 $b =k_1a_1+k_2a_2+…+k_sa_s$ 则称 b可以由向量组$a_1,a_2…,a_s$ 线性表出</p>
<h5 id="例8"><a href="#例8" class="headerlink" title="例8"></a>例8</h5><p>零向量0总可以写成其他一些向量的线性组合</p>
<h5 id="例9"><a href="#例9" class="headerlink" title="例9"></a>例9</h5><p>例如，设向量组</p>
<p>$a_1=(2,-1,3,1)$</p>
<p>$a_2=(4,-2,5,4)$</p>
<p>$a_3 = (2,-1,4,-1)$</p>
<p>则有$a_3 = 3a_1-a_2$ ，这表示$a_3$可以由$a_1,a_2$线性表出</p>
<h4 id="线性相关-无关"><a href="#线性相关-无关" class="headerlink" title="线性相关/无关"></a>线性相关/无关</h4><h5 id="定义-6"><a href="#定义-6" class="headerlink" title="定义 6"></a>定义 6</h5><p>设$a<em>i\in \mathbb K^n$ (i=1,2,….r) 若在$\mathbb K$ 中存在r个不全为零的数 $\lambda_i (i=1,2,…,r)$使$\sum</em>{i=1}^r\lambda<em>ia_i=0$ ， 则称向量组 $a_1,a_2,…a_r$ 线性相关。反之，如果向量组$a_1,a_2,…,a_r$ 不线性相关，即只有当$\lambda_1,\lambda _2,…,\lambda_r$ 全为0时，才能使得 $\sum</em>{i=0}^r\lambda_ia_i=0$ 则称向量组 $a_1,a_2,…,a_r$ 线性无关</p>
<h5 id="定义7-1"><a href="#定义7-1" class="headerlink" title="定义7"></a>定义7</h5><p>向量组的一部分组 称为一个极大线性无关组，如果这个部分组本身线性无关，但从原向量组的其余向量中任取一个添加进去后，所得的部分组都线性相关。</p>
<h5 id="例10"><a href="#例10" class="headerlink" title="例10"></a>例10</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/40.png" style="zoom:80%;"></p>
<p>这三对信息中，任意两对构成了极大线性无关组</p>
<h5 id="例11"><a href="#例11" class="headerlink" title="例11"></a>例11</h5><p>在向量组：</p>
<p>$a_1 = (2,-1,3,1) ,a_2=(4,-2,5,4),a_3=(2,-1,2,3)$</p>
<p>中，由$a_1,a_2$组成的部分组 就是一个极大的线性无关组。首先，$a_1,a_2$线性无关，因为由</p>
<p>$k_1a_1+k_2a_2=k_1(2,-1,3,1)+k_2(4,-2,5,4) = (2k_1+4k_2,-k_1-2k_2,3k_1+5k_2,k_1+4k_2)=(0,0,0,0)$</p>
<p>就有 $k_1=k_2=0$同时，$a_1,a_2,a_3$线性相关($a_2=a_1+a_3$) </p>
<p>不难看出，$a_2,a_3$也是一个极大线性无关组</p>
<h4 id="等价"><a href="#等价" class="headerlink" title="等价"></a>等价</h4><h5 id="定义8-1"><a href="#定义8-1" class="headerlink" title="定义8"></a>定义8</h5><p>设 $a_1,a_2…,a_s$ 和 $b_1,b_2,…,b_t$ 时数域$\mathbb K$ 上的两个向量组，如果向量组 $a_1,a_2,…,a_s$中<strong>每一个向量</strong> $a_i(i=1,2,3…,s)$ 都可以用向量 $b_1,b_2,…,b_t$ 线性表出，那么称向量组  $a_1,a_2,…,a_s$可以用向量组$b_1,b_2,…,b_t$线性表出。<strong>如果两个向量组可以互相线性表出</strong>，则称他们为等价。</p>
<h5 id="例12"><a href="#例12" class="headerlink" title="例12"></a>例12</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/41.png" style="zoom:80%;"></p>
<h3 id="3-4生成集、基底、坐标"><a href="#3-4生成集、基底、坐标" class="headerlink" title="3.4生成集、基底、坐标"></a>3.4生成集、基底、坐标</h3><h4 id="生成集"><a href="#生成集" class="headerlink" title="生成集"></a>生成集</h4><h5 id="定义9-1"><a href="#定义9-1" class="headerlink" title="定义9"></a>定义9</h5><p>设 $a<em>1,a_2,…,a_r$ 是$\mathbb V$ 的一组向量，则这组向量所有可能的线性组合 $\sum</em>{k=1}^{r}\lambda_ka_k$ <strong>所成的集合</strong> 是$\mathbb V$的一个子空间，称为由 $a_1,a_2,…,a_r$ 张成的子空间，记作 $L(a_1,a_2,…,a_r)$ 或 $span(a_1,a_2,…,a_r)$ 。 ${a_1,a_2,…,a_r}$ 叫做 $\mathbb V$的一个生成集。</p>
<h5 id="定理4-1"><a href="#定理4-1" class="headerlink" title="定理4"></a>定理4</h5><p>两个向量组张成相同的子空间的充要条件是：这两个向量组等价。</p>
<h4 id="基地与维数"><a href="#基地与维数" class="headerlink" title="基地与维数"></a>基地与维数</h4><h5 id="定义10-1"><a href="#定义10-1" class="headerlink" title="定义10"></a>定义10</h5><p>如果在向量空间$\mathbb V$中由n个线性无关的向量 $a_1,a_2,…a_n$ 且$\mathbb V$ 中任一向量都可以用它们线性表出，则称 $\mathbb V$ 为 $ \mathbb K$上的n维线性空间，n称为$\mathbb V$ 的维数，记作 $dim(\mathbb V)=n$。 而 $a_1,a_2,…a_n$ 就是 $\mathbb V $ 的一组基</p>
<p>注意：基可以作为生成集，但是生成集不一定是一组基，因为生成集不一定是线性无关的，但是基一定是线性无关的。</p>
<h5 id="例13"><a href="#例13" class="headerlink" title="例13"></a>例13</h5><p>复数域 $\mathbb C$ 在$\mathbb C$ 上和 $\mathbb R$ 上是两个不同的向量空间 </p>
<ul>
<li>因为在 $\mathbb C$ 上 他是一维的，所以数1就是一组基</li>
<li>而在$\mathbb R$ 上是二维的，数1和i是一组基</li>
</ul>
<p>这个例子告诉我们维数和所考虑的数域是有关的</p>
<h5 id="定理5-1"><a href="#定理5-1" class="headerlink" title="定理5"></a>定理5</h5><p>令$\mathbb V$ 是一向量空间 $\mathbb B\in \mathbb V$ ,$\mathbb B \not= \emptyset$ 下列命题等价：</p>
<ul>
<li>$\mathbb B$是 $\mathbb V$ 的一个基</li>
<li>$\mathbb B$ 是最小生成集</li>
<li>$\mathbb B$ 是 $\mathbb V$ 中的极大线性无关组</li>
<li>$\mathbb V$ 中的每一个向量都能被 $\mathbb B$ 线性表出</li>
</ul>
<h4 id="标准基"><a href="#标准基" class="headerlink" title="标准基"></a>标准基</h4><h5 id="定义11-1"><a href="#定义11-1" class="headerlink" title="定义11"></a>定义11</h5><p>如果一组基中的每一个向量长度均为1，我们称其为标准基</p>
<p>在后面的课程中，我们将会严格说明向量的长度</p>
<h5 id="例4-1"><a href="#例4-1" class="headerlink" title="例4"></a>例4</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/42.png" style="zoom:80%;"></p>
<h4 id="确定一组基"><a href="#确定一组基" class="headerlink" title="确定一组基"></a>确定一组基</h4><p>对于一个由向量$x_1,x_2,x_3$张成的向量空间 $\mathbb U \subseteq \mathbb R^4$</p>
<p>$x_1 =$  $\left(\begin{matrix}1\0\1\0\end{matrix}\right)$ , $x_2 = $  $\left(\begin{matrix}0\1\1\1\end{matrix}\right)$ , $x_3=$  $\left(\begin{matrix}1\1\2\1\end{matrix}\right)$ </p>
<p>我们关心$x<em>1,x_2,x_3$是否是$\mathbb U$的一组基。为此，我们需要确认 $x_1,x_2,x_3$是否线性无关。因此，我们需要解 $\sum</em>{i=1}^3\lambda_ix_i = 0$ </p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/43.png" style="zoom:80%;"></p>
<p>也就是子空间可以通过基底扩张变成一个新的空间。</p>
<h4 id="子空间的扩张"><a href="#子空间的扩张" class="headerlink" title="子空间的扩张"></a>子空间的扩张</h4><h5 id="定理6-1"><a href="#定理6-1" class="headerlink" title="定理6"></a>定理6</h5><p>设 $\mathbb Y = L(a<em>1,a_2,…,a_m)$ 是n维空间 $\mathbb X$ 的一个m维子空间，则向量组 $a_1,a_2,…,a_m$可扩张为  $a_1,a_2,…,a_m,a</em>{m+1},…,a<em>n$ 使得 $\mathbb X= L(a_1,a_2,…,a_m,a</em>{m+1},…,a_n) $</p>
<p>注意： 其中 $L(a_{m+1},…,a_n)$ 也是 $\mathbb X$ 的一个子空间。</p>
<p>$L(a<em>{m+1},…,a_n)\bigoplus  L(a_1,a_2,…,a_m) =  L(a_1,a_2,…,a_m,a</em>{m+1},…,a_n) $</p>
<h5 id="定理7"><a href="#定理7" class="headerlink" title="定理7"></a>定理7</h5><p>维数公式： $dim(\mathbb {Y_1+Y_2}) = dim\mathbb Y_1+dim\mathbb Y_2 - dim(\mathbb {Y_1\cap\mathbb Y_2})$ </p>
<p>对于直和：$dim(\mathbb Y_1 \bigoplus\mathbb Y_2) =dim\mathbb Y_1+dim\mathbb Y_2$ </p>
<h5 id="定义12-1"><a href="#定义12-1" class="headerlink" title="定义12"></a>定义12</h5><p>如果一个向量空间 $\mathbb V$ 中任一向量都能被n个线性无关的向量线性表出的时候，$\mathbb V$ 称为有限维线性空间，否则称为无限维线性空间。</p>
<p><strong>有限维线性空间</strong></p>
<ol>
<li>n维向量空间</li>
<li>nxm维矩阵空间</li>
<li>最高次为 n次的多项式空间</li>
<li>复数域</li>
</ol>
<p><strong>无限维线性空间</strong></p>
<ol>
<li>所有的多项式构成的空间</li>
<li>一阶可导函数空间</li>
<li>傅里叶变换后的频域空间</li>
</ol>
<h4 id="坐标"><a href="#坐标" class="headerlink" title="坐标"></a>坐标</h4><p>在n维向量空间 $\mathbb V$中，n个线性无关的向量 $\epsilon_1,\epsilon_2,…,\epsilon_n$称为$\mathbb V$的一组基。设 $\alpha$ 是$\mathbb V$中任一向量，于是 $\epsilon_1,\epsilon_2,…,\epsilon_n \alpha $线性相关，因此$\alpha$可以被基$\epsilon_1,\epsilon_2,…,\epsilon_n$ 线性表出：</p>
<p>$\alpha = a_1\epsilon_1+a_2\epsilon_2+…+a_n\epsilon_n$</p>
<p>其中 系数 $a_1,a_2,…,a_n$是被向量 $\alpha $和基$\epsilon_1,\epsilon_2,…,\epsilon_n$唯一确定的，这组数就称为$\alpha$在$\epsilon_1,\epsilon_2,…,\epsilon_n$ 下的坐标，记为 $(a_1,a_2,…,a_n)$</p>
<h5 id="例16"><a href="#例16" class="headerlink" title="例16"></a>例16</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/44.png" style="zoom:80%;"></p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/45.png" style="zoom:80%;"></p>
<h5 id="例17"><a href="#例17" class="headerlink" title="例17"></a>例17</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/46.png" style="zoom:80%;"></p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/47.png" style="zoom:80%;"></p>
<h3 id="3-5秩、矩阵的秩"><a href="#3-5秩、矩阵的秩" class="headerlink" title="3.5秩、矩阵的秩"></a>3.5秩、矩阵的秩</h3><h4 id="定义14"><a href="#定义14" class="headerlink" title="定义14"></a>定义14</h4><p>向量组 $a_1,a_2,…,a_r$的极大线性无关组中，所含向量的个数称为这个向量组的秩，记作 $rank{a_1,a_2,…,a_r}$ </p>
<h4 id="定义15"><a href="#定义15" class="headerlink" title="定义15"></a>定义15</h4><p>矩阵A的行（列）向量组的秩称为A的行秩（列秩），其中矩阵的行秩和列秩相等，他们都成为矩阵A的秩，记作$rank(A)$</p>
<h4 id="定理8"><a href="#定理8" class="headerlink" title="定理8"></a>定理8</h4><p>$dimL(a_1,a_2,…,a_r) = rank{a_1,a_2,…,a_r}$</p>
<h4 id="例18"><a href="#例18" class="headerlink" title="例18"></a>例18</h4><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/48.png" style="zoom:80%;"></p>
<h4 id="例19"><a href="#例19" class="headerlink" title="例19"></a>例19</h4><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/49.png" style="zoom:80%;"></p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/50.png" style="zoom:80%;"></p>
<h3 id="3-6仿射子空间"><a href="#3-6仿射子空间" class="headerlink" title="3.6仿射子空间"></a>3.6仿射子空间</h3><h4 id="定义16"><a href="#定义16" class="headerlink" title="定义16"></a>定义16</h4><p>令 $\mathbb V$ 是一线性空间，$x_0\in V$ 且 $\mathbb U\subseteq \mathbb V$ 是一线性子空间，则子集 </p>
<p>$\mathbb L = x_0+\mathbb U:={x_0+u|u\in\mathbb U}\subseteq \mathbb V$ 是一仿射子空间。</p>
<p>我们定义仿射子空间的维数为线性子空间的维数</p>
<ul>
<li>注意：如果 $x_0\notin \mathbb U$,则仿射子空间 $\mathbb L$ 不是一个子空间</li>
<li>若 $\mathbb U$ 有一基底 $a_1,a_2,…,a_m$ 则 $\mathbb L$中的每一个元素x均可写成$x_0+k_1a_1+k_2a_2+…+k_ma_m$ 这一结论通过定义是容易知道的</li>
</ul>
<h4 id="例20"><a href="#例20" class="headerlink" title="例20"></a>例20</h4><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/51.png" style="zoom:80%;"></p>
<h4 id="例21"><a href="#例21" class="headerlink" title="例21"></a>例21</h4><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/52.png" style="zoom:80%;"></p>
<p>仿射空间在数据科学当中有重要的应用，特别是在优化问题求解当中，很多优化问题的解集是定义在仿射空间上的。</p>
<h3 id="向量空间小结"><a href="#向量空间小结" class="headerlink" title="向量空间小结"></a>向量空间小结</h3><h4 id="向量空间上的运算封闭性："><a href="#向量空间上的运算封闭性：" class="headerlink" title="向量空间上的运算封闭性："></a>向量空间上的运算封闭性：</h4><ul>
<li>加法</li>
<li>数乘</li>
<li>…</li>
</ul>
<h4 id="“非严格”向量空间"><a href="#“非严格”向量空间" class="headerlink" title="“非严格”向量空间"></a>“非严格”向量空间</h4><ul>
<li>输入空间</li>
<li>输出空间</li>
<li>特征空间</li>
</ul>
<p>如何把数据向量从高维向量空间“拉回”到低维子空间？ -映射和投影</p>
<p>机器学习中输入和输出空间以及特征空间可以考虑为向量空间， 要实现运算任务，还需要附加额外的数据结构。在第三章中会考虑</p>
<h2 id="第四讲-线性映射与线性变换"><a href="#第四讲-线性映射与线性变换" class="headerlink" title="第四讲:线性映射与线性变换"></a>第四讲:线性映射与线性变换</h2><h3 id="4-1线性映射"><a href="#4-1线性映射" class="headerlink" title="4.1线性映射"></a>4.1线性映射</h3><h4 id="引例：手写数字识别"><a href="#引例：手写数字识别" class="headerlink" title="引例：手写数字识别"></a>引例：手写数字识别</h4><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/53.png" style="zoom:80%;"></p>
<h4 id="集合之间的映射"><a href="#集合之间的映射" class="headerlink" title="集合之间的映射"></a>集合之间的映射</h4><h5 id="定义1-1"><a href="#定义1-1" class="headerlink" title="定义1"></a>定义1</h5><p>设 $\mathbb {V,W}$是两个非空集合，如果存在一个法则$f$ ,使得3对 $\mathbb V$中的每个元素$v$ ，按法则$f$ ，在$\mathbb W$ 中有唯一确定的元素$w$与之对应，则称$f$为从$\mathbb V$到$\mathbb W$ 的映射，记作</p>
<p>$f:\mathbb V-&gt;\mathbb W$ </p>
<p>其中 $w$ 称为元素$v$ （在映射$f$ 下)的<strong>像</strong>。并记作$f(v)$,即</p>
<p>$w = f(v)$</p>
<p>而元素 $v$ 称为元素 $w$ (在映射$f$下)的一个<strong>原像</strong> 。集合$\mathbb V$称为映射 $f$ 的定义域，记作 $D_f$ ，而$D_f=\mathbb V$; $\mathbb V$中的所有元素的像所组成的集合称为映射 $f$ 的值域 ，记作$R_f$ 或者 $f(\mathbb V)$ 即</p>
<p>$R_f = f(\mathbb V) = {f(v)|v\in\mathbb V}$</p>
<h5 id="定义2-1"><a href="#定义2-1" class="headerlink" title="定义2"></a>定义2</h5><p>设$\mathbb {V,W}$ 是任意两个集合， $\varphi: \mathbb V \rightarrow \mathbb W$ 是一个映射，如果$\varphi $满足</p>
<ol>
<li>$\forall x,y \in \mathbb V$ :  $\varphi(x)=\varphi(y) \Rightarrow x=y$ 则称$\varphi $ 为<strong>单射</strong>;</li>
<li>$\varphi(\mathbb V) = \mathbb W$则称 $\varphi $ 为满射</li>
<li>既满足单射又满足满射，则称 $\varphi $ 为双射，也称一一对应</li>
</ol>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/55.png" style="zoom:80%;"></p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/54.png" style="zoom:80%;"></p>
<h5 id="例1-1"><a href="#例1-1" class="headerlink" title="例1"></a>例1</h5><p>下列映射中</p>
<ol>
<li>$\Phi_1 :\mathbb R^n \rightarrow \mathbb R^n,\Phi_1(x)=2x$ 既是单射又是满射，所以是双射</li>
<li>$\Phi_2:\mathbb R^n \rightarrow \mathbb R ,\Phi_2(x) = max(x_i)$ 只是满射，不是单射。</li>
<li>$\Phi_2:\mathbb R^n \rightarrow \mathbb R ,\Phi_3 = max(|x_i|)$ 既不是单射也不是满射</li>
</ol>
<h4 id="向量空间之间的线性映射"><a href="#向量空间之间的线性映射" class="headerlink" title="向量空间之间的线性映射"></a>向量空间之间的线性映射</h4><h5 id="定义3-1"><a href="#定义3-1" class="headerlink" title="定义3"></a>定义3</h5><p>设$\mathbb {V,W}$是数域$\mathbb K$ 上的两个有限维的向量空间 ,$\varphi$  是$\mathbb V$ 到$\mathbb W$ 的一个映射 $\varphi: \mathbb V \rightarrow \mathbb W$. 如果对任何向量 $x,y \in \mathbb V$ 以及任意的 $\alpha,\beta \in \mathbb K$ 有</p>
<p>$\varphi (\alpha x+\beta y)=\alpha\varphi(x)+\beta\varphi(y)$</p>
<p>则称 $\varphi $ 为 $\mathbb V$ 到 $\mathbb W$ 的线性映射</p>
<h5 id="例2-1"><a href="#例2-1" class="headerlink" title="例2"></a>例2</h5><p>考虑映射 $\epsilon :\mathbb V \rightarrow \mathbb V,\epsilon(x)=x$ 我们称 这种映射为<strong>恒等映射</strong></p>
<p>$\epsilon(\alpha x+\beta y) = \alpha x+\beta y = \alpha\epsilon(x)+\beta\epsilon(y)$</p>
<p>恒等映射自然是线性映射。</p>
<h5 id="例3-1"><a href="#例3-1" class="headerlink" title="例3"></a>例3</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/56.png" style="zoom:80%;"></p>
<h5 id="例4-2"><a href="#例4-2" class="headerlink" title="例4"></a>例4</h5><p>考虑映射 $T_Q(A) = Q^{-1}AQ$ 其中 $Q$ 为可逆矩阵</p>
<p>$T_Q(\alpha A+\beta B) = Q^{-1}(\alpha A+\beta B)Q$</p>
<p>$=\alpha Q^{-1}AQ +\beta Q^{-1}BQ$</p>
<p>$= \alpha T_Q(A)+\beta T_Q(B)$</p>
<h4 id="向量空间之间的特殊映射"><a href="#向量空间之间的特殊映射" class="headerlink" title="向量空间之间的特殊映射"></a>向量空间之间的特殊映射</h4><p>接下来，我么可以给出一些两个向量空间之间的特殊映射。</p>
<p>设 $\mathbb {V,W}$ 是数域 $\mathbb K$ 上的两个有限维的向量空间：</p>
<ol>
<li>$\varphi : \mathbb V\rightarrow \mathbb W$ 是线性映射，则  $\mathbb {V,W}$ 同态(Homomorphism),$\varphi $称为同态映射</li>
<li>$\varphi : \mathbb V\rightarrow \mathbb W$ 是线性映射且是双射，则  $\mathbb {V,W}$ 同构(Isomorphism),$\varphi $称为同构映射；</li>
<li>$\varphi : \mathbb V\rightarrow \mathbb V$ 是线性映射, 则 $\mathbb V$ 自同态(Endomorphism) , $\varphi $ 称为自同态映射</li>
<li>$\varphi : \mathbb V\rightarrow \mathbb V$ 是线性映射且是双射, 则 $\mathbb V$ 自同构(Automorphism) , $\varphi $ 称为自同构映射。</li>
</ol>
<h5 id="例5-1"><a href="#例5-1" class="headerlink" title="例5"></a>例5</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/57.png" style="zoom:80%;"></p>
<h5 id="定理1-1"><a href="#定理1-1" class="headerlink" title="定理1"></a>定理1</h5><p>设 $\mathbb {X_1,X_2} $是数域$\mathbb K$ 上的两个有限维度向量空间，$\mathbb {X_1,X_2}$ 同构，当且仅当 $dim(X_1)=dim(X_2)$ </p>
<p>定理1 表明了两个<strong>维数相同</strong>的向量空间之间存在一个满足双射的线性映射，从这个观点看，同构的向量空间是可以不加去别的，维数是有限维向量空间的唯一本质特征</p>
<p>也就是说对$\mathbb R^{m<em>n}$(一个 m</em>n 维的矩阵的线性空间) 和 $\mathbb R^{m *n}$ (一个长度为 mn 的向量的线性空间)， 其本质都是一样的。我们可以通过一个同构映射建立它们之间的关系</p>
<h5 id="定义5-1"><a href="#定义5-1" class="headerlink" title="定义5"></a>定义5</h5><p>设 $\mathbb {V,W}$ 是数域$\mathbb K$ 上的两个有限维的向量空间，如果$\varphi$ ：$\mathbb V\rightarrow \mathbb W$ 是一个双射，则可定义他的逆映射， 记作 $\varphi ^{-1} :\mathbb W \rightarrow \mathbb V$, 对于 $\forall x\in \mathbb V$ 和 $\forall y\in \mathbb W$ 使得</p>
<p>$\varphi^{-1}(\varphi(x)) = \xi(x) = x,\varphi(\varphi^{-1}(y)) = \xi(y) = y$</p>
<h5 id="例6-1"><a href="#例6-1" class="headerlink" title="例6"></a>例6</h5><ul>
<li>恒等映射的逆映射是其本身</li>
<li>在例4 中定义了 映射 $T<em>Q(A) = Q^{-1}AQ$ 的逆映射为 $T</em>{Q^{-1}} = QAQ^{-1}$</li>
</ul>
<h5 id="定理2-2"><a href="#定理2-2" class="headerlink" title="定理2"></a>定理2</h5><p>考虑向量空间 $\mathbb {V,W,X}$ 则有</p>
<ul>
<li>对于线性映射$\varphi :\mathbb {V} \rightarrow \mathbb W, \phi:\mathbb {W} \rightarrow \mathbb X$  则 $\phi(\varphi)$也是一个线性映射</li>
<li>如果$\varphi :\mathbb {V} \rightarrow \mathbb W$ 是同构映射，则 $\varphi^{-1}: \mathbb W\rightarrow\mathbb V$ 也是一个同构映射</li>
<li>如果$\varphi :\mathbb {V} \rightarrow \mathbb W, \phi:\mathbb {W} \rightarrow \mathbb X$ 是线性映射，且$\lambda \in \mathbb R$ 则 $\varphi+\phi $ 和 $\lambda\varphi$ 也是线性映射 也就是说，线性映射 对加法和数乘是封闭的</li>
</ul>
<h4 id="用线性映射分类手写数字"><a href="#用线性映射分类手写数字" class="headerlink" title="用线性映射分类手写数字"></a>用线性映射分类手写数字</h4><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/58.png" style="zoom:80%;"></p>
<h4 id="线性映射复合分类手写数字"><a href="#线性映射复合分类手写数字" class="headerlink" title="线性映射复合分类手写数字"></a>线性映射复合分类手写数字</h4><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/59.png" style="zoom:80%;"></p>
<p>所以仅仅是通过线性映射来复合并不会提高准确率。所以这就是为什么 在机器学习中用线性映射和非线性映射来符合提高准确率</p>
<h3 id="4-2线性映射的矩阵表示"><a href="#4-2线性映射的矩阵表示" class="headerlink" title="4.2线性映射的矩阵表示"></a>4.2线性映射的矩阵表示</h3><h4 id="变换矩阵"><a href="#变换矩阵" class="headerlink" title="变换矩阵"></a>变换矩阵</h4><p>考虑一个n维向量空间 $\mathbb V$ 的基底 ${b_1,…,b_n}$ ，并为基向量规定一个顺序。</p>
<h5 id="定义6-1"><a href="#定义6-1" class="headerlink" title="定义6"></a>定义6</h5><p>考虑一个n维向量空间 $\mathbb V$ 的基底 ${b_1,…,b_n}$ 是有序的，那么我们称 n元数组 $B = (b_1,…,b_n)$ 为向量空间 $\mathbb V$ 的一组有序基</p>
<p>同一个向量，对于不同的基，对应的坐标也不相同</p>
<h5 id="例7-1"><a href="#例7-1" class="headerlink" title="例7"></a>例7</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/60.png" style="zoom:80%;"></p>
<h5 id="定义7-2"><a href="#定义7-2" class="headerlink" title="定义7"></a>定义7</h5><p>考虑向量空间 $\mathbb {V,W}$的有序基 $B = (b_1,…,b_n)$ 和 $C = (c_1,…,c_m)$ 然后考虑一个线性映射 $\Phi:\mathbb V \rightarrow \mathbb W$ ，对于 $j\in {1,…,m}$</p>
<p>$\Phi(b<em>j) = a</em>{1j}c<em>1 + …+a</em>{mj}c<em>m = \sum</em>{i=1}^m a_{ij}c_i$</p>
<p>$\Phi(b<em>j)$ 是关于 C 的唯一标识，那么我们称这个 m*n 的矩阵为 $A</em>{\Phi}$ 它的元素为：$A<em>{\Phi}(i,j) = a</em>{ij}$</p>
<p>是$\Phi$ 的变换矩阵， $\Phi(b<em>j)$ 在$\mathbb W$ 的有序基 C 下的坐标是 $A</em>{\Phi}$ 的第j列</p>
<p>记$\Phi(B) = (\Phi(b<em>1),\Phi(b_2),…,\Phi(b_n))$ ,则  $\Phi (B) = CA</em>{\Phi}$ </p>
<p>设向量空间 $\mathbb {V,W}$ 的有序基分别为 B，C。线性映射 $\Phi:\mathbb V \rightarrow\mathbb W$ 的 变换矩阵为 $A_{\Phi}$ ，如果 $x\in \mathbb V$ 关于 B的坐标是 $\hat x,y = \Phi(x)\in\mathbb W$ 关于C的坐标是 $\hat y$ 。 也就是说 $x =B\hat x,y = C\hat y$</p>
<p>那么 $A<em>\Phi \hat x$ 就是$\Phi(x)$ 关于 C的坐标，由此得到坐标的映射关系： $\hat y = A</em>\Phi \hat x$</p>
<p>这意味着这个变换矩阵可以用来计算在两个空间各自基下坐标的映射关系</p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/62.png" style="zoom:80%;"></p>
<h5 id="例8-1"><a href="#例8-1" class="headerlink" title="例8"></a>例8</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/61.png" style="zoom:80%;"></p>
<h4 id="基变换"><a href="#基变换" class="headerlink" title="基变换"></a>基变换</h4><p> 考虑 $\mathbb V$ 的两个有序基底: $B = (b_1,…,b_n),\hat B=(\hat {b_1},…,\hat b_n)$</p>
<p>和 $\mathbb W$ 的两个有序基底: $C = (c_1,…,c_n),\hat C=(\hat {c_1},…,\hat c_n)$</p>
<p>$A_\Phi \in R^{m*n}$ 是线性映射 $\Phi: \mathbb V \rightarrow \mathbb W$关于基底$ B,C$的变换矩阵</p>
<p>$\hat A_\Phi \in R^{m*n}$ 是线性映射 $\Phi: \mathbb V \rightarrow \mathbb W$关于基底 $\hat B,\hat C$ 的变换矩阵</p>
<p> 我们接下来考察 $A<em>\Phi$ 和 $\hat A</em>\Phi$ 的关系是什么，也即当我们把基从 B，C变换到 $\hat B,\hat C$ 时，$A<em>\Phi$ 能否变换到 $\hat A</em>\Phi$，怎么变换到 $\hat A_\Phi$ ?</p>
<p>我们为什么要考察矩阵的变换呢？因为有时候变换后的矩阵能容易处理</p>
<h5 id="例9-1"><a href="#例9-1" class="headerlink" title="例9"></a>例9</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/63.png" style="zoom:80%;"></p>
<h5 id="定理3-2"><a href="#定理3-2" class="headerlink" title="定理3"></a>定理3</h5><p> 考虑 $\mathbb V$ 的两个有序基底: $B = (b_1,…,b_n),\hat B=(\hat {b_1},…,\hat b_n)$</p>
<p>和 $\mathbb W$ 的两个有序基底: $C = (c_1,…,c_n),\hat C=(\hat {c_1},…,\hat c_n)$</p>
<p>以及在基 B,C 下关于$\Phi$ 的变换矩阵 $A<em>\Phi$ ，则在基 $\hat B,\hat C$ 下的关于 $\Phi$ 的变换矩阵 $\hat {A</em>\Phi}$ 可以表示为 $\hat A<em>\Phi = T^{-1}A</em>\Phi S$ ，这里 $S\in\mathbb R^{n<em>n}$  是 $\mathbb V$ 中自同态映射的坐标变换矩阵，(从 $B$ 到 $\hat B$) ，$T\in\mathbb R^{m</em>m}$  是 $\mathbb W$ 中自同态映射的坐标变换矩阵(从 $C$ 到 $\hat C$)</p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/64.png" style="zoom:80%;"></p>
<h5 id="定义8-2"><a href="#定义8-2" class="headerlink" title="定义8"></a>定义8</h5><p>如果对于两个矩阵 $A,B\in \mathbb R^{m<em>n}$ ，存在可逆矩阵 $S\in \mathbb R^{n</em>n},T\in\mathbb R^{m*m}$ 使得 $A = T^{-1}BS$ 成立，则称 A，B等价</p>
<h5 id="定义9-2"><a href="#定义9-2" class="headerlink" title="定义9"></a>定义9</h5><p>如果对于两个矩阵 $A,B\in \mathbb R^{n<em>n}$ ，存在可逆矩阵 $S\in \mathbb R^{n</em>n} $  使得 $A = S^{-1}BS$ 成立，则称 A,B 相似</p>
<p>所以两个相似矩阵必定等价，反之则不然</p>
<h5 id="例10-1"><a href="#例10-1" class="headerlink" title="例10"></a>例10</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/65.png" style="zoom:80%;"></p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/66.png" style="zoom:80%;"></p>
<h4 id="复合线性映射的变换矩阵"><a href="#复合线性映射的变换矩阵" class="headerlink" title="复合线性映射的变换矩阵"></a>复合线性映射的变换矩阵</h4><p>考虑向量空间 $\mathbb {V,W,X}$ 我们知道线性映射的符合仍是线性映射</p>
<p>两个映射的复合对应的变换矩阵就是两个映射对应的变换矩阵的乘积</p>
<p>$\Phi: \mathbb V \rightarrow \mathbb W$ </p>
<p>$\Psi: \mathbb W \rightarrow \mathbb X$ </p>
<p>$\Psi\circ \Phi: \mathbb V \rightarrow \mathbb X$ </p>
<p>记 $A<em>\Phi,A</em>\Psi$ 是对应的变换矩阵，则 $A<em>{\Psi\circ\Phi} = A</em>\Phi A_\Psi$</p>
<h5 id="例11-1"><a href="#例11-1" class="headerlink" title="例11"></a>例11</h5><p>令</p>
<p>$\Phi :\mathbb R^n \rightarrow \mathbb R^n,\Phi(x) = 3x,\Psi:\mathbb R^n\rightarrow\mathbb R,\Psi = \sum_{i=1}^nx_i$ </p>
<p>则</p>
<p>$A_\Phi = 3I$</p>
<p>$A_\Psi = (1,1,…,1)$</p>
<p>而 $\Psi(x)\circ\Phi(x) = \sum_{i=1}^{n} 3x_i$</p>
<p>$A<em>{\Psi \circ\Phi} = (3,3,…,3)=(1,1,…,1)3I = A</em>\Phi A_\Psi$ </p>
<p>基变换可以用于后面的矩阵分解，也可以用于数据压缩问题</p>
<h4 id="核与像"><a href="#核与像" class="headerlink" title="核与像"></a>核与像</h4><p>线性映射的像与核两个重要的线性子空间。</p>
<h5 id="定义10-2"><a href="#定义10-2" class="headerlink" title="定义10"></a>定义10</h5><p>对于 $\Phi:\mathbb V\rightarrow \mathbb W$ 我们定义核空间(零空间)：</p>
<p>$ker(\Phi):=\Phi^{-1}(0w) = {v\in\mathbb V:\Phi(v) = 0w}$</p>
<p>像空间(值域)：</p>
<p>$Im(\Phi):=\Phi(\mathbb V) = {w\in\mathbb W|\exist v\in\mathbb V:\Phi(v) = w}$</p>
<p>那些映射结果为0的元素就组成了核空间</p>
<p>而所有可能被映射到的元素组成的空间就是像空间</p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/67.png" style="zoom:80%;"></p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/68.png" style="zoom:90%;"></p>
<h5 id="定义11-2"><a href="#定义11-2" class="headerlink" title="定义11"></a>定义11</h5><p>A的列向量张成空间叫做列空间</p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/69.png" style="zoom:90%;"></p>
<h5 id="例12-1"><a href="#例12-1" class="headerlink" title="例12"></a>例12</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/70.png" style="zoom:90%;"></p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/72.png" style="zoom:90%;"></p>
<h3 id="4-3线性变换"><a href="#4-3线性变换" class="headerlink" title="4.3线性变换"></a>4.3线性变换</h3><h3 id="4-4仿射映射"><a href="#4-4仿射映射" class="headerlink" title="4.4仿射映射"></a>4.4仿射映射</h3><h2 id="第五讲-行列式"><a href="#第五讲-行列式" class="headerlink" title="第五讲:行列式"></a>第五讲:行列式</h2><h3 id="5-1行列式"><a href="#5-1行列式" class="headerlink" title="5.1行列式"></a>5.1行列式</h3><h3 id="5-2迹和二次型"><a href="#5-2迹和二次型" class="headerlink" title="5.2迹和二次型"></a>5.2迹和二次型</h3><h3 id="5-3特征值和特征向量"><a href="#5-3特征值和特征向量" class="headerlink" title="5.3特征值和特征向量"></a>5.3特征值和特征向量</h3>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/07/01/Java%E5%9F%BA%E7%A1%801/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/07/01/Java%E5%9F%BA%E7%A1%801/" class="post-title-link" itemprop="url">Java基础1</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-07-01 14:06:30" itemprop="dateCreated datePublished" datetime="2020-07-01T14:06:30+08:00">2020-07-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-08-25 04:30:22" itemprop="dateModified" datetime="2022-08-25T04:30:22+08:00">2022-08-25</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Java基础1"><a href="#Java基础1" class="headerlink" title="Java基础1"></a>Java基础1</h1><h2 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h2><h3 id="Anatomy-of-a-Java-Program"><a href="#Anatomy-of-a-Java-Program" class="headerlink" title="Anatomy of a Java Program"></a>Anatomy of a Java Program</h3><p>Java的 函数 我们常常把第一个花括号与函数声明放在一行。但是C,C#常常是另起一行</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sendEmail</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>每一个Java程序都必须有一个main函数，也就是主函数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Java中，这些函数不会单独存在，他们都在类里面。当函数放在类中时，我们称其为类的方法。在Java中，类和方法都应该具有访问修饰符(access modifier)，访问修饰符是private，public之类的.</p>
<p>在Java中，我们用不同的方法来命名我们的类和我们的方法。</p>
<p>PascalNamingConvention : 用于类命名。特征就是每个单词首字母大写 </p>
<p>camelNamingComvention: 用于方法命名，也就是驼峰命名法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Your-First-Java-Program"><a href="#Your-First-Java-Program" class="headerlink" title="Your First Java Program"></a>Your First Java Program</h3><p><img src="/2020/07/01/Java%E5%9F%BA%E7%A1%801/1.png" style="zoom:67%;"></p>
<p><img src="/2020/07/01/Java%E5%9F%BA%E7%A1%801/2.png" style="zoom:167%;"></p>
<p><img src="/2020/07/01/Java%E5%9F%BA%E7%A1%801/3.png" style="zoom:167%;"></p>
<p>package com.company 代表着这个类所属的包</p>
<p>这个包下面有Main类，类中有一个静态的main方法</p>
<p>我们现在输出Hello World</p>
<p>在这里使用系统类 System ； System.out 是一个PrintStream 类型，也就是输出字符串的。然后在System.out中我们运用 printIn方法，他是printLine的缩写。点击运行，我们即可看到终端打印Hello World了 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">   <span class="comment">// write your code here</span></span><br><span class="line">        System.out.println(<span class="string">"Hello World"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="How-Java-Code-Gets-Executed"><a href="#How-Java-Code-Gets-Executed" class="headerlink" title="How Java Code Gets Executed"></a>How Java Code Gets Executed</h3><p>当我们跑Java程序的时候，是怎么运作的。</p>
<p>在编译步骤中，Intellij 使用Java编译器把代码编译成Java bytecode的形式。编译完成后，Java bytecode可以在Windows ，Mac，Linux或任何有JRE（Java runtime environment）的操作系统上运行。 JRE中各个操作系统都有一个软件叫做JVM(Java Virtual Machine) .JVM 会把Java byte code 转换成 Windows可以理解并架构的Native Code。这就是所谓的 一次编译，到处运行</p>
<p><img src="/2020/07/01/Java%E5%9F%BA%E7%A1%801/4.png" style="zoom: 80%;"></p>
<p>java有4个版本：Java SE，Java EE，Java ME ,Java Card</p>
<p>Java SE 是Java Standard Edition的缩写，这是Java的核心平台，包含了Java的每一个库</p>
<p>Java EE 是Java Enterprise Edition的缩写，用于构建超大型、分布式系统。它建立在SE之上</p>
<p>Java ME是Java Micro Edition的缩写，这是专门为移动设备设计的Java标准版的子集</p>
<p>Java Card是在智能卡中使用的</p>
<h2 id="Types"><a href="#Types" class="headerlink" title="Types"></a>Types</h2><h3 id="Primitive-Types"><a href="#Primitive-Types" class="headerlink" title="Primitive Types"></a>Primitive Types</h3><p>Primitive Types是存储simple value的，也就是下面的八种基本类型</p>
<p>Java语言提供了八种基本类型。六种数字类型（四个整数型，两个浮点型），一种字符类型，还有一种布尔型。</p>
<p>byte：</p>
<ul>
<li>byte数据类型是8位、有符号的，以二进制补码表示的整数；</li>
<li>最小值是-128$(-2^7)$；</li>
<li>最大值是127$(2^7-1)$；</li>
<li>默认值是0；</li>
<li>byte类型用在大型数组中节约空间，主要代替整数，因为byte变量占用的空间只有int类型的四分之一；</li>
<li>例子：byte a = 100，byte b = -50。</li>
</ul>
<p>short：</p>
<ul>
<li>short数据类型是16位、有符号的以二进制补码表示的整数</li>
<li>最小值是-32768$(-2^{15})$；</li>
<li>最大值是32767 $(2^{15} - 1)$；</li>
<li>Short数据类型也可以像byte那样节省空间。一个short变量是int型变量所占空间的二分之一；</li>
<li>默认值是0；</li>
<li>例子：short s = 1000，short r = -20000。</li>
</ul>
<p>int：</p>
<ul>
<li>int数据类型是32位、有符号的以二进制补码表示的整数；</li>
<li>最小值是-2,147,483,648 $(-2^{31})$；</li>
<li>最大值是2,147,483,647 $(2^{31} - 1)$；</li>
<li>一般地整型变量默认为int类型；</li>
<li>默认值是0；</li>
<li>例子：int a = 100000, int b = -200000。</li>
</ul>
<p>long：</p>
<ul>
<li>long数据类型是64位、有符号的以二进制补码表示的整数；</li>
<li>最小值是-9,223,372,036,854,775,808 $(-2^{63})$；</li>
<li>最大值是9,223,372,036,854,775,807 $(2^{63} -1)$；</li>
<li>这种类型主要使用在需要比较大整数的系统上；</li>
<li>默认值是0L；</li>
<li>例子： </li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">long</span> viewsCount = <span class="number">3_123_456_789L</span>;</span><br></pre></td></tr></table></figure>
<p>float：</p>
<ul>
<li>float数据类型是单精度、32位、符合IEEE 754标准的浮点数；</li>
<li>float在储存大型浮点数组的时候可节省内存空间；</li>
<li>默认值是0.0f；</li>
<li>浮点数不能用来表示精确的值，如货币；</li>
<li>例子：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">float</span> f1 = <span class="number">234.5F</span>;</span><br></pre></td></tr></table></figure>
<p>double：</p>
<ul>
<li>double数据类型是双精度、64位、符合IEEE 754标准的浮点数；</li>
<li>浮点数的默认类型为double类型；</li>
<li>double类型同样不能表示精确的值，如货币；</li>
<li>默认值是0.0d；</li>
<li>例子：double d1 = 123.4。</li>
</ul>
<p>boolean：</p>
<ul>
<li>boolean数据类型表示一位的信息；</li>
<li>只有两个取值：true和false；</li>
<li>这种类型只作为一种标志来记录true/false情况；</li>
<li>默认值是false；</li>
<li>例子：boolean one = true。</li>
</ul>
<p>char：</p>
<ul>
<li>char类型是一个单一的16位Unicode字符；</li>
<li>最小值是’\u0000’（即为0）；</li>
<li>最大值是’\uffff’（即为65,535）；</li>
<li>char数据类型可以储存任何字符；</li>
<li>例子：char letter = ‘A’。</li>
</ul>
<h3 id="Reference-Types"><a href="#Reference-Types" class="headerlink" title="Reference Types"></a>Reference Types</h3><p>Reference Types是存储复杂的对象的 ,比如说Date类 ，mail message 类 </p>
<p>在使用Reference Types 时，我们必须手动分配内存</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Date now = <span class="keyword">new</span> Date();</span><br><span class="line">        System.out.println(now);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Wed Jul 01 16:33:52 GMT+08:00 2020</span></span><br></pre></td></tr></table></figure>
<h3 id="Primitive-vs-Reference-Types"><a href="#Primitive-vs-Reference-Types" class="headerlink" title="Primitive vs Reference Types"></a>Primitive vs Reference Types</h3><p>Primitive Types 中，我们声明两个变量，让他们相等，那么只是数值上相等，它们的存储地址是不一样的</p>
<p>但是Reference Types ，里面存储的时地址，所以让 point2 = point1之后，point1，point2中存储的有相同的地址。当对point1中修改时，point2也会相应修改。</p>
<p><img src="/2020/07/01/Java%E5%9F%BA%E7%A1%801/5.png" style="zoom: 40%;"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"><span class="keyword">import</span> java.awt.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Point point1 = <span class="keyword">new</span> Point(<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">        Point point2 = point1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Strings"><a href="#Strings" class="headerlink" title="Strings"></a>Strings</h3><p>在java当中，我们String是一个 <code>Reference Type</code>，但是我们使用 String 不需要引入Java的库，也不需要用new来声明（用new也可以，只是简便声明不需要使用new Sring) </p>
<p>我们也可以通过加号直接连接两个字符串。</p>
<p>因为字符串是 <code>Reference Type</code>，所以我们可以通过 . 来使用String类中的方法</p>
<p>区分<code>arguments</code>和 <code>parameter</code> ： <code>parameter</code>可以理解为占位符，只是申请了一段空间的容器。但是<code>arguments</code>是我们传入的值</p>
<p><code>endsWith()</code>用来判断字符串是否以某一字符串结束的</p>
<p><code>startsWith()</code>用来判断字符串是否以某一字符串开始的</p>
<p><code>length()</code>计算字符串的长度</p>
<p><code>indexOf()</code>计算目标字符串第一个字符在查询字符串中的索引，如果不是该查询字符串的子串，那么返回-1</p>
<p><code>replace()</code>是替换，前一个参数是被替换的字符串；后一个参数是需要替换进去的字符串</p>
<p><code>toLowerCase()</code>和<code>toUpperCase()</code>是让字符串全部变小写或者大写</p>
<p><code>trim()</code>是让字符串去掉头尾的空格，这在用户输入一些</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String message = <span class="string">"  Hello World"</span> + <span class="string">"!!"</span>;</span><br><span class="line">        System.out.println(message.endsWith(<span class="string">"!!"</span>));</span><br><span class="line">        System.out.println(message.startsWith(<span class="string">"!!"</span>));</span><br><span class="line">        System.out.println(message.length());</span><br><span class="line">        System.out.println(message.indexOf(<span class="string">"lw"</span>));</span><br><span class="line">        System.out.println(message.replace(<span class="string">"!"</span>,<span class="string">"*"</span>));</span><br><span class="line">        System.out.println(message.toLowerCase());</span><br><span class="line">        System.out.println(message.toUpperCase());</span><br><span class="line">        System.out.println(message.trim());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">true</span></span><br><span class="line"><span class="comment">false</span></span><br><span class="line"><span class="comment">15</span></span><br><span class="line"><span class="comment">-1</span></span><br><span class="line"><span class="comment">  Hello World**</span></span><br><span class="line"><span class="comment">  hello world!!</span></span><br><span class="line"><span class="comment">  HELLO WORLD!!</span></span><br><span class="line"><span class="comment">Hello World!!</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h3 id="Escape-Sequences-转义序列"><a href="#Escape-Sequences-转义序列" class="headerlink" title="Escape Sequences 转义序列"></a>Escape Sequences 转义序列</h3><p>双引号的转义 就是 <code>\&quot;</code></p>
<p>反斜杠的转义就是 <code>\\</code></p>
<p>换行的转义就是 <code>\n</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Hello World \"Jason\" "</span>);</span><br><span class="line">        System.out.println(<span class="string">"c\\windows\\..."</span>);</span><br><span class="line">        System.out.println(<span class="string">"c:\nWindows\\..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Hello World "Jason" </span></span><br><span class="line"><span class="comment">c\windows\...</span></span><br><span class="line"><span class="comment">c:</span></span><br><span class="line"><span class="comment">Windows\...</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h3 id="Arrays"><a href="#Arrays" class="headerlink" title="Arrays"></a>Arrays</h3><p>用繁琐且老旧的语法来声明一个数组的语法是这样的：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] numbers = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">5</span>];</span><br><span class="line">        numbers[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        numbers[<span class="number">1</span>] = <span class="number">2</span>;</span><br><span class="line">        System.out.println(Arrays.toString(numbers));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当我们提前知道了数组中的元素的时候，我们可以更简单的声明一个数组</p>
<p>用花括号声明即可</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] numbers =  &#123;<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">1</span>&#125;;</span><br><span class="line">        System.out.println(numbers.length);</span><br><span class="line">        System.out.println(Arrays.toString(numbers));</span><br><span class="line">        Arrays.sort(numbers);</span><br><span class="line">        System.out.println(Arrays.toString(numbers));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">5</span></span><br><span class="line"><span class="comment">[2, 3, 4, 5, 1]</span></span><br><span class="line"><span class="comment">[1, 2, 3, 4, 5]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>我们不能直接 <code>System.out.printIn(number)</code> 因为这样java引擎会根据每个数字存储的地址计算得出一个我们看不懂的字符串。所以需要<code>System.out.println(Arrays.toString(numbers));</code></p>
<h3 id="Multi-dimensional-Arrays"><a href="#Multi-dimensional-Arrays" class="headerlink" title="Multi-dimensional Arrays"></a>Multi-dimensional Arrays</h3><p>我们可以定义多维数组，但是多维数组需要<code>deepToString()</code>而不是 <code>toString()</code>才能正常打印</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> [][][] numbers = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>][<span class="number">3</span>][<span class="number">5</span>];</span><br><span class="line">    numbers [<span class="number">0</span>][<span class="number">0</span>][<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    System.out.println(Arrays.deepToString(numbers));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> [][] numbers = &#123;&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;,&#123;<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;&#125;;</span><br><span class="line">    System.out.println(Arrays.deepToString(numbers));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Constants-常量-final关键词"><a href="#Constants-常量-final关键词" class="headerlink" title="Constants 常量(final关键词)"></a>Constants 常量(final关键词)</h3><p> 我们想定义 pi为常量，所以我们希望它一经申明就不能再改变，我们需要用<code>final</code>来声明一个<strong>常量</strong>。常量的所有字母需要大写。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">float</span> PI = <span class="number">3.14F</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>此外，final还可以用来修室类和方法。<a href="https://www.cnblogs.com/xiaoxi/p/6392154.html" target="_blank" rel="noopener">浅谈Java中的final关键字 - 平凡希 - 博客园 (cnblogs.com)</a></p>
<p>当用final修饰一个类时，表明这个类不能被继承。也就是说，如果一个类你永远不会让他被继承，就可以用final进行修饰。final类中的成员变量可以根据需要设为final，但是要注意final类中的所有成员方法都会被隐式地指定为final方法。<strong>在使用final修饰类的时候，要注意谨慎选择，除非这个类真的在以后不会用来继承或者出于安全的考虑，尽量不要将类设计为final类。</strong></p>
<p><strong>如果只有在想明确禁止 该方法在子类中被覆盖的情况下才将方法设置为final的。即父类的final方法是不能被子类所覆盖的，也就是说子类是不能够存在和父类一模一样的方法的。</strong></p>
<h3 id="Arithmetic-Expressions"><a href="#Arithmetic-Expressions" class="headerlink" title="Arithmetic Expressions"></a>Arithmetic Expressions</h3><p>和C++一样，不讲了</p>
<h3 id="Order-of-Operations"><a href="#Order-of-Operations" class="headerlink" title="Order of Operations"></a>Order of Operations</h3><p>和C++一样，不讲了</p>
<h3 id="Casting"><a href="#Casting" class="headerlink" title="Casting"></a>Casting</h3><p>java中的类型转换</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">short</span> x = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> y = x+<span class="number">2</span>;</span><br><span class="line">System.out.println(y);</span><br></pre></td></tr></table></figure>
<p>我们这样会做一个隐式类型转换。short是短整型，int是整型。int中可以存储所有short变量当中的值</p>
<p>在java中，是这样操作隐式类型转换的 ：在 int y = x+2 这句话中，java看见x，会在内存中某个地方申明一个匿名变量，那个匿名变量是整数，然后java将x的值复制到那个匿名变量中。再执行加法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> x = <span class="number">1.1</span>;</span><br><span class="line"><span class="keyword">double</span> y = x+<span class="number">2</span>;</span><br><span class="line">System.out.println(y);</span><br></pre></td></tr></table></figure>
<p>在整型、浮点数之间转换，java也会按照这个规则。 首先会把2 转换为2.0 ,其次执行加法</p>
<p><code>byte&gt;short&gt;int&gt;long&gt;float&gt;double</code>  java中的数据类型可以根据这个链转换。如果不丢失数据的话，都会发生隐式转换。</p>
<p>我们也可以进行强制类型转换，这时候会丢失一些数据</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> x = <span class="number">1.1</span>;</span><br><span class="line"><span class="keyword">int</span> y = (<span class="keyword">int</span>)x +<span class="number">1</span>;</span><br><span class="line">System.out.println(y);</span><br><span class="line"><span class="comment">//结果为2</span></span><br></pre></td></tr></table></figure>
<p>现在，我们想把<strong>string 转为数字</strong>，无论用隐式转换还是显示转换都无法达成。需要引用一个类</p>
<p>用 <code>Short.parseShort()</code>，<code>Integer.parseInt()</code>，<code>Double.parseDouble()</code> 等来把字符串转换成整数、浮点数</p>
<p>注意： 如果 <code>String x = &quot;1.1&quot;</code>  那么转换成 整数的时候，就会发生报错</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String x = <span class="string">"1"</span>;</span><br><span class="line"><span class="keyword">int</span> y = Short.parseShort(x)+<span class="number">2</span> ;</span><br><span class="line">System.out.println(y);</span><br></pre></td></tr></table></figure>
<h3 id="The-Math-Class"><a href="#The-Math-Class" class="headerlink" title="The Math Class"></a>The Math Class</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> result = Math.round(<span class="number">1.1F</span>);</span><br><span class="line"><span class="keyword">int</span> result2 = (<span class="keyword">int</span>) Math.ceil(<span class="number">1.1F</span>);</span><br><span class="line"><span class="keyword">int</span> result3 = (<span class="keyword">int</span>) Math.max(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">int</span> result4 = (<span class="keyword">int</span>) Math.min(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">int</span> result5 = (<span class="keyword">int</span>) Math.random();</span><br></pre></td></tr></table></figure>
<p>注意，我们<strong>不能</strong> 这样来得到一个0-100的随机整数：<code>int result = (int) Math.random()*100;</code> 因为<code>Math.random()</code>产生一个0-1的小数，int转换之后变成0了，0*100 还是等于0，所以我们<strong>必须要把整个表达式包裹:</strong> <code>int result = (int) (Math.random()*100);</code></p>
<h3 id="Formatting-Numbers"><a href="#Formatting-Numbers" class="headerlink" title="Formatting Numbers"></a>Formatting Numbers</h3><p>注意：<code>NumberFormat</code>是一个<strong>抽象类，无法实例化</strong>，我们不能直接 <code>NumberFormat currency = new NumberFormat()</code></p>
<p>我们需要用到<code>NumberFormat</code>这个类。其中<code>getCurrencyInstance</code>是把数字转换成钱币的格式，<code>getPercentInstance</code>则是把数字转换成百分比的形式。</p>
<p>我们可以简单的使用<code>NumberFormat.getCurrencyInstance().format()</code> 来格式化字符串</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"><span class="keyword">import</span> java.text.NumberFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        NumberFormat currency = NumberFormat.getCurrencyInstance();</span><br><span class="line">        String result = currency.format(<span class="number">1234567.891</span>);</span><br><span class="line">        System.out.println(result);</span><br><span class="line">        NumberFormat percent = NumberFormat.getPercentInstance();</span><br><span class="line">        String result2 = percent.format(<span class="number">0.2</span>);</span><br><span class="line">        System.out.println(result2);</span><br><span class="line">        String result3 = NumberFormat.getCurrencyInstance().format(<span class="number">1213.39</span>);</span><br><span class="line">        System.out.println(result3);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/01/Java%E5%9F%BA%E7%A1%801/8.png" style="zoom: 140%;"></p>
<h3 id="Reading-Input"><a href="#Reading-Input" class="headerlink" title="Reading Input"></a>Reading Input</h3><p>要读取字符串或者数字，我们需要用到scanner</p>
<p>首先新建一个 Scanner对象，我们要确定信息是从终端获取的还是从文件当中获取的。我们这里是从终端获取的，所以选择 <code>System.in</code></p>
<p>然后用<code>scanner.nextByte()</code>读取一个byte 或者 <code>scanner.nextline()</code>是读取一行信息,以此类推，有<br><code>nextBoolean()</code> ,<code>nextDouble()</code> ,<code>nextFloat()</code>等等</p>
<p>因为<code>System.out.println();</code>是<strong>打印一行信息</strong>， 我们希望 是 Age: 后输入年龄，不用换行。所以使用 <code>System.out.print()</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        System.out.print(<span class="string">"Age: "</span>);</span><br><span class="line">        <span class="keyword">byte</span> age = scanner.nextByte();</span><br><span class="line">        System.out.println(<span class="string">"Your age is "</span>+age);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Project-Mortgage-Calculator-按揭"><a href="#Project-Mortgage-Calculator-按揭" class="headerlink" title="Project- Mortgage Calculator  按揭"></a>Project- Mortgage Calculator  按揭</h3><p><strong>等额本息</strong>公式： $P = L[c(1+c)^n]/[(1+c)^n-1] $ </p>
<p>每月还款金额 = [贷款本金×月利率×(1+月利率)\^还款月数]÷[(1+月利率)\^还款月数－1]</p>
<p>其中 L 代表 principal，即本金</p>
<p>c 代表 monthly Interest ，月利率</p>
<p>n 代表 月数</p>
<p>相对于<strong>等额本金还款法 </strong>的劣势在于支出利息较多，还款初期利息占每月供款的大部分，随本金逐渐返还供款中本金比重增加。但该方法每月的还款额固定，可以有计划地控制家庭收入的支出，也便于每个家庭根据自己的收入情况，确定还贷能力。</p>
<p>最终计算得到的 Mortage就是每月需要支付的按揭金额</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.text.NumberFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">byte</span> MONTHS_IN_YEAR = <span class="number">12</span>;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">byte</span> PERCENT = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line"></span><br><span class="line">        System.out.print(<span class="string">"Principal: "</span>);</span><br><span class="line">        <span class="keyword">int</span> principal = scanner.nextInt();</span><br><span class="line"></span><br><span class="line">        System.out.print(<span class="string">"Annual Interest Rate: "</span>);</span><br><span class="line">        <span class="keyword">float</span> annualInterest = scanner.nextFloat();</span><br><span class="line">        <span class="keyword">float</span> monthlyInterest = annualInterest / PERCENT / MONTHS_IN_YEAR;</span><br><span class="line"></span><br><span class="line">        System.out.print(<span class="string">"Period (Years): "</span>);</span><br><span class="line">        <span class="keyword">byte</span> years = scanner.nextByte();</span><br><span class="line">        <span class="keyword">int</span> numberOfPayments = years * MONTHS_IN_YEAR;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">double</span> mortgage = principal</span><br><span class="line">       	* (monthlyInterest * Math.pow(<span class="number">1</span> + monthlyInterest, numberOfPayments))</span><br><span class="line">        / (Math.pow(<span class="number">1</span> + monthlyInterest, numberOfPayments) - <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        String mortgageFormatted = </span><br><span class="line">            NumberFormat.getCurrencyInstance().format(mortgage);</span><br><span class="line">        System.out.println(<span class="string">"Mortgage: "</span> + mortgageFormatted);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/01/Java%E5%9F%BA%E7%A1%801/9.png" style="zoom: 140%;"></p>
<h2 id="Control-Flow"><a href="#Control-Flow" class="headerlink" title="Control Flow"></a>Control Flow</h2><h3 id="Comparison-Operators"><a href="#Comparison-Operators" class="headerlink" title="Comparison Operators"></a>Comparison Operators</h3><p>和C++一样</p>
<h3 id="Logical-Operators"><a href="#Logical-Operators" class="headerlink" title="Logical Operators"></a>Logical Operators</h3><p>在C中布尔变量用bool声明，但是在java中用 boolean声明，其他一样</p>
<p>||, &amp;&amp;,! 和C++一样</p>
<h3 id="If-Statements"><a href="#If-Statements" class="headerlink" title="If Statements"></a>If Statements</h3><p>和C++一样</p>
<h3 id="The-Ternary-Operator"><a href="#The-Ternary-Operator" class="headerlink" title="The Ternary Operator"></a>The Ternary Operator</h3><p>也就是 ?: 运算符，和C++一样</p>
<h3 id="Switch-Statements"><a href="#Switch-Statements" class="headerlink" title="Switch Statements"></a>Switch Statements</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String role = <span class="string">"admin"</span>;</span><br><span class="line">        <span class="keyword">switch</span> (role)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"admin"</span>:</span><br><span class="line">                System.out.println(<span class="string">"You're an admin"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"moderator"</span>:</span><br><span class="line">                System.out.println(<span class="string">"You're a moderator"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                System.out.println(<span class="string">"You're a guest"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Exercise-FizzBuzz"><a href="#Exercise-FizzBuzz" class="headerlink" title="Exercise- FizzBuzz"></a>Exercise- FizzBuzz</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        System.out.print(<span class="string">"Number : "</span>);</span><br><span class="line">        <span class="keyword">int</span> x = scanner.nextInt();</span><br><span class="line">        <span class="keyword">if</span>(x%<span class="number">15</span>==<span class="number">0</span>)</span><br><span class="line">            System.out.println(<span class="string">"FizzBuzz"</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(x%<span class="number">3</span>==<span class="number">0</span>)</span><br><span class="line">            System.out.println(<span class="string">"Buzz"</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(x%<span class="number">5</span>==<span class="number">0</span>)</span><br><span class="line">            System.out.println(<span class="string">"Fizz"</span>);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            System.out.println(x);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="For-Loops"><a href="#For-Loops" class="headerlink" title="For Loops"></a>For Loops</h3><p>和C++一样</p>
<h3 id="While-Loops"><a href="#While-Loops" class="headerlink" title="While Loops"></a>While Loops</h3><p>和C++一样</p>
<h3 id="Do-While-Loops"><a href="#Do-While-Loops" class="headerlink" title="Do..While Loops"></a>Do..While Loops</h3><p>和C++一样</p>
<h3 id="Break-and-Continue-Statements"><a href="#Break-and-Continue-Statements" class="headerlink" title="Break and Continue Statements"></a>Break and Continue Statements</h3><p>和C++一样</p>
<h3 id="For-Each-Loop"><a href="#For-Each-Loop" class="headerlink" title="For-Each Loop"></a>For-Each Loop</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String[] fruits = &#123;<span class="string">"Apple"</span>,<span class="string">"Mango"</span>,<span class="string">"Orange"</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span>(String i:fruits)</span><br><span class="line">            System.out.println(i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>还是和C++一样</p>
<h3 id="Project-Mortgage-Calculator"><a href="#Project-Mortgage-Calculator" class="headerlink" title="Project- Mortgage Calculator"></a>Project- Mortgage Calculator</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.text.NumberFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">byte</span> MONTHS_IN_YEAR = <span class="number">12</span>;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">byte</span> PERCENT = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> principal = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">float</span> monthlyInterest = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> numberOfPayments = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            System.out.print(<span class="string">"Principal: "</span>);</span><br><span class="line">            principal = scanner.nextInt();</span><br><span class="line">            <span class="keyword">if</span> (principal &gt;= <span class="number">1000</span> &amp;&amp; principal &lt;= <span class="number">1_000_000</span>)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            System.out.println(<span class="string">"Enter a value between 1000 and 1000000"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            System.out.print(<span class="string">"Annual Interest Rate: "</span>);</span><br><span class="line">            <span class="keyword">float</span> annualInterest = scanner.nextFloat();</span><br><span class="line">            <span class="keyword">if</span> (annualInterest &gt;= <span class="number">1</span> &amp;&amp; annualInterest &lt;= <span class="number">30</span>) &#123;</span><br><span class="line">                monthlyInterest = annualInterest / PERCENT / MONTHS_IN_YEAR;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">"Enter a value between 1 and 30"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            System.out.print(<span class="string">"Period (Years): "</span>);</span><br><span class="line">            <span class="keyword">byte</span> years = scanner.nextByte();</span><br><span class="line">            <span class="keyword">if</span> (years &gt;= <span class="number">1</span> &amp;&amp; years &lt;= <span class="number">30</span>) &#123;</span><br><span class="line">                numberOfPayments = years * MONTHS_IN_YEAR;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">"Enter a value between 1 and 30."</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">double</span> mortgage = principal</span><br><span class="line">                * (monthlyInterest * Math.pow(<span class="number">1</span> + monthlyInterest, numberOfPayments))</span><br><span class="line">                / (Math.pow(<span class="number">1</span> + monthlyInterest, numberOfPayments) - <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        String mortgageFormatted = </span><br><span class="line">            NumberFormat.getCurrencyInstance().format(mortgage);</span><br><span class="line">        System.out.println(<span class="string">"Mortgage: "</span> + mortgageFormatted);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Clean-Coding"><a href="#Clean-Coding" class="headerlink" title="Clean Coding"></a>Clean Coding</h2><p>对上面的代码进行优化、重构</p>
<h3 id="Creating-Methods-新建方法"><a href="#Creating-Methods-新建方法" class="headerlink" title="Creating Methods 新建方法"></a>Creating Methods 新建方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        greetUser(<span class="string">"Jason"</span>,<span class="string">"Ball"</span>);</span><br><span class="line">        greetUser2(<span class="string">"John"</span>,<span class="string">"Snow"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">greetUser</span><span class="params">(String firstName,String lastName)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Hello "</span>+firstName+<span class="string">" "</span>+lastName);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">greetUser2</span><span class="params">(String firstName,String lastName)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span>  <span class="string">"Hello "</span>+firstName+<span class="string">" "</span>+lastName;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/01/Java%E5%9F%BA%E7%A1%801/7.png" style="zoom: 140%;"></p>
<h3 id="Extracting-Methods"><a href="#Extracting-Methods" class="headerlink" title="Extracting Methods"></a>Extracting Methods</h3><p>就像上面写的简单的方法一样，现在我们把计算Mortage写成一个方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.text.NumberFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> principal = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">float</span> annualInterest = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">byte</span> years = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            System.out.print(<span class="string">"Principal: "</span>);</span><br><span class="line">            principal = scanner.nextInt();</span><br><span class="line">            <span class="keyword">if</span> (principal &gt;= <span class="number">1000</span> &amp;&amp; principal &lt;= <span class="number">1_000_000</span>)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            System.out.println(<span class="string">"Enter a value between 1000 and 1000000"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            System.out.print(<span class="string">"Annual Interest Rate: "</span>);</span><br><span class="line">            annualInterest = scanner.nextFloat();</span><br><span class="line">            <span class="keyword">if</span> (annualInterest &gt;= <span class="number">1</span> &amp;&amp; annualInterest &lt;= <span class="number">30</span>)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            System.out.println(<span class="string">"Enter a value between 1 and 30"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            System.out.print(<span class="string">"Period (Years): "</span>);</span><br><span class="line">            years = scanner.nextByte();</span><br><span class="line">            <span class="keyword">if</span> (years &gt;= <span class="number">1</span> &amp;&amp; years &lt;= <span class="number">30</span>)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            System.out.println(<span class="string">"Enter a value between 1 and 30."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">double</span> mortgage = calculateMortage(principal,annualInterest,years);</span><br><span class="line">        String mortgageFormatted =</span><br><span class="line">                NumberFormat.getCurrencyInstance().format(mortgage);</span><br><span class="line">        System.out.println(<span class="string">"Mortgage: "</span> + mortgageFormatted);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">calculateMortage</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">int</span> principal,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">float</span> annualInterest,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">byte</span> years)</span></span>&#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">byte</span> MONTHS_IN_YEAR = <span class="number">12</span>;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">byte</span> PERCENT = <span class="number">100</span>;</span><br><span class="line">        <span class="keyword">short</span> numberOfPayments = (<span class="keyword">short</span>)(years * MONTHS_IN_YEAR);</span><br><span class="line">        <span class="keyword">float</span> monthlyInterest = annualInterest / PERCENT / MONTHS_IN_YEAR;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> principal</span><br><span class="line">                * (monthlyInterest * Math.pow(<span class="number">1</span> + monthlyInterest, numberOfPayments))</span><br><span class="line">                / (Math.pow(<span class="number">1</span> + monthlyInterest, numberOfPayments) - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Refactoring-Repetitive-Patterns"><a href="#Refactoring-Repetitive-Patterns" class="headerlink" title="Refactoring Repetitive Patterns"></a>Refactoring Repetitive Patterns</h3><p>然后，我们继续把输入数字的语句抽象出来成为一个函数，readByte,readInt,readFloat</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.text.NumberFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">int</span> principal = (<span class="keyword">int</span>) readNumber(<span class="string">"Principal: "</span>,<span class="number">1000</span>,<span class="number">1000000</span>);</span><br><span class="line">        <span class="keyword">float</span> annualInterest = (<span class="keyword">float</span>)readNumber(<span class="string">"Annual Interest Rate: "</span>,<span class="number">1</span>,<span class="number">30</span>);</span><br><span class="line">        <span class="keyword">byte</span> years = (<span class="keyword">byte</span>)readNumber(<span class="string">"Period (Years): "</span>,<span class="number">1</span>,<span class="number">30</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">double</span> mortgage = calculateMortage(principal,annualInterest,years);</span><br><span class="line">        String mortgageFormatted =</span><br><span class="line">                NumberFormat.getCurrencyInstance().format(mortgage);</span><br><span class="line">        System.out.println(<span class="string">"Mortgage: "</span> + mortgageFormatted);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">readNumber</span><span class="params">(String prompt,<span class="keyword">double</span> min,<span class="keyword">double</span> max)</span></span>&#123;</span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">double</span> value;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            System.out.print(prompt);</span><br><span class="line">            value = scanner.nextInt();</span><br><span class="line">            <span class="keyword">if</span> (value &gt;= min &amp;&amp; value &lt;= max)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            System.out.println(<span class="string">"Enter a value between "</span>+min+<span class="string">" and "</span>+max);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">calculateMortage</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">int</span> principal,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">float</span> annualInterest,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">byte</span> years)</span></span>&#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">byte</span> MONTHS_IN_YEAR = <span class="number">12</span>;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">byte</span> PERCENT = <span class="number">100</span>;</span><br><span class="line">        <span class="keyword">short</span> numberOfPayments = (<span class="keyword">short</span>)(years * MONTHS_IN_YEAR);</span><br><span class="line">        <span class="keyword">float</span> monthlyInterest = annualInterest / PERCENT / MONTHS_IN_YEAR;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> principal</span><br><span class="line">                * (monthlyInterest * Math.pow(<span class="number">1</span> + monthlyInterest, numberOfPayments))</span><br><span class="line">                / (Math.pow(<span class="number">1</span> + monthlyInterest, numberOfPayments) - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Project-Payment-Schedule"><a href="#Project-Payment-Schedule" class="headerlink" title="Project- Payment Schedule"></a>Project- Payment Schedule</h3><p>计算每期付款后剩下需要还款余额</p>
<p>公式：$B =L[(1+c)^n-(1+c)^p]/[(1+c)^n-1]$ </p>
<p>B 代表 Balance,即需要还款的余额</p>
<p> p代表当前还款进行到第几个月</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.text.NumberFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">byte</span> MONTHS_IN_YEAR = <span class="number">12</span>;</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">byte</span> PERCENT = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">int</span> principal = (<span class="keyword">int</span>) readNumber(<span class="string">"Principal: "</span>,<span class="number">1000</span>,<span class="number">1000000</span>);</span><br><span class="line">        <span class="keyword">float</span> annualInterest = (<span class="keyword">float</span>)readNumber(<span class="string">"Annual Interest Rate: "</span>,<span class="number">1</span>,<span class="number">30</span>);</span><br><span class="line">        <span class="keyword">byte</span> years = (<span class="keyword">byte</span>)readNumber(<span class="string">"Period (Years): "</span>,<span class="number">1</span>,<span class="number">30</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">double</span> mortgage = calculateMortage(principal,annualInterest,years);</span><br><span class="line">        String mortgageFormatted =</span><br><span class="line">                NumberFormat.getCurrencyInstance().format(mortgage);</span><br><span class="line">        System.out.println();</span><br><span class="line">        System.out.println(<span class="string">"MORTAGE"</span>);</span><br><span class="line">        System.out.println(<span class="string">"------"</span>);</span><br><span class="line">        System.out.println(<span class="string">"Mortgage: "</span> + mortgageFormatted);</span><br><span class="line"></span><br><span class="line">        System.out.println();</span><br><span class="line">        System.out.println(<span class="string">"PAYMENT SCHEDULE"</span>);</span><br><span class="line">        System.out.println(<span class="string">"------"</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">short</span> month = <span class="number">1</span>;month&lt;= years*MONTHS_IN_YEAR;month++)&#123;</span><br><span class="line">            <span class="keyword">double</span> balance = calculateBalance(principal,annualInterest,years,month);</span><br><span class="line">            System.out.println(NumberFormat.getCurrencyInstance().format(balance));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// readNumber 是读取信息并做安全性判断的函数</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">readNumber</span><span class="params">(String prompt,<span class="keyword">double</span> min,<span class="keyword">double</span> max)</span></span>&#123;</span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">double</span> value;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            System.out.print(prompt);</span><br><span class="line">            value = scanner.nextInt();</span><br><span class="line">            <span class="keyword">if</span> (value &gt;= min &amp;&amp; value &lt;= max)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            System.out.println(<span class="string">"Enter a value between "</span>+min+<span class="string">" and "</span>+max);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// calculateBalance 是计算当前仍需还款余额的函数</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">calculateBalance</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">int</span> principal,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">float</span> annualInterest,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">byte</span> years,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">short</span> numberOfPaymentMade)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">short</span> numberOfPayments = (<span class="keyword">short</span>)(years * MONTHS_IN_YEAR);</span><br><span class="line">        <span class="keyword">float</span> monthlyInterest = annualInterest / PERCENT / MONTHS_IN_YEAR;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">double</span> balance = principal*(Math.pow(<span class="number">1</span>+monthlyInterest,numberOfPayments)-Math.pow(<span class="number">1</span>+monthlyInterest,numberOfPaymentMade))/(Math.pow(<span class="number">1</span>+monthlyInterest,numberOfPayments)-<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> balance;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// calculateMortage 是计算每月需要还款的金额的函数</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">calculateMortage</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">int</span> principal,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">float</span> annualInterest,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">byte</span> years)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">short</span> numberOfPayments = (<span class="keyword">short</span>)(years * MONTHS_IN_YEAR);</span><br><span class="line">        <span class="keyword">float</span> monthlyInterest = annualInterest / PERCENT / MONTHS_IN_YEAR;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> principal</span><br><span class="line">                * (monthlyInterest * Math.pow(<span class="number">1</span> + monthlyInterest, numberOfPayments))</span><br><span class="line">                / (Math.pow(<span class="number">1</span> + monthlyInterest, numberOfPayments) - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们可以利用idea自带的 Refactory-&gt;Extract-&gt;Method来自动生成方法十分方便。</p>
<h2 id="Debugging-and-Deploying-Applications"><a href="#Debugging-and-Deploying-Applications" class="headerlink" title="Debugging and Deploying Applications"></a>Debugging and Deploying Applications</h2><h3 id="Types-of-Errors"><a href="#Types-of-Errors" class="headerlink" title="Types of Errors"></a>Types of Errors</h3><p><img src="/2020/07/01/Java%E5%9F%BA%E7%A1%801/6.png" style="zoom: 40%;"></p>
<p>Compile-time Errors Idea可以帮我们提示</p>
<p>Run-time Errors 可以通过Debugger来调试</p>
<h3 id="Debugging-Java-Applications"><a href="#Debugging-Java-Applications" class="headerlink" title="Debugging Java Applications"></a>Debugging Java Applications</h3><p><a href="https://www.bilibili.com/video/BV19J411t7dD?p=15" target="_blank" rel="noopener">https://www.bilibili.com/video/BV19J411t7dD?p=15</a></p>
<h3 id="Packaging-Java-Applications"><a href="#Packaging-Java-Applications" class="headerlink" title="Packaging Java Applications"></a>Packaging Java Applications</h3><p><a href="https://www.bilibili.com/video/BV19J411t7dD?p=16" target="_blank" rel="noopener">https://www.bilibili.com/video/BV19J411t7dD?p=16</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/06/30/Linux%E5%9F%BA%E7%A1%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/" class="post-title-link" itemprop="url">Linux基础</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-06-30 16:04:55" itemprop="dateCreated datePublished" datetime="2020-06-30T16:04:55+08:00">2020-06-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-05-08 09:37:32" itemprop="dateModified" datetime="2021-05-08T09:37:32+08:00">2021-05-08</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Linux基础"><a href="#Linux基础" class="headerlink" title="Linux基础"></a>Linux基础</h1><h2 id="System-Access-and-File-System"><a href="#System-Access-and-File-System" class="headerlink" title="System Access and File System"></a>System Access and File System</h2><h3 id="Command-Prompts-命令提示符"><a href="#Command-Prompts-命令提示符" class="headerlink" title="Command Prompts 命令提示符"></a>Command Prompts 命令提示符</h3><p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/31.png" style="zoom: 67%;"></p>
<p>当我们的终端没有出现命令提示符的时候，说明终端在运作或者卡住了，这时候我们需要用 ctrl+c 来 get our prompt back.就像下面这张图。当我们ctrl+c的时候，命令提示符又会出来。</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/32.png" style="zoom: 167%;"></p>
<h3 id="Accessing-to-Linux-System"><a href="#Accessing-to-Linux-System" class="headerlink" title="Accessing to Linux System"></a>Accessing to Linux System</h3><p>利用一些工具，我们可以远程链接一些系统，比如Windows我们可以用 RDP，Linux可以用putty，putty来远程管理 Linux 十分好用.</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/33.png" style="zoom: 67%;"></p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/34.png" style="zoom: 67%;"></p>
<h3 id="Download-and-install-Putty"><a href="#Download-and-install-Putty" class="headerlink" title="Download and install Putty"></a>Download and install Putty</h3><p><a href="https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html" target="_blank" rel="noopener">https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html</a></p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/35.png" style="zoom: 67%;"></p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/36.png" style="zoom: 100%;"></p>
<h3 id="New-Network-Command-ifconfig-and-ip"><a href="#New-Network-Command-ifconfig-and-ip" class="headerlink" title="New Network Command (ifconfig and ip)"></a>New Network Command (ifconfig and ip)</h3><p><a href="https://www.cnblogs.com/0to9/p/9591315.html" target="_blank" rel="noopener">https://www.cnblogs.com/0to9/p/9591315.html</a></p>
<p>  如今很多系统管理员依然通过组合使用诸如ifconfig、route、arp和netstat等命令行工具（统称为net-tools）来配置网络功能，解决网络故障。net-tools起源于BSD的TCP/IP工具箱，后来成为老版本Linux内核中配置网络功能的工具。但自2001年起，Linux社区已经对其停止维护。同时，一些Linux发行版比如Arch Linux和CentOS/RHEL 7则已经完全抛弃了net-tools，只支持iproute2。</p>
<p>​    作为网络配置工具的一份子，iproute2是linux下管理控制TCP/IP网络和流量控制的新一代工具包，旨在替代老派的工具链net-tools，即大家比较熟悉的ifconfig，arp，route，netstat等命令。。net-tools通过procfs(/proc)和ioctl系统调用去访问和改变内核网络配置，而iproute2则通过netlink套接字接口与内核通讯。抛开性能而言，net-tools的用法给人的感觉是比较乱，而iproute2的用户接口相对net-tools来说相对来说，更加直观。比如，各种网络资源（如link、IP地址、路由和隧道等）均使用合适的对象抽象去定义，使得用户可使用一致的语法去管理不同的对象。。更重要的是，到目前为止，iproute2仍处在持续开发中。</p>
<p>​    所以，net-tools和iproute2都需要去学习掌握了。</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/39.png" style="zoom: 50%;"></p>
<p>这里我选择了host-only internet</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/37.png" style="zoom: 100%;"></p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/38.png" style="zoom: 100%;"></p>
<h3 id="Connect-Linux-VM-via-Putty"><a href="#Connect-Linux-VM-via-Putty" class="headerlink" title="Connect Linux VM via Putty"></a>Connect Linux VM via Putty</h3><p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/42.png" style="zoom: 100%;"></p>
<p>点击确认：</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/40.png" style="zoom: 100%;"></p>
<p>输入账户和密码：</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/41.png" style="zoom: 100%;"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">login as: jxu</span><br><span class="line">jxu@192.168.56.101&#39;s password:</span><br><span class="line">Last login: Thu Jul  2 14:24:41 2020</span><br><span class="line">[jxu@MyFirstLinuxVM ~]$ hostname</span><br><span class="line">MyFirstLinuxVM</span><br><span class="line">[jxu@MyFirstLinuxVM ~]$</span><br></pre></td></tr></table></figure>
<p>我们看到putty链接和virtual box链接都是一样的。只是putty是在windows系统下远程链接linux，而virtualbox则是直接在linux环境之下启动的。 </p>
<h3 id="Important-Things-to-Remember-in-Linux"><a href="#Important-Things-to-Remember-in-Linux" class="headerlink" title="Important Things to Remember in Linux"></a>Important Things to Remember in Linux</h3><p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/43.png" style="zoom: 67%;"></p>
<h3 id="Introduction-to-Linux-File-System"><a href="#Introduction-to-Linux-File-System" class="headerlink" title="Introduction to Linux File System"></a>Introduction to Linux File System</h3><p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/44.png" style="zoom: 67%;"></p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/45.png" style="zoom: 67%;"></p>
<p>root / 就代表了windows中的C盘，/下有很多分文件夹</p>
<p>首先我们进入 root ，然后 ls -l 列出root目录下的文件夹</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/46.png" style="zoom: 100%;"></p>
<h3 id="FileSystem-Structure-and-Description"><a href="#FileSystem-Structure-and-Description" class="headerlink" title="FileSystem Structure and Description"></a>FileSystem Structure and Description</h3><p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/47.png" style="zoom: 100%;"></p>
<p>在命令行中，我们可以用 cd /boot  cd /opt在这些文件夹中自由切换，回到主目录使用cd命令行</p>
<p>在目录中我们使用 ls -l 查看目录下面所有的文件 </p>
<h3 id="File-System-Navigation-Commands-cd-ls-and-pwd"><a href="#File-System-Navigation-Commands-cd-ls-and-pwd" class="headerlink" title="File System Navigation Commands (cd , ls and pwd)"></a>File System Navigation Commands (cd , ls and pwd)</h3><p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/48.png" style="zoom: 80%;"></p>
<p>cd是用来切换目录的，pwd是用来显示当前所在的目录的，ls是列出目录中的文件信息的</p>
<p>在windows中，我们只需要双击就可以进入子文件夹了。而且是自动列出文件夹中的信息，并且将当前的文件夹信息显示在导航栏当中。但是linux中我们需要用命令行来操作：</p>
<p>我们先切换用户：<code>su -</code></p>
<p>输入密码后，我们的用户切换到了root</p>
<p><code>cd /</code> 从/root 切换到 / </p>
<p>ls -l 显示/文件夹下的信息：</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/49.png" style="zoom: 100%;"></p>
<p>然后我们可以切换到boot文件夹之下： cd boot/ </p>
<p>我们返回 / 文件夹的时候既可以 cd ..(代表回到上级目录) 也可以 cd /</p>
<p>如果直接写 cd 那么就会进入root文件夹，也就是根文件夹 </p>
<h3 id="Absolute-and-Relative-Paths"><a href="#Absolute-and-Relative-Paths" class="headerlink" title="Absolute and Relative Paths"></a>Absolute and Relative Paths</h3><p>绝对路径和相对路径</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/50.png" style="zoom: 60%;"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@MyFirstLinuxVM ~]# cd &#x2F;var&#x2F;log&#x2F;samba&#x2F;</span><br><span class="line">[root@MyFirstLinuxVM samba]# pwd</span><br><span class="line">&#x2F;var&#x2F;log&#x2F;samba</span><br><span class="line">[root@MyFirstLinuxVM samba]# cd &#x2F;</span><br><span class="line">[root@MyFirstLinuxVM &#x2F;]# cd var&#x2F;</span><br><span class="line">[root@MyFirstLinuxVM var]# cd log&#x2F;</span><br><span class="line">[root@MyFirstLinuxVM log]# cd samba&#x2F;</span><br><span class="line">[root@MyFirstLinuxVM samba]# pwd</span><br><span class="line">&#x2F;var&#x2F;log&#x2F;samba</span><br></pre></td></tr></table></figure>
<h3 id="Directory-Listing-Attributes"><a href="#Directory-Listing-Attributes" class="headerlink" title="Directory Listing Attributes"></a>Directory Listing Attributes</h3><p><a href="https://blog.csdn.net/sjzs5590/article/details/8254527?utm_medium=distribute.pc_relevant_t0.none-task-blog-OPENSEARCH-1.compare&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-OPENSEARCH-1.compare" target="_blank" rel="noopener">详解出自这篇博客</a></p>
<p>当我们 ls -l 的时候会列举出所有文件的具体属性。</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/51.png" style="zoom: 60%;"></p>
<h4 id="第一字段：文件属性字段"><a href="#第一字段：文件属性字段" class="headerlink" title="第一字段：文件属性字段"></a>第一字段：文件属性字段</h4><p>字母<strong>“-”</strong>表示该文件是一个普通文件</p>
<p>字母<strong>“d”</strong>表示该文件是一个目录，字母”d”，是dirtectory(目录)的缩写</p>
<p><strong>注意：</strong>目录或者是特殊文件，这个特殊文件存放其他文件或目录的相关信息</p>
<p>字母<strong>“l”</strong>表示该文件是一个链接文件。字母”l”是link(链接)的缩写，类似于windows下的快捷方式</p>
<p>字母<strong>“b”</strong>的表示块设备文件(block)，一般置于/dev目录下，设备文件是普通文件和程序访问硬件设备的入口，是很特殊的文件。没有文件大小，只有一个主设备号和一个辅设备号。一次传输数据为一整块的被称为块设备，如硬盘、光盘等。最小数据传输单位为一个数据块(通常一个数据块的大小为512字节)</p>
<p>字母为<strong>“c”</strong>表示该文件是一个字符设备文件(character)，一般置于/dev目录下，一次传输一个字节的设备被称为字符设备，如键盘、字符终端等，传输数据的最小单位为一个字节。</p>
<p>字母为<strong>“p”</strong>表示该文件为命令管道文件。与shell编程有关的文件。</p>
<p>字母<strong>“s”</strong>表示该文件为sock文件。与shell编程有关的文件。</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/52.png" style="zoom: 60%;"></p>
<h4 id="第2字段：文件硬链接数"><a href="#第2字段：文件硬链接数" class="headerlink" title="第2字段：文件硬链接数"></a>第2字段：文件硬链接数</h4><p>-rw-r—r— <strong>1</strong> root root 762 07-29 18:19 exit</p>
<p>如果一个文件不是目录，此时这一字段表示这个文件所具有的硬链接数，</p>
<p>第2字段的值为1，说明这个文件只有exit这一个文件名。即只有一个指向该链接的硬链接。</p>
<p>第1字符的后面9个字母表示该文件或目录的权限位。</p>
<p>r表是读 (Read) 、w表示写 (Write) 、x表示执行 (execute)/对目录来说代表能不能进入这个目录</p>
<p>其中前三个表示文件拥有者的权限，中间三个表示文件所属组拥有的权限，最后三个表示其他用户拥有的权限。</p>
<p>比如：</p>
<p>-rw-r—r— 1 root root 762 07-29 18:19 exit</p>
<p>表示文件的拥有者root对文件有读写权限，其他人(同组用户和其他用户只有读的权限)</p>
<p>另外，权限组还有一些特殊的表示法：</p>
<p>[root@localhost ~]# ll /usr/X11R6/bin/XFree86</p>
<p>-rws—x—x 1 root root 1960262 2003-02-28 /usr/X11R6/bin/XFree86</p>
<p>s表示这个是网络接口程序”s”是socket的缩写。该程序在运行过程中会打开一个网络接口。</p>
<p>其他UNIX类系统如FreeBSD中还有t权限，表示一个临时(temporary)文件</p>
<p>#ls -l /tmp可以看到这样的权限：drwxrwxrwt 它的最后一位是字母”t”</p>
<h4 id="第3字段：文件（目录）拥有者"><a href="#第3字段：文件（目录）拥有者" class="headerlink" title="第3字段：文件（目录）拥有者"></a>第3字段：文件（目录）拥有者</h4><p>lrwxrwxrwx 1 <strong>root</strong> root 4 08-03 08:27 bexit -&gt; exit</p>
<p>该字段表示此文件是属于哪个用户。linux类系统都是多用户系统，每个文件都有它的拥有者。只有文件的拥有者才具有改动文件属性的权利。当然， root用户具有改动任何文件属性的权利。对于一个目录来说，只有拥有该目录的用户，或者具有写权限的用户才有在目录下创建文件的权利</p>
<p>如果某一个用户因为某种原因，被删除，而该用户的文件还存在，那么用ls -l 查看该文件将显示一个代表用户存在前ID号的数字。</p>
<h4 id="第4字段：文件（目录）拥有者所在的组"><a href="#第4字段：文件（目录）拥有者所在的组" class="headerlink" title="第4字段：文件（目录）拥有者所在的组"></a>第4字段：文件（目录）拥有者所在的组</h4><p>lrwxrwxrwx 1 root <strong>root</strong> 4 08-03 08:27 bexit -&gt; exit</p>
<p>一个用户可以加入很多个组，但是其中有一个是主组，就是显示在第4字段的名称。</p>
<p>可以在useradd的时候用-g指定该用户所在的主组，用-G指定其他组</p>
<p>格式如下：Useradd –g 组名 用户名</p>
<h4 id="第5字段-文件所占用的空间-以字节为单位"><a href="#第5字段-文件所占用的空间-以字节为单位" class="headerlink" title="第5字段: 文件所占用的空间(以字节为单位)"></a>第5字段: 文件所占用的空间(以字节为单位)</h4><p>lrwxrwxrwx 1 root root <strong>4</strong> 08-03 08:27 bexit -&gt; exit</p>
<p>第5字段表示文件大小，如果是一个文件夹（目录），则表示该文件夹的大小。请<strong>注意</strong>是文件夹本身的大小，而不是文件夹以及它下面的文件的总大小。</p>
<p>很多人不能理解文件夹是一个特殊的文件的含义，这样的话理解文件夹大小的含义就比较困难了。</p>
<h4 id="第6字段：文件（目录）最近访问（修改）时间"><a href="#第6字段：文件（目录）最近访问（修改）时间" class="headerlink" title="第6字段：文件（目录）最近访问（修改）时间"></a>第6字段：文件（目录）最近访问（修改）时间</h4><p>lrwxrwxrwx 1 root root 4 <strong>08-03 08:27</strong> bexit -&gt; exit</p>
<p>文件创建的时间可以通过touch命令来修改。如：</p>
<p>[root@localhost ~]# touch exit</p>
<p>可以把exit的创建时间修改为当前时间，另外，一个文件还有最后访问时间，最后修改时间等属性。</p>
<p>这些属性可以用ls 的其它参数显示出来。</p>
<h4 id="第7字段：文件名"><a href="#第7字段：文件名" class="headerlink" title="第7字段：文件名"></a>第7字段：文件名</h4><p>lrwxrwxrwx 1 root root 4 08-03 08:27 bexit -&gt; exit</p>
<p>如果是一个符号链接，那么会有一个 “-&gt;” 箭头符号，后面根一个它指向的文件名</p>
<h3 id="Creating-Files-and-Directories-touch-cp-vi-mkdir"><a href="#Creating-Files-and-Directories-touch-cp-vi-mkdir" class="headerlink" title="Creating Files and Directories (touch, cp, vi, mkdir)"></a>Creating Files and Directories (touch, cp, vi, mkdir)</h3><p><a href="http://www.baidu.com/link?url=5fGjJuVb9ygvJXqtQC0p3uq7O60MRlvR9irUX6AAerbuiSg_nGQUl6PrztEWbvFrjD-LtXnybEGmHgoQqRPGFa&amp;wd=&amp;eqid=b89b724e00036bde000000065efed7c7" target="_blank" rel="noopener">http://www.baidu.com/link?url=5fGjJuVb9ygvJXqtQC0p3uq7O60MRlvR9irUX6AAerbuiSg_nGQUl6PrztEWbvFrjD-LtXnybEGmHgoQqRPGFa&amp;wd=&amp;eqid=b89b724e00036bde000000065efed7c7</a></p>
<h4 id="Creating-Files"><a href="#Creating-Files" class="headerlink" title="Creating Files"></a>Creating Files</h4><h5 id="touch"><a href="#touch" class="headerlink" title="touch"></a>touch</h5><p>建立一个空文档，但是不进入编辑模式</p>
<h5 id="cp"><a href="#cp" class="headerlink" title="cp"></a>cp</h5><p>copy的简称 是复制命令，用来复制文件的，它可以将文件或者目录复制到其他目录中。</p>
<h5 id="vi"><a href="#vi" class="headerlink" title="vi"></a>vi</h5><p>建立一个空文档，进入编辑模式</p>
<h4 id="Creating-Directories"><a href="#Creating-Directories" class="headerlink" title="Creating Directories"></a>Creating Directories</h4><h5 id="mkdir"><a href="#mkdir" class="headerlink" title="mkdir"></a>mkdir</h5><p>建立一个空目录</p>
<h4 id="实践"><a href="#实践" class="headerlink" title="实践"></a>实践</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">[jxu@MyFirstLinuxVM ~]$ ls -ltr</span><br><span class="line">总用量 0</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 桌面</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 音乐</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 文档</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 图片</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 视频</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 模板</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 公共</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 7月   3 00:31 下载</span><br><span class="line">-rw-rw-r--. 1 jxu jxu 0 7月   3 15:06 jerry</span><br><span class="line">[jxu@MyFirstLinuxVM ~]$ cp jerry lex</span><br><span class="line">[jxu@MyFirstLinuxVM ~]$ ls -ltr</span><br><span class="line">总用量 0</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 桌面</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 音乐</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 文档</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 图片</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 视频</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 模板</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 公共</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 7月   3 00:31 下载</span><br><span class="line">-rw-rw-r--. 1 jxu jxu 0 7月   3 15:06 jerry</span><br><span class="line">-rw-rw-r--. 1 jxu jxu 0 7月   3 15:08 lex</span><br><span class="line">[jxu@MyFirstLinuxVM ~]$ touch george</span><br><span class="line">[jxu@MyFirstLinuxVM ~]$ ls -ltr</span><br><span class="line">总用量 0</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 桌面</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 音乐</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 文档</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 图片</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 视频</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 模板</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 公共</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 7月   3 00:31 下载</span><br><span class="line">-rw-rw-r--. 1 jxu jxu 0 7月   3 15:06 jerry</span><br><span class="line">-rw-rw-r--. 1 jxu jxu 0 7月   3 15:08 lex</span><br><span class="line">-rw-rw-r--. 1 jxu jxu 0 7月   3 15:08 george</span><br></pre></td></tr></table></figure>
<p>我们也可以一下子创建三个文件。就像这样：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[jxu@MyFirstLinuxVM ~]$ touch bart lisa marge</span><br><span class="line">[jxu@MyFirstLinuxVM ~]$ ls -ltr</span><br><span class="line">总用量 0</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 桌面</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 音乐</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 文档</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 图片</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 视频</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 模板</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 公共</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 7月   3 00:31 下载</span><br><span class="line">-rw-rw-r--. 1 jxu jxu 0 7月   3 15:06 jerry</span><br><span class="line">-rw-rw-r--. 1 jxu jxu 0 7月   3 15:08 lex</span><br><span class="line">-rw-rw-r--. 1 jxu jxu 0 7月   3 15:08 george</span><br><span class="line">-rw-rw-r--. 1 jxu jxu 0 7月   3 15:12 marge</span><br><span class="line">-rw-rw-r--. 1 jxu jxu 0 7月   3 15:12 lisa</span><br><span class="line">-rw-rw-r--. 1 jxu jxu 0 7月   3 15:12 bart</span><br></pre></td></tr></table></figure>
<p>用mkdir来创建一个文件夹：或者一下子创建好几个文件夹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[jxu@MyFirstLinuxVM ~]$ mkdir seinfeld</span><br></pre></td></tr></table></figure>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/54.png" style="zoom: 100%;"></p>
<p>vi 命令比较特殊, 打开文件后按 i 开始插入，按 Esc 退出编辑模式， 输入 <code>:wq</code> 退出vim</p>
<h3 id="Finding-Files-and-Directories-find-locate"><a href="#Finding-Files-and-Directories-find-locate" class="headerlink" title="Finding Files and Directories (find, locate)"></a>Finding Files and Directories (find, locate)</h3><p><a href="https://www.cnblogs.com/huangcy/p/7593518.html" target="_blank" rel="noopener">https://www.cnblogs.com/huangcy/p/7593518.html</a></p>
<p>当我们在windows搜寻文件时，需要在窗口左上角的搜索框中查询（或者借助一些软件）。但是linux中会很方便：</p>
<p>find查找磁盘空间，相较于locate和whereis速度较慢。<br>find和locate的查找单位为文件或者目录，locate其实是find -name的另一种写法。<br>locate和whereis都是在数据库中查找，所以新增文件无法查找到，必须先updatedb。</p>
<h4 id="find"><a href="#find" class="headerlink" title="find"></a>find</h4><p> find<br>　　find是最常见和最强大的查找命令，你可以用它找到任何你想找的文件。与查询数据库(/var/lib/locatedb)文件不同，find查找磁盘空间。<br>　　$find [指定目录] [选项] [指定动作]（不可调换位置）</p>
<p>-[指定目录]： 所要搜索的目录及其所有子目录。默认为当前目录。<br>-[选项]： 所要搜索的文件的特征。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;常用选项　　　　　　</span><br><span class="line">-name    filename    查找名为filename的文件</span><br><span class="line">-user    username    按文件属主来查找</span><br><span class="line">-group   groupname   按组来查找</span><br><span class="line">-mtime   -n +n       按文件更改时间来查找文件，-n指n天以内，+n指n天以前</span><br><span class="line">-atime   -n +n       按文件访问时间来查找文件</span><br><span class="line">-ctime   -n +n       按文件创建时间来查找文件，-n指n天以内，+n指n天以前</span><br><span class="line">-nogroup             查无有效属组的文件，即文件的属组在&#x2F;etc&#x2F;groups中不存在</span><br><span class="line">-type    b&#x2F;d&#x2F;c&#x2F;p&#x2F;l&#x2F;f 查是块设备、目录、字符设备、管道、符号链接、普通文件</span><br><span class="line">-size    n[c]        查长度为n块[或n字节]的文件也可查找一个大小范围内的文件，用-n,+n</span><br></pre></td></tr></table></figure>
<p>实例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">  &#x2F;&#x2F;查找当前目录下以“1”开头的文件</span><br><span class="line">　find . -name &quot;1*&quot;　　</span><br><span class="line">　&#x2F;&#x2F;.代表当前目录下　　</span><br><span class="line">　　</span><br><span class="line">　&#x2F;&#x2F;查找etc目录下以字母(不区分大小写）开头，.sh结尾的文件</span><br><span class="line">  find &#x2F;etc -iname &quot;[a-z]*.sh&quot;　</span><br><span class="line">  &#x2F;&#x2F;*表示任意多个字符　　</span><br><span class="line">  </span><br><span class="line">  &#x2F;&#x2F;查找etc目录下大于20k，十天前创建的文件</span><br><span class="line">  find &#x2F;etc -size +20k -a -mtime +10</span><br><span class="line">  &#x2F;&#x2F;-a表示and，-o表示or　　</span><br><span class="line">  </span><br><span class="line">  &#x2F;&#x2F;查找当前目录下的普通文件，并列出他们的完整路径　　</span><br><span class="line">  find . -type f -exec ls -l &#123;&#125; \;　　</span><br><span class="line">  &#x2F;&#x2F;反斜杠表示转义，&#123;&#125;表示当前find查找出来的文件名</span><br><span class="line">  &#x2F;&#x2F;如果报find: missing argument to &#96;-exec&#39;的错就是&#123;&#125;和\之间没有加空格</span><br><span class="line">  </span><br><span class="line">[root@MyFirstLinuxVM &#x2F;]# find &#x2F; -name &quot;ifcfg-enp0s3&quot;</span><br><span class="line">find: ‘&#x2F;run&#x2F;user&#x2F;1000&#x2F;gvfs’: 权限不够</span><br><span class="line">&#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-enp0s3</span><br></pre></td></tr></table></figure>
<h4 id="locate"><a href="#locate" class="headerlink" title="locate"></a>locate</h4><p>locate命令<strong>其实是“find -name”的另一种写法</strong>，但是要比后者快得多，原因在于它不搜索具体目录，而是<strong>搜索一个数据库</strong>(/var/lib/locatedb)，这个数据库中含有本地所有文件信息。Linux系统自动创建这个数据库，并且<strong>每天自动更新一次</strong>，所以使用locate命令查不到最新变动过的文件。为了避免这种情况，可以在使用locate之前，先使用updatedb命令，手动更新数据库。</p>
<p>$locate [指定目录] [选项]（可调换位置）</p>
<p>　　　　[指定目录]：所要查找的任意文件名称或者查找任意目录下的任意文件。</p>
<p>　　　　-[选项]：筛选文件的条件。</p>
<blockquote>
<p>-e  将排除在寻找的范围之外。<br>-1  如果是1，则启动安全模式。在安全模式下，使用者不会看到权限无法看到的档案。这会始速度减慢，因为 locate 必须至实际的档案系统中取得档案的权限资料。<br>-f  将特定的档案系统排除在外，例如我们没有到理要把 proc 档案系统中的档案放在资料库中。<br>-q  安静模式，不会显示任何错误讯息。<br>-n  至多显示n个输出。<br>-r  使用正规运算式 做寻找的条件。<br>-o  指定资料库存的名称。<br>-d  指定资料库的路径<br>-h  显示辅助讯息<br>-V  显示程式的版本讯息<br>-i  忽略字母大小写</p>
</blockquote>
<p>locate实例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;查找etc目录下以sh开头的文件</span><br><span class="line">　　locate etc&#x2F;sh</span><br><span class="line">　　&#x2F;&#x2F;在根目录下新建文件，并查找</span><br><span class="line">　　cd</span><br><span class="line">　　touch text.log</span><br><span class="line">　　locate &#x2F;根目录&#x2F;text</span><br><span class="line">　　&#x2F;&#x2F;发现查找不到刚刚新建的文件，需要updatedb</span><br><span class="line">　　updatedb</span><br><span class="line">　　locate &#x2F;根目录&#x2F;text</span><br><span class="line">　　&#x2F;&#x2F;发现可以查找到文件</span><br></pre></td></tr></table></figure>
<h3 id="Changing-Password"><a href="#Changing-Password" class="headerlink" title="Changing Password"></a>Changing Password</h3><p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/55.png" style="zoom: 70%;"></p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/56.png" style="zoom: 70%;"></p>
<h3 id="WildCards"><a href="#WildCards" class="headerlink" title="WildCards (, , ^, [])"></a>WildCards (<em>, </em>, ^, [])</h3><p>就像扑克牌中的大小王一样， wildcards在查询中可以代替一些字符</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* - represents zero or more characters</span><br><span class="line">? - represents a single character</span><br><span class="line">[] - represents a range of characters</span><br><span class="line">\ - as an escape character</span><br><span class="line">^ - the beginning of the line</span><br><span class="line">$ - the end of the line</span><br></pre></td></tr></table></figure>
<p>用在删除当中：<code>rm abc*</code>删除所有以abc为开头的文件<code>rm ?bcd*</code>删除bcd之前有一个字符，bcd后面随便的所有文件</p>
<p>用在创建当中： <code>touch abcd{1..9}-xyz</code></p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/57.png" style="zoom: 100%;"></p>
<h3 id="Hard-and-Soft-Links-ln"><a href="#Hard-and-Soft-Links-ln" class="headerlink" title="Hard and Soft Links (ln)"></a>Hard and Soft Links (ln)</h3><p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/58.png" style="zoom: 100%;"></p>
<p>链接文件的概念类似于windows里的<strong>快捷方式</strong>。多个链接文件同时指向一个“源文件”。链接文件分为<strong>硬链接</strong>或<strong>符号链接（软链接）</strong>两种。</p>
<p>在Linux的文件系统中，保存在磁盘分区中的文件不管是什么类型都给它分配一个编号，称为索引节点号inode 。软连接，其实就是新建立一个文件，这个文件就是专门用来指向别的文件的（那就和windows 下的快捷方式的那个文件有很接近的意味）。软连接产生的是一个新的文件，但这个文件的作用就是专门指向某个文件的，<strong>删了软连接文件</strong>，那就等于不需要这个连接，和原来的存在的实体原文件<strong>没有任何关系</strong>，但<strong>删除原来的文件</strong>，则相应的<strong>软连接不可用</strong>（cat那个软链接文件，则提示“没有该文件或目录“）</p>
<p>硬连接是不会建立inode的，他只是在文件原来的inode link count域再增加1而已，也因此硬链接是不可以跨越文件系统的。相反都是软连接会重新建立一个inode，当然inode的结构跟其他的不一样，他只是一个指明源文件的字符串信息。一旦删除源文件，那么软连接将变得毫无意义。而硬链接删除源文件的时候，系统调用会检查inode link count的数值，如果他大于等于1，那么inode不会被回收，因此文件的内容不会被删除，相当于删除了一个索引。</p>
<p><strong>硬链接实际上是为文件建一个别名</strong>，链接文件和原文件实际上是同一个文件。可以通过ls -i来查看一下，这两个文件的inode号是同一个，说明它们是同一个文件；<strong>而软链接建立的是一个指向</strong>，即链接文件内的内容是指向原文件的指针，它们是两个文件。</p>
<p><strong>软链接可以跨文件系统，硬链接不可以</strong>；软链接可以对一个不存在的文件名(filename)进行链接（当然此时如果你vi这个软链接文件，linux会自动新建一个文件名为filename的文件）,硬链接不可以（其文件必须存在，inode必须存在）；软链接可以对目录进行连接，硬链接不可以。<strong>两种链接都可以通过命令 ln 来创建。ln 默认创建的是硬链接。使用 -s 开关可以创建软链接</strong></p>
<p>软链接实例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">touch hulk</span><br><span class="line">cd &#x2F;tmp&#x2F;</span><br><span class="line">ln -s &#x2F;home&#x2F;jxu&#x2F;hulk</span><br><span class="line">ls -ltr</span><br><span class="line">在最后显示: </span><br><span class="line">...... hulk&gt;&#x2F;home&#x2F;jxu&#x2F;hulk</span><br></pre></td></tr></table></figure>
<p>也就是说，我们在tmp文件夹下新建了一个链接名为hulk，这个链接是连接到/home/jxu/hulk的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[jxu@MyFirstLinuxVM ~]$ echo &quot;hulk is a superhero&quot;&gt;hulk</span><br><span class="line">[jxu@MyFirstLinuxVM ~]$ cat hulk </span><br><span class="line">hulk is a superhero</span><br><span class="line">[jxu@MyFirstLinuxVM ~]$ cd &#x2F;tmp&#x2F;</span><br><span class="line">[jxu@MyFirstLinuxVM tmp]$ cat hulk </span><br><span class="line">hulk is a superhero</span><br></pre></td></tr></table></figure>
<p>当我们删除hulk文件时，tmp文件夹下的hulk就会变成这样：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[jxu@MyFirstLinuxVM ~]$ rm hulk </span><br><span class="line">[jxu@MyFirstLinuxVM ~]$ cd &#x2F;tmp&#x2F;</span><br><span class="line">[jxu@MyFirstLinuxVM tmp]$ cat hulk</span><br><span class="line">cat: hulk: 没有那个文件或目录</span><br></pre></td></tr></table></figure>
<p>硬链接实例：</p>
<p>我们看到创建的hulk并不是一个链接</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[jxu@MyFirstLinuxVM ~]$ echo &quot;hulk is a superhero&quot; &gt;hulk </span><br><span class="line">[jxu@MyFirstLinuxVM ~]$ cat hulk</span><br><span class="line">hulk is a superhero</span><br><span class="line">[jxu@MyFirstLinuxVM ~]$ cd &#x2F;tmp</span><br><span class="line">[jxu@MyFirstLinuxVM tmp]$ rm hulk </span><br><span class="line">[jxu@MyFirstLinuxVM tmp]$ ln &#x2F;home&#x2F;jxu&#x2F;hulk</span><br><span class="line">[jxu@MyFirstLinuxVM tmp]$ ls -ltr</span><br><span class="line">...</span><br><span class="line">-rw-rw-r--. 2 jxu  jxu     20 7月   3 16:08 hulk</span><br></pre></td></tr></table></figure>
<p>而且当我删除home文件夹下的hulk时，tmp文件夹下的hulk仍然不会变的。还是有内容的</p>
<h2 id="Linux-Fundamentals"><a href="#Linux-Fundamentals" class="headerlink" title="Linux Fundamentals"></a>Linux Fundamentals</h2><h3 id="Linux-Command-Syntax"><a href="#Linux-Command-Syntax" class="headerlink" title="Linux Command Syntax"></a>Linux Command Syntax</h3><p>Commands typically have the syntax:</p>
<p><strong>command options arguments</strong></p>
<h4 id="Options"><a href="#Options" class="headerlink" title="Options:"></a>Options:</h4><p>e.g ls -l</p>
<p>e.g man -ls</p>
<p>Modify the way that a command works</p>
<p>Usually consist of a hyphen(连字符) or dash  followed by a single letter</p>
<p>some commands accept multiple options which canusually be grouped together after a single hyphen</p>
<h4 id="Arguments"><a href="#Arguments" class="headerlink" title="Arguments :"></a>Arguments :</h4><p>eg. ls -l bart</p>
<p>eg. rm -r seinfeld/</p>
<p>eg. mkdir seinfeld</p>
<p>Most commands are used together with one or moe arguments</p>
<p>Some commands  assume a default argument if none is supplied </p>
<p>Argument are optional for some commands and required by others</p>
<h3 id="Files-and-Directory-Permissions-chmod"><a href="#Files-and-Directory-Permissions-chmod" class="headerlink" title="Files and Directory Permissions (chmod)"></a>Files and Directory Permissions (chmod)</h3><p>UNIX是一个<strong>多用户系统</strong>。帐户中的每个文件和目录都可以通过更改其访问权限来防止其他用户访问。每个用户都有责任控制对其文件的访问</p>
<ul>
<li>文件或目录的权限可能会受到类型的限制</li>
<li>权限分为三种类型：读、写、运行<ul>
<li>r - read</li>
<li>w - write</li>
<li>x - execute = running a program</li>
</ul>
</li>
<li>Each permission (rwx) can be controlled at three levels:<ul>
<li>u - user = yourself</li>
<li>g - group = can be people in the same project</li>
<li>o - other = everyone on the system</li>
</ul>
</li>
<li>File or Directory permission can be displayed by running ls –l command<ul>
<li>-rwxrwxrwx</li>
<li>Command to change permission</li>
<li>chmod</li>
</ul>
</li>
</ul>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/59.png" style="zoom: 120%;"></p>
<p>当我们新学习一个命令行的时候，可以利用man+option的方法来获得这个命令行的用法</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/60.png" style="zoom: 100%;"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[jxu@MyFirstLinuxVM ~]$ chmod g-w jerry</span><br><span class="line">-rw-r--r--. 1 jxu jxu  0 7月   3 15:23 jerry</span><br></pre></td></tr></table></figure>
<p>上面的指令就是让group中的write属性关闭</p>
<p>同样的，我们进行下面的操作 a 代表了all，也就是对user，everyone，group所有对象</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[jxu@MyFirstLinuxVM ~]$ chmod a-r jerry</span><br><span class="line">[jxu@MyFirstLinuxVM ~]$ chmod u-w jerry</span><br><span class="line">----------. 1 jxu jxu  0 7月   3 15:23 jerry</span><br></pre></td></tr></table></figure>
<p>当我们把所有的权限全部关闭之后，我们就不能再读取或者删除jerry了</p>
<p>恢复权限，我们需要这样写</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[jxu@MyFirstLinuxVM ~]$ chmod u+rw jerry</span><br><span class="line">[jxu@MyFirstLinuxVM ~]$ chmod g+rw jerry </span><br><span class="line">[jxu@MyFirstLinuxVM ~]$ chmod o+r jerry </span><br><span class="line">-rw-rw-r--. 1 jxu jxu 0 7月   3 15:23 jerry</span><br></pre></td></tr></table></figure>
<p>如果directory 有 x 权限，那么说明可以通过 cd来访问这个文件夹。如果我们移除这个权限，那么我们就没有办法访问这个文件夹了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[jxu@MyFirstLinuxVM ~]$ chmod a-x seinfeld&#x2F;</span><br><span class="line">[jxu@MyFirstLinuxVM ~]$ cd seinfeld&#x2F;</span><br><span class="line">-bash: cd: seinfeld&#x2F;: 权限不够</span><br></pre></td></tr></table></figure>
<h3 id="File-Permissions-Using-Numeric-Mode"><a href="#File-Permissions-Using-Numeric-Mode" class="headerlink" title="File Permissions Using Numeric Mode"></a>File Permissions Using Numeric Mode</h3><p>我们可以直接用数字代替上面的操作：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Number</th>
<th>Permission Type</th>
<th>Symbol</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>No Permission</td>
<td>—-</td>
</tr>
<tr>
<td>1</td>
<td>Execute</td>
<td>—x</td>
</tr>
<tr>
<td>2</td>
<td>Write</td>
<td>-w-</td>
</tr>
<tr>
<td>3</td>
<td>Execu</td>
<td>-wx</td>
</tr>
<tr>
<td>4</td>
<td>Read</td>
<td>r—</td>
</tr>
<tr>
<td>5</td>
<td>Read+Execute</td>
<td>r-x</td>
</tr>
<tr>
<td>6</td>
<td>Read+Write</td>
<td>rw-</td>
</tr>
<tr>
<td>7</td>
<td>Read+Write+Execute</td>
<td>rwx</td>
</tr>
</tbody>
</table>
</div>
<p>e.g </p>
<p>chmod 764 FILE :  rwx rw- r—</p>
<p>chmod 000 FILE :  —- —- —-</p>
<p>chmod 604 FILE :  rw- —- r—</p>
<p>chmod 111 FILE :  —x —x —x</p>
<p><a href="https://wow.techbrood.com/fiddle/6986" target="_blank" rel="noopener">chmod numeric calculators</a></p>
<h3 id="File-Ownership-Commands-chown-chgrp"><a href="#File-Ownership-Commands-chown-chgrp" class="headerlink" title="File Ownership Commands (chown, chgrp)"></a>File Ownership Commands (chown, chgrp)</h3><p>现在我们要来研究怎么改变一个文件(夹)的拥有权。因为对于一个文件夹来说，有创建它的人(owner)和它所属的团队(group).我们分别使用 chown 和 chgrp来实现修改这两个权限的操作</p>
<ul>
<li>下面两个是<strong>更改文件所有权</strong>的命令<ul>
<li>chown and chgrp<ul>
<li>chown changes the ownership of a file    改变个人权限</li>
<li>chgrp changes the group ownership of a file 改变组权限</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>当我们对一个文件夹使用了 -R时(recursive) 那么我们将对这个文件夹下的所有文件(夹)都进行切换所有权</p>
<ul>
<li>Recursive ownership change option (Cascade)<ul>
<li>-R</li>
</ul>
</li>
</ul>
<p>在windows下，查看一个文件的属性就可以看出他的拥有者，和它对拥有者开放的权限。</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/61.png" style="zoom: 120%;"></p>
<p>在linux下，我们使用<code>ls -ltr</code> 来查看文件的所属信息。其中第三列是owner，第四列是group，这里都是 jxu ，因为这台虚拟机只有我一个人用。</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/62.png" style="zoom: 200%;"></p>
<p>现在我们的身份是jxu，也就是一个普通用户，是没有办法修改所属的。于是我们要用 <code>su -</code> 切换到管理员再进行修改。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd home&#x2F;jxu&#x2F;</span><br><span class="line">chown root lisa&#x2F;</span><br></pre></td></tr></table></figure>
<p>两行命令就能将lisa的owner修改成了root</p>
<p>现在lisa的权限就变成了：drwxrwxr-x. 2 root jxu 6 10月 13 13:28 lisa</p>
<p>同理，我们可以改变lisa所属的group <code>chgrp root lisa/</code></p>
<p>现在我们将用户切换回jxu，将lisa文件夹删除，发现我们仍然是可以删除lisa的，这是因为我们对jxu文件夹可读可写可修改。但是如果我这时候想删除root用户下的某个文件，那么我们就没有权限了。</p>
<h3 id="Access-Control-List-ACL"><a href="#Access-Control-List-ACL" class="headerlink" title="Access Control List (ACL)"></a>Access Control List (ACL)</h3><p>访问控制列表为文件系统提供了额外的、更灵活的权限机制。它的目的是帮助您获得UNIX文件权限。ACL允许您授予任何用户或组对任何盘资源的权限.</p>
<p>ACL 的用处：</p>
<ul>
<li>想象一个场景，其中一个特定的用户不是我们组的成员。但是我还是想要给他读写的权利。那么我们怎么在不把他归化为我们组的情况下仍然给他这个权限呢？ 答案就是ACL</li>
<li>一般的，在Linux中，ACL指令被用来实现灵活的权限机制。</li>
<li>在Linux手册页中，acl用于为文件和目录定义更细粒度的自主访问权限</li>
<li>设置ACL 权限的指令是： <code>setfacl</code> 和 <code>getfacl</code></li>
</ul>
<p>通用公式：  setfacl [-bkdR]  [{-m|-x}]<acl规则>  文件|目录</acl规则></p>
<h5 id="给一个用户加权限"><a href="#给一个用户加权限" class="headerlink" title="给一个用户加权限"></a>给一个用户加权限</h5><p><code>setfacl -m u:username:rwx /path/to/file</code></p>
<h5 id="给一个组加权限"><a href="#给一个组加权限" class="headerlink" title="给一个组加权限"></a>给一个组加权限</h5><p><code>setfact -m g:groupname:rw /path/to/file</code></p>
<h5 id="继承权限"><a href="#继承权限" class="headerlink" title="继承权限"></a>继承权限</h5><p><code>setfacl -dm &quot;entry&quot; /path/to/dir</code>对目录有效，使用此参数设置权限后，再在该目录下创建的文件，会默认继承该目录的权限</p>
<h5 id="删除某个权限"><a href="#删除某个权限" class="headerlink" title="删除某个权限"></a>删除某个权限</h5><p><code>setfacl -x u:user /path/to/file</code> (For a specific user)</p>
<h5 id="删除所有人权限"><a href="#删除所有人权限" class="headerlink" title="删除所有人权限"></a>删除所有人权限</h5><p><code>setfacl -b path/to/file</code></p>
<p>现在我们通过实战来演示这些指令,首先我们创建一个名叫 tx 的文件，然后我们通过 <code>getfacl</code> 指令来获得它的一些权限信息</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/63.png" style="zoom: 100%;"></p>
<p>现在我们在相同目录下用另一个账户 jason来访问这个文件，<code>vi tx</code> ，在底部发现这是只读的：</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/64.png" style="zoom: 100%;"></p>
<p>现在我们给tx文件设置acl，也就是给jason用户加上读写权限。再次使用<code>getacl</code>会发现 user多了一行给jason的权限。</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/65.png" style="zoom: 100%;"></p>
<p>现在再用jason登录，就可以读写 tx 文件了：</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/66.png" style="zoom: 100%;"></p>
<p>同样的，如果我使用 <code>setfacl -m g:jason:rw /tmp/tx</code> 这样对于jason这一组的用户都有权限读写 tx文件了</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/67.png" style="zoom: 100%;"></p>
<p>现在我们试验一下移除权限的操作：</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/68.png" style="zoom: 100%;"></p>
<p>需要注意的是，及时我们给某个用户读写的权利，但是该用户还是没有办法删除该文件的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[jason@VM-4-8-centos tmp]$ rm tx</span><br><span class="line">rm: cannot remove ‘tx’: Operation not permitted</span><br></pre></td></tr></table></figure>
<h3 id="Help-Commands"><a href="#Help-Commands" class="headerlink" title="Help Commands"></a>Help Commands</h3><p>当我们对某一命令陌生时，可以使用下面三种 求助命令：</p>
<p><code>whatis command</code> 提供简短的介绍</p>
<p><code>commad --help</code> 更多、更长的介绍，有着更多的细节 </p>
<p><code>man command</code> man 代表Manuel，这时候linux将会展示所有的关于该命令的手册。</p>
<p>其中command 就是我们想要咨询的命令</p>
<h3 id="TAB-Completion-and-Up-Arrow-Keys"><a href="#TAB-Completion-and-Up-Arrow-Keys" class="headerlink" title="TAB Completion and Up Arrow Keys"></a>TAB Completion and Up Arrow Keys</h3><p>使用 TAB 可以自动补全一些文件、目录的名字。</p>
<p>比如： <code>ls j&lt;TAB&gt;</code> 就会显示已 j 开头的文件</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/1.png" style="zoom: 120%;"></p>
<p>或者打一半指令，然后按tab 会补齐指令</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/2.png" style="zoom: 120%;"></p>
<h3 id="Adding-Text-to-Files"><a href="#Adding-Text-to-Files" class="headerlink" title="Adding Text to Files"></a>Adding Text to Files</h3><p>编写文件有三种方法</p>
<ul>
<li>vi</li>
<li>重定向符号： 覆盖写 <code>&gt;</code> , 追加写 <code>&gt;&gt;</code> </li>
<li><code>echo &gt;</code> 或者 <code>echo &gt;&gt;</code> </li>
</ul>
<p>下面我们试一下 echo 命令。</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/3.png" style="zoom: 120%;"></p>
<p>当我们想查看一个文件的时候，可以使用 <code>cat+ 文件名命令</code> 如下：</p>
<p> <img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/4.png" style="zoom: 120%;"></p>
<p><code>echo &quot;文字&quot; &gt;&gt; 文件名</code> 是追加写，如下：</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/5.png" style="zoom: 120%;"></p>
<p>我们还可以通过 <code>&gt;</code> 将一个命令的执行结果写到某一个文件当中：</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/6.png" style="zoom: 120%;"></p>
<h3 id="Standard-Output-to-a-File-tee-command"><a href="#Standard-Output-to-a-File-tee-command" class="headerlink" title="Standard Output to a File (tee command)"></a>Standard Output to a File (tee command)</h3><p>tee命令用于读取标准输入的数据，并将其内容输出成文件。</p>
<p>tee指令会从标准输入设备(Standard input)读取数据，将其内容输出到标准输出设备(Standard output )，同时保存成文件。它中断了一个程序的输出，这样它就可以显示且保存在一个文件中。命令同时执行复制和显示这两个任务：将结果复制到指定的文件或变量中，并显示结果。</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/7.png" style="zoom: 120%;"></p>
<p><strong>语法：</strong><code>tee [-ai][--help][--version][文件...]</code> </p>
<p>参数：</p>
<ul>
<li>-a或—append 　附加到既有文件的后面，而非覆盖它．</li>
<li>-i或—ignore-interrupts 　忽略中断信号。</li>
<li>—help 　在线帮助。</li>
<li>—version 　显示版本信息。 </li>
</ul>
<p>如果我们使用重定向符号，在终端并不会输出这些信息。但是如果我使用 <code>|+tee</code>  之后，我们即可以在终端中输出信息，又可以吧信息写入到文件当中。</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/8.png" style="zoom: 120%;"></p>
<p>如果我们要追加写，可以<code>echo &quot;David and Eliane&quot; | tee -a elaine-david2</code> 即可</p>
<p>我们还可以将信息写到多个文件当中去：比如 <code>ls -l | tee file1 file2 file3</code></p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/9.png" style="zoom: 120%;"></p>
<p>file1,file2和file3 都有相同的内容</p>
<h3 id="Pipes"><a href="#Pipes" class="headerlink" title="Pipes ( _ )"></a>Pipes ( _ )</h3><p>Pipe 作用就是用来连接若干个(&gt;=2)命令的。 前面一个命令的输出即是下一个命令的输入：管道的符号是<code>|</code> </p>
<p>语法： <code>command1 [arguments] | command2 [arguments]</code> </p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/10.png" style="zoom: 120%;"></p>
<p>比如说：<img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/11.png" style="zoom: 120%;"></p>
<p>第一个命令是 ls -ltr 列出当前目录下的所有文件，然后利用管道将输出作为 <code>tail -1</code> 的输入，这个命令会返回输入的最后一条信息，并作为标准输出打印在终端。</p>
<h3 id="File-Maintenance-Commands-cp-rm-mv-mkdir-rmdir"><a href="#File-Maintenance-Commands-cp-rm-mv-mkdir-rmdir" class="headerlink" title="File Maintenance Commands (cp, rm, mv, mkdir, rmdir)"></a>File Maintenance Commands (cp, rm, mv, mkdir, rmdir)</h3><h4 id="cp-1"><a href="#cp-1" class="headerlink" title="cp"></a>cp</h4><p>cp是copy 的缩写, 命令主要用于复制文件或目录。</p>
<p><strong>语法</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp [options] <span class="built_in">source</span> dest</span><br></pre></td></tr></table></figure>
<p>Options 有很多可以选择：</p>
<ul>
<li>-a：此选项通常在<strong>复制目录时使用</strong>，它<strong>保留链接、文件属性</strong>，并<strong>复制目录下的所有内容</strong>。其作用等于dpR参数组合。</li>
<li>-d：复制时<strong>保留链接</strong>。这里所说的链接相当于Windows系统中的快捷方式。</li>
<li>-f：覆盖已经存在的目标文件而<strong>不给出提示</strong>。</li>
<li>-i：与-f选项相反，在<strong>覆盖目标文件</strong>之前<strong>给出提示</strong>，要求用户<strong>确认是否覆盖</strong>，回答”y”时目标文件将被覆盖。</li>
<li>-p：除复制文件的内容外，还把<strong>修改时间和访问权限</strong>也<strong>复制到新文件</strong>中。</li>
<li>-r：若给出的源文件是一个目录文件，此时将复制该目录下所有的子目录和文件。(recursion)</li>
<li>-l：不复制文件，<strong>只是生成链接文件</strong>。</li>
</ul>
<h4 id="rm"><a href="#rm" class="headerlink" title="rm"></a>rm</h4><p>rm 是删除命令</p>
<p><strong>语法</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm [options] name...</span><br></pre></td></tr></table></figure>
<p><strong>参数</strong>：</p>
<ul>
<li>-i 删除前逐一询问确认。</li>
<li>-f 即使原档案属性设为唯读，亦直接删除，无需逐一确认。</li>
<li>-r 将目录及以下之档案亦逐一删除。</li>
</ul>
<h4 id="mv命令"><a href="#mv命令" class="headerlink" title="mv命令"></a>mv命令</h4><p>用来为文件或目录改名、或将文件或目录移入其它位置。</p>
<p><strong>语法</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mv [options] <span class="built_in">source</span> dest</span><br><span class="line">mv [options] <span class="built_in">source</span>... directory</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">命令格式</th>
<th style="text-align:left">运行结果</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>mv source_file(文件) dest_file(文件)</code></td>
<td style="text-align:left">将源文件名 source_file 改为目标文件名 dest_file</td>
</tr>
<tr>
<td style="text-align:left"><code>mv source_file(文件) dest_directory(目录)</code></td>
<td style="text-align:left">将文件 source_file 移动到目标目录 dest_directory 中</td>
</tr>
<tr>
<td style="text-align:left"><code>mv source_directory(目录) dest_directory(目录)</code></td>
<td style="text-align:left">目录名 dest_directory 已存在，将 source_directory 移动到目录名 dest_directory 中；目录名 dest_directory 不存在则 source_directory 改名为目录名 dest_directory</td>
</tr>
<tr>
<td style="text-align:left"><code>mv source_directory(目录) dest_file(文件)</code></td>
<td style="text-align:left">出错</td>
</tr>
</tbody>
</table>
</div>
<h3 id="File-Display-Commands-cat-less-more-head-tail"><a href="#File-Display-Commands-cat-less-more-head-tail" class="headerlink" title="File Display Commands (cat, less, more, head, tail)"></a>File Display Commands (cat, less, more, head, tail)</h3><h4 id="cat命令"><a href="#cat命令" class="headerlink" title="cat命令"></a>cat命令</h4><p><strong>语法</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat [-AbeEnstTuv] [--help] [--version] fileName</span><br></pre></td></tr></table></figure>
<p>把 textfile1 的文档内容加上行号后输入 textfile2 这个文档里：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat -n textfile1 &gt; textfile2</span><br></pre></td></tr></table></figure>
<p>把 textfile1 和 textfile2 的文档内容加上行号（空白行不加）之后将内容附加到 textfile3 文档里：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat -b textfile1 textfile2 &gt;&gt; textfile3</span><br></pre></td></tr></table></figure>
<p>清空 /etc/test.txt 文档内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat &#x2F;dev&#x2F;null &gt; &#x2F;etc&#x2F;test.txt</span><br></pre></td></tr></table></figure>
<h4 id="less-more-命令"><a href="#less-more-命令" class="headerlink" title="less/more 命令"></a>less/more 命令</h4><p>less 与 more 类似，less 可以随意浏览文件，支持翻页和搜索，支持向上翻页和向下翻页。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">less [参数] 文件</span><br></pre></td></tr></table></figure>
<p><a href="https://www.runoob.com/linux/linux-comm-less.html" target="_blank" rel="noopener">https://www.runoob.com/linux/linux-comm-less.html</a></p>
<p>1、查看文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">less log2013.log</span><br></pre></td></tr></table></figure>
<p>2、ps查看进程信息并通过less分页显示</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef |less</span><br></pre></td></tr></table></figure>
<p>3、查看命令历史使用记录并通过less分页显示</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost test]# history | less</span><br><span class="line">22  scp -r tomcat6.0.32 root@192.168.120.203:&#x2F;opt&#x2F;soft</span><br><span class="line">23  cd ..</span><br><span class="line">24  scp -r web root@192.168.120.203:&#x2F;opt&#x2F;</span><br><span class="line">25  cd soft</span><br><span class="line">26  ls</span><br><span class="line">……省略……</span><br></pre></td></tr></table></figure>
<h4 id="head-tail"><a href="#head-tail" class="headerlink" title="head/tail"></a>head/tail</h4><p>head 命令可用于查看文件的开头部分的内容，有一个常用的参数 <strong>-n</strong> 用于显示行数，默认为 10，即显示 10 行的内容。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">head [参数] [文件]</span><br></pre></td></tr></table></figure>
<p><strong>参数：</strong></p>
<ul>
<li>-q 隐藏文件名</li>
<li>-v 显示文件名</li>
<li>-c&lt;数目&gt; 显示的字节数。</li>
<li>-n&lt;行数&gt; 显示的行数。</li>
</ul>
<p>tail 命令可用于查看文件的内容，有一个常用的参数 <strong>-f</strong> 常用于查阅正在改变的日志文件。</p>
<p><a href="https://www.runoob.com/linux/linux-comm-tail.html" target="_blank" rel="noopener">https://www.runoob.com/linux/linux-comm-tail.html</a></p>
<h3 id="Text-Processing-Commands"><a href="#Text-Processing-Commands" class="headerlink" title="Text Processing Commands"></a>Text Processing Commands</h3><p>接下来我们要介绍几种文字处理命令</p>
<h4 id="cut"><a href="#cut" class="headerlink" title="cut"></a>cut</h4><p>Linux cut命令用于显示每行从开头算起 num1 到 num2 的文字。</p>
<p>cut 命令从文件的每一行剪切字节、字符和字段并将这些字节、字符和字段写至标准输出。</p>
<p>如果不指定 File 参数，cut 命令将读取标准输入。必须指定 -b、-c 或 -f 标志之一。</p>
<p><strong>参数:</strong></p>
<ul>
<li>-b ：以字节为单位进行分割。这些字节位置将忽略多字节字符边界，除非也指定了 -n 标志。</li>
<li>-c ：以字符为单位进行分割。</li>
<li>-d ：自定义分隔符，默认为制表符。</li>
<li>-f ：与-d一起使用，指定显示哪个区域。</li>
<li>-n ：取消分割多字节字符。仅和 -b 标志一起使用。如果字符的最后一个字节落在由 -b 标志的 List 参数指示的<br>范围之内，该字符将被写出；否则，该字符将被排除</li>
</ul>
<p><strong>实例</strong></p>
<p>当你执行who命令时，会输出类似如下的内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ who</span><br><span class="line">rocrocket :0           2009-01-08 11:07</span><br><span class="line">rocrocket pts&#x2F;0        2009-01-08 11:23 (:0.0)</span><br><span class="line">rocrocket pts&#x2F;1        2009-01-08 14:15 (:0.0)</span><br></pre></td></tr></table></figure>
<p>如果我们想提取每一行的第3个字节，就这样：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ who|cut -b 3</span><br><span class="line">c</span><br><span class="line">c</span><br></pre></td></tr></table></figure>
<p>上面是对指令来讲的，对一个文件执行cut命令：</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/12.png" style="zoom: 120%;"></p>
<p>如果要截取多个字符，可以这样写：<code>cut -c1,3,5,7 result</code> </p>
<p>截取连续的几个字符： <code>cut -c1-5 result</code></p>
<p>截取两段字符： <code>cut -c1-3,6-8 result</code>  段与段之间用逗号隔开</p>
<p>如果操作类型是 <code>-d</code> 那么就是自定义分隔符，默认为制表符  ,我们以<code>/etc/passwd</code>为例：</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/13.png" style="zoom: 120%;"></p>
<p>发现每行的每个字段之间都是由冒号隔开的。那么我们可以这么写：<code>cut -d: -f 6 /etc/passwd</code> 就是说我们以<code>:</code> 为分隔符，并且跳过前面六个冒号，直接显示后面的内容，结果如下：</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/14.png" style="zoom: 120%;"></p>
<h4 id="awk"><a href="#awk" class="headerlink" title="awk"></a>awk</h4><p>AWK 是一种处理文本文件的语言，是一个强大的文本分析工具。</p>
<p><strong>语法</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">awk [选项参数] &#39;script&#39; var&#x3D;value file(s)</span><br><span class="line">或</span><br><span class="line">awk [选项参数] -f scriptfile var&#x3D;value file(s)</span><br></pre></td></tr></table></figure>
<h4 id="grep-and-egrep"><a href="#grep-and-egrep" class="headerlink" title="grep and egrep"></a>grep and egrep</h4><p><strong>awk、sed、grep更适合的方向：</strong></p>
<ul>
<li>grep 更适合单纯的查找或匹配文本</li>
<li>sed 更适合编辑匹配到的文本</li>
<li>awk 更适合格式化文本，对文本进行较复杂格式处理</li>
</ul>
<h4 id="sort-uniq"><a href="#sort-uniq" class="headerlink" title="sort_uniq"></a>sort_uniq</h4><h4 id="wc"><a href="#wc" class="headerlink" title="wc"></a>wc</h4><p>Linux wc命令用于计算字数。</p>
<p>利用wc指令我们可以计算文件的Byte数、字数、或是列数，若不指定文件名称、或是所给予的文件名为”-“，则wc指令会从标准输入设备读取数据。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wc [-clw][--help][--version][文件...]</span><br></pre></td></tr></table></figure>
<p><strong>参数</strong>：</p>
<ul>
<li>-c或—bytes或—chars 只显示Bytes数。</li>
<li>-l或—lines 显示行数。</li>
<li>-w或—words 只显示字数。</li>
<li>—help 在线帮助。</li>
<li>—version 显示版本信息。</li>
</ul>
<p>使用 wc统计，结果如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ wc testfile           # testfile文件的统计信息  </span><br><span class="line">3 92 598 testfile       # testfile文件的行数为3、单词数92、字节数598</span><br></pre></td></tr></table></figure>
<p>其中，3 个数字分别表示testfile文件的行数、单词数，以及该文件的字节数。</p>
<p>如果想同时统计多个文件的信息，例如同时统计testfile、testfile_1、testfile_2，可使用如下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wc testfile testfile_1 testfile_2   #统计三个文件的信息</span><br></pre></td></tr></table></figure>
<p>输出结果如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ wc testfile testfile_1 testfile_2  #统计三个文件的信息  </span><br><span class="line">3 92 598 testfile                    #第一个文件行数为3、单词数92、字节数598  </span><br><span class="line">9 18 78 testfile_1                   #第二个文件的行数为9、单词数18、字节数78  </span><br><span class="line">3 6 32 testfile_2                    #第三个文件的行数为3、单词数6、字节数32  </span><br><span class="line">15 116 708 总用量                    #三个文件总共的行数为15、单词数116、字节数708</span><br></pre></td></tr></table></figure>
<h3 id="Truncate-File-Size-truncate"><a href="#Truncate-File-Size-truncate" class="headerlink" title="Truncate File Size (truncate)"></a>Truncate File Size (truncate)</h3><h3 id="Combining-and-Splitting-Files"><a href="#Combining-and-Splitting-Files" class="headerlink" title="Combining and Splitting Files"></a>Combining and Splitting Files</h3>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE3/" class="post-title-link" itemprop="url">离散数学之图3</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-06-30 10:33:30" itemprop="dateCreated datePublished" datetime="2020-06-30T10:33:30+08:00">2020-06-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-09-06 09:11:02" itemprop="dateModified" datetime="2020-09-06T09:11:02+08:00">2020-09-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%9B%BE/" itemprop="url" rel="index"><span itemprop="name">图</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="离散数学之图3"><a href="#离散数学之图3" class="headerlink" title="离散数学之图3"></a>离散数学之图3</h1><h2 id="Euler-Paths-and-Circuits"><a href="#Euler-Paths-and-Circuits" class="headerlink" title="Euler Paths and Circuits"></a>Euler Paths and Circuits</h2><h3 id="Definition"><a href="#Definition" class="headerlink" title="Definition"></a>Definition</h3><p>定义：An <strong>Euler circuit</strong> in a graph G is a simple circuit containing every edge of G. An <strong>Euler path</strong> in G is a simple path containing every edge of G</p>
<p>欧拉环的定义就是一个简单环，边不能重复，且最后需要回到起点。 欧拉路径就是不要求一定回到起点，但是要求走过每一条边且不能重复</p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE3/1.jpg" style="zoom:50%;"></p>
<p>向上面三幅图，H1既不是欧拉环也不是欧拉路径；H2有一个欧拉环；H3有一条欧拉路径</p>
<p>对于一副图来说，我们如何判断其有没有欧拉环或者欧拉路径呢？</p>
<p><strong>对于欧拉环:</strong>  每一个节点的度必然是偶数。因为每一个点都有几进几出。如果发现了一个度为奇数的节点，那么这张图必然不可能是欧拉环</p>
<p><strong>对于欧拉路径: </strong> 中间节点的度必须是偶数，但是起点和终点的度可以是奇数。如果是起点，出度比入度多1；如果是终点，入度比出度多1</p>
<p>戈尼斯堡七桥问题，就是一个典型的一笔画问题。</p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE3/2.jpg" style="zoom:50%;"></p>
<p>对于抽象出来的图，所有顶点(4个顶点)的度都是奇数。所以必然不存在欧拉环或欧拉路径。</p>
<p>对于无向图，如果度数为奇数的顶点为0个，那么可能存在欧拉环；如果是2个，那么可能存在欧拉路径；如果为4，6…那么必然不存在欧拉环或者欧拉路径</p>
<h3 id="Necessary-and-sufficient-for-Euler-circuit"><a href="#Necessary-and-sufficient-for-Euler-circuit" class="headerlink" title="Necessary and sufficient for Euler circuit"></a>Necessary and sufficient for Euler circuit</h3><p>A connected multigraph with at least two vertices has an Euler circuit if and only if each of its vertices has even degree.</p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE3/3.jpg"></p>
<h3 id="Necessary-and-sufficient-for-Euler-path"><a href="#Necessary-and-sufficient-for-Euler-path" class="headerlink" title="Necessary and sufficient for Euler path"></a>Necessary and sufficient for Euler path</h3><p>A connected multigraph has an Euler path but not an Euler circuit if and only if it has exactly two vertices of odd degree.</p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE3/4.jpg" style="zoom:50%;"></p>
<p>比如G1，有两个奇数度的顶点，可以有欧拉路径；G2，有两个奇数度的顶点，可以有欧拉路径，G3，有六个奇数度顶点的路径，所以不存在欧拉环或者欧拉路径</p>
<h2 id="Hamilton-Paths-and-Circuits"><a href="#Hamilton-Paths-and-Circuits" class="headerlink" title="Hamilton Paths and Circuits"></a>Hamilton Paths and Circuits</h2><h3 id="Definition-1"><a href="#Definition-1" class="headerlink" title="Definition"></a>Definition</h3><p>A simple path in a graph G that passes through every vertex exactly once is called a Hamilton path, and a simple circuit in a graph G that passes through every vertex exactly once is called a Hamilton circuit.</p>
<p>汉密尔顿路径和汉密尔顿环只要求顶点全部走过，边不一定要全部都走</p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE3/5.jpg" style="zoom:50%;"></p>
<p>哈密尔顿环：<strong>每一个顶点的度至少为2</strong>.</p>
<p>哈密尔顿路径：所以如果度为1的顶点超过两个，那么这个图必然不可能存在哈密尔顿路径。小于等于2会存在哈密尔顿路径</p>
<h3 id="Conditions-for-the-existence"><a href="#Conditions-for-the-existence" class="headerlink" title="Conditions for the existence"></a>Conditions for the existence</h3><p>如果一个简单图的节点大于等于3，且每个节点的度至少是n/2.那么G就存在一个哈密尔顿环。</p>
<p>如果一个简单图的节点大于等于3，而且从中任意选择两个节点u和v，如果$deg(u)+deg(v)\geq  n$ 成立,那么G中就存在一个哈密尔顿环</p>
<p>但是这并不能绝对说明没有哈密尔顿环存在，只能说了满足条件的一定存在。所以当一个图不满足狄拉克-奥勒定理的时候，我们还需要手动画一画</p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE3/1.png"></p>
<h2 id="Planar-Graphs-平面图"><a href="#Planar-Graphs-平面图" class="headerlink" title="Planar Graphs 平面图"></a>Planar Graphs 平面图</h2><h3 id="Definition-2"><a href="#Definition-2" class="headerlink" title="Definition"></a>Definition</h3><p>A graph is called planar if it can be drawn in the plane without any edges crossing (where a crossing of edges is the intersection of the lines or arcs representing them at a point other than their common endpoint).</p>
<p>平面图就是边和边没有交叉的图，我们可以对一些图进行变换，不改变图的结构来把原来交叉的图变成平面图</p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE3/2.png"></p>
<p>如何来判断一个图是否为平面图呢？</p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE3/3.png"></p>
<p>首先我们把四个点拿过来。$v<em>1,v_2,v_4,v_5$  这四个点构成了一个平面图。现在我们把$v_3$加进来，$v_3$需要和$v_4,v_5$相连。这时候我们把$v_6$放进来，$v_6$ 只能放在 $R_1,R</em>{21},R_{22}$这三个区域当中</p>
<p>如果在 $R_1$当中，我要把$v_6,v_3$相连那么必然线与线要相交。以此类推，$v_6$ 无论在哪个区域，必然不可能是平面图。以此类推， K33这个二分图和以K33为子图的图必然不可能是平面图</p>
<p>所以我们要利用红黑点来画出二分图，再看看二分图中是否包含K3,3或者K5，以及和他们同胚的图(两个点之间可以通过第三个点连接).</p>
<h3 id="Euler’s-Formula"><a href="#Euler’s-Formula" class="headerlink" title="Euler’s Formula"></a>Euler’s Formula</h3><h4 id="定理及证明"><a href="#定理及证明" class="headerlink" title="定理及证明"></a>定理及证明</h4><p>Let G be a connected planar simple graph with e edges and v vertices. Let r be the number of regions in a planar representation of G. Then $r = e - v + 2$.</p>
<p>r理解成面数，比如 长方体 ，6个面8个顶点12条棱，r=6,v=8,e=12；再如 正四面体，4个面4个顶点6条棱，r=4,v=4,e=6</p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE3/4.png"></p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE3/5.png"></p>
<h4 id="推论I"><a href="#推论I" class="headerlink" title="推论I"></a>推论I</h4><p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE3/6.png"></p>
<h4 id="推论II"><a href="#推论II" class="headerlink" title="推论II"></a>推论II</h4><p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE3/7.png"></p>
<h4 id="推论III"><a href="#推论III" class="headerlink" title="推论III"></a>推论III</h4><p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE3/8.png"></p>
<h3 id="Homeomorphic-同胚"><a href="#Homeomorphic-同胚" class="headerlink" title="Homeomorphic 同胚"></a>Homeomorphic 同胚</h3><p>If a graph is planar, so will be any graph obtained by removing an edge ${u,v}$ and adding a new vertex w together with edges${u,w}$ and ${w,v}$. Such an operation is called an <strong>elementary subdivision</strong>. The graphs$ G1 = (V_1,E_1) $ and $ G2 = (V_2, E_2)$ are called <strong>homeomorphic </strong>if they can be obtained from the same graph by a sequence of elementary subdivisions.</p>
<p>加上了几个顶点或者减去几个顶点，把两幅图变成一幅图，那么这两幅图就是同胚的。</p>
<p>加或减顶点不会影响图的结构</p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE3/6.jpg" style="zoom:50%;"></p>
<p>有一种让你看某张图是否为K3,3同胚的题形。要注意K3,3 可以是千变万化的。下面这个样子的图型也是K3,3!</p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE3/13.png" style="zoom:50%;"></p>
<p>K5 就类似于五角星勋章</p>
<p>还有一个判断的就是根据度来判断，K5的所有顶点的度至少为4，$K_{33}$的所有顶点的度至少为3</p>
<p>注意，同胚并不是说两个点之间有path即可</p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE3/14.png" style="zoom:150%;"></p>
<p>这个图并不是和K3,3 同胚的！</p>
<h4 id="Kuratowski’s-theorem"><a href="#Kuratowski’s-theorem" class="headerlink" title="Kuratowski’s theorem"></a>Kuratowski’s theorem</h4><p>一个图如果不是平面图，<strong>当且仅当它有一个子图是和K5或者K33同胚的</strong></p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE3/9.png"></p>
<h2 id="Graph-Coloring"><a href="#Graph-Coloring" class="headerlink" title="Graph Coloring"></a>Graph Coloring</h2><h4 id="Problem-formulation"><a href="#Problem-formulation" class="headerlink" title="Problem formulation"></a>Problem formulation</h4><p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE3/10.png"></p>
<h4 id="Denitions"><a href="#Denitions" class="headerlink" title="Denitions"></a>Denitions</h4><p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE3/11.png"></p>
<h3 id="The-four-color-theorem"><a href="#The-four-color-theorem" class="headerlink" title="The four color theorem"></a>The four color theorem</h3><p><strong>如果这个图是平面图，那么最小着色的色数不会超过4</strong></p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE3/12.png"></p>
<p>K5的话，最小着色为5，C5只要3个颜色，C6只要2个颜色</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/" class="post-title-link" itemprop="url">离散数学之图2</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-06-30 10:33:23" itemprop="dateCreated datePublished" datetime="2020-06-30T10:33:23+08:00">2020-06-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-08-16 19:29:04" itemprop="dateModified" datetime="2020-08-16T19:29:04+08:00">2020-08-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%9B%BE/" itemprop="url" rel="index"><span itemprop="name">图</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="离散数学之图2"><a href="#离散数学之图2" class="headerlink" title="离散数学之图2"></a>离散数学之图2</h1><h2 id="Representing-Graphs"><a href="#Representing-Graphs" class="headerlink" title="Representing Graphs"></a>Representing Graphs</h2><h3 id="Adjacency-Lists"><a href="#Adjacency-Lists" class="headerlink" title="Adjacency Lists"></a>Adjacency Lists</h3><p><a href="https://jasonxqh.github.io/2020/05/09/邻接矩阵与邻接表/#邻接表">邻接表</a></p>
<p><strong>Way i:</strong> One way to represent a graph without multiple edges is to list all the edges of this graph.<br><strong>Way ii:</strong> Another way to represent a graph with no multiple edges is to use adjacency lists, which specify the vertices that are adjacent to each vertex of the graph.</p>
<p>邻接列表是把一个点的所有邻接点都列出来</p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/2.jpg" style="zoom: 67%;"></p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/1.jpg" style="zoom: 67%;"></p>
<p>我们可以用链表或者hashmap嵌套数组的方式存储这张图。</p>
<h3 id="Adjacency-Matrices"><a href="#Adjacency-Matrices" class="headerlink" title="Adjacency Matrices"></a>Adjacency Matrices</h3><p><a href="https://jasonxqh.github.io/2020/05/09/邻接矩阵与邻接表/#邻接矩阵">邻接矩阵</a></p>
<p>Adjacency list VS. adjacency matrix</p>
<ul>
<li>When a <strong>graph is sparse</strong>(这张图很稀疏，边少), it is usually preferable to use adjacency lists rather than an adjacency matrix to represent the graph.<ul>
<li>如果这张图很稀疏，那么如果用邻接矩阵的话空间消耗很大</li>
</ul>
</li>
<li>The adjacency matrix of a sparse graph is a sparse matrix, that is, a matrix with few nonzero entries, and there are special techniques for representing, and computing with, sparse matrices.<ul>
<li>对于稀疏图，我们可以采用稀疏矩阵的方式，也就是只保留1，不保留0</li>
</ul>
</li>
<li>Suppose that a simple graph is dense, we compare the complexity of determining whether the possible edge $(v_i , v_j)$ is present. <ul>
<li>For case of adjacency matrix, we only need to examine the $(i , j)$-th entry in the matrix;</li>
<li>For case of adjacency list, we need to search the list of vertices adjacent to either $v_i$ or $v_j$ in $O(|V|)$.</li>
<li>如果要看这个有向图顶点的入度，那么需要扫遍所有的邻接表或者建立你邻接表</li>
</ul>
</li>
</ul>
<p>邻接矩阵的优缺点</p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/3.png"></p>
<p>邻接表的优缺点</p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/4.png"></p>
<h3 id="Incidence-Matrices-连接矩阵"><a href="#Incidence-Matrices-连接矩阵" class="headerlink" title="Incidence Matrices 连接矩阵"></a>Incidence Matrices 连接矩阵</h3><p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/5.png"></p>
<p>邻接矩阵是点和点之间的关系。但是连接矩阵式点和边的关系</p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/3.jpg" style="zoom: 67%;"></p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/4.jpg" style="zoom: 67%;"></p>
<p>这个矩阵上，一列只存在两个1或者一个1，一行上可能存在多个1。因为列是边，一条边只可能链接两个顶点或者自环，如果是自环，那么只有一个1了。</p>
<p>这个矩阵也是很稀疏的，但是用它可以来构造邻接矩阵。</p>
<h3 id="Random-walk-and-Laplacian"><a href="#Random-walk-and-Laplacian" class="headerlink" title="Random walk and Laplacian"></a>Random walk and Laplacian</h3><h4 id="Random-Walk"><a href="#Random-Walk" class="headerlink" title="Random Walk"></a>Random Walk</h4><p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/6.png"></p>
<p>分子在溶液当中做布朗运动，这个过程叫做马尔可夫随机过程。这个过程对于溶质分子来说是在一个连续的空间中做随机游走。现在我们要讲的是离散的马尔可夫链。</p>
<p>比如说我们网上冲浪，点击一个网页会有很多子页面出现，子子孙孙无穷尽也。这个就相当于一个web Graph,我们就在这张图中随机游走。</p>
<p>利用随机游走我们可以判断一个人是否为小偷。如果一个人在公交图上随机游走，那么他有很大嫌疑是一个小偷</p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/7.png" style="zoom: 100%;"></p>
<p>假设x走到y的概率都已一样的，那么$P(y|x) =  \frac{1}{d(x)}$ 。我们定义D是一个对角矩阵。 P就是一个概率转移矩阵。概率转移矩阵一行加起来的数值一定等于1</p>
<h4 id="Combinatorial-Lapacian-组合拉普拉斯"><a href="#Combinatorial-Lapacian-组合拉普拉斯" class="headerlink" title="Combinatorial Lapacian 组合拉普拉斯"></a>Combinatorial Lapacian 组合拉普拉斯</h4><p>组合拉不拉斯矩阵，这个矩阵等于对角矩阵-邻接矩阵，(对角矩阵的元素就是这个顶点的度)</p>
<p>0一定是这个矩阵的特征值。每一行的元素加起来等于0(对于简单图来说) ，对应的特征向量就等于v0 </p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/8.png" style="zoom: 100%;"></p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/5.jpg" style="zoom: 67%;"></p>
<p>这个拉普拉斯矩阵可以帮助我们正则化</p>
<h4 id="Normalized-Laplacian-标准化拉普拉斯"><a href="#Normalized-Laplacian-标准化拉普拉斯" class="headerlink" title="Normalized Laplacian 标准化拉普拉斯"></a>Normalized Laplacian 标准化拉普拉斯</h4><p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/9.png" style="zoom: 100%;"></p>
<h2 id="isomorphism-of-Graphs-图的同构"><a href="#isomorphism-of-Graphs-图的同构" class="headerlink" title="isomorphism of Graphs 图的同构"></a>isomorphism of Graphs 图的同构</h2><p>The simple graphs $G1 = (V1; E1) $and $G2 = (V2; E2) $are isomorphic if there exists a one to one and onto function f from  $V1 $ to $V2$ with the property that a and b are adjacent in $ G1$ if and only if $ f (a)$ and $f (b)$ are adjacent in  $ G2$, for all $a$ and $b$ in $V_1$. Such a function $f $is called an isomorphism.</p>
<p>When two simple graphs are isomorphic, there is a one-to-one correspondence between vertices of the two graphs that preserves the adjacency relationship.</p>
<p>同构，说明V1到V2之间存在一个一一对应的满射，也就是说如果我不看一个顶点的标签，只看边和顶点的结构，那么这两幅图其实是一样的 简单图的同构关系是等价的 。 G1和自己同构，同构具有传递性</p>
<p>下面，如果不看标签，那么G，H其实是一样的。所以G、H是同构的</p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/10.png" style="zoom: 100%;"></p>
<p>利用函数来找出一对一的关系，是很难的。我们如何进行判断？ 我们要看图中的顶点是否有相同的顶点数，相同的边数，相同顶点的度。</p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/11.png" style="zoom: 100%;"></p>
<p>又比如说这幅图：我们可以去掉一些同构的顶点，判断剩下来的顶点是否同构。像下面这种，去掉四个顶点后发现不是同构的。</p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/12.png" style="zoom: 100%;"></p>
<p>有没有更有效地方法判断是否同构呢？也就是说，我们通过画两个图的邻接矩阵，然后通过行列变换，一定能把他们化成一个矩阵。比如下图的 $A_G$和$A_H$ 它们是同构的</p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/13.png" style="zoom: 100%;"></p>
<p>如果是有向图，怎么判断是否同构？</p>
<ul>
<li>The same number of vertices;</li>
<li>The same number of edges;</li>
<li>The same degree for the same vertex.</li>
<li>The path and distance between vertices</li>
</ul>
<p>我们列出每一个点的入度和出度。如果每个两个图都能找到一一对应的入度和出度的顶点，我们就说这两张图是同构的</p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/28.png" style="zoom: 150%;"></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>$Degree^-$- u</th>
<th>$Degree^+$-u</th>
<th>$Degree^-$- v</th>
<th>$Degree^+$-v</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>2</td>
<td>1</td>
<td>2</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td>2</td>
<td>3</td>
<td>1</td>
<td>3</td>
<td>2</td>
</tr>
<tr>
<td>1</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>3</td>
</tr>
<tr>
<td>2</td>
<td>0</td>
<td>2</td>
<td>3</td>
<td>4</td>
</tr>
</tbody>
</table>
</div>
<p> 我们发现节点都是能一一对应的，说明这两个图是同构的</p>
<h2 id="Connectivity-Vertex-amp-Edge"><a href="#Connectivity-Vertex-amp-Edge" class="headerlink" title="Connectivity(Vertex&amp;Edge)"></a>Connectivity(Vertex&amp;Edge)</h2><p>首先我们要分清楚 Walk, Trail, Circuit, Path ,和Cycle的区别</p>
<p>walk就是想怎么走就怎么走，每条边每个顶点都是可以重复的。</p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/30.png" style="zoom: 150%;"></p>
<p>Trail就是顶点可以重复，但是边是不能重复的</p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/29.png" style="zoom: 170%;"></p>
<p>Circuit就是封闭的Trail，也就是说Circuit也是可以重复顶点但是不能重复边</p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/31.png" style="zoom: 170%;"></p>
<p>Path就是既不可以重复顶点、又不能重复边的</p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/32.png" style="zoom: 170%;"></p>
<p>Close 就是封闭的Path，即不能重复顶点也不能重复边</p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/33.png" style="zoom: 170%;"></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>1代表可重复，0代表不可重复</th>
<th>Vertex</th>
<th>Edge</th>
</tr>
</thead>
<tbody>
<tr>
<td>Walk</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Trail</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>Circuit(Closed Trail)</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>Path</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>Cycle(Closed Path)</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
</div>
<h3 id="Paths"><a href="#Paths" class="headerlink" title="Paths"></a>Paths</h3><h4 id="Paths-in-undirected-graphs"><a href="#Paths-in-undirected-graphs" class="headerlink" title="Paths in undirected graphs"></a>Paths in undirected graphs</h4><p>​    Let n be a nonnegative integer and G a directed graph. A path of length $n$ from $u$ to $v$ in G is a sequence of $n$ edges $e<em>1,e_2,e_3,e_4,e_n$  of G such that $e_i$ is associated with $(x</em>{i-1},x_i)$for $i = 1, 2,…, n$ where $x_0 = u$ and $x_n = v$<br>​    When there are no multiple edges in the directed graph, this path is denoted by its vertex sequence$ x_0, x_1, x_2, … x_n$ A path of length greater than zero that begins and ends at the same vertex is called a circuit or cycle.</p>
<p>​    A path or circuit is called simple if it does not contain the same edge more than once. 一个<strong>simple circuit</strong>除了顶点可以重复，但是边是不能重复的</p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/6.jpg" style="zoom: 50%;"></p>
<p>In the simple graph, a， d， c， f ， e is a simple path of length 4, because {a，d}， {d， c} , {c,f} and {f , e}  are all edges.</p>
<p>However $ d, e, c, a $is not a path,b ecause {e,c} is not an edge.<br>Note that $b, c, f , e, b$ is a circuit of length 4 because {b,c}, {c, f }, {f ,e}, and {e,g} are edges, and this path begins and ends at b.<br>The path $a, b, e, d, a, b$, which is of length 5, is not simple because it contains the edge {a,b} twice.</p>
<h4 id="Paths-in-directed-graphs"><a href="#Paths-in-directed-graphs" class="headerlink" title="Paths in directed graphs"></a>Paths in directed graphs</h4><p>​    Let n be a nonnegative integer and G an undirected graph. A pathof length n from u to v in G is a sequence of n edges e $e<em>1,e_2,e_3,e_4,e_n$   of G for which there exists a sequence $x_0 = u, x_1 … x</em>{n-1}, x<em>n = v$ of vertices such that ei has, for $i = 1….,n $ the endpoints$ x</em>{i-1} $and $x<em>i$ .<br>​    When the graph is simple, we denote this path by its vertex sequence $x_0,x_1,…x_n $(because listing these vertices uniquely determines the path).<br>​    The path is a circuit if it begins and ends at the same vertex, that is, if $u = v$, and has length greater than zero. The path or circuit is said to pass through the vertices$ x_1,x_2,…x</em>{n-1} $or traverse the edges $e_1….. e_n$<br>​    A path or circuit is simple if it does not contain the same edge more than once.</p>
<p><strong>Example:</strong></p>
<p><strong>Paths in acquaintanceship graphs</strong><br>In an acquaintanceship graph there is a path between two people if there is a chain of people linking these people, where two people adjacent in the chain know one another.<br><strong>Paths in collaboration graphs</strong><br>In a collaboration graph, two people a and b are connected by a path when there is a sequence of people starting with a and ending with b such that the endpoints of each edge in the path are people who have collaborated.</p>
<h3 id="Connectedness-in-undirected-graphs-无向连通图"><a href="#Connectedness-in-undirected-graphs-无向连通图" class="headerlink" title="Connectedness in undirected graphs 无向连通图"></a>Connectedness in undirected graphs 无向连通图</h3><p>无向图中如果任意两个顶点都有一条path的话，那么这个无向图就是连通的</p>
<p>An undirected graph is called connected if there is a path between every pair of distinct vertices of the graph.<br>An undirected graph that is not connected is called disconnected.<br><strong>The first graph </strong>is connected, because for every pair of distinct vertices there is a path between them.<br>However, <strong>the second graph</strong> is not connected. For instance, there is no path in the graph between vertices a and d.</p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/7.jpg" style="zoom: 50%;"></p>
<h4 id="性质："><a href="#性质：" class="headerlink" title="性质："></a>性质：</h4><p>There is a simple path between every pair of distinct vertices of a connected undirected graph. </p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/14.png"></p>
<h4 id="连通分量"><a href="#连通分量" class="headerlink" title="连通分量"></a>连通分量</h4><p>A connected component of a graph G is a connected subgraph of G that is not a proper subgraph of another connected subgraph of G. 连通分量是最大的连通子图。</p>
<p>That is, a connected component of a graph G is a maximal connected subgraph of G.</p>
<p>The graph H is the union of three disjoint connected subgraphs $H1,H2,H3$These three subgraphs are the connected components of H.</p>
<p><a href="https://jasonxqh.github.io/2020/05/15/连通分量/">连通分量</a></p>
<h4 id="Connected-components-of-call-graphs"><a href="#Connected-components-of-call-graphs" class="headerlink" title="Connected components of call graphs"></a>Connected components of call graphs</h4><p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/15.png" style="zoom: 100%;"></p>
<h3 id="How-Connected-is-a-Graph"><a href="#How-Connected-is-a-Graph" class="headerlink" title="How Connected is a Graph?"></a>How Connected is a Graph?</h3><h4 id="Network-robustness"><a href="#Network-robustness" class="headerlink" title="Network robustness"></a>Network robustness</h4><p> robustness(鲁棒性)即网络遭受到攻击的时候仍然能保持连通的能力</p>
<p><strong>Motivations</strong></p>
<ul>
<li>In a phone call network, dense and frequent calls among users in the network reduce the likelihood of churn. </li>
<li>In IP networks, service providers therefore aim to monitor,manage and optimize their networks to keep their networks robust. 路由器相互之间转发数据包，如果区域之间只有一个路由，那么路由收到攻击的时候网络就会宕掉</li>
<li>In social platforms, some external or internal events may be detected from the burst of user interaction networks. 根据网络链接的状况，判断是否有事情发生</li>
</ul>
<p><strong>Existing measurements</strong> 测量方法</p>
<ul>
<li>Node connectivity and edge connectivity</li>
<li>Cheeger ratio, vertex expansion, and edge expansion</li>
<li>Algebraic connectivity and R-energy</li>
</ul>
<h4 id="Cut-and-bridge"><a href="#Cut-and-bridge" class="headerlink" title="Cut and bridge"></a>Cut and bridge</h4><p>Sometimes the removal from a graph of a vertex and all incident edges produces a subgraph with more connected components. Such vertices are called cut vertices (or articulation points). Analogously, an edge<br>whose removal produces a graph with more connected components than in the original graph is called a cut edge or bridge. Note that not all graphs have cut vertices, e.g.,  $ K_n $for$n \geq 3.$ </p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/9.jpg" style="zoom: 50%;"></p>
<p>比如这张图，我如果去掉 {c,e} 这座桥， 那么两个子图就不再连通，所以这张图的 robustness就比较差</p>
<p>鲁棒性最好的就是<strong>完全图</strong></p>
<h4 id="Connectivity"><a href="#Connectivity" class="headerlink" title="Connectivity"></a>Connectivity</h4><p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/16.png" style="zoom: 80%;"></p>
<h4 id="Expander-robustness"><a href="#Expander-robustness" class="headerlink" title="Expander robustness"></a>Expander robustness</h4><p>Edge boundary 和 Vertex boundary</p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/17.png" style="zoom: 80%;"></p>
<h4 id="Laplacian-robustness"><a href="#Laplacian-robustness" class="headerlink" title="Laplacian robustness"></a>Laplacian robustness</h4><p>对于拉普拉斯矩阵，我们去度量它的特征值的方差。方差越大，那么说明顶点之间相连的状况相差很大。方差等于0 ，那么说明每一个顶点都至少和另外n-1个顶点相连，也就是一个Click</p>
<p>我们不需要把特征值算出来，我们用下面的公式来，扫描一遍即可</p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/18.png" style="zoom: 80%;"></p>
<h4 id="Example-of-network-robustness-metrics"><a href="#Example-of-network-robustness-metrics" class="headerlink" title="Example of network robustness metrics"></a>Example of network robustness metrics</h4><p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/19.png" style="zoom: 80%;"></p>
<h4 id="R-energy-application-I"><a href="#R-energy-application-I" class="headerlink" title="R-energy: application I"></a>R-energy: application I</h4><p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/20.png" style="zoom: 80%;"></p>
<h4 id="R-energy-application-II"><a href="#R-energy-application-II" class="headerlink" title="R-energy: application II"></a>R-energy: application II</h4><p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/21.png" style="zoom: 80%;"></p>
<h3 id="Connectedness-in-Directed-Graphs"><a href="#Connectedness-in-Directed-Graphs" class="headerlink" title="Connectedness in Directed Graphs"></a>Connectedness in Directed Graphs</h3><h4 id="Strongly-and-weakly-connected-强连通和弱连通"><a href="#Strongly-and-weakly-connected-强连通和弱连通" class="headerlink" title="Strongly and weakly connected 强连通和弱连通"></a>Strongly and weakly connected 强连通和弱连通</h4><p>强连通和弱连通只对于连通图来说，强连通是既能过去，又能回来；弱连通只能过去，无法回来</p>
<p>A directed graph is strongly connected if there is a path from a to b and from b to a whenever a and b are vertices in the graph.<br>A directed graph is weakly connected if there is a path between every two vertices in the underlying undirected graph.</p>
<h4 id="Giant-component"><a href="#Giant-component" class="headerlink" title="Giant component"></a>Giant component</h4><p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/22.png" style="zoom: 80%;"></p>
<h4 id="Web-giant-component"><a href="#Web-giant-component" class="headerlink" title="Web giant component"></a>Web giant component</h4><p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/23.png" style="zoom: 80%;"></p>
<h3 id="Paths-and-Isomorphism"><a href="#Paths-and-Isomorphism" class="headerlink" title="Paths and Isomorphism"></a>Paths and Isomorphism</h3><p>path和同构的关系，如果两个图是同构的，那么两个顶点之间一定有相同的顶点和环的。如下图，v1,v2,v3</p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/24.png" style="zoom: 80%;"></p>
<h3 id="Counting-Paths-Between-Vertices"><a href="#Counting-Paths-Between-Vertices" class="headerlink" title="Counting Paths Between Vertices"></a>Counting Paths Between Vertices</h3><p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/25.png" style="zoom: 80%;"></p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/26.png" style="zoom: 80%;"></p>
<p><img src="/2020/06/30/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE2/27.png" style="zoom: 80%;"></p>
<p>如何计算节点之间的path条数? 我们看到 A的几次幂即为长度为几的Path，但这里的Path包含Trail和Walk，可以是重复的顶点和边。上图中有 $A^4$ 那就是在图上那些顶点之间有path长度为4的路径。比如a和a、d之间就有8条长度为4的path。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/06/29/reactHooksWithD3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/29/reactHooksWithD3/" class="post-title-link" itemprop="url">reactHooksWithD3</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-06-29 21:29:26 / Modified: 21:32:30" itemprop="dateCreated datePublished" datetime="2020-06-29T21:29:26+08:00">2020-06-29</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Using-ReactHooks-With-D3"><a href="#Using-ReactHooks-With-D3" class="headerlink" title="Using ReactHooks With D3"></a>Using ReactHooks With D3</h1><blockquote>
<p>教程: <a href="https://www.youtube.com/watch?v=hR8xtl_IbCw&amp;list=PLDZ4p-ENjbiPo4WH7KdHjh_EMI7Ic8b2B&amp;index=3&amp;pbjreload=101" target="_blank" rel="noopener">https://www.youtube.com/watch?v=hR8xtl_IbCw&amp;list=PLDZ4p-ENjbiPo4WH7KdHjh_EMI7Ic8b2B&amp;index=3&amp;pbjreload=101</a></p>
<p>源码：<a href="https://github.com/muratkemaldar/using-react-hooks-with-d3" target="_blank" rel="noopener">https://github.com/muratkemaldar/using-react-hooks-with-d3</a></p>
</blockquote>
<h3 id="The-Basics"><a href="#The-Basics" class="headerlink" title="The Basics"></a>The Basics</h3><p>在过去，我们必须依赖于 class component 和 life circle method 来进行D3的绘图。但是在React引入了hooks之后，我们的选择就不仅仅是class component了。我们可以利用 React 中的Hooks函数配合D3 来进行绘图。</p>
<p>首先我们来介绍我们需要用到的hooks</p>
<h4 id="useState"><a href="#useState" class="headerlink" title="useState"></a><code>useState</code></h4><p><a href="https://zhuanlan.zhihu.com/p/92349623" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/92349623</a></p>
<h4 id="useRef"><a href="#useRef" class="headerlink" title="useRef"></a><code>useRef</code></h4><p> <a href="https://blog.csdn.net/weixin_43720095/article/details/104966218" target="_blank" rel="noopener">https://blog.csdn.net/weixin_43720095/article/details/104966218</a></p>
<p>ref是React提供的用来操纵React组件实例或者DOM元素的接口。如果你将 <code>ref</code> 对象以 <code>&lt;div ref={myRef} /&gt;</code> 形式传入组件，则无论该节点如何改变，React 都会将 <code>ref</code> 对象的 <code>.current</code> 属性设置为相应的 DOM 节点。</p>
<p><code>useRef</code> 返回一个可变的 ref 对象，其 <code>.current</code> 属性被初始化为传入的参数（<code>initialValue</code>）。返回的 ref 对象在组件的整个生命周期内保持不变。<br>本质上，<code>useRef</code> 就像是可以在其 .current 属性中保存一个可变值的“盒子”。<br>然而，<code>useRef()</code>比 <code>ref</code> 属性更有用。它可以很方便地保存任何可变值，其类似于在 class 中使用实例字段的方式。<br>这是因为它创建的是一个普通 <code>Javascript</code> 对象。而 <code>useRef</code>()   和自建一个 <code>{current: …}</code> 对象的唯一区别是，<code>useRef</code> 会在每次渲染时返回同一个 ref 对象。</p>
<p><code>useRef</code> 有什么作用呢，其实很简单，总共有三种用法</p>
<ul>
<li>作用于Dom元素</li>
<li>获取子组件的实例(只有类组件可用)</li>
<li>在函数组件中的一个全局变量，不会因为重复 render 重复申明， 类似于类组件的 this.xxx</li>
</ul>
<h4 id="useEffect"><a href="#useEffect" class="headerlink" title="useEffect"></a><code>useEffect</code></h4><p><a href="http://www.ptbird.cn/react-hoot-useEffect.html" target="_blank" rel="noopener">http://www.ptbird.cn/react-hoot-useEffect.html</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/84697185" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/84697185</a></p>
<p>Effect Hook 可以让你能够在 Function 组件中执行副作用（side effects）：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Example</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>);</span><br><span class="line">  <span class="comment">// Similar to componentDidMount and componentDidUpdate:</span></span><br><span class="line">  <span class="comment">// 类似于 componentDidMount 和 ComponentDidUpdate</span></span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// Update the document title using the browser API</span></span><br><span class="line">    <span class="built_in">document</span>.title = <span class="string">`You clicked <span class="subst">$&#123;count&#125;</span> times`</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;You clicked &#123;count&#125; times&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">      &lt;button onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt;</span></span><br><span class="line"><span class="regexp">        Click me</span></span><br><span class="line"><span class="regexp">      &lt;/</span>button&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<p>上面代码看过很多次了，是 React 文档中 Hook 部分一直使用的计数器示例，但是多了个新的功能：把文档标题设置为包含点击次数的自定义消息。而这就是一个副作用。</p>
<p>数据获取，设置订阅或者手动直接更改 React 组件中的 DOM 都属于副作用。有的人习惯成这种行为为 <code>effects</code>，我是比较习惯叫 <code>side effects</code> 也就是副作用的， 这是个概念，需要在 React 必须习惯的概念。</p>
<p>如果熟悉 React 类声明周期方法，可以把 <code>useEffect</code> Hook 视作 <code>componentDidMount</code>、<code>componentDidUpdate</code> 和 <code>componentWillUnmount</code> 的组合体。</p>
<p><code>useEffect</code>的第二个参数可选 ，可用于定义其依赖的所有变量。如果其中一个变量发生变化，则useEffect会再次运行。如果包含变量的数组为空，则在更新组件时useEffect不会再执行，因为它不会监听任何变量的变更。。</p>
<p><strong>使用<code>useEffect</code>，不要调用函数层次太多，代码应该一眼看清楚哪些函数会被useEffect调用</strong>。</p>
<p>React+D3 with Hooks :</p>
<p>首先我们在一个function component当中引入 state，是一个数组<br>然后我们创建一个ref对象，这个对象是一个<code>svg</code></p>
<p>在然后我们使用<code>useEffect</code> Hooks也就是给这个<code>svg</code>对象添加一些副作用，这个副作用就是渲染我们的图元。在<code>useEffect</code> 当中，我们把<code>svgRef</code>中的current属性(就是一个<code>svg</code>对象)抽象出来称为<code>svg</code>，我么可以对这个svg添加属性，这样就可以渲染出来了。</p>
<p>两个按钮的原理： 点击 Update Data的话，利用<code>setData</code>，把data中所有的值全部加上5. 点击Filter Data的时候，筛选出小于等于25的值，然后通过<code>setData</code>更新data，因为更新过后的data和<code>useEffect</code>中的data数组不一样，所以<code>useEffect</code>会被重新调用，从而实现更新效果</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useRef, useEffect, useState &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">"./App.css"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; select &#125; <span class="keyword">from</span> <span class="string">"d3"</span>;</span><br><span class="line"><span class="keyword">const</span> App = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [data, setData] = useState([<span class="number">25</span>, <span class="number">30</span>, <span class="number">45</span>, <span class="number">60</span>, <span class="number">20</span>]);</span><br><span class="line">  <span class="keyword">const</span> svgRef = useRef();</span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> svg = select(svgRef.current);</span><br><span class="line">    svg</span><br><span class="line">      .selectAll(<span class="string">"circle"</span>)</span><br><span class="line">      .data(data)</span><br><span class="line">      .join(<span class="string">"circle"</span>)</span><br><span class="line">      .attr(<span class="string">"r"</span>, (value) =&gt; value)</span><br><span class="line">      .attr(<span class="string">"cx"</span>, (value) =&gt; value * <span class="number">2</span>)</span><br><span class="line">      .attr(<span class="string">"cy"</span>, (value) =&gt; value * <span class="number">2</span>)</span><br><span class="line">      .attr(<span class="string">"stroke"</span>, <span class="string">"red"</span>);</span><br><span class="line">  &#125;, [data]);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;React.Fragment&gt;</span><br><span class="line">      &lt;svg ref=&#123;svgRef&#125;&gt; &lt;<span class="regexp">/svg&gt;</span></span><br><span class="line"><span class="regexp">      &lt;br /</span>&gt;</span><br><span class="line">      &lt;button onClick=&#123;() =&gt; setData(data.map(<span class="function">(<span class="params">value</span>) =&gt;</span> value + <span class="number">5</span>))&#125;&gt;</span><br><span class="line">        Update Data</span><br><span class="line">      &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">      &lt;button onClick=&#123;() =&gt; setData(data.filter(value=&gt;value&lt;=25))&#125;&gt;</span></span><br><span class="line"><span class="regexp">        Filter Data</span></span><br><span class="line"><span class="regexp">      &lt;/</span>button&gt;</span><br><span class="line">    &lt;<span class="regexp">/React.Fragment&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default App;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/06/29/reactHooksWithD3/1.gif" style="zoom:120%;"></p>
<h3 id="Curved-Line-Chart"><a href="#Curved-Line-Chart" class="headerlink" title="Curved Line Chart"></a>Curved Line Chart</h3><p>现在我们来画曲线图，我们需要d3库当中的 <code>line</code> 和 <code>curveCardinal</code>(用来把折线变成曲线)</p>
<p>line: line方法用于绘制直线，只需要起始和结束点的x轴和y轴坐标就可以确定一段直线的位置。<strong>它会为我们的path生成d属性</strong>。d这个属性,包含一系列的方法与参数.因此我们可以把这个属性称作一个“微语言” ，这些方法与参数其实就是告诉电脑”如何在纸上移动你的钢笔”.</p>
<p>path: 可以渲染各种各样的图形，<code>d3.line</code> 可以帮助我们生成 d 属性用于描述折线。</p>
<p>那么对于myline这个图元，怎么确定他的横纵坐标呢？  </p>
<p>对于横坐标，我们传入value和value的index，然后令横坐标就等于index*50 ,在svg画布上每个点的横坐标相当于：0，50，100，…这样的间隔 ；对于纵坐标，就随便我们定了；我们还加入了<code>curve(curveCarginal)</code>目的就是让曲线变得光滑</p>
<p>我们在正式画图的时候，这里要了解 .data([data]) 的意思。这里我们打整个data数组放到另一个数组当中。这样，d3 就只会根据我们的data数组生成一条path,如果是.data(data)的话，d3会为数组当中的 每一个元素生成一条path，也就是仅仅是几个点罢了。 所以我们用 .data([data])的写法，</p>
<p><code>.attr(&quot;d&quot;, (value) =&gt; myline(value))</code> 中，第二个参数是一个回调函数，value值接收我们整个data数组，也就是[[25, 30, 45, 60, 20,29,99]] 作为参数 因为这里只有一个子数组，那么就仅仅生成一条path。 然后我们把数据交给myline去处理，让他生成每一个点的横纵坐标。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useRef, useEffect, useState &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">"./App.css"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; select, line ,curveCardinal&#125; <span class="keyword">from</span> <span class="string">"d3"</span>;</span><br><span class="line"><span class="keyword">const</span> App = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [data, setData] = useState([<span class="number">25</span>, <span class="number">30</span>, <span class="number">45</span>, <span class="number">60</span>, <span class="number">20</span>,<span class="number">29</span>,<span class="number">99</span>]);</span><br><span class="line">  <span class="keyword">const</span> svgRef = useRef();</span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> svg = select(svgRef.current);</span><br><span class="line">    <span class="keyword">const</span> myline = line()</span><br><span class="line">      .x(<span class="function">(<span class="params">value, index</span>) =&gt;</span> index * <span class="number">50</span>)</span><br><span class="line">      .y(<span class="function">(<span class="params">value</span>) =&gt;</span> <span class="number">150</span>-value)</span><br><span class="line">      .curve(curveCardinal);</span><br><span class="line">    svg</span><br><span class="line">      .selectAll(<span class="string">"path"</span>)</span><br><span class="line">      .data([data])</span><br><span class="line">      .join(<span class="string">"path"</span>)<span class="comment">//为data新建一个path</span></span><br><span class="line">      .attr(<span class="string">"d"</span>, (value) =&gt; myline(value))</span><br><span class="line">      .attr(<span class="string">"fill"</span>,<span class="string">"none"</span>)</span><br><span class="line">      .attr(<span class="string">"stroke"</span>,<span class="string">"blue"</span>);</span><br><span class="line">  &#125;, [data]);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;React.Fragment&gt;</span><br><span class="line">      &lt;svg ref=&#123;svgRef&#125;&gt;&lt;<span class="regexp">/svg&gt;</span></span><br><span class="line"><span class="regexp">      &lt;br /</span>&gt;</span><br><span class="line">      &lt;button onClick=&#123;() =&gt; setData(data.map(<span class="function">(<span class="params">value</span>) =&gt;</span> value + <span class="number">5</span>))&#125;&gt;</span><br><span class="line">        Update Data</span><br><span class="line">      &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">      &lt;button onClick=&#123;() =&gt; setData(data.filter((value) =&gt; value &lt;= 25))&#125;&gt;</span></span><br><span class="line"><span class="regexp">        Filter Data</span></span><br><span class="line"><span class="regexp">      &lt;/</span>button&gt;</span><br><span class="line">    &lt;<span class="regexp">/React.Fragment&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default App;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/06/29/reactHooksWithD3/2.png" style="zoom:80%;"></p>
<h3 id="Axes-and-Scales"><a href="#Axes-and-Scales" class="headerlink" title="Axes and Scales"></a>Axes and Scales</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useRef, useEffect, useState &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">"./App.css"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  select,</span><br><span class="line">  line,</span><br><span class="line">  curveCardinal,</span><br><span class="line">  axisBottom,</span><br><span class="line">  axisRight,</span><br><span class="line">  scaleLinear,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">"d3"</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [data, setData] = useState([<span class="number">25</span>, <span class="number">30</span>, <span class="number">45</span>, <span class="number">60</span>, <span class="number">20</span>, <span class="number">65</span>, <span class="number">75</span>]);</span><br><span class="line">  <span class="keyword">const</span> svgRef = useRef();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// will be called initially and on every data change</span></span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> svg = select(svgRef.current);</span><br><span class="line">    <span class="keyword">const</span> xScale = scaleLinear()</span><br><span class="line">      .domain([<span class="number">0</span>, data.length - <span class="number">1</span>])</span><br><span class="line">      .range([<span class="number">0</span>, <span class="number">300</span>]);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> yScale = scaleLinear().domain([<span class="number">0</span>, <span class="number">150</span>]).range([<span class="number">150</span>, <span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> xAxis = axisBottom(xScale)</span><br><span class="line">      .ticks(data.length)</span><br><span class="line">      .tickFormat(<span class="function">(<span class="params">index</span>) =&gt;</span> index + <span class="number">1</span>);</span><br><span class="line">    svg</span><br><span class="line">      .select(<span class="string">".x-axis"</span>)</span><br><span class="line">      .style(<span class="string">"transform"</span>, <span class="string">"translateY(150px)"</span>)</span><br><span class="line">      .call(xAxis)</span><br><span class="line">      .attr(<span class="string">"fill"</span>, <span class="string">"black"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> yAxis = axisRight(yScale);</span><br><span class="line">    svg.select(<span class="string">".y-axis"</span>).style(<span class="string">"transform"</span>, <span class="string">"translateX(300px)"</span>).call(yAxis);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// generates the "d" attribute of a path element</span></span><br><span class="line">    <span class="keyword">const</span> myLine = line()</span><br><span class="line">      .x(<span class="function">(<span class="params">value, index</span>) =&gt;</span> xScale(index))</span><br><span class="line">      .y(yScale)</span><br><span class="line">      .curve(curveCardinal);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// renders path element, and attaches</span></span><br><span class="line">    <span class="comment">// the "d" attribute from line generator above</span></span><br><span class="line">    svg</span><br><span class="line">      .selectAll(<span class="string">".line"</span>)</span><br><span class="line">      .data([data])</span><br><span class="line">      .join(<span class="string">"path"</span>)</span><br><span class="line">      .attr(<span class="string">"class"</span>, <span class="string">"line"</span>)</span><br><span class="line">      .attr(<span class="string">"d"</span>, myLine)</span><br><span class="line">      .attr(<span class="string">"fill"</span>, <span class="string">"none"</span>)</span><br><span class="line">      .attr(<span class="string">"stroke"</span>, <span class="string">"blue"</span>);</span><br><span class="line">  &#125;, [data]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;React.Fragment&gt;</span><br><span class="line">      &lt;svg ref=&#123;svgRef&#125;&gt;</span><br><span class="line">        &lt;g className=<span class="string">"x-axis"</span> /&gt;</span><br><span class="line">        &lt;g className=<span class="string">"y-axis"</span> /&gt;</span><br><span class="line">      &lt;<span class="regexp">/svg&gt;</span></span><br><span class="line"><span class="regexp">      &lt;br /</span>&gt;</span><br><span class="line">      &lt;br /&gt;</span><br><span class="line">      &lt;br /&gt;</span><br><span class="line">      &lt;br /&gt;</span><br><span class="line">      &lt;button onClick=&#123;() =&gt; setData(data.map(<span class="function">(<span class="params">value</span>) =&gt;</span> value + <span class="number">5</span>))&#125;&gt;</span><br><span class="line">        Update data</span><br><span class="line">      &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">      &lt;button onClick=&#123;() =&gt; setData(data.filter((value) =&gt; value &lt; 35))&#125;&gt;</span></span><br><span class="line"><span class="regexp">        Filter data</span></span><br><span class="line"><span class="regexp">      &lt;/</span>button&gt;</span><br><span class="line">    &lt;<span class="regexp">/React.Fragment&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default App;</span></span><br></pre></td></tr></table></figure>
<h3 id="Animated-Bar-Chart"><a href="#Animated-Bar-Chart" class="headerlink" title="Animated Bar Chart"></a>Animated Bar Chart</h3><h3 id="Interactivity"><a href="#Interactivity" class="headerlink" title="Interactivity"></a>Interactivity</h3><h3 id="Responsive"><a href="#Responsive" class="headerlink" title="Responsive"></a>Responsive</h3>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/06/28/php%E5%9F%BA%E7%A1%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/28/php%E5%9F%BA%E7%A1%80/" class="post-title-link" itemprop="url">php基础</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-06-28 17:56:05" itemprop="dateCreated datePublished" datetime="2020-06-28T17:56:05+08:00">2020-06-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-07-05 22:39:10" itemprop="dateModified" datetime="2020-07-05T22:39:10+08:00">2020-07-05</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="php基础"><a href="#php基础" class="headerlink" title="php基础"></a>php基础</h1><blockquote>
<p>教程： <a href="https://www.youtube.com/watch?v=Z0zx5pA9lqI&amp;list=PLLAZ4kZ9dFpNJvT-JKogcCySuSznPpXEp&amp;index=3" target="_blank" rel="noopener">https://www.youtube.com/watch?v=Z0zx5pA9lqI&amp;list=PLLAZ4kZ9dFpNJvT-JKogcCySuSznPpXEp&amp;index=3</a></p>
<p>配合教程： <a href="https://www.w3school.com.cn/php/php_datatypes.asp" target="_blank" rel="noopener">https://www.w3school.com.cn/php/php_datatypes.asp</a></p>
</blockquote>
<h3 id="Windows-Installation"><a href="#Windows-Installation" class="headerlink" title="Windows Installation"></a>Windows Installation</h3><p><a href="https://windows.php.net/download#php-7.4" target="_blank" rel="noopener">https://windows.php.net/download#php-7.4</a></p>
<p><img src="/2020/06/28/php%E5%9F%BA%E7%A1%80/1.png" style="zoom:80%;"></p>
<p>我下载的是Thread Safe版本，然后把解压后的文件夹添加到环境变量当中：</p>
<p><img src="/2020/06/28/php%E5%9F%BA%E7%A1%80/2.png"></p>
<h3 id="Choosing-a-Text-Editor"><a href="#Choosing-a-Text-Editor" class="headerlink" title="Choosing a Text Editor"></a>Choosing a Text Editor</h3><p>教程选择了Atom编辑器。但我选择vscode或者phpstorm来编辑php代码</p>
<p>建立php项目之前，我们需要先启动php服务，也就是一个web server</p>
<p>在cmd中我们这样操作：</p>
<p>C:\Users\Jason&gt;php -S localhost:4000<br>[Sun Jun 28 21:09:08 2020] PHP 7.4.7 Development Server (<a href="http://localhost:4000" target="_blank" rel="noopener">http://localhost:4000</a>) started</p>
<p>这个服务器是在 C盘中用户目录下寻找可以运行的php文件的，所以我们在 jason目录下新建一个www文件夹，开始我们的php项目</p>
<p>在www文件夹下新建一个site.php文件.</p>
<p>php语言可以和HTML写在一个文件当中，PHP 脚本可以放在文档中的任何位置。PHP 脚本以 <strong>&lt;?php</strong> 开始，以 <strong>?&gt;</strong> 结束：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;?php</span><br><span class="line">        echo(&quot;Hello World&quot;);</span><br><span class="line">    ?&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
<p>然后我们在浏览器中输入：</p>
<p><a href="http://localhost:4000/www/site.php" target="_blank" rel="noopener">http://localhost:4000/www/site.php</a> 也就是 www文件夹之下的site.php文件，就会出现我们的HelloWorld</p>
<p><img src="/2020/06/28/php%E5%9F%BA%E7%A1%80/3.png"></p>
<p>或者，我们在phpstorm当中配置好php环境之后，我们直接点击右上角的Chrome，就会自动在端口生成我们的网页了：</p>
<p><img src="/2020/06/28/php%E5%9F%BA%E7%A1%80/4.png"></p>
<p>php的注释和C++一样</p>
<h3 id="Hello-World-amp-Setup"><a href="#Hello-World-amp-Setup" class="headerlink" title="Hello World &amp; Setup"></a>Hello World &amp; Setup</h3><p>echo是php的一个输出信息的语句。php语句结束的时候一定要有分号！</p>
<p><img src="/2020/06/28/php%E5%9F%BA%E7%A1%80/5.png"></p>
<p>还有，echo中可以写任何html代码，他们都可以被渲染到浏览器当中</p>
<h3 id="Writing-HTML"><a href="#Writing-HTML" class="headerlink" title="Writing HTML"></a>Writing HTML</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"&lt;h1&gt;Jason's Site&lt;/h1&gt;"</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"&lt;hr&gt;"</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"&lt;p&gt;This is my site&lt;/p&gt;"</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>当我们刷新页面内的时候，刚刚建立的 web server就会自动搜索这个文件夹下的php语句顺序执行 、渲染他们</p>
<h3 id="Variables"><a href="#Variables" class="headerlink" title="Variables"></a>Variables</h3><p>php中的变量。</p>
<p>我们用$ 来声明一个变量名，不需要前面加变量的类型。</p>
<p>在其他地方引用的时候，我们也直接用$ + 变量名即可 </p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    $characterName = <span class="string">"John"</span>;</span><br><span class="line">    $characterAge = <span class="number">35</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"There once was a man named $characterName &lt;br&gt;"</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"He was $characterAge years old&lt;br&gt;"</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/06/28/php%E5%9F%BA%E7%A1%80/6.png"></p>
<p>我们也可以对变量进行覆盖，只要在第一次声明之后再声明即可。</p>
<h3 id="Data-Types"><a href="#Data-Types" class="headerlink" title="Data Types"></a>Data Types</h3><p>第一种 数据类型是 strings，也就是字符串.当我们在变量后面用单引号或双引号的时候，php就知道这是一个字符串了，不需要我们声明变量类型。</p>
<p>php的中数字的类型有两种：整数和 浮点数</p>
<p><strong>整数：</strong></p>
<ul>
<li>整数必须有至少一个数字（0-9）</li>
<li>整数不能包含逗号或空格</li>
<li>整数不能有小数点</li>
<li>整数正负均可</li>
<li>可以用三种格式规定整数：十进制、十六进制（前缀是 0x）或八进制（前缀是 0）</li>
</ul>
<p><strong>浮点数：</strong></p>
<ul>
<li>浮点数是有小数点或指数形式的数字。</li>
</ul>
<p>布尔值：是 true 或 false。</p>
<p><strong>NULL 值： </strong></p>
<p>特殊的 NULL 值表示变量无值。NULL 是数据类型 NULL 唯一可能的值。</p>
<p>NULL 值标示变量是否为空。也用于区分空字符串与空值数据库。</p>
<p>可以通过把值设置为 NULL，将变量清空：</p>
<p><strong>数组：</strong></p>
<p>数组在一个变量中存储多个值。</p>
<p>在下面的例子中，我们将测试不同的数组。PHP var_dump() 会返回变量的数据类型和值：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$cars=<span class="keyword">array</span>(<span class="string">"Volvo"</span>,<span class="string">"BMW"</span>,<span class="string">"SAAB"</span>);</span><br><span class="line">var_dump($cars);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>对象</strong></p>
<p>对象是存储数据和有关如何处理数据的信息的数据类型。</p>
<p>在 PHP 中，必须明确地声明对象。</p>
<p>首先我们必须声明对象的类。对此，我们使用 class 关键词。类是包含属性和方法的结构。</p>
<p>然后我们在对象类中定义数据类型，然后在该类的实例中使用此数据类型：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="keyword">var</span> $color;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">Car</span><span class="params">($color=<span class="string">"green"</span>)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;color = $color;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">what_color</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;color;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="Working-With-Strings"><a href="#Working-With-Strings" class="headerlink" title="Working With Strings"></a>Working With Strings</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    $phrase = <span class="string">"Jason"</span>;</span><br><span class="line">    <span class="keyword">echo</span> strtolower($phrase);</span><br><span class="line">    <span class="keyword">echo</span> strtoupper($phrase);</span><br><span class="line">    <span class="keyword">echo</span> $phrase[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"Jason"</span>[<span class="number">0</span>];</span><br><span class="line"><span class="comment">//第一个参数是寻找目标字符串中被替换的字符串，第二个参数是替换后的字符串，第三个是目标字符串。</span></span><br><span class="line">    <span class="keyword">echo</span> str_replace(<span class="string">"Jason"</span>,<span class="string">"Ball"</span>,$phrase);</span><br><span class="line"><span class="comment">//第一个参数是目标字符串，第二个参数是开始截取子串的位置，第三个字符串是可选的，为子串的长度</span></span><br><span class="line">    <span class="keyword">echo</span> substr($phrase, <span class="number">3</span>,<span class="number">1</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="Working-With-Numbers"><a href="#Working-With-Numbers" class="headerlink" title="Working With Numbers"></a>Working With Numbers</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">	$num = <span class="number">10</span>;</span><br><span class="line">	$num++;</span><br><span class="line">	$num--;</span><br><span class="line">	$num+=<span class="number">26</span>;</span><br><span class="line">	<span class="keyword">echo</span> abs(<span class="number">-10</span>);</span><br><span class="line">	<span class="keyword">echo</span> sqrt(<span class="number">144</span>);</span><br><span class="line">	<span class="keyword">echo</span> max(<span class="number">12</span>,<span class="number">387</span>);</span><br><span class="line">	<span class="keyword">echo</span> min(<span class="number">12</span>,<span class="number">387</span>);</span><br><span class="line">	<span class="keyword">echo</span> floor(<span class="number">2.8</span>); <span class="comment">//取最大整数下界</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="number">40</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="Getting-User-Input"><a href="#Getting-User-Input" class="headerlink" title="Getting User Input"></a>Getting User Input</h3><p>首先我们要建一个Form。然后我们从用户中获取其输入信息</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;form action=<span class="string">"site.php"</span> method=<span class="string">"get"</span>&gt;</span><br><span class="line">    Name:&lt;input type=<span class="string">"text"</span> name = <span class="string">"username"</span> placeholder=<span class="string">"Yourname"</span>&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    Age:&lt;input type=<span class="string">"text"</span> name = <span class="string">"userage"</span> placeholder=<span class="string">"Yourage"</span> &gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">"submit"</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">Your name is<span class="meta">&lt;?php</span> <span class="keyword">echo</span>  $_GET[<span class="string">"username"</span>] <span class="meta">?&gt;</span></span><br><span class="line">&lt;br&gt;</span><br><span class="line">Your age is <span class="meta">&lt;?php</span> <span class="keyword">echo</span> $_GET[<span class="string">"userage"</span>]<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/06/28/php%E5%9F%BA%E7%A1%80/7.png"></p>
<h3 id="Building-a-Basic-Calculator"><a href="#Building-a-Basic-Calculator" class="headerlink" title="Building a Basic Calculator"></a>Building a Basic Calculator</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">"site.php"</span> method=<span class="string">"get"</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">"number"</span> name=<span class="string">"num1"</span>&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">"number"</span> name=<span class="string">"num2"</span>&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">"submit"</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">Answer: <span class="meta">&lt;?php</span> <span class="keyword">echo</span> $_GET[<span class="string">"num1"</span>] + $_GET[<span class="string">"num2"</span>] <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/06/28/php%E5%9F%BA%E7%A1%80/8.png"></p>
<p>我们需要注意这时候的url <a href="http://localhost:63344/www/site.php?num1=12&amp;num2=34" target="_blank" rel="noopener">http://localhost:63344/www/site.php?num1=12&amp;num2=34</a></p>
<p>我们看到num1 = 12， num2 = 34， 如果我修改url中的数字，那么 Answer: 后面的数字也会相应改变</p>
<h3 id="Building-a-Mad-Libs-Game"><a href="#Building-a-Mad-Libs-Game" class="headerlink" title="Building a Mad Libs Game"></a>Building a Mad Libs Game</h3><p>Mad Libs Game 是一个比较像我们的故事接龙的游戏，我们获取到用户输入的一些单词，然后把它放到文章里，文章就会变得千奇百怪。</p>
<p>我们从表单中extract出变量</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">"site.php"</span> method=<span class="string">"get"</span>&gt;</span><br><span class="line">    Color: &lt;input type=<span class="string">"text"</span> name=<span class="string">"color"</span>&gt;&lt;br&gt;</span><br><span class="line">    Plural Noun: &lt;input type=<span class="string">"text"</span> name=<span class="string">"pluralNoun"</span>&gt;&lt;br&gt;</span><br><span class="line">    Celebrity: &lt;input type=<span class="string">"text"</span> name=<span class="string">"celebrity"</span>&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">"submit"</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    $color = $_GET[<span class="string">"color"</span>];</span><br><span class="line">    $pluralNoun = $_GET[<span class="string">"pluralNoun"</span>];</span><br><span class="line">    $celebrity = $_GET[<span class="string">"celebrity"</span>];</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"Roses are $color &lt;br&gt;"</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"$pluralNoun are are blue&lt;br&gt;"</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"I love $celebrity &lt;br&gt;"</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/06/28/php%E5%9F%BA%E7%A1%80/9.png"><img src="/2020/06/28/php%E5%9F%BA%E7%A1%80/10.png">php</p>
<p>美中不足的是，在表单提交之前，这些不完整的“故事”仍然显现。在之后我们会解决这个问题</p>
<h3 id="URL-Parameters"><a href="#URL-Parameters" class="headerlink" title="URL Parameters"></a>URL Parameters</h3><p>URL 参数</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">"site.php"</span> method=<span class="string">"get"</span>&gt;</span><br><span class="line">    Name: &lt;input type=<span class="string">"text"</span> name=<span class="string">"name"</span>&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">"submit"</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="keyword">echo</span> $_GET[<span class="string">"name"</span>];</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>当我们提交表单的时候  name的值被放到了url当中，成为了url参数。我们可以通过修改url来打印不同的信息，也可以通过textbox来进行修改打印信息</p>
<p><a href="http://localhost:63344/www/site.php?name=Dave" target="_blank" rel="noopener">http://localhost:63344/www/site.php?name=Dave</a></p>
<p>$_GET[“name”] 仅仅获取url参数中名为 name 的信息，而其他信息，php是接受不到的</p>
<p>我们可以通过修改form的一些设置，让这些url参数隐藏，甚至无法修改</p>
<h3 id="POST-vs-GET"><a href="#POST-vs-GET" class="headerlink" title="POST vs GET"></a>POST vs GET</h3><p>我们有两种方法从用户那儿获取信息，一种是GET，一种是POST，接下来我们来讨论什么时候该用GET什么时候该用POST</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">"site.php"</span> method=<span class="string">"get"</span>&gt;</span><br><span class="line">    Name: &lt;input type=<span class="string">"text"</span> name=<span class="string">"name"</span>&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">"submit"</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="keyword">echo</span> $_GET[<span class="string">"name"</span>];</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>当我们使用$_GET的时候，信息会做为一个url变量放在url当中，所以这显然不适合用于输入密码时的环境</p>
<p><img src="/2020/06/28/php%E5%9F%BA%E7%A1%80/11.png"></p>
<p>那么当我们使用 $_POST 方法，会出现什么呢？</p>
<p><img src="/2020/06/28/php%E5%9F%BA%E7%A1%80/12.png"></p>
<p>我们虽然打印除了jason，但是我们看到url并没有显示password 参数。这比刚才的方式安全</p>
<p>大多数情况下我们会用POST，GET主要用于需要URLparameter的情况之下。</p>
<h3 id="Arrays"><a href="#Arrays" class="headerlink" title="Arrays"></a>Arrays</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$friends = <span class="keyword">array</span>(<span class="string">"Kevin"</span>,<span class="string">"Karen"</span>,<span class="string">"Oscar"</span>,<span class="string">"Jim"</span>,<span class="number">1</span>,<span class="keyword">true</span>);</span><br><span class="line">$friends[<span class="number">10</span>] = <span class="string">"Dwight"</span>;</span><br><span class="line"><span class="keyword">echo</span> count($friends);</span><br></pre></td></tr></table></figure>
<p>php数组可以放下各个类型的 数据，通过count可以计算数组当中的数据个数。这里虽然</p>
<h3 id="Using-Checkboxes"><a href="#Using-Checkboxes" class="headerlink" title="Using Checkboxes"></a>Using Checkboxes</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">"site.php"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">    Apples: &lt;input type=<span class="string">"checkbox"</span> name = <span class="string">"fruits[]"</span> value=<span class="string">"apples"</span>&gt;&lt;br&gt;</span><br><span class="line">    Oranges: &lt;input type=<span class="string">"checkbox"</span> name = <span class="string">"fruits[]"</span> value=<span class="string">"oranges"</span>&gt;&lt;br&gt;</span><br><span class="line">    Pears: &lt;input type=<span class="string">"checkbox"</span> name = <span class="string">"fruits[]"</span> value=<span class="string">"pears"</span>&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">"submit"</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">   $fruits = $_POST[<span class="string">"fruits"</span>];</span><br><span class="line">    <span class="keyword">echo</span> $fruits[<span class="number">0</span>];</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/06/28/php%E5%9F%BA%E7%A1%80/13.png"></p>
<h3 id="Associative-Arrays-关联数组"><a href="#Associative-Arrays-关联数组" class="headerlink" title="Associative Arrays 关联数组"></a>Associative Arrays 关联数组</h3><p>什么数组可以用来存储键值对呢？比如我想存储学生的姓名和他的成绩。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">&lt;form action=<span class="string">"site.php"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">"text"</span> name = <span class="string">"student"</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">"submit"</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    $grades = <span class="keyword">array</span>(<span class="string">"Jim"</span>=&gt;<span class="string">"A+"</span>,<span class="string">"Pam"</span>=&gt;<span class="string">"B-"</span>,<span class="string">"Oscar"</span>=&gt;<span class="string">"C+"</span>);</span><br><span class="line">    <span class="keyword">echo</span> $grades[$_POST[<span class="string">"student"</span>]];</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>
<h4 id="遍历关联数组"><a href="#遍历关联数组" class="headerlink" title="遍历关联数组"></a>遍历关联数组</h4><p>遍历并打印关联数组中的所有值，您可以使用 foreach 循环，如下所示：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$age=<span class="keyword">array</span>(<span class="string">"Peter"</span>=&gt;<span class="string">"35"</span>,<span class="string">"Ben"</span>=&gt;<span class="string">"37"</span>,<span class="string">"Joe"</span>=&gt;<span class="string">"43"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span>($age <span class="keyword">as</span> $x=&gt;$x_value)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"Key="</span> . $x . <span class="string">", Value="</span> . $x_value;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="Functions"><a href="#Functions" class="headerlink" title="Functions"></a>Functions</h3><p>PHP 函数准则：</p>
<ul>
<li>函数的名称应该提示出它的功能</li>
<li>函数名称以字母或下划线开头（不能以数字开头）</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">sayHi</span><span class="params">($name,$age)</span></span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"Hello $name ,you are $age&lt;br&gt;"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    sayHi(<span class="string">"Jason"</span>,<span class="number">40</span>);</span><br><span class="line">    sayHi(<span class="string">"Tom"</span>,<span class="number">13</span>);</span><br><span class="line">    sayHi(<span class="string">"Mike"</span>,<span class="number">90</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="Return-Statements"><a href="#Return-Statements" class="headerlink" title="Return Statements"></a>Return Statements</h3><p>如需让函数返回一个值，请使用 return 语句。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span><span class="params">($x,$y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	$total=$x+$y;</span><br><span class="line">	<span class="keyword">return</span> $total;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"1 + 16 = "</span> . add(<span class="number">1</span>,<span class="number">16</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p> 求立方的函数</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">cube</span><span class="params">($num)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> $num*$num*$num;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">echo</span>  = cube(<span class="number">4</span>);</span><br><span class="line">    </span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="If-Statements"><a href="#If-Statements" class="headerlink" title="If Statements"></a>If Statements</h3><h4 id="PHP-条件语句"><a href="#PHP-条件语句" class="headerlink" title="PHP 条件语句"></a>PHP 条件语句</h4><p>当您编写代码时，您常常需要为不同的判断执行不同的动作。您可以在代码中使用条件语句来完成此任务。</p>
<p>在 PHP 中，提供了下列条件语句：</p>
<ul>
<li><strong>if 语句</strong> - 在条件成立时执行代码</li>
<li><strong>if…else 语句</strong> - 在条件成立时执行一块代码，条件不成立时执行另一块代码</li>
<li><strong>if…else if….else 语句</strong> - 在若干条件之一成立时执行一个代码块</li>
</ul>
<h5 id="if-语句"><a href="#if-语句" class="headerlink" title="if 语句"></a>if 语句</h5><p>if 语句用于仅当指定条件成立时执行代码。</p>
<p>语法<br>if (条件)<br>{<br> 条件成立时要执行的代码;<br> }<br>如果当前时间小于 20，下面的实例将输出 “Have a good day!”：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$t=date(<span class="string">"H"</span>);</span><br><span class="line"><span class="keyword">if</span> ($t&lt;<span class="string">"20"</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"Have a good day!"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="if…else-语句"><a href="#if…else-语句" class="headerlink" title="if…else 语句"></a>if…else 语句</h5><p><strong>在条件成立时执行一块代码，条件不成立时执行另一块代码</strong>，请使用 if….else 语句。</p>
<p>该语句的含义为：当条件为真时，执行条件成立时的代码；如果条件为假，则执行条件不成立时的代码，语法如下：</p>
<blockquote>
<p>语法<br>if (<em>条件</em>)<br>{<br>   <em>条件成立时执行的代码;</em><br>}<br>else<br>{<br>  条件不成立时执行的代码;<br> }</p>
</blockquote>
<p>如果当前时间小于 20，下面的实例将输出 “Have a good day!”，否则输出 “Have a good night!”：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    $t=date(<span class="string">"H"</span>);</span><br><span class="line">    <span class="keyword">if</span> ($t&lt;<span class="string">"20"</span>)</span><br><span class="line">    &#123;</span><br><span class="line">    	<span class="keyword">echo</span> <span class="string">"Have a good day!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">    	<span class="keyword">echo</span> <span class="string">"Have a good night!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="if…else-if…-else-语句"><a href="#if…else-if…-else-语句" class="headerlink" title="if…else if….else 语句"></a>if…else if….else 语句</h5><p><strong>在若干条件之一成立时执行一个代码块</strong>，请使用 if….else if…else 语句</p>
<blockquote>
<p>语法<br>if (<em>条件</em>)<br>{<br>     if 条件成立时执行的代码;<br> }<br>else if (<em>条件</em>)<br>{<br>    elseif条件成立时执行的代码;<br>}<br>else<br>{<br>    条件不成立时执行的代码;<br>}</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    $t=date(<span class="string">"H"</span>);</span><br><span class="line">    <span class="keyword">if</span> ($t&lt;<span class="string">"10"</span>)</span><br><span class="line">    &#123;</span><br><span class="line">   		<span class="keyword">echo</span> <span class="string">"Have a good morning!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ($t&lt;<span class="string">"20"</span>)</span><br><span class="line">    &#123;</span><br><span class="line">	    <span class="keyword">echo</span> <span class="string">"Have a good day!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">    	<span class="keyword">echo</span> <span class="string">"Have a good night!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="Building-a-Better-Calculator"><a href="#Building-a-Better-Calculator" class="headerlink" title="Building a Better Calculator"></a>Building a Better Calculator</h3><p>step = “any” 代表着文本框内可以输入任意实数，否则只能输入小数。如果要限定小数位数，可以把step 设置为0.1, 0.01,0.001 这样来代表几位小数</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">&lt;form action=<span class="string">"site.php"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">    First Num:&lt;input type=<span class="string">"number"</span> step=<span class="string">"any"</span> name=<span class="string">"num1"</span>&gt;&lt;br&gt;</span><br><span class="line">    OP: &lt;input type=<span class="string">"textbox"</span> name=<span class="string">"op"</span>&gt;&lt;br&gt;</span><br><span class="line">    Seconde Num:&lt;input type=<span class="string">"number"</span> step=<span class="string">"any"</span> name=<span class="string">"num2"</span>&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">"number"</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    $num1 = $_POST[<span class="string">"num1"</span>];</span><br><span class="line">    $num2 = $_POST[<span class="string">"num2"</span>];</span><br><span class="line">    $op = $_POST[<span class="string">"op"</span>];</span><br><span class="line">    <span class="keyword">if</span>($op == <span class="string">"+"</span>)&#123;</span><br><span class="line">        <span class="keyword">echo</span> $num1+$num2;</span><br><span class="line">    &#125;<span class="keyword">elseif</span>($op == <span class="string">"-"</span>)&#123;</span><br><span class="line">        <span class="keyword">echo</span> $num1-$num2;</span><br><span class="line">    &#125;<span class="keyword">elseif</span> ($op == <span class="string">"/"</span>&amp;&amp;$num2!=<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">echo</span> $num1/$num2;</span><br><span class="line">    &#125;<span class="keyword">elseif</span> ($op==<span class="string">"*"</span>)&#123;</span><br><span class="line">        <span class="keyword">echo</span> $num1*$num2;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"Invalid Operator and Num"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>
<h3 id="Switch-Statements"><a href="#Switch-Statements" class="headerlink" title="Switch Statements"></a>Switch Statements</h3><p>如果希望<strong>有选择地执行若干代码块之一</strong>，请使用 switch 语句。</p>
<blockquote>
<p>语法</p>
<p> switch (<em>n</em>)<br> {<br> case <em>label1:</em><br> <em>如果 n=label1，此处代码将执行;</em><br> break;<br> case <em>label2:</em><br> <em>如果 n=label2，此处代码将执行;</em><br> break;<br> default:<br> <em>如果 n 既不等于 label1 也不等于 label2，此处代码将执行;</em><br> } </p>
</blockquote>
<p>工作原理：首先对一个简单的表达式 <em>n</em>（通常是变量）进行一次计算。将表达式的值与结构中每个 case 的值进行比较。如果存在匹配，则执行与 case 关联的代码。代码执行后，使用 <strong>break</strong> 来阻止代码跳入下一个 case 中继续执行。<strong>default</strong> 语句用于不存在匹配（即没有 case 为真）时执行。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    $favcolor=<span class="string">"red"</span>;</span><br><span class="line">    <span class="keyword">switch</span> ($favcolor)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">"red"</span>:</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"Your favorite color is red!"</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">"blue"</span>:</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"Your favorite color is blue!"</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">"green"</span>:</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"Your favorite color is green!"</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"Your favorite color is neither red, blue, or green!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="While-Loops"><a href="#While-Loops" class="headerlink" title="While Loops"></a>While Loops</h3><p>while 循环将重复执行代码块，直到指定的条件不成立。</p>
<blockquote>
<p>语法</p>
<p> while (<em>条件</em>)<br> {<br><em>要执行的代码</em>;<br> } </p>
</blockquote>
<p>实例</p>
<p>下面的实例首先设置变量 <em>i</em> 的值为 1 ($i=1;)。</p>
<p>然后，只要 <em>i</em> 小于或者等于 5，while 循环将继续运行。循环每运行一次，<em>i</em> 就会递增 1：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">    <span class="meta">&lt;?php</span></span><br><span class="line">        $i=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>($i&lt;=<span class="number">5</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">"The number is "</span> . $i . <span class="string">"&lt;br&gt;"</span>;</span><br><span class="line">            $i++;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">The number is 1</span><br><span class="line">The number is 2</span><br><span class="line">The number is 3</span><br><span class="line">The number is 4</span><br><span class="line">The number is 5</span><br></pre></td></tr></table></figure>
<h4 id="do…while-语句"><a href="#do…while-语句" class="headerlink" title="do…while 语句"></a>do…while 语句</h4><p>do…while 语句会至少执行一次代码，然后检查条件，只要条件成立，就会重复进行循环。</p>
<blockquote>
<p>语法</p>
<p> do<br> {<br><em>要执行的代码;<br>}<br> while (</em>条件); </p>
</blockquote>
<p>实例</p>
<p>下面的实例首先设置变量 <em>i</em> 的值为 1 ($i=1;)。</p>
<p>然后，开始 do…while 循环。循环将变量 <em>i</em> 的值递增 1，然后输出。先检查条件（<em>i</em> 小于或者等于 5），只要 <em>i</em> 小于或者等于 5，循环将继续运行：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line"> &lt;body&gt;</span><br><span class="line"></span><br><span class="line">     <span class="meta">&lt;?php</span></span><br><span class="line">         $i=<span class="number">1</span>;</span><br><span class="line">         <span class="keyword">do</span></span><br><span class="line">         &#123;</span><br><span class="line">             $i++;</span><br><span class="line">             <span class="keyword">echo</span> <span class="string">"The number is "</span> . $i . <span class="string">"&lt;br&gt;"</span>;</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">while</span> ($i&lt;=<span class="number">5</span>);</span><br><span class="line">     <span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"> &lt;/body&gt;</span><br><span class="line"> &lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h3 id="For-Loops"><a href="#For-Loops" class="headerlink" title="For Loops"></a>For Loops</h3><h4 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h4><p>循环执行代码块指定的次数，或者当指定的条件为真时循环执行代码块。</p>
<p>for 循环用于您预先知道脚本需要运行的次数的情况。</p>
<blockquote>
<p>for (<em>初始值; 条件; 增量</em>)<br> {<br> <em>要执行的代码;</em><br> } </p>
</blockquote>
<p>参数：</p>
<ul>
<li><em>初始值</em>：主要是初始化一个变量值，用于设置一个计数器（但可以是任何在循环的开始被执行一次的代码）。</li>
<li><em>条件</em>：循环执行的限制条件。如果为 TRUE，则循环继续。如果为 FALSE，则循环结束。</li>
<li><em>增量</em>：主要用于递增计数器（但可以是任何在循环的结束被执行的代码）。</li>
</ul>
<p><strong>注释：</strong>上面的<em>初始值</em>和<em>增量</em>参数可为空，或者有多个表达式（用逗号分隔）。</p>
<p>实例</p>
<p>下面的实例定义一个初始值为 i=1 的循环。只要变量 <em>i</em> 小于或者等于 5，循环将继续运行。循环每运行一次，变量 <em>i</em> 就会递增 1：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"> &lt;html&gt;</span><br><span class="line"> &lt;body&gt;</span><br><span class="line"></span><br><span class="line"> <span class="meta">&lt;?php</span></span><br><span class="line"> <span class="keyword">for</span> ($i=<span class="number">1</span>; $i&lt;=<span class="number">5</span>; $i++)</span><br><span class="line"> &#123;</span><br><span class="line"> <span class="keyword">echo</span> <span class="string">"The number is "</span> . $i . <span class="string">"&lt;br&gt;"</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"> &lt;/body&gt;</span><br><span class="line"> &lt;/html&gt; </span><br><span class="line">输出：</span><br><span class="line"></span><br><span class="line"> The number is <span class="number">1</span></span><br><span class="line"> The number is <span class="number">2</span></span><br><span class="line"> The number is <span class="number">3</span></span><br><span class="line"> The number is <span class="number">4</span></span><br><span class="line"> The number is <span class="number">5</span></span><br></pre></td></tr></table></figure>
<h4 id="foreach-循环"><a href="#foreach-循环" class="headerlink" title="foreach 循环"></a>foreach 循环</h4><p>foreach 循环用于遍历数组，它根据数组中每个元素来循环代码块。</p>
<blockquote>
<p>foreach ($array as $value)<br> {<br>     <em>要执行代码;</em><br> } </p>
</blockquote>
<p>每进行一次循环，当前数组元素的值就会被赋值给 $value 变量（数组指针会逐一地移动），在进行下一次循环时，您将看到数组中的下一个值。</p>
<p><strong>实例</strong></p>
<p>下面的实例演示了一个输出给定数组的值的循环：</p>
 <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line"> &lt;body&gt;</span><br><span class="line"></span><br><span class="line"> <span class="meta">&lt;?php</span></span><br><span class="line">     $x=<span class="keyword">array</span>(<span class="string">"one"</span>,<span class="string">"two"</span>,<span class="string">"three"</span>);</span><br><span class="line">     <span class="keyword">foreach</span> ($x <span class="keyword">as</span> $value)</span><br><span class="line">     &#123;</span><br><span class="line">    	 <span class="keyword">echo</span> $value . <span class="string">"&lt;br&gt;"</span>;</span><br><span class="line">     &#125;</span><br><span class="line"> <span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"> &lt;/body&gt;</span><br><span class="line"> &lt;/html&gt; </span><br><span class="line"></span><br><span class="line">输出:</span><br><span class="line"> one</span><br><span class="line"> two</span><br><span class="line"> three</span><br></pre></td></tr></table></figure>
<p><strong>注意：</strong>foreach</p>
<p> 仅能够应用于数组和对象，如果尝试应用于其他数据类型的变量，或者未初始化的变量，将发出错误信息。</p>
<h3 id="Comments"><a href="#Comments" class="headerlink" title="Comments"></a>Comments</h3><h3 id="Including-HTML"><a href="#Including-HTML" class="headerlink" title="Including HTML"></a>Including HTML</h3><h3 id="Include-PHP"><a href="#Include-PHP" class="headerlink" title="Include: PHP"></a>Include: PHP</h3><h3 id="Classes-amp-Objects"><a href="#Classes-amp-Objects" class="headerlink" title="Classes &amp; Objects"></a>Classes &amp; Objects</h3><h3 id="Constructors"><a href="#Constructors" class="headerlink" title="Constructors"></a>Constructors</h3><h3 id="Object-Functions"><a href="#Object-Functions" class="headerlink" title="Object Functions"></a>Object Functions</h3><h3 id="Getters-amp-Setters"><a href="#Getters-amp-Setters" class="headerlink" title="Getters &amp; Setters"></a>Getters &amp; Setters</h3><h3 id="Inheritance"><a href="#Inheritance" class="headerlink" title="Inheritance"></a>Inheritance</h3>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/06/26/mysql%E5%9F%BA%E7%A1%80%E4%B8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/26/mysql%E5%9F%BA%E7%A1%80%E4%B8%8B/" class="post-title-link" itemprop="url">mysql基础下</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-06-26 22:14:56" itemprop="dateCreated datePublished" datetime="2020-06-26T22:14:56+08:00">2020-06-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-08-22 11:14:36" itemprop="dateModified" datetime="2022-08-22T11:14:36+08:00">2022-08-22</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="mysql基础下"><a href="#mysql基础下" class="headerlink" title="mysql基础下"></a>mysql基础下</h1><p>承接上文：<a href="https://jasonxqh.github.io/2020/05/16/Mysql%E5%9F%BA%E7%A1%80/">https://jasonxqh.github.io/2020/05/16/Mysql%E5%9F%BA%E7%A1%80/</a></p>
<h2 id="Stored-Prodedure"><a href="#Stored-Prodedure" class="headerlink" title="Stored Prodedure"></a>Stored Prodedure</h2><h3 id="What-are-Stored-Procedures"><a href="#What-are-Stored-Procedures" class="headerlink" title="What are Stored Procedures"></a>What are Stored Procedures</h3><p>假设我们在开发一个应用，应用中有一个数据库。那么我们在哪里写SQL语句呢？我们总不能把sql语句和java，C#这种的语句混合着写吧，那么维护起来就很麻烦。另外，一些C# Java的编程语言需要编译工作。如果我们在应用中写这sql语句，那么当我想修改查询语句的时候，会发现需要重新编译，甚至重新部署。所以我们需要把SQL代码和应用的代码分开。把SQL代码存储在它应属的数据库里 ：那就是 Stored Prodedure</p>
<p> Stored Prodedure 是一个包含一堆SQL代码的数据库对象。在我们的应用代码里，我们调用这些过程来获取或者保存数据</p>
<p>他还能让查询变得更快。并且它能像View一样，加强数据的安全性.比如我们可以取消所有的表的直接访问权限。让插入、更新、删除数据由存储过程来完成。然后我们指定一个能进行此操作的人。这样可以防止一些用户删除我们的数据。</p>
<p><img src="/2020/06/26/mysql%E5%9F%BA%E7%A1%80%E4%B8%8B/1.png" style="zoom:67%;"></p>
<h3 id="Creating-a-Stored-Procedure"><a href="#Creating-a-Stored-Procedure" class="headerlink" title="Creating a Stored Procedure"></a>Creating a Stored Procedure</h3><p>首先我们想让MYSQL 为这一个这个整体创建一个存储过程叫做 get_clients。我么不想单独执行<code>SELECT * FROM clients</code>，那么我们必须把默认分隔符从分号改成$$(国际公约)然后在END后写两个$ 这相当于告诉mysql这是一个新的分隔符，把这些CREATE PROCEDURE语句看成一个整体。</p>
<p>最后我们需要把默认分隔符改回来： DELIMITER ; 运行后，我么发现他已经成为了一个存储过程了。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $$</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> get_clients()</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> clients;</span><br><span class="line"><span class="keyword">END</span>$$</span><br><span class="line"></span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure>
<p>在query中，我们可以使用CALL语句来调用存储过程： CALL get_clients()</p>
<p>在应用中我们会用python，Java等语言来调用</p>
<h4 id="小练习："><a href="#小练习：" class="headerlink" title="小练习："></a>小练习：</h4><blockquote>
<p>Create a stored procedure called</p>
<ul>
<li>get_invoices_with_balance</li>
<li>to return all the invoices with a balance&gt;0 返回所有结余大于0 的发票</li>
</ul>
</blockquote>
<p>之前我们创建了 invoices_with_balance 的view视图，所以我们直接从这里找，更直观。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $$</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> get_invoices_with_balance()</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">SELECT</span> *</span><br><span class="line">    <span class="keyword">FROM</span> invoices_with_balance</span><br><span class="line">    <span class="keyword">WHERE</span> balance &gt; <span class="number">0</span>;</span><br><span class="line"><span class="keyword">END</span>$$</span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure>
<p>通过： <code>call sql_invoicing.get_invoices_with_balance()</code>调用</p>
<h3 id="Creating-Procedures-Using-MySQLWorkbench"><a href="#Creating-Procedures-Using-MySQLWorkbench" class="headerlink" title="Creating Procedures Using MySQLWorkbench"></a>Creating Procedures Using MySQLWorkbench</h3><p><img src="/2020/06/26/mysql%E5%9F%BA%E7%A1%80%E4%B8%8B/2.png" style="zoom:%;"></p>
<p>当然我们可以直接右键点击 Stored Procedures  ，点击 Create Stored Procedure 然后我们只需要专注于我们的sql语句了。到时候，只要点击下面的apply，workbench就会自动帮我们生成存储过程</p>
<p><img src="/2020/06/26/mysql%E5%9F%BA%E7%A1%80%E4%B8%8B/3.png" style="zoom:%;"></p>
<h3 id="Dropping-Stored-Procedures"><a href="#Dropping-Stored-Procedures" class="headerlink" title="Dropping Stored Procedures"></a>Dropping Stored Procedures</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">PROCEDURE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> get_clients;</span><br></pre></td></tr></table></figure>
<p>我们最好把删除和创建每一个存储过程的代码存储在不同的sql文件当中。并把文件放在Git 中，这样就能和组员共享了。任何人都能可以用他们电脑上的所有相关视图和存储过程来再建这个数据库。</p>
<p>我们建立了一个 存储过程之后可以保存为 一个sql文件，保存在新建的存储视图文件夹之下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">DROP PROCEDURE IF EXISTS get_clients;</span><br><span class="line">DELIMITER $$</span><br><span class="line">CREATE PROCEDURE get_clients()</span><br><span class="line">BEGIN</span><br><span class="line">    SELECT *</span><br><span class="line">    FROM invoices_with_balance</span><br><span class="line">    WHERE balance &gt; 0;</span><br><span class="line">END$$</span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure>
<h3 id="Parameters"><a href="#Parameters" class="headerlink" title="Parameters"></a>Parameters</h3><p>现在我们来在存储过程中添加参数。我们一般使用参数为存储过程传递值，我们也可以使用参数为调用程序赋值。</p>
<p>参数写在() 之内。 在这里，我们令state 这个字段名 是一个 长度为2的字符串。注意，如果类型是CHAR， 它只能是长度为特定值，如果我们想要长度可变的值，那么我们需要用VARCHAR </p>
<p>因为我们不能直接 选择 <code>WHERE state = state</code> 所以我们给clients一个别名 c， 这样我们就可以写成 <code>WHERE state = c.state</code> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">DROP PROCEDURE IF EXISTS get_clients_by_state;</span><br><span class="line">DELIMITER $$</span><br><span class="line">CREATE PROCEDURE get_clients_by_state</span><br><span class="line">(</span><br><span class="line">	state CHAR(2) --CA&#x2F;NY</span><br><span class="line">)</span><br><span class="line">BEGIN</span><br><span class="line">  	SELECT * FROM clients c</span><br><span class="line">    WHERE c.state &#x3D; state;</span><br><span class="line">END$$</span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure>
<h4 id="小练习：-1"><a href="#小练习：-1" class="headerlink" title="小练习："></a>小练习：</h4><blockquote>
<p>Write a stored procedure to return invoices</p>
<p>for a given client </p>
<p>get_invoice_by_client</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $$</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> get_invoices_by_client</span><br><span class="line">(</span><br><span class="line">	client_id <span class="built_in">INT</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  	<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> invoices i</span><br><span class="line">    <span class="keyword">WHERE</span> i.client_id = client_id</span><br><span class="line"><span class="keyword">END</span>$$</span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure>
<h3 id="Parameters-with-Default-Value"><a href="#Parameters-with-Default-Value" class="headerlink" title="Parameters with Default Value"></a>Parameters with Default Value</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">PROCEDURE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> get_clients_by_state;</span><br><span class="line">DELIMITER $$</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> get_clients_by_state</span><br><span class="line">(</span><br><span class="line">	state <span class="built_in">CHAR</span>(<span class="number">2</span>) <span class="comment">--CA/NY</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">IF</span> state <span class="keyword">IS</span> <span class="literal">NULL</span> <span class="keyword">THEN</span></span><br><span class="line">		<span class="keyword">SET</span> state = <span class="string">'CA'</span>;</span><br><span class="line">	ENDIF;</span><br><span class="line">  	<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> clients c</span><br><span class="line">    <span class="keyword">WHERE</span> c.state = state;</span><br><span class="line"><span class="keyword">END</span>$$</span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CALL</span> get_clients_by_state(<span class="literal">NULL</span>)</span><br></pre></td></tr></table></figure>
<p>注意，这里我们还是要传入空的参数NULL，否则mysql会报错</p>
<p>当然，我们也可以默认返回所有客户：我们只需要在IF中写语句即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $$</span><br><span class="line">CREATE PROCEDURE get_clients_by_state</span><br><span class="line">(</span><br><span class="line">	state CHAR(2) --CA&#x2F;NY</span><br><span class="line">)</span><br><span class="line">BEGIN</span><br><span class="line">	IF state IS NULL THEN</span><br><span class="line">		SELECT * FROM clients;</span><br><span class="line">	ELSE</span><br><span class="line">	  	SELECT * FROM clients c</span><br><span class="line">    	WHERE c.state &#x3D; state;</span><br><span class="line">    ENDIF;</span><br><span class="line">END$$</span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure>
<p>或者我们可以把两段查询合并成一段：</p>
<p>运用IFNULL 函数，如果第一个值是控制，那个就会返回c.state，也就是把所有的客户都返回</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $$</span><br><span class="line">CREATE PROCEDURE get_clients_by_state</span><br><span class="line">(</span><br><span class="line">	state CHAR(2) -- CA&#x2F;NY</span><br><span class="line">)</span><br><span class="line">BEGIN</span><br><span class="line">	  	SELECT * FROM clients c</span><br><span class="line">    	WHERE c.state &#x3D; IFNULL(state,c.state);</span><br><span class="line">END$$</span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure>
<h4 id="小练习：-2"><a href="#小练习：-2" class="headerlink" title="小练习："></a>小练习：</h4><blockquote>
<p>Write a stored procedure called get_payments</p>
<p>with two parameters</p>
<p>client_id =&gt; INT    //4字节 ，存储更大的数字</p>
<p>payment_method_id =&gt; TINYINT //1字节，存储0-255的数字</p>
<p>如果这两个系数都传递NULL，那么返回数据库里的所有<strong>付款记录​</strong></p>
<p>如果提供client_id 那么返回<strong>这个客户的所有付款</strong></p>
<p>如果client_id 和 payment_method_id 返回<strong>指定客户使用指定付款方式支付的所有付款记录</strong></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $$</span><br><span class="line">CREATE PROCEDURE get_payments</span><br><span class="line">(</span><br><span class="line">	client_id INT,</span><br><span class="line">	payment_method_id TINYINT</span><br><span class="line">)</span><br><span class="line">BEGIN</span><br><span class="line">	  	SELECT * FROM payments p</span><br><span class="line">    	WHERE</span><br><span class="line">    		p.client_id &#x3D; IFNULL(client_id,p.client_id) AND</span><br><span class="line">    		p.payment_method &#x3D; IFNULL(payment_method_id,p.payment_id);</span><br><span class="line">END$$</span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure>
<h3 id="Parameter-Validation"><a href="#Parameter-Validation" class="headerlink" title="Parameter Validation"></a>Parameter Validation</h3><p>我们也可以用存储过程来存储、删除、更新数据库当中的信息。在这之前，我们需要进行数据验证。确保我们不会意外存入坏的数据。</p>
<p>那么运用 IF END IF 语句我们可以对输入的数值进行判断。 </p>
<p>如果payment_amount &lt;= 0 那么就 SIGNAL （类似于抛出一个异常，try except） 出一个状态码：</p>
<p>状态码详解： <a href="https://blog.csdn.net/u014653854/article/details/78986780" target="_blank" rel="noopener">https://blog.csdn.net/u014653854/article/details/78986780</a></p>
<p>并抛出 一个MESSAGE ： Invalid payment amount</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">CREATE DEFINER&#x3D;&#96;root&#96;@&#96;localhost&#96; PROCEDURE &#96;make_payment&#96;(</span><br><span class="line">   invoice_id INT,</span><br><span class="line">    payment_amount DECIMAL(9,2),-- DECIMAL是最大可以存储9位数，且保留两位小数的数字</span><br><span class="line">    payment_date DATE</span><br><span class="line">)</span><br><span class="line">BEGIN</span><br><span class="line">   IF payment_amount &lt;&#x3D; 0 THEN</span><br><span class="line">      SIGNAL SQLSTATE &#39;22003&#39;</span><br><span class="line">         SET MESSAGE_TEXT &#x3D; &#39;Invalid payment amount&#39;;</span><br><span class="line">    END IF;</span><br><span class="line">   UPDATE invoices i</span><br><span class="line">    SET</span><br><span class="line">      i.payment_total &#x3D; payment_amount,</span><br><span class="line">        i.payment_date &#x3D; payment_date</span><br><span class="line">   WHERE i.invoice_id &#x3D; invoice_id;</span><br><span class="line">END</span><br></pre></td></tr></table></figure>
<p><img src="/2020/06/26/mysql%E5%9F%BA%E7%A1%80%E4%B8%8B/4.png" style="zoom:%;"></p>
<p>当我们运行这个存储过程并尝试输入一个负值的时候，会出现报错</p>
<h3 id="Output-Parameters"><a href="#Output-Parameters" class="headerlink" title="Output Parameters"></a>Output Parameters</h3><p>我们可以用参数向过程调用者返回数据</p>
<p>一般的，我们在括号中输入的参数都是INPUT variables，意思是我们只能通过它们向存储过程提供数据。我们用OUT来标记需要传出来的参数。这样就约定这些参数是要输出的参数</p>
<p>然后，我们在主体重用invoices_count和invoices)total来接收传递出来的数据，用INTO关键字</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">CREATE DEFINER&#x3D;&#96;root&#96;@&#96;localhost&#96; PROCEDURE &#96;get_unpaid_invoices_for_client&#96;(</span><br><span class="line">	client_id INT,</span><br><span class="line">    OUT invoices_count INT,</span><br><span class="line">    OUT invoices_total DECIMAL(9,2)</span><br><span class="line">)</span><br><span class="line">BEGIN</span><br><span class="line">	SELECT COUNT(*), SUM(invoice_total)</span><br><span class="line">    INTO invoices_count,invoices_total</span><br><span class="line">    FROM invoices i </span><br><span class="line">    WHERE i.client_id &#x3D; client_id</span><br><span class="line">		AND payment_total &#x3D; 0;</span><br><span class="line">END</span><br></pre></td></tr></table></figure>
<p><img src="/2020/06/26/mysql%E5%9F%BA%E7%A1%80%E4%B8%8B/5.png" style="zoom:%;"></p>
<p>调用后我们有了这样的代码： 首先我们定义了两个变量： invoices_count 和invoices_total 这就是我们说的用户定义变量，这种变量就是可以把数据保存在内存当中的量。定义变量之前需要用@修饰。</p>
<p>然后调用存储过程，并传入三个变量。第一个是传入的，后两个是传出的。 最后我们选择传出的两个变量，显示在表格当中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">set @invoices_count &#x3D; 0;</span><br><span class="line">set @invoices_total &#x3D; 0;</span><br><span class="line">call sql_invoicing.get_unpaid_invoices_for_client</span><br><span class="line">(3, @invoices_count, @invoices_total);</span><br><span class="line">select @invoices_count, @invoices_total;</span><br></pre></td></tr></table></figure>
<p>比较麻烦，不建议使用</p>
<h3 id="Variables"><a href="#Variables" class="headerlink" title="Variables"></a>Variables</h3><p>上面我们定义了User variables，这些变量时使用SET 语句来定义的，并且用@前缀修饰的。这种变量常常出现在有输出变量的存储过程当中.这些变量在整个客户端session周期中都存储在内存当中。当客户端终止与数据库的连接时，那么这些变量就会被释放。</p>
<p>还有一种变量叫做本地变量。这是在存储过程或者函数当中定义的变量。本地变量是不会再session周期保存在内存当中的。只要存储过程运行结束，这些变量就会被释放。大多数时候这些变量用作存储过程中的运算。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">CREATE DEFINER&#x3D;&#96;root&#96;@&#96;localhost&#96; PROCEDURE &#96;get_rist_factor&#96;()</span><br><span class="line">BEGIN</span><br><span class="line">	DECLARE risk_factor DECIMAL(9,2) DEFAULT 0;</span><br><span class="line">    DECLARE invoices_total DECIMAL(9,2);</span><br><span class="line">    DECLARE invoices_count INT;</span><br><span class="line">    </span><br><span class="line">    SELECT COUNT(*),SUM(invoice_total)</span><br><span class="line">    INTO invoices_count, invoices_total</span><br><span class="line">    FROM invoices;</span><br><span class="line">    </span><br><span class="line">    SET risk_factor &#x3D; invoices_total&#x2F;invoices_count*5;</span><br><span class="line">    SELECT risk_factor;</span><br><span class="line">END</span><br></pre></td></tr></table></figure>
<h3 id="Functions"><a href="#Functions" class="headerlink" title="Functions"></a>Functions</h3><p>我们已经知道了很多built-in 函数了。我们现在可以自己创建函数。但是函数和存储过程是不一样的，因为函数不能返回有行有列的结果集，函数只能返回单一的值。所以如果我们想要得到单一的值，那么可以使用函数。一个比较好的例子就是上面我们得到的 risk_factor.我们现在为每一个用户得到一个risk_factor</p>
<p><img src="/2020/06/26/mysql%E5%9F%BA%E7%A1%80%E4%B8%8B/6.png" style="zoom: 100%;"></p>
<p>创建函数的语法和创建存储过程的非常类似</p>
<p>首先是取一个名字，括号里面定义参数，然后是RETURNS INTEGER 意思就是返回一个整数。</p>
<p>在RETURNS语句的下面，我们需要设置函数的特性：</p>
<p>DETEMINISTIC：这是说如果给函数同样的设置值，他就总返回相同的值（输入一样，输出也一样）。这在不依赖于数据库数据计算返回值的时候就会很有用，因为数据库中的数据是变化的。就比如计算运费或者税金就可以用DETEMINISTIC。因为其中都是根据一些公式来进行计算，相同的参数一定得到相同的值。</p>
<p>READS SQL DATA：这个意思就是在函数主体当中我们需要用SELECT 语句从数据库中获得信息</p>
<p>MODIFIES SQL DATA：对数据库进行增删改查的时候就会用到这个特性。</p>
<p>在这个函数，我们要计算顾客的风险指数，这是会随着顾客支付他的订单而变化的，所以不需要DETEMINISTIC,而且这个函数也不需要对数据库进行CRUD操作，仅仅是计算。所以我们用READS SQL DATA 特性</p>
<p>然后我们把刚才的语句复制过来。并做一些修改： WHERE i.client_id = client_id;</p>
<p>并且，如果风险指数为NULL的话，我们通过IFNULL 将其设置为0。</p>
<p>APPLY 应用之后，我们可以对其进行运行了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">CREATE DEFINER&#x3D;&#96;root&#96;@&#96;localhost&#96; FUNCTION &#96;get_risk_factor_for_client&#96;(</span><br><span class="line">	client_id INT</span><br><span class="line">) RETURNS int(11)</span><br><span class="line">    READS SQL DATA</span><br><span class="line">BEGIN</span><br><span class="line">	DECLARE risk_factor DECIMAL(9,2) DEFAULT 0;</span><br><span class="line">    DECLARE invoices_total DECIMAL(9,2);</span><br><span class="line">    DECLARE invoices_count INT;</span><br><span class="line">    </span><br><span class="line">    SELECT COUNT(*), SUM(invoice_total)</span><br><span class="line">    INTO invoices_count,invoices_total </span><br><span class="line">    FROM invoices i </span><br><span class="line">    WHERE i.client_id &#x3D; client_id;</span><br><span class="line">    </span><br><span class="line">   SET risk_factor &#x3D; invoices_total&#x2F;invoices_count*5;</span><br><span class="line">   </span><br><span class="line">RETURN IFNULL(risk_factor,0);</span><br><span class="line">END</span><br></pre></td></tr></table></figure>
<p>新建了函数之后，我们在sql语句当中可以使用内建函数一样使用自定义函数了：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    client_id,</span><br><span class="line">    <span class="keyword">name</span>,</span><br><span class="line">    get_risk_factor_for_client(client_id)</span><br><span class="line"><span class="keyword">FROM</span> clients;</span><br></pre></td></tr></table></figure>
<p>我们看到结果，如果这个人没有任何账单，那么根据计算出来的结果，再使用IFNULL函数之后，他们的风险指数就是0了</p>
<p><img src="/2020/06/26/mysql%E5%9F%BA%E7%A1%80%E4%B8%8B/7.png" style="zoom: 100%;"></p>
<p>不同的人，使用函数的时候有着不同的习惯。比如命名时喜欢驼峰命名法，或者像刚才那样下划线命名法。不同的人也会有不同的分隔符号，有些人喜欢$$ 有些人喜欢 // </p>
<h2 id="触发器和事件"><a href="#触发器和事件" class="headerlink" title="触发器和事件"></a>触发器和事件</h2><h3 id="Triggers"><a href="#Triggers" class="headerlink" title="Triggers"></a>Triggers</h3><p>Trigger is a block of SQL code that automatically gets executed befor or after an insert ,update or delete statement.</p>
<p>通常触发器用来维持数据的连贯性。比如在sql中，给定的发票可以有多个支付记录。有一列 payment_total 是专门用来统计了现在已经支付了多少金钱了。所以，当我们想支付记录表中添加了一条记录，我们需要保证发票表中的 payment_total  需要实时更新。这就需要 Trigger</p>
<p>这是创建一个基本触发器的语法。首先我们要切换分隔符为$$</p>
<p>其次我们 CREATE TRIGGER + 触发器的名字。触发器的命名也有一定的规矩。payments是数据表的名字，after或者before代表了这个触发器是在行为之后运行还是在之前运行。这里是在插入了payments之后，触发Trigger，第三个代表触发这个Trigger的命令类型。所以这个触发器的意思是在payments表中插入信息之后触发。</p>
<p>下面是触发器的命令。可以是AFTER也可以选BEFORE,INSERT 也可以是DELETE，FOR EACH ROW代表了每次插入都会修改。如果一次插入了5行，那么就会修改5行</p>
<p>然后是BEGIN和END代码块,其中可以输入任何为了保持表格连续性所需的代码。可以直接写语句或者调用存储过程。我们这里要更新payment_total这列的值，所以使用UPDATE invoices表格，然后设置  payment_total = payment_total+NEW.amount，注意这里改变调用的是刚刚插入的amount信息，所以我们要用NEW修饰。</p>
<p>最后我们需要设定那些是需要更新的，是invoice_id和我们插入的invoice_id相匹配的信息才需要更新，用WHERE来描述</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $$</span><br><span class="line"></span><br><span class="line">CREATE TRIGGER payments_after_insert</span><br><span class="line">    AFTER INSERT ON payments</span><br><span class="line">    FOR EACH ROW</span><br><span class="line">BEGIN</span><br><span class="line">    UPDATE invoices</span><br><span class="line">    SET payment_total &#x3D; payment_total+NEW.amount</span><br><span class="line">    WHERE invoice_id &#x3D; NEW.invoice_id;</span><br><span class="line">END $$</span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure>
<p>运行后，我们插入一条信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> payments</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="keyword">DEFAULT</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="string">'2019-01-01'</span>,<span class="number">10</span>,<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<p>然后5号信息的payment_total已经更新为10了</p>
<h4 id="小练习"><a href="#小练习" class="headerlink" title="小练习"></a>小练习</h4><p>Create a trigger that gets fired when we delete a payment</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $$</span><br><span class="line"></span><br><span class="line">CREATE TRIGGER payments_after_delete</span><br><span class="line">    AFTER DELETE ON payments</span><br><span class="line">    FOR EACH ROW</span><br><span class="line">BEGIN</span><br><span class="line">    UPDATE invoices</span><br><span class="line">    SET payment_total &#x3D; payment_total-OLD.amount</span><br><span class="line">    WHERE invoice_id &#x3D; OLD.invoice_id;</span><br><span class="line">end $$</span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure>
<p>这是用来当我们删除一条payment之后，会自动更新payment_total的值的trigger</p>
<h3 id="Viewing-Triggers"><a href="#Viewing-Triggers" class="headerlink" title="Viewing Triggers"></a>Viewing Triggers</h3><p>我们没有办法在mysql workbench 查看触发器。我们可以使用SQL语句显示TRIGGER</p>
<p>运行 </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">TRIGGERS</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/06/26/mysql%E5%9F%BA%E7%A1%80%E4%B8%8B/9.png" style="zoom: 100%;"></p>
<p>如果我只想看特定的触发器，我们可以这样</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW TRIGGERS LIKE <span class="string">'payments%'</span></span><br></pre></td></tr></table></figure>
<h3 id="Dropping-Triggers"><a href="#Dropping-Triggers" class="headerlink" title="Dropping Triggers"></a>Dropping Triggers</h3><p>删除Trigger和删除存储过程差不多。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TRIGGER</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> payments_after_insert;</span><br></pre></td></tr></table></figure>
<h3 id="Using-Triggers-for-Auditing"><a href="#Using-Triggers-for-Auditing" class="headerlink" title="Using Triggers for Auditing"></a>Using Triggers for Auditing</h3><p>还有一种触发器的应用场景，就是记录对数据库的修改。比如，某人插入或者删除了某个记录，我们可以在某处记录下来，这样可以在今后回头检查。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">USE sql_invoicing;</span><br><span class="line">CREATE TABLE payments_audit</span><br><span class="line">(</span><br><span class="line">    client_id INT NOT NULL ,</span><br><span class="line">    date DATE NOT NULL ,</span><br><span class="line">    amount DECIMAL(9,2) NOT NULL ,</span><br><span class="line">    action_type VARCHAR(50) NOT NULL ,</span><br><span class="line">    action_date DATETIME NOT NULL</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>我们先新建一张表用来保存日志。然后我们在BEGIN和END之间的代码块新建INSERT INTO 语句，也就是当我们插入一条信息的时候，同时会向payments_audit表格中插入一条日志</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $$</span><br><span class="line">DROP TRIGGER IF EXISTS payments_after_insert;</span><br><span class="line">CREATE TRIGGER payments_after_insert</span><br><span class="line">    AFTER INSERT ON payments</span><br><span class="line">    FOR EACH ROW</span><br><span class="line">BEGIN</span><br><span class="line">    UPDATE invoices</span><br><span class="line">    SET payment_total &#x3D; payment_total+NEW.amount</span><br><span class="line">    WHERE invoice_id &#x3D; NEW.invoice_id;</span><br><span class="line"></span><br><span class="line">    INSERT INTO payments_audit</span><br><span class="line">    VALUES(NEW.client_id,NEW.date,NEW.amount,&#39;Insert&#39;,NOW());</span><br><span class="line"></span><br><span class="line">END $$</span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure>
<p>但是这样比较麻烦，因为我们如果需要系统地记录日志，就必须对每张表都创建一个TRIGGER。在后面我们可以创建通用审计日志来达成这个目的。</p>
<h3 id="Events"><a href="#Events" class="headerlink" title="Events"></a>Events</h3><p>Event is a task (or block of SQL code) that gets executed according to a schedule </p>
<p>我们可以设置event 每天进行几次，每个几个小时进行。利用event我们可以简化数据库维护工作。比如删除状态数据，将数据从一个表拷贝到另一个表，或者把数据聚合起来生成报告。</p>
<p>在mysql中，有一个event_schedule 功能，这个功能默认是打开的，只有当这个功能打开的时候，event才能发挥它定时运作的功能，如果不想打开，可以 利用代码 关闭</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SET GLOBAL event_scheduler &#x3D; OFF</span><br></pre></td></tr></table></figure>
<p>现在来看看怎么创建一个 Event</p>
<p>首先切换分隔符为$$ </p>
<ol>
<li><p>利用CREATE EVENT来创建一个事件，我们需要给事件创建一个一目了然的名字。</p>
</li>
<li><p>按时间间隔来给时间命名是一个好习惯。第一个可以实daily，hourly，once之类的。这样我们可以很容易找到某种事件的时间间隔。</p>
</li>
<li><p>接着用ON SCHEDULE 给这个事件创造一个时间计划：多长时间执行一次，是一次性的还是固定时刻的。如果只进行一次，那么用AT + ‘YYYY-MM-DD’ ,如果想要按找特定的事件进行，那么EVERY 1 YEAR/2 DAY ，如果想要规定开始时间和终止时间，只要在后面加上 STARTS ‘YYYY-MM-DD’ ENDS ‘YYYY-MM-DD’ 即可</p>
</li>
<li>在DO BEGIN中加入EVENT想要执行的操作。这里是删除距今超过1年的action_date 信息。我们也可以利用DATESUB(NOW(),INTERVAL 1 YEAR) 来表达相同的意思。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $$</span><br><span class="line"></span><br><span class="line">CREATE EVENT yearly_delete_stale_audit_rows</span><br><span class="line">ON SCHEDULE</span><br><span class="line">    -- AT &#39;2020-08-08&#39;</span><br><span class="line">    EVERY 1 YEAR STARTS &#39;2020-08-20&#39; ENDS &#39;2029-01-01&#39;</span><br><span class="line">DO BEGIN</span><br><span class="line">    DELETE FROM payments_audit</span><br><span class="line">    WHERE action_date&lt;NOW()-INTERVAL 1 YEAR ;</span><br><span class="line"></span><br><span class="line">END $$</span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure>
<h3 id="Viewing-Dropping-and-Altering-Events"><a href="#Viewing-Dropping-and-Altering-Events" class="headerlink" title="Viewing, Dropping and Altering Events"></a>Viewing, Dropping and Altering Events</h3><p>我们可以用 SHOW EVENTS语句 来显示当前的EVENT</p>
<p>利用 DROP EVENT IF EXISTS + 名字 来删除事件</p>
<p>利用 ALTER来修改事件，只需要把 CREATE EVENT 改成 ALTER EVENT 即可，利用ALTER 我们可以临时启动或者关闭一个事件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER EVENT yearly_delete_stale_audit_rows ENABLE;</span><br><span class="line">ALTER EVENT yearly_delete_stale_audit_rows DISABLE;</span><br></pre></td></tr></table></figure>
<h2 id="事务和并发"><a href="#事务和并发" class="headerlink" title="事务和并发"></a>事务和并发</h2><h3 id="Transactions"><a href="#Transactions" class="headerlink" title="Transactions"></a>Transactions</h3><p>Transaction is a group of sql statements that represent a single unit of work</p>
<p>我们是在需要对数据库进行多处修改的场景使用Transaction，所有的语句必须成功执行，否则Transaction就会失败。</p>
<p>我们不想要一些插入语句进行到一半的时候程序崩了，导致信息半生不熟的情况，这时候就要使用Transaction，也就是如果出现错误，整个语句块都作废。</p>
<p>Transaction有几个特性：</p>
<p>第一个是Atomicity，也就是不可分割的，一个事务不管其包含多少语句都是一个完整的整体。除非事务中所有的语句都成功执行，Transaction才算执行成功，否则所有修改都会回滚。</p>
<p>第二个特性是Consistency，也就是说我们使用了Transaction之后，我们的数据库永远保持一致。我们不会保存没有商品的订单记录。</p>
<p>第三个特性是Isolation。也就是说 Transaction之间是相互隔离的，特别是他们要修改同一个数据的时候。他们之间不受影响。如果多个Transaction要修改同一个数据，这条记录就会被锁定，每次只能有一个Transaction有权修改。其他的Transaction需要等待这个Transaction执行完毕</p>
<p>最后一个是Durability, 意思是一但一个Transaction被提交，它的修改就是永久性的，任何崩溃的情况（停电、宕机),也不会影响数据的修改</p>
<p>我们称这四个属性为 ACID</p>
<h3 id="Creating-Transactions"><a href="#Creating-Transactions" class="headerlink" title="Creating Transactions"></a>Creating Transactions</h3><p>我们利用 <strong>START TRANSACTION</strong> 标志着创建一个Transaction，然后在里面进行我们想要的操作，比如插入、删除信息。最后用<strong>COMMIT </strong>代表提交 Transaction 。如果在执行到第一个INSERT INTO 之后与Mysql断开连接，那么这第一条信息将不会出现在表中，因为回滚了。</p>
<p>有时候我们会手工创建Transaction 回滚来进行某些测试。这时候可以使用ROLLBACK代替COMMIT</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">USE sql_store;</span><br><span class="line">START TRANSACTION ;</span><br><span class="line"></span><br><span class="line">INSERT INTO orders (customer_id,order_date,status)</span><br><span class="line">VALUES (1,&#39;2019-01-01&#39;,1);</span><br><span class="line"></span><br><span class="line">INSERT INTO order_items</span><br><span class="line">VALUES (LAST_INSERT_ID(),1,1,1);</span><br><span class="line"></span><br><span class="line">COMMIT</span><br></pre></td></tr></table></figure>
<p>事实上，当我们在对数据库执行UPDATE ,DELETE 等操作的时候，Mysql会自动把他包裹上Transaction 的外衣并自动提交。这个功能通过全局环境变量 Autocommit : ON 来控制</p>
<h3 id="Concurrency-and-Locking"><a href="#Concurrency-and-Locking" class="headerlink" title="Concurrency and Locking"></a>Concurrency and Locking</h3><p>迄今为止，我们的数据库只有一个用户。但现实中可能是同一个数据库同时被好几个用户同时访问。这就是我们说的并发(Concurrency )。</p>
<p>比如，我们对一个数据库同时开两个连接。并对同一条信息执行一模一样的Transaction，这v时，当第一个Transaction在执行的时候，这条信息就会上锁，第二个Transaction只有在第一个结束之后，才能继续运行。</p>
<h3 id="Concurrency-Problems"><a href="#Concurrency-Problems" class="headerlink" title="Concurrency Problems"></a>Concurrency Problems</h3><h4 id="Lost-Updates"><a href="#Lost-Updates" class="headerlink" title="Lost Updates"></a>Lost Updates</h4><p>在特殊情况下，当两个事务试图更新相同的数据而我们不使用锁的时候，会发生 Lost Updates</p>
<p><img src="/2020/06/26/mysql%E5%9F%BA%E7%A1%80%E4%B8%8B/10.png" style="zoom: 80%;"></p>
<p>我们对一条数据进行两次更新，一次更改洲名，一次更改积分，但是这样一来，如果B是后更新的，那么B中的数据会覆盖掉A中更新的数据，造成更新丢失。我们这时候就需要Locks来规避这种情况的发生，默认情况下，Mysql使用了锁定机制以防止两个事务同时更新相同的数据，他们在一个队列中，按照顺序进行。</p>
<h4 id="Dirty-Reads"><a href="#Dirty-Reads" class="headerlink" title="Dirty Reads"></a>Dirty Reads</h4><p>Dirty Reads 发生在事务读取还没有提交的数据时，比如下图。事务A想把顾客的分设置为20，在还没有提交的时候，事务B读取了表中更新过后的数据。如果每一分代表优惠一元，那么这位顾客可以优惠20元。但是事务A在提交前发生回滚。这时候事务B还没结束，所以事务B读取的数据是非法的。也就是说，在这种情况下，白给了顾客20元的优惠，因为事务B中读取了未提交的数据 。这就是 Dirty Reads，很形象。因为我们读取了污染的数据。 </p>
<p><img src="/2020/06/26/mysql%E5%9F%BA%E7%A1%80%E4%B8%8B/11.png" style="zoom: 80%;"></p>
<p>为了解决这个问题，我们需要围绕事务提供一定程度的隔离度。所以事务修改的数据并不会立刻被其他事务读取到。之前我们提到的，实现Recovery Schedule的话，就不会发生这种问题了</p>
<h4 id="Non-repeating-Reads"><a href="#Non-repeating-Reads" class="headerlink" title="Non-repeating Reads"></a>Non-repeating Reads</h4><p> 如果在事务进行过程中，我们读取了两次、得到了不一样的结果怎么办.比如下图。事务A中选择了数据表中一条值为10的信息，但是这时候，B把这条信息的数据改成了0，现在A中的子查询又想读取这条信息，发现这时候其值已经变成0了。对于这种不重复读取问题，我们可以声明，任何时候都以最新的数据作为计算依据</p>
<p><img src="/2020/06/26/mysql%E5%9F%BA%E7%A1%80%E4%B8%8B/12.png" style="zoom: 80%;"></p>
<h4 id="Phantom-Reads"><a href="#Phantom-Reads" class="headerlink" title="Phantom Reads"></a>Phantom Reads</h4><p>假设有个事务A，我们查询了所有积分大于10的客户，发给他们额外的打折券。这时候，一个事务B修改了一位顾客甲，把他的分修改到了20。但这时候事务A已经完成查询，甲并不在查询结果当中。这就是我们说的Phantom Read，数据有时候会像幽灵一样突然冒出来。是否解决这个问题要看我们的业务、以及把这个客户纳入我们的事务中的重要性。</p>
<h3 id="Isolation-Levels"><a href="#Isolation-Levels" class="headerlink" title="Isolation Levels"></a>Isolation Levels</h3><h4 id="Read-Uncommitted"><a href="#Read-Uncommitted" class="headerlink" title="Read Uncommitted"></a>Read Uncommitted</h4><p> 是最低级别的隔离等级。它什么都不会做，漏洞最多。会出现上面所说的所有问题。因为事务之间没有互相隔离，他们可以读取互相做出的未提交修改。</p>
<h4 id="Read-Committed"><a href="#Read-Committed" class="headerlink" title="Read Committed"></a>Read Committed</h4><p>当我们使用这个隔离级别时，事务只能读取已经提交了的数据。如果我们需要在事务中进行商务上的计算，我们的决定是基于有效的、已经提交的数据。事务运行之后有数据发生了变化，事务也不会去关注这个问题。这个隔离级别可以避免Dirty Read这个问题</p>
<h4 id="Repeatable-Read："><a href="#Repeatable-Read：" class="headerlink" title="Repeatable Read："></a>Repeatable Read：</h4><p>在这种级别下，读取的内容是可重复的，就算是数据被其他的事务修改了也没事。我们看到的只是第一次读取时就生成的快照。这个级别可以避免 Lost Updates, Dirty Reads 和 Non-repeating Reads这三个问题</p>
<p><img src="/2020/06/26/mysql%E5%9F%BA%E7%A1%80%E4%B8%8B/14.png"></p>
<h4 id="Serializable"><a href="#Serializable" class="headerlink" title="Serializable"></a>Serializable</h4><p>出现Phantom Reads的时候，我们可以将这个事务的隔离级别设置为<strong>Serializable</strong>.这将保证事务会知道其他事务正在对数据进行修改。如果这时候其他事务正在对数据进行修改的画，那么设置为<strong>Serializable</strong>的事务就需要等待，直到其他事务完成才能进行查询等操作。这是应用于事务的最高级别的隔离，可以规避所有的问题。但是当修改的事务越来越多，我们的系统会变得越来越慢，所以这种隔离等级牺牲了性能和扩展性。因此，我们应该谨慎使用，只有在绝对关键并且一定要有防止Phantom Read的情况下。</p>
<h3 id="Transaction-Isolation-Levels"><a href="#Transaction-Isolation-Levels" class="headerlink" title="Transaction Isolation Levels"></a>Transaction Isolation Levels</h3><p>下面这张图是一个很好的归纳。功能越强大的隔离等级，性能和扩展性越差。但是越低的隔离等级，性能越好。这样能让更多的用户同时访问数据库。</p>
<p><img src="/2020/06/26/mysql%E5%9F%BA%E7%A1%80%E4%B8%8B/13.png" style="zoom: 80%;"></p>
<p>Mysql中默认分的隔离等级是 Repeatable Read,这在大部分场景下都很好用。性能表现很好并解决了大部分问题(除了 Phantom Reads) .如果我们想规避Phantom Reads，我们可以把隔离等级设置为Serialization。对于剩下两个等级，我们可以在不需要精确的一致性的情况下使用，如批量报告(这时候数据肯定是更新好的，我需要的是更好的性能)</p>
<p>用这行代码可以显示当前的隔离等级</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW VARIABLES LIKE &#39;transaction_isolation&#39;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/06/26/mysql%E5%9F%BA%E7%A1%80%E4%B8%8B/15.png" style="zoom: 80%;"></p>
<p>我们使用下面这句话可以修改隔离等级</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SET TRANSACTION ISOLATION LEVEL SERIALIZABLE ;</span><br></pre></td></tr></table></figure>
<p>执行后，会在下一次事务执行时修改隔离等级。我们也可以在当前的session或者connection中设置隔离等级。我们在前面加SESSION关键字，只要我们的这个连接任务还打开着，所有的事务都会被设置。当然我们也可以把SESSION换成GLOBAL。</p>
<p>当我们的程序中有个执行某些事务的函数，那么当运行的时候，我们使用SESSION即可，因为我们只需要为这个Session或者connection修改等级，步骤是：连接到库，修改等级，执行事务，关闭连接。这种操作并不会影响到其他的事物</p>
<h3 id="Deadlocks"><a href="#Deadlocks" class="headerlink" title="Deadlocks"></a>Deadlocks</h3><p>死锁发生在不同的事务都无法完成的情况下，因为每个事务都持有另一个事务需要的锁，所以事务都会上对方等待而不会释放自己的锁</p>
<h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><h3 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h3><p>在mysql中有几种数据类型的分类。</p>
<p><img src="/2020/06/26/mysql%E5%9F%BA%E7%A1%80%E4%B8%8B/16.png" style="zoom: 80%;"></p>
<h3 id="String-Types"><a href="#String-Types" class="headerlink" title="String Types"></a>String Types</h3><p>String Types 分为 好几种</p>
<p>Char字符用来存放固定长度的字符，比如世界各个国家的缩写，美国各个州的缩写。Varchar是用来保存可变长度的字符，比如用户名、密码、Email地址等。String类型也可以用来保存数字类型的数据，比如邮政编码、电话号码，因为这些数字并不是用来计算的。另外，这样的数据也会包含短横线或者括号。这也是另一个要用字符串保存着类数据的理由。</p>
<p>我们需要有良好的习惯。给一些特定类别的数据类型固定字符串规则。比如</p>
<p>VARCHAR(50) for short strings</p>
<p>VARCHAR(255) for medium-length strings </p>
<p>如果VARCHAR不够用了，我们可以用MEDIUMTEXT ，其可存储16MB的数据，非常适合存储JSON对象，CS视图字符串以及短至中型的文章。</p>
<p>当然LONGTEXT可以存储4GB的内存，可以存储日志等。</p>
<p>还有TINYTEXT和TEXT，各自有各自的存储空间</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>类型</th>
<th>容量及描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>CHAR(x)</td>
<td>fixed-length</td>
</tr>
<tr>
<td>VARCHAR(x)</td>
<td>max: 65535 characters(~64kb)</td>
</tr>
<tr>
<td>MEDIUMTEXT</td>
<td>max:16MB</td>
</tr>
<tr>
<td>LONGTEXT</td>
<td>max:4GB</td>
</tr>
<tr>
<td>TINYTEXT</td>
<td>max: 255bytes</td>
</tr>
<tr>
<td>TEXT</td>
<td>max:64kb</td>
</tr>
</tbody>
</table>
</div>
<p>比起TEXT最好使用VARCHAR，因为VARCHAR是可以作为索引的。索引可以加快查询数据。</p>
<p>英文字母占1字节；欧洲和中东文字占2字节；亚洲文字(中文、日文)占3字节</p>
<h3 id="Integer-Types"><a href="#Integer-Types" class="headerlink" title="Integer Types"></a>Integer Types</h3><p>我们使用整数来保存并没有小数位的数字，比如1234，mysql有5中整数类型，各自能存储的容量不同。</p>
<p>TINYINTY 短整数，只占用1个字节。取值[-128,127]</p>
<p>UNSIGNED TINYINT 无符号短整数，取值[0,255]用来存储人类年龄很合适，可以防止意外输入赋值的问题。</p>
<p>SMALLINT 2byte 取值[-32k,32k] </p>
<p>MEDIUMINT 3byte 取值[-8M，8M]</p>
<p>INT 4byte 取值[-2B,2B]</p>
<p>BIGINT 8byte  取值[-9Z,9Z]</p>
<p>除了UNSIGNED，数字类型还有一个属性，就是ZEROFILL,这种情况用0填充虚位。比如 0001，0003</p>
<p>最好永远选择适合我的最小数据类型。</p>
<h3 id="Fixed-point-and-Floating-point-Types"><a href="#Fixed-point-and-Floating-point-Types" class="headerlink" title="Fixed-point and Floating-point Types"></a>Fixed-point and Floating-point Types</h3><p>mysql中有3种保存小数的类型。</p>
<p>DECIMAL(p,s) 这种类型的数字，小数点后面的位数是固定的。当使用DECIMAL类型时，需要指定小数位数。p代表整数的维数，可以选择1到65。s代表保留小数位数。比如DECIMAL(9,2) =&gt;1234567.89</p>
<p>DECIMAL可以用DEC, NUMERIC,FIXED</p>
<p>第二种是FLOAT ，4b</p>
<p>第三种是DOUBLE, 8b</p>
<p>但是FLOAT和DOUBLE不能精确的记录数字，所以我们如果想要精确的记录数字就必须要用DECIMAL，但是如果我需要做科学计算中使用很大或者很小的数，那么可以用FLOAT或者 DOUBLE</p>
<h3 id="Boolean-Types"><a href="#Boolean-Types" class="headerlink" title="Boolean Types"></a>Boolean Types</h3><p>布尔值实际上就是短整数的另外一个形态。 数值类型可以是BOOL或者BOOLEAN</p>
<p>TRUE代表1，FALSE代表0</p>
<h3 id="Enum-and-Set-Types"><a href="#Enum-and-Set-Types" class="headerlink" title="Enum and Set Types"></a>Enum and Set Types</h3><p>有时候我们需要某个字段的取值是有限的若干字符串。比如，有个列只能插入 small，medium，big三种。那么在表格中我们可以这样设置其数据类型</p>
<p>ENUM(‘small’,’medium’,’big’ )</p>
<p>这时候，只能三选一，任何其他的值都会让mysql报错。</p>
<p>但是ENUM类型的效率不是很好，当我们想增加一种选项的时候我们必须重新设计表格。</p>
<p>更好的方式是新建一张叫做Size的表，这个表中既可以保存大小，又可以保存其精确值。这样我们就可以重复利用这张表格了。如果想列出所有的大小，只需要写一局查询语句即可，这种表格叫做查询表。比如：</p>
<p><img src="/2020/06/26/mysql%E5%9F%BA%E7%A1%80%E4%B8%8B/17.png" style="zoom: 80%;"></p>
<p>mysql中还有一种类似的数据类型为SET，它让我们在列中可以保存SET提供的多个数据。但也不建议使用</p>
<h3 id="Date-and-Time-Types"><a href="#Date-and-Time-Types" class="headerlink" title="Date and Time Types"></a>Date and Time Types</h3><p>mysql中有几种保存日期时间的类型。</p>
<p>DATE 用于保存日期，但是没有时间部分</p>
<p>TIME 用来保存时间</p>
<p>DATETIME 8b </p>
<p>TIMESTAMP  4b 我们经常使用TIMESTAMP时间戳来记录数据插入和最后修改的时间，最大年份是2038年。超过2038年只能使用DATETIME来保存。</p>
<p>YEAR</p>
<h3 id="Blob-Types"><a href="#Blob-Types" class="headerlink" title="Blob Types"></a>Blob Types</h3><p>Blob用来保存大的二进制数据，如图像、视频、PDF、几乎任何二进制文件。mysql有四种BLOB类型</p>
<p>TINYBLOB 255b</p>
<p>BLOB 65KB</p>
<p>MEDIUMBLOB 16MB</p>
<p>LONGBLOB 4GB</p>
<p>通常来说，我们应该将文件放到数据库外面。因为关系型数据库是用来处理结构化数据的，而不是二进制数据。如果将文件保存到库当中，库的大小将会增长非常快、备份起来非常慢、性能上出现严重问题(从库中读取图片的速度永远慢于直接从文件系统读取。最后，我们还需要单独编写文件的存储代码</p>
<h3 id="JSON-Type"><a href="#JSON-Type" class="headerlink" title="JSON Type"></a>JSON Type</h3><p>mysql也可以存储JSON文件。</p>
<p><img src="/2020/06/26/mysql%E5%9F%BA%E7%A1%80%E4%B8%8B/18.png" style="zoom: 50%;"></p>
<p>在设计了一列数据类型为JSON之后，我们可以这样插入一条JSON信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">UPDATE products</span><br><span class="line">SET properties &#x3D;</span><br><span class="line">&#39;&#123;</span><br><span class="line">  &quot;dimentions&quot;:[1,2,3],</span><br><span class="line">  &quot;weight&quot;:10,</span><br><span class="line">  &quot;manufacturer&quot;: &#123;&quot;name&quot;: &quot;sony&quot; &#125;</span><br><span class="line">&#125;&#39;</span><br><span class="line">WHERE product_id &#x3D; 1;</span><br></pre></td></tr></table></figure>
<p>此外，我们还可以看看另一个创建JSON对象的方法：使用特定的哈数来创建JSON对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">UPDATE products</span><br><span class="line">SET properties =JSON_OBJECT(</span><br><span class="line">    <span class="string">'weight'</span>,<span class="string">'10'</span>,</span><br><span class="line">    <span class="string">'dimensions'</span>,JSON_ARRAY(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>),</span><br><span class="line">    <span class="string">'manufacturer'</span>,JSON_OBJECT(<span class="string">'name'</span>,<span class="string">'sony'</span>)</span><br><span class="line">    )</span><br><span class="line">WHERE product_id = <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<p>对于JSON类型，我们可以检索特定的键值对，这比VARCHAR的优势更大，因为String类通常不能对字符串进行分割</p>
<p>比如用这样的mysql语句进行查询. $ 代表了JSON对象，用点运算符连接对象中的KEY</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT product_id,JSON_EXTRACT(properties,&#39;$.weight&#39;) AS weight</span><br><span class="line">FROM products</span><br><span class="line">WHERE product_id &#x3D; 1;</span><br></pre></td></tr></table></figure>
<p>但是我们还有更简单的写法。我们可以用路径指示符，也就是箭头符号来执行查询。这里，dimentions是一个数组，所以我们可以通过用中括号的方法来获取数组中某个特定的值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT product_id,properties -&gt; &#39;$.dimentions[1]&#39;</span><br><span class="line">FROM products</span><br><span class="line">WHERE product_id &#x3D;1;</span><br></pre></td></tr></table></figure>
<p>又比如，-&gt;&gt; 是为了让manufacturer的name属性 sony没有引号出现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT product_id,properties -&gt;&gt; &#39;$.manufacturer.name&#39;</span><br><span class="line">FROM products</span><br><span class="line">WHERE product_id &#x3D;1;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/06/26/mysql%E5%9F%BA%E7%A1%80%E4%B8%8B/19.png"></p>
<p>还有一些可以更新JSON数据的方法。比如我想修改weight对应的键值，怎么办？我们可以使用JSON_SET方法。它不仅可以修改键值，还可以增加键</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">UPDATE products</span><br><span class="line">SET properties &#x3D; JSON_SET(</span><br><span class="line">    properties,</span><br><span class="line">    &#39;$.weight&#39;,20,</span><br><span class="line">    &#39;$.age&#39;,10 # age原本不存在</span><br><span class="line">    )</span><br><span class="line">WHERE product_id &#x3D; 1;</span><br></pre></td></tr></table></figure>
<p>现在我们可以使用JSON_REMOVE来意出我们不需要的键</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">UPDATE products</span><br><span class="line">SET properties &#x3D; JSON_REMOVE(</span><br><span class="line">    properties,</span><br><span class="line">    &#39;$.age&#39;</span><br><span class="line">    )</span><br><span class="line">WHERE product_id &#x3D; 1;</span><br></pre></td></tr></table></figure>
<h2 id="设计数据库"><a href="#设计数据库" class="headerlink" title="设计数据库"></a>设计数据库</h2><h3 id="Introduction-1"><a href="#Introduction-1" class="headerlink" title="Introduction"></a>Introduction</h3><h3 id="Data-Modelling"><a href="#Data-Modelling" class="headerlink" title="Data Modelling"></a>Data Modelling</h3><h3 id="Conceptual-Models"><a href="#Conceptual-Models" class="headerlink" title="Conceptual Models"></a>Conceptual Models</h3><h3 id="Logical-Models"><a href="#Logical-Models" class="headerlink" title="Logical Models"></a>Logical Models</h3><h3 id="Physical-Models"><a href="#Physical-Models" class="headerlink" title="Physical Models"></a>Physical Models</h3><h3 id="Primary-Keys"><a href="#Primary-Keys" class="headerlink" title="Primary Keys"></a>Primary Keys</h3><h3 id="Foreign-Keys"><a href="#Foreign-Keys" class="headerlink" title="Foreign Keys"></a>Foreign Keys</h3><h3 id="Foreign-Key-Constraints"><a href="#Foreign-Key-Constraints" class="headerlink" title="Foreign Key Constraints"></a>Foreign Key Constraints</h3><h3 id="Normalization"><a href="#Normalization" class="headerlink" title="Normalization"></a>Normalization</h3><h3 id="1NF-First-Normal-Form"><a href="#1NF-First-Normal-Form" class="headerlink" title="1NF- First Normal Form"></a>1NF- First Normal Form</h3><h3 id="Link-Tables"><a href="#Link-Tables" class="headerlink" title="Link Tables"></a>Link Tables</h3><h3 id="2NF-Second-Normal-Form"><a href="#2NF-Second-Normal-Form" class="headerlink" title="2NF- Second Normal Form"></a>2NF- Second Normal Form</h3><h3 id="3NF-Third-Normal-Form"><a href="#3NF-Third-Normal-Form" class="headerlink" title="3NF- Third Normal Form"></a>3NF- Third Normal Form</h3><h3 id="My-Pragmatic-Advice"><a href="#My-Pragmatic-Advice" class="headerlink" title="My Pragmatic Advice"></a>My Pragmatic Advice</h3><h3 id="Don’t-Model-the-Universe"><a href="#Don’t-Model-the-Universe" class="headerlink" title="Don’t Model the Universe"></a>Don’t Model the Universe</h3><h3 id="Forward-Engineering-a-Model"><a href="#Forward-Engineering-a-Model" class="headerlink" title="Forward Engineering a Model"></a>Forward Engineering a Model</h3><h3 id="Synchronizing-a-Model-with-a-Database"><a href="#Synchronizing-a-Model-with-a-Database" class="headerlink" title="Synchronizing a Model with a Database"></a>Synchronizing a Model with a Database</h3><h3 id="Reverse-Engineering-a-Database"><a href="#Reverse-Engineering-a-Database" class="headerlink" title="Reverse Engineering a Database"></a>Reverse Engineering a Database</h3><h3 id="Project-Flight-Booking-System"><a href="#Project-Flight-Booking-System" class="headerlink" title="Project- Flight Booking System"></a>Project- Flight Booking System</h3><h3 id="Solution-Conceptual-Model"><a href="#Solution-Conceptual-Model" class="headerlink" title="Solution- Conceptual Model"></a>Solution- Conceptual Model</h3><h3 id="Solution-Logical-Model"><a href="#Solution-Logical-Model" class="headerlink" title="Solution- Logical Model"></a>Solution- Logical Model</h3><h3 id="Project-Video-Rental-Application"><a href="#Project-Video-Rental-Application" class="headerlink" title="Project - Video Rental Application"></a>Project - Video Rental Application</h3><h3 id="Solution-Conceptual-Model-1"><a href="#Solution-Conceptual-Model-1" class="headerlink" title="Solution- Conceptual Model"></a>Solution- Conceptual Model</h3><h3 id="Solution-Logical-Model-1"><a href="#Solution-Logical-Model-1" class="headerlink" title="Solution- Logical Model"></a>Solution- Logical Model</h3><h3 id="Creating-and-Dropping-Databases"><a href="#Creating-and-Dropping-Databases" class="headerlink" title="Creating and Dropping Databases"></a>Creating and Dropping Databases</h3><h3 id="Creating-Tables"><a href="#Creating-Tables" class="headerlink" title="Creating Tables"></a>Creating Tables</h3><h3 id="Altering-Tables"><a href="#Altering-Tables" class="headerlink" title="Altering Tables"></a>Altering Tables</h3><h3 id="Creating-Relationships"><a href="#Creating-Relationships" class="headerlink" title="Creating Relationships"></a>Creating Relationships</h3><h3 id="Altering-Primary-and-Foreign-Key-Constraints"><a href="#Altering-Primary-and-Foreign-Key-Constraints" class="headerlink" title="Altering Primary and Foreign Key Constraints"></a>Altering Primary and Foreign Key Constraints</h3><h3 id="Character-Sets-and-Collations"><a href="#Character-Sets-and-Collations" class="headerlink" title="Character Sets and Collations"></a>Character Sets and Collations</h3><h3 id="Storage-Engines"><a href="#Storage-Engines" class="headerlink" title="Storage Engines"></a>Storage Engines</h3><h3 id="A-Quick-Note"><a href="#A-Quick-Note" class="headerlink" title="A Quick Note"></a>A Quick Note</h3><h2 id="高效的索引"><a href="#高效的索引" class="headerlink" title="高效的索引"></a>高效的索引</h2><h3 id="Introduction-2"><a href="#Introduction-2" class="headerlink" title="Introduction"></a>Introduction</h3><h3 id="Indexes"><a href="#Indexes" class="headerlink" title="Indexes"></a>Indexes</h3><h3 id="Creating-Indexes"><a href="#Creating-Indexes" class="headerlink" title="Creating Indexes"></a>Creating Indexes</h3><h3 id="Viewing-Indexes"><a href="#Viewing-Indexes" class="headerlink" title="Viewing Indexes"></a>Viewing Indexes</h3><h3 id="Prefix-Indexes"><a href="#Prefix-Indexes" class="headerlink" title="Prefix Indexes"></a>Prefix Indexes</h3><h3 id="Full-text-Indexes"><a href="#Full-text-Indexes" class="headerlink" title="Full-text Indexes"></a>Full-text Indexes</h3><h3 id="Composite-Indexes"><a href="#Composite-Indexes" class="headerlink" title="Composite Indexes"></a>Composite Indexes</h3><h3 id="Order-of-Columns-in-Composite-Indexes"><a href="#Order-of-Columns-in-Composite-Indexes" class="headerlink" title="Order of Columns in Composite Indexes"></a>Order of Columns in Composite Indexes</h3><h3 id="When-Indexes-are-Ignored"><a href="#When-Indexes-are-Ignored" class="headerlink" title="When Indexes are Ignored"></a>When Indexes are Ignored</h3><h3 id="Using-Indexes-for-Sorting"><a href="#Using-Indexes-for-Sorting" class="headerlink" title="Using Indexes for Sorting"></a>Using Indexes for Sorting</h3><h3 id="Covering-Indexese"><a href="#Covering-Indexese" class="headerlink" title="Covering Indexese"></a>Covering Indexese</h3><h3 id="Index-Maintenance"><a href="#Index-Maintenance" class="headerlink" title="Index Maintenance"></a>Index Maintenance</h3><h3 id="Performance-Best-Practices"><a href="#Performance-Best-Practices" class="headerlink" title="Performance Best Practices"></a>Performance Best Practices</h3><h2 id="保护数据库"><a href="#保护数据库" class="headerlink" title="保护数据库"></a>保护数据库</h2><h3 id="Introduction-3"><a href="#Introduction-3" class="headerlink" title="Introduction"></a>Introduction</h3><h3 id="Creating-a-User"><a href="#Creating-a-User" class="headerlink" title="Creating a User"></a>Creating a User</h3><h3 id="Viewing-Users"><a href="#Viewing-Users" class="headerlink" title="Viewing Users"></a>Viewing Users</h3><h3 id="Dropping-Users"><a href="#Dropping-Users" class="headerlink" title="Dropping Users"></a>Dropping Users</h3><h3 id="Changing-Passwords"><a href="#Changing-Passwords" class="headerlink" title="Changing Passwords"></a>Changing Passwords</h3><h3 id="Granting-Privileges"><a href="#Granting-Privileges" class="headerlink" title="Granting Privileges"></a>Granting Privileges</h3><h3 id="Viewing-Privileges"><a href="#Viewing-Privileges" class="headerlink" title="Viewing Privileges"></a>Viewing Privileges</h3><h3 id="Revoking-Privileges"><a href="#Revoking-Privileges" class="headerlink" title="Revoking Privileges"></a>Revoking Privileges</h3><h3 id="Wrap-Up"><a href="#Wrap-Up" class="headerlink" title="Wrap Up"></a>Wrap Up</h3>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/" class="post-title-link" itemprop="url">PostgreSql基础</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-06-26 21:03:46" itemprop="dateCreated datePublished" datetime="2020-06-26T21:03:46+08:00">2020-06-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-07-17 08:47:14" itemprop="dateModified" datetime="2021-07-17T08:47:14+08:00">2021-07-17</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="PostgreSql基础"><a href="#PostgreSql基础" class="headerlink" title="PostgreSql基础"></a>PostgreSql基础</h1><p>学习视频：</p>
<p><a href="https://www.youtube.com/watch?v=FFo8pH-kfQ8&amp;list=PLwvrYc43l1MxAEOI_KwGe8l42uJxMoKeS&amp;index=6" target="_blank" rel="noopener">https://www.youtube.com/watch?v=FFo8pH-kfQ8&amp;list=PLwvrYc43l1MxAEOI_KwGe8l42uJxMoKeS&amp;index=6</a></p>
<p>首先我们下载Postgresql11 </p>
<p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/1.png" style="zoom: 50%;"></p>
<h3 id="GUI-Clients-vs-Terminal-CMD-Clients"><a href="#GUI-Clients-vs-Terminal-CMD-Clients" class="headerlink" title="GUI Clients vs Terminal/CMD Clients"></a>GUI Clients vs Terminal/CMD Clients</h3><p>链接postgresql的方法有好几种，我们这里使用在终端链接并操作，因为这样能够“吃得苦中苦“ 而且当我链接远程postgresql的时候会更加得心应手</p>
<p>连接工具的话，我们当前的DataGrip是一个不错的选择。当然可以用Postgresql自己的pgadmin </p>
<h3 id="Setup-PSQL-Windows"><a href="#Setup-PSQL-Windows" class="headerlink" title="Setup PSQL (Windows)"></a>Setup PSQL (Windows)</h3><p>使用 SQL shell的时候</p>
<p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/2.png"></p>
<p>因为我们是在本地测试，所以我们直接选择默认的即可。 用户 postgres 的口令即我们安装时设置的密码</p>
<p>使用 pgAdmin的话就是傻瓜操作了</p>
<p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/3.png"></p>
<h3 id="How-to-Create-Database"><a href="#How-to-Create-Database" class="headerlink" title="How to Create Database"></a>How to Create Database</h3><p>\? 代表着 获取提示</p>
<p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/4.png"></p>
<p>\l 时显示当前所有的数据库列表的</p>
<p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/5.png" style="zoom:80%;"></p>
<p>我们可以创建自己的database</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">postgres=<span class="comment"># CREATE DATABASE test;</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/6.png" style="zoom:80%;"></p>
<h3 id="How-to-Connect-to-Databases"><a href="#How-to-Connect-to-Databases" class="headerlink" title="How to Connect to Databases"></a>How to Connect to Databases</h3><p>我们有两种方法连接数据库</p>
<p>psql —help 来获取帮助：</p>
<p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/7.png" style="zoom: 50%;"></p>
<p>连接到刚才的test数据库，我们可以采用这样的方法： psql -h localhost -p 5432 -U postgres test</p>
<p>还有一种则更加方便：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">postgres&#x3D;# \c test</span><br><span class="line">您现在已经连接到数据库 &quot;test&quot;,用户 &quot;postgres&quot;.</span><br><span class="line">test&#x3D;# \c postgres</span><br><span class="line">您现在已经连接到数据库 &quot;postgres&quot;,用户 &quot;postgres&quot;.</span><br></pre></td></tr></table></figure>
<h3 id="A-Very-Dangerous-Command"><a href="#A-Very-Dangerous-Command" class="headerlink" title="A Very Dangerous Command"></a>A Very Dangerous Command</h3><p>我们应该注意一行非常危险的命令： 删除库命令</p>
<p>删除库： <strong>DROP DATABASE test;</strong></p>
<p>注意所有语句必须加上分号！</p>
<p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/8.png"></p>
<h3 id="How-To-Create-Tables"><a href="#How-To-Create-Tables" class="headerlink" title="How To Create Tables"></a>How To Create Tables</h3><p>简历表格的模板:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> table_name(</span><br><span class="line">	<span class="keyword">Column</span> <span class="keyword">name</span>+ <span class="keyword">data</span> <span class="keyword">type</span> + <span class="keyword">constraints</span> <span class="keyword">if</span> <span class="keyword">any</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>然后我们具体实现一个 关于人的表格 </p>
<p>在里面我们定义了5个字段，id是Interger类型，first_name,last_name,gender 都是VARCHAR类型的，date_of_birth 是TIMESTAMP(包括日期和时分秒）或者DATE（仅有日期）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> person (</span><br><span class="line">	<span class="keyword">id</span> <span class="built_in">int</span>,</span><br><span class="line">	first_name <span class="built_in">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">	last_name <span class="built_in">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">	gender <span class="built_in">VARCHAR</span>(<span class="number">10</span>),</span><br><span class="line">    date_of_birth <span class="built_in">TIMESTAMP</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><a href="https://www.postgresql.org/docs/11/datatype.html" target="_blank" rel="noopener">https://www.postgresql.org/docs/11/datatype.html</a> 这是postgre 的文档，里面有所有的数据类型</p>
<h3 id="Creating-Tables-Without-Constraint"><a href="#Creating-Tables-Without-Constraint" class="headerlink" title="Creating Tables Without Constraint"></a>Creating Tables Without Constraint</h3><p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/9.png"></p>
<h3 id="Creating-Tables-with-Constraints"><a href="#Creating-Tables-with-Constraints" class="headerlink" title="Creating Tables with Constraints"></a>Creating Tables with Constraints</h3><p>我们刚才没有写任何校对规则，这就导致这张数据表不是很安全.我们想添加一些额外的限制条件到我们的表格当中。让插入的信息能够满足一些条件。因为我们不想让一个人没有id，没有名字，没有出生日期就被插入到这个表格当中去了。</p>
<p>所以我们需要在字段之后加入一些 constraints如下图所示</p>
<p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/10.png" style="zoom:80%;"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> person (</span><br><span class="line">	<span class="keyword">id</span> BIGSERIAL <span class="keyword">NOT</span> <span class="literal">NULL</span> PRIMARY <span class="keyword">KEY</span>,</span><br><span class="line">	first_name <span class="built_in">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">	last_name <span class="built_in">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">	gender <span class="built_in">VARCHAR</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">    date_of_birth <span class="built_in">DATE</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">    email <span class="built_in">VARCHAR</span>(<span class="number">150</span>),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/11.png" style="zoom:80%;"></p>
<p>我们设置id 是一个BIGSERIAL，也就是说它可以自动增长的，那么表建立以后发现有一个person_id_seq,他其实只是一个序列，并不是一张表格 我们可以用 \dt 来只显示table</p>
<h3 id="Insert-Into"><a href="#Insert-Into" class="headerlink" title="Insert Into"></a>Insert Into</h3><p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/12.png" style="zoom: 50%;"></p>
<p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/13.png" style="zoom: 67%;"></p>
<h3 id="Insert-Into-Example"><a href="#Insert-Into-Example" class="headerlink" title="Insert Into Example"></a>Insert Into Example</h3><p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/14.png" style="zoom:100%;"></p>
<h3 id="Generate-1000-Rows-with-Mockaroo"><a href="#Generate-1000-Rows-with-Mockaroo" class="headerlink" title="Generate 1000 Rows with Mockaroo"></a>Generate 1000 Rows with Mockaroo</h3><p>刚才我们添加了两条数据，现在我们添加1000条数据试试</p>
<p><a href="https://mockaroo.com/" target="_blank" rel="noopener">https://mockaroo.com/</a> 我们需要用这个网站帮我们生成数据</p>
<p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/15.png" style="zoom:100%;"></p>
<p>我们选择SQL格式，然后点击Download Data,这样就生成了我们的1000条数据</p>
<p>我们可以通过 \i FILEPATH 来导入一个sql文件，这回大大减少我们的工作</p>
<p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/16.png" style="zoom:100%;"></p>
<p>我们插入的时候 date是这样的 ： ‘1/29/2020’ 是 “月/日/年”的类型，所以我们要设置 datestyle = “SQL,MDY”</p>
<p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/17.png" style="zoom:100%;"></p>
<h3 id="Select-From"><a href="#Select-From" class="headerlink" title="Select From"></a>Select From</h3><p><a href="https://jasonxqh.github.io/2020/05/16/Mysql基础/#SELECT-语句">SELECT 语句</a></p>
<h3 id="Order-By"><a href="#Order-By" class="headerlink" title="Order By"></a>Order By</h3><p><a href="https://jasonxqh.github.io/2020/05/16/Mysql基础/#The-ORDER-BY-子句">The ORDER BY 子句</a></p>
<h3 id="Distinct"><a href="#Distinct" class="headerlink" title="Distinct"></a>Distinct</h3><p>为了不重复：</p>
<p>SELECT DISTINCT state FROM customers</p>
<p>SELECT country_of_birth FROM person ORDER BY country_of_birth</p>
<h3 id="Where-Clause-and-AND"><a href="#Where-Clause-and-AND" class="headerlink" title="Where Clause and AND"></a>Where Clause and AND</h3><p><a href="https://jasonxqh.github.io/2020/05/16/Mysql基础/#WHERE语句">WHERE语句</a></p>
<p><a href="https://jasonxqh.github.io/2020/05/16/Mysql基础/#利用and，or，not-实现多条件查询">利用and，or，not 实现多条件查询</a></p>
<h3 id="Comparison-Operators"><a href="#Comparison-Operators" class="headerlink" title="Comparison Operators"></a>Comparison Operators</h3><p><a href="https://jasonxqh.github.io/2020/05/16/Mysql基础/#WHERE语句"> WHERE语句</a></p>
<p>此外还可以用 &gt; ,&lt;,&gt;=,&lt;=,=,!=,&lt;&gt; 其中&lt;&gt;也是不等于的意思</p>
<h3 id="Limit-Offset-amp-Fetch"><a href="#Limit-Offset-amp-Fetch" class="headerlink" title="Limit, Offset &amp; Fetch"></a>Limit, Offset &amp; Fetch</h3><p><a href="https://jasonxqh.github.io/2020/05/16/Mysql基础/#LIMIT运算符"> LIMIT运算符</a></p>
<p>Offset 是跳过前面多少条数据的意思： </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> person <span class="keyword">OFFSET</span> <span class="number">5</span> <span class="keyword">LIMIT</span> <span class="number">5</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/18.png" style="zoom:100%;"></p>
<p>用 FETCH 也可以达到LIMIT的功能：</p>
<p>SELECT * FROM person OFFSET 5 FETCH  FIRST ROW ONLY = SELECT * FROM person OFFSET 5 LIMIT 1</p>
<h3 id="IN"><a href="#IN" class="headerlink" title="IN"></a>IN</h3><p><a href="https://jasonxqh.github.io/2020/05/16/Mysql基础/#IN-Operator-IN操作符"> IN Operator IN操作符</a></p>
<h3 id="Between"><a href="#Between" class="headerlink" title="Between"></a>Between</h3><p><a href="https://jasonxqh.github.io/2020/05/16/Mysql基础/#BETWEEN-运算符"> BETWEEN 运算符</a></p>
<h3 id="Like-And-iLike"><a href="#Like-And-iLike" class="headerlink" title="Like And iLike"></a>Like And iLike</h3><p><a href="https://jasonxqh.github.io/2020/05/16/Mysql基础/#LIKE-运算符"> LIKE 运算符</a></p>
<p>ILIKE 的意思是不区分大小写的LIKE</p>
<h3 id="Group-By"><a href="#Group-By" class="headerlink" title="Group By"></a>Group By</h3><p><a href="https://jasonxqh.github.io/2020/05/16/Mysql基础/#The-GROUO-BY-clause"> The GROUO BY clause</a></p>
<h3 id="Group-By-Having"><a href="#Group-By-Having" class="headerlink" title="Group By Having"></a>Group By Having</h3><p><a href="https://jasonxqh.github.io/2020/05/16/Mysql基础/#The-HAVING-clause">The HAVING clause</a></p>
<h3 id="Adding-New-Table-And-Data-Using-Mockaroo"><a href="#Adding-New-Table-And-Data-Using-Mockaroo" class="headerlink" title="Adding New Table And Data Using Mockaroo"></a>Adding New Table And Data Using Mockaroo</h3><p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/19.png" style="zoom:100%;"></p>
<h3 id="Calculating-Min-Max-amp-Average"><a href="#Calculating-Min-Max-amp-Average" class="headerlink" title="Calculating Min, Max &amp; Average"></a>Calculating Min, Max &amp; Average</h3><p><a href="https://jasonxqh.github.io/2020/05/16/Mysql基础/#Aggregate-function聚合函数">Aggregate function聚合函数</a></p>
<p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/20.png" style="zoom:100%;"></p>
<h3 id="Sum"><a href="#Sum" class="headerlink" title="Sum"></a>Sum</h3><p><a href="https://jasonxqh.github.io/2020/05/16/Mysql基础/#Aggregate-function聚合函数">Aggregate function聚合函数</a></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SUM</span>(price) <span class="keyword">FROM</span> car;</span><br></pre></td></tr></table></figure>
<h3 id="Basics-of-Arithmetic-Operators"><a href="#Basics-of-Arithmetic-Operators" class="headerlink" title="Basics of Arithmetic Operators"></a>Basics of Arithmetic Operators</h3><p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/21.png" style="zoom:100%;"></p>
<h3 id="Arithmetic-Operators-ROUND"><a href="#Arithmetic-Operators-ROUND" class="headerlink" title="Arithmetic Operators (ROUND)"></a>Arithmetic Operators (ROUND)</h3><p>注意，要能够使用ROUND函数，我们需要把字段设置成  NUMERIC(19,2)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,make,<span class="keyword">model</span>,price,<span class="keyword">ROUND</span>(price* <span class="number">.10</span>,<span class="number">2</span>) ,<span class="keyword">ROUND</span>(price-(price*<span class="number">.10</span>),<span class="number">2</span>) <span class="keyword">FROM</span> car;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/22.png" style="zoom: 80%;"></p>
<h3 id="Alias"><a href="#Alias" class="headerlink" title="Alias"></a>Alias</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">SELECT</span> </span><br><span class="line"> 	<span class="keyword">id</span>,</span><br><span class="line"> 	make,</span><br><span class="line"> 	<span class="keyword">model</span>,</span><br><span class="line"> 	price <span class="keyword">AS</span> original_price,</span><br><span class="line"> 	<span class="keyword">ROUND</span>(price* <span class="number">.10</span>,<span class="number">2</span>) <span class="keyword">AS</span> ten_percent_value,</span><br><span class="line"> 	<span class="keyword">ROUND</span>(price-(price*<span class="number">.10</span>),<span class="number">2</span>) <span class="keyword">AS</span> discount_after_10_percent </span><br><span class="line"><span class="keyword">FROM</span> car;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/23.png" style="zoom: 80%;"></p>
<h3 id="Coalesce"><a href="#Coalesce" class="headerlink" title="Coalesce"></a>Coalesce</h3><p><a href="https://jasonxqh.github.io/2020/05/16/Mysql基础/#The-IFNULL-and-COALESCE-Function"> The IFNULL and COALESCE Function</a></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COALESCE</span>(email,<span class="string">'Email Not Provided'</span>) <span class="keyword">FROM</span> person;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/24.png" style="zoom: 80%;"></p>
<h3 id="NULLIF"><a href="#NULLIF" class="headerlink" title="NULLIF"></a>NULLIF</h3><p>那么如果我在计算时出现了 分母为0的数字， 比如说SELECT 10/0；</p>
<p>postgresql会报错: ERROR division by zero;</p>
<p>而 SELECT 10/null 那么就不会报错，所以null在除法的时候比0更安全</p>
<p>为了解决这个问题，我们需要写NULLIF 关键词. NULLIF(0,0) 这个值为NULL，NULLIF(0,10) 这样是0</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>  <span class="keyword">COALESCE</span>(<span class="number">10</span>/<span class="keyword">NULLIF</span>(<span class="number">0</span>,<span class="number">0</span>),<span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<h3 id="Timestamps-And-Dates-Course"><a href="#Timestamps-And-Dates-Course" class="headerlink" title="Timestamps And Dates Course"></a>Timestamps And Dates Course</h3><p>TimeStamps在数据库当中是比较重要的</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">test=<span class="comment"># SELECT NOW();</span></span><br><span class="line">            now</span><br><span class="line"><span class="comment">----------------------------</span></span><br><span class="line"> 2020-06-28 16:14:34.527+08</span><br><span class="line">(1 行记录)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">test=<span class="comment"># SELECT NOW()::DATE;</span></span><br><span class="line">    now</span><br><span class="line"><span class="comment">------------</span></span><br><span class="line"> 2020-06-28</span><br><span class="line">(1 行记录)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">test=<span class="comment"># SELECT NOW()::TIME;</span></span><br><span class="line">       now</span><br><span class="line"><span class="comment">-----------------</span></span><br><span class="line"> 16:15:19.575383</span><br><span class="line">(1 行记录)</span><br></pre></td></tr></table></figure>
<h3 id="Adding-And-Subtracting-With-Dates"><a href="#Adding-And-Subtracting-With-Dates" class="headerlink" title="Adding And Subtracting With Dates"></a>Adding And Subtracting With Dates</h3><p><a href="https://jasonxqh.github.io/2020/05/16/Mysql基础/#Date-Functions-in-Mysql">Date Functions </a></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">test=<span class="comment"># SELECT NOW()-INTERVAL '10 YEAR';</span></span><br><span class="line">           ?column?</span><br><span class="line"><span class="comment">-------------------------------</span></span><br><span class="line"> 2010-06-28 16:18:09.543802+08</span><br><span class="line">(1 行记录)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">test=<span class="comment"># SELECT NOW()-INTERVAL '10 DAYS';</span></span><br><span class="line">           ?column?</span><br><span class="line"><span class="comment">-------------------------------</span></span><br><span class="line"> 2020-06-18 16:18:18.197275+08</span><br><span class="line">(1 行记录)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">test=<span class="comment"># SELECT NOW()+ INTERVAL '10 DAYS';</span></span><br><span class="line">           ?column?</span><br><span class="line"><span class="comment">-------------------------------</span></span><br><span class="line"> 2020-07-08 16:18:28.394722+08</span><br><span class="line">(1 行记录)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">test=<span class="comment"># SELECT NOW()+ INTERVAL '10 MONTHS';</span></span><br><span class="line">           ?column?</span><br><span class="line"><span class="comment">-------------------------------</span></span><br><span class="line"> 2021-04-28 16:18:39.342846+08</span><br><span class="line">(1 行记录)</span><br></pre></td></tr></table></figure>
<h3 id="Extracting-Fields-From-Timestamp"><a href="#Extracting-Fields-From-Timestamp" class="headerlink" title="Extracting Fields From Timestamp"></a>Extracting Fields From Timestamp</h3><p>比如我们希望把YEAR单独拿出来 需要用到EXTRACT方法</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">test=<span class="comment"># SELECT EXTRACT(YEAR from NOW());</span></span><br><span class="line"> date_part</span><br><span class="line"><span class="comment">-----------</span></span><br><span class="line">      2020</span><br><span class="line">(1 行记录)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">test=<span class="comment"># SELECT EXTRACT(MONTH from NOW());</span></span><br><span class="line"> date_part</span><br><span class="line"><span class="comment">-----------</span></span><br><span class="line">         6</span><br><span class="line">(1 行记录)</span><br><span class="line"> </span><br><span class="line">test=<span class="comment"># SELECT EXTRACT(DAY from NOW());</span></span><br><span class="line"> date_part</span><br><span class="line"><span class="comment">-----------</span></span><br><span class="line">        28</span><br><span class="line">(1 行记录)</span><br><span class="line"> </span><br><span class="line">test=<span class="comment"># SELECT EXTRACT(CENTURY from NOW());</span></span><br><span class="line"> date_part</span><br><span class="line"><span class="comment">-----------</span></span><br><span class="line">        21</span><br><span class="line">(1 行记录)</span><br></pre></td></tr></table></figure>
<h3 id="Age-Function"><a href="#Age-Function" class="headerlink" title="Age Function"></a>Age Function</h3><p>AGE() 可以自动计算现在到某一时间的时间段。常用来计算年龄。 第一个参数是NOW() ，代表现在的时间；第二个参数一般是过去的一个日期，常常是人的出生年月</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> first_name,last_name,gender,date_of_birth,AGE(<span class="keyword">NOW</span>(),date_of_birth) <span class="keyword">FROM</span> person;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/25.png" style="zoom: 80%;"></p>
<h3 id="What-Are-Primary-Keys"><a href="#What-Are-Primary-Keys" class="headerlink" title="What Are Primary Keys"></a>What Are Primary Keys</h3><p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/26.png" style="zoom: 40%;"></p>
<p>主键(PK)是对每一条信息都独一无二的</p>
<p>主键可以为很多形式，也有很多的数据类型可以充当主键。现在 Bigserial 已经足够了</p>
<h3 id="Understanding-Primary-Keys"><a href="#Understanding-Primary-Keys" class="headerlink" title="Understanding Primary Keys"></a>Understanding Primary Keys</h3><p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/27.png"></p>
<p>如果我们尝试插入一条信息：主键与表中信息重复，那么会发生什么结果？</p>
<blockquote>
<p>test=# insert into person (id, first_name, last_name, email, gender, date_of_birth, country_of_birth) values (1, ‘Kirbee’, ‘Lampitt’, ‘klampitt0@so-net.ne.jp’, ‘Female’, ‘27/7/1995’, ‘Kazakhstan’);<br>错误:  重复键违反唯一约束”person_pkey”<br>描述:  键值”(id)=(1)” 已经存在</p>
</blockquote>
<p>现在我们修改表格，把id的主键地位去掉，然后再试试，会发生什么结果呢？</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> person <span class="keyword">DROP</span> <span class="keyword">CONSTRAINT</span> person_pkey;</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> person (<span class="keyword">id</span>, first_name, last_name, email, gender, date_of_birth, country_of_birth) <span class="keyword">values</span> (<span class="number">1</span>, <span class="string">'Kirbee'</span>, <span class="string">'Lampitt'</span>, <span class="string">'klampitt0@so-net.ne\.jp'</span>, <span class="string">'Female'</span>, <span class="string">'27/7/1995'</span>, <span class="string">'Kazakhstan'</span>);</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> person <span class="keyword">WHERE</span> <span class="keyword">id</span> = <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/28.png"></p>
<h3 id="Adding-Primary-Key"><a href="#Adding-Primary-Key" class="headerlink" title="Adding Primary Key"></a>Adding Primary Key</h3><p>删除主键是 DROP CONSTRAINT person_pkey; 那么添加主键是 ADD PRIMARY KEY() 我们可以设置多个字段同时为主键。比如说我们设置三个字段为主键，那么任意连那个条信息，这三个字段都不能相等，但是两个字段可以相等</p>
<p>现在我们尝试把主键CONSTRAINT加上去，但是会发生什么？</p>
<blockquote>
<p>test=# ALTER TABLE person ADD PRIMARY KEY(id);<br>错误:  无法创建唯一索引”person_pkey”<br>描述:  键值(id)=(1)重复了</p>
</blockquote>
<p>所以，我们先删除</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> person <span class="keyword">WHERE</span> <span class="keyword">id</span> = <span class="number">1</span>;</span><br><span class="line"> <span class="keyword">insert</span> <span class="keyword">into</span> person (<span class="keyword">id</span>, first_name, last_name, email, gender, date_of_birth, country_of_birth) <span class="keyword">values</span> (<span class="number">1</span>, <span class="string">'Kirbee'</span>, <span class="string">'Lampitt'</span>, <span class="string">'klampitt0@so-net.ne\.jp'</span>, <span class="string">'Female'</span>, <span class="string">'27/7/1995'</span>, <span class="string">'Kazakhstan'</span>);</span><br><span class="line"> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> person <span class="keyword">ADD</span> PRIMARY <span class="keyword">KEY</span>(<span class="keyword">id</span>);</span><br></pre></td></tr></table></figure>
<p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/29.png"></p>
<h3 id="Unique-Constraints"><a href="#Unique-Constraints" class="headerlink" title="Unique Constraints"></a>Unique Constraints</h3><p>Unique Constraints allow us to have unique values for a given column </p>
<p>比如说，我现在有两个邮箱一模一样的人，那么当我们发送邮件的时候，我们就不知道发给谁了。所以我们需要把邮件设置为UNIQUE。</p>
<blockquote>
<p>test=# ALTER TABLE person ADD CONSTRAINT unique_email_address UNIQUE (email);<br>ALTER TABLE</p>
</blockquote>
<p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/30.png"></p>
<p>现在我们来插入一个邮件和库中某一个人一样的信息</p>
<blockquote>
<p>test=# insert into person (id,  first_name, last_name, email, gender, date_of_birth, country_of_birth) values (1001, ‘Doris’, ‘Carayol’, ‘dcarayol1@lulu.com’, ‘Female’, ‘8/9/1974’, ‘China’);<br>错误:  重复键违反唯一约束”unique_email_address”<br>描述:  键值”(email)=(dcarayol1@lulu.com)” 已经存在</p>
</blockquote>
<p>当然，我们也可以简化添加 CONSTRAINT的方法，也就是让postgres自动帮我生成 CONSTRAINT的名字</p>
<blockquote>
<p>ALTER TABLE person ADD UNIQUE(email);</p>
<p>这个constraint的 就变成</p>
<p>“person_email_key” UNIQUE CONSTRAINT,btree(email)</p>
</blockquote>
<h3 id="Check-Constraints"><a href="#Check-Constraints" class="headerlink" title="Check Constraints"></a>Check Constraints</h3><p>Check constraint allows us to add a constraint based on a boolean condition</p>
<p>比如我新插入一条信息：</p>
<blockquote>
<p>insert into person (id, first_name, last_name, email, gender, date_of_birth, country_of_birth) values (1002, ‘Theressa’, ‘Mounsie’, ‘HELLO2@icio.us’, ‘HELLO’, ‘22/2/1980’, ‘Mexico’);</p>
</blockquote>
<p>我们把他的信息改成了： gender : HELLO  ，但是我们还是能成功插入，这就乱了套了</p>
<p>所以我们需要添加 Check Constraint 这样能让gender字段中输入的字符串，要么是Female，要么是 Male</p>
<p>语法就是 CHECK(字段名=’ ‘ OR 字段名 = ‘ ’ ……)可以添加很多</p>
<blockquote>
<p>test=# ALTER TABLE person ADD CONSTRAINT gender_constraint CHECK(gender = ‘Female’ OR gender = ‘Male’);<br>ALTER TABLE</p>
</blockquote>
<p>这样我们尝试插入的时候，</p>
<blockquote>
<p>test=# insert into person (id, first_name, last_name, email, gender, date_of_birth, country_of_birth) values (1002, ‘Theressa’, ‘Mounsie’, ‘HELLO2@icio.us’, ‘HELLO’, ‘22/2/1980’, ‘Mexico’);<br>错误:  关系 “person” 的新列违反了检查约束 “gender_constraint”<br>描述:  失败, 行包含(1002, Theressa, Mounsie, HELLO2@icio.us, HELLO, 22/02/1980, Mexico).</p>
</blockquote>
<h3 id="How-to-Delete-Records"><a href="#How-to-Delete-Records" class="headerlink" title="How to Delete Records"></a>How to Delete Records</h3><p><a href="https://jasonxqh.github.io/2020/05/16/Mysql基础/#Deleting-Rows删除行">Deleting Rows删除行</a></p>
<blockquote>
<p>test=# DELETE FROM person WHERE id = 11;<br>DELETE 1</p>
<p>DELETE FROM person  WHERE gender = ‘Female’ AND country_of_birth =’Nigeria’;</p>
</blockquote>
<p>请注意： DELETE FROM person 非常非常危险，他会删除表中的所有数据</p>
<h3 id="How-to-Update-Records"><a href="#How-to-Update-Records" class="headerlink" title="How to Update Records"></a>How to Update Records</h3><p><a href="https://jasonxqh.github.io/2020/05/16/Mysql基础/#Updating-a-Single-Row更新单行">更新单行</a></p>
<p><a href="https://jasonxqh.github.io/2020/05/16/Mysql基础/#Updating-Multiple-rows更新多行">更新多行</a></p>
<blockquote>
<p>例子：</p>
<p>UPDATE person SET email = ‘ommar@gmail.com’ WHERE id = 9; 单行更新</p>
<p>UPDATE person SET email = ‘ommar@gmail.com’ WHERE id &lt; 9; 多行更新</p>
<p>UPDATE person SET first_name = ‘Omar’, last_name =’Montana’ , email =”Montana@gmail.com”;多列更新</p>
</blockquote>
<h3 id="On-Conflict-Do-Nothing"><a href="#On-Conflict-Do-Nothing" class="headerlink" title="On Conflict Do Nothing"></a>On Conflict Do Nothing</h3><p>当我们想新插入一条信息的时候，如果信息中的某些字段与设为<strong>主键</strong>或者有<strong>Unique  constraints</strong>的字段重复的时候，postgres会报错。这时候我们需要ON CONFLICT 关键字，ON COFLICT (字段名)会检测该字段输入的信息是否重复，如果重复，就显示插入失败。前提是这个字段是主键或者有constraints</p>
<blockquote>
<p>例子：</p>
<p>test=# INSERT INTO person(id,first_name,last_name,gender,email,date_of_birth ,country_of_birth) VALUES(7,’Russ’, ‘Ruddoch’,’Male’,’rruddoch7@hhs.gov’,DATE ‘1952-09-25’ , ‘Norway’ ) ON CONFLICT (id) DO NOTHING;<br>INSERT 0 0</p>
</blockquote>
<p>如果我输入了一个既不是主键，有没有constraints的字段</p>
<blockquote>
<p>test=# INSERT INTO person(id,first_name,last_name,gender,email,date_of_birth ,country_of_birth) VALUES(7,’Russ’, ‘Ruddoch’,’Male’,’rruddoch7@hhs.gov’,DATE ‘1952-09-25’ , ‘Norway’ ) ON CONFLICT (first_name) DO NOTHING;<br>错误:  没有匹配ON CONFLICT说明的唯一或者排除约束</p>
</blockquote>
<h3 id="Upsert"><a href="#Upsert" class="headerlink" title="Upsert"></a>Upsert</h3><p>当用户第一次发送多个表单过来，我么需要对表单的内容进行更新。这种情况往往只需要更新一个或者两个字段即可</p>
<p>所以我们需要把DO NOTHING 变成  DO UPDATE SET 字段 = EXCLUDED.字段，字段 = EXCLUDE.字段，……</p>
<blockquote>
<p>test=# INSERT INTO person(id,first_name,last_name,gender,email,date_of_birth ,country_of_birth) VALUES(1927,’Russ’, ‘Ruddoch’,’Male’,’<strong>rruddoch7@hhs.gov.uk</strong>‘,DATE ‘1952-09-25’ , ‘Norway’ ) ON CONFLICT (id) <strong>DO UPDATE SET email= EXCLUDED.email</strong>;<br>INSERT 0 1<br>test=# SELECT * FROM person WHERE id = 1927;<br>1927 | Russ       | Ruddoch   | rruddoch7@hhs.gov.uk | Male   | 1952-09-25    | Norway<br>(1 行记录)</p>
</blockquote>
<p>这个语句和更新不同，如果这条信息(根据id判断)已经存在了，那么就更新信息；否则就新建这条信息。而UPDATE仅仅更新已经存在的信息。</p>
<h3 id="What-Is-A-Relationship-Foreign-Keys"><a href="#What-Is-A-Relationship-Foreign-Keys" class="headerlink" title="What Is A Relationship/Foreign Keys"></a>What Is A Relationship/Foreign Keys</h3><p><a href="https://jasonxqh.github.io/2020/05/16/Mysql基础/#连接方式-在多张表各种检索">连接方式(在多张表各种检索)</a></p>
<p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/36.png"></p>
<h3 id="Adding-Relationship-Between-Tables"><a href="#Adding-Relationship-Between-Tables" class="headerlink" title="Adding Relationship Between Tables"></a>Adding Relationship Between Tables</h3><p>删除car表和person表，在这里下载 person-car.sql：</p>
<p><a href="https://drive.google.com/drive/folders/1v0I19Ed2his8otHRLm5i6W7feD9sIMc6" target="_blank" rel="noopener">https://drive.google.com/drive/folders/1v0I19Ed2his8otHRLm5i6W7feD9sIMc6</a></p>
<p>进行一些修改，在person中加入一个foreign key： car_id 让其和car表当中的id字段相联系：</p>
<p>然后新建两张表即可</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> car (</span><br><span class="line">   <span class="keyword">id</span> BIGSERIAL <span class="keyword">NOT</span> <span class="literal">NULL</span> PRIMARY <span class="keyword">KEY</span>,</span><br><span class="line">   make <span class="built_in">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">   <span class="keyword">model</span> <span class="built_in">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">   price <span class="built_in">NUMERIC</span>(<span class="number">19</span>, <span class="number">2</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> person (</span><br><span class="line">    <span class="keyword">id</span> BIGSERIAL <span class="keyword">NOT</span> <span class="literal">NULL</span> PRIMARY <span class="keyword">KEY</span>,</span><br><span class="line">   first_name <span class="built_in">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">   last_name <span class="built_in">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">   gender <span class="built_in">VARCHAR</span>(<span class="number">7</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">   email <span class="built_in">VARCHAR</span>(<span class="number">100</span>),</span><br><span class="line">   date_of_birth <span class="built_in">DATE</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">   country_of_birth <span class="built_in">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">   car_id <span class="built_in">BIGINT</span> <span class="keyword">REFERENCES</span> car (<span class="keyword">id</span>),</span><br><span class="line">    <span class="keyword">UNIQUE</span>(car_id)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> person (first_name, last_name, gender, email, date_of_birth, country_of_birth) <span class="keyword">values</span> (<span class="string">'Fernanda'</span>, <span class="string">'Beardon'</span>, <span class="string">'Female'</span>, <span class="string">'fernandab@is.gd'</span>, <span class="string">'1953-10-28'</span>, <span class="string">'Comoros'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> person (first_name, last_name, gender, email, date_of_birth, country_of_birth) <span class="keyword">values</span> (<span class="string">'Omar'</span>, <span class="string">'Colmore'</span>, <span class="string">'Male'</span>, <span class="literal">null</span>, <span class="string">'1921-04-03'</span>, <span class="string">'Finland'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> person (first_name, last_name, gender, email, date_of_birth, country_of_birth) <span class="keyword">values</span> (<span class="string">'John'</span>, <span class="string">'Matuschek'</span>, <span class="string">'Male'</span>, <span class="string">'john@feedburner.com'</span>, <span class="string">'1965-02-28'</span>, <span class="string">'England'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> car (make, <span class="keyword">model</span>, price) <span class="keyword">values</span> (<span class="string">'Land Rover'</span>, <span class="string">'Sterling'</span>, <span class="string">'87665.38'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> car (make, <span class="keyword">model</span>, price) <span class="keyword">values</span> (<span class="string">'GMC'</span>, <span class="string">'Acadia'</span>, <span class="string">'17662.69'</span>);</span><br></pre></td></tr></table></figure>
<h3 id="Updating-Foreign-Keys-Columns"><a href="#Updating-Foreign-Keys-Columns" class="headerlink" title="Updating Foreign Keys Columns"></a>Updating Foreign Keys Columns</h3><p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/37.png"></p>
<p>我们需要为person表添加car_id 这个列</p>
<blockquote>
<p>UPDATE person SET car_id = 1 WHERE id = 2;</p>
<p>UPDATE person SET car_id = 2 WHERE id = 1;</p>
</blockquote>
<p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/38.png"></p>
<p>如果我插入了car表中不存在的id</p>
<blockquote>
<p>test=# UPDATE person SET car_id =3 WHERE id= 1;<br>错误:  插入或更新表 “person” 违反外键约束 “person_car_id_fkey”<br>描述:  键值对(car_id)=(3)没有在表”car”中出现.</p>
</blockquote>
<h3 id="Inner-Joins"><a href="#Inner-Joins" class="headerlink" title="Inner Joins"></a>Inner Joins</h3><p><a href="https://jasonxqh.github.io/2020/05/16/Mysql基础/#Inner-Joins-内连接">Inner Joins 内连接</a></p>
<p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/39.png" style="zoom:55%;"></p>
<p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/40.png" style="zoom:76%;"></p>
<blockquote>
<p>test=# SELECT * FROM person<br>test-# JOIN car ON person.car_id = car.id;</p>
</blockquote>
<p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/41.png" style="zoom:76%;"></p>
<blockquote>
<p>test=# SELECT person.first_name,car.make,car.model,car.price FROM person JOIN car ON person.car_id = car.id;<br>first_name |    make    |  model   |  price<br>——————+——————+—————+—————<br>Omar       | Land Rover | Sterling | 87665.38<br>Fernanda   | GMC        | Acadia   | 17662.69<br>(2 行记录)</p>
</blockquote>
<p>注： \x 可以关闭或开启扩展，让数据以表格的方式展示或者以列的方式展示</p>
<p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/42.png" style="zoom:76%;"></p>
<h3 id="Left-Joins"><a href="#Left-Joins" class="headerlink" title="Left Joins"></a>Left Joins</h3><p><a href="https://jasonxqh.github.io/2020/05/16/Mysql基础/#Outer-Joins外连接"> Outer Joins外连接</a></p>
<p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/39.png" style="zoom:55%;"></p>
<p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/43.png" style="zoom:55%;"></p>
<blockquote>
<p> SELECT * FROM person LEFT JOIN car ON car.id = person.car_id;</p>
</blockquote>
<p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/44.png" style="zoom: 80%;"></p>
<h3 id="Deleting-Records-With-Foreign-Keys"><a href="#Deleting-Records-With-Foreign-Keys" class="headerlink" title="Deleting Records With Foreign Keys"></a>Deleting Records With Foreign Keys</h3><p>我们现在想删除car中的id= 13的一条信息（已经和person绑定了）我们发现直接删除的话会报错：</p>
<blockquote>
<p>test=# DELETE FROM car WHERE id = 13;<br>错误:  在 “car” 上的更新或删除操作违反了在 “person” 上的外键约束 “person_car_id_fkey”<br>描述:  键值对(id)=(13)仍然是从表”person”引用的.</p>
</blockquote>
<p>我们必须先删除person中和这条car的信息绑定的person信息，才能成功删除：</p>
<blockquote>
<p>test=# DELETE FROM person WHERE id = 9000;<br>DELETE 1<br>test=# DELETE FROM car WHERE id = 13;<br>DELETE 1</p>
</blockquote>
<p>我们可以选择 CASCADING 但是太危险了，千万别用。</p>
<h3 id="Exporting-Query-Results-to-CSV"><a href="#Exporting-Query-Results-to-CSV" class="headerlink" title="Exporting Query Results to CSV"></a>Exporting Query Results to CSV</h3><p>我们现在把查询到的内容变成CSV文件。</p>
<blockquote>
<p>输入/输出<br>\copy …              执行 SQL COPY，将数据流发送到客户端主机<br>\echo [字符串]         将字符串写到标准输出<br>\i 文件                从文件中执行命令<br>\ir FILE               与 \i类似, 但是相对于当前脚本的位置<br>\o [文件]              将全部查询结果写入文件或 |管道<br>\qecho [字符串]        将字符串写到查询输出串流(参考 \o)</p>
</blockquote>
<p>我们采用 \copy </p>
<blockquote>
<p>test=# \copy (SELECT * FROM person LIMIT 10) TO ‘/Users/Jason/Desktop/results’ DELIMITER ‘,’ CSV HEADER;<br>COPY 10</p>
</blockquote>
<p>桌面上就有一个文件(很奇怪为什么不是.csv需要自己加上后缀名…),但是内容完整</p>
<p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/31.png"></p>
<h3 id="Serial-amp-Sequences"><a href="#Serial-amp-Sequences" class="headerlink" title="Serial &amp; Sequences"></a>Serial &amp; Sequences</h3><p>现在我们来了解一下 BIGSERIAL 这个数据类型。当我么设置一个字段的datatype是BIGSERIAL的话，在表格中他是这么存在的</p>
<blockquote>
<p>数据表 “public.person”<br>栏位       |          类型          | 校对规则 |  可空的  |                预设<br>id               | bigint                 |          | not null | nextval(‘person_id_seq’::regclass)<br>索引：<br>“person_pkey” PRIMARY KEY, btree (id)</p>
<p>SELECT * FROM person_id_seq;</p>
</blockquote>
<h3 id="Extensions"><a href="#Extensions" class="headerlink" title="Extensions"></a>Extensions</h3><p>查看扩展列表需要在postgres文件夹下敲入条语句</p>
<blockquote>
<p>SELECT * FROM pg_available_extensions;</p>
</blockquote>
<p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/32.png" style="zoom: 80%;"></p>
<p>每个扩展的名字，版本，简短的作用都一一对应</p>
<p>接下来我们着重了解一下uuid-ossp 其作用是 generate universally unique identifiers (UUIDs)</p>
<h3 id="Understanding-UUID-Data-Type"><a href="#Understanding-UUID-Data-Type" class="headerlink" title="Understanding UUID Data Type"></a>Understanding UUID Data Type</h3><p><a href="https://en.wikipedia.org/wiki/Universally_unique_identifier" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Universally_unique_identifier</a></p>
<p>我们用 下面的语句来添加扩展</p>
<blockquote>
<p>CREATE EXTENSION IF NOT EXISTS “uuid-oosp”;</p>
</blockquote>
<p><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/33.png" style="zoom: 80%;"></p>
<p>我们试试这些函数</p>
<blockquote>
<p>test=# SELECT uuid_generate_v4();</p>
<h2 id="uuid-generate-v4"><a href="#uuid-generate-v4" class="headerlink" title="uuid_generate_v4"></a>uuid_generate_v4</h2><p>4f734c86-2b8a-46ea-bd12-8a19d666839f<br>(1 行记录)</p>
</blockquote>
<p>使用uuid ，可以让 攻击者很难攻破我们的数据库。而且，当我们需要把数据库A中的部分数据插入到数据库B当中，如果数据类型是 BIGSERIAL的话，很容易导致主键重复而无法插入。但是uuid是不可能相等的，所以可以放心插入。这是使用uuid的优点</p>
<h3 id="UUID-As-Primary-Keys"><a href="#UUID-As-Primary-Keys" class="headerlink" title="UUID As Primary Keys"></a>UUID As Primary Keys</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> person(</span><br><span class="line">person_uid <span class="keyword">UUID</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> PRIMARY <span class="keyword">KEY</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> person(person_uid) <span class="keyword">values</span>(uuid_generate_v4());</span><br></pre></td></tr></table></figure>
<blockquote>
<p>test=# create table person(<br>test(# person_uid UUID NOT NULL PRIMARY KEY<br>test(# );<br>CREATE TABLE<br>test=# insert into person(person_uid) values(uuid_generate_v4());<br>INSERT 0 1<br>test=# SELECT * FROM person;<br>       person_uid</p>
<hr>
<p>d55ff522-9121-42f0-a249-fdd0f3071349<br>(1 行记录)<br><img src="/2020/06/26/PostgreSql%E5%9F%BA%E7%A1%80/34.png"></p>
</blockquote>
<p>当我们执行 \x 会关闭extension，再执行\x会重新开启 </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/22/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/22/">22</a><span class="page-number current">23</span><a class="page-number" href="/page/24/">24</a><span class="space">&hellip;</span><a class="page-number" href="/page/44/">44</a><a class="extend next" rel="next" href="/page/24/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Jason</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">439</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">68</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jason</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->

    

  

</body>
</html>

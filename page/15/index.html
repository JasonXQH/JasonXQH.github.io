<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=">


  <link rel="mask-icon" href="/images/logo.svg?v=" color="#222">














<meta property="og:type" content="website">
<meta property="og:title" content="Jason‘s Blog">
<meta property="og:url" content="https://jasonxqh.github.io/page/15/index.html">
<meta property="og:site_name" content="Jason‘s Blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Jason">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '',
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    fancybox: false,
    tabs: ,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: 'undefined',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>







  <title>Jason‘s Blog</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', '[object Object]', 'auto');
  ga('send', 'pageview');
</script>





<meta name="generator" content="Hexo 4.2.0"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">
  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>
<a href="https://github.com/JasonXQH/JasonXQH.github.io" target="_blank" rel="noopener" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Jason‘s Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/%20" rel="section">
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/%20" rel="section">
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/%20" rel="section">
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/%20" rel="section">
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/%20" rel="section">
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2021/03/04/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/%5Bobject%20Object%5D">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/03/04/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1/" itemprop="url">计算机网络实验报告1</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2021-03-04T21:24:23+08:00">
                2021-03-04
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2022-08-25T04:31:52+08:00">
                2022-08-25
              </time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="计算机网络实验报告1"><a href="#计算机网络实验报告1" class="headerlink" title="计算机网络实验报告1"></a>计算机网络实验报告1</h1><h2 id="任务1"><a href="#任务1" class="headerlink" title="任务1"></a>任务1</h2><p>目标： 创建一个以自己姓名命名的java项目，编写java代码，将自己的学号和姓名打印出来，将操作过程中的关键步骤和实验结果截图</p>
<h3 id="实验代码："><a href="#实验代码：" class="headerlink" title="实验代码："></a>实验代码：</h3><p><img src="/2021/03/04/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1/2.png" style="zoom:100%;"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        System.out.print(<span class="string">"请输入你的名字: "</span>);</span><br><span class="line">        String name = scanner.nextLine();</span><br><span class="line">        System.out.print(<span class="string">"请输入你的学号: "</span>);</span><br><span class="line">        <span class="keyword">long</span> ID = scanner.nextLong();</span><br><span class="line">        System.out.println(<span class="string">"您好,"</span>+name+<span class="string">"! 你的学号是: "</span>+ID);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/03/04/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1/1.png" style="zoom:100%;"></p>
<h2 id="任务2"><a href="#任务2" class="headerlink" title="任务2"></a>任务2</h2><p><strong>目的：</strong>访问自己经常访问的网站，并将访问过程中的网络包抓取下来并截图；另外根据不同的过滤规则抓取网络包，并截图，书写实验报告</p>
<p>首先我们打开 Wireshark 软件，找到有流量的网卡，这里是无线网卡 WLAN</p>
<p><img src="/2021/03/04/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1/4.png" style="zoom:100%;"></p>
<p>结果如下，这个软件会将所有的包都抓取下来，且实时更新：</p>
<p><img src="/2021/03/04/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1/5.png" style="zoom:100%;"></p>
<h3 id="设置过滤规则"><a href="#设置过滤规则" class="headerlink" title="设置过滤规则"></a>设置过滤规则</h3><p>学习博客： <a href="https://www.cnblogs.com/mq0036/p/11187138.html" target="_blank" rel="noopener">https://www.cnblogs.com/mq0036/p/11187138.html</a></p>
<h4 id="利用地址过滤"><a href="#利用地址过滤" class="headerlink" title="利用地址过滤"></a>利用地址过滤</h4><p>我们首先在 cmd 中ping一下目标网站的域名，这里我以一个著名的学习网站：<a href="https://codewithmosh.com/" target="_blank" rel="noopener">https://codewithmosh.com/</a> 为例。</p>
<p><img src="/2021/03/04/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1/6.png" style="zoom:100%;"></p>
<p>然后我打开这个网页，并在 Wireshark里面设置过滤词: ip.addr == 104.193.88.77</p>
<p>addr 这个过滤类型是对所有 Source address和Destination address 进行筛选，因此这里一共显示了8条数据。</p>
<p><img src="/2021/03/04/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1/8.png" style="zoom:100%;"></p>
<p>如果我只对 Source address进行筛选，那么我们可以这样写：<code>ip.src == 104.193.88.77</code> </p>
<p><img src="/2021/03/04/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1/9.png" style="zoom:100%;"></p>
<p>或者对 Destination address进行筛选, 那么我们就这样写：<code>ip.dst == 104.193.88.77</code> </p>
<p><img src="/2021/03/04/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1/9.png" style="zoom:100%;"></p>
<h4 id="利用协议过滤"><a href="#利用协议过滤" class="headerlink" title="利用协议过滤"></a>利用协议过滤</h4><p>因为我们有个下载可见的 ftp，所以这里我直接在搜索框中搜 ftp 就能抓取所有协议是ftp的网络包了</p>
<p><img src="/2021/03/04/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1/11.png" style="zoom:100%;"></p>
<h2 id="进阶任务1"><a href="#进阶任务1" class="headerlink" title="进阶任务1"></a>进阶任务1</h2><p>Java项目：任意构造两个类，两个类分别具有不同的属性和操作，并分别实例化一个对象，完成任意操作。</p>
<p>Main class:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner scanner =<span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        System.out.print(<span class="string">"请输入要加法还是减法,加法输入1,减法输入0: "</span>);</span><br><span class="line">        <span class="keyword">byte</span> flag = scanner.nextByte();</span><br><span class="line">        Plus pluscal = <span class="keyword">new</span> Plus();</span><br><span class="line">        Minus minuscal = <span class="keyword">new</span> Minus();</span><br><span class="line">        System.out.print(<span class="string">"请输入两个待操作的数: "</span>);</span><br><span class="line">        <span class="keyword">double</span> number1 = scanner.nextDouble();</span><br><span class="line">        <span class="keyword">double</span> number2 = scanner.nextDouble();</span><br><span class="line">        <span class="keyword">double</span> result;</span><br><span class="line">        <span class="keyword">switch</span> (flag)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                result = pluscal.plus(number1,number2);</span><br><span class="line">                System.out.println(<span class="string">"结果为: "</span>+result);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                result = minuscal.minus(number1,number2);</span><br><span class="line">                System.out.println(<span class="string">"结果为: "</span>+result);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                System.out.println(<span class="string">"输入错误，程序结束！"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>class1： Plus calculator</p>
<p>这个类实现的功能很简单，就是返回两个数字相加</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Plus</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">double</span> number1=<span class="number">0</span>,number2=<span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">plus</span><span class="params">(<span class="keyword">double</span> number1,<span class="keyword">double</span> number2)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> number1+number2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>class2:  Minor calculator</p>
<p>同理，这个类就是返回两个数字相减</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Minus</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">double</span> number1=<span class="number">0</span>,number2=<span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">minus</span><span class="params">(<span class="keyword">double</span> number1,<span class="keyword">double</span> number2)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> number1-number2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="实验结果："><a href="#实验结果：" class="headerlink" title="实验结果："></a>实验结果：</h3><p><img src="/2021/03/04/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1/3.png" style="zoom:100%;"></p>
<h3 id="实验感悟"><a href="#实验感悟" class="headerlink" title="实验感悟"></a>实验感悟</h3><p>这几个类设计的非常简单，但是却让我了解了Java文件的运行模式：它是一门面向对象的语言。因此我们可以通过实现一系列操作降低代码的耦合度。 Idea提供了很方便的快捷指令将写在 Main函数当中的方法独立抽象出来生成一个类。这一方法在我的博客中有详细说明。<a href="https://jasonxqh.github.io/2020/07/05/Java基础2/#Extracting-the-Console-Class">Extracting the Class</a></p>
<h2 id="进阶任务2"><a href="#进阶任务2" class="headerlink" title="进阶任务2"></a>进阶任务2</h2><p>安装发包软件（自己寻找），发送不同协议的网络包，并用 <strong>wireshark</strong> 抓取。 </p>
<p>这里我使用 Xcap 软件来作为发包工具。下载地址： <a href="http://xcap.weebly.com/" target="_blank" rel="noopener">http://xcap.weebly.com/</a></p>
<p><img src="/2021/03/04/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1/15.png" style="zoom: 67%;"></p>
<p>首先我们要选择打开的接口，然后往这个接口发送数据包。因为Wireshark中若选择 WLAN，会有很多干扰。很难找到xcap发出的数据包。因此这里我选择 本地连接10做为接口。</p>
<p>紧接着，我们在 Packet group中新建一个报文组。</p>
<p><img src="/2021/03/04/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1/16.png" style="zoom: 100%;"></p>
<p>这里，我已经将一些数据包保存为一个 .pcap 文件，我们只需要点击 Read from .pcap file 这个选项，从里面选择我们要发送的不同协议的数据包即可。</p>
<p><img src="/2021/03/04/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1/17.png" style="zoom:120%;"></p>
<p><img src="/2021/03/04/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1/18.png" style="zoom:120%;"></p>
<p>紧接着，我们将接口选择刚才已经打开的 Interface2，结果如下：</p>
<p><img src="/2021/03/04/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1/19.png" style="zoom:120%;"></p>
<p>然后我们打开 Wireshark, 选择本地连接10，并选中我们要发送的几种数据包：</p>
<p><img src="/2021/03/04/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1/20.png"></p>
<p>然后，我们在本地连接10 成功收到了 xcap发出的五种不同协议的数据包。实验结果让人满意</p>
<p><img src="/2021/03/04/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1/21.png"></p>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2021/03/03/%E6%A6%82%E7%8E%87%E8%AE%BA-%E6%A0%B7%E6%9C%AC%E7%A9%BA%E9%97%B4%E5%92%8C%E6%A6%82%E7%8E%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/%5Bobject%20Object%5D">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/03/03/%E6%A6%82%E7%8E%87%E8%AE%BA-%E6%A0%B7%E6%9C%AC%E7%A9%BA%E9%97%B4%E5%92%8C%E6%A6%82%E7%8E%87/" itemprop="url">概率论-样本空间和概率</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2021-03-03T16:22:25+08:00">
                2021-03-03
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2021-04-05T23:45:12+08:00">
                2021-04-05
              </time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="样本空间和概率"><a href="#样本空间和概率" class="headerlink" title="样本空间和概率"></a>样本空间和概率</h1><p>参考书本：</p>
<ul>
<li>概率导论  第二版 Bertsekas 著</li>
<li>概率论与数理统计教程 第三版 峁时松 等著</li>
</ul>
<h2 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h2><h3 id="可数集与不可数集"><a href="#可数集与不可数集" class="headerlink" title="可数集与不可数集"></a>可数集与不可数集</h3><p>集合按照可不可数可以分成两大类： 可数集与不可数集</p>
<p>如果 S 中的元素有限且可数，那么我们可以这样写： $S={x_1,x_2,\cdots,x_n}$</p>
<p>如果 S中的元素是无限的，但是它们是可以被枚举的(每个元素都能与然数集N的每个元素之间能建立一一对应的) ，我们可以将其写成：</p>
<p>$S={x_1,x_2,\cdots}$ 我们称其为 <strong>countably infinite</strong> (无限可数集). 比如说 ${0,2,-2,4,-4,\cdots}$</p>
<p>如果集合是这样被标示的： ${x|0\leq x \leq 1}$ ，那么 x 是连续的，不能被一一列举。因此我们称这样的集合为 uncountable (不可数集)</p>
<h3 id="集合的操作"><a href="#集合的操作" class="headerlink" title="集合的操作"></a>集合的操作</h3><p>有一个集合S， 全集为 $\Omega$ , 那么称集合 S 的补集为 $S^c$ </p>
<p>集合的交 : $S \cup T ={x|x\in S <del>or</del> x\in T}$</p>
<p>集合的并：$S\cap T = {x\in S <del>and</del> S\in T}$</p>
<h3 id="集合的代数"><a href="#集合的代数" class="headerlink" title="集合的代数"></a>集合的代数</h3><p>详见： <a href="https://jasonxqh.github.io/2020/09/03/离散数学之集合与函数/#Logical-equivalence"> Logical equivalence</a></p>
<p>德摩根律的一般形式需要牢记： </p>
<p><img src="/2021/03/03/%E6%A6%82%E7%8E%87%E8%AE%BA-%E6%A0%B7%E6%9C%AC%E7%A9%BA%E9%97%B4%E5%92%8C%E6%A6%82%E7%8E%87/1.png"></p>
<h2 id="概率模型"><a href="#概率模型" class="headerlink" title="概率模型"></a>概率模型</h2><h3 id="基本构成"><a href="#基本构成" class="headerlink" title="基本构成"></a>基本构成</h3><ul>
<li><strong>样本空间 </strong> $\Omega$ ,这是一个试验的所有可能结果的集合</li>
<li><strong>概率律</strong> ， 概率律为试验结果的集合A(称之为事件) 确定一个非负数 $P(A)$ </li>
</ul>
<h3 id="样本空间"><a href="#样本空间" class="headerlink" title="样本空间"></a>样本空间</h3><p>每一个<strong>概率模型</strong> 都关联着一个 <strong>试验</strong> ，这个试验将产生<strong>一个试验结果</strong>。 该实验的所有可能结果就形成了 <strong>样本空间</strong>。 需要注意：我们所讨论的概率模型的问题中，只设计一个试验，所以连续抛掷三次硬币只能作为一次试验，而不能认为是三次试验。其样本空间就是 {HHH,HHT,…, TTT} </p>
<p>样本空间可由若干个实验结果组成(如上面的硬币试验) ，也可以由无限多个试验结果组成。 例如：往一个方形目标上投掷飞镖，可将每个可能的弹着点作为试验的结果。</p>
<p>选择适当的样本空间在研究概率时十分重要。不同的实验结果必须是相互排斥的，这样在试验过程中只可能产生唯一的一个结果。 比如说：当试验是投掷一枚骰子的时候，不能把 “1 或者 3” 、“1或者4” 同时定义成一个结果，否则当骰子为1的时候，就不知道得到的是什么结果了</p>
<p>我们可以看两个游戏，并分别确定其样本空间：</p>
<p><strong>游戏1</strong> ： 每次抛掷硬币的时候，子要出现正面向上，我们就可以赢得1元钱</p>
<p><strong>游戏2：</strong>  在抛掷硬币的过程当中，直到出现第一次正面向上(含正面向上的那一次)，以前的每次抛掷我们都可以赢1元钱(若10次抛掷都是正面向下，我们赢得10元)。若出现第一次正面向上以后还有机会抛掷硬币，则以后每次抛掷硬币的时候我们都可以赢2元钱，一直到第二次出现正面向上为止。 每次抛掷的到正面向上的时候，就翻倍。1，2，4…</p>
<p>那么在游戏1中，我们赢的钱数只与10次抛掷中正面向上的次数有关，因此，样本空间可由 11个(即0,1,2,…10) 试验结果组成，而在游戏2中，我们赢得的钱数不仅与正面出现的次数有关，也和正反面出现的顺序有关。因此，可能出现 $2^{10}$ 种可能，样本空间由所有长度为10的正反序列组成。</p>
<h3 id="随机事件"><a href="#随机事件" class="headerlink" title="随机事件"></a>随机事件</h3><p>随机现象的某些样本点组成的集合称为<strong>随机事件</strong>，简称<strong>事件</strong>。如在掷一颗骰子中， A=“出现奇数点” 是一个事件，即 $A={1,3,5}$ ,它是相应样本空间 $\Omega = {1,2,3,4,5,6}$ </p>
<ol>
<li>任一事件A是相应样本空间的一个子集。 在概率论中常常用韦恩图来表示</li>
<li>当子集中某个样本点出现了，就说事件A发生了。这是充分必要条件</li>
<li>事件可以用集合表示，也可以用明白无误的语言描述</li>
<li>由样本空间 $\Omega$ 中的<strong>单个</strong>元素组成的子集称为 <strong>基本事件</strong> 。 而样本空间 $\Omega$ 的<strong>最大子集(即$\Omega$本身)</strong> 称为<strong>必然事件</strong>。样本空间 $\Omega$ 的<strong>最小子集(即空集$\empty$) </strong> 称为<strong>不可能事件</strong></li>
</ol>
<h3 id="随机变量"><a href="#随机变量" class="headerlink" title="随机变量"></a>随机变量</h3><p>用来表示随机现象结果的变量称为<strong>随机变量</strong> ，常用X，Y，Z 表示。很多事件都可以用随机变量表示，表示时应该写明随机变量的含义。</p>
<p>比如说投掷一颗骰子，可能出现1，2，3，4，5，6；若设置 $X=$ “掷一颗骰子出现的点数”， 则1，2，3，4，5，6就是随机变量X的可能取值。这时：</p>
<ul>
<li>事件”出现3点”可用 “X=3” 表示</li>
<li>“$X\leq$6” 是必然事件$\Omega$ </li>
</ul>
<p>现在我再设 $Y=$”掷一颗骰子6点出现的次数”，则 Y 是仅取0或者1 两个值的随机变量。这时</p>
<ul>
<li>“$Y=0$” 表示事件 “没有出现6点”</li>
<li>“$Y\geq2$” 是不可能事件</li>
</ul>
<p>因此，在同一个随机现象当中，不同的设置可以获得不同的随机变量。</p>
<h3 id="事件间的关系"><a href="#事件间的关系" class="headerlink" title="事件间的关系"></a>事件间的关系</h3><h4 id="包含关系"><a href="#包含关系" class="headerlink" title="包含关系"></a>包含关系</h4><p>如果属于A的样本点必属于B，则称A被包含在B中，或称B包含A. 记为 $A\subset B$  <strong>事件A发生必然导致事件B发生</strong></p>
<p>比如说掷一个骰子，事件 $A=$ “出现4点” 的发生必然导致事件 $B=$ “出现偶数点”的发生。</p>
<h4 id="相等关系"><a href="#相等关系" class="headerlink" title="相等关系"></a>相等关系</h4><p>如果属于A的样本点必属于B，且属于B的样本点必属于A，即 $A\subset B$ 且$B\subset A$ ,则称 事件A与B，记为 $A=B$ </p>
<p>掷两颗骰子，以A记事件 ”两颗骰子的点数之和为奇数“，以B记事件”两颗骰子的点数为一奇一偶“ </p>
<h3 id="互不相容"><a href="#互不相容" class="headerlink" title="互不相容"></a>互不相容</h3><p>如果A与B没有相同的样本点，则称A与B互不相容。<strong>A与B互不相容就是事件A与事件B不可能同时发生</strong> </p>
<h3 id="事件间的运算"><a href="#事件间的运算" class="headerlink" title="事件间的运算"></a>事件间的运算</h3><h4 id="事件A与B的并"><a href="#事件A与B的并" class="headerlink" title="事件A与B的并"></a>事件A与B的并</h4><h4 id="事件A与B的交"><a href="#事件A与B的交" class="headerlink" title="事件A与B的交"></a>事件A与B的交</h4><h4 id="事件A与B的差"><a href="#事件A与B的差" class="headerlink" title="事件A与B的差"></a>事件A与B的差</h4><h3 id="离散模型"><a href="#离散模型" class="headerlink" title="离散模型"></a>离散模型</h3><p><strong>离散概率律</strong>： 设样本空间由有限个可能的结果组成，则事件的概率可由组成这个事件的试验结果的概所决定，事件$P{s_1,s_2,\dots,s_n}=P(s_1)+P(s_2)+\cdots+P(s_n)$ </p>
<p>现在假设样本空间 $\Omega={s_1,s_2,\cdots,s_n}$ ，并且每个实验结果都是等概率的。 利用归一化公理可知  $P(s_i) = 1/n,i = 1,2,\cdots , n$ ,我们得到：</p>
<p>离散均匀概率律(古典概型)：设样本空间由n个等可能性的实验结果组成，因此每个实验结果组成的事件(被称为基本事件)的概率是相等的，由此得到：</p>
<p>$P(A)=\frac{含于事件A的试验结果数}n$ </p>
<p>例子：考虑<strong>连续两次</strong>转动一个有 4 个边的骰子(放在桌子上转动)。 那么一共有16种可能的实验结果。这16种 每种出现的概率为 1/16 .<br>这是一个古典概型，在计算一个事件的概率的时候必须清楚这个事件所包含的试验结果数(基本事件数)， 将这个结果除以16便得到这个事件的概率。<br>比如说: $P({两次点数总和为偶数}) = 8/16 = 1/2$</p>
<p>$P({第一次点数和第二次点数相同}) = 4/16 = 1/4$</p>
<p>$P({至少有一次转动的点数等于4}) = 7/16$</p>
<h3 id="连续模型"><a href="#连续模型" class="headerlink" title="连续模型"></a>连续模型</h3><p>A和B约定在某个时刻见面，而每个人到达约会地点的事件都会有延迟，延迟事件在0~1 小时。 第一个到达约会地点的人在哪儿等待15分钟，等了15分钟后若对方还没有到达约会地点，先到的人会离开约会地点。请问它们能够相会的概率有多大？</p>
<p>我们可以把这个问题抽象成一个单位正方形 $\Omega = [0,1]\times[0,1]$ 正方形中的每个点的两个坐标分别代表它们可能的延迟时间。 每个点都可以是他们的延迟时间且是等可能的。因此，我们可以将 $\Omega$ 的子集出现的概率定义为这个子集 的面积。 这个概率律满足概率的3条公里。 罗密欧和朱丽叶能够相会的时间可用这张图表示：</p>
<p><img src="/2021/03/03/%E6%A6%82%E7%8E%87%E8%AE%BA-%E6%A0%B7%E6%9C%AC%E7%A9%BA%E9%97%B4%E5%92%8C%E6%A6%82%E7%8E%87/2.png"></p>
<p>答案为： $\frac{7}{16}$ </p>
<h3 id="事件域"><a href="#事件域" class="headerlink" title="事件域"></a>事件域</h3><p>首先我们定义一下事件域：</p>
<p>设 $\Omega$ 为一样本空格键， $\mathcal F$ 为  $\Omega$ 的某些子集所组成的集合类。如果 $\mathcal F$  满足：</p>
<ol>
<li>$\Omega \in\mathcal F$</li>
<li>若 $A\in \mathcal F$, 则 $\overline A\in \mathcal F$ </li>
<li>若 $A<em>1,A_2\cdots A_n\cdots \in \mathcal F$ ,   $\bigcup</em>{i=1}^\infty A_i \in \mathcal F$ </li>
</ol>
<p>则称 $\mathcal F$ 为一个事件域，或者 $\sigma$ 域</p>
<p>例：</p>
<ol>
<li>若样本空间只含两个样本点 $\Omega={\omega_1,\omega_2}$ ,记 $A={\omega_1},\overline A = {w_2}$ ,其事件域为 $\mathcal F = {\emptyset,A,\overline A,\Omega}$</li>
<li>若样本空间含有n个样本点$\Omega={\omega_1,\omega_2\cdots,\omega_n}$ 其事件域 $\mathcal F$ 是由空集 $\emptyset$ 、n个单元素集， $\begin{pmatrix} n \ 2 \end{pmatrix}$ 个双元素集、$\begin{pmatrix} n \ 3 \end{pmatrix}$ 个三元素集……和$\Omega$组成的集合类，这时 $\mathcal F$ 中共有 $\begin{pmatrix} n \ 0 \end{pmatrix}+\begin{pmatrix} n \ 1 \end{pmatrix}+\cdots+\begin{pmatrix} n \ n \end{pmatrix}=2^n$ 个事件。 </li>
</ol>
<h1 id="概率的定义及其性质"><a href="#概率的定义及其性质" class="headerlink" title="概率的定义及其性质"></a>概率的定义及其性质</h1><h3 id="概率的定义："><a href="#概率的定义：" class="headerlink" title="概率的定义："></a>概率的定义：</h3><p>设 $\Omega$ 是一个样本空间，$\mathcal F$ 为 $\Omega$ 的某些子集组成的一个事件域。如果对任意事件 $A\in\mathcal F$ 定义在 $\mathcal F$ 上的一个实质函数 $P(A)$ 满足：</p>
<p>1） 非负性公理： 若 $A\in \mathcal F$ ,则 $P(A)\geq 0$ ;</p>
<p>2） 正则性公理：$P(\Omega)=1$</p>
<p>3） 可列可加性公理： 若 $A<em>1,A_2,\cdots, A_n,\cdots$互不相容，则： $P(\bigcup</em>{i=1}^\infty A<em>i) = \sum</em>{i=1}^{\infty} P(A_i)$  </p>
<p>则称 P(A) 为事件 A的概率， 称三元素  $(\Omega ,\mathcal F,P)$ 为概率空间。</p>
<h2 id="概率的性质："><a href="#概率的性质：" class="headerlink" title="概率的性质："></a>概率的性质：</h2><h3 id="概率的可加性"><a href="#概率的可加性" class="headerlink" title="概率的可加性"></a>概率的可加性</h3><h4 id="有限可加性"><a href="#有限可加性" class="headerlink" title="有限可加性"></a>有限可加性</h4><p>若有限个事件 $A<em>1,A_2,\cdots,A_n$ 互不相容，则有 $P(\bigcup</em>{i=1}^n A<em>i) = \sum</em>{i=1}^{n}P(A_1)$  注意了，可列可加性和有限可加性是不同的。</p>
<p>由于有限可加性，我们就可以得到以下求对立事件概率的公式：对任一事件 A, $P(\overline A) =1-P(A)$ </p>
<h3 id="概率的单调性"><a href="#概率的单调性" class="headerlink" title="概率的单调性"></a>概率的单调性</h3><h4 id="性质1"><a href="#性质1" class="headerlink" title="性质1"></a>性质1</h4><p>若 $A\supset B$ ,则 $P(A-B)=P(A)-P(B)$</p>
<p>进而可以推出： 若$A\supset B$， 则 $P(A)\geq P(B)$ </p>
<h4 id="性质2"><a href="#性质2" class="headerlink" title="性质2"></a>性质2</h4><p>对任意两个事件 A,B, 有 $P(A-B)=P(A)-P(AB)$ </p>
<h3 id="概率的加法公式"><a href="#概率的加法公式" class="headerlink" title="概率的加法公式"></a>概率的加法公式</h3><h4 id="性质1-1"><a href="#性质1-1" class="headerlink" title="性质1"></a>性质1</h4><p>对任意的两个事件A，B 有 $P(A\cup B)=P(A)+P(B)-P(AB)$ </p>
<p>对任意n个事件 $A<em>1,A_2,\cdots,A_n$ ，有 $P(\bigcup</em>{i=1}^n A<em>i)= \sum</em>{i=1}^n P(A<em>i)-\sum</em>{1\leq i&lt;j\leq n} P(A<em>iA_j)+\sum</em>{1\leq i&lt;j&lt;k\leq n}P(A_iA_jA_k)+\cdots+(-1)^{n-1}P(A_1A_2\cdots A_n)$</p>
<p>据此，可以推出 半可加性, 对任意两个事件 A,B 有</p>
<p>$P(A\cup B)\leq P(A)+P(B)$ </p>
<p>对任意n个事件  $A<em>1\cdots A_n$ ,有 $P(\cup</em>{i=1}^n)\leq \sum_{i=1}^n P(A_i)$ </p>
<h3 id="概率的连续性"><a href="#概率的连续性" class="headerlink" title="概率的连续性"></a>概率的连续性</h3><p>首先我们给出两个定义： 极限事件和上下连续</p>
<h4 id="极限事件"><a href="#极限事件" class="headerlink" title="极限事件"></a>极限事件</h4><ol>
<li>对 $\mathcal F$ 中任一<strong>单调不减</strong>的事件序列 $F<em>1\subset F_2\subset \cdots \subset F_n\subset \cdots$ ，称<strong>可列并</strong>  $\bigcup</em>{n=1}^\infty F<em>n$  为 ${F_n}$ 的极限事件，记为   $\lim\limits</em>{n\rightarrow \infty} F<em>n= \bigcup</em>{n=1}^\infty F_n$ </li>
<li>对 $\mathcal F$ 中任一<strong>单调不增</strong> 的事件序列 $E<em>1\supset E_2\supset \cdots\supset E_n\supset \cdots$ ,称<strong>可列交</strong> $\bigcap</em>{n=1}^\infty E<em>n$ 为 ${E_n}$ 的极限事件，记为 $\lim\limits</em>{n\rightarrow \infty} E<em>n=\bigcap</em>{n=1}^\infty E_n$</li>
</ol>
<h4 id="上下连续"><a href="#上下连续" class="headerlink" title="上下连续"></a>上下连续</h4><p>对 $\mathcal F$ 上的一个概率 P</p>
<ol>
<li>若它对$\mathcal F$ 中任一单调不减的时间序列 ${F<em>n}$  均成立 $\lim\limits</em>{n\rightarrow \infty}P(F<em>n)=P(\lim\limits</em>{n\rightarrow \infty } F_n)$ 则称概率P是<strong>下连续</strong>的</li>
<li>若它对$\mathcal F$ 中任一单调不增的时间序列 ${E<em>n}$  均成立 $\lim\limits</em>{n\rightarrow \infty}P(E<em>n)=P(\lim\limits</em>{n\rightarrow \infty } E_n)$ 则称概率P是<strong>上连续</strong>的</li>
</ol>
<h4 id="概率的连续性定义："><a href="#概率的连续性定义：" class="headerlink" title="概率的连续性定义："></a>概率的连续性定义：</h4><p>若 P 为 事件域 $\mathcal F$ 上的概率，则 P 既是下连续的，又是上连续的。(证明见书本 Prob&amp;Stat P34)</p>
<h2 id="条件概率"><a href="#条件概率" class="headerlink" title="条件概率"></a>条件概率</h2><h3 id="条件概率的定义"><a href="#条件概率的定义" class="headerlink" title="条件概率的定义"></a>条件概率的定义</h3><p>设 A与B 是严格不能空间 $\Omega$ 中的两事件，若 $P(B)&gt;0$, 则称 $P(A|B)=\frac{P(AB)}{P(B)}$ 为 “<strong>在B发生下A的条件概率</strong>“，简称<strong>条件概率</strong></p>
<p>要注意，条件概率也是概率，也满足概率的三个定义：</p>
<ol>
<li>非负性：  $A\in \mathcal F$ ,则 $P(A|B)\geq 0$ ;</li>
<li>归一性： $P(\Omega|B)=1$</li>
<li>可列可加性：$A<em>1,A_2,\cdots,A_n,\cdots$互不相容， 则 $P(\bigcup</em>{n=1}^\infty A<em>n|B)=\sum</em>{n=1}^\infty P(A_n|B)$ </li>
</ol>
<h3 id="乘法公式"><a href="#乘法公式" class="headerlink" title="乘法公式"></a>乘法公式</h3><p><strong>公式</strong></p>
<ol>
<li>如果 $P(B)&gt;0$ 则 $P(AB)=P(B)P(A|B)$ </li>
<li>进而可推出 若 $P(A<em>1A_2\cdots A</em>{n-1})&gt;0$ ,则 $P(A<em>1A_2\cdots A_n)=P(A_1)P(A_2|A_1)P(A_3|A_1A_2)\cdots P(A_n|A_1A_2\cdots A</em>{n-1})$</li>
</ol>
<h4 id="罐子模型"><a href="#罐子模型" class="headerlink" title="罐子模型"></a>罐子模型</h4><h3 id="全概率公式"><a href="#全概率公式" class="headerlink" title="全概率公式"></a>全概率公式</h3><p><strong>公式</strong>：设 $B<em>1,B_2,\cdots ,B_n$ 为样本空间$\Omega$ 的一个分割，,如果 $P(B_i)&gt;0,i=1,2,\cdots ,n$ 则对事件 A有 : $P(A)=\sum</em>{i=1}^n P(B_i)P(A|B_i)$ </p>
<p>对于全概率公式，我们要注意：</p>
<ol>
<li>全概率公式的最简单形式 假如 $0&lt;P(B)&lt;1$ 则 $P(A)=P(B)P(A|B)+P(\overline B)P(A|\overline B)$ </li>
<li>将条件从分割改为 $B_1,B_2,\cdots,B_n$ 互不相容， 全概率公式仍然成立</li>
<li>对可列个事件 $B<em>1,B_2,\cdots,B_n\cdots $互不相容，且 $A\subset \bigcup</em>{i=1}^n B_i$ 则全概率公式仍成立，只要将右边改成可列向项之和即可。</li>
</ol>
<h3 id="贝叶斯公式"><a href="#贝叶斯公式" class="headerlink" title="贝叶斯公式"></a>贝叶斯公式</h3><p>贝叶斯公式是在乘法公式和全概率公式的基础上推导而来</p>
<p><strong>公式</strong>： 设 $B_1,B_2\cdots ,B_n$是样本空间 $\Omega$ 的一个分割，如果 $P(A)&gt;0,P(B_i)&gt;0, ~i =1,2,\cdots,n$   则：</p>
<p>$P(B<em>i|A)=\frac{P(B_i)P(A|B_i)}{\sum</em>{j=1}^n P(B_j)P(A|B_j)}$ </p>
<h2 id="独立性"><a href="#独立性" class="headerlink" title="独立性"></a>独立性</h2><h3 id="两个事件的独立性"><a href="#两个事件的独立性" class="headerlink" title="两个事件的独立性"></a>两个事件的独立性</h3><p>若 $P(AB)=P(A)P(B)$  成立，最称事件 A与 B相互独立，简称 A与B 独立。否则称A与B不独立或相依</p>
<h4 id="性质"><a href="#性质" class="headerlink" title="性质"></a>性质</h4><p>若事件 $A$与$B$ 独立，则$ A$与 $\overline B$ 独立 ,$\overline A$与 $B$ 独立， $\overline A$与 $\overline B$ 独立。注意：<strong>相互独立事件又不是互斥事件，本来就可以同时发生的</strong></p>
<p>两个事件不可能既互斥又相互独立。</p>
<p>相互独立的事件之间没有影响，事件A的发生当然不会影响事件B的发生，两个事情是否同时发生都是有可能的。</p>
<p>互斥的事件当然不是独立的，因为一件事情的发生已经影响到了另外一件事的发生了。</p>
<h3 id="多个事件的相互独立性"><a href="#多个事件的相互独立性" class="headerlink" title="多个事件的相互独立性"></a>多个事件的相互独立性</h3><h4 id="两两独立"><a href="#两两独立" class="headerlink" title="两两独立"></a>两两独立</h4><p>设 A,B,C 是三个事件， 如果有：</p>
<p>$\begin{cases}P\left( AB\right) =P\left( A\right) P\left( B\right) \ P\left( AC\right) =P(A)P\left( C\right) \ P\left( BC\right) =P(B)P\left( C\right) \end{cases}$</p>
<p>则称 $A,B,C$ 两两独立。</p>
<h4 id="相互独立"><a href="#相互独立" class="headerlink" title="相互独立"></a>相互独立</h4><p><strong>若还有：</strong> $P(ABC)=P(A)P(B)P(C)$ 则称 A,B,C 相互独立。</p>
<p>要注意，两两独立不一定推出相互独立，相互独立也不一定能推出两两独立。</p>
<p>化简到一般形式：$\begin{cases}P\left( A<em>{i}Aj\right) =P\left( A</em>{i}\right) P\left( Ai\right) \ P\left( A<em>{i}A</em>{j}A<em>{k}\right) =P\left( A</em>{i}\right) P(A<em>j)P\left( A_n\right) \ \ldots \ldots \ P\left( A_1A</em>{2}\ldots A<em>{n}\right) =P(A_1)\cdot P\left( A</em>{2}\right) \ldots P(A_{n}) \end{cases}$</p>
<p>则称此 n个事件 $A_1,A_2,\cdots, A_n$ 相互独立。</p>
<h1 id="实战注意点："><a href="#实战注意点：" class="headerlink" title="实战注意点："></a>实战注意点：</h1><ol>
<li>互不相容 可以简化<strong>事件并的概率</strong>计算，相互独立 可以简化<strong>事件交的概率计算</strong>。 主要表现为：若事件 A、B、C互不相容，那么$P(A\cup B\cup C)=P(A)+P(B)+P(C)$ ； 若事件A、B、C 相互独立，那么 <code>P(ABC)=P(A)P(B)P(C)</code> </li>
<li>运用对偶法，可以把事件并转化成事件交。</li>
</ol>
<p>对偶律： $(A\cup B)^c = A^c\cap B^c$ , $(A\cap B)^c = A^c\cup B^c$ </p>
<p><strong>右上角C表示此集合的补集</strong></p>
<p>语言描述：<br>①A并B的补集 = A的补集交B的补集<br>②A交B的补集 = A的补集并B的补集</p>
<p>例题： 三个人独立地破译一个密码，它们能单独破译密码的概率分别是 $1/5,1/3,1/4$ 求密码被破译的概率</p>
<p>$P(B)=P(A_1\cup A_2\cup A_3)= P(A_1^c)\cap$ </p>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2021/03/02/os%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2-shell%E7%9A%84%E5%AE%9E%E7%8E%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/%5Bobject%20Object%5D">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/03/02/os%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2-shell%E7%9A%84%E5%AE%9E%E7%8E%B0/" itemprop="url">os实验报告2-shell的实现</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2021-03-02T21:09:03+08:00">
                2021-03-02
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2021-03-25T13:41:44+08:00">
                2021-03-25
              </time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Shell-在-Minix3中的实现"><a href="#Shell-在-Minix3中的实现" class="headerlink" title="Shell 在 Minix3中的实现"></a>Shell 在 Minix3中的实现</h1><h2 id="目的"><a href="#目的" class="headerlink" title="目的"></a>目的</h2><p>Shell主体结构是一个while循环，不断地接受用户键盘输入行并给出反馈。Shell 将输入行分解成单词序列，根据命令名称分为<strong>二类分别处理 </strong>，即<strong>shell内置命令</strong>（例如cd，history，exit）和 <strong>program 命令</strong> (例如/bin/目录下的ls，grep 等) 。识别为shell内置命令后，执行对应操作。接受program命令后，利用minix自带的程序创建一个或多个新进程，并等待进程结束。如果末尾<strong>包含&amp;参数</strong>，Shell可以不等待进程结束，直接返回。</p>
<h3 id="Program命令"><a href="#Program命令" class="headerlink" title="Program命令"></a>Program命令</h3><p>运行程序：利用fork调用创建进行子进程，利用execvp调用将minix程序装载到该进程，并赋予运行参数，最后Shell利用wait/waitpid调用等待子进程结束。（参见UNIX高级编程8.3，8.7和8.10节）</p>
<p>参考资料：</p>
<ol>
<li>Shell主要是为用户提供一个命令解释器，接收用户命令（如ls等)，然后调用相应的应用程序。实现的Shell支持后台进程的运行。</li>
<li>在计算内存和CPU总体使用情况时，可参考top命令实现 <a href="https://github.com/0xffea/MINIX3/blob/master/usr.bin/top/top.c" target="_blank" rel="noopener">https://github.com/0xffea/MINIX3/blob/master/usr.bin/top/top.c</a></li>
<li>推荐《UNIX环境高级编程》查找详细的系统调用使用方法。</li>
</ol>
<h4 id="1-实现带参数的程序运行功能"><a href="#1-实现带参数的程序运行功能" class="headerlink" title="1.实现带参数的程序运行功能"></a>1.实现带参数的程序运行功能</h4><p><code>program arg1 arg2 ... argN</code></p>
<h4 id="2-重定向功能，-将文件作为程序的输入-输出"><a href="#2-重定向功能，-将文件作为程序的输入-输出" class="headerlink" title="2. 重定向功能， 将文件作为程序的输入/输出"></a>2. 重定向功能， 将文件作为程序的输入/输出</h4><ul>
<li>“&gt;” 表示覆盖写 <code>program arg1 arg2 … argN &gt; output-file</code></li>
<li>“&gt;&gt;” 表示追加写 <code>program arg1 arg2 … argN &gt;&gt; output-file</code></li>
<li>“&lt;” 表示文件的输入 <code>program arg1 arg2 … argN &lt; input-file</code></li>
</ul>
<p>重定向：minix为每个进程赋予键盘输入和控制台输出的文件描述符默认为0和1。子进程装载程序前，利用close(0 or 1)将默认输入或者输出关闭，再调用dup(fd)将某个打开文件的文件描述fd映射到标准输入或输出。（参见UNIX高级编程3.12节）</p>
<h4 id="3-管道符号-“-”"><a href="#3-管道符号-“-”" class="headerlink" title="3. 管道符号 “|”"></a>3. 管道符号 “|”</h4><p>在程序间传递数据  <code>programA arg1 … argN | programB arg1 … argN</code></p>
<p>若有n个子进程组成管道流，Shell在fork前先用pipe调用创建n-1对管道描述符，关闭不需要的读写端。Shell运行fork后，每个子进程利用dup将前一个管道的读端映射到标准输入，后一个管道的写端映射到标准输出。（参见UNIX高级编程15.2节）</p>
<p><strong>在实现管道时，需要用到pipe和dup系统调用等，重定向标准向输入输出(参见教材1.4.3节)。</strong></p>
<h4 id="4-后台符号-amp"><a href="#4-后台符号-amp" class="headerlink" title="4. 后台符号&amp;"></a>4. 后台符号&amp;</h4><p>表示此命令将以后台运行的方式执行 <code>program arg1 arg2 … argN &amp;</code></p>
<p>后台运行：为了屏蔽键盘和控制台，子进程的标准输入、输出映射成/dev/null。子进程调用signal(SIGCHLD,SIG_IGN)，使得minix接管此进程。因此Shell可以避免调用wait/waitpid直接运行下一条命令。</p>
<h3 id="Shell-内置命令"><a href="#Shell-内置命令" class="headerlink" title="Shell 内置命令"></a>Shell 内置命令</h3><h4 id="1-工作路劲移动命令-cd"><a href="#1-工作路劲移动命令-cd" class="headerlink" title="1. 工作路劲移动命令 cd"></a>1. 工作路劲移动命令 cd</h4><p>提示： 因为Shell也是一个程序，启动时minix会分配一个当前工作目录，利用chdir系统调用可以移动Shell的工作目录。</p>
<h4 id="2-程序运行统计mytop"><a href="#2-程序运行统计mytop" class="headerlink" title="2. 程序运行统计mytop"></a>2. 程序运行统计mytop</h4><p>提示：参考minix终端输入top命令的输出信息，在minix系统/proc文件夹中通过open/read系统调用输出进程信息。</p>
<ul>
<li>/proc/meminfo中，查看<strong>内存信息</strong>，每个参数对应含义依次是<strong>页面大小pagesize</strong>，<strong>总页数量total </strong>，<strong>空闲页数量free</strong> ，<strong>最大页数量largest</strong> ，<strong>缓存页数量cached</strong>。可计算内存大小：$(pagesize ~*~total)/1024$，同理算出其他页内存大小。</li>
<li>/proc/kinfo中，查看<strong>进程和任务数量</strong>。</li>
<li>/proc/pid/psinfo中，例如/proc/107/psinfo文件中，查看pid为107的进程信息。每个参数对应含义依次是：<strong>版本version</strong>，<strong>类型type</strong>，<strong>端点endpt</strong>，<strong>名字name</strong>，<strong>状态state</strong>，<strong>阻塞状态blocked</strong>，<strong>动态优先级priority，滴答ticks，高周期highcycle，低周期lowcycle，内存memory，有效用户ID effuid，静态优先级nice等</strong>。其中会用到的参数有：类型，状态，滴答。进程时间$time=\frac{ticks}{(u32_t)60}$。</li>
</ul>
<p>输出内容：</p>
<ul>
<li><strong>总体内存大小，空闲内存大小，缓存大小</strong>。</li>
<li><strong>总体CPU使用占比</strong>。计算方法：得到进程和任务总数量total_proc，对每一个proc的ticks累加得到总体ticks，再计算空闲的ticks，最终可得到CPU使用百分比。</li>
</ul>
<h4 id="3-shell-退出命令-exit"><a href="#3-shell-退出命令-exit" class="headerlink" title="3. shell 退出命令 exit"></a>3. shell 退出命令 exit</h4><p>提示:  退出Shell的while循环，结束Shell的main函数。</p>
<h4 id="4-history-n-显示最近执行的n条指令"><a href="#4-history-n-显示最近执行的n条指令" class="headerlink" title="4. history n 显示最近执行的n条指令"></a>4. history n 显示最近执行的n条指令</h4><p>提示： 保存Shell每次的输入行，打印所需字符串即可</p>
<h3 id="测试用例"><a href="#测试用例" class="headerlink" title="测试用例"></a>测试用例</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;your&#x2F;path</span><br><span class="line">ls -a -l</span><br><span class="line">ls -a -l &gt; result.txt</span><br><span class="line">vi result.txt</span><br><span class="line">grep a &lt; result.txt</span><br><span class="line">ls -a -l | grep a</span><br><span class="line">vi result.txt &amp;</span><br><span class="line">mytop</span><br><span class="line">history n</span><br><span class="line">exit</span><br></pre></td></tr></table></figure>
<h2 id="内容与设计思想"><a href="#内容与设计思想" class="headerlink" title="内容与设计思想"></a>内容与设计思想</h2><p>这个实验主要是在Minix里面自己实现一个简单的shell，并实现一些基本的命令。</p>
<p>我会将整个project分割成很多小片段来一一实现。</p>
<h2 id="使用环境"><a href="#使用环境" class="headerlink" title="使用环境"></a>使用环境</h2><p>虚拟机： Guest OS</p>
<p>虚拟机软件： Oracle VirtualBox</p>
<p>物理机： Windows10</p>
<h2 id="实验过程"><a href="#实验过程" class="headerlink" title="实验过程"></a>实验过程</h2><p>首先我们先介绍一下 main函数的实现思路，然后再详细分析main函数中调用的各种函数</p>
<h3 id="宏定义"><a href="#宏定义" class="headerlink" title="宏定义"></a>宏定义</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> _PATH_PROC <span class="meta-string">"/proc/"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PSINFO_VERSION	0</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> TYPE_TASK	<span class="meta-string">'T'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> TYPE_SYSTEM	<span class="meta-string">'S'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> TYPE_USER	<span class="meta-string">'U'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> STATE_RUN	<span class="meta-string">'R'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> TIMECYCLEKEY <span class="meta-string">'t'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ORDERKEY <span class="meta-string">'o'</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span>  USED		0x1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span>  IS_TASK	0x2</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span>  IS_SYSTEM	0x4</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span>  BLOCKED	0x8</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ORDER_CPU	0</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ORDER_MEMORY	1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ORDER_HIGHEST	ORDER_MEMORY</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span>  TC_BUFFER  1024        <span class="comment">/* Size of termcap(3) buffer    */</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span>  TC_STRINGS  200        <span class="comment">/* Enough room for cm,cl,so,se  */</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* name of cpu cycle types, in the order they appear in /psinfo. */</span></span><br><span class="line"><span class="comment">//cpu 周期的种类，</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">char</span> *cputimenames[] = &#123; <span class="string">"user"</span>, <span class="string">"ipc"</span>, <span class="string">"kernelcall"</span> &#125;;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CPUTIMENAMES (sizeof(cputimenames)/sizeof(cputimenames[0]))</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CPUTIME(m, i) (m &amp; (1L &lt;&lt; (i)))</span></span><br></pre></td></tr></table></figure>
<h3 id="全局变量"><a href="#全局变量" class="headerlink" title="全局变量"></a>全局变量</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> *message;  <span class="comment">//用于输出当前的路径</span></span><br><span class="line"><span class="keyword">int</span> whilecnt=<span class="number">0</span>;	<span class="comment">//用于记载已输入的命令条数，为history n做准备</span></span><br><span class="line"><span class="keyword">char</span> msg[<span class="number">40</span>][<span class="number">256</span>];<span class="comment">//用于记载已输入的命令信息，为history n做准备</span></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> nr_procs, nr_tasks;<span class="comment">//进程数和任务数</span></span><br><span class="line"><span class="keyword">int</span> nr_total;<span class="comment">//进程和任务总数</span></span><br><span class="line"><span class="keyword">int</span> order = ORDER_CPU;<span class="comment">//</span></span><br><span class="line"><span class="keyword">int</span> blockedverbose = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">char</span> *Tclr_all;</span><br><span class="line"><span class="keyword">int</span> slot=<span class="number">1</span>;	<span class="comment">//这个变量是进程结构体在数组中的位置</span></span><br></pre></td></tr></table></figure>
<h3 id="main函数"><a href="#main函数" class="headerlink" title="main函数"></a>main函数</h3><p>在main函数中，主要是实现一个循环。</p>
<p>首先我们要定义一些参数：</p>
<p><code>wordcount</code> 即输入命令中的单词的个数</p>
<p><code>wordmatrix</code> 即一个单词数组，每一行存储一个单词，每一列头字符为<code>\0</code></p>
<p><code>buf</code> 即存放我们命令的缓冲数组。</p>
<p>首先我们需要判断系统中还有没有足够的空间来存放下我们的语句。当空间不足的时候，malloc函数会返回NULL指针，然后我们就返回 <code>malloc failed</code> 并推出shell。这里，<code>perror</code> 是C语言标准库 <code>&lt;stdio.h&gt;</code> 的一个函数，它会将一个描述性错误消息输出到<code>stderr</code> .</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span>&#123;</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">int</span> wordcount = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> wordmatrix[<span class="number">100</span>][<span class="number">256</span>];</span><br><span class="line">    <span class="keyword">char</span> **arg = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">char</span> *buf = <span class="literal">NULL</span>; <span class="comment">//用户输入</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>((buf = (<span class="keyword">char</span> *)<span class="built_in">malloc</span>(<span class="number">256</span>))== <span class="literal">NULL</span>)&#123;</span><br><span class="line">        perror(<span class="string">"malloc failed"</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>接下来是循环的主体。 首先我们利用<code>memset</code>函数将buf 数组初始化清零。</p>
<p>然后我们要给 <code>message</code>申请一段空间。这里，<code>message</code>是全局变量</p>
<p>，通过 <code>getcwd</code>这个函数来获取当前所在的路径并通过printf打印出来。比如说，当前我正在 <code>proj1_shell</code> 文件夹当中启动 我们的shell，如下图所示：</p>
<p><img src="/2021/03/02/os%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2-shell%E7%9A%84%E5%AE%9E%E7%8E%B0/1.png"></p>
<p>然后我们需要将 message 释放掉，因为每次循环我们都会重新申请message数组，如果不将其释放会产生很多垃圾、占用我们的虚拟机空间。</p>
<p>既然下来我们就要利用<code>getOrder()</code>函数从命令行中读取命令，并将其存储在我们刚刚声明的 buf数组当中。还需要将buf数组拷贝到msg二维数组中做一个备份，当收到history n的命令后，会从这个数组中查看之前输入过的命令。</p>
<p>如果输入的是exit命令，那么就直接跳出循环。</p>
<p>然后我们对 wordmatrix 二维数组的每一行的开头都设置为<code>\0</code> (头插法),为接下来解析命令做准备。 <code>anaOrder()</code>即 analyze order的缩写，其目的就是解析buf中的命令，并将结果存入到wordmatrix数组当中去。</p>
<p>将命令全部解析完成之后，我们调用 execommand函数，也就是执行我们解析完的命令。这也是我们待会要着重分析的函数。因为所有的 内置命令、Program 命令都在这个函数中实现。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span>&#123;</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"> <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="built_in">memset</span>(buf, <span class="number">0</span>, <span class="number">256</span>);    <span class="comment">//将buf所指的空间清零</span></span><br><span class="line">        message = (<span class="keyword">char</span> *)<span class="built_in">malloc</span>(<span class="number">100</span>);</span><br><span class="line">        getcwd(message, <span class="number">100</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"os_shell:%s # "</span>, message);</span><br><span class="line">        <span class="built_in">free</span>(message);</span><br><span class="line">        getOrder(buf);</span><br><span class="line">        <span class="built_in">strcpy</span>(msg[whilecnt],buf);<span class="comment">//whilecnt一开始默认为0</span></span><br><span class="line">        whilecnt++;</span><br><span class="line">        <span class="keyword">if</span>( <span class="built_in">strcmp</span>(buf, <span class="string">"exit\n"</span>) == <span class="number">0</span> )&#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++)&#123;</span><br><span class="line">            wordmatrix[i][<span class="number">0</span>] = <span class="string">'\0'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        wordcount = <span class="number">0</span>;</span><br><span class="line">        anaOrder(buf, &amp;wordcount, wordmatrix);</span><br><span class="line">        exeCommand(wordcount, wordmatrix);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最后，当循环结束的时候，我们对buf数组进行回收。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span>&#123;</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">	<span class="keyword">if</span>(buf != <span class="literal">NULL</span>)&#123;</span><br><span class="line">        <span class="built_in">free</span>(buf);</span><br><span class="line">        buf = <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="getOrder函数"><a href="#getOrder函数" class="headerlink" title="getOrder函数"></a>getOrder函数</h4><p><code>getOrder</code>函数是从命令行窗口读取我们输入的命令、并将命令存放在buf数组当中。</p>
<p>首先我们要了解我们输入的命令长什么样： 有一些单词、符号，中间用空格隔开，然后以<code>\n</code>换行符号结尾。</p>
<p>我们使用 <code>getchar()</code>函数来单字符读取命令依次存储到buf数组，buf数组最后两个符号分别是<code>\0</code>(结束符)和<code>\n</code> (换行符)。</p>
<p>如果输入的命令过长，导致计数器已经到达256了，那么就会报错并退出函数。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">getOrder</span><span class="params">(<span class="keyword">char</span> *buf)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> c = getchar();</span><br><span class="line">    <span class="keyword">while</span>(cnt &lt; <span class="number">256</span> &amp;&amp; c != <span class="string">'\n'</span>)&#123;</span><br><span class="line">        buf[cnt++] = c;</span><br><span class="line">        c = getchar();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    buf[cnt++]=<span class="string">'\n'</span>;</span><br><span class="line">    buf[cnt]=<span class="string">'\0'</span>;</span><br><span class="line">    <span class="keyword">if</span>(cnt == <span class="number">256</span>)&#123;</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="anaOrder函数"><a href="#anaOrder函数" class="headerlink" title="anaOrder函数"></a>anaOrder函数</h4><p>这个函数会解析buf中的命令，所谓解析，就是利用空格符，将buf中的命令一个单词一个单词的拆开，然后存放到wordmatrix当中去。</p>
<p>这个函数的整体架构是由一个双重循环组成的。大循环解析整个命令，小循环提取出命令中每一个word。</p>
<p>首先我们令 数组p和数组q都等于buf数组。</p>
<p>如果p数组一开始就是回车，说明我们什么命令都没输入或者命令已经解析完成，那么就直接跳出循环；如果命令前面字符都是空格，那么我们就从非空格字符的地方开始解析。</p>
<p>当排除了空白输入以及空格符号之后，我们令<code>q=p</code> ，计数器number等于0。然后一直读取到一个单词结束，这时候 number就等于这个单词的长度。接下来我们利用 <code>strncpy</code> 函数将p中的前number+1个字节复制到wordmatrix中属于这个单词的位置当中(*wordcount从0开始)——为什么要number+1呢？因为这时候第number+1个字符要么是<code>&#39;&#39;</code>要么是<code>&#39;\n&#39;</code> 因此也要复制进去，方便之后将最后一个字符改成<code>\0</code>结束符。</p>
<p>最后，将单词计数器wordcount加上1，然后令p等于q，相当于<strong>砍掉</strong>了一个单词。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">anaOrder</span><span class="params">(<span class="keyword">char</span>* buf, <span class="keyword">int</span>* wordcount, <span class="keyword">char</span> (*wordmatrix)[<span class="number">256</span>])</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> *p = buf;</span><br><span class="line">    <span class="keyword">char</span> *q = buf;</span><br><span class="line">    <span class="keyword">int</span> number = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(p[<span class="number">0</span>] == <span class="string">'\n'</span>)&#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(p[<span class="number">0</span>] == <span class="string">' '</span>)&#123;</span><br><span class="line">            p++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            q = p;</span><br><span class="line">            number = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span>((q[<span class="number">0</span>] != <span class="string">' '</span>) &amp;&amp; (q[<span class="number">0</span>] != <span class="string">'\n'</span>))&#123;</span><br><span class="line">                number++;</span><br><span class="line">                q++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">strncpy</span>(wordmatrix[*wordcount], p, number + <span class="number">1</span>);</span><br><span class="line">            wordmatrix[*wordcount][number] = <span class="string">'\0'</span>;</span><br><span class="line">            *wordcount = *wordcount + <span class="number">1</span>;</span><br><span class="line">            p = q;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="exeCommand函数"><a href="#exeCommand函数" class="headerlink" title="exeCommand函数"></a>exeCommand函数</h3><p>exeCommand函数是整个shell中最关键也是最复杂的函数。因代码过长，我们将其拆分成数个小部分一一分析。</p>
<h4 id="准备阶段"><a href="#准备阶段" class="headerlink" title="准备阶段"></a>准备阶段</h4><p>这一部分我们定义了一些变量：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">exeCommand</span><span class="params">(<span class="keyword">int</span> wordcount, <span class="keyword">char</span> (*wordmatrix)[<span class="number">256</span>])</span></span>&#123;</span><br><span class="line">    <span class="keyword">pid_t</span> pid;		<span class="comment">// 进程号</span></span><br><span class="line">    <span class="keyword">char</span> *file;		<span class="comment">// 文件名称</span></span><br><span class="line">    <span class="keyword">int</span> correct = <span class="number">1</span>;<span class="comment">// 格式判断标志</span></span><br><span class="line">    <span class="keyword">int</span> way = <span class="number">0</span>;	<span class="comment">// 符号分类器</span></span><br><span class="line">    <span class="keyword">int</span> status;		<span class="comment">// 程序</span></span><br><span class="line">    <span class="keyword">int</span> i;				</span><br><span class="line">    <span class="keyword">int</span> fd;				</span><br><span class="line">    <span class="keyword">char</span> *<span class="keyword">word</span>[wordcount + <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">char</span> *wordnext[wordcount + <span class="number">1</span>];<span class="comment">//存放管道运算符后面的命令</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//将命令取出</span></span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; wordcount; i++)&#123;</span><br><span class="line">        <span class="keyword">word</span>[i] = (<span class="keyword">char</span> *)wordmatrix[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">word</span>[wordcount] = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后，我们通过一个循环将wordmatrix中的每个单词都复制到word指针数组当中去。并将最后一个指针设置为NULL</p>
<h4 id="cd"><a href="#cd" class="headerlink" title="cd"></a>cd</h4><p>如果我们命令的第一个单词为<code>cd</code> ,那么我们就看第二个word是什么。如果第二个word是NULL，说明我们的命令就是<code>cd\n</code>那就直接返回；否则我们就利用 <code>chdir</code>这个函数改变当前的目录、转到新的目录，如果返回-1就说明该目录不存在，于是我们调用perror抛出一个错误。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">exeCommand</span><span class="params">(<span class="keyword">int</span> wordcount, <span class="keyword">char</span> (*wordmatrix)[<span class="number">256</span>])</span></span>&#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">strcmp</span>(<span class="keyword">word</span>[<span class="number">0</span>], <span class="string">"cd"</span>) == <span class="number">0</span>)&#123;<span class="comment">//返回0代表word[0] = "cd"</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">word</span>[<span class="number">1</span>] == <span class="literal">NULL</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(chdir(<span class="keyword">word</span>[<span class="number">1</span>]) ==  <span class="number">-1</span>)&#123;</span><br><span class="line">            perror(<span class="string">"cd"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="history-n"><a href="#history-n" class="headerlink" title="history n"></a>history n</h4><p>如果我们命令的第一个word 是 <code>history</code> ，那么我们就要显示最近执行的n条指令。 这n条命令在main函数的时候已经被存到<code>msg</code>数组当中去了，我们现在要做的就是个打印的操作。</p>
<p>比如说我输入的命令是<code>history 15</code>,那么这时候 <code>word[1]</code> 就是 <code>(char*)15</code> ,然后我们就需要将字符数组转换为整数——这里我们使用atoi函数。我们在main函数中用<code>whilecnt</code>来作为 命令的计数器, <code>whilecnt</code>的值就是当前<code>msg</code> 数组中存放的命令数量+1， 所以我们输出的5条是从 <code>whilecnt-1</code>开始计算，一直到 <code>whilecnt-6</code>结束，然后将命令依次打印输出。</p>
<p>注意，history和mytop 既可以创建一个子进程让其运行，也可以直接在父进程中运行。 但是因为我将program命令和shell内置命令放在一个 execommand函数中实现了。 如果这里不创建一个子进程，直接在父进程中运行，那么后面会出现奇奇怪怪的打印问题，因此为了安全和方便起见，我们这里也将其放到一个子进程当中去运行。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">if</span>((pid = fork()) &lt; <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"fork error\n"</span>);</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">strcmp</span>(<span class="keyword">word</span>[<span class="number">0</span>],<span class="string">"history"</span>)==<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(pid==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">char</span> *cnum = <span class="keyword">word</span>[<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">int</span> num = atoi(cnum);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d"</span>, num);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = whilecnt - <span class="number">1</span>; i &gt; whilecnt - num - <span class="number">1</span>; i--) &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"command %d:"</span>, i);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%s"</span>, msg[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>效果如下：</p>
<p><img src="/2021/03/02/os%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2-shell%E7%9A%84%E5%AE%9E%E7%8E%B0/5.png"></p>
<h4 id="mytop"><a href="#mytop" class="headerlink" title="mytop"></a>mytop</h4><p>这个函数需要输出的东西异常的多：</p>
<ul>
<li><strong>总体内存大小、空闲内存大小、缓存大小、总体CPU使用占比</strong></li>
</ul>
<p>我们用不同的函数来实现这些信息</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="built_in">strcmp</span>(<span class="keyword">word</span>[<span class="number">0</span>], <span class="string">"mytop"</span>) == <span class="number">0</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(pid==<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">int</span> cputimemode = <span class="number">1</span>;</span><br><span class="line">        getkinfo();</span><br><span class="line">        print_memory();</span><br><span class="line">        get_procs();</span><br><span class="line">        <span class="keyword">if</span> (prev_proc == <span class="literal">NULL</span>)</span><br><span class="line">            get_procs();</span><br><span class="line">        print_procs(prev_proc, proc, cputimemode);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="print-memory"><a href="#print-memory" class="headerlink" title="print_memory();"></a>print_memory();</h5><p>这个函数就是打印出当前主存的使用情况。</p>
<p>首先我们打开 meminfo这个文件：</p>
<p><img src="/2021/03/02/os%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2-shell%E7%9A%84%E5%AE%9E%E7%8E%B0/3.png"></p>
<p>我们发现这里有5个数据，依次是：页面大小、总的页数、空闲页数、最大连续页、缓存页数量</p>
<p>那么这里我们就可以以此计算总的内存、空闲内存、最大页的内存、缓存。计算公式为：$(PAGESIZE * TOTAL)/1024$</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">print_memory</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    FILE *fp;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> pagesize;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">long</span> total, <span class="built_in">free</span>, largest, cached;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ((fp = fopen(<span class="string">"/proc/meminfo"</span>, <span class="string">"r"</span>)) == <span class="literal">NULL</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">fscanf</span>(fp, <span class="string">"%u %lu %lu %lu %lu"</span>, &amp;pagesize, &amp;total, &amp;<span class="built_in">free</span>,</span><br><span class="line">               &amp;largest, &amp;cached) != <span class="number">5</span>) &#123;<span class="comment">//如果不是五个参数就说明读取失败</span></span><br><span class="line">        fclose(fp);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fclose(fp);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"main memory: %ldK total, %ldK free, %ldK contig free, "</span></span><br><span class="line">           <span class="string">"%ldK cached\n"</span>,</span><br><span class="line">           (pagesize * total)/<span class="number">1024</span>, (pagesize * <span class="built_in">free</span>)/<span class="number">1024</span>,</span><br><span class="line">           (pagesize * largest)/<span class="number">1024</span>, (pagesize * cached)/<span class="number">1024</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>到这一步，我们可以试试看效果如何：</p>
<p><img src="/2021/03/02/os%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2-shell%E7%9A%84%E5%AE%9E%E7%8E%B0/4.png"></p>
<h5 id="getkinfo"><a href="#getkinfo" class="headerlink" title="getkinfo();"></a>getkinfo();</h5><p>这个函数就是读取/proc/kinfo得到总的进程和任务数。首先我们来看看 <code>/proc/kinfo</code> 中的记载的记录：</p>
<p><img src="/2021/03/02/os%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2-shell%E7%9A%84%E5%AE%9E%E7%8E%B0/2.png"></p>
<p>其中，256就代表进程数，5代表任务数量</p>
<p>然后我们将这两个数字读入。并返回  进程数与任务数量 之和。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">void</span> <span class="title">getkinfo</span><span class="params">()</span></span>&#123;</span><br><span class="line">    FILE *fp;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ((fp = fopen(<span class="string">"/proc/kinfo"</span>, <span class="string">"r"</span>)) == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"opening "</span> _PATH_PROC <span class="string">"kinfo failed\n"</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">fscanf</span>(fp, <span class="string">"%u %u"</span>, &amp;nr_procs, &amp;nr_tasks) != <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"reading from "</span> _PATH_PROC <span class="string">"kinfo failed\n"</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fclose(fp);</span><br><span class="line"></span><br><span class="line">    nr_total<span class="comment">/*进程和任务总数*/</span> = (<span class="keyword">int</span>) (nr_procs + nr_tasks);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="get-procs"><a href="#get-procs" class="headerlink" title="get_procs();"></a>get_procs();</h5><p>这个函数的作用是将所有需要的信息放在结构数组<code>proc[]</code> 中，每个元素都是一个<strong>进程结构体</strong>。</p>
<p>首先我们在文件一开始已经定义了一个 proc 结构： </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">proc</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> p_flags; 										<span class="comment">//proc的类型：系统/用户</span></span><br><span class="line">    <span class="keyword">endpoint_t</span> p_endpoint;					<span class="comment">//端点，可以看做是ID</span></span><br><span class="line">    <span class="keyword">char</span> p_name[PROC_NAME_LEN+<span class="number">1</span>]; 	<span class="comment">//名字</span></span><br><span class="line">    <span class="keyword">pid_t</span> p_pid;										<span class="comment">//进程号</span></span><br><span class="line">    <span class="keyword">u64_t</span> p_cpucycles[CPUTIMENAMES];<span class="comment">//cpu周期</span></span><br><span class="line">    <span class="keyword">endpoint_t</span> p_blocked; 					<span class="comment">//阻塞状态</span></span><br><span class="line">    <span class="keyword">int</span> p_priority; 								<span class="comment">//动态优先级</span></span><br><span class="line">    <span class="keyword">time_t</span> p_user_time; 						<span class="comment">//用户时间</span></span><br><span class="line">    vir_bytes p_memory; 						<span class="comment">//内存</span></span><br><span class="line">    <span class="keyword">uid_t</span> p_effuid;									<span class="comment">//有效用户ID</span></span><br><span class="line">    <span class="keyword">int</span> p_nice; 										<span class="comment">//静态优先级</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">proc</span> *<span class="title">proc</span> = <span class="title">NULL</span>,*<span class="title">prev_proc</span> = <span class="title">NULL</span>;</span><span class="comment">//申请两个 结构数组</span></span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">get_procs</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">proc</span> *<span class="title">p</span>;</span></span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">		<span class="comment">//总之，这部分就是要将两个数组proc和prev_proc 都“装满”进程</span></span><br><span class="line">    p = prev_proc;</span><br><span class="line">    prev_proc = proc;</span><br><span class="line">    proc = p;</span><br><span class="line">		</span><br><span class="line">    <span class="keyword">if</span> (proc == <span class="literal">NULL</span>) &#123;</span><br><span class="line">      	<span class="comment">//分配内存</span></span><br><span class="line">        <span class="comment">//每个进程分配一个结构体</span></span><br><span class="line">        <span class="comment">//分配nr_total个单位proc结构体内存空间,并把指针赋予proc</span></span><br><span class="line">        proc = <span class="built_in">malloc</span>(nr_total * <span class="keyword">sizeof</span>(proc[<span class="number">0</span>]));</span><br><span class="line">				<span class="comment">//如果内存申请失败，就报错</span></span><br><span class="line">        <span class="keyword">if</span> (proc == <span class="literal">NULL</span>) &#123;</span><br><span class="line">            <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"Out of memory!\n"</span>);</span><br><span class="line">            <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">		<span class="comment">//首先将所有的proc的flag置0</span></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; nr_total; i++)</span><br><span class="line">        proc[i].p_flags = <span class="number">0</span>;</span><br><span class="line">		</span><br><span class="line">    parse_dir();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="parse-dir"><a href="#parse-dir" class="headerlink" title="parse_dir()"></a>parse_dir()</h6><p>这个函数的作用是获取到/proc/  下的<strong>所有进程pid</strong></p>
<p>也就是获取这些文件夹的名字：</p>
<p><img src="/2021/03/02/os%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2-shell%E7%9A%84%E5%AE%9E%E7%8E%B0/6.png" style="zoom: 50%;"></p>
<p>打开<code>/proc</code>文件夹之后，我们用一个循环来遍历目录及其子目录。</p>
<p>首先我们看一下 dirent结构</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">dirent</span>&#123;</span></span><br><span class="line">   	<span class="keyword">ino_t</span>          d_ino;       <span class="comment">/* inode number */</span></span><br><span class="line">    <span class="keyword">off_t</span>          d_off;       <span class="comment">/* offset to the next dirent */</span></span><br><span class="line">    <span class="keyword">unsigned</span> short d_reclen;    <span class="comment">/* length of this record */</span></span><br><span class="line">		<span class="keyword">unsigned</span> <span class="keyword">char</span>  d_type;<span class="comment">/* type of file; not supported by all file system types */</span></span><br><span class="line">    <span class="keyword">char</span>           d_name[<span class="number">256</span>]; <span class="comment">/* filename */</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>然后通过一个for循环，依次读取<code>/proc</code>目录下的子目录项，并将目录的名字转换成十进制整数。然后执行<code>parse_file()</code>操作以获取这个目录中的信息。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">parse_dir</span><span class="params">()</span></span>&#123;</span><br><span class="line">    DIR *p_dir;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">dirent</span> *<span class="title">p_ent</span>;</span><span class="comment">//目录项</span></span><br><span class="line">    <span class="keyword">pid_t</span> pid;</span><br><span class="line">    <span class="keyword">char</span> *<span class="built_in">end</span>;<span class="comment">//end是指向第一个不可转换的字符位置的指针</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ((p_dir = opendir(<span class="string">"/proc"</span>)) == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        perror(<span class="string">"opendir on "</span> _PATH_PROC);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (p_ent = readdir(p_dir); p_ent != <span class="literal">NULL</span>; p_ent = readdir(p_dir)) &#123;</span><br><span class="line">        pid = strtol(p_ent-&gt;d_name, &amp;<span class="built_in">end</span>, <span class="number">10</span>);<span class="comment">//strtol函数将字符串转换为十进制长整数</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">end</span>[<span class="number">0</span>] &amp;&amp; pid != <span class="number">0</span>)</span><br><span class="line">            parse_file(pid);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    closedir(p_dir);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="parse-file"><a href="#parse-file" class="headerlink" title="parse_file()"></a>parse_file()</h6><p>这个函数的作用是获取每一个进程信息，并判断信息是否可用。传入的参数是这个进程的进程号码。将有用的信息传入到一个结构数组中去，这个结构数组就是 之前声明的 *p，里面每一个元素就是每一个进程/任务。</p>
<p>这里我们要分清楚任务和进程的区别，才能在接下来中更清楚得区分他们。 首先，一个进程可能涉及到多个任务，一个任务也可对应多个进程。他们的一些信息都存放在 <code>psinfo</code>文件当中。但是，进程是表示资源分配的基本单位，又是调度运行的基本单位。为了避免重复运算，我们这里计算所有的进程，但是不计算任务。</p>
<p>首先我们设置一些变量。这些变量就是我们接下来要从进程的 <code>/psinfo</code> 读取的。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">parse_file</span><span class="params">(<span class="keyword">pid_t</span> pid)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> path[PATH_MAX], name[<span class="number">256</span>], type, state;<span class="comment">//路径、名字、种类、状态</span></span><br><span class="line">    <span class="keyword">int</span> version, endpt, effuid; <span class="comment">//版本、端点、有效用户ID</span></span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">long</span> cycles_hi, cycles_lo; <span class="comment">//高周期、低周期</span></span><br><span class="line">    FILE *fp;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">proc</span> *<span class="title">p</span>;</span></span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="built_in">sprintf</span>(path, <span class="string">"/proc/%d/psinfo"</span>, pid);<span class="comment">//将path设置为 "/proc/(pid)/psinfo"的格式</span></span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后我们通过<code>fopen()</code>函数来读取(<code>&quot;r&quot;</code>)该进程的<code>/psinfo</code>文件 </p>
<p>下面两张图片分别是任务的 <code>psinfo</code> 以及 进程的 <code>psinfo</code></p>
<p> <img src="/2021/03/02/os%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2-shell%E7%9A%84%E5%AE%9E%E7%8E%B0/8.png" style="zoom: 70%;"></p>
<p>上图是一个任务，版本是0，类型为T(TASK), 端点是-5，任务名叫做 asyncm，状态是 W(WORK),我们发现在任务下面，动态优先级、嘀嗒、周期、ID都为0，  </p>
<p><img src="/2021/03/02/os%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2-shell%E7%9A%84%E5%AE%9E%E7%8E%B0/7.png" style="zoom: 70%;"></p>
<p>在这个编号为107的进程中：</p>
<p>版本是 0，(第一次读取)</p>
<p>类型为U（即USER），端点是32859 (第二次读取)</p>
<p>名字叫devmand , 状态是 ‘S’, 阻塞状态为 1，动态优先级为7，滴答为 25，高周期1186，低周期4 (第三次读取)</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">parse_file</span><span class="params">(<span class="keyword">pid_t</span> pid)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">    <span class="keyword">if</span> ((fp = fopen(path, <span class="string">"r"</span>)) == <span class="literal">NULL</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">fscanf</span>(fp, <span class="string">"%d"</span>, &amp;version) != <span class="number">1</span>) &#123;</span><br><span class="line">        fclose(fp);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//判断version是否为0，如果不为0就会报错</span></span><br><span class="line">    <span class="keyword">if</span> (version != PSINFO_VERSION) &#123; <span class="comment">//0</span></span><br><span class="line">        <span class="built_in">fputs</span>(<span class="string">"procfs version mismatch!\n"</span>, <span class="built_in">stderr</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//读取文件中的第二个、第三个参数，分别是文件类型和端点</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">fscanf</span>(fp, <span class="string">" %c %d"</span>, &amp;type, &amp;endpt) != <span class="number">2</span>) &#123;</span><br><span class="line">        fclose(fp);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//每当读取了一个合法的任务/进程，slot就会加1</span></span><br><span class="line">    slot++;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//判断endpoint的值是否合理 在0到nr_total的范围内</span></span><br><span class="line">    <span class="keyword">if</span>(slot &lt; <span class="number">0</span> || slot &gt;= nr_total) &#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"top: unreasonable endpoint number %d\n"</span>, endpt);</span><br><span class="line">        fclose(fp);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">		<span class="comment">//slot为该进程结构体在数组中的位置</span></span><br><span class="line">    p = &amp;proc[slot];<span class="comment">//把slot地址赋值给p</span></span><br><span class="line"></span><br><span class="line">  	<span class="comment">//判断这个进程的类型到底是 TASK类型还是SYSTEM类型</span></span><br><span class="line">    <span class="keyword">if</span> (type == TYPE_TASK)<span class="comment">//如果是TASK类型，数值为 'T'</span></span><br><span class="line">        p-&gt;p_flags |= IS_TASK;<span class="comment">//0b0010</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (type == TYPE_SYSTEM)<span class="comment">//如果是SYSTEM类型，数值为'S'</span></span><br><span class="line">        p-&gt;p_flags |= IS_SYSTEM;<span class="comment">//0b0100</span></span><br><span class="line">  	<span class="comment">//除了这两者之外，就是 User 类型的进程了</span></span><br><span class="line">		<span class="comment">//将endpt和pid存入结构体</span></span><br><span class="line">    p-&gt;p_endpoint = endpt;</span><br><span class="line">    p-&gt;p_pid = pid;</span><br><span class="line">		<span class="comment">//读取名字 状态 阻塞状态 动态优先级 进程时间 高周期 低周期</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">fscanf</span>(fp, <span class="string">" %255s %c %d %d %lu %*u %lu %lu"</span>,</span><br><span class="line">               name, &amp;state, &amp;p-&gt;p_blocked, &amp;p-&gt;p_priority,</span><br><span class="line">               &amp;p-&gt;p_user_time, &amp;cycles_hi, &amp;cycles_lo) != <span class="number">7</span>) &#123;</span><br><span class="line"></span><br><span class="line">        fclose(fp);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">		<span class="comment">//将读取到的name复制给p-&gt;name ,最多复制 sizeof(p-&gt;p_name)-1 位</span></span><br><span class="line">    <span class="built_in">strncpy</span>(p-&gt;p_name, name, <span class="keyword">sizeof</span>(p-&gt;p_name)<span class="number">-1</span>);</span><br><span class="line">  	<span class="comment">//然后将名字的最后一个字符改成0</span></span><br><span class="line">    p-&gt;p_name[<span class="keyword">sizeof</span>(p-&gt;p_name)<span class="number">-1</span>] = <span class="number">0</span>;</span><br><span class="line">		<span class="comment">//如果不是正在运行的进程，那就打一个阻塞的标志</span></span><br><span class="line">    <span class="keyword">if</span> (state != STATE_RUN)<span class="comment">//如果数值为'R',就说明这个程序在运行</span></span><br><span class="line">        p-&gt;p_flags |= BLOCKED;</span><br><span class="line">		<span class="comment">//通过和 0x1 按位或，表明已经处理完毕。</span></span><br><span class="line">    p-&gt;p_flags |= USED;</span><br><span class="line"></span><br><span class="line">    fclose(fp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在这里，我们简单查看一下 各个 task 的名字以及他们的内存，我们发现他们的端点都是负的，原因我还没搞清楚。</p>
<p><img src="/2021/03/02/os%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2-shell%E7%9A%84%E5%AE%9E%E7%8E%B0/9.png"></p>
<p>我们再打印一部分的进程的信息：</p>
<p><img src="/2021/03/02/os%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2-shell%E7%9A%84%E5%AE%9E%E7%8E%B0/10.png"></p>
<h5 id="print-procs"><a href="#print-procs" class="headerlink" title="print_procs()"></a>print_procs()</h5><p>首先我们在一开始定义一个结构体tp，用来存放进程结构体数组和它的嘀嗒</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">tp</span>&#123;</span></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">proc</span> *<span class="title">p</span>;</span></span><br><span class="line">	<span class="keyword">u64_t</span> ticks;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个函数输出CPU使用时间</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print_procs</span><span class="params">(struct proc *proc1, struct proc *proc2, <span class="keyword">int</span> cputimemode)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> p, nprocs;</span><br><span class="line">    <span class="keyword">u64_t</span> systemticks = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">u64_t</span> userticks = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">u64_t</span> total_ticks = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> blockedseen = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">struct</span> <span class="title">tp</span> *<span class="title">tick_procs</span> = <span class="title">NULL</span>;</span></span><br><span class="line">    <span class="comment">//tp结构体的数组tick_procs,对所有的进程和任务(即上面读出来的nr_total)计算ticks</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (tick_procs == <span class="literal">NULL</span>) &#123;<span class="comment">//如果这个数组是空的话，就要给其分配内存</span></span><br><span class="line">        tick_procs = <span class="built_in">malloc</span>(nr_total * <span class="keyword">sizeof</span>(tick_procs[<span class="number">0</span>]));</span><br><span class="line">				<span class="comment">//申请内存下不来，就报错</span></span><br><span class="line">        <span class="keyword">if</span> (tick_procs == <span class="literal">NULL</span>) &#123;</span><br><span class="line">            <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"Out of memory!\n"</span>);</span><br><span class="line">            <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">		<span class="comment">//总数是nr_total,对所有的进程/任务进行遍历</span></span><br><span class="line">    <span class="keyword">for</span>(p = nprocs = <span class="number">0</span>; p &lt; nr_total; p++) &#123;</span><br><span class="line">        <span class="keyword">u64_t</span> uticks;</span><br><span class="line">      <span class="comment">//如果当前进程标志不是used(代表没在parse_file中”备案“) 就continue 看下一个进程。</span></span><br><span class="line">        <span class="keyword">if</span>(!(proc2[p].p_flags &amp; USED))</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">      <span class="comment">//每次proc2数组都向前加一个proc单位</span></span><br><span class="line">        tick_procs[nprocs].p = proc2 + p;</span><br><span class="line">      <span class="comment">//更新实时的嘀嗒 嘀嗒=</span></span><br><span class="line">        tick_procs[nprocs].ticks = cputicks(&amp;proc1[p], &amp;proc2[p], cputimemode);</span><br><span class="line">  		total_ticks = total_ticks + cputicks(&amp;proc1[p], &amp;proc2[p], cputimemode);</span><br><span class="line"> 			<span class="comment">//判断是否为 systemtick 和 usertick</span></span><br><span class="line">        <span class="keyword">if</span>(!(proc2[p].p_flags &amp; IS_TASK)) &#123;<span class="comment">//首先排除改对象是一个任务</span></span><br><span class="line">            <span class="keyword">if</span>(proc2[p].p_flags &amp; IS_SYSTEM)</span><br><span class="line">              <span class="comment">//如果是系统进程，那么就加到 systemticks 上去</span></span><br><span class="line">                systemticks = systemticks + tick_procs[nprocs].ticks;</span><br><span class="line">          		<span class="comment">//否则就是用户进程，那么就加到 userticks 上去</span></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                userticks = userticks + tick_procs[nprocs].ticks;</span><br><span class="line">        &#125;</span><br><span class="line">				<span class="comment">//计数器自增1</span></span><br><span class="line">        nprocs++;</span><br><span class="line">    &#125;</span><br><span class="line">		<span class="comment">//如果所有的嘀嗒等于0，那么就直接返回</span></span><br><span class="line">    <span class="keyword">if</span> (total_ticks == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//打印user system和总占用情况</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"CPU states: %6.2f%% user, "</span>, <span class="number">100.0</span> * userticks / total_ticks);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%6.2f%% system"</span>, <span class="number">100.0</span> * systemticks / total_ticks);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%6.2f%% in total\n"</span>, <span class="number">100.0</span> * (systemticks+userticks) / total_ticks);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="cputicks"><a href="#cputicks" class="headerlink" title="cputicks"></a>cputicks</h6><p>这个函数计算每个进程的运行周期</p>
<p>滴答并不是简单的结构体中的滴答，因为在写文件的时候需要更新。需要通过当前进程来和该进程一起计算</p>
<p>endp</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">u64_t</span> <span class="title">cputicks</span><span class="params">(struct proc *p1, struct proc *p2, <span class="keyword">int</span> timemode)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">u64_t</span> t = <span class="number">0</span>;</span><br><span class="line">  	<span class="comment">//计算每个进程proc的滴答，通过proc和当前进程prev_proc做比较</span></span><br><span class="line">     <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; CPUTIMENAMES; i++) &#123;</span><br><span class="line">       	<span class="comment">//如果endpoint相等，则在循环中分别计算</span></span><br><span class="line">        <span class="keyword">if</span>(p1-&gt;p_endpoint == p2-&gt;p_endpoint)</span><br><span class="line">            t = t + p2-&gt;p_cpucycles[i] - p1-&gt;p_cpucycles[i];</span><br><span class="line"> 				<span class="keyword">else</span></span><br><span class="line">            t = t + p2-&gt;p_cpucycles[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> t;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="后台、重定向、管道"><a href="#后台、重定向、管道" class="headerlink" title="后台、重定向、管道"></a>后台、重定向、管道</h4><h5 id="查看是否有-gt-gt-gt-lt-amp-符号"><a href="#查看是否有-gt-gt-gt-lt-amp-符号" class="headerlink" title="查看是否有 | ,&gt;, &gt;&gt;, &lt; , &amp; 符号"></a>查看是否有 | ,&gt;, &gt;&gt;, &lt; , &amp; 符号</h5><p>首先我们要给不同的符号打上标签：</p>
<ul>
<li>&amp; 后台符号， way = 5</li>
<li>> 输出重定向 覆盖写 ，way = 1</li>
<li>&lt; 输入重定向，way=2</li>
<li>|  管道符号， way = 3</li>
<li>>> 追加写，way=4</li>
</ul>
<h5 id="预处理1-分类"><a href="#预处理1-分类" class="headerlink" title="预处理1-分类"></a>预处理1-分类</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">exeCommand</span><span class="params">(<span class="keyword">int</span> wordcount, <span class="keyword">char</span> (*wordmatrix)[<span class="number">256</span>])</span></span>&#123;</span><br><span class="line">  	<span class="comment">//...</span></span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; wordcount; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">strncmp</span>(<span class="keyword">word</span>[i], <span class="string">"&amp;"</span>, <span class="number">1</span>) == <span class="number">0</span>)&#123;</span><br><span class="line">            way=<span class="number">5</span>;</span><br><span class="line">            <span class="keyword">word</span>[wordcount - <span class="number">1</span>] = <span class="literal">NULL</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; <span class="keyword">word</span>[i] != <span class="literal">NULL</span>; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">strcmp</span>(<span class="keyword">word</span>[i], <span class="string">"&gt;"</span>) == <span class="number">0</span>)&#123;</span><br><span class="line">            way = <span class="number">1</span>;</span><br><span class="line">          <span class="comment">// 如果重定向符号后面没有单词了，说明重定向了个空气，那么我们将correct置0，表明格式错误</span></span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">word</span>[i + <span class="number">1</span>] == <span class="literal">NULL</span>)&#123;</span><br><span class="line">                correct=<span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">         <span class="keyword">if</span>(<span class="built_in">strcmp</span>(<span class="keyword">word</span>[i], <span class="string">"&gt;&gt;"</span>) == <span class="number">0</span>)&#123;</span><br><span class="line">            way = <span class="number">4</span>;</span><br><span class="line">          <span class="comment">// 如果重定向符号后面没有单词了，说明重定向了个空气，那么我们将correct置0，表明格式错误</span></span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">word</span>[i + <span class="number">1</span>] == <span class="literal">NULL</span>)&#123;</span><br><span class="line">                correct=<span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">strcmp</span>(<span class="keyword">word</span>[i], <span class="string">"&lt;"</span>) == <span class="number">0</span>)&#123;</span><br><span class="line">            way = <span class="number">2</span>;</span><br><span class="line">          	<span class="comment">// 如果第一个字符就是输入重定向，说明也重定向了个空气，置correct = 0</span></span><br><span class="line">            <span class="keyword">if</span>(i == <span class="number">0</span>)&#123;</span><br><span class="line">                correct=<span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">strcmp</span>(<span class="keyword">word</span>[i], <span class="string">"|"</span>) == <span class="number">0</span>)&#123;</span><br><span class="line">            way = <span class="number">3</span>;</span><br><span class="line">          <span class="comment">// 对于管道符号，前后必须都非空，否则就管道了个空气，置correct = 0 </span></span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">word</span>[i+<span class="number">1</span>] == <span class="literal">NULL</span>)&#123;</span><br><span class="line">                correct=<span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(i == <span class="number">0</span>)&#123;</span><br><span class="line">                correct=<span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//correct=0,说明命令格式不对</span></span><br><span class="line">    <span class="keyword">if</span>(correct==<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"wrong format\n"</span>);</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>格式错误时，例子如下：</p>
<p><img src="/2021/03/02/os%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2-shell%E7%9A%84%E5%AE%9E%E7%8E%B0/11.png"></p>
<h5 id="预处理2-进一步"><a href="#预处理2-进一步" class="headerlink" title="预处理2-进一步"></a>预处理2-进一步</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">exeCommand</span><span class="params">(<span class="keyword">int</span> wordcount, <span class="keyword">char</span> (*wordmatrix)[<span class="number">256</span>])</span></span>&#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">	<span class="keyword">if</span>(way == <span class="number">1</span>)&#123;</span><br><span class="line">        <span class="comment">//输出重定向，这里我们将file设置成 &gt;符号 后面一个单词。也就是我们的目的地(destination)</span></span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; <span class="keyword">word</span>[i] != <span class="literal">NULL</span>; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">strcmp</span>(<span class="keyword">word</span>[i], <span class="string">"&gt;"</span>) == <span class="number">0</span>)&#123;</span><br><span class="line">                file = <span class="keyword">word</span>[i+<span class="number">1</span>];</span><br><span class="line">                <span class="keyword">word</span>[i] = <span class="literal">NULL</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(way == <span class="number">2</span>)&#123;</span><br><span class="line">        <span class="comment">//输入重定向，同上，设置来源地(source)</span></span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; <span class="keyword">word</span>[i] != <span class="literal">NULL</span>; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">strcmp</span>(<span class="keyword">word</span>[i], <span class="string">"&lt;"</span>) == <span class="number">0</span>)&#123;</span><br><span class="line">                file = <span class="keyword">word</span>[i + <span class="number">1</span>];</span><br><span class="line">                <span class="keyword">word</span>[i] = <span class="literal">NULL</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(way == <span class="number">3</span>)&#123;</span><br><span class="line">        <span class="comment">//把管道符后面的部分存入wordnext中，管道后面的部分是一个可执行的shell命令</span></span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; <span class="keyword">word</span>[i] != <span class="literal">NULL</span>; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">strcmp</span>(<span class="keyword">word</span>[i], <span class="string">"|"</span>) == <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">word</span>[i] = <span class="literal">NULL</span>;</span><br><span class="line">                <span class="keyword">int</span> j;</span><br><span class="line">              <span class="comment">// 将管道符号后面的命令存放到 wordnext 数组中去</span></span><br><span class="line">                <span class="keyword">for</span>(j = i + <span class="number">1</span>; <span class="keyword">word</span>[j] != <span class="literal">NULL</span>; j++)&#123;</span><br><span class="line">                    wordnext[j-i<span class="number">-1</span>] = <span class="keyword">word</span>[j];</span><br><span class="line">                &#125;</span><br><span class="line">                wordnext[j-i<span class="number">-1</span>] = <span class="literal">NULL</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  	<span class="keyword">if</span>(way == <span class="number">4</span>)&#123;</span><br><span class="line">        <span class="comment">//输出重定向的追加写，操作方式和覆盖写一样</span></span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; <span class="keyword">word</span>[i] != <span class="literal">NULL</span>; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">strcmp</span>(<span class="keyword">word</span>[i], <span class="string">"&gt;&gt;"</span>) == <span class="number">0</span>)&#123;</span><br><span class="line">                file = <span class="keyword">word</span>[i+<span class="number">1</span>];</span><br><span class="line">                <span class="keyword">word</span>[i] = <span class="literal">NULL</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="switch-case"><a href="#switch-case" class="headerlink" title="switch case"></a>switch case</h5><p>这里我们直接使用了 <code>execvp()</code>来执行一些  <code>ls -a -l</code> 之类的命令</p>
<h6 id="execvp"><a href="#execvp" class="headerlink" title="execvp()"></a>execvp()</h6><p>定义函数：<code>int execvp(const char *file, char * const argv []);</code></p>
<p>函数说明：execvp()会从PATH 环境变量所指的目录中查找符合参数file 的文件名, 找到后便执行该文件, 然后将第二个参数argv 传给该欲执行的文件。</p>
<h6 id="open"><a href="#open" class="headerlink" title="open()"></a>open()</h6><p>此外我们还要学习一下 open函数的使用方法: open的第一个参数是要打开的文件路径名称；第二个参数是 flag，就是以何种方式打开文件；最后一个参数是 mode，也就是说文件被新建的话，我们要为其指定权限(8进制)</p>
<p><img src="/2021/03/02/os%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2-shell%E7%9A%84%E5%AE%9E%E7%8E%B0/12.png"></p>
<h6 id="dup2"><a href="#dup2" class="headerlink" title="dup2()"></a>dup2()</h6><p>dup2也是一个很有用的函数，定义如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dup2</span><span class="params">(<span class="keyword">int</span> oldfd, <span class="keyword">int</span> newfd)</span></span>;</span><br></pre></td></tr></table></figure>
<p>这个函数的功能就是讲原本要打印在屏幕上的一些信息，写入到指定的文件当中去。 文件描述符的 0 1 2 分别对应着标准输入、标准输出、标准错误。</p>
<p>所以当我 <code>dup2(fd, 1)</code> 实际上是在说我将本来要输出在terminal中的信息重定向输入到fd所指向的文件当中去，在重定向输出中非常有用； 同理 <code>dup2(fd,0)</code> 就代表着本来从terminal中输入的信息重定向到 fd文件当中读入，这对重定向输入非常有用。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line">    <span class="keyword">switch</span>(way)&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">            <span class="comment">//当 way=0 的时候，说明输入的命令中不含&gt; &lt; | &amp;,说明是一些 ls 之类的命令</span></span><br><span class="line">            <span class="keyword">if</span>(pid == <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(!(checkCommand(<span class="keyword">word</span>[<span class="number">0</span>])))&#123;</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">"%s : command not found\n"</span>, <span class="keyword">word</span>[<span class="number">0</span>]);</span><br><span class="line">                    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                execvp(<span class="keyword">word</span>[<span class="number">0</span>], <span class="keyword">word</span>);</span><br><span class="line">                <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            <span class="comment">//输入的命令中含有输出重定向符</span></span><br><span class="line">            <span class="keyword">if</span>(pid == <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>( !(checkCommand(<span class="keyword">word</span>[<span class="number">0</span>])) )&#123;</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">"%s : command not found\n"</span>, <span class="keyword">word</span>[<span class="number">0</span>]);</span><br><span class="line">                    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">                &#125;</span><br><span class="line">              <span class="comment">// 0644 代表文件权限时 rw-r--r--, 也就是用户可读可写</span></span><br><span class="line">              <span class="comment">/*这里的操作就是：以读写的方式打开文件;</span></span><br><span class="line"><span class="comment">              如果文件已经存在就删除原有的数据;如果文件不存在就创建一个新的文件*/</span></span><br><span class="line">                fd = <span class="built_in">open</span>(file, O_RDWR|O_CREAT|O_TRUNC, <span class="number">0644</span>);</span><br><span class="line">              <span class="comment">//打开后，我们利用dup2将输出的东西重定向到fd文件当中去</span></span><br><span class="line">                dup2(fd, <span class="number">1</span>);</span><br><span class="line">                execvp(<span class="keyword">word</span>[<span class="number">0</span>], <span class="keyword">word</span>);</span><br><span class="line">                <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">            <span class="comment">//输入的命令中含有输入重定向&lt;</span></span><br><span class="line">            <span class="keyword">if</span>(pid == <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>( !(checkCommand (<span class="keyword">word</span>[<span class="number">0</span>])) )&#123;</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">"%s : command not found\n"</span>, <span class="keyword">word</span>[<span class="number">0</span>]);</span><br><span class="line">                    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">                &#125;</span><br><span class="line">              <span class="comment">//用只读的方式打开文件</span></span><br><span class="line">                fd = <span class="built_in">open</span>(file, O_RDONLY);</span><br><span class="line">              <span class="comment">//重定向输入</span></span><br><span class="line">                dup2(fd, <span class="number">0</span>);</span><br><span class="line">                execvp(<span class="keyword">word</span>[<span class="number">0</span>], <span class="keyword">word</span>);</span><br><span class="line">                <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">            <span class="comment">//输入的命令中含有管道符|</span></span><br><span class="line">            <span class="keyword">if</span>(pid == <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">int</span> pid2;</span><br><span class="line">                <span class="keyword">int</span> status2;</span><br><span class="line">                <span class="keyword">int</span> fd[<span class="number">2</span>];<span class="comment">//创建一个文件索引数组，分别对应管道前后的两个文件</span></span><br><span class="line">								<span class="comment">//创建一个管道</span></span><br><span class="line">                <span class="keyword">if</span>(pipe(fd)&lt;<span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">"pipe error\n"</span>);</span><br><span class="line">                    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">                &#125;</span><br><span class="line">								<span class="comment">//需要创建另外一个子进程</span></span><br><span class="line">                <span class="keyword">if</span>( (pid2 = fork()) &lt; <span class="number">0</span> )&#123;</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">"fork2 error\n"</span>);</span><br><span class="line">                    <span class="keyword">return</span> ;</span><br><span class="line">                &#125;</span><br><span class="line">              <span class="comment">/*</span></span><br><span class="line"><span class="comment">              在另一个子进程中，我们将重定位输入改为管道的后面那个文件。</span></span><br><span class="line"><span class="comment">              然后我们执行管道前面那条指令，并将结果输入到后面那个文件当中去</span></span><br><span class="line"><span class="comment">              */</span></span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(pid2 == <span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>( !(checkCommand(<span class="keyword">word</span>[<span class="number">0</span>])) )&#123;</span><br><span class="line">                        <span class="built_in">printf</span>(<span class="string">"%s : command not found\n"</span>, <span class="keyword">word</span>[<span class="number">0</span>]);</span><br><span class="line">                        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    dup2(fd[<span class="number">1</span>], <span class="number">1</span>);</span><br><span class="line">                    execvp(<span class="keyword">word</span>[<span class="number">0</span>], <span class="keyword">word</span>);</span><br><span class="line">                  	<span class="comment">//不用管道之后要关闭管道文件</span></span><br><span class="line">              			<span class="built_in">close</span>(fd[<span class="number">1</span>]);</span><br><span class="line">                    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">                &#125;</span><br><span class="line">              <span class="comment">// 父进程需要等待子进程结束</span></span><br><span class="line">                <span class="keyword">if</span>(waitpid(pid2, &amp;status2, <span class="number">0</span>) == <span class="number">-1</span>)&#123;</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">"wait for child process error\n"</span>);</span><br><span class="line">                &#125;</span><br><span class="line">              <span class="comment">//查找管道后面的指令是否可执行</span></span><br><span class="line">                <span class="keyword">if</span>( !(checkCommand(wordnext[<span class="number">0</span>])) )&#123;</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">"%s : command not found\n"</span>, wordnext[<span class="number">0</span>]);</span><br><span class="line">                    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">                &#125;</span><br><span class="line">              <span class="comment">//若可执行， 则将管道后面的标准输入改成前面执行的结果。</span></span><br><span class="line">                dup2(fd[<span class="number">0</span>], <span class="number">0</span>);</span><br><span class="line">              <span class="comment">//然后执行管道后面的指令，并在前端输出结果。</span></span><br><span class="line">                execvp (wordnext[<span class="number">0</span>], wordnext);</span><br><span class="line">              <span class="comment">//不用管道之后要关闭管道文件，否则无法回到父进程中。</span></span><br><span class="line">              	<span class="built_in">close</span>(fd[<span class="number">0</span>]);</span><br><span class="line">                <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">         <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">             <span class="keyword">if</span>(pid == <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>( !(checkCommand(<span class="keyword">word</span>[<span class="number">0</span>])) )&#123;</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">"%s : command not found\n"</span>, <span class="keyword">word</span>[<span class="number">0</span>]);</span><br><span class="line">                    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">                &#125;</span><br><span class="line">               <span class="comment">//如果是追加写符号，我们只需要将 O_TRUNC改为O_APPEND 即可，其他保持不变</span></span><br><span class="line">                fd = <span class="built_in">open</span>(file, O_RDWR|O_CREAT|O_APPEND, <span class="number">0644</span>);</span><br><span class="line">                dup2(fd, <span class="number">1</span>);</span><br><span class="line">                execvp(<span class="keyword">word</span>[<span class="number">0</span>], <span class="keyword">word</span>);</span><br><span class="line">                <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">            signal(SIGCHLD,SIG_IGN);<span class="comment">//若命令中有&amp;，表示后台执行，父进程直接返回，不等待子进程结束</span></span><br><span class="line">            <span class="keyword">if</span>(pid==<span class="number">0</span>)&#123;</span><br><span class="line">	              <span class="built_in">printf</span>(<span class="string">"[process id: %d]\n"</span>,pid);</span><br><span class="line">              <span class="comment">// dev/null 相当于一个垃圾桶，我们将输入和输出都移动到这个"垃圾桶"当中去</span></span><br><span class="line">                <span class="keyword">int</span> trash = <span class="built_in">open</span>(<span class="string">"/dev/null"</span>,O_RDONLY);</span><br><span class="line">                dup2(trash,<span class="number">0</span>);</span><br><span class="line">                dup2(trash,<span class="number">1</span>);</span><br><span class="line">                <span class="keyword">if</span>( !(checkCommand(<span class="keyword">word</span>[<span class="number">0</span>])) )&#123;</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">"%s : command not found\n"</span>, <span class="keyword">word</span>[<span class="number">0</span>]);</span><br><span class="line">                    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">                &#125;</span><br><span class="line">              <span class="comment">//然后交给后台去执行该命令</span></span><br><span class="line">                execvp(<span class="keyword">word</span>[<span class="number">0</span>],<span class="keyword">word</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//父进程等待子进程结束</span></span><br><span class="line">    <span class="keyword">if</span>(waitpid(pid, &amp;status, <span class="number">0</span>) == <span class="number">-1</span>)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"wait for child process error\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="checkCommand函数"><a href="#checkCommand函数" class="headerlink" title="checkCommand函数"></a><code>checkCommand</code>函数</h5><p>这个函数的目的就是在 <code>./ ;/bin;/usr/bin</code> 这三个文件夹下查找可执行的命令文件。比如说在bin文件夹下有很多shell本来就有的命令：</p>
<p><img src="/2021/03/02/os%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2-shell%E7%9A%84%E5%AE%9E%E7%8E%B0/13.png"></p>
<p>这么多的可执行的命令文件，如 ls，cat,我们的目的就是判断我们输入的命令是否是其中之一，是的话返回1，否的话返回0</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">checkCommand</span><span class="params">(<span class="keyword">char</span> *command)</span></span>&#123;</span><br><span class="line">    DIR *dp;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">dirent</span> *<span class="title">dirp</span>;</span></span><br><span class="line">    <span class="keyword">char</span> *path[] = &#123;<span class="string">"./"</span>, <span class="string">"/bin"</span>, <span class="string">"/usr/bin"</span>, <span class="literal">NULL</span>&#125;;</span><br><span class="line">		<span class="comment">//如果我输入的命令是 ./可执行文件, 那么我们就要跳过 './' 这两个字符，然后查找可执行文件</span></span><br><span class="line">    <span class="keyword">if</span>( <span class="built_in">strncmp</span>(command, <span class="string">"./"</span>, <span class="number">2</span>) == <span class="number">0</span> )</span><br><span class="line">        command = command + <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(path[i] != <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>( (dp= opendir(path[i])) ==<span class="literal">NULL</span> )</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"can not open /bin \n"</span>);</span><br><span class="line">        <span class="keyword">while</span>( (dirp = readdir(dp)) != <span class="literal">NULL</span> )</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="comment">// 找到了就返回 1，然后交给  execvp() 函数去执行。</span></span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">strcmp</span>(dirp-&gt;d_name, command) == <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                closedir(dp);</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        closedir(dp);</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="代码重构"><a href="#代码重构" class="headerlink" title="代码重构"></a>代码重构</h3><p>将所有的函数、声明都放在一个文件中不易维护代码，找起来也比较麻烦。因此我们将 main.c 文件拆分成几个头文件：</p>
<p><img src="/2021/03/02/os%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2-shell%E7%9A%84%E5%AE%9E%E7%8E%B0/14.png"></p>
<p>我们将一些头文件引用、宏和函数定义放到 <code>main.h</code>头文件中，把mytop中要调用的函数放到<code>mytop.h</code> 头文件中，将检查命令函数 放到<code>checkcommand.h</code> 头文件。</p>
<p>最后main.c文件只留下一个while循环，比较简洁直观。</p>
<h3 id="测试结果"><a href="#测试结果" class="headerlink" title="测试结果"></a>测试结果</h3><ul>
<li><code>cd /your/path</code></li>
</ul>
<p><img src="/2021/03/02/os%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2-shell%E7%9A%84%E5%AE%9E%E7%8E%B0/15.png"></p>
<ul>
<li><code>ls -a -l &gt; result.txt</code>  + <code>vi result.txt</code></li>
</ul>
<p><img src="/2021/03/02/os%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2-shell%E7%9A%84%E5%AE%9E%E7%8E%B0/16.png"></p>
<ul>
<li><code>grep a &lt; result.txt</code></li>
</ul>
<p><img src="/2021/03/02/os%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2-shell%E7%9A%84%E5%AE%9E%E7%8E%B0/17.png"></p>
<ul>
<li><code>ls -a -l | grep a</code></li>
</ul>
<p><img src="/2021/03/02/os%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2-shell%E7%9A%84%E5%AE%9E%E7%8E%B0/18.png"></p>
<ul>
<li><code>vi result.txt &amp;</code></li>
</ul>
<p><img src="/2021/03/02/os%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2-shell%E7%9A%84%E5%AE%9E%E7%8E%B0/19.png"></p>
<p>这边，对 vi 指令进行后台操作，会报错。这是因为 vim 的标准输入和输出必须在一个终端当中。将其丢到后台去执行是不对的。</p>
<ul>
<li><code>mytop</code></li>
</ul>
<p><img src="/2021/03/02/os%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2-shell%E7%9A%84%E5%AE%9E%E7%8E%B0/20.png"></p>
<ul>
<li><code>history n</code></li>
</ul>
<p><img src="/2021/03/02/os%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2-shell%E7%9A%84%E5%AE%9E%E7%8E%B0/21.png"></p>
<ul>
<li><code>exit</code></li>
</ul>
<p><img src="/2021/03/02/os%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2-shell%E7%9A%84%E5%AE%9E%E7%8E%B0/22.png"></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>这个project 的工程量很大。而且实现起来是比较困难的。因此，如何将整个project拆分成一个一个小任务就显得尤其重要。我先实现了 cd、mytop、history n 这类shell内置命令。然后再实现了 | ,\&amp; ,> ，>> 等 Program命令。</p>
<p>此外，如何调试文件也显得十分重要。为此我尝试了很多工作流，最后选择了 mac中的Terminus、Transmit软件 远程连接 windows上开的Minix虚拟机，并通过clion修改、编写代码。这样虽然比在windows上直接连接繁琐一点。但是在mac下各种安装不了虚拟机的情况下，这已经不失为一种高效的解决方法了。</p>
<h3 id="不足"><a href="#不足" class="headerlink" title="不足"></a>不足</h3><p>没有实现 mytop 的实时更新</p>
<p>没有实现 多重管道</p>
<p>在未来需要继续完善。</p>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2021/03/02/os%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/%5Bobject%20Object%5D">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/03/02/os%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" itemprop="url">os实验报告1-环境搭建</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2021-03-02T21:08:24+08:00">
                2021-03-02
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2021-05-03T14:48:54+08:00">
                2021-05-03
              </time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="MINIX系统的安装和环境配置"><a href="#MINIX系统的安装和环境配置" class="headerlink" title="MINIX系统的安装和环境配置"></a>MINIX系统的安装和环境配置</h1><h2 id="目的"><a href="#目的" class="headerlink" title="目的"></a>目的</h2><p>为了配置操作系统实验环境</p>
<h2 id="使用环境"><a href="#使用环境" class="headerlink" title="使用环境"></a>使用环境</h2><p>物理机： Windows10</p>
<p>虚拟机软件： Oracle VirtualBox</p>
<p>虚拟机： Minix 3.3</p>
<h2 id="实验过程"><a href="#实验过程" class="headerlink" title="实验过程"></a>实验过程</h2><h3 id="新建虚拟机"><a href="#新建虚拟机" class="headerlink" title="新建虚拟机"></a>新建虚拟机</h3><p>首先我们在VirtualBox中创建一个虚拟机</p>
<p><img src="/2021/03/02/os%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/1.png" style="zoom:80%;"></p>
<p>内存可以选择 512MB，磁盘选择动态分配，共10GB</p>
<p>我们在内存中将下载的Minix镜像文件添加到路劲，并点击启动。</p>
<p><img src="/2021/03/02/os%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/3.png" style="zoom:80%;"></p>
<p>在login处使用  root 登录，并输入 setup 开始安装。然后我们只需要一直按enter或者输入yes就可以完成初始安装了。</p>
<p>接下来，我们使用 reboot 进行重启，并将原来的Minix镜像文件删除以防止再次安装。再次重启之后，我们就可以输入一些简单的指令，如 ls，ps来测试是否安装成功。</p>
<p><img src="/2021/03/02/os%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/4.png" style="zoom:80%;"></p>
<h3 id="虚拟机环境配置"><a href="#虚拟机环境配置" class="headerlink" title="虚拟机环境配置"></a>虚拟机环境配置</h3><p>但是现在我们的虚拟机的功能显然是很少的，因为我们没有安装任何文件。因此，我们需要安装一些开发环境。</p>
<p><code>pkgin update</code>  可以在线更新仓库元数据。其中  pkgin是 Minix中下载软件的指令</p>
<p><code>pkgin install git-base</code> 在线安装git版本控制器 </p>
<p><code>pkgin install openssh</code> 在线安装SSH远程访问</p>
<p> <code>pkgin install vim</code> 在线安装VIM编辑器</p>
<p><code>pkgin install clang</code> 在线安装 clang 编译器 ， clang和gcc一样，也是一个C语言的编译器</p>
<p>GCC特性：除支持C/C++/ Objective-C/Objective-C++语言外，还是支持Java/Ada/Fortran/Go等；当前的Clang的C++支持落后于GCC；支持更多平台；更流行，广泛使用，支持完备。</p>
<p>Clang特性：编译速度快；内存占用小；兼容GCC；设计清晰简单、容易理解，易于扩展增强；基于库的模块化设计，易于IDE集成；出错提示更友好。</p>
<p><code>pkgin install binutils</code> 在线安装运行链接库，里面是一些开发、调试工具。</p>
<p>在下载开发环境的时候，我发现连接学校的无线网的速度远远高于寝室无线网的速度，具体原因我也还没搞清楚。 </p>
<h3 id="连接SSH"><a href="#连接SSH" class="headerlink" title="连接SSH"></a>连接SSH</h3><p>在关闭虚拟机后，我们在设置中将网络改成桥接网络，如下图：</p>
<p><img src="/2021/03/02/os%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/5.png" style="zoom:80%;"></p>
<p>然后我们在虚拟中输入 <code>passwd</code> 来设置密码，并通过 ifconfig 来查询当前虚拟机的ip地址。</p>
<p><img src="/2021/03/02/os%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/6.png"></p>
<p>然后，我们就可以在物理机上通过cmd或者其他软件用ssh来连接我们的虚拟机了。比如我用的是terminus这款软件</p>
<p><img src="/2021/03/02/os%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/7.png" style="zoom:80%;"></p>
<p>在进行简单的配置之后，就完成了</p>
<p><img src="/2021/03/02/os%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/8.png" style="zoom:80%;"></p>
<h3 id="编译简单的文件"><a href="#编译简单的文件" class="headerlink" title="编译简单的文件"></a>编译简单的文件</h3><p>这里我写了一个简单的 hello world ，并通过 clang 对其进行编译。运行结果如下：</p>
<p><img src="/2021/03/02/os%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/9.png" style="zoom:80%;"></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>虽然下载、安装虚拟机、配置虚拟机环境的思路很清晰，难度也不大。但是我还是遇到了一些困难。比如说clang软件在寝室无线网环境下下载速度非常慢。以及在学校网络下，选择桥接网络模式会导致虚拟机无法启动等。 最后我通过多次重装Minix系统解决了这个问题。</p>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/%5Bobject%20Object%5D">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/" itemprop="url">HTMLandCSS基础3-印刷与图片</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2021-02-03T15:43:44+08:00">
                2021-02-03
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2021-08-21T23:00:52+08:00">
                2021-08-21
              </time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="文字与图片"><a href="#文字与图片" class="headerlink" title="文字与图片"></a>文字与图片</h1><p>$sss^y$</p>
<h2 id="Typography"><a href="#Typography" class="headerlink" title="Typography"></a>Typography</h2><h3 id="Styling-Fonts"><a href="#Styling-Fonts" class="headerlink" title="Styling Fonts"></a>Styling Fonts</h3><p>网页上的字体大体可以分成三类：<code>Serif</code>, <code>Sans-serif</code>, <code>Monospace</code></p>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/1.png" style="zoom:80%;"></p>
<h4 id="Serif-衬线字体族"><a href="#Serif-衬线字体族" class="headerlink" title="Serif 衬线字体族"></a>Serif 衬线字体族</h4><ul>
<li>具有修饰过的笔画，向外展开的或者尖细的末端，或者是带有实际衬线的末端</li>
<li>一笔一划末端（两头）都带点变化装饰，比如宋体笔画末端有毛笔字的感觉</li>
<li>文字末端有差异，在小字号下仍然容易辨认。但在大字号下笔画装饰部分可能会显得模糊或带有锯齿</li>
</ul>
<h4 id="Sans-serif-无衬线字体族"><a href="#Sans-serif-无衬线字体族" class="headerlink" title="Sans-serif 无衬线字体族"></a>Sans-serif 无衬线字体族</h4><ul>
<li>具有笔画清晰的末端–带有一点或者没有向外展开的，交错笔画，或者其它装饰</li>
<li>与“衬线字体”相比，如果字号比较小，看起来就会有些难以分辨，尤其段落阅读时容易串行</li>
</ul>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/1.jpg" style="zoom:80%;"></p>
<blockquote>
<p>左侧是 Sans-serif,    右侧是serif</p>
</blockquote>
<h4 id="monospace-等宽字体族"><a href="#monospace-等宽字体族" class="headerlink" title="monospace 等宽字体族"></a>monospace 等宽字体族</h4><ul>
<li>每个字形都等宽，主要用于英文，中文方块字本来就等宽</li>
</ul>
<h4 id="font-family"><a href="#font-family" class="headerlink" title="font-family"></a>font-family</h4><p>我们可以通过设置 font-family来设置段落的字体。比如：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">font-family</span>: Arial, Helvetica, sans-serif;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: Georgia, <span class="string">"Times New Roman"</span>, Times, serif;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/2.png" style="zoom:80%;"></p>
<p>这里我只设置了 body的字体，<code>&lt;p&gt;</code>元素和 <code>&lt;a&gt;</code>元素都会继承其父元素也就是 body 中的字体。 然后我又特别定义了 <code>h1</code> 的字体。</p>
<h4 id="font-weight-font-style"><a href="#font-weight-font-style" class="headerlink" title="font-weight font-style"></a>font-weight font-style</h4><p>这个属性是设置字体的粗细的，可以选100-900，必须以百为单位。 默认为100也就如同第一张图。最高位900，如下图：</p>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/3.png" style="zoom:80%;"></p>
<p>除了数字之外，还可以选 <code>bold</code>(大概是700), <code>bolder</code> ,<code>lighter</code> ,<code>normal</code>(大概是400)</p>
<p><code>font-style</code>属性可选 italic (也就是斜体) 或者normal</p>
<p><code>font-size</code>属性是字体的大小，可以选绝对单位或者是自动单位</p>
<p><code>color</code>属性设置字体的颜色</p>
<h3 id="Embedding-Web-Fonts"><a href="#Embedding-Web-Fonts" class="headerlink" title="Embedding Web Fonts"></a>Embedding Web Fonts</h3><p>我们可以从这些网站上下载字体，有些字体是免费的，有些字体是收费的</p>
<p><a href="https://www.fontsquirrel.com/" target="_blank" rel="noopener">https://www.fontsquirrel.com/</a></p>
<p><a href="https://www.fonts.com/" target="_blank" rel="noopener">https://www.fonts.com/</a></p>
<p><a href="http://myfonts.com/" target="_blank" rel="noopener">http://myfonts.com/</a></p>
<p>下载的字体文件有好几种格式： TTF OTF EOT WOFF WOFF2.0 。在网页上使用的时候，我们主要使用WOFF和WOFF2.0这两种格式。</p>
<p>我们下载一个免费的字体Open Sans来作为例子，下载的格式是tff。我们可以到</p>
<p><a href="https://www.fontke.com/tool/convfont/" target="_blank" rel="noopener">https://www.fontke.com/tool/convfont/</a> 这里将其转换为 WOFF/WOFF2格式。接下来我们要将这些字体应用于我们的网页。我们用下面这套模板来注册字体。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@font-face</span>&#123;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">"opensans"</span>;</span><br><span class="line">  <span class="attribute">src</span>: 	<span class="built_in">url</span>(<span class="string">"fonts/open-sans/OpenSans-Bold.woff2"</span>) <span class="built_in">format</span>(<span class="string">"woff2"</span>)</span><br><span class="line">  		<span class="built_in">url</span>(<span class="string">"fonts/open-sans/OpenSans-Bold.woff"</span>) <span class="built_in">format</span>(<span class="string">"woff"</span>)<span class="comment">/*url中放引用地址*/</span></span><br><span class="line">  font-weight: bold;</span><br><span class="line">  <span class="attribute">font-style</span>: normal;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在使用的时候,我们需要在字体前面加上family name即可</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">font-family</span>:<span class="string">"opensans"</span>, Arial, Helvetica, sans-serif;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/4.png" style="zoom:80%;"></p>
<h3 id="Flash-of-Unstyled-Text"><a href="#Flash-of-Unstyled-Text" class="headerlink" title="Flash of Unstyled Text"></a>Flash of Unstyled Text</h3><p>当我们使用自己下载的字体的时候，如果浏览器的渲染速度非常慢，它可能先渲染出原来的字体，然后再渲染我们下载来的字体。这叫做 <code>Flash of Unstyled Text</code>  这对用户的体验不是很友好。</p>
<p>为了解决这个问题，我们可以设置 <code>font-display</code>属性， 默认情况下这个属性为被设置为auto，chrome的渲染模式就是先渲染一个备用字体，然后再渲染我们定制的字体。但是不同浏览器的策略也是不同的。</p>
<p>我们可以将其设置为fallback，也就是说，当经过很长时间我们的定制字体还没有被下载好的话，那么就可以使用备用字体。以免在阅读途中遭遇切换字体的烦恼。</p>
<p>如果我们将 <code>font-display</code>设置成block的话，那么在我们的定制字体没有被下载好之前，文字是没有办法显现的。但这个操作十分危险，如果字体未下载成功，那么我们将看不见这些文字。</p>
<p>最后一个 <code>font-display</code>的值未 <code>optional</code>，这是一个较好的选择。当定制的字体还没有被下载好的时候，浏览器一开始会使用备用字体，并将其保存在浏览器的缓存当中。 当我们打开子网页的时候，浏览器就会从缓存中取出字体并使用。这能让用户在未察觉的时候切换字体。</p>
<h3 id="Font-Services"><a href="#Font-Services" class="headerlink" title="Font Services"></a>Font Services</h3><p>很多字体的使用权限非常贵。因此我们可以使用一些字体库，我们只需要按月订阅就能使用很多字体。</p>
<p><a href="https://fonts.google.com/" target="_blank" rel="noopener">https://fonts.google.com/</a></p>
<p><a href="https://fonts.adobe.com/" target="_blank" rel="noopener">https://fonts.adobe.com/</a></p>
<p><a href="http://fontdeck.com/" target="_blank" rel="noopener">http://fontdeck.com/</a></p>
<p>我们以google fonts为例，讲一下怎么使用 谷歌的字体服务</p>
<p>在我们选择好字体之后，谷歌提供了 link和 @import两种方法来将字体导入到网页当中。</p>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/5.png" style="zoom:80%;"></p>
<p>我们复制其提供的链接，然后在html的header中插入。链接一共有两个 <code>&lt;link&gt;</code>元素，第一个是告诉浏览器，我们的网页存在一个与<code>https://fonts.gstatic.com</code>的链接，目的是让我们尽快从字体服务网站上下载字体。</p>
<p>第二个网站是一张 stylesheet的链接。stylesheet是由谷歌生成的，里面是各种 <code>@font-face</code> 我们只管引用即可.</p>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"preconnect"</span> <span class="attr">href</span>=<span class="string">"https://fonts.gstatic.com"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&amp;family=Roboto:wght@700&amp;display=swap"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>同样的，我们只要在font-family后面写上”Open Sans” ，就能使用这个字体了</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">"Open Sans"</span>, Arial, Helvetica, sans-serif;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">"Roboto"</span>, Arial, Helvetica, sans-serif;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="System-Font-Stack"><a href="#System-Font-Stack" class="headerlink" title="System Font Stack"></a>System Font Stack</h3><p>有了这个栈，我们就能告诉浏览器对用户的电脑使用操作系统中的默认字体</p>
<p>有了这个栈有几点好处：</p>
<ol>
<li>Can boost performance，因为电脑没必要去网上下载字体了</li>
<li>避免了Flash of unstyled text</li>
<li>Native Look</li>
</ol>
<p>总之，它能带给用户更好的体验。不过不同系统的 字体栈是不一样的。如果我们要强行定义网页系统的字体栈，我们可以在<code>font-family</code>中打一个 <code>-</code>  </p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">font-family</span>: -apple-system, BlinkMacSystemFont, <span class="string">"Segoe UI"</span>, Roboto, Oxygen,</span><br><span class="line">    Ubuntu, Cantarell, <span class="string">"Open Sans"</span>, <span class="string">"Helvetica Neue"</span>, sans-serif;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Sizing-Fonts"><a href="#Sizing-Fonts" class="headerlink" title="Sizing Fonts"></a>Sizing Fonts</h3><p>现在我们再来谈谈 字体的大小。一般我们使用px也就是 pixel来定义字体大小。但是在不同分辨率不同机器上，对pixel的大小的定义也是不同的。如果我们在Windows机器上定义字体为20px，那在mac电脑上看起来会更小一点</p>
<p>所以我们可以使用 相对单位。使用 rem 作为单位会更好一点。也方便我们做  media queiries:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span>&#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">62.5%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">font-family</span>: -apple-system, BlinkMacSystemFont, <span class="string">"Segoe UI"</span>, Roboto, Oxygen,</span><br><span class="line">    Ubuntu, Cantarell, <span class="string">"Open Sans"</span>, <span class="string">"Helvetica Neue"</span>, sans-serif;</span><br><span class="line">  </span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.5rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: Georgia, <span class="string">'Times New Roman'</span>, Times, serif;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">2rem</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width:</span> <span class="number">768px</span>) &#123;</span><br><span class="line">  <span class="selector-tag">html</span>&#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">100%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当我们窗口宽度小于 768px的时候， body元素采用1.5倍的当前html字体的大小。也就是 1.5X10px =  15px；当窗口宽度大于768px的时候，只需要把 html字体放大到100% 即可，这时候，body元素中的字体大小就是 1.5X16px = 24px</p>
<p>对于不同的heading应该取多少 rem，我们可以上这个网站查询：<a href="https://type-scale.com/" target="_blank" rel="noopener">https://type-scale.com/</a></p>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/6.png" style="zoom:80%;"></p>
<h3 id="Vertical-Fonts"><a href="#Vertical-Fonts" class="headerlink" title="Vertical Fonts"></a>Vertical Fonts</h3><p>我们现在有两段文字，我希望 <code>&lt;h1&gt;</code>元素的上边距长一些，离<code>&lt;p&gt;</code>元素近一些，怎么实现？</p>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/7.png" style="zoom:80%;"></p>
<p>我们可以使用 <code>margin</code>这个属性</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">3rem</span> <span class="number">0</span> <span class="number">1rem</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>第四个位置不用写，因为会自动认为和第二个值一样。效果如下：</p>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/8.png" style="zoom:80%;"></p>
<p>此外，还可以设置<code>line-height</code> 属性来设置行距。 但是要注意，如果同时设置 <code>font-size</code>和 <code>line-height</code> 的话，要注意 <code>font-size</code>不能设置的比 <code>line-height</code> 还要大，因为这样行和行之间就挤在一起了，非常不美观。为了解决这个问题我们可以这样写：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">2rem</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1.5</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>去掉 <code>line-height</code> 的单位，他就表示当前字体的倍数，因此不管字体设置为多大，行距始终是1.5倍的字体大小。</p>
<h3 id="Horizontal-Spacing"><a href="#Horizontal-Spacing" class="headerlink" title="Horizontal Spacing"></a>Horizontal Spacing</h3><h4 id="letter-spacing"><a href="#letter-spacing" class="headerlink" title="letter-spacing"></a>letter-spacing</h4><p>这个属性是设置字母与字母之间的距离，比如将其设置为 1rem会发生这样的结果：</p>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/9.png" style="zoom:80%;"></p>
<p>因此使用px而不是rem才是正确的选择，根据字体的不同我们可以对其进行调节。</p>
<h4 id="word-spacing"><a href="#word-spacing" class="headerlink" title="word-spacing"></a>word-spacing</h4><p>为了阅读方便，每一行所容纳的数字大概在50-70左右。 我们可以通过设置 <code>width</code>函数，用 <code>ch</code>作为单位，ch就是一行中可以写几个0。然后根据这个自动计算 单词之间的距离。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">50ch</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Formatting-Text"><a href="#Formatting-Text" class="headerlink" title="Formatting Text"></a>Formatting Text</h3><h4 id="text-align"><a href="#text-align" class="headerlink" title="text-align"></a>text-align</h4><p>这个属性规定元素中的文本的<strong>水平</strong>对齐方式。</p>
<ul>
<li>left, right,center : 把文本排列到左边(默认)/右边/中间</li>
<li>justify： 可以使文本的两端都对齐。但是这样就会导致每一行中词与词之间的间距是不同的。</li>
<li>inherit：从父元素继承 text-align的属性值</li>
</ul>
<h4 id="text-indent"><a href="#text-indent" class="headerlink" title="text-indent"></a>text-indent</h4><p>这个属性规定文本块中首行文本的缩进。常用于建立一个“标签页”效果。允许指定负值，这会产生一种“悬挂缩进”的效果，比如说</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">text-indent</span>: <span class="number">1rem</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/10.png" style="zoom:80%;"></p>
<h4 id="text-decoration"><a href="#text-decoration" class="headerlink" title="text-decoration"></a>text-decoration</h4><p>顾名思义，是给文本加装饰的</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">值</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">none</td>
<td style="text-align:left">默认。定义标准的文本。</td>
</tr>
<tr>
<td style="text-align:left">underline</td>
<td style="text-align:left">定义文本下的一条线。</td>
</tr>
<tr>
<td style="text-align:left">overline</td>
<td style="text-align:left">定义文本上的一条线。</td>
</tr>
<tr>
<td style="text-align:left">line-through</td>
<td style="text-align:left">定义穿过文本下的一条线。</td>
</tr>
<tr>
<td style="text-align:left">blink</td>
<td style="text-align:left">定义闪烁的文本。</td>
</tr>
<tr>
<td style="text-align:left">inherit</td>
<td style="text-align:left">规定应该从父元素继承 text-decoration 属性的值。</td>
</tr>
</tbody>
</table>
</div>
<h4 id="text-transform"><a href="#text-transform" class="headerlink" title="text-transform"></a>text-transform</h4><p>这个属性可以调整元素中文本的大小写。如果将值设置为Capitalize，那么每个单词的第一个字母都将是大写的。</p>
<h4 id="white-space"><a href="#white-space" class="headerlink" title="white-space"></a>white-space</h4><p>规定段落中的文本不进行换行</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">值</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">normal</td>
<td style="text-align:left">默认。空白会被浏览器忽略。</td>
</tr>
<tr>
<td style="text-align:left">pre</td>
<td style="text-align:left">空白会被浏览器保留。其行为方式类似 HTML 中的<code>&lt;pre&gt;</code>标签。</td>
</tr>
<tr>
<td style="text-align:left">nowrap</td>
<td style="text-align:left">文本不会换行，文本会在在同一行上继续，直到遇到 <code>&lt;br&gt;</code> 标签为止。</td>
</tr>
<tr>
<td style="text-align:left">pre-wrap</td>
<td style="text-align:left">保留空白符序列，但是正常地进行换行。</td>
</tr>
<tr>
<td style="text-align:left">pre-line</td>
<td style="text-align:left">合并空白符序列，但是保留换行符。</td>
</tr>
<tr>
<td style="text-align:left">inherit</td>
<td style="text-align:left">规定应该从父元素继承 white-space 属性的值</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50ch</span>;</span><br><span class="line">  <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">3px</span> solid gold;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/11.png" style="zoom:80%;"></p>
<h4 id="column"><a href="#column" class="headerlink" title="column-*"></a>column-*</h4><p>如果我们要实现分栏，可以这样写：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50ch</span>;</span><br><span class="line">  <span class="attribute">column-count</span>: <span class="number">2</span>;</span><br><span class="line">  <span class="attribute">column-gap</span>: <span class="number">1rem</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/12.png" style="zoom:80%;"></p>
<p>如果我们愿意，还可以在栏和栏之间加上分割线：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">column-rule</span>: 3<span class="selector-tag">px</span> <span class="selector-tag">dotted</span> <span class="selector-id">#999</span></span><br></pre></td></tr></table></figure>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/13.png" style="zoom:80%;"></p>
<h4 id="direction"><a href="#direction" class="headerlink" title="direction"></a>direction</h4><p>如果把这个元素设置为 rtl，那么文字就是这样的：比较符合阿拉伯人的书写习惯</p>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/14.png" style="zoom:80%;"></p>
<h3 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h3><p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/15.png"></p>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/16.png"></p>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/17.png"></p>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/18.png"></p>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/19.png"></p>
<h3 id="Exercise"><a href="#Exercise" class="headerlink" title="Exercise"></a>Exercise</h3><p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/20.png"></p>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/21.png"></p>
<h1 id="Images"><a href="#Images" class="headerlink" title="Images"></a>Images</h1><h3 id="Image-Types-and-Formats"><a href="#Image-Types-and-Formats" class="headerlink" title="Image Types and Formats"></a>Image Types and Formats</h3><p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/22.png"></p>
<p>transparency是指照片是否支持透明背景。 jpeg格式的照片是不支持透明背景的，gif只支持256种颜色。</p>
<h3 id="Content-Images"><a href="#Content-Images" class="headerlink" title="Content Images"></a>Content Images</h3><p>我们可以在html语言中插入图片。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/meal.jpg"</span> <span class="attr">alt</span>=<span class="string">"A bowl of salmon and curry"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>src就是图片的路径，alt 是当下载图片失败的时候，我们看到的替代图片的文字。</p>
<p>当我们想要插入的图片并不需要描述时，比如一个箭头之类的装饰性图片，我们可以把alt置为空字符串，但是不要删去alt，因为这样浏览器就会将alt默认设置为这张图片的名字。</p>
<p>我们可以设置width属性来调整图片的大小，但是放得太大会导致画面失真。</p>
<h3 id="Background-Images"><a href="#Background-Images" class="headerlink" title="Background Images"></a>Background Images</h3><p>现在我们来说说背景图。我们在css中可以设置背景图。</p>
<p>首先是background属性，这个属性既可以写颜色，又可以将图片设置为背景，我们只需要将url写入即可。</p>
<p>如果不做任何修改，那么背景图就会在浏览器窗口平铺，也就是不断重复排列。因此如果我们不希望重复排列，我们可以将<code>background-repeat</code>属性设置为no-repeat.</p>
<p>接下来，我们可以通过设置<code>background-position</code> 属性来调整图片在窗口中的位置。并通过 <code>background-size</code> 来调整背景图片的大小。</p>
<p>比如这样编写css: </p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">"../images/bg-paper.jpg"</span>);</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">100%</span> <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/23.png"></p>
<p>不过，我们可以直接使用 cover值，效果和写两个100% 是一样的</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">"../images/bg-paper.jpg"</span>);</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">  <span class="attribute">background-size</span>: cover;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>现在，我们用金门大桥作为背景，然后写一个<code>h1</code></p>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/24.png"></p>
<p>现在我将height改成300vh，我们发现背景会随着滚轮一块滚动，而且图片也随之扩大了3倍。</p>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/25.png"></p>
<p>为了固定住背景图，只让内容滚动，我们可以使用<code>background-attachment</code> ，将其设置为fixed。</p>
<p>效果如下：</p>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/0.gif"></p>
<h3 id="CSS-Sprites"><a href="#CSS-Sprites" class="headerlink" title="CSS Sprites"></a>CSS Sprites</h3><p>我们可以在 <a href="http://flaticon.com/" target="_blank" rel="noopener">http://flaticon.com/</a> 网站上下载图标</p>
<p>比如:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">  &lt;img src="images/dishes.png" alt=""&gt;</span><br><span class="line">  &lt;img src="images/landing.png" alt=""&gt;</span><br><span class="line">  &lt;img src="images/rocketship.png" alt=""&gt;</span><br><span class="line">  &lt;img src="images/saturn.png" alt=""&gt;</span><br><span class="line">  &lt;img src="images/ufo.png" alt=""&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/26.png"></p>
<p>但是这样一来，浏览器加载一次就需要加载五张图片。能不能通过一种方法将五张图合并起来，但是又能在不同的地方使用单个标签，这样就使得浏览器只请求一次即可。</p>
<p>我们可以用 CSS Sprites 工具： <a href="http://cssspritestool.com/" target="_blank" rel="noopener">http://cssspritestool.com/</a></p>
<p>只需要将图片拖入，然后进行简单的设置。就可以得到一张包含五个 图标的图了。</p>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/27.png"></p>
<p>我们还得到一个自动生成的css文件，教我们如何在网页中引用这些图标</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.bg-rocketship</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="attribute">background</span>:<span class="built_in">url</span>(<span class="string">'css-sprite-combined.2.png'</span>) <span class="number">0px</span> -<span class="number">0px</span>;</span><br><span class="line"><span class="attribute">width</span>:<span class="number">100px</span>;<span class="attribute">height</span>:<span class="number">100px</span>;</span><br><span class="line"><span class="attribute">display</span>:inline-block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.bg-saturn</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="attribute">background</span>:<span class="built_in">url</span>(<span class="string">'css-sprite-combined.2.png'</span>) -<span class="number">100px</span> -<span class="number">0px</span>;</span><br><span class="line"><span class="attribute">width</span>:<span class="number">100px</span>;<span class="attribute">height</span>:<span class="number">100px</span>;</span><br><span class="line"><span class="attribute">display</span>:inline-block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.bg-ufo</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="attribute">background</span>:<span class="built_in">url</span>(<span class="string">'css-sprite-combined.2.png'</span>) -<span class="number">200px</span> -<span class="number">0px</span>;</span><br><span class="line"><span class="attribute">width</span>:<span class="number">100px</span>;<span class="attribute">height</span>:<span class="number">100px</span>;</span><br><span class="line"><span class="attribute">display</span>:inline-block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.bg-dishes</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="attribute">background</span>:<span class="built_in">url</span>(<span class="string">'css-sprite-combined.2.png'</span>) -<span class="number">300px</span> -<span class="number">0px</span>;</span><br><span class="line"><span class="attribute">width</span>:<span class="number">100px</span>;<span class="attribute">height</span>:<span class="number">100px</span>;</span><br><span class="line"><span class="attribute">display</span>:inline-block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.bg-landing</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="attribute">background</span>:<span class="built_in">url</span>(<span class="string">'css-sprite-combined.2.png'</span>) -<span class="number">400px</span> -<span class="number">0px</span>;</span><br><span class="line"><span class="attribute">width</span>:<span class="number">100px</span>;<span class="attribute">height</span>:<span class="number">100px</span>;</span><br><span class="line"><span class="attribute">display</span>:inline-block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们只需要修改一下相对路径，然后将图片的class设置成图标名称，就能使用单个图标了，实际上，css做的是一个切割的动作。</p>
<p>但是这样做也有缺点。</p>
<ul>
<li>文件可能会很大</li>
<li>这样操作，不是很灵活，万一有新的图标加入会比较麻烦</li>
</ul>
<h3 id="Data-URI"><a href="#Data-URI" class="headerlink" title="Data URI"></a>Data URI</h3><p>Data URI 是另一种减少HTTP请求的优化技巧。使用这种方法，我们可以将图片直接嵌入到一个HTML文件中去。</p>
<p>我们可以借助 <a href="https://www.cssportal.com/image-to-data/" target="_blank" rel="noopener">https://www.cssportal.com/image-to-data/</a> 网站来实现。</p>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/28.png"></p>
<p>当我们拖入图片后，就可以生成Data URI，在src中写入后，就能显示图片了。利用这种方法，HTTP并没有发出request请求。</p>
<p>但是，Data URI 也有问题</p>
<ul>
<li>嵌入式的代码所占的空间比之前的图片大小还要大</li>
<li>增加了HTML文件的复杂度</li>
<li>在移动端访问较慢</li>
</ul>
<h3 id="Clipping"><a href="#Clipping" class="headerlink" title="Clipping"></a>Clipping</h3><p>使用CSS，我们可以轻松将图片裁剪。</p>
<p>我们在这个网站上就能定制裁剪后的图片了。<a href="https://bennettfeely.com/clippy/" target="_blank" rel="noopener">https://bennettfeely.com/clippy/</a></p>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/29.png"></p>
<p>只要将生成的CSS代码复制粘贴就能用了</p>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/30.png"></p>
<h3 id="Filters"><a href="#Filters" class="headerlink" title="Filters"></a>Filters</h3><p>在css中，我们可以对图片使用很多种滤镜。</p>
<ul>
<li>灰度滤镜 <code>filter: grayscale();</code> 括号中可以使用百分号表示灰色的程度，默认为100%</li>
</ul>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/31.png" style="zoom:67%;"></p>
<ul>
<li>模糊效果 <code>filter: blur(3px);</code> 同样在括号中使用px来表示模糊的程度。</li>
</ul>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/32.png" style="zoom:67%;"></p>
<p>此外如果我们这样编写css，那么当鼠标移动到图片上的时候图片就会变灰变模糊</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.meal</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">filter</span>: <span class="built_in">blur</span>(<span class="number">3px</span>) <span class="built_in">grayscale</span>(<span class="number">70%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/1.gif"></p>
<p>我们可以在 <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/filter" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/CSS/filter</a> 上找到更多的滤镜函数。</p>
<h3 id="Supporting-High-density-Screens"><a href="#Supporting-High-density-Screens" class="headerlink" title="Supporting High-density Screens"></a>Supporting High-density Screens</h3><p>我们直到，苹果在手机以及自家的显示屏上都在使用 Retiina (视网膜屏)，但是同一张照片，在iphone3(480x320)上和iphone4(960x640)上显示的位置是一样的，因此这势必会拉长同一幅照片，造成失真。我们可以通过 images元素中的 srcset属性来帮助我们在不同的显示屏上显示不同分辨率的照片。</p>
<p>首先，我们找到2388x2388分辨率的原图，然后利用Photoshop将其变为 400x400, 800x800, 1200x1200 三种分辨率的图片。分别命名为 meal.jpg/ meal@2x.jpg/ meal@3x.jpg<br>然后，我们这样编写html和css：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/meal.jpg"</span> </span></span><br><span class="line"><span class="tag">       <span class="attr">alt</span>=<span class="string">"A bowl of salmon and curry"</span> </span></span><br><span class="line"><span class="tag">       <span class="attr">class</span>=<span class="string">"meal"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">srcset</span>=<span class="string">"images/meal.jpg 1x,</span></span></span><br><span class="line"><span class="tag"><span class="string">       		 images/meal@2x.jpg 2x, </span></span></span><br><span class="line"><span class="tag"><span class="string">       		 images/meal@3x.jpg 3x"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.meal</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/33.png" style="zoom:67%;"></p>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/34.png" style="zoom:67%;"></p>
<p>我在我4k以及1080p的屏幕上分别测试了一下，发现4k上用的是最高分辨率的meal@3x, 1080p上用的是最低分辨率meal</p>
<p>使用了这个技巧，我们就可以在不同分辨率的屏幕上展示不同大小的图片了</p>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/35.png" style="zoom:67%;"></p>
<p>使用刚才的方法仍然不太方便，比如说：iPhone iPad和iMac的屏幕大小各不相同，假设他们都会选择meal@2x这张照片。</p>
<p>加入我的css写的只是400px，那图片仍然能保持一致，但是如果我的css写的是100vw，那么浏览器会拉长我们的图片，于是大屏的电脑和pad上的照片就会显得十分模糊。</p>
<p>对此，我们可以提供大小不同的三种图片，然后让浏览器根据屏幕的大小来自动选择最优图片。</p>
<p>我们可以将css清空，然后这样编写 html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/meal.jpg"</span> </span></span><br><span class="line"><span class="tag">       <span class="attr">alt</span>=<span class="string">"A bowl of salmon and curry"</span> </span></span><br><span class="line"><span class="tag">       <span class="attr">class</span>=<span class="string">"meal"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">srcset</span>=<span class="string">"images/meal.jpg 400w,</span></span></span><br><span class="line"><span class="tag"><span class="string">              images/meal@2x.jpg 800w,</span></span></span><br><span class="line"><span class="tag"><span class="string">              images/meal@3x.jpg 200w"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">sizes</span>=<span class="string">"(max-width:500px) 100vw,</span></span></span><br><span class="line"><span class="tag"><span class="string">            (max-width: 700px) 50vw,</span></span></span><br><span class="line"><span class="tag"><span class="string">            33vw"</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>如果 width 小于 500px的话，那么使用第一张图片并撑满整个宽</p>
<p>如果width大于500px而小于700px的话，那么使用第二张图片，并占一半的宽</p>
<p>如果width大于700px，那么使用第三张图片并占三分之一的宽</p>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/2.gif" style="zoom:150%;"></p>
<p>我们可以使用<a href="http://reponsivebreakpoints.com/" target="_blank" rel="noopener">http://reponsivebreakpoints.com/</a> 这个网站帮我们为” breakpoints “生成不同大小的照片，就不再需要我们使用photoshop 自己调了</p>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/37.png" style="zoom:150%;"></p>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/38.png" style="zoom:100%;"></p>
<h3 id="Using-Modern-Image-Formats"><a href="#Using-Modern-Image-Formats" class="headerlink" title="Using Modern Image Formats"></a>Using Modern Image Formats</h3><p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/41.png" style="zoom:100%;"></p>
<p><a href="https://cloudconvert.com/" target="_blank" rel="noopener">https://cloudconvert.com/</a> 这是一个很好的在线转换工具。</p>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/40.png" style="zoom:100%;"></p>
<p>我们可以将之前的 JPG文件转换成 WEBP文件，会小很多，浏览器加载起来也十分方便。</p>
<p>但是，IE是不支持显示WEBP文件的，因此我们应该这样写：使用<code>&lt;picture&gt;</code> 元素</p>
<p>picture元素可以根据屏幕匹配的不同尺寸显示不同图片，如果没有匹配到或浏览器不支持 picture 属性则使用 img 元素：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">picture</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">source</span> <span class="attr">type</span>=<span class="string">"image/webp"</span>  <span class="attr">src</span>=<span class="string">"images/meal.webp"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">source</span> <span class="attr">type</span>=<span class="string">"image/jpeg"</span> <span class="attr">src</span>=<span class="string">"images/meal.jpg"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/meal.jpg"</span> <span class="attr">alt</span>=<span class="string">"A bowl of salmon and curry"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">picture</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="Art-Directions"><a href="#Art-Directions" class="headerlink" title="Art Directions"></a>Art Directions</h3><p>接下来我们继续使用picture元素来实现一些酷炫的操作</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">   &lt;<span class="selector-tag">picture</span>&gt;</span><br><span class="line">     &lt;source media="(max-width: 500px)"  srcset="images/meal-cropped.jpg"&gt;</span><br><span class="line">     &lt;source media="(min-width: 501px)" srcset="images/meal.jpg"&gt;</span><br><span class="line">     &lt;img src="images/meal.jpg" alt="A bowl of salmon and curry"&gt;</span><br><span class="line">   &lt;/picture&gt;</span><br><span class="line"> &lt;/body&gt;</span><br></pre></td></tr></table></figure>
<p>在picture中写queriemedia </p>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/3.gif" style="zoom:100%;"></p>
<h3 id="Scalable-Vector-Graphic"><a href="#Scalable-Vector-Graphic" class="headerlink" title="Scalable Vector Graphic"></a>Scalable Vector Graphic</h3><p>Scalable Vector Graphic 就是可伸缩向量图形，其缩写就是SVG</p>
<p>我们可以使用  illustrator这个软件来创建SVG 文件，SVG文件小，且是永远不会失真的。 SVG也常常用于背景当中，我们可以利用 <a href="https://www.svgbackgrounds.com/" target="_blank" rel="noopener">https://www.svgbackgrounds.com/</a> 来帮助我们选择背景。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(../images/constellation.svg);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Font-Icons"><a href="#Font-Icons" class="headerlink" title="Font Icons"></a>Font Icons</h3><p>我们可以使用 Icon font来打出很多标签符号。有很多符号库，比如 Font Awesome ，Ionicons， Material Design Icons等。这里以 <a href="https://fontawesome.com/" target="_blank" rel="noopener">https://fontawesome.com/</a> 为例</p>
<p>在我们注册之后，我们只需要将其提供给我们的\<script\> 元素复制到html文件当中就可了</script\></p>
<p>然后我们点击一个免费的图标，开始使用，然后复制其代码就可以了。</p>
<p>我们通过css对图标进行修改：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.icon</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">2rem</span>;</span><br><span class="line">  <span class="attribute">color</span>: dodgerblue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/43.png" style="zoom:100%;"></p>
<h3 id="Summary-1"><a href="#Summary-1" class="headerlink" title="Summary"></a>Summary</h3><p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/44.png" style="zoom:100%;"></p>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/45.png" style="zoom:100%;"></p>
<p> <img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/46.png" style="zoom:100%;"></p>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/47.png" style="zoom:100%;"></p>
<h3 id="Exercises"><a href="#Exercises" class="headerlink" title="Exercises"></a>Exercises</h3><p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/48.png" style="zoom:100%;"></p>
<p><img src="/2021/02/03/HTMLandCSS%E5%9F%BA%E7%A1%803-%E5%8D%B0%E5%88%B7%E4%B8%8E%E5%9B%BE%E7%89%87/49.png" style="zoom:100%;"></p>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2021/01/31/datalab/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/%5Bobject%20Object%5D">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/01/31/datalab/" itemprop="url">datalab</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2021-01-31T11:01:43+08:00">
                2021-01-31
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2021-01-31T22:57:48+08:00">
                2021-01-31
              </time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="datalab"><a href="#datalab" class="headerlink" title="datalab"></a>datalab</h1><p>这是我们做的第一个lab，题解是早就写在pdf里的，只是一直没有写成博客。现在我们来一题一题看：</p>
<h2 id="int-bitAnd-int-x-int-y"><a href="#int-bitAnd-int-x-int-y" class="headerlink" title="int bitAnd(int x,int y)"></a>int bitAnd(int x,int y)</h2><p>首先是 bitAnd，顾名思义就是按位与：全是1结果才是1，有0结果就是0.</p>
<p>因为这题只能用 <code>|</code>和 <code>~</code> ，</p>
<p>比如说两个数都是1，那么取反后他们都是0，或一下再取反后就为1；两个数中间有一个1有一个0，那么去反之后还是有一个1一个0，或以下为1，再取反之后为0；同理如果两个数都为0，取反之后都为1，或一下再取反则为0.</p>
<p>因此这囊括了所有情况</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bitAnd</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> ~(~x | ~y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="int-getByte-int-x-int-n"><a href="#int-getByte-int-x-int-n" class="headerlink" title="int getByte(int x,int n)"></a>int getByte(int x,int n)</h2><p>getByte这个函数要求我们再以十六进制计数的情况下以大端法取Byte，一个byte就是8bit，两位十六进制数。</p>
<p>首先我们先让n扩大8倍，因为一个n代表8个bit</p>
<p>然后我们让x右移n位，比如说n等于0就不移动，n=1时右移8位，n=2的时候右移16位，这样就能保证得到的数的倒数后8位(2进制形式)就是我们想要取得的byte</p>
<p>然后我们让其和 0xff 按位与。就能获得最后的答案</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * getByte - Extract byte n from word x</span></span><br><span class="line"><span class="comment"> *   Bytes numbered from 0 (LSB) to 3 (MSB)</span></span><br><span class="line"><span class="comment"> *   Examples: getByte(0x12345678,1) = 0x56</span></span><br><span class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *   Max ops: 6</span></span><br><span class="line"><span class="comment"> *   Rating: 2</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getByte</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  n = n &lt;&lt; <span class="number">3</span>;</span><br><span class="line">  x = x &gt;&gt; n;</span><br><span class="line">  x = x &amp; <span class="number">0xff</span>; <span class="comment">// 取最后两位</span></span><br><span class="line">  <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="int-logicalShift-int-x-int-n"><a href="#int-logicalShift-int-x-int-n" class="headerlink" title="int logicalShift(int x, int n)"></a>int logicalShift(int x, int n)</h2><p>这是让我们实现逻辑右移，也就是向右移动k位，数字丢弃最高的k位，并在左端补上k个0. </p>
<p>但是我们知道，这不是unsigned而是int类型的，直接使用右移符号使用的是算术右移。因此我们要创造出一个mask，长这样 <code>0x0...0f...f</code> (n个0，32-n个1) 的掩码。</p>
<p>首先我们要获得 32-n这个数，因为直接用减号是非法的，我们可以用反码+1的方式取得n的负数然后再加上32. 在制作掩码的时候，如下图所示：</p>
<p><img src="/2021/01/31/datalab/1.jpg" style="zoom: 80%;"></p>
<p>但是还有一种情况需要我们考虑，也就是当n=31, cnt=0 的时候，按理说我们应该得到的掩码是11….1(32个1),但是按照 <code>(1&lt;&lt;cntn)+(~0)</code> 的计算方法得到的却是 000…000(32个0),为了避免这种情况的发生，我们可以在后面再加一个 <code>(((~(!n)) + 1))</code>,这样当n=0的时候，这个式子的值就是 <code>1....1</code>; 而当n不等于0的时候，这个式子就等于 <code>0....0</code>，对最终结果是没有影响的。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * logicalShift - shift x to the right by n, using a logical shift</span></span><br><span class="line"><span class="comment"> *   Can assume that 0 &lt;= n &lt;= 31</span></span><br><span class="line"><span class="comment"> *   Examples: logicalShift(0x87654321,4) = 0x08765432</span></span><br><span class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *   Max ops: 20</span></span><br><span class="line"><span class="comment"> *   Rating: 3 </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">logicalShift</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> cntn = <span class="number">32</span> + ((~n) + <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">int</span> temp = (<span class="number">1</span> &lt;&lt; cntn) + (~<span class="number">0</span>) + (((~(!n)) + <span class="number">1</span>)); <span class="comment">//1右移32位相当于1没移动</span></span><br><span class="line">  <span class="keyword">return</span> (x &gt;&gt; n) &amp; temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="int-bitCount-int-x"><a href="#int-bitCount-int-x" class="headerlink" title="int bitCount(int x)"></a>int bitCount(int x)</h2><p>这题的难度比较高，用语言比较难解释清楚。</p>
<p>首先我们要理解一个比特串中1的个数可以通过什么来计算？</p>
<p><img src="/2021/01/31/datalab/1.png" style="zoom:80%;"></p>
<p>看懂了这张图就可以打开思路，一开始我们可以计算奇数位上的1个数和偶数位上的1的个数，得到一个新的比特串，再求两位中1的个数，4位中1的个数，最后求32位中1的个数。如下图所示：</p>
<p><img src="/2021/01/31/datalab/2.png" style="zoom:80%;"></p>
<p>那么我们怎么来根据这个原理来制作掩码呢？</p>
<p><img src="/2021/01/31/datalab/3.png" style="zoom:80%;"></p>
<p><img src="/2021/01/31/datalab/4.png" style="zoom:80%;"></p>
<p><img src="/2021/01/31/datalab/5.png" style="zoom:80%;"></p>
<p>根据上面这样的计算步骤，扩展到32位，我们需要做5个掩码，分别是</p>
<p><code>010101....01</code>, <code>00110011...0011</code>,<code>00001111000011110000111100001111</code>，<code>00000000111111110000000011111111</code>, <code>11111111111111111111111111111111</code></p>
<p>因为我们不能直接使用十六进制来表现这些数，所以我们需要一些帮助比如： 0x55左移；0x33左移；0x0f左移，0xff左移</p>
<p>最后我们利用这些掩码和数字按位与并相加，最终得到比特串中1的个数</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * bitCount - returns count of number of 1's in word</span></span><br><span class="line"><span class="comment"> *   Examples: bitCount(5) = 2, bitCount(7) = 3</span></span><br><span class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *   Max ops: 40</span></span><br><span class="line"><span class="comment"> *   Rating: 4</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bitCount</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> count;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> tempmask = (<span class="number">0x55</span>) | (<span class="number">0x55</span> &lt;&lt; <span class="number">8</span>);</span><br><span class="line">  <span class="keyword">int</span> mask1 = (tempmask) | (tempmask &lt;&lt; <span class="number">16</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> tempmask2 = (<span class="number">0x33</span>) | (<span class="number">0x33</span> &lt;&lt; <span class="number">8</span>);</span><br><span class="line">  <span class="keyword">int</span> mask2 = (tempmask2) | (tempmask2 &lt;&lt; <span class="number">16</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> tempmask3 = (<span class="number">0x0f</span>) | (<span class="number">0x0f</span> &lt;&lt; <span class="number">8</span>);</span><br><span class="line">  <span class="keyword">int</span> mask3 = (tempmask3) | (tempmask3 &lt;&lt; <span class="number">16</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> mask4 = (<span class="number">0xff</span>) | (<span class="number">0xff</span> &lt;&lt; <span class="number">16</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> mask5 = (<span class="number">0xff</span>) | (<span class="number">0xff</span> &lt;&lt; <span class="number">8</span>);</span><br><span class="line"></span><br><span class="line">  count = (x &amp; mask1) + ((x &gt;&gt; <span class="number">1</span>) &amp; mask1);</span><br><span class="line">  count = (count &amp; mask2) + ((count &gt;&gt; <span class="number">2</span>) &amp; mask2);</span><br><span class="line">  count = (count &amp; mask3) + ((count &gt;&gt; <span class="number">4</span>) &amp; mask3);</span><br><span class="line">  count = (count &amp; mask4) + ((count &gt;&gt; <span class="number">8</span>) &amp; mask4);</span><br><span class="line">  count = (count &amp; mask5) + ((count &gt;&gt; <span class="number">16</span>) &amp; mask5);</span><br><span class="line">  <span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="int-bang-int-x"><a href="#int-bang-int-x" class="headerlink" title="int bang(int x)"></a>int bang(int x)</h2><p>这道题也比较简单，是计算非x的值，但是不能使用 ！</p>
<p>首先我们让x和其相反数取或来判断x是否等于0，当x不等于0的时候，temp等于1；当x等于0的时候，temp等于0</p>
<p>然后我们让temp算术右移31位，这时候若x不等于0，ans=11…11;若 x为0，ans=0</p>
<p>最后返回ans+1就是答案了</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * bang - Compute !x without using !</span></span><br><span class="line"><span class="comment"> *   Examples: bang(3) = 0, bang(0) = 1</span></span><br><span class="line"><span class="comment"> *   Legal ops: ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *   Max ops: 12</span></span><br><span class="line"><span class="comment"> *   Rating: 4 </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bang</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> temp = x | ((~x) + <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">int</span> ans = temp &gt;&gt; <span class="number">31</span>; <span class="comment">//!0为11...11;0为 00..00</span></span><br><span class="line">  <span class="keyword">return</span> ans + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="int-tmin-void"><a href="#int-tmin-void" class="headerlink" title="int tmin(void)"></a>int tmin(void)</h2><p>这道题也非常简单，就是求补码的最小值，我们只要得到 100….00这个数就可以了。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * tmin - return minimum two's complement integer </span></span><br><span class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *   Max ops: 4</span></span><br><span class="line"><span class="comment"> *   Rating: 1</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">tmin</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">1</span> &lt;&lt; <span class="number">31</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="int-fitsBits-int-x-int-n"><a href="#int-fitsBits-int-x-int-n" class="headerlink" title="int fitsBits(int x, int n)"></a>int fitsBits(int x, int n)</h2><p>这道题要我们判断x是否能被表示为n位数的补码形式</p>
<p>有两个规律: 假设n=4只有当<code>[1xxx]</code>或<code>[0xxx]</code> 我们才能用n个二进制位来表式x，然后我就将x往右移n-1位<code>~((~n)+1)</code>，判断剩下的数字是不是<strong>全1</strong>或者<strong>全0</strong>就可以了。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * fitsBits - return 1 if x can be represented as an </span></span><br><span class="line"><span class="comment"> *  n-bit, two's complement integer.</span></span><br><span class="line"><span class="comment"> *   1 &lt;= n &lt;= 32</span></span><br><span class="line"><span class="comment"> *   Examples: fitsBits(5,3) = 0, fitsBits(-4,3) = 1</span></span><br><span class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *   Max ops: 15</span></span><br><span class="line"><span class="comment"> *   Rating: 2</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fitsBits</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> temp = x &gt;&gt; (~((~n) + <span class="number">1</span>));</span><br><span class="line">  <span class="keyword">int</span> flag = (!temp | !(temp + <span class="number">1</span>));</span><br><span class="line">  <span class="keyword">return</span> flag; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="int-divpwr2-int-x-int-n"><a href="#int-divpwr2-int-x-int-n" class="headerlink" title="int divpwr2(int x, int n)"></a>int divpwr2(int x, int n)</h2><p>这道题要我们计算  $x/(2^n)$ 的值,只要我们了解二进制数除以$2^k$的 原理就能很好的解决。</p>
<p><img src="/2021/01/31/datalab/6.png" style="zoom:80%;"></p>
<p>这里我定义了 flag和 cnt，其中flag是判断这个二进制数是否为负数，若为负数，则为 1…1, 否则为0….0</p>
<p>cnt就是32-k个0和k个1，也就是$(1&lt;&lt;k)-1$ </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * divpwr2 - Compute x/(2^n), for 0 &lt;= n &lt;= 30</span></span><br><span class="line"><span class="comment"> *  Round toward zero</span></span><br><span class="line"><span class="comment"> *   Examples: divpwr2(15,1) = 7, divpwr2(-33,4) = -2</span></span><br><span class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *   Max ops: 15</span></span><br><span class="line"><span class="comment"> *   Rating: 2</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">divpwr2</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> flag = x &gt;&gt; <span class="number">31</span>; <span class="comment">//负数的话为 0xFFFFF否则为0</span></span><br><span class="line">  <span class="comment">//要构造 2^k-1; 也就是 32-k个0和k个1</span></span><br><span class="line">  <span class="keyword">int</span> cnt = ~((~<span class="number">0</span>) &lt;&lt; n);</span><br><span class="line">  <span class="keyword">return</span> (x + (flag &amp; cnt)) &gt;&gt; n;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="int-negate-int-x"><a href="#int-negate-int-x" class="headerlink" title="int negate(int x)"></a>int negate(int x)</h2><p>负数就是反码+1,这个题不用过多解释。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * negate - return -x </span></span><br><span class="line"><span class="comment"> *X   Example: negate(1) = -1.</span></span><br><span class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *   Max ops: 5</span></span><br><span class="line"><span class="comment"> *   Rating: 2</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">negate</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (~x) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="int-isPositive-int-x"><a href="#int-isPositive-int-x" class="headerlink" title="int isPositive(int x)"></a>int isPositive(int x)</h2><p>这道题要我们判断x是否为正数，注意，0和负数都要返回0</p>
<p>首先我们判断这个数是负数还是非负数，若为负数，则返回1；否则返回0</p>
<p>然后我们还要判断这个数是不是等于0</p>
<p>最后将他们的按位或后的结果取反就是答案</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * isPositive - return 1 if x &gt; 0, return 0 otherwise </span></span><br><span class="line"><span class="comment"> *   Example: isPositive(-1) = 0.</span></span><br><span class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *   Max ops: 8</span></span><br><span class="line"><span class="comment"> *   Rating: 3</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">isPositive</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> flag = (x &gt;&gt; <span class="number">31</span>) &amp; <span class="number">0x1</span>;</span><br><span class="line">  <span class="keyword">int</span> ifzero = !x;</span><br><span class="line">  <span class="keyword">return</span> !(flag^ifzero);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="int-isLessOrEqual-int-x-int-y"><a href="#int-isLessOrEqual-int-x-int-y" class="headerlink" title="int isLessOrEqual(int x, int y)"></a>int isLessOrEqual(int x, int y)</h2><p>这道题说 如果 $x&lt;= y$ 就返回1，否则就返回0</p>
<p>这是有符号数，存在向上向下溢出的情况，我们必须考虑到所有情况。</p>
<p>第一种：x，y同号，且y-x 大于等于0</p>
<p>第二种：x,y 异号，只可能是 x小于0而y大于0</p>
<p>signx和signy是判断x，y是否小于0的，如果小于0，就为1；</p>
<p>samesignflag判断x和y是否同号，若同号则为1，若异号则为0；</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * isLessOrEqual - if x &lt;= y  then return 1, else return 0 </span></span><br><span class="line"><span class="comment"> *   Example: isLessOrEqual(4,5) = 1.</span></span><br><span class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *   Max ops: 24</span></span><br><span class="line"><span class="comment"> *   Rating: 3</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">isLessOrEqual</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> signx = (x &gt;&gt; <span class="number">31</span>) &amp; <span class="number">0x1</span>;</span><br><span class="line">  <span class="keyword">int</span> signy = (y &gt;&gt; <span class="number">31</span>) &amp; <span class="number">0x1</span>;</span><br><span class="line">  <span class="keyword">int</span> Samesignflag = !(signx ^ signy);</span><br><span class="line">  <span class="keyword">int</span> positiveflag = !(((~x) + <span class="number">1</span> + y) &gt;&gt; <span class="number">31</span>);</span><br><span class="line">  <span class="comment">//要么同号相减大于0，要么异号 x小于0</span></span><br><span class="line">  <span class="keyword">return</span> (Samesignflag &amp; positiveflag) | ((!Samesignflag) &amp; signx);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="int-ilog2-int-x"><a href="#int-ilog2-int-x" class="headerlink" title="int ilog2(int x)"></a>int ilog2(int x)</h2><p>想法是二分的思想，公式$log(x)=16<em>a+8</em>b+4<em>c+2</em>d+e$。那么count=abcde。因为x长32位，首先我们先将<code>x&gt;&gt;16</code>，判断<strong>高16位</strong>是不是还&gt;0，如果&gt;0，<code>!(x&gt;&gt;16)</code>就是0，我们要将他转换到a的位置就是将<code>! !(x&gt;&gt;16)</code>再次取非是1，然后<code>&lt;&lt;4</code>，到a的位置，就说明这个数大于16，1肯定在高16位处，然后在接着将高位折半到8位，就是<code>&gt;&gt;8+16</code>，看看高8位是不是也是<code>&gt;0</code>。这样一步步下去就是答案了。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * ilog2 - return floor(log base 2 of x), where x &gt; 0</span></span><br><span class="line"><span class="comment"> *   Example: ilog2(16) = 4</span></span><br><span class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *   Max ops: 90</span></span><br><span class="line"><span class="comment"> *   Rating: 4</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">ilog2</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">  count = (!!(x &gt;&gt; <span class="number">16</span>)) &lt;&lt; <span class="number">4</span>;</span><br><span class="line">  count = count + ((!!(x &gt;&gt; (<span class="number">8</span> + count))) &lt;&lt; <span class="number">3</span>);</span><br><span class="line">  count = count + ((!!(x &gt;&gt; (<span class="number">4</span> + count))) &lt;&lt; <span class="number">2</span>);</span><br><span class="line">  count = count + ((!!(x &gt;&gt; (<span class="number">2</span> + count))) &lt;&lt; <span class="number">1</span>);</span><br><span class="line">  count = count + ((!!(x &gt;&gt; (<span class="number">1</span> + count))) &lt;&lt; <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="unsigned-float-neg-unsigned-uf"><a href="#unsigned-float-neg-unsigned-uf" class="headerlink" title="unsigned float_neg(unsigned uf)"></a>unsigned float_neg(unsigned uf)</h2><p><img src="/2021/01/31/datalab/7.png" style="zoom:80%;"></p>
<p>float-neg就是让我们求出浮点数的负数,我们知道浮点数 s,exp,frac 字段分别为 1 位， k=8 位和 n=23 位</p>
<p>给定一个浮点数,我们首先让temp=浮点数左移1位,这样开头8位就都是 exp字段了.</p>
<p>然后,我们必须去除掉NaN的情况,也就是 exp等于<code>11111111</code>,而后面的 frac字段不为零. 因此我们先让 <code>wu&amp;tmp</code>是否等于wu,若相等,则位denormalized情况,然后再判断 <code>temp!=wu</code> 如果不等于,就是 NaN;如果等于,就是 Infinity的情况.如果是无穷的,那和普通的浮点数一样只要改变一下符号就可以了,如果是NaN就不用改, 直接返回NaN</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * float_neg - Return bit-level equivalent of expression -f for</span></span><br><span class="line"><span class="comment"> *   floating point argument f.</span></span><br><span class="line"><span class="comment"> *   Both the argument and result are passed as unsigned int's, but</span></span><br><span class="line"><span class="comment"> *   they are to be interpreted as the bit-level representations of</span></span><br><span class="line"><span class="comment"> *   single-precision floating point values.</span></span><br><span class="line"><span class="comment"> *   When argument is NaN, return argument.</span></span><br><span class="line"><span class="comment"> *   Legal ops: Any integer/unsigned operations incl. ||, &amp;&amp;. also if, while</span></span><br><span class="line"><span class="comment"> *   Max ops: 10</span></span><br><span class="line"><span class="comment"> *   Rating: 2</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="title">float_neg</span><span class="params">(<span class="keyword">unsigned</span> uf)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">unsigned</span> x = <span class="number">0x80000000</span>;</span><br><span class="line">  <span class="keyword">unsigned</span> wu = <span class="number">0xFF000000</span>;</span><br><span class="line">  <span class="keyword">unsigned</span> tmp = uf &lt;&lt; <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">if</span> ((wu &amp; tmp) == wu) <span class="comment">//FF后面不为0则为NaN</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">if</span> (tmp != wu)</span><br><span class="line">      <span class="keyword">return</span> uf;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> uf ^ x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="unsigned-float-i2f-int-x"><a href="#unsigned-float-i2f-int-x" class="headerlink" title="unsigned float_i2f(int x)"></a>unsigned float_i2f(int x)</h2><p>这个函数要我们将一个有符号数x转换成浮点数的格式</p>
<p>浮点数的总共由3个部分组成,s,exp和frac</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * float_i2f - Return bit-level equivalent of expression (float) x</span></span><br><span class="line"><span class="comment"> *   Result is returned as unsigned int, but</span></span><br><span class="line"><span class="comment"> *   it is to be interpreted as the bit-level representation of a</span></span><br><span class="line"><span class="comment"> *   single-precision floating point values.</span></span><br><span class="line"><span class="comment"> *   Legal ops: Any integer/unsigned operations incl. ||, &amp;&amp;. also if, while</span></span><br><span class="line"><span class="comment"> *   Max ops: 30</span></span><br><span class="line"><span class="comment"> *   Rating: 4</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="title">float_i2f</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">unsigned</span> ans;</span><br><span class="line">  <span class="keyword">int</span> tmpx = x;</span><br><span class="line">  <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">int</span> delta = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">int</span> tail = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">int</span> E = <span class="number">0</span>;</span><br><span class="line"><span class="comment">//如果x等于0,那么就直接返回 x</span></span><br><span class="line">  <span class="keyword">if</span> (x == <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">  <span class="comment">//如果x是最小值,即-2^31,那么 1 10011111 000..0 e=159,E=32,f=0,M=1</span></span><br><span class="line">  <span class="keyword">if</span> (x == <span class="number">0x80000000</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0xcf000000</span>;</span><br><span class="line"></span><br><span class="line">  ans = x &amp; <span class="number">0x80000000</span>; <span class="comment">//固定第一位,符号位</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (ans)</span><br><span class="line">    tmpx = -x; <span class="comment">//若x是负数,那么tempx取x的相反数(为正)</span></span><br><span class="line"><span class="comment">//为了构造小数字段,我们先舍去1,然后再尾巴上补0,一直补到23位为止</span></span><br><span class="line">  <span class="keyword">while</span> ((tmpx &gt;&gt; E))<span class="comment">//计算得到tmpx总共有几位</span></span><br><span class="line">    E++;</span><br><span class="line">  E = E - <span class="number">1</span>;</span><br><span class="line">   <span class="comment">//以12345为例,现在二进制表达为 11000000111001,E=13, </span></span><br><span class="line">  tmpx = tmpx &lt;&lt; (<span class="number">31</span> - E);         <span class="comment">//  然后tmpx左移18位,现在tmpx一共31位</span></span><br><span class="line">    <span class="comment">//tmpx = 11000000111001 000000000000000000</span></span><br><span class="line">  tail = (tmpx &gt;&gt; <span class="number">8</span>) &amp; <span class="number">0x007FFFFF</span>; <span class="comment">//将tmpx右移8位,给阶码空出位置,现在tail为</span></span><br><span class="line">    <span class="comment">//10000001110010000000000</span></span><br><span class="line">  f = tmpx &amp; <span class="number">0xff</span>;</span><br><span class="line">  <span class="comment">//向偶数舍入</span></span><br><span class="line">  delta = (f &gt; <span class="number">128</span>) || ((f == <span class="number">128</span>) &amp;&amp; (tail &amp; <span class="number">1</span>));</span><br><span class="line">  tail += delta;</span><br><span class="line"></span><br><span class="line">  E = E + <span class="number">127</span>; <span class="comment">// 计算阶码,E=e+偏移量</span></span><br><span class="line">	</span><br><span class="line">  <span class="comment">//如果frac段大于23位了,那么就要在exp段加一个1,表示进一位,同时舍去最高位</span></span><br><span class="line">  <span class="keyword">if</span> (tail &gt;&gt; <span class="number">23</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    tail = tail &amp; <span class="number">0x007FFFFF</span>;</span><br><span class="line">    E += <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  ans = ans | E &lt;&lt; <span class="number">23</span> | tail;<span class="comment">//将这三段合并,得到最终的答案</span></span><br><span class="line">  <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="unsigned-float-twice-unsigned-uf"><a href="#unsigned-float-twice-unsigned-uf" class="headerlink" title="unsigned float_twice(unsigned uf)"></a>unsigned float_twice(unsigned uf)</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * float_twice - Return bit-level equivalent of expression 2*f for</span></span><br><span class="line"><span class="comment"> *   floating point argument f.</span></span><br><span class="line"><span class="comment"> *   Both the argument and result are passed as unsigned int's, but</span></span><br><span class="line"><span class="comment"> *   they are to be interpreted as the bit-level representation of</span></span><br><span class="line"><span class="comment"> *   single-precision floating point values.</span></span><br><span class="line"><span class="comment"> *   When argument is NaN, return argument</span></span><br><span class="line"><span class="comment"> *   Legal ops: Any integer/unsigned operations incl. ||, &amp;&amp;. also if, while</span></span><br><span class="line"><span class="comment"> *   Max ops: 30</span></span><br><span class="line"><span class="comment"> *   Rating: 4</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="title">float_twice</span><span class="params">(<span class="keyword">unsigned</span> uf)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment">//把浮点数拆成 s(1位)E(8位)M(23位),利用掩码分别取出</span></span><br><span class="line">  <span class="keyword">int</span> Smask = uf&amp;<span class="number">0x80000000</span>;</span><br><span class="line">  <span class="keyword">int</span> Emask = uf&amp;<span class="number">0x7f800000</span>;</span><br><span class="line">  <span class="keyword">int</span> Mmask = uf&amp;<span class="number">0x007fffff</span>;</span><br><span class="line">  <span class="keyword">int</span> E_infty = <span class="number">0xff000000</span>;</span><br><span class="line">  <span class="keyword">int</span> tempuf = uf&lt;&lt;<span class="number">1</span>;</span><br><span class="line">  <span class="keyword">int</span> ans =uf;</span><br><span class="line">    <span class="comment">//首先要排除NaN的情况,如果uf是NaN,就返回uf</span></span><br><span class="line">  <span class="keyword">if</span>((tempuf&amp;E_infty)==E_infty)</span><br><span class="line">    <span class="keyword">return</span> uf;</span><br><span class="line">	<span class="comment">//如果 exp这段不为0,那么就在exp这段加上1</span></span><br><span class="line">  <span class="keyword">if</span>(Emask!=<span class="number">0</span>)</span><br><span class="line">    ans = Smask+Mmask+Emask+<span class="number">0x00800000</span>;</span><br><span class="line">   <span class="comment">//如果exp这段为0,说明是 denormalized,我们只需要将Mmask左移一位就可以了</span></span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span>(Mmask!=<span class="number">0</span>)</span><br><span class="line">    ans = Smask+Emask+(Mmask&lt;&lt;<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2021/01/29/shell-lab/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/%5Bobject%20Object%5D">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/01/29/shell-lab/" itemprop="url">shell-lab</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2021-01-29T15:52:13+08:00">
                2021-01-29
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2021-01-31T21:18:52+08:00">
                2021-01-31
              </time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Shell-Lab"><a href="#Shell-Lab" class="headerlink" title="Shell Lab"></a>Shell Lab</h1><p>在这个 <code>tsh.c</code> 文件里面，我们需要完成7个函数的编写：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">eval</span><span class="params">(<span class="keyword">char</span> *cmdline)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">builtin_cmd</span><span class="params">(<span class="keyword">char</span> **argv, <span class="keyword">char</span> *cmdline)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">do_bgfg</span><span class="params">(<span class="keyword">char</span> **argv, <span class="keyword">char</span> *cmdline)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">waitfg</span><span class="params">(<span class="keyword">pid_t</span> pid)</span></span>;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sigchld_handler</span><span class="params">(<span class="keyword">int</span> sig)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sigtstp_handler</span><span class="params">(<span class="keyword">int</span> sig)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sigint_handler</span><span class="params">(<span class="keyword">int</span> sig)</span></span>;</span><br></pre></td></tr></table></figure>
<h2 id="eval-char-cmdline"><a href="#eval-char-cmdline" class="headerlink" title="eval(char * cmdline)"></a>eval(char * cmdline)</h2><p>在调用<code>parseline</code>解析输出后，我们首先判断这是一个内置命令（shell实现）还是一个程序（本地文件）。</p>
<p>fg %jobnumber 将后台的任务拿到前台来处理<br>bg %jobnumber 将任务放到后台中去处理</p>
<p>setpgid的用法：</p>
<p>1.如果pgid设置为0，该进程的进程组ID会被设置为该进程的ID </p>
<p>2.如果pid和pgid都指向同一个进程，那么就会重新创建一个进程组，该进程会成为该进程组的首进程 </p>
<p>3.如果pid与pgid不一样，那么就会把pid指向的进程移动到另外一个进程组</p>
<p>4.如果pid设置为0，那么调用进程的进程组ID就会发生变化</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">eval</span><span class="params">(<span class="keyword">char</span> *cmdline)</span><span class="comment">//evaluation </span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> *argv[MAXARGS];</span><br><span class="line">    <span class="keyword">int</span> bg_flag;</span><br><span class="line"></span><br><span class="line">    bg_flag = parseline(cmdline, argv);<span class="comment">/* BG job的话为1，FG job为0 */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (builtin_cmd(argv, cmdline)) <span class="comment">/* built-in command */</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span>;<span class="comment">//如果是内置命令，就进入builtin_cmd</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="comment">/* program (file) 否则创建子进程并在job列表里完成添加*/</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//注意先要用access来判断是否存在这个文件，不然fork以后是无法回收的。</span></span><br><span class="line">        <span class="keyword">if</span> (access(argv[<span class="number">0</span>], F_OK)) <span class="comment">/* do not fork and addset! */</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"%s: Command not found\n"</span>, argv[<span class="number">0</span>]);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">		<span class="comment">//添加到job列表。</span></span><br><span class="line">        <span class="keyword">pid_t</span> pid;</span><br><span class="line">        <span class="keyword">sigset_t</span> mask, prev;</span><br><span class="line">        sigemptyset(&amp;mask);</span><br><span class="line">        sigaddset(&amp;mask, SIGCHLD);</span><br><span class="line">        <span class="comment">//防止add_job和delete_job竞争</span></span><br><span class="line">        sigprocmask(SIG_BLOCK, &amp;mask, &amp;prev); <span class="comment">/* block SIG_CHLD */</span></span><br><span class="line">		<span class="comment">//fork子进程 </span></span><br><span class="line">        <span class="keyword">if</span> ((pid=fork()) == <span class="number">0</span>) <span class="comment">/* child */</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//如果是子进程就要先解锁</span></span><br><span class="line">            sigprocmask(SIG_SETMASK, &amp;prev, <span class="literal">NULL</span>); <span class="comment">/* unblock SIG_CHLD */</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (!setpgid(<span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//这里如果fork子进程出现了错误应该使用_exit()</span></span><br><span class="line">                <span class="keyword">if</span> (execve(argv[<span class="number">0</span>], argv, environ))<span class="comment">//运行这个可执行文件</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"%s: Failed to execve\n"</span>, argv[<span class="number">0</span>]);</span><br><span class="line">                    _exit(<span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">/* context changed */</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"Failed to invoke setpgid(0, 0)\n"</span>);</span><br><span class="line">                _exit(<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (pid &gt; <span class="number">0</span>)<span class="comment">/* 父进程就是当前的shell ， tsh */</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (!bg_flag) <span class="comment">/*执行前端任务,立刻执行，结束后才进行下一个 */</span></span><br><span class="line">            &#123;</span><br><span class="line">                fg_pid = pid;</span><br><span class="line">                fg_pid_reap = <span class="number">0</span>;</span><br><span class="line">                addjob(jobs, pid, FG, cmdline);<span class="comment">//把这个进程状态设置为FG</span></span><br><span class="line">                sigprocmask(SIG_SETMASK, &amp;prev, <span class="literal">NULL</span>); <span class="comment">/* unblock SIG_CHLD */</span></span><br><span class="line">                waitfg(pid);<span class="comment">//忙等，只有当子进程回收之后才能进行下一个</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="comment">/* 执行后端任务，后端直接加工作，打印信息后就结束了，等有空再做后端 */</span></span><br><span class="line">            &#123;</span><br><span class="line">                addjob(jobs, pid, BG, cmdline);<span class="comment">//把进程状态设置为BG</span></span><br><span class="line">                sigprocmask(SIG_SETMASK, &amp;prev, <span class="literal">NULL</span>); <span class="comment">/* unblock SIG_CHLD */</span></span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"[%d] (%d) %s"</span>, maxjid(jobs), pid, cmdline);<span class="comment">//打印</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            unix_error(<span class="string">"Failed to fork child"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>另外要注意一个线程并行竞争（race）的问题：<code>fork</code>以后会在job列表里添加job，信号处理函数<code>sigchld_handler</code> 回收进程后会在job列表中删除，如果信号来的比较早，那么就可能会发生先删除后添加的情况。这样这个job永远不会在列表中消失了（内存泄露），所以我们要先block <code>SIGCHLD</code> 这个信号，添加以后再还原。</p>
<h2 id="builtin-cmd-char-argv-char-cmdline"><a href="#builtin-cmd-char-argv-char-cmdline" class="headerlink" title="builtin_cmd(char **argv,char *cmdline)"></a>builtin_cmd(char **argv,char *cmdline)</h2><p>这个函数分情况判断是哪一个内置命令。如果用户仅仅按下回车键，那么<code>argv</code> 的第一个变量将是一个空指针。如果用这个空指针去调用 <code>strcmp</code>函数会引发 segmentation fault</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">builtin_cmd</span><span class="params">(<span class="keyword">char</span> **argv, <span class="keyword">char</span> *cmdline)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> *first_arg = argv[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (first_arg == <span class="literal">NULL</span>) <span class="comment">//直接敲空格的情况</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">strcmp</span>(first_arg, <span class="string">"quit"</span>))<span class="comment">//如果第一个参数是quit，那就直接退出</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (!<span class="built_in">strcmp</span>(first_arg, <span class="string">"jobs"</span>))<span class="comment">//如果第一个参数是jobs，那就列出当前的jobs</span></span><br><span class="line">    &#123;</span><br><span class="line">        listjobs(jobs);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (!<span class="built_in">strcmp</span>(first_arg, <span class="string">"bg"</span>) || !<span class="built_in">strcmp</span>(first_arg, <span class="string">"fg"</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//如果是bg和fg中的一种，就交个 do_bgfg这个函数去单独处理</span></span><br><span class="line">        do_bgfg(argv, cmdline);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="do-bgfg-char-argv-char-cmdline"><a href="#do-bgfg-char-argv-char-cmdline" class="headerlink" title="do_bgfg(char *argv, char cmdline);"></a>do_bgfg(char <em>*argv, char </em>cmdline);</h2><p>这个函数单独处理了<code>bg</code>和<code>fg</code>这两个内置命令。这个函数的核心就两点：</p>
<ol>
<li><p>区分bg和fg命令，以及传入pid或者jid参数对应的进程的状态。前者if，后者switch就可以包括所用的情况</p>
</li>
<li><p>注意用户输入错误处理，比如参数数量不够或者参数传入错误的情况</p>
</li>
</ol>
<p>要注意<code>fg</code>有两个对应的情况：</p>
<ol>
<li><p>后台程序是stopped的状态，这时我们需要设置相关变量，然后发送继续的信号。</p>
</li>
<li><p>如果这个进程本身就在运行，我们就只需要改变job的状态，设置相关变量，然后进入<code>waitfg</code>等待这个新的前台进程执行完毕。</p>
</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">void</span> <span class="title">do_bgfg</span><span class="params">(<span class="keyword">char</span> **argv, <span class="keyword">char</span> *cmdline)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> *first_arg = argv[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">strcmp</span>(first_arg, <span class="string">"bg"</span>))<span class="comment">//如果是后端的工作</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (argv[<span class="number">1</span>] == <span class="literal">NULL</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"bg command requires PID or %%jobid argument\n"</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (argv[<span class="number">1</span>][<span class="number">0</span>] == <span class="string">'%'</span>) <span class="comment">/* JID是%+数字的格式 */</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> jid = atoi(argv[<span class="number">1</span>] + <span class="number">1</span>);<span class="comment">//跳过百分号读取JID</span></span><br><span class="line">            <span class="keyword">if</span> (jid)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//获取当前job的指针</span></span><br><span class="line">            	<span class="class"><span class="keyword">struct</span> <span class="title">job_t</span> *<span class="title">job_tmp</span> = <span class="title">getjobjid</span>(<span class="title">jobs</span>, <span class="title">jid</span>);</span></span><br><span class="line">                <span class="keyword">if</span> (job_tmp != <span class="literal">NULL</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                	job_tmp-&gt;state = BG;<span class="comment">//将当前job状态换成BG</span></span><br><span class="line">                	<span class="built_in">printf</span>(<span class="string">"[%d] (%d) %s"</span>, jid, job_tmp-&gt;pid, job_tmp-&gt;cmdline);</span><br><span class="line">                    <span class="comment">//打印当前jid, job的pid和cmdline</span></span><br><span class="line">                	stopped_resume_child = job_tmp-&gt;pid;</span><br><span class="line">                    <span class="comment">//获取当前job的pid之后，给进程发送一个SIGCONT的信号</span></span><br><span class="line">                    <span class="comment">//因为之前这个进程可能处于停止的状态。</span></span><br><span class="line">                    killpg(job_tmp-&gt;pid, SIGCONT);</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"%%%s: No such job\n"</span>, argv[<span class="number">1</span>] + <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span><span class="comment">//如果只打了一个百分号，没有数字。</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"%%%s: No such job\n"</span>, argv[<span class="number">1</span>] + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="comment">/* PID */</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//获取pid</span></span><br><span class="line">            <span class="keyword">pid_t</span> pid = atoi(argv[<span class="number">1</span>]);</span><br><span class="line">            <span class="keyword">if</span>(pid)</span><br><span class="line">            &#123;</span><br><span class="line">            	<span class="class"><span class="keyword">struct</span> <span class="title">job_t</span> *<span class="title">job_tmp</span> = <span class="title">getjobpid</span>(<span class="title">jobs</span>, <span class="title">pid</span>);</span><span class="comment">//获取job的指针</span></span><br><span class="line">                <span class="keyword">if</span> (job_tmp != <span class="literal">NULL</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                	job_tmp-&gt;state = BG;<span class="comment">//状态设为BG</span></span><br><span class="line">                	<span class="built_in">printf</span>(<span class="string">"[%d] (%d) %s"</span>, job_tmp-&gt;jid, pid, job_tmp-&gt;cmdline);</span><br><span class="line">                	stopped_resume_child = job_tmp-&gt;pid;</span><br><span class="line">                    killpg(pid, SIGCONT);</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"(%s): No such process\n"</span>, argv[<span class="number">1</span>]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"bg: argument must be a PID or %%jobid\n"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span><span class="comment">//如果是前端的工作</span></span><br><span class="line">    &#123;</span><br><span class="line">    	<span class="comment">/* there are two case when using fg:</span></span><br><span class="line"><span class="comment">    	1. the job stopped </span></span><br><span class="line"><span class="comment">    	2. the job is running</span></span><br><span class="line"><span class="comment">    	*/</span></span><br><span class="line"></span><br><span class="line">    	<span class="keyword">if</span> (argv[<span class="number">1</span>] == <span class="literal">NULL</span>)<span class="comment">//第二个参数没有的话，就直接返回</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"fg command requires PID or %%jobid argument\n"</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (argv[<span class="number">1</span>][<span class="number">0</span>] == <span class="string">'%'</span>) <span class="comment">/* JID */</span></span><br><span class="line">        <span class="comment">//如果第二个参数的第一个字符是%，就代表着是个JID</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> jid = atoi(argv[<span class="number">1</span>] + <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">if</span> (jid)</span><br><span class="line">            &#123;</span><br><span class="line">            	<span class="class"><span class="keyword">struct</span> <span class="title">job_t</span> *<span class="title">job_tmp</span> = <span class="title">getjobjid</span>(<span class="title">jobs</span>, <span class="title">jid</span>);</span></span><br><span class="line">                <span class="keyword">if</span> (job_tmp != <span class="literal">NULL</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                	<span class="keyword">int</span> state = job_tmp-&gt;state;</span><br><span class="line">                	fg_pid = job_tmp-&gt;pid; </span><br><span class="line">                    <span class="comment">/* this is the new foreground process */</span></span><br><span class="line">                	fg_pid_reap = <span class="number">0</span>;</span><br><span class="line">                	job_tmp-&gt;state = FG;</span><br><span class="line">                	<span class="keyword">if</span> (state == ST)<span class="comment">//如果当前处于暂停状态</span></span><br><span class="line">                	&#123;</span><br><span class="line">                		stopped_resume_child = job_tmp-&gt;pid; </span><br><span class="line">                        <span class="comment">/* set the global var in case of wait in SIGCHLD handler */</span></span><br><span class="line">                    	killpg(job_tmp-&gt;pid, SIGCONT);</span><br><span class="line">                	&#125;</span><br><span class="line">                	<span class="comment">//等待前台进程结束，进行下一个命令</span></span><br><span class="line">                    waitfg(job_tmp-&gt;pid); </span><br><span class="line">                    <span class="comment">/* wait until the foreground terminate/stop */</span></span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"%%%s: No such job\n"</span>, argv[<span class="number">1</span>] + <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"%%%s: No such job\n"</span>, argv[<span class="number">1</span>] + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="comment">/* PID */</span></span><br><span class="line">            <span class="comment">//否则就是个PID</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">pid_t</span> pid = atoi(argv[<span class="number">1</span>]);</span><br><span class="line">            <span class="keyword">if</span>(pid)</span><br><span class="line">            &#123;</span><br><span class="line">            	<span class="class"><span class="keyword">struct</span> <span class="title">job_t</span> *<span class="title">job_tmp</span> = <span class="title">getjobpid</span>(<span class="title">jobs</span>, <span class="title">pid</span>);</span></span><br><span class="line">                <span class="keyword">if</span> (job_tmp != <span class="literal">NULL</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                	<span class="keyword">int</span> state = job_tmp-&gt;state;</span><br><span class="line">                	fg_pid = job_tmp-&gt;pid; <span class="comment">/* this is the new foreground process */</span></span><br><span class="line">                	fg_pid_reap = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">                	job_tmp-&gt;state = FG;</span><br><span class="line"></span><br><span class="line">                	<span class="keyword">if</span> (state == ST)</span><br><span class="line">                	&#123;</span><br><span class="line">                		stopped_resume_child = job_tmp-&gt;pid;</span><br><span class="line">                        <span class="comment">/* set the global var in case of wait in SIGCHLD handler */</span></span><br><span class="line">                    	killpg(pid, SIGCONT);</span><br><span class="line">                	&#125;</span><br><span class="line">                	</span><br><span class="line">                    waitfg(job_tmp-&gt;pid); </span><br><span class="line">                    <span class="comment">/* wait until the foreground terminate/stop */</span></span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"(%s): No such process\n"</span>, argv[<span class="number">1</span>]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"fg: argument must be a PID or %%jobid\n"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="void-waitfg-pid-t-pid"><a href="#void-waitfg-pid-t-pid" class="headerlink" title="void waitfg(pid_t pid)"></a>void waitfg(pid_t pid)</h2><p>之前声明了一个<code>volatile sig_atomic_t</code>的全局变量<code>fg_pid_reap</code> ，只要信号处理函数回收了前台进程，它就会将<code>fg_pid_reap</code> 置1，这样我们的<code>waitfg</code>函数就会退出，接着读取用户的下一个输入。在这里我们使用busy sleep,会导致一定的延迟</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">waitfg</span><span class="params">(<span class="keyword">pid_t</span> pid)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (!fg_pid_reap)<span class="comment">//如果没有回收前台进程，就一直在问回收了没，回收了没</span></span><br><span class="line">    &#123;</span><br><span class="line">        sleep(<span class="number">1</span>);<span class="comment">//休眠 </span></span><br><span class="line">    &#125;</span><br><span class="line">    fg_pid_reap = <span class="number">0</span>;<span class="comment">//回收以后，就</span></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="void-sigchld-handler-int-sig"><a href="#void-sigchld-handler-int-sig" class="headerlink" title="void sigchld_handler(int sig)"></a>void sigchld_handler(int sig)</h2><p>从这里开始，是3个信号处理程序函数。</p>
<p>首先是 sigchld_handler ,也就是当一个子进程终止或者结束的时候,父进程会发送一个SIGCHLD给子进程，然后回收它</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sigchld_handler</span><span class="params">(<span class="keyword">int</span> sig)</span> </span></span><br><span class="line"><span class="function"><span class="comment">/* When a child process stops or terminates, SIGCHLD is sent to the parent process. */</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 回收子进程之前先保留之前的错误信息</span></span><br><span class="line">	<span class="keyword">int</span> olderrno = errno;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (stopped_resume_child)</span><br><span class="line">	&#123;</span><br><span class="line">		stopped_resume_child = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> status;</span><br><span class="line">    <span class="keyword">pid_t</span> pid;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//如果任何一个子进程暂停/结束了，然后用这个函数来回收</span></span><br><span class="line">    <span class="keyword">if</span> ((pid = waitpid(<span class="number">-1</span>, &amp;status, WUNTRACED)) &gt; <span class="number">0</span>) <span class="comment">/* don't use while! */</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (pid == fg_pid)<span class="comment">//如果返回的是当前的前端进程的pid</span></span><br><span class="line">        &#123;</span><br><span class="line">            fg_pid_reap = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">		<span class="comment">//如果子进程是正常结束的，那么就将这个子进程删除。</span></span><br><span class="line">        <span class="keyword">if</span> (WIFEXITED(status)) <span class="comment">/* returns true if the child terminated normally */</span></span><br><span class="line">        &#123;</span><br><span class="line">            deletejob(jobs, pid);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (WIFSIGNALED(status)) </span><br><span class="line">        <span class="comment">/*如果这个子进程是收到一个信号之后结束的，就会返回true,打印SIGNAL之后再删除 */</span></span><br><span class="line">        <span class="comment">/* since job start from zero, we add it one */</span></span><br><span class="line">        &#123;</span><br><span class="line">         <span class="built_in">printf</span>(<span class="string">"Job [%d] (%d) terminated by signal %d\n"</span>, pid2jid(pid), pid, WTERMSIG(status));</span><br><span class="line">         deletejob(jobs, pid);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="comment">//如果是暂停的,就不删除,而是将这个进程的状态改成ST(stop),并打印</span></span><br><span class="line">        &#123;</span><br><span class="line">            struct <span class="keyword">job_t</span> *p = getjobpid(jobs, pid);</span><br><span class="line">            p-&gt;state = ST; <span class="comment">/* Stopped */</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"Job [%d] (%d) stopped by signal 20\n"</span>, pid2jid(pid), pid);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    errno = olderrno;<span class="comment">//将errno复原,保持回收子进程前后错误信息不能变.</span></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="void-sigint-handler-int-sig"><a href="#void-sigint-handler-int-sig" class="headerlink" title="void sigint_handler (int sig)"></a>void sigint_handler (int sig)</h2><p>这个函数是说 当我们使用 ctrl+c 的时候，kernel会使用kill函数给shell发一个 SIGINT信号给前台进程组。注意，这里是群发，因此要使用 <code>killpg</code> </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sigint_handler</span><span class="params">(<span class="keyword">int</span> sig)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> olderrno = errno;</span><br><span class="line">    <span class="keyword">pid_t</span> pgid = fgpid(jobs);</span><br><span class="line">    <span class="keyword">if</span> (pgid)</span><br><span class="line">        killpg(pgid, SIGINT);</span><br><span class="line"></span><br><span class="line">    errno = olderrno;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="void-sigtstp-handler-int-sig"><a href="#void-sigtstp-handler-int-sig" class="headerlink" title="void sigtstp_handler(int sig)"></a>void sigtstp_handler(int sig)</h2><p>和 sigint一样，这次发送的信号是 SIGTSTP</p>
<p>输入<code>Ctrl+Z</code>会发送一个SIGTSTP信号到前台进程组中的每个进程。默认情况下，结果是<strong>停止(挂起suspend)前台作业</strong>。在博客的这一章节 <a href="https://jasonxqh.github.io/2021/01/06/异常控制流（ECF）2/#从键盘发送信号">从键盘发送信号</a> 有说过 </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sigtstp_handler</span><span class="params">(<span class="keyword">int</span> sig)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> olderrno = errno;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">pid_t</span> pgid = fgpid(jobs);</span><br><span class="line">    <span class="keyword">if</span> (pgid)</span><br><span class="line">    &#123;</span><br><span class="line">        killpg(pgid, SIGTSTP);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    errno = olderrno;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2021/01/28/matlab%E5%87%BD%E6%95%B0%E8%A1%A5%E5%85%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/%5Bobject%20Object%5D">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/01/28/matlab%E5%87%BD%E6%95%B0%E8%A1%A5%E5%85%85/" itemprop="url">matlab函数补充</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2021-01-28T16:50:47+08:00">
                2021-01-28
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2021-01-28T19:43:26+08:00">
                2021-01-28
              </time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Matlab-函数补充"><a href="#Matlab-函数补充" class="headerlink" title="Matlab 函数补充"></a>Matlab 函数补充</h1><h3 id="ode23-ode45-Runge-Kutta法求解微分方程"><a href="#ode23-ode45-Runge-Kutta法求解微分方程" class="headerlink" title="ode23/ode45 :Runge-Kutta法求解微分方程"></a>ode23/ode45 :Runge-Kutta法求解微分方程</h3><p>我们没有必要了解ode23和ode45的内部原理，我们</p>
<h4 id="一阶微分方程求解"><a href="#一阶微分方程求解" class="headerlink" title="一阶微分方程求解"></a>一阶微分方程求解</h4><p>比如我要求解 一阶微分方程 $y’=cost$</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">f = @(t,y) <span class="built_in">cos</span>(t); 	<span class="comment">% 定义函数 f(t,y) = cos(t)</span></span><br><span class="line">tspan = [<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">pi</span>];		<span class="comment">% 时间范围</span></span><br><span class="line">y0 = <span class="number">2</span>;					<span class="comment">% 初值</span></span><br><span class="line">[t,y] = ode23(f,tspan,y0); <span class="comment">%注意调用格式</span></span><br></pre></td></tr></table></figure>
<h4 id="高阶微分方程"><a href="#高阶微分方程" class="headerlink" title="高阶微分方程"></a>高阶微分方程</h4><p>假如微分方程为 $F(y,y’,y’’,\cdots,y^{(n)},t) = 0$</p>
<p>初始条件 $y(t<em>0)=c_0,y’(t_0)=c_1,\cdots,y^{n-1}(t_0) = c</em>{n-1}$</p>
<p>首先做变量替换 : $x(1)=y,x(2)=y’,\cdots,x(n) = y^{(n-1)}$</p>
<p><img src="/2021/01/28/matlab%E5%87%BD%E6%95%B0%E8%A1%A5%E5%85%85/1.png"></p>
<p>下面我们用转换好的微分方程组来编写 odefun函数  </p>
<p>例题：首先写出 常微分方程 $y’’ = -ty+e^ty’+3sin2t$ 的odefun函数</p>
<p>我们令$x(1)=y,x(2)=y’$那么，微分方程可以转换为 $dx(1)=y’=x(2),dx(2)=y’’ = -tx(1)+e^tx(2)+3*sin(2t)$</p>
<p>在matlab中我们可以这么写：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dx</span>=<span class="title">odefun</span><span class="params">(t,x)</span>;</span></span><br><span class="line">dx = <span class="built_in">zeros</span>(<span class="number">2</span>,<span class="number">1</span>);<span class="comment">%初始化dx，生成一个2行1列的零向量存放我们的方程组</span></span><br><span class="line">dx(<span class="number">1</span>) = x(<span class="number">2</span>);</span><br><span class="line">dx(<span class="number">2</span>) = -t*x(<span class="number">1</span>)+<span class="built_in">exp</span>(t)*x(<span class="number">2</span>)+<span class="number">3</span>*<span class="built_in">sin</span>(<span class="number">2</span>*t);</span><br></pre></td></tr></table></figure>
<p>或者也可以直接写成向量形式</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dx</span>=<span class="title">odefun</span><span class="params">(t,x)</span>;</span></span><br><span class="line">dx = [</span><br><span class="line">	x(<span class="number">2</span>);</span><br><span class="line">	-t*x(<span class="number">1</span>)+<span class="built_in">exp</span>(t)*x(<span class="number">2</span>)+<span class="number">3</span>*<span class="built_in">sin</span>(<span class="number">2</span>*t)</span><br><span class="line">];</span><br></pre></td></tr></table></figure>
<p>现在，我们要在$t = [3.9,4]$ 区间内求解微分方程 $y’’ = -ty+e^ty’+3sin2t,y<em>{|t=3}=8,y’</em>{|t=3}=2$ </p>
<p>我们现在只要在原来的odefun基础上编写主函数，然后加上求解区间和边值条件即可，需要注意的是，ode45的运行结果以列向量的形式给出。因此在本例中，x的第一列为y，第二列为y’ . 如果遇到变量不是列向量的形式，可以考虑利用reshape函数进行矩阵变换</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tspan = [<span class="number">3.9</span> <span class="number">4</span>];</span><br><span class="line">y0 = [<span class="number">8</span> <span class="number">2</span>];</span><br><span class="line">[t,x] = ode45(<span class="string">'odefun'</span>,tspan,y0);</span><br></pre></td></tr></table></figure>
<p>则，plot(t,x(:,1))画出来的是x的第一列数据，即为y；</p>
<p>​    plot(t,x(:,2))画出来的是x的第二列数据，即为y’；</p>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/%5Bobject%20Object%5D">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/" itemprop="url">HTMLandCSS基础2</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2021-01-28T11:43:13+08:00">
                2021-01-28
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2021-08-30T11:07:16+08:00">
                2021-08-30
              </time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="HTMLandCSS-Layout"><a href="#HTMLandCSS-Layout" class="headerlink" title="HTMLandCSS- Layout"></a>HTMLandCSS- Layout</h1><h3 id="The-Box-Model"><a href="#The-Box-Model" class="headerlink" title="The Box Model"></a>The Box Model</h3><p>在CSS中，一个很重要的概念就是Box Model，也就是当浏览器开始渲染的时候，。下图是一个简单的Box 模型。一共有4层：Content,Padding,Border和Margin。 </p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/1.png" style="zoom:80%;"></p>
<p>我们随便写一个paragraph</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在浏览器里，我们可以看到这个paragraph的Box 模型</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/2.png" style="zoom:100%;"></p>
<p>我们看到，这里只有content和margin是有内容的，padding和border都是没有内容的。Margin=16是 Chrome默认的值。现在我们可以用CSS来改变这些值，这里我为Box Model添加了padding和border两个值</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">20px</span> <span class="number">10px</span> <span class="number">20px</span>;<span class="comment">/*也可以写成 10px 20px;分别代表上下边距和左右边距*/</span></span><br><span class="line">  <span class="attribute">border</span>: <span class="number">5px</span> solid gold;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/3.png" style="zoom:100%;"></p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/4.png" style="zoom:100%;"></p>
<p>我们发现，当我们设置了left padding=20px之后，这行文字总体向右移动了20px。</p>
<h4 id="margin和padding之间的区别"><a href="#margin和padding之间的区别" class="headerlink" title="margin和padding之间的区别"></a>margin和padding之间的区别</h4><p>也许我们会问：margin和padding都是设置文字和框的距离，那么这二者又有什么区别呢？我们举一个例子：</p>
<p>假设现在我们有两个 <code>&lt;p&gt;</code> 元素：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>首先设置 padding =20px, margin = 0px; </p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/5.png" style="zoom:100%;"></p>
<p>绿色的边距就是padding，大小为20px，而且对于每个paragraph，都有20px的padding；</p>
<p>现在我们交换二者的值，padding = 0px 而 margin = 20px。黄色的代表margin，我们发现，现在两个paragraph共用一个margin，也就是它们之间的距离现在是20px。也就是说当两个paragraph相邻的时候，两个margin会合并成一个margin。</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/6.png" style="zoom:100%;"></p>
<p>所以技术上来说，我们应该使用Margin来分隔元素，应该用padding增加content和border之间的距离</p>
<h3 id="Sizing-Elements"><a href="#Sizing-Elements" class="headerlink" title="Sizing Elements"></a>Sizing Elements</h3><h4 id="box-sizing属性"><a href="#box-sizing属性" class="headerlink" title="box-sizing属性"></a>box-sizing属性</h4><p>我们现在来定义一个100X100大小的正方体，并用css为其添加padding和border</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: gold;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">10px</span> solid orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/7.png" style="zoom:100%;"></p>
<p>我们发现，本来是100X100的正方形，加了padding和border以后，变成了160X160的正方形，这是因为在每一边都加上了 20px的padding和10px的border。这和我们规定的100X100的相悖。</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/8.png" style="zoom:100%;"></p>
<p>为了规避这种情况，我们可以在css中定义这个属性：box-sizing ,默认为content-box，也就是我们设置的大小其实是<code>content</code>的大小，现在我们将其设置为<code>border-box</code>，也就是我们设置的大小是带边框都算在内的 <code>box</code> 的大小。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: gold;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">10px</span> solid orange;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Universal-selector-and-pseudo-element"><a href="#Universal-selector-and-pseudo-element" class="headerlink" title="Universal selector and pseudo element"></a>Universal selector and pseudo element</h4><p>如果我有很多的box，又不希望一直写这个属性。为了降低代码的重复性，我们可以使用<strong>全局选择器</strong> <code>*</code></p>
<p>但是这个 <code>*</code> 选择器并不适用于<code>pseudo element</code>，也就是 before , after 之类的元素。 为了囊括所有的元素，我们可以这样写：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">*,</span><br><span class="line">*<span class="selector-pseudo">::before</span>,</span><br><span class="line">*<span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="span-元素与-display-属性"><a href="#span-元素与-display-属性" class="headerlink" title="span 元素与 display 属性"></a>span 元素与 display 属性</h4><p>还有一个问题，就是 <code>div</code>和<code>span</code>之间的区别。我们之前说过 <code>div</code>是以块(block)呈现的而<code>span</code>是以行内(inline)格式呈现的。因此如果我将html中两个<code>div</code>元素改成<code>span</code>元素，虽然我规定了<code>width</code>和<code>height</code>都为100px，结果却是这样：</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/9.png" style="zoom:100%;"></p>
<p>如果我们要规避这个情况，我们可以修改<code>display</code>属性：对于<code>span</code>元素，<code>display</code>属性默认为<code>inline</code>；我们可以将其改成 <code>inline-block</code>，意思是 <code>&lt;span&gt;</code>元素仍然可以行内排列，而对于<code>block</code>使用的属性如<code>width</code>和<code>height</code>也可以作用于其上。如下图所示：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: gold;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/10.png" style="zoom:100%;"></p>
<h3 id="Overflowing"><a href="#Overflowing" class="headerlink" title="Overflowing"></a>Overflowing</h3><p>overflow顾名思义就是溢出，在css中，当content的大小超过了我们规定的box的大小，这时候就会发生溢出。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">3px</span> solid gold;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">150px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">150px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我规定了box的大小为150X150，但是字却很多，这时候就会发生溢出现象</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/11.png" style="zoom:100%;"></p>
<p>这时候我们就可以在css中设置 <code>overflow</code>这个属性了：</p>
<p>默认为visible，也就是我们上面看到的情况。我们可以将其设置为hidden，也就是放不下的就直接隐藏掉了:</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/12.png" style="zoom:100%;"></p>
<p>还可以设置为<code>scroll</code>，这时浏览器会渲染出两个滚动条，然而，在最近的mac版本，<code>scroll</code>是失效的：</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/13.png" style="zoom:100%;"></p>
<p>或者设置为 <code>auto</code>，浏览器会自动检测是否出现<code>overflow</code>现象，如果出现了就会渲染两个滚动条，否则就不设置滚动条。</p>
<p>注意，<code>overflow</code>其实是 <code>overflow-x</code>和<code>overflow-y</code>二者的统一，为其赋值相当于在x和y轴都设置了值。如果我们希望对x和y分别设值，我们可以为overflow设置两个值：<strong>前者代表水平轴，后者代表垂直轴</strong>。</p>
<p>如：<code>overflow: hidden auto</code></p>
<h3 id="Measurement-Units"><a href="#Measurement-Units" class="headerlink" title="Measurement Units"></a>Measurement Units</h3><p>距离单位可以分为 Absolute 和 Relative两种， Absolute就是绝对的，固定的，比如说 px，in之类的单位。 Relative就是相对的。比如：</p>
<p><code>%</code> Relative to the size of the container</p>
<p><code>vw</code>和 <code>vh</code> ,Relative to the viewport</p>
<p><code>em</code>和<code>rem</code> Relative to the font size</p>
<p> 对于Absolute measurement units,不管怎么调整我们的浏览器，它定义的对象的大小，都是不会变化的。这种单位常常用于顶端边框。这样边框的厚度就不会随着浏览器窗口的大小而变粗或者变细。</p>
<h4 id><a href="#" class="headerlink" title="%"></a>%</h4><p>现在我们来看 relative value，首先我们看看 <code>%</code>,它让我们的元素属性是其父元素的百分之多少</p>
<p>这样来写css：已经知道body是div的父元素了</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: gold;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们规定了 body的宽度，然后再把 <code>width</code> 设置为50%，这时候因为窗口的大小是被固定的：300px；因此box的宽度为150px。 当我们去掉 body的<code>width</code>属性之后，box的宽度就随着浏览器的宽度变化而变化了，且始终占据浏览器窗口边框长度的一半。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: gold;</span><br><span class="line">  <span class="attribute">border-top</span>: <span class="number">3px</span> solid orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/14.png" style="zoom:100%;"></p>
<h4 id="vw-vh"><a href="#vw-vh" class="headerlink" title="vw vh"></a>vw vh</h4><p>当我们把height 改成100%之后，神奇的事情发生了，按理说我们希望这个框框能占满窗口所有的垂直距离。但是事实上却出现了这种情况，我们发现框框消失了！这是为什么？</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/15.png" style="zoom:100%;"></p>
<p>因为 我们的body并没有 height这一个属性，因此默认body的height属性为0，而%又是跟着父元素的对应属性走的，因此我们看到这个div的高度为0。</p>
<p>为了达到我们说的那种垂直占满窗口效果，我们可以使用 vh(viewport height)以及 vw(viewport weight)</p>
<p>比如我们这样来修改css:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50vw</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: gold;</span><br><span class="line">  <span class="attribute">border-top</span>: <span class="number">3px</span> solid orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>效果如下：</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/16.png" style="zoom:100%;"></p>
<h4 id="em-rem"><a href="#em-rem" class="headerlink" title="em,rem"></a>em,rem</h4><p>em是相对于字体来说的一个单位，10em代表了 10倍的当前元素中字体的大小。这里div元素没有font-size属性，那么它就会去父元素中查找，如果一直没有，那么他就会默认使用HTML元素中的字体大小,也就是16px。</p>
<p>10em = 10 * 16px = 160px </p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">10em</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">10em</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: gold;</span><br><span class="line">  <span class="attribute">border-top</span>: <span class="number">3px</span> solid orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/17.png" style="zoom:100%;"></p>
<p>em有缺点，就是不太方便，因为如果当前元素没有定义 font-size的话，就要去它的父元素或者祖辈元素寻找，比较麻烦。这时候我们可以选用rem，也就是 root element,一般来说就是HTML元素的字体大小： 16px</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">62.5%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">15rem</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">15rem</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: gold;</span><br><span class="line">  <span class="attribute">border-top</span>: <span class="number">3px</span> solid orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们可以简单做一个计算题，现在body的font-size是 16px * 62.5% = 10px, div 的宽度为15px * 10 = 150px </p>
<p>我们可以在body中修改html元素中的字体，当然也可以直接在chrome的设置中修改字体的大小。</p>
<h3 id="Positioning"><a href="#Positioning" class="headerlink" title="Positioning"></a>Positioning</h3><p>这是我们的html，注意，每一个元素可以有多个class，它们之间用空格隔开。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"boxes"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box box-one"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box box-two"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box-three"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>我的css如下：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="selector-class">.boxes</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">3px</span> solid lightgrey;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">5rem</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">5rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box-one</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: gold;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box-two</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: tomato;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box-three</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/18.png" style="zoom:100%;"></p>
<p>现在，我们希望把第二个方块稍稍向右移动，怎么办？ 我们需要用到 position属性</p>
<h4 id="相对定位"><a href="#相对定位" class="headerlink" title="相对定位"></a>相对定位</h4><ol>
<li>当开启了元素的相对定位以后，而不设置偏移量时，元素不会发生任何变化 </li>
<li>相对定位是相对于元素在文档流中原来的位置进行定位</li>
<li>相对定位的元素不会脱离文档流</li>
<li>相对定位不会改变元素的性质，块还是块，内联还是内联</li>
</ol>
<p>当开启了元素的定位（position属性值是一个非static的值）时，可以通过left right top bottom四个属性来设置元素的偏移量</p>
<blockquote>
<p>​           left：元素相对于其定位位置的左侧偏移量<br>​           right：元素相对于其定位位置的右侧偏移量<br>​           top：元素相对于其定位位置的上边的偏移量<br>​           bottom：元素相对于其定位位置下边的偏移 </p>
<p>通常偏移量只需要使用两个就可以对一个元素进行定位， 一般选择水平方向的一个偏移量和垂直方向的偏移量来为一个元素进行定位</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box-two</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: tomato;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">5rem</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里我设置了<code>left:5rem</code> ，在中间方块的左边就会多出5rem的空白，如下图所示：</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/19.png" style="zoom:100%;"></p>
<p>当然我们也可以设置 left为负值，这时候在原来方块的右边就会多出空白，而方块的一部分就会被挤到box外面去。</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/20.png" style="zoom:100%;"></p>
<p>当然 <code>left: -4rem;</code> 和 <code>right: 4rem</code> 是等价的，我们可以按照自己的喜好来定义。</p>
<p>还有 <code>top</code> <code>bottom</code> 这两个属性，用法同上。</p>
<h4 id="z-index-属性"><a href="#z-index-属性" class="headerlink" title="z-index 属性"></a>z-index 属性</h4><p>现在，红黄两个方块的堆叠方式如下：</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/21.png" style="zoom:100%;"></p>
<p>但是我想修改这两个方块的前后顺序，想让黄色覆盖红色，怎么办？</p>
<p>我们可以使用 z-index,这也很好理解，窗口是一张画布，有了x、y轴，这个z轴就是画布的深度。 默认所有的元素<code>z-index</code>属性都是0，z-index 值越大，距离我们越近，反之则越远。我们只需要设置黄色方块的<code>z-index</code>为1，或者红色方块的<code>z-index</code>为-1 ，就能达到目的：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box-two</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: tomato;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">4rem</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">4rem</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/22.png" style="zoom:100%;"></p>
<h4 id="绝对定位"><a href="#绝对定位" class="headerlink" title="绝对定位"></a>绝对定位</h4><p>绝对定位是<strong>相对于离他最近的开启了定位的祖先元素进行定位的</strong>（一般情况，开启了子元素的绝对定位都会同时开启父元素的相对定位）如果所有的祖先元素都没有开启定位，则会相对于浏览器窗口进行定位。 因此，在把第二个box的position设置成 absolute之前，我们首先要将container的position属性设置为relative。</p>
<p>原则：</p>
<ol>
<li>开启绝对定位以后，如果不设置偏移量，则元素的位置不会发生变化</li>
<li>绝对定位会使元素提升一个层级</li>
<li>绝对定位会改变元素的性质， 内联元素变成块元素，块元素的宽度和高度默认都被内容撑开</li>
</ol>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box-two</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: tomato;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">99999</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当我们设置了第二个箱子距离父元素的右下边框都为0时，发现其被移动到了box的右下角。而原来处在最下面的蓝色方框上移了一个框位。这是因为<strong>绝对定位会使元素提升一个层级</strong>，也就是说现在红色的框框和黄蓝色框框已经不是一层的了，而是和它的父元素是一个层级的。因此container中现在只有“两个”框了，红色框只是跟着container走，但并不属于container。</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/23.png" style="zoom:100%;"></p>
<h4 id="固定定位"><a href="#固定定位" class="headerlink" title="固定定位"></a>固定定位</h4><p>固定定位也是一种绝对定位，它的<strong>大部分特点都和绝对定位</strong>一样 ，不同的是： </p>
<p>固定定位永远都会<strong>相对于浏览器窗口进行定位</strong> ，固定定位会<strong>固定在浏览器窗口某个位置</strong>，不会随滚动条滚动，IE6不支持固定定位 </p>
<p>固定定位常常用于导航栏，我们希望不管浏览器滚动到哪里，顶部始终是navigation bar,首先我们设置body的margin为200vh，这样就能让窗口始终存在滚动条。然后将第二个box的top属性设置为0。这样，不管怎么滚，这个box始终固定在浏览器窗口的最上位置</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box-two</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: tomato;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>确定一个元素的长宽有两种方法，第一种是用 width和height，也是最直接的方法；第二种是利用 left，right，up和bottom，然后将width设置为auto，浏览器会根据left，right的值自动计算宽度。如下面这个例子：</p>
<p>我设置了 左右距离浏览器窗口都为2em长度，然后让width设置为auto,我们看到浏览器自动填充了这个box的宽度</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box-two</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: tomato;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">2em</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">2em</span>;</span><br><span class="line">  <span class="attribute">width</span>: auto;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">99</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/24.png" style="zoom:100%;"></p>
<h3 id="Floating-Elements"><a href="#Floating-Elements" class="headerlink" title="Floating Elements"></a>Floating Elements</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">"tweet"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"avatar"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem, ipsum dolor sit amet.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem, ipsum dolor sit amet.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.avatar</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">5rem</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">5rem</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: gold;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果我们的HTML文件和CSS文件向上面这样，那么结果如下图：文字会另起一行，因为<code>&lt;p&gt;</code>元素是block类型的元素。那么我们怎么做才能将文字放到方块旁边呢？</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/25.png" style="zoom:100%;"></p>
<p>我们可以在 <code>.avatar{}</code>中设置 float元素，<code>float: left;</code></p>
<p>当我们设置了 float为left的时候， 这个元素将会被放置到它后面所有元素的左边，如下图所示：</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/26.png" style="zoom:100%;"></p>
<p>当文字很多的时候，这些文字就会围绕在格子的周围。上面格子和字体之间没有间隔，那么我们可以再加上 <code>margin-right: 0.5rem</code>，效果如下：</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/27.png" style="zoom:100%;"></p>
<p>如果我把 left改成right，那么格子就会处于文字的右边</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/28.png" style="zoom:100%;"></p>
<h4 id="clear-属性"><a href="#clear-属性" class="headerlink" title="clear 属性"></a>clear 属性</h4><p>现在，我想把第二个paragraph移动到方格的下面，也就是跳脱出 float的影响，但是仍然保留第一个paragraph再方格的左边，我们可以这样写：</p>
<p>我们现在html中给 第二个 <code>&lt;p&gt;</code>元素加上一个<code>clear</code>的<code>class</code>属性，然后选中后令 clear的属性为both(这里是比较方便的做法，both包含了left和right，按道理说如果clear属性要和float属性保持一致)</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.avatar</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">5rem</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">5rem</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: gold;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">0.5rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.clear</span> &#123;</span><br><span class="line">  <span class="attribute">clear</span>: both;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/29.png" style="zoom:100%;"></p>
<p>现在我们给article元素添加一个边框，然后删除第二个 <code>&lt;p&gt;</code>元素，我们惊喜地发现效果是这样的</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/30.png" style="zoom:100%;"></p>
<p>现在边框之囊括了 article的子元素 p,但却并没有囊括子元素 div。这是因为 我们设置了 avatar为float element，默认情况下父元素是会忽略floated elements子元素的。因此这个div事实上并不在 article的作用范围之内。我们有好几种解决方法：</p>
<p><strong>1 : 在 <code>&lt;p&gt;</code> 元素之后再加一个div，<code>class</code>属性设为clear</strong> </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">"tweet"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"avatar"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet.<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span> = <span class="string">"clear"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>但这样只是单纯解决了问题，新添加的一行对搜索引擎的搜索工作是没有意义的</p>
<p><strong>2:使用pseudo element</strong></p>
<p>在css中新加上一段话，我们希望在tweet元素之后加上一个空白的content，但这个content默认是 inline的，因此我们还要设置其 display属性为 block， 最后将其clear属性设置为both。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.tweet</span><span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">''</span>;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">clear</span>: both;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>也就是说我们利用css在html中加入了一个 <code>div</code>元素，但这样又不会污染我们的html语言，一举两得。</p>
<p>这种技巧是可以重复使用的，因此我们最好使用一个较为通用的 class名字，一般，这种class被叫做 <code>clearfix</code>,我们需要给article元素第二个class了</p>
<h3 id="FlexBox"><a href="#FlexBox" class="headerlink" title="FlexBox"></a>FlexBox</h3><p>参考博客： <a href="http://caibaojian.com/flexbox-guide.html" target="_blank" rel="noopener">http://caibaojian.com/flexbox-guide.html</a></p>
<p>FlexBox是 Flexible Box Layout 的缩写，中文叫弹性盒子 。旨在提供一个更加有效的方式来布置，对齐和分布在容器之间的各项内容，即使它们的大小是未知或者动态变化的。它比float更加好用。</p>
<p>我们的 HTML如下:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span>A<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span>B<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span>C<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">3px</span> solid lightgrey;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">5rem</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">5rem</span>;</span><br><span class="line">  <span class="attribute">background</span>: gold;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">1rem</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/31.png" style="zoom:100%;"></p>
<h4 id="direction"><a href="#direction" class="headerlink" title="direction"></a>direction</h4><p>现在，我只要在 container中加一句 <code>display: flex</code> 就可以将三个框框由竖直排列转换为横向排列</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/32.png" style="zoom:100%;"></p>
<p>有了flex，我们不用使用float，不用再定义margin种种。是一个很方便的工具。</p>
<p>我们可以使用<code>flex-direction</code> 属性来操控排列的方向，默认为row，还有column，column-reverse(C格子排在最上面)和 row-reverse(如下图：)</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/33.png" style="zoom:100%;"></p>
<ul>
<li>row：横向从左到右排列（左对齐），默认的排列方式。</li>
<li>row-reverse：反转横向排列（右对齐，从后往前排，最后一项排在最前面。</li>
<li>column：纵向排列。</li>
<li>column-reverse：反转纵向排列，从后往前排，最后一项排在最上面。</li>
</ul>
<h4 id="justify-content-作用于父类容器上"><a href="#justify-content-作用于父类容器上" class="headerlink" title="justify-content(作用于父类容器上)"></a>justify-content(作用于父类容器上)</h4><p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/34.png" style="zoom:100%;"></p>
<p><code>justify-content</code>属性可以设置或检索弹性盒子元素在主轴方向上的对齐方式。 其中主轴的方向和direction有关，如上图所示。当弹性盒里一行上的所有子元素都不能伸缩或已经达到其最大值时，这一属性可协助<strong>对多余的空间进行分配</strong>。当元素溢出某行时，这一属性同样会在对齐上进行控制。</p>
<p>这里，我们使用direction : row 的情况来举例</p>
<ul>
<li>flex-start：弹性盒子元素将向<strong>行起始位置对齐</strong>。该行的第一个子元素的主起始位置的边界将与该行的主起始位置的边界对齐，同时所有后续的伸缩盒项目与其前一个项目对齐。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/35.png" style="zoom:100%;"></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">3px</span> solid lightgrey;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: row;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: stretch;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">90vh</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>flex-end：弹性盒子元素将向<strong>行结束位置对齐</strong>。该行的第一个子元素的主结束位置的边界将与该行的主结束位置的边界对齐，同时所有后续的伸缩盒项目与其前一个项目对齐。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/36.png" style="zoom:100%;"></p>
<ul>
<li>center：弹性盒子元素将<strong>向行中间位置对齐</strong>。该行的子元素将相互对齐并在行中居中对齐，同时第一个元素与行的主起始位置的边距等同与最后一个元素与行的主结束位置的边距（如果剩余空间是负数，则保持两端相等长度的溢出）。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/37.png" style="zoom:100%;"></p>
<ul>
<li>space-between：弹性盒子元素会<strong>平均地分布在行里</strong>。如果最左边的剩余空间是负数，或该行只有一个子元素，则该值等效于’flex-start’。在其它情况下，第一个元素的边界与行的主起始位置的边界对齐，同时最后一个元素的边界与行的主结束位置的边距对齐，而剩余的伸缩盒项目则平均分布，并确保两两之间的空白空间相等。简单来说就是<strong>两端顶牢，中间均分</strong>。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/38.png" style="zoom:100%;"></p>
<ul>
<li>space-evenly： 均分，也就是元素与元素之间的距离和元素与边框的距离相等。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/40.png" style="zoom:100%;"></p>
<ul>
<li>space-around：弹性盒子元素会<strong>平均地分布在行里</strong>，两端保留子元素与子元素之间间距大小的一半。如果最左边的剩余空间是负数，或该行只有一个伸缩盒项目，则该值等效于’center’。在其它情况下，伸缩盒项目则平均分布，并确保两两之间的空白空间相等，同时<strong>第一个元素前的空间</strong>以及<strong>最后一个元素后的空间</strong>为<strong>其他空白空间的一半</strong>。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/39.png" style="zoom:100%;"></p>
<h4 id="align-items-作用于父类容器上"><a href="#align-items-作用于父类容器上" class="headerlink" title="align-items(作用于父类容器上)"></a>align-items(作用于父类容器上)</h4><p>设置或检索弹性盒子元素在侧轴 方向上的对齐方式。</p>
<ul>
<li>flex-start：弹性盒子元素的侧轴（纵轴）起始位置的边界紧靠住该行的侧轴（纵轴）起始边界。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/42.png" style="zoom: 50%;"></p>
<ul>
<li>flex-end：弹性盒子元素的侧轴（纵轴）结束位置的边界紧靠住父容器的侧轴结束边界。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/41.png" style="zoom: 50%;"></p>
<ul>
<li>center：弹性盒子元素在该行的侧轴（纵轴）上居中放置。（如果该行的尺寸小于弹性盒子元素的尺寸，则会向两个方向溢出相同的长度）。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/43.png" style="zoom: 50%;"></p>
<ul>
<li>baseline：如弹性盒子元素的行内轴与侧轴为同一条，则该值与’flex-start’等效。其它情况下，该值将参与基线对齐。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/45.png" style="zoom: 100%;"></p>
<ul>
<li>stretch：如果指定侧轴大小的属性值为’auto’，则其值会使项目的边距盒的尺寸尽可能接近所在行的尺寸，但同时会遵照’min/max-width/height’属性的限制。</li>
</ul>
<h4 id="flex-wrap-作用于父类容器上"><a href="#flex-wrap-作用于父类容器上" class="headerlink" title="flex-wrap(作用于父类容器上)"></a>flex-wrap(作用于父类容器上)</h4><ul>
<li>nowrap：当子元素溢出父容器时不换行。如下图所示，如果子元素太多，浏览器就会自动对子元素产生形变，以让其能在一排中放置</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/46.png" style="zoom: 40%;"></p>
<ul>
<li>wrap：当子元素溢出父容器时自动换行。不会对子元素产生形变</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/47.png" style="zoom: 40%;"></p>
<ul>
<li>wrap-reverse：反转 wrap 排列。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/48.png" style="zoom: 40%;"></p>
<h4 id="align-content"><a href="#align-content" class="headerlink" title="align-content"></a>align-content</h4><p>向上面两张图，设置为wrap以后，虽然子元素分成了两行，但是他们的排版方式还是比较不协调，第一排离上边框比较近，第二排离下边框比较近，两排间隔比较远。这时候就要用到 <code>align-content</code>来设置或检索弹性盒堆叠伸缩行的对齐方式</p>
<ul>
<li>flex-start：各行向弹性盒容器的起始位置堆叠。弹性盒容器中第一行的侧轴起始边界紧靠住该弹性盒容器的侧轴起始边界，之后的每一行都紧靠住前面一行。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/49.png" style="zoom: 40%;"></p>
<ul>
<li>flex-end：各行向弹性盒容器的结束位置堆叠。弹性盒容器中最后一行的侧轴起结束界紧靠住该弹性盒容器的侧轴结束边界，之后的每一行都紧靠住前面一行。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/50.png" style="zoom: 40%;"></p>
<ul>
<li>center：各行向弹性盒容器的中间位置堆叠。各行两两紧靠住同时在弹性盒容器中居中对齐，保持弹性盒容器的<strong>侧轴起始内容边界</strong>和<strong>第一行之间的距离</strong>与该容器的<strong>侧轴结束内容边界</strong>与<strong>最后一行之间的距离</strong>相等。（如果剩下的空间是负数，则各行会向两个方向溢出的相等距离。）</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/51.png" style="zoom: 40%;"></p>
<ul>
<li>space-between：各行在弹性盒容器中平均分布。如果剩余的空间是负数或弹性盒容器中只有一行，该值等效于’flex-start’。在其它情况下，<strong>第一行的侧轴起始边界紧靠</strong>住弹性盒容器的<strong>侧轴起始内容边界</strong>，<strong>最后一行的侧轴结束边界紧靠</strong>住弹性盒容器的<strong>侧轴结束内容边界</strong>，剩余的行则按一定方式在弹性盒窗口中排列，以保持两两之间的空间相等。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/52.png" style="zoom: 40%;"></p>
<ul>
<li>space-around：各行在弹性盒容器中平均分布，<strong>两端</strong>保留<strong>子元素与子元素之间间距大小的一半</strong>。如果剩余的空间是负数或弹性盒容器中只有一行，该值等效于’center’。在其它情况下，各行会按一定方式在弹性盒容器中排列，以保持<strong>两两之间的空间相等</strong>，同时<strong>第一行前面</strong>及<strong>最后一行后面</strong>的空间是<strong>其他空间的一半</strong>。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/53.png" style="zoom: 40%;"></p>
<ul>
<li>stretch：各行将会伸展以占用剩余的空间。如果剩余的空间是负数，该值等效于’flex-start’。在其它情况下，剩余空间被所有行平分，以扩大它们的侧轴尺寸。</li>
</ul>
<h4 id="align-self-适用于弹性盒模型子元素"><a href="#align-self-适用于弹性盒模型子元素" class="headerlink" title="align-self (适用于弹性盒模型子元素)"></a>align-self (适用于弹性盒模型子元素)</h4><p>现在我们相对单一的盒子进行操作，我们就可以用align-self属性。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box box-one"</span>&gt;</span>A<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box box-two"</span>&gt;</span>B<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box box-three"</span>&gt;</span>C<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>auto：如果’align-self’的值为’auto’，则其计算值为元素的父元素的’align-items’值，如果其没有父元素，则计算值为’stretch’。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/57.png" style="zoom: 40%;"></p>
<p>这里，我对子元素 boxA进行操作，其父元素 container的align-items为center，因此这里继承了下来</p>
<ul>
<li>flex-start：弹性盒子元素的侧轴（纵轴）起始位置的边界紧靠住该行的侧轴起始边界。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/55.png" style="zoom: 40%;"></p>
<ul>
<li>flex-end：弹性盒子元素的侧轴（纵轴）起始位置的边界紧靠住该行的侧轴结束边界。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/56.png" style="zoom: 40%;"></p>
<ul>
<li>center：弹性盒子元素在该行的侧轴（纵轴）上居中放置。（如果该行的尺寸小于弹性盒子元素的尺寸，则会向两个方向溢出相同的长度）。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/54.png" style="zoom: 40%;"></p>
<ul>
<li><p>baseline：如弹性盒子元素的行内轴与侧轴为同一条，则该值与’flex-start’等效。其它情况下，该值将参与基线对齐。</p>
</li>
<li><p>stretch：如果指定侧轴大小的属性值为’auto’，则其值会使项目的边距盒的尺寸尽可能接近所在行的尺寸，但同时会遵照’min/max-width/height’属性的限制。</p>
</li>
</ul>
<h4 id="flex-basis-适用于弹性盒模型容器子元素"><a href="#flex-basis-适用于弹性盒模型容器子元素" class="headerlink" title="flex-basis (适用于弹性盒模型容器子元素)"></a>flex-basis (适用于弹性盒模型容器子元素)</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flex-basis: &lt;length&gt; | auto (default auto)</span><br></pre></td></tr></table></figure>
<p>这个属性设置或检索弹性盒伸缩基准值，默认为auto</p>
<ul>
<li>auto：无特定宽度值，取决于其它属性值</li>
<li><p><code>&lt;length&gt;</code>：用长度值来定义宽度。不允许负值</p>
</li>
<li><p><code>&lt;percentage&gt;</code>：用百分比来定义宽度。不允许负值</p>
</li>
</ul>
<p>比如说当我设置 <code>flex-basis: 10rem;</code> 的时候，效果如下图所示</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/58.png" style="zoom: 40%;"></p>
<p>作用于宽度的前提是 direction 的值为row，如果direction的值为columns，那么<code>flex-basis</code>就作用域高度上了</p>
<h4 id="flex-grow-适用于弹性盒模型容器子元素"><a href="#flex-grow-适用于弹性盒模型容器子元素" class="headerlink" title="flex-grow (适用于弹性盒模型容器子元素)"></a>flex-grow (适用于弹性盒模型容器子元素)</h4><p>设置或检索弹性盒的<strong>扩展比率</strong>。 根据弹性盒子元素所设置的扩展因子作为比率来分配剩余空间</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">flex-grow</span>: &lt;<span class="selector-tag">number</span>&gt; (<span class="selector-tag">default</span> 0)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>&lt;number&gt;</code>：用数值来定义扩展比率。不允许负值</li>
<li><code>flex-grow</code>的默认值为0，如果没有显示定义该属性，是不会拥有分配剩余空间权利的。 </li>
</ul>
<p>比如说这里有3个boxes，box1的flex-grow = 2，box2、3的flex-grow为1</p>
<p>那么，整一个行的空间就会被均匀分成4份，两份给box1，box2和box3分别得到1份。</p>
<h4 id="flex-shrink"><a href="#flex-shrink" class="headerlink" title="flex-shrink"></a>flex-shrink</h4><p>根据弹性盒子元素所设置的收缩因子作为比率来收缩空间。</p>
<h4 id="flex"><a href="#flex" class="headerlink" title="flex"></a>flex</h4><p>flex就是上面三个属性 flex-grow,flex-shrink,flex-basis三者的集合</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flex：none | [ flex-grow ] || [ flex-shrink ] || [ flex-basis ]</span><br></pre></td></tr></table></figure>
<ul>
<li>none：none关键字的计算值为: 0 0 auto</li>
<li>[ flex-grow ]：定义弹性盒子元素的扩展比率。</li>
<li>[ flex-shrink ]：定义弹性盒子元素的收缩比率。</li>
<li>[ flex-basis ]：定义弹性盒子元素的默认基准值。</li>
</ul>
<h3 id="Grid"><a href="#Grid" class="headerlink" title="Grid"></a>Grid</h3><p>参考博客： <a href="http://www.ruanyifeng.com/blog/2019/03/grid-layout-tutorial.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2019/03/grid-layout-tutorial.html</a></p>
<p>Flex 布局是轴线布局，只能指定”项目”针对轴线的位置，可以看作是<strong>一维布局</strong>。Grid 布局则是将容器划分成”行”和”列”，产生单元格，然后指定”项目所在”的单元格，可以看作是<strong>二维布局</strong>。Grid 布局远比 Flex 布局强大。</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/59.png" style="zoom: 80%;"></p>
<p>一个网格常用的场景就是图片展示：</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/60.png" style="zoom: 80%;"></p>
<h4 id="容器属性-父元素"><a href="#容器属性-父元素" class="headerlink" title="容器属性(父元素)"></a>容器属性(父元素)</h4><p>那么，grid类型的布局需要有哪些结构组成呢？我们可以这样来定义：</p>
<ul>
<li>display：grid</li>
<li>grid-template-rows</li>
<li>grid-template-columns</li>
</ul>
<h5 id="grid-template-rows-columns"><a href="#grid-template-rows-columns" class="headerlink" title="grid-template-rows/columns"></a>grid-template-rows/columns</h5><p>容器指定了网格布局以后，接着就要划分行和列。<code>grid-template-columns</code>属性定义每一列的列宽，<code>grid-template-rows</code>属性定义每一行的行高。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template-rows</span>: <span class="number">100px</span> <span class="number">100px</span> <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">grid-template-columns</span>: <span class="number">100px</span> <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里，我们就制作了一个3行2列的网格。</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/61.png" style="zoom: 80%;"></p>
<p>上面我们使用了绝对单位，事实上我们也可以使用相对单位 <code>%</code>,<code>vh,vw</code>之类的</p>
<p>当然还有一个属性是 <code>grid-template</code>, 可以这样写：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template</span>: <span class="number">100px</span> <span class="number">100px</span> <span class="number">100px</span> / <span class="number">100px</span> <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>repeat()函数</strong></p>
<p>有时候，我们重复写同样的值非常繁琐。这时候就可以使用 <code>repeat()</code>函数，简化重复的值.</p>
<p><code>repeat()</code>接受两个参数，第一个参数是重复的次数，第二个参数是所要重复的值。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template-columns</span>: <span class="built_in">repeat</span>(<span class="number">3</span>, <span class="number">100px</span>);</span><br><span class="line">  <span class="attribute">grid-template-rows</span>: <span class="built_in">repeat</span>(<span class="number">2</span>, <span class="number">100px</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>repeat()</code>重复某种模式也是可以的。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">grid-template-columns</span>: <span class="selector-tag">repeat</span>(2, 100<span class="selector-tag">px</span> 20<span class="selector-tag">px</span> 80<span class="selector-tag">px</span>);</span><br></pre></td></tr></table></figure>
<p> 上面代码定义了6列，第一列和第四列的宽度为<code>100px</code>，第二列和第五列为<code>20px</code>，第三列和第六列为<code>80px</code></p>
<p><strong>fr()</strong></p>
<p>为了方便表示比例关系，网格布局提供了<code>fr</code>关键字（fraction 的缩写，意为”片段”）。如果两列的宽度分别为<code>1fr</code>和<code>2fr</code>，就表示后者是前者的两倍。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template-rows</span>: <span class="built_in">repeat</span>(<span class="number">3</span>,<span class="number">100px</span>);</span><br><span class="line">  <span class="attribute">grid-template-columns</span>: <span class="number">1</span>fr <span class="number">2</span>fr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/71.png" style="zoom: 80%;"></p>
<p><code>fr</code>可以与绝对长度的单位结合使用，这时会比 <code>%</code>更加方便。因为 <code>%</code>是相对于整个 container而言的，而fr是相对于除去绝对长度后，剩余的空间而言的，因而不会发生溢出等现象</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template-rows</span>: <span class="built_in">repeat</span>(<span class="number">3</span>,<span class="number">100px</span>);</span><br><span class="line">  <span class="attribute">grid-template-columns</span>: <span class="number">100px</span> <span class="number">1</span>fr <span class="number">2</span>fr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/72.png" style="zoom: 80%;"></p>
<p>这里，第一列宽度为100px，第三列是第二列宽度的两倍。</p>
<p><strong>auto关键词</strong></p>
<p><code>auto</code>关键字表示由浏览器自己决定长度。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">grid-template-columns</span>: 100<span class="selector-tag">px</span> <span class="selector-tag">auto</span> 100<span class="selector-tag">px</span>;</span><br></pre></td></tr></table></figure>
<p>上面代码中，第二列的宽度，基本上等于该列单元格的最大宽度，除非单元格内容设置了<code>min-width</code>，且这个值大于最大宽度。这样当浏览器窗口变化的时候，第一列和第三列都不会发生变化，但是第二列的宽度会随之变化。</p>
<h5 id="justify-items-align-items属性"><a href="#justify-items-align-items属性" class="headerlink" title="justify-items align-items属性"></a>justify-items align-items属性</h5><p><code>justify-items</code>属性设置<strong>单元格内容的</strong>水平位置（左中右），<code>align-items</code>属性设置<strong>单元格内容</strong>的垂直位置（上中下），都作用于<strong>父元素上</strong>和flexbox中有点类似</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">justify-items</span>: start | end | center | stretch;</span><br><span class="line">  <span class="attribute">align-items</span>: start | end | center | stretch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>start：对齐单元格的起始边缘。</li>
</ul>
<p>二者都取 start的时候，效果如图：</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/62.png" style="zoom: 80%;"></p>
<ul>
<li>end：对齐单元格的结束边缘。</li>
</ul>
<p>二者取end时：</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/63.png" style="zoom: 80%;"></p>
<ul>
<li>center：单元格内部居中。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/64.png" style="zoom: 80%;"></p>
<ul>
<li>stretch：拉伸，占满单元格的整个宽度（默认值）。</li>
</ul>
<p>还有 <code>place-items</code> 属性，是二者的合并简写模式：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">place-items</span>: &lt;<span class="selector-tag">align-items</span>&gt; &lt;<span class="selector-tag">justify-items</span>&gt;;</span><br></pre></td></tr></table></figure>
<h5 id="justify-content-align-content-属性"><a href="#justify-content-align-content-属性" class="headerlink" title="justify-content  align-content 属性"></a>justify-content  align-content 属性</h5><p><code>justify-content</code>属性是<strong>整个内容区域</strong>在容器里面的水平位置（左中右）</p>
<p><code>align-content</code>属性是<strong>整个内容区域</strong>的垂直位置（上中下）。</p>
<ul>
<li>start 对齐容器的起始边框。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/65.png" style="zoom: 50%;"></p>
<ul>
<li>end 对齐容器的结束边框。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/66.png" style="zoom: 50%;"></p>
<ul>
<li>center 容器内部居中。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/67.png" style="zoom: 50%;"></p>
<ul>
<li>stretch 项目大小没有指定时(未设置长宽)，拉伸占据整个网格容器。 </li>
<li>space-around 每个项目两侧的间隔相等。所以，项目之间的间隔比项目与容器边框的间隔大一倍。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/68.png" style="zoom: 50%;"></p>
<ul>
<li>space-between  项目与项目的间隔相等，项目与容器边框之间没有间隔。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/69.png" style="zoom: 50%;"></p>
<ul>
<li>space-evenly项目与项目的间隔相等，项目与容器边框之间也是同样长度的间隔。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/70.png" style="zoom: 50%;"></p>
<p><code>place-content</code>属性则是<code>align-content</code>属性和<code>justify-content</code>属性的合并简写形式。</p>
<h5 id="row-gap-column-gap属性"><a href="#row-gap-column-gap属性" class="headerlink" title="row-gap column-gap属性"></a>row-gap column-gap属性</h5><p> <code>row-gap</code>属性设置行与行的间隔（行间距）， <code>column-gap</code>属性设置列与列的间隔（列间距）。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.container &#123;</span><br><span class="line">  display: grid;</span><br><span class="line">  grid-template: 100px auto 100px&#x2F;30fr 70fr;</span><br><span class="line">  row-gap: 10px;</span><br><span class="line">  column-gap: 10px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>中间深颜色的区域就是各个grid之间的gap间隙。</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/73.png" style="zoom: 50%;"></p>
<p><code>gap</code>属性是<code>grid-column-gap</code>和<code>grid-row-gap</code>的合并简写形式，语法如下。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">gap</span>: &lt;<span class="selector-tag">row-gap</span>&gt; &lt;<span class="selector-tag">column-gap</span>&gt;;</span><br></pre></td></tr></table></figure>
<p>当然如果我们省略了第二个值，浏览器会默认第二个值等于第一个值</p>
<h4 id="项目属性-子元素"><a href="#项目属性-子元素" class="headerlink" title="项目属性(子元素)"></a>项目属性(子元素)</h4><h5 id="grid-column-grid-row"><a href="#grid-column-grid-row" class="headerlink" title="grid-column grid-row"></a>grid-column grid-row</h5><p><code>grid-column</code>属性是<code>grid-column-start</code>和<code>grid-column-end</code>的合并简写形式，<code>grid-row</code>属性是<code>grid-row-start</code>属性和<code>grid-row-end</code>的合并简写形式。</p>
<p>首先我们看dev-tool中的网格线。正常情况下，<code>n</code>行有<code>n + 1</code>根水平网格线，<code>m</code>列有<code>m + 1</code>根垂直网格线，比如三行就有四根水平网格线。</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/74.png" style="zoom: 70%;"></p>
<p>那么<code>grid-column</code>和<code>grid-row</code>中的两个值就代表了起始网格线和结束网格线。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box-one</span> &#123;</span><br><span class="line">  <span class="attribute">grid-column</span>: &lt;start-line&gt; / &lt;end-line&gt;;</span><br><span class="line">  <span class="attribute">grid-row</span>: &lt;start-line&gt; / &lt;end-line&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box-one</span> &#123;</span><br><span class="line">  <span class="attribute">grid-column</span>: <span class="number">1</span> / <span class="number">3</span>;</span><br><span class="line">  <span class="attribute">grid-row</span>: <span class="number">1</span> / <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 等同于 */</span></span><br><span class="line"><span class="selector-class">.box-one</span>&#123;</span><br><span class="line">  <span class="attribute">grid-column-start</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">grid-column-end</span>: <span class="number">3</span>;</span><br><span class="line">  <span class="attribute">grid-row-start</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">grid-row-end</span>: <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当然，也可以取负值， -1就代表最后一行，-2代表倒数第二行以此类推</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box-one</span>&#123;</span><br><span class="line">  <span class="attribute">grid-column</span>: <span class="number">1</span> / -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/75.png" style="zoom: 70%;"></p>
<p>这两个属性之中，也可以使用<code>span</code>关键字，表示跨越多少个网格。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box-one</span>&#123;</span><br><span class="line">  <span class="attribute">grid-column</span>: <span class="number">1</span> / <span class="number">3</span>;</span><br><span class="line">  <span class="attribute">grid-row</span>: <span class="number">1</span> / <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 等同于 */</span></span><br><span class="line"><span class="selector-class">.box-one</span> &#123;</span><br><span class="line">  <span class="attribute">grid-column</span>: <span class="number">1</span> / span <span class="number">2</span>;</span><br><span class="line">  <span class="attribute">grid-row</span>: <span class="number">1</span> / span <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>grid-row 确定了这个子元素可以处于网格中的第几行</p>
<p>最后，斜杠以及后面的部分可以省略，默认跨越一个网格。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box-one</span> &#123;</span><br><span class="line">  <span class="attribute">grid-column</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">grid-row</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="grid-area-grid-template-areas"><a href="#grid-area-grid-template-areas" class="headerlink" title="grid-area grid-template-areas"></a>grid-area grid-template-areas</h5><p><code>grid-area</code> 属性指定项目放在哪一个区域。</p>
<p>但首先我们需要定义这些区域,这就需要用到 <code>grid-template-areas</code>这个属性了,这个属性作用于父元素，因此我们在container中定义</p>
<p>因为我们总共定义了一个3行2列的网格，因此在写 <code>grid-template-areas</code>的时候也要写3X2的样式。如下图所示。如果两个单元格的名字相同，那么当我们分配时就会自动将其连在一起。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template</span>: <span class="number">100px</span> auto <span class="number">100px</span>/<span class="number">30</span>fr <span class="number">70</span>fr;</span><br><span class="line">  <span class="attribute">row-gap</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">column-gap</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">3px</span> solid lightgrey;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">90vh</span>;</span><br><span class="line">  <span class="attribute">grid-template-areas</span>: </span><br><span class="line">  <span class="string">"header header"</span> </span><br><span class="line">  <span class="string">"sidebar main"</span></span><br><span class="line">  <span class="string">"footer footer"</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面代码中，顶部是页眉区域<code>header</code>，底部是页脚区域<code>footer</code>，中间部分则为<code>main</code>和<code>sidebar</code>。</p>
<p>现在我们为格子A和D分配区域</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box-one</span> &#123;</span><br><span class="line">  <span class="attribute">grid-area</span>: header;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box-four</span> &#123;</span><br><span class="line">  <span class="attribute">grid-area</span>: footer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>效果如下图所示：</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/77.png" style="zoom: 70%;"></p>
<p>如果某些区域不需要利用，则使用”点”（<code>.</code>）表示。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">grid-template-areas</span>: </span><br><span class="line">"<span class="selector-tag">header</span> <span class="selector-tag">header</span>" </span><br><span class="line">"<span class="selector-tag">sidebar</span> <span class="selector-tag">main</span>"</span><br><span class="line">". <span class="selector-tag">footer</span>" ;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/78.png" style="zoom: 70%;"></p>
<p><code>grid-area</code>属性还可用作<code>grid-row-start</code>、<code>grid-column-start</code>、<code>grid-row-end</code>、<code>grid-column-end</code>的合并简写形式，直接指定项目的位置。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">grid-area</span>: &lt;row-start&gt; / &lt;column-start&gt; / &lt;row-end&gt; / &lt;column-end&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>比如说我定义 <code>grid-area: 2/2/3/3</code>,那么A元素就会到第二行二列的那个格子去了</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box-one</span>&#123;</span><br><span class="line">  <span class="attribute">grid-area</span>: <span class="number">2</span>/<span class="number">2</span>/<span class="number">3</span>/<span class="number">3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/76.png" style="zoom: 70%;"></p>
<h5 id="justify-self-align-self"><a href="#justify-self-align-self" class="headerlink" title="justify-self align-self"></a>justify-self align-self</h5><p><code>justify-self</code>属性设置单元格内容的水平位置（左中右），跟<code>justify-items</code>属性的用法完全一致，但只作用于单个项目。</p>
<p><code>align-self</code>属性设置单元格内容的垂直位置（上中下），跟<code>align-items</code>属性的用法完全一致，也是只作用于单个项目。</p>
<p>用法也一样，都是四种取值</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">justify-self</span>: start | end | center | stretch;</span><br><span class="line">  <span class="attribute">align-self</span>: start | end | center | stretch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Hiding Elements</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span> = <span class="string">"box first"</span>&gt;</span>Box1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span> = <span class="string">"box"</span>&gt;</span>Box2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/79.png"></p>
<p>现在我们有这样一个html文件，我想隐藏 第一个 <code>&lt;div&gt;</code>元素，怎么办？有两种方法,但二者有点区别</p>
<p>第一种是使用<code>display</code>属性</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.first</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样写的结果就是第一个<code>&lt;div&gt;</code>元素所占的位置都会被隐藏，因此现在Second在第一排上。</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/80.png"></p>
<p>第二种是设置<code>visibility</code>属性,将其设置为 hidden，与visible相对。虽然Box1看不见，但是其所在的div元素仍然保留着</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.first &#123;</span><br><span class="line">  visibility: hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/81.png"></p>
<h3 id="Media-Queries"><a href="#Media-Queries" class="headerlink" title="Media Queries"></a>Media Queries</h3><p>最后我们来讲Media Queries，这能让我们的HTML网页在不同的设备上显示不同的样式</p>
<p>首先我们要决定是以电脑页面优先还是移动设备页面优先，不同的项目有着不同的需求。一般来说，很多人喜欢先开发移动设备优先。因为如果线开发电脑页面，再移植到移动设备上需要调整很多很多东西</p>
<p>拿一个很小的例子来说，我们希望两块文字，在手机这类宽度比较窄的屏幕上显示为竖直排列，而在电脑，平板这类比较宽的屏幕上为水平排列。那么我们就需要设置一个 breakpoint，也就是说当宽度大于这个breakpoint的时候，div元素的排列会从原来的竖直排列转换为水平排列。</p>
<p>那么用CSS怎么实现这一点？</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: gold;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">1rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box</span><span class="selector-pseudo">:nth-of-type(2)</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: dodgerblue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width:</span> <span class="number">768px</span>)  &#123;</span><br><span class="line">  <span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: row;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: white;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在这里，我们使用 <code>@media screen</code>，and后面加上限定条件，需要用小括号，括号中使用min-width属性。  也就是说在花括号中写上当宽度大于min-width时的css样式。浏览器会自动检测，并在符合条件的时候将花括号中的CSS覆盖之前写的CSS。</p>
<p>效果：</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/1.gif"></p>
<p>参考标准如下:</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/83.png"></p>
<p>我们还可以一直and+新的条件 ，下面意思是说当screen的大小在 768和 1000之间的时候，采用这段css</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width:</span> <span class="number">768px</span>) <span class="keyword">and</span> (<span class="attribute">max-width:</span> <span class="number">1000px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: row;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>此外，我们还可以对打印机进行设置。因为显示器(screen)和打印机(printer)是两种差别很大的设备,所以从浏览器里看到的页面,打印出来也许和你看到的样子有很大的差距。</p>
<p>screen一般使用逻辑单位比如px,而打印机则应该使用物理单位比如cm或in。我们常见的A4纸张大小在不同DPI的显示器上显示的大小是不同的。因此如果要精确的控制打印效果就应该使用print<br>css，这是跨平台兼容的标准。</p>
<p>举例如下：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@media</span> print&#123;</span><br><span class="line">  <span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>:<span class="number">12pt</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.box</span>&#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0.5cm</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h3><p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/84.png"><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/85.png"></p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/86.png"></p>
<h4 id="CheatSheet"><a href="#CheatSheet" class="headerlink" title="CheatSheet"></a>CheatSheet</h4><p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/87.png"></p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/88.png"></p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/89.png"></p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/90.png"></p>
<h2 id="Exercise"><a href="#Exercise" class="headerlink" title="Exercise"></a>Exercise</h2><h3 id="Navigation-Bar"><a href="#Navigation-Bar" class="headerlink" title="Navigation Bar"></a>Navigation Bar</h3><p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/91.png" style="zoom: 67%;"></p>
<h4 id="提示与要求"><a href="#提示与要求" class="headerlink" title="提示与要求"></a>提示与要求</h4><p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/92.png"></p>
<p>html文件如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"./css/normalize.css"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"./css/navbar.css"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">"nav"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span> <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"1"</span>&gt;</span>About<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"2"</span>&gt;</span>Courses<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"3"</span>&gt;</span>Forum<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"4"</span>&gt;</span>Learning Paths<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"5"</span>&gt;</span>Contact<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>css如下：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">62.5%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: Arial, Helvetica, sans-serif;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.6rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">nav</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#000</span>;</span><br><span class="line">  <span class="attribute">padding</span>: .<span class="number">7rem</span>;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">nav</span> <span class="selector-tag">ul</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">list-style-type</span>: none;<span class="comment">/*把列表的标识符(点)去掉*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">nav</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: .<span class="number">5rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">nav</span> <span class="selector-tag">a</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">  <span class="attribute">text-decoration</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width:</span> <span class="number">768px</span>) &#123;</span><br><span class="line">  <span class="selector-tag">nav</span> <span class="selector-tag">ul</span> &#123;</span><br><span class="line">    <span class="attribute">flex-direction</span>: row; <span class="comment">/*当宽大于768px，排布变为横状*/</span></span><br><span class="line">    <span class="attribute">justify-content</span>: flex-end; </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">nav</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">1rem</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Photo-Gallery"><a href="#Photo-Gallery" class="headerlink" title="Photo Gallery"></a>Photo Gallery</h3><p>效果图：</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/93.png" style="zoom:67%;"></p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/94.png" style="zoom:67%;"></p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/95.png"></p>
<p>Html:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Photo Gallery<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/normalize.css"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/styles.css"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"gallery"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://source.unsplash.com/collection/190727/800x600?1"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://source.unsplash.com/collection/190727/800x600?2"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://source.unsplash.com/collection/190727/800x600?3"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://source.unsplash.com/collection/190727/800x600?4"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://source.unsplash.com/collection/190727/800x600?5"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://source.unsplash.com/collection/190727/800x600?6"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://source.unsplash.com/collection/190727/800x600?7"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://source.unsplash.com/collection/190727/800x600?8"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://source.unsplash.com/collection/190727/800x600?9"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>对于这题，我一开始想的思路是在最窄的时候使用flex，其余的时候用的是grid，其实没必要。都用grid就可以。此外，在<code>div</code>中可以直接引入<code>&lt;img&gt;</code> ，而一开始我想的是在<code>&lt;div&gt;</code>中填入<code>&lt;img&gt;</code>。所以css可以写的很简单：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.gallery</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-gap</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.gallery</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">object-fit</span>: cover;	<span class="comment">/* 对图片进行剪切，保留原始比例 */</span></span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;				<span class="comment">/* 宽度始终填满 */</span></span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width:</span> <span class="number">768px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.gallery</span> &#123;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>: <span class="built_in">repeat</span>(<span class="number">2</span>, <span class="number">1</span>fr);	<span class="comment">/* 两列，每列占一半*/</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width:</span> <span class="number">1024px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.gallery</span> &#123;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>: <span class="built_in">repeat</span>(<span class="number">3</span>, <span class="number">1</span>fr); <span class="comment">/* 三列 */</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.gallery</span> <span class="selector-tag">img</span><span class="selector-pseudo">:nth-of-type(3)</span> &#123;<span class="comment">/*采用nth-child方法选择第三个img*/</span></span><br><span class="line">    <span class="attribute">grid-column</span>: <span class="number">2</span> / <span class="number">4</span>;</span><br><span class="line">    <span class="attribute">grid-row</span>: <span class="number">1</span> / <span class="number">3</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/%5Bobject%20Object%5D">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/" itemprop="url">HTMLandCSS基础1</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2021-01-25T16:40:53+08:00">
                2021-01-25
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2025-04-09T23:25:30+08:00">
                2025-04-09
              </time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="HTMLandCSS基础1"><a href="#HTMLandCSS基础1" class="headerlink" title="HTMLandCSS基础1"></a>HTMLandCSS基础1</h1><p>我们使用的编辑器是VSCode，需要装prettier和Live Server这两个插件。</p>
<h2 id="HTML-Basics"><a href="#HTML-Basics" class="headerlink" title="HTML Basics"></a>HTML Basics</h2><h3 id="The-Head-Section"><a href="#The-Head-Section" class="headerlink" title="The Head Section"></a>The Head Section</h3><p>在vscode中，只要敲 <code>!+Tab</code> 就可以打出html文件的基本框架</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p> 我们看到一个html是由head部分、body部分组成的。在Head Section当中，有 <code>&lt;meta&gt;</code>标签和<code>&lt;title&gt;</code> 标签。meta标签中，会使用name属性来定义一个HTML文档的描述、关键词、作者等信息。比如说：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--charset是这个html文件的编码格式，比如ASCII,gbk,UTF-8等--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--这个属性规定了初始用户界面的一些特性，</span></span><br><span class="line"><span class="comment">	有了这个属性，我们的页面就能在不同设备上都能正常显示--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--description属性规定页面的描述。搜索引擎会把这个描述显示在搜索结果当中--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"description"</span> <span class="attr">content</span>=<span class="string">"Free Web tutorials"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--keywords属性就是这个文件中的关键词,告诉搜索引擎页面是与什么相关的--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"keywords"</span> <span class="attr">content</span>=<span class="string">"HTML,CSS,JavaScript"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--规定文档的作者的名字--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"author"</span> <span class="attr">content</span>=<span class="string">"Hege Refsnes"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>description标签后面的内容就是网页中的缩略信息，如下图所示：</p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/1.png" style="zoom:80%;"></p>
<h3 id="Text"><a href="#Text" class="headerlink" title="Text"></a>Text</h3><p>现在我们研究一下body中的文本。</p>
<p><code>&lt;p&gt;&lt;/p&gt;</code> 是paragraph的意思，我们可以把一段文字放到里面，比如说：</p>
<p><code>&lt;p&gt;I love to teach you &lt;strong&gt;HTML&lt;/strong&gt;!&lt;/p&gt;</code></p>
<p>这里，我们可以把需要强调的部分用 <code>&lt;strong&gt;&lt;/strong&gt;</code> 标签囊括起来，效果为加重；还可以用<code>&lt;i&gt;&lt;/i&gt;</code>，效果为斜体。不过这些CSS都能做，因此能用CSS做的尽量不要用HTML。比如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    strong &#123;</span><br><span class="line">      color: red;</span><br><span class="line">      font-style: normal;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>I love to teach you <span class="tag">&lt;<span class="name">strong</span>&gt;</span>HTML<span class="tag">&lt;/<span class="name">strong</span>&gt;</span>!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>还有 <code>h1,h2,h3,h4,h5,h6</code> 六级heading标签。其显示效果如下：</p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/2.png" style="zoom:80%;"></p>
<p>其中，<code>&lt;h1&gt;&lt;/h1&gt;</code>标签只能有一个，虽然html也能显示，但是会干扰到搜索引擎的检索</p>
<h3 id="Entities"><a href="#Entities" class="headerlink" title="Entities"></a>Entities</h3><p>在编写HTML页面时，需要用到”&lt;”、”&gt;”、”空格”等符号，直接输入这些符号时，会错误的把它们与标记混在一起，非常不利于编码。</p>
<p>那么就需要把这些字符进行转义，以另一种方式抒写，以相同的形式展现。</p>
<p>在HTML中，这些字符可称为HTML Entity，即HTML 字符实体。一个HTML Entity都含有2种转义格式：Entity Name 和 Entity Number。</p>
<h4 id="Entity-Name"><a href="#Entity-Name" class="headerlink" title="Entity Name"></a>Entity Name</h4><p><strong>格式</strong>： &entityName; </p>
<p><strong>说明</strong>：”<strong>&amp;</strong>“开头，”<strong>;</strong>“结尾，以<strong>语义</strong>的形式描述字符。如字符”&lt;”，英文名称为”less than”，Entity Name为”&lt;”，取自”less than”2个单词的首字母。</p>
<h4 id="Entity-Number"><a href="#Entity-Number" class="headerlink" title="Entity Number"></a>Entity Number</h4><p><strong>格式</strong>： &#entityNumber; </p>
<p><strong>说明</strong>：”<strong>&amp;#</strong>“开头，”<strong>;</strong>“结尾，以<strong>编号</strong>的形式描述字符。此编号可以为十进制或十六进制(以”<strong>&amp;#x</strong>“开头)等数字格式。</p>
<p>比如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>I love to teach you <span class="symbol">&amp;lt;</span>HTML<span class="symbol">&amp;gt;</span>!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>效果如下</p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/3.png" style="zoom:80%;"></p>
<p>又比如 版权符号 的Entity Name为 <code>&amp;copy;</code></p>
<p>我们只要记住一些常用的转义符，比如说 <code>&amp;nbsp;</code> () 这代表了一个空格，在html中，如果我们直接打10个空格，那么页面中也只显示1个空格，但是如果打10个<code>&amp;nbsp</code>,那么就可以在页面中显示10个空格。</p>
<p>比如说这种情况，也需要用 <code>&amp;nbsp;</code></p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/4.png" style="zoom:80%;"></p>
<p>我们发现下一句句子的开头dicta 和iusto 两个词换行了，我们不希望它们在不同行，因此我们可以将它们之间的空格改为<code>&amp;nbsp;</code>，出来的效果如下：</p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/5.png" style="zoom:80%;"></p>
<p>更多字符对照表可以参考：</p>
<p><a href="https://dev.w3.org/html5/html-author/charref" target="_blank" rel="noopener">https://dev.w3.org/html5/html-author/charref</a></p>
<p>或者</p>
<p><a href="https://www.freeformatter.com/html-entities.html" target="_blank" rel="noopener">https://www.freeformatter.com/html-entities.html</a></p>
<h3 id="Hyperlinks"><a href="#Hyperlinks" class="headerlink" title="Hyperlinks"></a>Hyperlinks</h3><p>如果我们要在文本中显示超链接，可以使用<code>&lt;a href=&quot;&quot;&gt;&lt;/a&gt;</code> 这一对标签。在这个标签中我们既可以使用文字，也可以使用图片。当我们点击的时候就会跳转到我们定位的网页上去。</p>
<p><code>href = &quot;&quot;</code> 中填写的是网页的相对地址或者是绝对地址。这里举的例子是相对地址，我们链接到的网站时company文件夹下的about页</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"company/about.html"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/1.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>同时，我们也可以在about页面上加一个链接到index页的链接</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"../index.html"</span>&gt;</span>Home Page<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>上面用的都是相对URL，那么我们怎么用绝对URL来链接呢？</p>
<p>就是把斜杠放在最前面，如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/index.html"</span>&gt;</span>Home Page<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>除了链接到网页之外，我们也可以链接到图片，比如：</p>
<p><code>&lt;a href=&quot;images/1.jpg&quot; download&gt; Coffee Shop &lt;/a&gt;</code></p>
<p> 那么，我们怎么做一个页内链接呢？我们可以在标签后面加一个 <code>id = &#39;section-css&#39;</code>,然后定义一个超链接 <code>&lt;a href=&quot;#section-css&quot;&gt;CSS&lt;/a&gt;</code> ,这样当我们点击CSS的时候，就会自动跳到 <code>id=section-css</code>的那个标签去了。</p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/6.png" style="zoom:80%;"></p>
<p>那么我们读完以后，怎么回到页首去？</p>
<p>在#后面什么都不加即可</p>
<p><code>&lt;a href=&quot;#&quot;&gt;Jump to the top&lt;/a&gt;</code></p>
<p>如果我们要链接到谷歌的官网，那么我们该怎么写？直接写网址即可</p>
<p><code>&lt;a href=&quot;https://google.com&quot;&gt;Google&lt;/a&gt;</code></p>
<p>但是如果这样写，是在原来的页面直接跳转的，因此如果我们希望链接能新建一页，我们可以这样写：</p>
<p><code>&lt;a href=&quot;https://google.com&quot; target =&quot;_blank&quot;&gt;Google&lt;/a&gt;</code></p>
<p>我们还可以利用 <code>&lt;a&gt;</code> 标签来定位自己的邮箱</p>
<p><code>&lt;a href=&quot;mailto:10195501423@stu.ecnu.edu.cn&quot;&gt;Email Me&lt;/a&gt;</code>‘</p>
<p>这样，点击Email Me的时候，就会跳转到给我发送邮件的页面。</p>
<h3 id="Images"><a href="#Images" class="headerlink" title="Images"></a>Images</h3><p>如果要插入图片，我们可以使用 <code>&lt;img&gt;</code>标签，注意<code>&lt;img&gt;</code>标签是相对的。</p>
<p><code>&lt;img src=&quot;images/coffee.jpg&quot; alt=&quot;Latte on a table&quot;&gt;</code></p>
<p>其中，src代表了图片的路径，alt属性是当图片因故障显示不出来的时候展示的替换文字。</p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/7.png" style="zoom:80%;"></p>
<p>我们可以用 CSS 来对我们照片的大小等进行修改。比如说上图，我设置了两个图片的属性：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">  img &#123;</span><br><span class="line">    width: 300px;</span><br><span class="line">    border-radius: 10px;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>其中width代表宽度而border-radius代表了边角弧形的半径。这里我设置了10px。因此看起来图片的四个边角是圆形弧线的。</p>
<p>但是我如果设置 宽和高都是300px，那么图片就会形变失真，如下图所示：</p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/9.png" style="zoom:80%;"></p>
<p>为了解决这个问题，我们可以再加一行代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">   img &#123;</span><br><span class="line">     width: 300px;</span><br><span class="line">     height: 300px;</span><br><span class="line">     object-fit: cover;</span><br><span class="line">     border-radius: 10px;</span><br><span class="line">   &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这样虽然会导致裁切掉了图片的一部分，但是图片中的物体都不会发生形变，如下图所示：</p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/10.png" style="zoom:80%;"></p>
<p><code>object-fit</code>属性：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">值</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>fill</code></td>
<td style="text-align:left">默认，不保证保持原有的比例，内容拉伸填充整个内容容器。</td>
</tr>
<tr>
<td style="text-align:left"><code>contain</code></td>
<td style="text-align:left">保持原有尺寸比例。内容被缩放。</td>
</tr>
<tr>
<td style="text-align:left"><code>cover</code></td>
<td style="text-align:left">保持原有尺寸比例。但部分内容可能被剪切。</td>
</tr>
<tr>
<td style="text-align:left"><code>none</code></td>
<td style="text-align:left">保留原有元素内容的长度和宽度，也就是说内容不会被重置。</td>
</tr>
<tr>
<td style="text-align:left"><code>scale-down</code></td>
<td style="text-align:left">保持原有尺寸比例。内容的尺寸与 none 或 contain 中的一个相同，取决于它们两个之间谁得到的对象尺寸会更小一些。</td>
</tr>
</tbody>
</table>
</div>
<h3 id="Video-and-Audio"><a href="#Video-and-Audio" class="headerlink" title="Video and Audio"></a>Video and Audio</h3><p>如果我们要在页面中插入视频音频，我们可以使用 <code>&lt;video&gt;&lt;/video&gt;</code>和<code>&lt;audio&gt;&lt;/audio&gt;</code>标签。</p>
<p>比如：</p>
<p><code>&lt;video src=&quot;videos/ocean.mp4&quot; controls autoplay loop&gt;您的浏览器不支持播放视频&lt;/video&gt;</code></p>
<p>在标签中我们还添加了一些属性：</p>
<p>controls  属性供添加播放、暂停和音量控件</p>
<p>autoplay 打开网页视频就会自动播放</p>
<p>loop        视频循环播放</p>
<p>当我们的浏览器不支持播放视频的时候，就会显示video标签中的文字了。</p>
<p>同理，音频也是一样的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;audio controls&gt;</span><br><span class="line">  &lt;source src&#x3D;&quot;horse.ogg&quot; type&#x3D;&quot;audio&#x2F;ogg&quot;&gt;</span><br><span class="line">  &lt;source src&#x3D;&quot;horse.mp3&quot; type&#x3D;&quot;audio&#x2F;mpeg&quot;&gt;</span><br><span class="line">您的浏览器不支持 audio 元素。</span><br><span class="line">&lt;&#x2F;audio&gt;</span><br></pre></td></tr></table></figure>
<p><code>&lt;audio&gt;</code>元素允许使用多个  <code>&lt;source&gt;</code>元素.  <code>&lt;source&gt;</code> 元素可以链接不同的音频文件，浏览器将使用第一个支持的音频文件</p>
<h3 id="Lists"><a href="#Lists" class="headerlink" title="Lists"></a>Lists</h3><p>一共有三种列表。</p>
<h4 id="ul"><a href="#ul" class="headerlink" title="ul"></a>ul</h4><p>这种是unordered list的简称，也就是列表中的元素是没有顺序的。常常用在导航栏中</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>About me<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>Courses<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>Subscribe<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>Contact me<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>如果我们不利用任何CSS，那么出来的效果如下：</p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/11.png"></p>
<p>我们可以利用CSS对前面的标记符进行修改，可以让其变成方块或者隐藏</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ul</span> &#123;</span><br><span class="line">      <span class="attribute">list-style-type</span>: <span class="built_in">none</span>(square);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>此外，我们还可以做嵌套的列表,效果如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span>About me<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span>Courses</span><br><span class="line">     <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">li</span>&gt;</span>HTML<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">li</span>&gt;</span>JavaScript<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">li</span>&gt;</span>Git<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span>Subscribe<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span>Contact me<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/12.png"></p>
<h4 id="ol"><a href="#ol" class="headerlink" title="ol"></a>ol</h4><p>ol是ordered list的缩写，也就是有序列表</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>Preheat the oven.<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>Place the ingridents on the crust.<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>put the pizza in the oven for 20 minutes.<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/13.png"></p>
<h4 id="dl"><a href="#dl" class="headerlink" title="dl"></a>dl</h4><p>dl 是 description list的缩写，顾名思义，就是对某些标签进行描述的列表。</p>
<p>在dl中， dt代表了term，也就是被描述的对象；dd代表了detail，也就是描述term的具体信息。 </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dl</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dt</span>&gt;</span>HTML<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dd</span>&gt;</span>Hypertext Markup Language<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dt</span>&gt;</span>CSS<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dd</span>&gt;</span>Cascading Stylesheets<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/14.png"></p>
<p>对于一个term可以有多个detail信息</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dl</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dt</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dd</span>&gt;</span>The Ultimate HTML and CSS Course<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dt</span>&gt;</span>Author<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dd</span>&gt;</span>Mosh Hamedani<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dt</span>&gt;</span>Skills<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dd</span>&gt;</span>HTML<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CSS<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dd</span>&gt;</span>Responsive Design<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dd</span>&gt;</span>Search Engine Optimisation<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/15.png"></p>
<h3 id="Tables"><a href="#Tables" class="headerlink" title="Tables"></a>Tables</h3><p>如果我们要在页面中使用表格，可以使用 <code>&lt;table&gt;&lt;/table&gt;</code> 标签。</p>
<p>最简单的表格可以这样表示：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>Marketing<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>$100<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>Accounting<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>$200<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/16.png"></p>
<p>但是这样一点都不像个表格，我们可以对其添加边框：这里，我们对table和td都进行css操作，否则就只有外边框，没有内边框。</p>
<p>在border属性，我们要设置3个值，分别是边框的宽度、边框的实虚(solid,dashed)、边框的颜色</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">     table,</span><br><span class="line">     td &#123;</span><br><span class="line">       border: 1px solid grey;</span><br><span class="line">     &#125;</span><br><span class="line">   <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/17.png"></p>
<p>但是这样的表格不是很好看，我们需要的并不是这种中空的边框，而且我希望表格中的文字距离边框远一点，那么我们可以这样来设置：</p>
<p>其中， border-collapse属性是将边框取消中空。padding则是设置表格中的文字和边框的距离</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">  table,</span><br><span class="line">  td &#123;</span><br><span class="line">    border: 1px solid grey;</span><br><span class="line">    border-collapse: collapse;</span><br><span class="line">    padding: 5px;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/18.png"></p>
<p>如果我们要给表格设置一个头部，那么我们可以用 <code>th</code>标签：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>Category<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>Amount<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>Marketing<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>$100<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>Accounting<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>$200<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/19.png"></p>
<p>但是这样来定义一个表格，还不是特别完善，我们需要再用 <code>&lt;thead&gt;</code>和<code>&lt;tbody&gt;</code>来标明 ：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">th</span>&gt;</span>Category<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">th</span>&gt;</span>Amount<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>Marketing<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>$100<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>Accounting<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>$200<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>如果我想合并单元格，我们可以加一个<code>colspan</code>属性</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">th</span> <span class="attr">colspan</span>=<span class="string">"2"</span>&gt;</span>Expenses<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/20.png"></p>
<p>除了 <code>thead</code>,<code>tbody</code>之外，我们还可以有 <code>tfoot</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tfoot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">th</span>&gt;</span>Total<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">th</span>&gt;</span>$300<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tfoot</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/21.png" style="zoom:80%;"></p>
<p>thead,tfoot 和tbody之间有两个区别：</p>
<ol>
<li>前者都是加粗的，后者没有</li>
<li>前者是居中的，后者是向左对齐的</li>
</ol>
<p>如果我们要设置tfoot向左对齐，可以用css：只要在text-align中设置left就行了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tfoot &#123;</span><br><span class="line">      text-align: left;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="Containers"><a href="#Containers" class="headerlink" title="Containers"></a>Containers</h3><p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/22.png" style="zoom:80%;"></p>
<p>container可以简单理解为一块区域，比如说Adobe这个网站的Navbar就是一个container，一个网站就是由许许多多的container组合而成的</p>
<p>Container可以有两个标签：<code>div</code>和<code>span</code>,其中<code>div</code> 代表了一整块区域，<code>span</code>则是行内部分区域</p>
<p>比如说：</p>
<p>这里我划分了两个<code>div</code>,然后 在CSS中设置了每个div的宽度为300px，背景颜色为金色</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.product</span> &#123;</span></span><br><span class="line">      background-color: gold;</span><br><span class="line">      width: 300px;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"product"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">      Lorem ipsum dolor, sit amet consectetur adipisicing elit. Magnam,</span><br><span class="line">      expedita.</span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>Link<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"product"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">      Lorem ipsum dolor, sit amet consectetur adipisicing elit. Magnam,</span><br><span class="line">      expedita.</span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>Link<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/23.png" style="zoom:80%;"></p>
<p>div是对整一块区域进行高亮操作，那么我如果想行内高亮，怎么办？</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-class">.highlight</span> &#123;</span></span><br><span class="line">        background-color: gold;</span><br><span class="line">      &#125; </span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"highlight"</span>&gt;</span>Lorem<span class="tag">&lt;/<span class="name">span</span>&gt;</span> ipsum dolor, sit amet consectetur</span><br><span class="line">     adipisicing elit. Magnam, expedita.</span><br><span class="line">   <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>Link<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/24.png" style="zoom:80%;"></p>
<p>还可以使用 <code>&lt;mark&gt;</code>元素来包裹我们想要高亮的文字：</p>
<p><code>&lt;mark&gt;lorem&lt;/mark&gt;</code>,默认高亮颜色为黄色</p>
<h3 id="Semantic-Elements"><a href="#Semantic-Elements" class="headerlink" title="Semantic Elements"></a>Semantic Elements</h3><p>Sementic顾名思义适合语义相关的元素。比如说：</p>
<p><code>&lt;artical&gt;</code> <code>&lt;figure&gt;</code> <code>&lt;mark&gt;</code> <code>&lt;time&gt;</code></p>
<p>比如，对于一块文字，我们可以用<code>&lt;artical&gt;</code>来替换 <code>&lt;div&gt;</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">artical</span> <span class="attr">class</span>=<span class="string">"artical"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">       Lorem ipsum dolor, sit amet consectetur adipisicing elit. Magnam,</span><br><span class="line">       expedita.</span><br><span class="line">     <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>Link<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artical</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>这里的artical不一定真的要是artical，而可以是任何独立的内容：帖子，评论， 反馈，产品卡等：</p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/25.png" style="zoom:80%;"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">artical</span> <span class="attr">class</span>=<span class="string">"artical"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">p</span>&gt;</span>Published<span class="tag">&lt;<span class="name">time</span> <span class="attr">datetime</span>=<span class="string">"2021-01-01 17:00"</span>&gt;</span> </span><br><span class="line">       January 1 2021 05:00 pm<span class="tag">&lt;/<span class="name">time</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="comment">&lt;!--日期时间信息，24小时制--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">mark</span>&gt;</span>lorem<span class="tag">&lt;/<span class="name">mark</span>&gt;</span> ipsum dolor, </span><br><span class="line">       sit amet consectetur adipisicing elit. Magnam,expedita.</span><br><span class="line">   <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">figure</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/coffee.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">figcaption</span>&gt;</span>My coffee this morning<span class="tag">&lt;/<span class="name">figcaption</span>&gt;</span><span class="comment">&lt;!--图片的描述信息--&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">figure</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">artical</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="Structuring-a-Web-Page"><a href="#Structuring-a-Web-Page" class="headerlink" title="Structuring a Web Page"></a>Structuring a Web Page</h3><p>现在我们使用HTML元素快速写一个网站的架构：</p>
<p>这只是一个示范：</p>
<p>首先，页面中有 <code>&lt;header&gt;</code> <code>&lt;main&gt;</code> <code>&lt;footer&gt;</code> 这些标签。header是用来做介绍，放置导航栏的。 main是页面的主题部分，一个html文件只有一个main元素，里面可以放一些<code>&lt;section&gt;</code>之类的模块。footer的作用和header类似</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">nav</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">main</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">section</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Products<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">article</span>&gt;</span><span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">article</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">article</span>&gt;</span><span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">section</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Testimonial<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">article</span>&gt;</span><span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">article</span>&gt;</span><span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">nav</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">ul</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>当然，header和footer并不是唯一的， section元素也可以在artical元素当中。完全是看我们想要表达什么。要以功能为主导</p>
<h3 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h3><p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/26.png"></p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/27.png"></p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/28.png"></p>
<h2 id="CSS-Basics"><a href="#CSS-Basics" class="headerlink" title="CSS Basics"></a>CSS Basics</h2><h3 id="Providing-CSS"><a href="#Providing-CSS" class="headerlink" title="Providing CSS"></a>Providing CSS</h3><p>我们一共有三种方法实现CSS</p>
<h4 id="Embedded-stylesheets"><a href="#Embedded-stylesheets" class="headerlink" title="Embedded stylesheets"></a>Embedded stylesheets</h4><p>顾名思义，就是嵌入式的CSS，这也是我们刚才一直在写的CSS：在head里面使用 <code>&lt;style&gt;</code>元素</p>
<h4 id="External-stylesheets"><a href="#External-stylesheets" class="headerlink" title="External stylesheets"></a>External stylesheets</h4><p>外部的CSS，如果我们要操纵很多html页面，但我们不希望在每一个页面中都写重复的代码，因此我们可以新建一个CSS文件，然后用链接引用进来。</p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/29.png"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"style.css"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem, ipsum dolor sit amet consectetur adipisicing elit.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem, ipsum dolor sit amet consectetur adipisicing elit.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/30.png"></p>
<p>这样的操作和直接在head里面写 style是一样的。</p>
<p>值得注意的是，嵌入的CSS优先级高于引用的CSS文件，比如，我在这里链接了 style.css文件，但是又在 style元素当中对p的文本颜色定义成灰色，那么最终网页会显示灰色的文字。</p>
<h4 id="Inline-styles"><a href="#Inline-styles" class="headerlink" title="Inline styles"></a>Inline styles</h4><p>这种CSS比较少用，而且也不推荐用，也就是在标签里面添加style属性：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"color: blue; font-weight: bold"</span>&gt;</span></span><br><span class="line">     Lorem, ipsum dolor sit amet consectetur adipisicing elit.</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>与其这样，我们不如在p这里定义一个id,然后在 <code>&lt;style&gt;</code> 中对齐进行定义，比如：</p>
<p>注意，对id进行定位，需要用 <code>#</code>  对class进行定位，需要用 . </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">   <span class="selector-id">#first</span> &#123;</span></span><br><span class="line">     color: blue;</span><br><span class="line">     font-weight: bold;</span><br><span class="line">   &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"first"</span> &gt;</span></span><br><span class="line">     Lorem, ipsum dolor sit amet consectetur adipisicing elit.</span><br><span class="line">   <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem, ipsum dolor sit amet consectetur adipisicing elit.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="Normalizing-CSS"><a href="#Normalizing-CSS" class="headerlink" title="Normalizing CSS"></a>Normalizing CSS</h3><p>因为我们有很多浏览器，不同的浏览器渲染CSS元素也是不一样的，为了解决这个问题，我们可以下载 <code>normalize.css</code> 文件，并将其引用到我们的网页中去。 下载方式是：<code>npm install normalize.css</code></p>
<p>这个<code>normalize.css</code> 文件规定了一些基本的信息，比如说html中的行高之类的：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1.15</span>; <span class="comment">/* 1 */</span></span><br><span class="line">  <span class="attribute">-webkit-text-size-adjust</span>: <span class="number">100%</span>; <span class="comment">/* 2 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们只需要在html文件中添加<code>&lt;link rel=&quot;stylesheet&quot; href=&quot;css/normalize.css&quot; /&gt;</code> 就可以使用 这个normalize.css了，注意，这里面设置的页边距为0px,如果我们要看的舒服一点，那么可以在 <code>&lt;style&gt;</code>中设置 <code>margin: 10px;</code></p>
<p>接下来，我们所有的html文件都将使用这个 <code>normalize.css</code>文件</p>
<h3 id="Basic-Selectors"><a href="#Basic-Selectors" class="headerlink" title="Basic Selectors"></a>Basic Selectors</h3><p>在CSS中，我们可以筛选元素的 Type, ID, Class 和 Attribute，并制作相应的样式</p>
<p>Selector 就是 stylesheets里面的 <code>#first</code>, .highlight, body 这类东西。它们的作用就是选择对应的元素。</p>
<p>选择Type，什么都不用加，比如说 <code>body {...;}</code></p>
<p>选择ID，需要在ID前加一个#，比如说 <code>#products{...;}</code></p>
<p>选择Class，需要在class名字前加一个 . 比如说:<code>.product{}</code> </p>
<p>id 和 class之间的区别： <strong>一个 id只能对应一个 element </strong>，假如你的页面里出现了两个ID那JS效果特性将出现逻辑错误，不知道依据哪个ID来改变其标签属性；但是一个多个elements可以拥有相同的class,选择class会对class中所有的元素都进行样式操作。</p>
<p>可以这样来理解： class可以理解为类，而ID可以理解为每个人独有的标签。</p>
<h4 id="attribute"><a href="#attribute" class="headerlink" title="attribute"></a>attribute</h4><p>选择 attribute 不太常用，需要在选择type的基础上使用方括号，在方括号中写上attribute的名称或者特定的值：比如我这里有一个链接  <code>&lt;a href=&quot;http://google.com&quot; target=&quot;_blank&quot;&gt;Google&lt;/a&gt;</code>，这里，target就是这个<code>&lt;a&gt;</code>的属性，但是还有其他的 <code>&lt;a&gt;</code> 没有这个属性。我就可以在css中这样写：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span><span class="selector-attr">[target=<span class="string">"_blank"</span>]</span>&#123;</span><br><span class="line">	<span class="attribute">color</span>: orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>或者定位href属性</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span><span class="selector-attr">[href=<span class="string">"https://google.com"</span>]</span>&#123;</span><br><span class="line">	<span class="attribute">color</span>: orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但是这样写，代码耦合性比较高，我们可以在定位href属性的时候使用模糊查找, 这样，只要href中有google出现，这个链接就会被渲染成黄色(有点类似于正则表达式）：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span><span class="selector-attr">[href*=<span class="string">"google"</span>]</span>&#123;</span><br><span class="line">	<span class="attribute">color</span>: orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们甚至可以对同一个属性进行多条件筛选</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span><span class="selector-attr">[href^=<span class="string">"https"</span>]</span><span class="selector-attr">[href$=<span class="string">"com"</span>]</span>&#123;</span><br><span class="line">	<span class="attribute">color</span>: orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其中 <code>^=https</code> 代表寻找以 <code>https</code> 开头的href属性； <code>$=&quot;com&quot;</code> 代表寻找以<code>com</code>结尾的href属性。</p>
<h3 id="Relational-Selectors"><a href="#Relational-Selectors" class="headerlink" title="Relational Selectors"></a>Relational Selectors</h3><p>刚才我们说的是最基本的选择器。我们还可以通过元素与元素之间的关系来进行选择。</p>
<p>比如现在body里面有这样两个元素：p是被包含在id=products的section元素当中的.</p>
<p>我们自然可以给p定一个class或者id然后进行选择，当然我们也可以通过id选择section元素中包含的p元素</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">id</span>=<span class="string">"products"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>语法很简单，我们首先选择 id=products 的元素，然后再跟上我们想要选择的元素 p，这样，包含在section中的所有p元素都会变成黄色</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#products</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果我们只希望选择第一个p元素，那么我们可以这样写：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#products</span> &gt; <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">section</span> <span class="attr">id</span>=<span class="string">"products"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artical</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">artical</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这样，这三句话中，只有第一句会变成黄色。</p>
<p>如果我们要选中第三句话，也就是紧邻着section的p元素。那么我们只需要把 &gt; 变成+</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#products</span> + <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果我们要选择 section之后所有的p元素，那么我们可以使用~</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#products</span> ~ <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/31.png"></p>
<p>Relational Selectors 有优点也有缺点。优点是能可以少写很多id，class；但是缺点就是比较脆弱——如果我修改了元素之间的相对位置，css很可能会就会失效。并且，使用Relational Selector 会比 Basic Selector更加慢一点：比如说 <code>#products ~ p{}</code> ， 它的搜寻模式是首先找到DOM中所有的p元素，然后看这个p元素是否在id=products的元素后面。那么如果一共有100个paragraph元素，但是只有一个paragraph是在section之后的，那么前面搜寻的99个paragraphs都浪费了。</p>
<p>因此使用relational selectors 的话，我们需要对元素的位置有十足的把握，否则选用basic selector更加保险</p>
<h3 id="Pseudo-class-Selectors"><a href="#Pseudo-class-Selectors" class="headerlink" title="Pseudo-class Selectors"></a>Pseudo-class Selectors</h3><p>现在我们来介绍 伪对象选择符。</p>
<h3 id="first-of-type-first-child"><a href="#first-of-type-first-child" class="headerlink" title="first-of-type/first-child"></a>first-of-type/first-child</h3><p>下面我来介绍几种用法，我们的html如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">article</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>如果我们想要选择第一行，我们可以这样写:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">artical</span>: <span class="selector-tag">first-child</span>&#123;</span><br><span class="line">	<span class="attribute">font-size</span>: <span class="number">140%</span>;</span><br><span class="line">	<span class="attribute">font-style</span>: italic;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>虽然这样写是可以将第一行paragraph元素修改为斜体的，但是这样的css是很脆弱的，因为如果在paragraph前面再加一个 <code>&lt;h2&gt;</code>，那变成斜体的就是 <code>&lt;h2&gt;</code>而不是<code>&lt;p&gt;</code>了。为了提高鲁棒性，我们可以将<code>first-child</code>改成<code>first-of-type</code> ，那么对于artical元素中的每一种type的第一个元素，都会进行修改。比如说：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">article</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Heading2<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/32.png"></p>
<p>但是我只想把第一个paragraph进行修改，那么我么可以这样写：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">article</span> <span class="selector-tag">p</span><span class="selector-pseudo">:first-of-type</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">140%</span>;</span><br><span class="line">  <span class="attribute">font-style</span>: italic;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果我们在 last-child 前面加一个p，而最后一个元素却是<code>&lt;a&gt;</code>，那么将不会选中任何元素</p>
<h4 id="nth-child"><a href="#nth-child" class="headerlink" title="nth-child"></a>nth-child</h4><p>现在我们希望对一个列表中的奇数位元素进行操作，比如说对于一个unordered list：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span>Item 1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span>Item 2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span>Item 3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span>Item 4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span>Item 5<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>我们要将奇数位的li选中，那么可以用 <code>nth-child</code> 这一个选择符。只要在括号里面写odd、even甚至是3n这种都可以</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ul</span> <span class="selector-tag">li</span><span class="selector-pseudo">:nth-child(odd)</span> &#123;<span class="comment">/*这里li和: 之间没有空格！*/</span></span><br><span class="line">  <span class="attribute">color</span>: deeppink;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="针对-lt-a-gt-伪对象选择符"><a href="#针对-lt-a-gt-伪对象选择符" class="headerlink" title="针对&lt;a&gt;伪对象选择符"></a>针对<code>&lt;a&gt;</code>伪对象选择符</h4><p> 比如说我现在有一个链接 <code>&lt;a href=&quot;https://whatever.com&quot;&gt;Link&lt;/a&gt;</code></p>
<p>我希望链接在点击的前后，变成我想要的蓝色。我们可以这样来写css:</p>
<p>其中，<code>:visited</code>代表了点击之后的样式；<code>:link</code> 代表所有的链接</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span> <span class="selector-pseudo">:visited</span>,</span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:link</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: dodgerblue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们还可以设置当鼠标移动到链接上和使用tab键锁定链接时的样式</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:focus</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: deeppink;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/33.png"></p>
<h3 id="Pesudo-element-Selectors"><a href="#Pesudo-element-Selectors" class="headerlink" title="Pesudo-element Selectors"></a>Pesudo-element Selectors</h3><p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/35.png"></p>
<h4 id="first-letter"><a href="#first-letter" class="headerlink" title="first-letter"></a>first-letter</h4><p>如果我们想要一段文字的第一个字加粗，最原始的方法可以用 <code>&lt;span class=&quot;...&quot;&gt;</code>来定位，但这显然过于繁琐，我们可以直接用 pesudo-element selectors</p>
<p>和pesudo-classes只需要用一个冒号不同，pesudo-element 需要用两个冒号，比如说：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">::first-letter</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">140%</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/34.png"></p>
<h4 id="first-line"><a href="#first-line" class="headerlink" title="first-line"></a>first-line</h4><p>同理，我们可以对p的第一行进行选择：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">::first-line</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>: orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="selection"><a href="#selection" class="headerlink" title="selection"></a>selection</h4><p>我们可以对文本中被选择的部分进行样式修改：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">::selection</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: deeppink;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/36.png"></p>
<p>值得注意的是我如果 写 <code>p::selection</code> 这样只会在 paragraph元素中起作用。如果我想在所有文字中都起作用，那么我们可以写 <code>::selection</code></p>
<h4 id="before-和-after"><a href="#before-和-after" class="headerlink" title="before 和 after"></a>before 和 after</h4><p>我们还可以利用before在文字前插入一些内容：</p>
<p>content后面可以是任何我们想要插入的东西；display则是这些内容的展示形式，可以是inline的也可以是block的，区别就在于是行内还是独占一行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">p::before &#123;</span><br><span class="line">  content: &quot;...&quot;;</span><br><span class="line">  display: block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/37.png"></p>
<p>同理，after就是在paragraph后面加上我们想要的内容</p>
<h3 id="Selectors-Specificity"><a href="#Selectors-Specificity" class="headerlink" title="Selectors Specificity"></a>Selectors Specificity</h3><p>当CSS选择器之间互相重复了，我们该选择哪一个？这时候我们就需要用到 Selectors Specificty(可以简单理解为权重)，下面是一个权重金字塔，越上面的权重越大。</p>
<p>比如在金字塔顶端的是ID，数量只能有一个；中层的是 Class和attribute，相同的class/attribute数量比较多；底层的是element，相同的数量最多。</p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/38.png"></p>
<p>比如说我们有一个 <code>h1</code> 元素</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1 id&#x3D;&quot;products&quot; class&#x3D;&quot;highlight&quot;&gt; Heading &lt;&#x2F;h1&gt;</span><br></pre></td></tr></table></figure>
<p>现在，我们来编写一个冲突的CSS</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: dodgerblue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.highlight</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: deeppink;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#products</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最终Heading显示的颜色为橙色。</p>
<p>如果去掉<code>#products</code> ，那么会显示为 深粉色</p>
<p>最后如果把 <code>.highlight</code> 去掉，则会显示为 宝蓝色</p>
<p>在vscode当中，我们只要将鼠标移到花括号前面的选择器，她就会自动显示出当前选择器的Specificity:</p>
<p>这是一个拥有三个元素的一维向量，id是第一位，class,attribute是第二位, element 是第三位。 比如说这里对的 <code>.highlight</code>,选择的是class，所以向量为 <code>(0,1,0)</code></p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/40.png"></p>
<p>又比如说我选择的是 <code>&lt;a&gt;</code>中的属性 <code>attribute</code>,那么这里面既有 element，又有attribute，因此向量为 <code>(0,1,1)</code>, 选择器权重的大小可以简单理解为向量中三位数的大小 如 011&gt;010&gt;001</p>
<p>如果我的选择器是这样的:</p>
<p><code>.highlight#products</code> 那么这个选择器的 specificity = (1,1,0)<br><code>a.highlight#products</code> 那么这个选择器的 specificity = (1,1,1)</p>
<p>请注意，选择器可以是嵌套的，比如我的html如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">artical</span> <span class="attr">class</span>=<span class="string">"featured"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">id</span>=<span class="string">"products"</span> <span class="attr">class</span>=<span class="string">"highlight"</span>&gt;</span>Heading<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">artical</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>而我的 css如下,其 specificity为(1,1,0):</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.featured</span> <span class="selector-id">#products</span>&#123;</span><br><span class="line">	<span class="attribute">color</span>: dodgerblue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但是请不要写出这种CSS！</p>
<p><code>html body #featured h2 #products.highlight{}</code></p>
<h4 id="important"><a href="#important" class="headerlink" title="!important"></a>!important</h4><p>如果，我们还是想让 <code>h1</code>这个选择器最优先，那么我们可以在里面的样式表后面添加 <code>! important</code>,但是请注意<code>!important</code>只作用于那一行样式，不作用于选择器中的其他样式。 比如说我这样来编写css</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: dodgerblue <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: yellow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.highlight</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: deeppink;</span><br><span class="line">  <span class="attribute">background-color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>那么最终的呈现效果就是，字体为蓝色(我们手动设置了h1优先，背景颜色为红色，因为class的specificity大于elements的)</p>
<p>但是，这样写会让css变得十分混乱因此我们不推荐这样写，而推荐通过叠加选择器的方式来增加权重</p>
<h3 id="Inheritance"><a href="#Inheritance" class="headerlink" title="Inheritance"></a>Inheritance</h3><p>什么是CSS中的继承？ 比如说我的html如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum <span class="tag">&lt;<span class="name">strong</span>&gt;</span>dolor<span class="tag">&lt;/<span class="name">strong</span>&gt;</span> sit amet.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>然后我的css如下：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: dodgerblue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果我们发现，整行文字都变成了宝蓝色。这是因为 strong元素继承了p元素的样式。因此我们没有必要再用strong选择器了</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">strong</span> &#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但是我们比较特立独行，我们希望 <code>&lt;strong&gt;</code>中的内容还是保持原来的样式，我们可以在strong选择器后面将该属性的值设置为 <code>initial</code> ：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">strong</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: initial;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意，继承并不适用于所有的属性，比如说border属性就不会继承(默认情况下),比如我的css如下：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">  <span class="attribute">color</span>: dodgerblue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/42.png"></p>
<p>因为如果这时候 strong元素继承了p元素的边框属性，那就会在dolor外面再画一个边框，很丑且没必要。但是如果我们硬要继承，也是可以的。只要在属性后面的值设为 <code>inherit</code> 即可我们可以这样修改css</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">strong</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: initial;</span><br><span class="line">	<span class="attribute">border</span>: inherit;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/43.png"></p>
<h3 id="Colors"><a href="#Colors" class="headerlink" title="Colors"></a>Colors</h3><p>在CSS中我们一共有四种方式来确定颜色：</p>
<h4 id="Named-colors"><a href="#Named-colors" class="headerlink" title="Named colors"></a>Named colors</h4><p>直接输颜色的名字即可， 比如 red ，blue，green等</p>
<h4 id="RGB，HSL-Hexadecimal"><a href="#RGB，HSL-Hexadecimal" class="headerlink" title="RGB，HSL, Hexadecimal"></a>RGB，HSL, Hexadecimal</h4><p>使用三原色RGB来定位颜色，也就是 一个长度为3的向量</p>
<p>我们可以使用 <a href="https://www.google.com/search?q=color+picker&amp;rlz=1C1SQJL_enUS890US890&amp;oq=color+picker&amp;aqs=chrome.0.0i433j0l2j0i395l7.2989j1j4&amp;sourceid=chrome&amp;ie=UTF-8" target="_blank" rel="noopener">color picker</a> 来选择一种颜色，他会给出这个颜色的RGB，HSL, Hexadecimal</p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/44.png"></p>
<p><strong>HSL</strong>是一种将RGB色彩模型中的点在圆柱坐标系中的表示法。这两种表示法试图做到比基于笛卡尔坐标系的几何结构RGB更加直观。</p>
<p>HSL即色相、饱和度、亮度（英语：Hue, Saturation, Lightness）。</p>
<p>色相（H）是色彩的基本属性，就是平常所说的颜色名称，如红色、黄色等。</p>
<p>饱和度（S）是指色彩的纯度，越高色彩越纯，低则逐渐变灰，取0-100%的数值。</p>
<p>明度（V），亮度（L），取0-100%</p>
<p>注意，如果使用RGB，或者HSL 要这样写：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">	<span class="attribute">background-color</span>: <span class="built_in">rgb</span>(<span class="number">34</span>,<span class="number">230</span>,<span class="number">86</span>);</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">hsl</span>(<span class="number">136</span>,<span class="number">79%</span>,<span class="number">52%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> 此外，如果我需要用到透明度，我们可以用 <code>rgba</code>或者 <code>hsla</code> ，然后在加上第四个参数，范围是0-1,代表了颜色的透明度</p>
<h3 id="Gradients"><a href="#Gradients" class="headerlink" title="Gradients"></a>Gradients</h3><p>现在，我们来学习渐变。 </p>
<h4 id="线性渐变"><a href="#线性渐变" class="headerlink" title="线性渐变"></a>线性渐变</h4><p>渐变很简单，我们这样写 css就可以了：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(dodgerblue,yellow)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/45.png"></p>
<p>我们可以加一个参数来改变渐变色的方向：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(to right,dodgerblue,yellow)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/46.png"></p>
<p>甚至是斜向下渐变</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(to bottom right, dodgerblue, yellow);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/47.png"></p>
<p>当然，可以把第一个参数替换成角度，比如：<code>background: linear-gradient(45deg, dodgerblue, yellow);</code></p>
<p>其实渐变色可以不止两个。我们再加一个颜色达到三色渐变：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">background: linear-gradient(to bottom right, dodgerblue, yellow,tomato);</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/48.png"></p>
<h4 id="辐射渐变"><a href="#辐射渐变" class="headerlink" title="辐射渐变"></a>辐射渐变</h4><p>除了线性渐变之外，我们还可以有辐射渐变</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">radial-gradient</span>(white, yellow);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/49.png"></p>
<p>我们发现中间是白色，外部是黄色。</p>
<p>我们可以通过第一个参数来调整中间白色的圆的位置：</p>
<p><code>background: radial-gradient(circle at top left,white, yellow);</code></p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/50.png"></p>
<p>我们可以使用 <a href="https://cssgradient.io/" target="_blank" rel="noopener">cssgradient</a> 这个网站来搭配我们的渐变色</p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/51.png"></p>
<p>调配好后，我们只需要复制文本框中的代码即可。 注意，第一行的 background只有一个颜色，是为了哪些无法显示渐变的浏览器配备的。</p>
<h3 id="Borders"><a href="#Borders" class="headerlink" title="Borders"></a>Borders</h3><p>border有三个参数： 宽度、表现形式、颜色</p>
<p>其中表现形式常用的有： solid(实线)， dotted(点)，dashed(虚线)</p>
<p>我们还可以对边框的每一条边进行操作</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">600px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background</span>: dodgerblue;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">10px</span> dashed royalblue;</span><br><span class="line">  <span class="attribute">border-top</span>: <span class="number">20px</span> solid royalblue;</span><br><span class="line">  <span class="attribute">border-bottom</span>:...;</span><br><span class="line">  <span class="attribute">border-right</span>:...;</span><br><span class="line">  <span class="attribute">border-left</span>:...;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但是请注意，这些边框的放置顺序是会向上覆盖的。所以我们要掌握好不同边的放置关系</p>
<p>当然我们也可以这样来设置边框的宽度,使用border-width这个属性，顺序依次是上右下左，是顺时针走向的</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">600px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background</span>: dodgerblue;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">10px</span> dashed royalblue;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">10px</span> <span class="number">20px</span> <span class="number">10px</span> <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当 border-width后面只有两个参数的时候，等价于四个参数，也就是说两个参数是四个参数的缩写</p>
<p>当border-width后面只有一个参数的时候，css就会把这个参数应用在所有的边上</p>
<p>同理，对 <code>border-style,border-color</code>也是这样用的。</p>
<h4 id="border-radius"><a href="#border-radius" class="headerlink" title="border-radius"></a>border-radius</h4><p>顾名思义就是边框的弧度，值得注意的是，当我这样编写css的时候，最终获得的图是一个圆形</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background</span>: dodgerblue;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">10px</span> dashed royalblue;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们可以去这个网站：<a href="https://css-tricks.com/the-shapes-of-css/" target="_blank" rel="noopener">the-shapes-of-css</a> 去找其他形状是怎么画出来的，比较全。</p>
<h3 id="Shadows"><a href="#Shadows" class="headerlink" title="Shadows"></a>Shadows</h3><p>shadows就是给我们的图形添加阴影。我们可以用 <code>box-shadow</code>这个属性</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background</span>: dodgerblue;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">10px</span> <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>属性中的第一个参数是作用在左右边框上的，正数代表在右边边框，负数代表在左边边框；第二个参数是作用在上下边框上的，正数代表了下边框，负数代表了上边框。比如说 10px,10px就是左下边框有阴影</p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/52.png"></p>
<p>当然，这个属性不止有两个参数</p>
<p>我们可以在后面加上 我们希望的阴影的颜色 比如 grey，还可以加上一个柔光的效果，比如说：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background</span>: dodgerblue;</span><br><span class="line">  <span class="attribute">box-shadow</span>:  <span class="number">10px</span> <span class="number">10px</span> <span class="number">10px</span> grey;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/53.png"></p>
<p>如果我们要达到一个垂直投影的效果，可以把box-shadow改成 <code>0 0 30px grey</code></p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/54.png"></p>
<h4 id="text-shadow"><a href="#text-shadow" class="headerlink" title="text-shadow"></a>text-shadow</h4><p>我们对文字也可以用shadow，比如说：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">3px</span> <span class="number">3px</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/55.png"></p>
<p>选择透明度为0.2，和背景色最能融合。</p>
<h3 id="Summary-1"><a href="#Summary-1" class="headerlink" title="Summary"></a>Summary</h3><p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/56.png"></p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/57.png"></p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/58.png"></p>
<h3 id="Cheat-Sheet"><a href="#Cheat-Sheet" class="headerlink" title="Cheat Sheet"></a>Cheat Sheet</h3><p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/59.png"></p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/60.png"></p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/61.png"></p>
<h3 id="Exercise"><a href="#Exercise" class="headerlink" title="Exercise"></a>Exercise</h3><p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/62.png"></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">table</span>,</span><br><span class="line"><span class="selector-tag">td</span>,</span><br><span class="line"><span class="selector-tag">th</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#c4dcf3</span>;</span><br><span class="line">  <span class="attribute">border-left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border-right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border-collapse</span>: collapse;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">thead</span>,<span class="selector-tag">tfoot</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#427fef</span>;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">tbody</span> <span class="selector-tag">tr</span><span class="selector-pseudo">:nth-child(odd)</span>&#123;</span><br><span class="line">  <span class="attribute">background-color</span>:<span class="number">#eef7ff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">tfoot</span>&#123;</span><br><span class="line">  <span class="attribute">text-align</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们看到，这个表格中间的cell分割线是没有的，这可以通过设置 <code>border-left: 0;</code>以及 <code>border-right:0;</code> 来实现</p>
<p>表格代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">th</span>&gt;</span>Country<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">th</span>&gt;</span>OrderID<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">th</span>&gt;</span>Order Amount<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>USA<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>1000<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>$1300<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>USA<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>1001<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>$700<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>CA<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>1002<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>$2000<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>CA<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>1003<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>$1000<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tfoot</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span> <span class="attr">colspan</span>=<span class="string">"2"</span>&gt;</span>Total<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>$5000<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tfoot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/63.png"></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">height</span>:<span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: tomato;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">10px</span> <span class="number">10px</span> lightgrey;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">  <span class="attribute">margin</span>:<span class="number">10px</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个比较简单</p>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/14/">&lt;i class&#x3D;&quot;fa fa-angle-left&quot;&gt;&lt;&#x2F;i&gt;</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><span class="page-number current">15</span><a class="page-number" href="/page/16/">16</a><span class="space">&hellip;</span><a class="page-number" href="/page/44/">44</a><a class="extend next" rel="next" href="/page/16/">&lt;i class&#x3D;&quot;fa fa-angle-right&quot;&gt;&lt;&#x2F;i&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/%5Bobject%20Object%5D"
                alt="Jason" />
            
              <p class="site-author-name" itemprop="name">Jason</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%20%7C%7C%20fa%20fa-archive">
              
                  <span class="site-state-item-count">435</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">61</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart" aria-hidden="true"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jason</span>
 <!--
  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>







-->
        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>




















  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v="></script>

  <script type="text/javascript" src="/js/src/motion.js?v="></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v="></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>

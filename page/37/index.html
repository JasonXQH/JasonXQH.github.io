<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=">


  <link rel="mask-icon" href="/images/logo.svg?v=" color="#222">














<meta property="og:type" content="website">
<meta property="og:title" content="Jason‘s Blog">
<meta property="og:url" content="https://jasonxqh.github.io/page/37/index.html">
<meta property="og:site_name" content="Jason‘s Blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Jason">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '',
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    fancybox: false,
    tabs: ,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: 'undefined',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>







  <title>Jason‘s Blog</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', '[object Object]', 'auto');
  ga('send', 'pageview');
</script>





<meta name="generator" content="Hexo 4.2.0"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">
  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>
<a href="https://github.com/JasonXQH/JasonXQH.github.io" target="_blank" rel="noopener" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Jason‘s Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/%20" rel="section">
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/%20" rel="section">
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/%20" rel="section">
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/%20" rel="section">
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/%20" rel="section">
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/04/21/%E9%93%BE%E5%BC%8F%E5%89%8D%E9%A1%B9%E6%98%9F%E7%9A%84%E6%A6%82%E5%BF%B5%E4%B8%8E%E5%BA%94%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/%5Bobject%20Object%5D">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/04/21/%E9%93%BE%E5%BC%8F%E5%89%8D%E9%A1%B9%E6%98%9F%E7%9A%84%E6%A6%82%E5%BF%B5%E4%B8%8E%E5%BA%94%E7%94%A8/" itemprop="url">链式前项星的概念与应用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-04-21T12:37:54+08:00">
                2020-04-21
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2020-06-21T12:49:40+08:00">
                2020-06-21
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/bfs/" itemprop="url" rel="index">
                    <span itemprop="name">bfs</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="链式前向星"><a href="#链式前向星" class="headerlink" title="链式前向星"></a>链式前向星</h1><p><img src="/2020/04/21/%E9%93%BE%E5%BC%8F%E5%89%8D%E9%A1%B9%E6%98%9F%E7%9A%84%E6%A6%82%E5%BF%B5%E4%B8%8E%E5%BA%94%E7%94%A8/1.png" alt="示例"></p>
<p><img src="/2020/04/21/%E9%93%BE%E5%BC%8F%E5%89%8D%E9%A1%B9%E6%98%9F%E7%9A%84%E6%A6%82%E5%BF%B5%E4%B8%8E%E5%BA%94%E7%94%A8/2.png" alt="示例"></p>
<p><img src="/2020/04/21/%E9%93%BE%E5%BC%8F%E5%89%8D%E9%A1%B9%E6%98%9F%E7%9A%84%E6%A6%82%E5%BF%B5%E4%B8%8E%E5%BA%94%E7%94%A8/3.png" alt="示例"></p>
<p><img src="/2020/04/21/%E9%93%BE%E5%BC%8F%E5%89%8D%E9%A1%B9%E6%98%9F%E7%9A%84%E6%A6%82%E5%BF%B5%E4%B8%8E%E5%BA%94%E7%94%A8/4.png" alt="示例"></p>
<ul>
<li>链式前向星在存储图时十分有用，特别是当边有权值时。我们用过一道题目了来具体分析一下</li>
</ul>
<p><img src="/2020/04/21/%E9%93%BE%E5%BC%8F%E5%89%8D%E9%A1%B9%E6%98%9F%E7%9A%84%E6%A6%82%E5%BF%B5%E4%B8%8E%E5%BA%94%E7%94%A8/UVA1599题目.png" alt="示例"></p>
<p>链式前向星只是一种应用，是一种小技巧。所以我们先要构造一个链式前向星来存储数据。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> n,m,cnt;<span class="comment">//全局变量默认为0</span></span><br><span class="line"><span class="keyword">int</span> head[N],dis[N];</span><br><span class="line"><span class="comment">//head数组就是存储头节点的数组，head[i]就是存储以i为起点的第一条边的下标</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="comment">//链式前向星的三个空间：to代表这条边连接的另一个方向（因为一个方向就是头节点）</span></span><br><span class="line">    <span class="comment">//c代表权值，在这里就是指颜色</span></span><br><span class="line">    <span class="comment">//next存储的是下一条边的编号，如果没有下一条了，那么就是-1</span></span><br><span class="line">    <span class="keyword">int</span> to,c,next;</span><br><span class="line">&#125;e[M];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> c)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//这个add函数就是实现头插</span></span><br><span class="line">    <span class="comment">//cnt代表边序号</span></span><br><span class="line">    e[++cnt].to = v;</span><br><span class="line">    e[cnt].c = c;</span><br><span class="line">    <span class="comment">//这一步，其实就是指向这个头结点指向的第一条边</span></span><br><span class="line">    e[cnt].next = head[u];</span><br><span class="line">    <span class="comment">//然后更新头结点的第一条边，让头结点的第一条边为这条边</span></span><br><span class="line">   <span class="comment">//cnt++就是这条边的序号</span></span><br><span class="line">    head[u] = cnt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> u,v,c;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m)<span class="comment">//输入n也就是最后要达到的目标，m也就是下面数据的组数</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">memset</span>(head,<span class="number">0</span>, <span class="keyword">sizeof</span>(head));</span><br><span class="line">    cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//这里，因为我们要存储的是无向图，所以对于每一组数据，都要存储两条边</span></span><br><span class="line">        <span class="comment">//一条从头指向尾，一条反指</span></span><br><span class="line">    	<span class="built_in">cin</span>&gt;&gt;u&gt;&gt;v&gt;&gt;c;</span><br><span class="line">        add(u,v,c);</span><br><span class="line">        add(v,u,c);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">     bfs1();</span><br><span class="line">     <span class="built_in">cout</span>&lt;&lt;dis[<span class="number">1</span>]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">     bfs2();</span><br><span class="line">     <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>构建好，并存储好后，开始bfs</li>
</ul>
<p><img src="/2020/04/21/%E9%93%BE%E5%BC%8F%E5%89%8D%E9%A1%B9%E6%98%9F%E7%9A%84%E6%A6%82%E5%BF%B5%E4%B8%8E%E5%BA%94%E7%94%A8/UVA1599题解2.png" alt="示例"></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//关于为什么要逆向标高</span></span><br><span class="line"><span class="comment">//逆向标高是从目标反向遍历，比如我们要从1找到4，那么从4开始反向便利</span></span><br><span class="line"><span class="comment">//这样，4 的深度为0，1的深度为2，那么1-&gt;4 的深度是2</span></span><br><span class="line"><span class="comment">//因为要输出至少经过k条边，那么深度就是边的条数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bfs1</span><span class="params">()</span><span class="comment">//逆向标高</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> u,v;</span><br><span class="line">    <span class="comment">//首先把所有的节点的访问值标为0，在接下来的访问中，凡是访问到，标为1</span></span><br><span class="line">    <span class="built_in">memset</span>(vis,<span class="literal">false</span>, <span class="keyword">sizeof</span>(vis));</span><br><span class="line">    <span class="comment">//首先把目标的深度标为0</span></span><br><span class="line">    dis[n]=<span class="number">0</span>;</span><br><span class="line">    <span class="comment">//队列q1是保存节点号的</span></span><br><span class="line">    q1.push(n);</span><br><span class="line">    <span class="comment">//然后把n设为已经访问</span></span><br><span class="line">    vis[n]=<span class="literal">true</span>;</span><br><span class="line">    <span class="comment">//第一次深度搜索</span></span><br><span class="line">    <span class="keyword">while</span>(!q1.empty())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//每次u设为队列的头节点，</span></span><br><span class="line">        u = q1.front();</span><br><span class="line">        q1.pop();</span><br><span class="line">        <span class="comment">//把u设为已经访问</span></span><br><span class="line">        vis[u]=<span class="literal">true</span>;</span><br><span class="line">        <span class="comment">//把头节点出队以后，将这个头结点所有的边连接着的节点入队</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i  = head[u];i;i=e[i].next)</span><br><span class="line">        <span class="comment">//因为存储的时候是从1开始的，所以结束条件是i！=0</span></span><br><span class="line">        &#123;            </span><br><span class="line">            v=e[i].to;</span><br><span class="line">            <span class="keyword">if</span>(vis[v])<span class="comment">//如果v已经被访问过了</span></span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            <span class="comment">//把下一个结点的深度标为出队节点+1</span></span><br><span class="line">            dis[v]=dis[u]+<span class="number">1</span>;</span><br><span class="line">            <span class="comment">//然后把新节点入队</span></span><br><span class="line">            q1.push(v);</span><br><span class="line">            <span class="comment">//把新节点标记为访问</span></span><br><span class="line">            vis[v]=<span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>反向遍历之后，我们需要从1开始正向遍历</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bfs2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> u,v,minc,c;</span><br><span class="line">    <span class="keyword">bool</span> first = <span class="literal">true</span>;</span><br><span class="line">    <span class="comment">//刚才vis数组已经有改了，现在是正向遍历，所以要重置</span></span><br><span class="line">    <span class="built_in">memset</span>(vis,<span class="literal">false</span>,<span class="keyword">sizeof</span>(vis));</span><br><span class="line">    vis[<span class="number">1</span>] = <span class="literal">true</span>;</span><br><span class="line">    <span class="comment">//从1开始bfs，把1所有连接的节点，而且节点是满足”1的深度“-1的，入队</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = head[<span class="number">1</span>];i;i = e[i].next)</span><br><span class="line">        <span class="keyword">if</span>(dis[e[i].to]==dis[<span class="number">1</span>]<span class="number">-1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//这里，入队不仅仅是把节点号入队，也要把颜色入队</span></span><br><span class="line">            q1.push(e[i].to);</span><br><span class="line">            q2.push(e[i].c);</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">while</span>(!q1.empty())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//把最小的颜色号初始化为最大值</span></span><br><span class="line">        minc = inf;</span><br><span class="line">        <span class="keyword">while</span>(!q1.empty())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//和bfs1一样，先出队，然后把符合条件的全部入队</span></span><br><span class="line">            <span class="comment">//q1，q2同时入队，同时出队，能保证他们之间是一一对应的</span></span><br><span class="line">            v= q1.front();</span><br><span class="line">            q1.pop();</span><br><span class="line">            c= q2.front();</span><br><span class="line">            q2.pop();</span><br><span class="line">            <span class="comment">//q3 用来保存色号最小的关联的临节点号</span></span><br><span class="line">            <span class="comment">//如果发现有比q3中存储的更小的色号，那么直接把q3清空</span></span><br><span class="line">            <span class="comment">//再把现有的色号存储进进q3</span></span><br><span class="line">            <span class="keyword">if</span>(c&lt;minc)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">while</span>(!q3.empty())</span><br><span class="line">                    q3.pop();</span><br><span class="line">                minc = c;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(c==minc)</span><br><span class="line">                q3.push(v);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(first)</span><br><span class="line">            first = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">cout</span>&lt;&lt;<span class="string">" "</span>;</span><br><span class="line">        <span class="comment">//这样，每一次输出的都是当前深度下，最小的色号</span></span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;minc;</span><br><span class="line">        <span class="comment">//接下俩这一步就是通过当前q3中存储的这些节点出发，寻找下一层、</span></span><br><span class="line">        <span class="comment">//并且把下一层的节点和色号都入队</span></span><br><span class="line">        <span class="comment">//且能达到清空q3的作用，为下一次循环做准备</span></span><br><span class="line">        <span class="keyword">while</span>(!q3.empty())</span><br><span class="line">        &#123;</span><br><span class="line">            u = q3.front();</span><br><span class="line">            q3.pop();</span><br><span class="line">            <span class="keyword">if</span>(vis[u])</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            vis[u]=<span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = head[u];i;i = e[i].next)</span><br><span class="line">            &#123;</span><br><span class="line">                v=e[i].to;</span><br><span class="line">                <span class="keyword">if</span>(dis[v]==dis[u]<span class="number">-1</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    q1.push(v);</span><br><span class="line">                    q2.push(e[i].c);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/04/20/%E5%88%9D%E8%AF%86%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/%5Bobject%20Object%5D">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/04/20/%E5%88%9D%E8%AF%86%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" itemprop="url">初识正则表达式</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-04-20T22:44:53+08:00">
                2020-04-20
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2020-06-21T12:52:56+08:00">
                2020-06-21
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Regular-Expression/" itemprop="url" rel="index">
                    <span itemprop="name">Regular Expression</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="正则表达式的探索与发现-爬虫项目系列博客"><a href="#正则表达式的探索与发现-爬虫项目系列博客" class="headerlink" title="正则表达式的探索与发现-爬虫项目系列博客"></a>正则表达式的探索与发现-爬虫项目系列博客</h1><p>​    因为要实现爬虫的功能，正则表达式是必须要掌握和简单应用的。那么这对于从来没看到过正则表达式的小白来说，它无疑是头痛的，因为它的长这个样子</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> url_reg = <span class="regexp">/\/(\d&#123;4&#125;)\/(\d&#123;2&#125;)-(\d&#123;2&#125;)\/(\d&#123;7&#125;).shtml/</span>;</span><br><span class="line"><span class="keyword">var</span> regExp = <span class="regexp">/((\d&#123;4&#125;|\d&#123;2&#125;)(\-|\/|\.)\d&#123;1,2&#125;\3\d&#123;1,2&#125;)|(\d&#123;4&#125;年\d&#123;1,2&#125;月\d&#123;1,2&#125;日)/</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  * 正则表达式:也叫规则表达式,按照一定的规则组成的一个表达式,这个表达式的作用主要是匹配字符串的,</span></span><br><span class="line"><span class="comment">    * "我的电话:10086,他的电话:10010,你的电话:10000" 正则表达式,把这个字符串中的所有的数字找到</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * 正则表达式的作用:匹配字符串的</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * 在大多数编程语言中都可以使用</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * 正则表达式的组成:是由元字符或者是限定符组成的一个式子</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * 元字符:</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * .  表示的是:除了\n以外的任意的一个字符   "fdsfs238"</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * [] 表示的是:范围,  [0-9] 表示的是0到9之间的任意的一个数字,  "789" [0-9]</span></span><br><span class="line"><span class="comment">    * [1-7] 表示的是1到7之间的任意的一个数字</span></span><br><span class="line"><span class="comment">    * [a-z] 表示的是:所有的小写的字母中的任意的一个</span></span><br><span class="line"><span class="comment">    * [A-Z] 表示的是:所有的大写的字母中的任意的一个</span></span><br><span class="line"><span class="comment">    * [a-zA-Z] 表示的是:所有的字母的任意的一个</span></span><br><span class="line"><span class="comment">    * [0-9a-zA-Z] 表示的是: 所有的数字或者是字母中的一个</span></span><br><span class="line"><span class="comment">    * [] 另一个含义: 把正则表达式中元字符的意义干掉    [.] 就是一个.</span></span><br><span class="line"><span class="comment">    * | 或者     [0-9]|[a-z] 表示的是要么是一个数字,要么是一个小写的字母</span></span><br><span class="line"><span class="comment">    * () 分组 提升优先级   [0-9]|([a-z])|[A-Z]</span></span><br><span class="line"><span class="comment">    * ([0-9])([1-5])([a-z]) 三组, 从最左边开始计算</span></span><br><span class="line"><span class="comment">    * (()(()))有几个左括号就有几组</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * 都是元字符,但是也可以叫限定符,下面的这些</span></span><br><span class="line"><span class="comment">    *    *   表示的是:前面的表达式出现了0次到多次</span></span><br><span class="line"><span class="comment">    *    [a-z][0-9]* 小写字母中的任意一个 后面是要么是没有数字的,要么是多个数字的</span></span><br><span class="line"><span class="comment">    *    "fdsfs3223323"  [a-z][0-9]* 这是能匹配的，s3223323能够匹配</span></span><br><span class="line"><span class="comment">    *     只要某一节字符串匹配，那么整个字符串都匹配</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *    +  表示的是:前面的表达式出现了1次到多次</span></span><br><span class="line"><span class="comment">    *    [a-z][9]+  小写字母一个后面最少一个9,或者多个9</span></span><br><span class="line"><span class="comment">    *    "fesfewww9fefds" 这也是可以匹配的，w9 能够匹配</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *    ?  表示的是:前面的表达式出现了0次到1次,最少是0次,最多1次 ,另一个含义:阻止贪婪模式</span></span><br><span class="line"><span class="comment">    *    [4][a-z]? "1231234ij"</span></span><br><span class="line"><span class="comment">    *  限定符:限定前面的表达式出现的次数</span></span><br><span class="line"><span class="comment">    *  &#123;&#125; 更加的明确前面的表达式出现的次数</span></span><br><span class="line"><span class="comment">    *  &#123;0,&#125; 表示的是前面的表达式出现了0次到多次,和 *一样的</span></span><br><span class="line"><span class="comment">    *  &#123;1,&#125; 表示的是前面的表达式出现了1次到多次,和 +一样的</span></span><br><span class="line"><span class="comment">    *  &#123;0,1&#125; 表示的是前面的表达式出现了0次到1次,和 ?一样的</span></span><br><span class="line"><span class="comment">    *  &#123;5,10&#125; 表示的是前面的表达式出现了5次到10次</span></span><br><span class="line"><span class="comment">    *  &#123;4&#125; 前面的表达式出现了4次</span></span><br><span class="line"><span class="comment">    *  &#123;,10&#125; 错误的========不能这么写</span></span><br><span class="line"><span class="comment">    *  ^ 表示的是以什么开始,或者是取非(取反)</span></span><br><span class="line"><span class="comment">    *  ^[0-9] 以数字开头</span></span><br><span class="line"><span class="comment">    *  ^[a-z] 以小写字母开始</span></span><br><span class="line"><span class="comment">    *  [^0-9] 取反,非数字</span></span><br><span class="line"><span class="comment">    *  [^a-z] 非小写字母</span></span><br><span class="line"><span class="comment">    *  [^0-9a-zA-Z_] _不是特舒符号</span></span><br><span class="line"><span class="comment">    *  $ 表示的是以什么结束   [0-9][a-z]$  必须以小写字母结束</span></span><br><span class="line"><span class="comment">    *  ^[0-9][a-z]$ 相当于是严格模式   "3f2432e"  "4f" ^限定开始，$限定结束 。有了^$,表示严格模式</span></span><br><span class="line"><span class="comment">    *   \d 数字中的任意一个,</span></span><br><span class="line"><span class="comment">    *   \D 非数字中的一个</span></span><br><span class="line"><span class="comment">    *   \s 空白符中的一个</span></span><br><span class="line"><span class="comment">    *   \S 非空白符</span></span><br><span class="line"><span class="comment">    *   \w 非特殊符号</span></span><br><span class="line"><span class="comment">    *   \W 特殊符号</span></span><br><span class="line"><span class="comment">    *   \b 单词的边界</span></span><br><span class="line"><span class="comment">    *   "what are you no sha lei"</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *    . 除了\n以外的任意一个单个字符</span></span><br><span class="line"><span class="comment">    *    []  范围</span></span><br><span class="line"><span class="comment">    *    () 分组,提升优先级</span></span><br><span class="line"><span class="comment">    *    | 或者</span></span><br><span class="line"><span class="comment">    *    * 0-多次</span></span><br><span class="line"><span class="comment">    *    + 1-多次</span></span><br><span class="line"><span class="comment">    *    ? 0-1次</span></span><br><span class="line"><span class="comment">    *    &#123;0,&#125; 和*一样</span></span><br><span class="line"><span class="comment">    *    &#123;1,&#125; 和+</span></span><br><span class="line"><span class="comment">    *    &#123;0,1&#125; 和?</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *    \d 数字中的一个</span></span><br><span class="line"><span class="comment">    *    \D 非数字</span></span><br><span class="line"><span class="comment">    *    \s 空白符</span></span><br><span class="line"><span class="comment">    *    \S 非空白符</span></span><br><span class="line"><span class="comment">    *     \W  特殊符号</span></span><br><span class="line"><span class="comment">    *     \w 非特殊符号 _ 等价于[A-Za-z0-9 ]</span></span><br><span class="line"><span class="comment">    *     ^ 取反,以什么开始</span></span><br><span class="line"><span class="comment">    *     $ 以什么结束</span></span><br><span class="line"><span class="comment">    *     \b 单词边界</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * 写正则表达式,根据字符串来写正则表达式进行匹配</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * 经验: 1.找规律 2.不要追求完美</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * 身份证的正则表达式</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * 15位或者18位</span></span><br><span class="line"><span class="comment">    * ([1-9][0-9]&#123;14&#125;)|([1-9][0-9]&#123;16&#125;[0-9xX])</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * ([1-9][0-9]&#123;14&#125;)([0-9]&#123;2&#125;[0-9xX])?//问号表示前面的（）有没有出现过，0或1次</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * 练习:</span></span><br><span class="line"><span class="comment">    * 1.座机号码的正则表达式</span></span><br><span class="line"><span class="comment">    * 010-19876754</span></span><br><span class="line"><span class="comment">    * 0431-87123490</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * [0-9]&#123;3,4&#125;[-][0-9]&#123;8&#125;</span></span><br><span class="line"><span class="comment">    * \d&#123;3,4&#125;[-]\d&#123;8&#125;</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * \d&#123;3,4&#125;[-][0-9]&#123;8&#125; 这种方式不工整</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * 2.qq号码的正则表达式</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * [1-9][0-9]&#123;4,10&#125;</span></span><br><span class="line"><span class="comment">    * \d&#123;5,11&#125;</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * 3.手机号码的正则表达式</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * 130 131 132 133 134 135 136 137 138 139</span></span><br><span class="line"><span class="comment">    * 143 147</span></span><br><span class="line"><span class="comment">    * 150 151 152 153 154 155 156 157 158 159</span></span><br><span class="line"><span class="comment">    * 170 171 173 176 177</span></span><br><span class="line"><span class="comment">    * 180 181 182 183 184 185 186 187 188 189</span></span><br><span class="line"><span class="comment">    * ([1][358][0-9][0-9]&#123;8&#125;)|([1][4][37][0-9]&#123;8&#125;)|([1][7][01367][0-9]&#123;8&#125;)</span></span><br><span class="line"><span class="comment">    * \d&#123;11&#125;</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * 邮箱的正则表达式,必须要记住的</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * sd2113_3.-fd@itcast.com.cn</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * [0-9a-zA-Z_.-]+[@][0-9a-zA-Z_.-]+([.][a-zA-Z]+)&#123;1,2&#125;有可能是.com 也有可能是.com.cn</span></span><br><span class="line"><span class="comment">    * + 表示一次到多次</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *[0-9a-zA-Z_.]+[@][0-9a-zA-Z._]+([.][a-zA-Z]+)&#123;1,2&#125;</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * */</span></span><br></pre></td></tr></table></figure>
<p>​    </p>
<p>翻阅了一下犀牛书，有看了几个网上的教学视频，总算有了点概念，接下来我先把书本的内容贴上来</p>
<p><img src="/2020/04/20/%E5%88%9D%E8%AF%86%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/b1.jpg" alt="示例"></p>
<p><img src="/2020/04/20/%E5%88%9D%E8%AF%86%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/b2.jpg" alt="示例"></p>
<p><img src="/2020/04/20/%E5%88%9D%E8%AF%86%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/b3.jpg" alt="示例"></p>
<p><img src="/2020/04/20/%E5%88%9D%E8%AF%86%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/b4.jpg" alt="示例"></p>
<p><img src="/2020/04/20/%E5%88%9D%E8%AF%86%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/b5.jpg" alt="示例"></p>
<p><img src="/2020/04/20/%E5%88%9D%E8%AF%86%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/b6.jpg" alt="示例"></p>
<p><img src="/2020/04/20/%E5%88%9D%E8%AF%86%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/b7.jpg" alt="示例"></p>
<h4 id="先来看看第一个正则表达式"><a href="#先来看看第一个正则表达式" class="headerlink" title="先来看看第一个正则表达式"></a>先来看看第一个正则表达式</h4><p>我们要知道，正则表达式不是我们凭空捏造出来的，而是在我们找到目标网页后，根据源代码中子内容的编写规律对应着写下来的，老师的代码爬取的式中国新闻网的内容，所以我们先打开中国新闻网的源代码页面。</p>
<p><img src="/2020/04/20/%E5%88%9D%E8%AF%86%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/新闻主页.png" alt="示例"></p>
<p>我们看到了这一行行的新闻标题，心想：这不就是我想要的嘛！！！怎么才能获得呢！？？</p>
<p>不慌，按F12<del>进入坦克</del>进入DevTools</p>
<p><img src="/2020/04/20/%E5%88%9D%E8%AF%86%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/devtools.png" alt="示例"></p>
<p>那么如何才能定位呢？我们点击左上方的那个小按钮，对，就是那个有鼠标一样的小按钮</p>
<p><del>新世界开启</del></p>
<p>我们只要把我们的鼠标移动到任何一处，图片，链接，窗口等等，devtools中就会自动显示对应的链接，太可了！</p>
<p><img src="/2020/04/20/%E5%88%9D%E8%AF%86%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/shubiao.png" alt="示例"></p>
<p>这样看了几个新闻链接后，我们不难发现</p>
<p><a href="http://www.chinanews.com/gn/2020/04-20/9162393.shtml" target="_blank" rel="noopener">http://www.chinanews.com/gn/2020/04-20/9162393.shtml</a></p>
<p><a href="http://www.chinanews.com/gj/2020/04-20/9162621.shtml" target="_blank" rel="noopener">http://www.chinanews.com/gj/2020/04-20/9162621.shtml</a></p>
<p><a href="http://www.chinanews.com/cj/2020/04-20/9162059.shtml" target="_blank" rel="noopener">http://www.chinanews.com/cj/2020/04-20/9162059.shtml</a></p>
<p>好吧事不过三，我们发现这三个基本上具有相同的格式，只是中间的gn/gj/cn不同，日期可能不同和后边的编码不同，好，那么我们需要用正则表达式去匹配前面的www.chinanews.com嘛？其实并不需要，我们只需要找到这类链接的不同之处即可，否则就是浪费时间。那么再来分析一下我们的正则表达式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> url_reg = <span class="regexp">/\/(\d&#123;4&#125;)\/(\d&#123;2&#125;)-(\d&#123;2&#125;)\/(\d&#123;7&#125;).shtml/</span>;</span><br><span class="line"><span class="comment">//  首尾两个/ 是在Js中的声明正则表达式的固定用法，可以略去</span></span><br><span class="line"><span class="comment">//  1.\ 是用来转义的 \/匹配的是/</span></span><br><span class="line"><span class="comment">//  2.(\d&#123;4&#125;)分成两个部分 ：\d 代表数字 &#123;4&#125;代表出现字数，这里很明显我们要匹配2020</span></span><br><span class="line"><span class="comment">// 	3.\/ 又是匹配/</span></span><br><span class="line"><span class="comment">// 	4.(\d&#123;2&#125;) 同理，这次我们来匹配月份，04</span></span><br><span class="line"><span class="comment">//	5. - 其实就是匹配04-20中的-</span></span><br><span class="line"><span class="comment">//	6. (\d&#123;2&#125;)匹配的是日期</span></span><br><span class="line"><span class="comment">// 	7. \/ 又是匹配/</span></span><br><span class="line"><span class="comment">//	8.(\d&#123;7&#125;) 匹配编号，不同网页都有独特的编号</span></span><br><span class="line"><span class="comment">// 	9  .shitml就是匹配 .shtml </span></span><br><span class="line"><span class="comment">// 值得注意的是，在这里.的意思是非\n的任意字符，包括了. 如果我们只要匹配 . 需要写[.]</span></span><br></pre></td></tr></table></figure>
<p><strong>分析完毕，我们来测试一下他的具体性能吧</strong></p>
<p><a href="https://c.runoob.com/front-end/854" target="_blank" rel="noopener">https://c.runoob.com/front-end/854</a> 这是一个在线测试正则表达式的网站，在写爬虫的时候先跑一下看看到底能不能过滤出有效的信息来</p>
<p><img src="/2020/04/20/%E5%88%9D%E8%AF%86%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/cainiaogongju.png" alt="示例"></p>
<p>可以看到这个正则表达式还是蛮厉害的，匹配到了200多条网页链接</p>
<h4 id="再来看看第二个正则表达式"><a href="#再来看看第二个正则表达式" class="headerlink" title="再来看看第二个正则表达式"></a>再来看看第二个正则表达式</h4><ul>
<li>我们来看看第二个正则表达式索要匹配的目标</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> regExp = <span class="regexp">/((\d&#123;4&#125;|\d&#123;2&#125;)(\-|\/|\.)\d&#123;1,2&#125;\3\d&#123;1,2&#125;)|(\d&#123;4&#125;年\d&#123;1,2&#125;月\d&#123;1,2&#125;日)/</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>&lt;span id=<span class="string">"pubtime_baidu"</span>&gt;<span class="number">2020</span><span class="number">-04</span><span class="number">-21</span> <span class="number">08</span>:<span class="number">53</span>:<span class="number">46</span>&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">2. &lt;div class="left-t"&gt;2020年04月21日 09:08　来源：法制日报&lt;a href="#zw_cyhd" target="_self"&gt; </span></span><br><span class="line"><span class="regexp">3.也有可能是这种 20-03-11</span></span><br></pre></td></tr></table></figure>
<ul>
<li>其实我们要匹配的是这个出版时间,因为新闻嘛，总要讲究出版时间，所以我们要把他们都找出来</li>
<li>因为出版时间有多种形式，有可能是19-08-19类的，有可能是2020/03/20，也有可能是2020年04月21日</li>
</ul>
<ol>
<li>\d{4} 出现四个数字，也就是匹配年份</li>
<li>\d{2}  出现两个数字，也是年份，只不过可能是19-xx-xx也有可能是 2019-xx-xx 所以在中间加个|表示或</li>
<li>( \-|\/|\.)其实是最难的，因为信息量很大，其实她想说的就是中间连字符的种类，可能是 -，可能是/,可能是 .  中间两个| 就是表示或者的意思</li>
<li>\d{1,2}是匹配月份的，有可能是 1，也有可能是01</li>
<li>\3比较难理解，这个\3其实就是匹配左边开始数第三个左括号的，也就是( \-|\/|\.)，其实也是月和日之间的连接符</li>
<li>\d{1,2}匹配的是日期</li>
<li>前面完全是数字字符来表达年月日，不过也存在2020年4月21日这种情况，那么我们如何解决？| 就完事了</li>
<li>| 后面匹配的就是2020年4月21日这类的日期表达</li>
</ol>
<p>下图就是\3 这类\后面加上数字的作用</p>
<img src="/2020/04/20/%E5%88%9D%E8%AF%86%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/04/20/%E5%88%9D%E8%AF%86%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/3.png" class>
<h4 id="最后来看看我的爬虫中的正则表达式"><a href="#最后来看看我的爬虫中的正则表达式" class="headerlink" title="最后来看看我的爬虫中的正则表达式"></a>最后来看看我的爬虫中的正则表达式</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> regExp =<span class="regexp">/\/.\/.&#123;8&#125;\//</span></span><br></pre></td></tr></table></figure>
<p>我要爬取的网站是 <a href="https://www.smzdm.com/" target="_blank" rel="noopener">https://www.smzdm.com/</a> 什么值得买网站（为了找我喜欢的咖啡具）</p>
<p>然后我们来看看子网页</p>
<p><img src="/2020/04/20/%E5%88%9D%E8%AF%86%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/正.png" alt="示例"></p>
<p>按照上面的方法，我们来找找看子网页的url</p>
<p><a href="https://post.smzdm.com/p/alpwnzve/" target="_blank" rel="noopener">https://post.smzdm.com/p/alpwnzve/</a></p>
<p><a href="https://post.smzdm.com/p/awxqrv02/" target="_blank" rel="noopener">https://post.smzdm.com/p/awxqrv02/</a></p>
<p>规律是很明显的，我们需要匹配的就是  /p/alpwnzve/ </p>
<ol>
<li>\/匹配的就是/</li>
<li>.匹配的是任何字符（除了\n),当然也可以用[a-zA-Z]代替</li>
<li>\/又匹配的是/</li>
<li>.{8} 匹配的就是 连续八个字符，这里匹配的就是alpwnzve之类的</li>
<li>\/匹配的还是/</li>
</ol>
<p>来看看我们的匹配结果</p>
<p><img src="/2020/04/20/%E5%88%9D%E8%AF%86%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/33.png" alt="示例"></p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>写到这里，我们对正则表达式都有了一个基本的概念了，学会了正则表达式，在爬虫的项目中就解决了一个很大的难题。</p>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/04/20/%E7%94%A8nodejs%E6%9D%A5%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E7%88%AC%E8%99%AB%E6%9D%A5%E7%88%AC%E5%8F%96%E7%BD%91%E9%A1%B5%E4%BF%A1%E6%81%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/%5Bobject%20Object%5D">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/04/20/%E7%94%A8nodejs%E6%9D%A5%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E7%88%AC%E8%99%AB%E6%9D%A5%E7%88%AC%E5%8F%96%E7%BD%91%E9%A1%B5%E4%BF%A1%E6%81%AF/" itemprop="url">用nodejs来制作一个简单的爬虫来爬取网页信息</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-04-20T22:33:38+08:00">
                2020-04-20
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2020-05-09T18:14:48+08:00">
                2020-05-09
              </time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="用nodejs来制作一个简单的爬虫来爬取网页信息"><a href="#用nodejs来制作一个简单的爬虫来爬取网页信息" class="headerlink" title="用nodejs来制作一个简单的爬虫来爬取网页信息"></a>用nodejs来制作一个简单的爬虫来爬取网页信息</h1><h2 id="写在前面——知其然也要知其所以然"><a href="#写在前面——知其然也要知其所以然" class="headerlink" title="写在前面——知其然也要知其所以然"></a>写在前面——知其然也要知其所以然</h2><ul>
<li><p>像我这样连冲个咖啡豆要记笔记的人，怎么能写自己都看不懂的博客呢？所以我的目标是你读完了我的博客，也可以写出爬虫来。</p>
</li>
<li><p>这一篇是目录性质的博客，冰冻三尺非一日之寒，爬虫项目只写一篇博客是完全不够的，所以我打算用分而治之的框架来完成这篇博客的内容。我想把它分成几个部分，逐个击破，已达到融会贯通的地步（显然这是基本不可能的）</p>
</li>
<li><p>最近学校的web编程课要求我们做一个爬虫来爬取网页信息，老师给出了一个新闻网站的爬取，但是因为缺少对JavaScript语言的认识和运用，用nodejs来写显得举步维艰。（水平过于低下）</p>
</li>
<li>前三个问题，注重于基础知识，是为正式的爬虫项目打基础、做准备的，罗马不是一天建成的，有了前面的基础知识，对爬虫有了初步了解，才能够有能力看得懂（我说只是有能力看懂）每一步的操作</li>
</ul>
<ol>
<li><h6 id="对JavaScript语法的陌生"><a href="#对JavaScript语法的陌生" class="headerlink" title="对JavaScript语法的陌生"></a>对JavaScript语法的陌生</h6></li>
<li><h6 id="对爬虫原理的陌生"><a href="#对爬虫原理的陌生" class="headerlink" title="对爬虫原理的陌生"></a>对爬虫原理的陌生</h6></li>
<li><p>对正则表达式的陌生</p>
</li>
<li><p>爬虫项目中引用的包及其用法</p>
</li>
<li><p>如何选定一个网站，并模仿老师的代码开始我的爬虫项目？</p>
</li>
<li><p>用JSON格式存储时的重名问题</p>
</li>
<li><p>对爬取特定信息的格式问题</p>
</li>
<li><p>将数据存储到MySql时遇到的问题</p>
</li>
<li><p>如何用mysql查询已经爬取的数据</p>
</li>
<li><p>用网页发送请求到后端查询</p>
</li>
<li><p>用express构建网站访问mysql</p>
</li>
<li><p>用表格显示查询结果</p>
</li>
<li><p>爬虫定时工作</p>
</li>
<li><p>尝试其他的扩展（留给读者，或者无限期暂停更新）</p>
</li>
</ol>
<ul>
<li>所以，这篇文章列举了我在写爬虫项目时候的种种问题和解答，如果篇幅不长，我会直接在博文里介绍，如果篇幅过长，我会另写一篇博客，并在这里附上链接，以供读者方便切换阅读</li>
</ul>
<h3 id="1-对JavaScript语法的陌生"><a href="#1-对JavaScript语法的陌生" class="headerlink" title="1.对JavaScript语法的陌生"></a>1.对JavaScript语法的陌生</h3><h4 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h4><p>在大一下之前，我对JavaScript一脸茫然，甚至认为JavaScript和Java是一种语言，这显然是过于荒唐的一件事。认真学习JavaScript也是在网课进行了一个半月之后。</p>
<h4 id="如何解决？"><a href="#如何解决？" class="headerlink" title="如何解决？"></a>如何解决？</h4><p>对于老师的每章节网课，我都有在博客上记笔记，可以看看我的JavaScript语法系列博客</p>
<p><a href="https://jasonxqh.github.io/2020/04/20/JavaScript-4表达式和运算符/">Javascript表达式和运算符</a></p>
<p><a href="https://jasonxqh.github.io/2020/04/21/Javascript-5语句/">Javascript语句</a></p>
<p><a href="https://jasonxqh.github.io/2020/04/21/Javascript-6对象/">Javascript对象</a></p>
<p><a href="https://jasonxqh.github.io/2020/04/21/Javascript-7数组/">Javascript数组</a></p>
<p><a href="https://jasonxqh.github.io/2020/04/21/Javascript-8函数/">JavaScript函数</a></p>
<p>在没有学习过Javascript语法的时候，就上手爬虫项目，无异于以卵击石，自不量力。对于每一句话，每一个函数，都在脑子中缓缓打出一个？</p>
<h3 id="2-对爬虫原理的陌生"><a href="#2-对爬虫原理的陌生" class="headerlink" title="2.对爬虫原理的陌生"></a>2.对爬虫原理的陌生</h3><h4 id="起因-1"><a href="#起因-1" class="headerlink" title="起因"></a>起因</h4><p> 这方面对于没有学过爬虫原理的我来说要理解起来确实有点困难，但是幸好老师提供了几期视频来阐述，于是懵懵懂懂有个概念。</p>
<h4 id="如何解决？-1"><a href="#如何解决？-1" class="headerlink" title="如何解决？"></a>如何解决？</h4><p>看了几遍老师的代码和讲解后，可以简单得将爬虫的思想列举一下</p>
<ol>
<li>首先我们搜索主页面，获取我们想要的子网页的URL<ul>
<li>通过request请求，cheerio解析，each遍历</li>
</ul>
</li>
<li>搜索出我们子网页页面中我们需要的信息：标题，正文等<ul>
<li>通过request请求，cheerio解析</li>
</ul>
</li>
<li>将这些我们需要的信息保存下来，通过各种形式访问到这种信息<ul>
<li>建立fetch(文件对象)，输入文件信息，fs /mysql模块写入</li>
</ul>
</li>
</ol>
<p>读到这里，你只需要了解我们要一步步完成的目标就行，具体的工具我会在接下来的文章中一一讲述。</p>
<h3 id="3-对正则表达式的陌生"><a href="#3-对正则表达式的陌生" class="headerlink" title="3.对正则表达式的陌生"></a>3.对正则表达式的陌生</h3><h4 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h4><p>没有接触过正则表达式，一开始看到的时候感叹——这像天书般的\/{}$.+-[]根本无从下手<br>有一说一，我就是因为看不懂这么几行正则表达式，才迟迟不开始爬虫作业（特别不好学）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> url_reg = <span class="regexp">/\/(\d&#123;4&#125;)\/(\d&#123;2&#125;)-(\d&#123;2&#125;)\/(\d&#123;7&#125;).shtml/</span>;</span><br><span class="line"><span class="keyword">var</span> regExp = <span class="regexp">/((\d&#123;4&#125;|\d&#123;2&#125;)(\-|\/|\.)\d&#123;1,2&#125;\3\d&#123;1,2&#125;)|(\d&#123;4&#125;年\d&#123;1,2&#125;月\d&#123;1,2&#125;日)/</span></span><br></pre></td></tr></table></figure>
<h4 id="如何解决？-2"><a href="#如何解决？-2" class="headerlink" title="如何解决？"></a>如何解决？</h4><p>显然，ddl是第一生产力。只剩下两周的时间了，我找了几期正则表达式的教学视频来补习了一下，也是勉强有了大概，并且用了这个页面上的正则表达式检测器练习了几遍。</p>
<ul>
<li><a href="https://c.runoob.com/front-end/854" target="_blank" rel="noopener">菜鸟工具</a></li>
<li>咦，他叫自己菜鸟工具，正好，非常适合我。</li>
<li>这里补充一下练习模式，就是在某一个网站上找源代码，然后找全部都是一种模式的网址或者图片。对着他写下你的正则表达式，然后把源代码复制到这个菜鸟工具中，检测一下是否把你想要的哪些网站都搜索出来了。</li>
<li>笨方法才是好方法，要写自己看的懂的，不要用很巧妙的正则表达式，当然大佬自动忽略。</li>
<li>程度，现在勉强可以看着网址写出他的正则表达式了</li>
<li>关于我如何学习正则表达式和正则表达式的具体概念，参见我的另一篇博客 —初识正则表达式   </li>
<li><a href="https://jasonxqh.github.io/2020/04/20/初识正则表达式/">初识正则表达式</a>  </li>
</ul>
<h3 id="4-爬虫项目中引用的包及其用法"><a href="#4-爬虫项目中引用的包及其用法" class="headerlink" title="4.爬虫项目中引用的包及其用法"></a>4.爬虫项目中引用的包及其用法</h3><h4 id="起因-2"><a href="#起因-2" class="headerlink" title="起因"></a>起因</h4><ul>
<li>我们不能简单的把几个模块引用过来但不知道其具体作用</li>
</ul>
<h4 id="如何解决？-3"><a href="#如何解决？-3" class="headerlink" title="如何解决？"></a>如何解决？</h4><ul>
<li><p>因此，我另写了篇博客来谈谈爬虫中需要引入的模块和它们的作用</p>
</li>
<li><p><a href="https://jasonxqh.github.io/2020/04/23/爬虫项目中引用的包及其用法/">爬虫项目中引用的包及其用法</a></p>
</li>
</ul>
<h3 id="5-如何选定一个网站，并模仿老师的代码开始我的爬虫项目？"><a href="#5-如何选定一个网站，并模仿老师的代码开始我的爬虫项目？" class="headerlink" title="5.如何选定一个网站，并模仿老师的代码开始我的爬虫项目？"></a>5.如何选定一个网站，并模仿老师的代码开始我的爬虫项目？</h3><h4 id="起因-3"><a href="#起因-3" class="headerlink" title="起因"></a>起因</h4><p>读懂了老师的代码，才是开始自己爬虫的第一步。那么，是应该选择什么网站来开始我的爬虫项目呢？娱乐网站?新闻网站？购物网站？ 最后，作为练习时长大半年的<del>个人练习生</del> 吧台手和资深键盘咖啡师的我来说，还是选择了什么值得买网站作为我的第一个爬虫项目（想看看大家的开箱报告）</p>
<h4 id="如何解决"><a href="#如何解决" class="headerlink" title="如何解决"></a>如何解决</h4><p>因为这里的空间不是很够，所以我会新建一篇博客详细讨论一下我是如何解决的</p>
<p><a href="https://jasonxqh.github.io/2020/04/23/模仿老师的代码开始自己的爬虫项目/">模仿老师的代码开始自己的爬虫项目</a></p>
<h3 id="6-用JSON格式存储时的重名问题"><a href="#6-用JSON格式存储时的重名问题" class="headerlink" title="6.用JSON格式存储时的重名问题"></a>6.用JSON格式存储时的重名问题</h3><p>我写完代码之后，已经成功地转码了</p>
<ol>
<li>但是却没有.json文件保存下来</li>
<li>存储下来了，但不是JSON文件</li>
</ol>
<h4 id="如何解决-1"><a href="#如何解决-1" class="headerlink" title="如何解决"></a>如何解决</h4><h5 id="问题1"><a href="#问题1" class="headerlink" title="问题1"></a>问题1</h5><p>问了助教和老师之后，在大家一起努力下，找到了问题并成功解决了。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> filename = source_name + <span class="string">"_"</span> + (<span class="keyword">new</span> <span class="built_in">Date</span>()).toFormat(<span class="string">"YYYY-MM-DD"</span>) +</span><br><span class="line"><span class="string">"_"</span> + myURL.substr(myURL.lastIndexOf(<span class="string">'/'</span>) + <span class="number">1</span>) + <span class="string">".json"</span>;</span><br></pre></td></tr></table></figure>
<p>一开始，我和老师命名文件的时候用的是同一行代码，但是很显然，这个存储方法不是放诸四海皆准的，我们需要结合网站的url和具体作用来具体分析，然后再选择一个不会让文件重名的命名方法.</p>
<p>说白了，就是你怎样通过字符串拼接来给这么多文件取互不相同的名字？？</p>
<p><strong>首先看看中国新闻网的（子网页）URL</strong></p>
<p><a href="http://www.chinanews.com/gn/2020/04-23/9166028.shtml" target="_blank" rel="noopener">http://www.chinanews.com/gn/2020/04-23/9166028.shtml</a></p>
<p> <strong>再来看看什么值得买 (子网页）的URL</strong></p>
<p><a href="https://post.smzdm.com/p/531543/" target="_blank" rel="noopener">https://post.smzdm.com/p/531543/</a></p>
<p>结合老师的命名方法，我们一步一步分析,</p>
<ol>
<li><p>source_name 是我们规定的，在老师的代码里，是”中国新闻网”，在我的代码里是”什么值得买“，到现在，所有文件的命名都是一样的</p>
</li>
<li><p>(new Date()).toFormat(“YYYY-MM-DD”) 是用一个新的Date()对象，然后转码成YYYY-MM-DD的形式，如果在这里我仍然和老师的代码一样，那么到这里，所有的文件命名也还是一样的</p>
</li>
<li><p>最关键的一点，老师的这部分 myURL.substr(myURL.lastIndexOf(‘/‘) + 1)，也就是说，他截取了URL的一部分，那么，是从什么时候开始截取 的呢？</p>
<ol>
<li><p>lastIndexOf()这个api在我的Javascript数组这篇博客中有些到，就是从尾部开始遍历数组或者字符串，返回’/‘出现的第一个索引，然后把他加1</p>
</li>
<li><p>substr是字符串截取函数，这里是从myURL.lastIndexOf(‘/‘) + 1处开始截取，一直到末尾结束</p>
</li>
<li><p>我们可以看到，根据上面那个例子最后一个’/‘+1之后的字符串为9166028.shtml，而这一部分对中国新闻网的每一个页面都是不同的</p>
</li>
</ol>
</li>
<li><p>但是我的URL呢？我们如果用myURL.substr(myURL.lastIndexOf(‘/‘) + 1)这个方法呢？</p>
<ol>
<li>从什么值得买子网页可以看出，最后一个‘/’就是字符串中的最后一位，所以再加一，再截取，那么我们根本截取不到任何东西！！！</li>
</ol>
</li>
<li><p>所以这就出现了问题，老师在这一步已经完成了不同文件的命名，但我这时候所有的文件命名任然是一样的</p>
</li>
<li><p>最后只是加上后缀名’.json’,大家都一样</p>
</li>
</ol>
<ul>
<li><p>那么这就是问题的痛点了。我因为所有的文件名字都一样，所以电脑上更本无法保存，如何修改呢？？</p>
</li>
<li><p>通过老师的点拨，我对代码做了这样的修改</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> filename = source_name + <span class="string">"_"</span> +(<span class="keyword">new</span> <span class="built_in">Date</span>()).valueOf()+<span class="string">"_"</span>+<span class="string">".json"</span>;</span><br></pre></td></tr></table></figure>
<ol>
<li>我把新的Date()对象，使用了valueOf()的方法（返回的是毫秒数）</li>
<li>因为爬取每个页面的时间精确到毫秒级别，所以单单提取秒数是远远不够的，所以我没有用getSeconds()方法，而用了valueOf()方法</li>
<li><p>经过再操作，这个问题解决了！</p>
<h5 id="问题2"><a href="#问题2" class="headerlink" title="问题2"></a>问题2</h5></li>
</ol>
<p>现在，我已经实现了保存文件，但是，却都是这样的</p>
<p> <img src="/2020/04/20/%E7%94%A8nodejs%E6%9D%A5%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E7%88%AC%E8%99%AB%E6%9D%A5%E7%88%AC%E5%8F%96%E7%BD%91%E9%A1%B5%E4%BF%A1%E6%81%AF/2.png" alt="示例"></p>
<p>他没有任何的文件类型，这是啥情况呢</p>
<p><strong>返回代码本身，看看 .json 之前出了什么问题</strong></p>
<p>果然，我们发现了一个多余的下划线，本来是在老师的代码里面连接9166028.shtml用的，我没有把他删掉，这样， 下划线和.json的. 相连接，不符合命名规范。所以无法存储</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> filename = source_name + <span class="string">"_"</span> +(<span class="keyword">new</span> <span class="built_in">Date</span>()).valueOf() +<span class="string">".json"</span>;</span><br></pre></td></tr></table></figure>
<p>改成这样后，再运行，就完美了</p>
<p><img src="/2020/04/20/%E7%94%A8nodejs%E6%9D%A5%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E7%88%AC%E8%99%AB%E6%9D%A5%E7%88%AC%E5%8F%96%E7%BD%91%E9%A1%B5%E4%BF%A1%E6%81%AF/3.png" alt="示例"></p>
<h3 id="7-对爬取特定信息的格式问题"><a href="#7-对爬取特定信息的格式问题" class="headerlink" title="7.对爬取特定信息的格式问题"></a>7.对爬取特定信息的格式问题</h3><h4 id="起因-4"><a href="#起因-4" class="headerlink" title="起因"></a>起因</h4><p>我准备爬取一个title和文章的内容，但是一开始只有文章内容被保留了下来，title并没有被爬取到</p>
<h4 id="如何解决？-4"><a href="#如何解决？-4" class="headerlink" title="如何解决？"></a>如何解决？</h4><p>助教一阵见血的指出了我的错误</p>
<ul>
<li>原来，本来我的代码是这样的：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> interface_format = <span class="string">"$('.edit_interface').text()"</span></span><br></pre></td></tr></table></figure>
<ul>
<li>然而，网站里的源代码竟然是这样的</li>
</ul>
<p><img src="/2020/04/20/%E7%94%A8nodejs%E6%9D%A5%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E7%88%AC%E8%99%AB%E6%9D%A5%E7%88%AC%E5%8F%96%E7%BD%91%E9%A1%B5%E4%BF%A1%E6%81%AF/4.png" alt="示例"></p>
<p>我们看见\<span class="edit_interface"> \</span> 这一行代码没有任何东西！</p>
<p>所以，我们爬取下来的文件，变成了这样：</p>
<p><img src="/2020/04/20/%E7%94%A8nodejs%E6%9D%A5%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E7%88%AC%E8%99%AB%E6%9D%A5%E7%88%AC%E5%8F%96%E7%BD%91%E9%A1%B5%E4%BF%A1%E6%81%AF/5.png" alt="示例"></p>
<p>当我们改成下面代码的时候，一切都好起来了</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> interface_format = <span class="string">"$('h1.item-name').text()"</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/04/20/%E7%94%A8nodejs%E6%9D%A5%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E7%88%AC%E8%99%AB%E6%9D%A5%E7%88%AC%E5%8F%96%E7%BD%91%E9%A1%B5%E4%BF%A1%E6%81%AF/6.png" alt="示例"></p>
<h3 id="8-如何把数据存储到MySql中？"><a href="#8-如何把数据存储到MySql中？" class="headerlink" title="8.如何把数据存储到MySql中？"></a>8.如何把数据存储到MySql中？</h3><h4 id="起因-5"><a href="#起因-5" class="headerlink" title="起因"></a>起因</h4><p>如果说只能把内容存储到json文件中，那管理起来很麻烦。我们可以通过修改一下代码，让内容存储到数据库当中</p>
<h4 id="如何解决-2"><a href="#如何解决-2" class="headerlink" title="如何解决"></a>如何解决</h4><p>看了老师的视频之后，在问过助教之后，最终解决了</p>
<p>具体怎么解决，请看我的子博文：如何把数据存储到MySql中</p>
<p><a href="https://jasonxqh.github.io/2020/04/24/如何把数据存储到MySql中/">如何把数据存储到MySql中？</a></p>
<h3 id="9-如何用mysql查询已经爬取的数据"><a href="#9-如何用mysql查询已经爬取的数据" class="headerlink" title="9.如何用mysql查询已经爬取的数据"></a>9.如何用mysql查询已经爬取的数据</h3><h4 id="起因-6"><a href="#起因-6" class="headerlink" title="起因"></a>起因</h4><ul>
<li>已经爬取到了那么多数据，并且存放到了Mysql中了，那么怎么才能访问、查询他们呢？</li>
</ul>
<h4 id="如何解决-3"><a href="#如何解决-3" class="headerlink" title="如何解决"></a>如何解决</h4><ul>
<li>大量搜寻： <ul>
<li>select title,url from fetches                 //title，url可以换成任意种类，但这样所有的数据都会呈现</li>
<li>select title,url from fetches limit 20  //这样，呈现的信息就被限制在了20条</li>
<li>因为这样搜索的结果已经在<a href="https://jasonxqh.github.io/2020/04/24/如何把数据存储到MySql中/">如何把数据存储到MySql中?</a>这篇博文中有所展示，因此不予赘述</li>
</ul>
</li>
<li>关键词搜寻<ul>
<li>select title,author,publish_date from fetches where title like ‘%新冠%’；</li>
<li>结果如下</li>
<li><img src="/2020/04/20/%E7%94%A8nodejs%E6%9D%A5%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E7%88%AC%E8%99%AB%E6%9D%A5%E7%88%AC%E5%8F%96%E7%BD%91%E9%A1%B5%E4%BF%A1%E6%81%AF/7.png" alt="示例"></li>
<li>select interface_format,url,crawltime from fetches where interface_format like ‘%咖啡%’;</li>
<li>结果如下</li>
<li><img src="/2020/04/20/%E7%94%A8nodejs%E6%9D%A5%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E7%88%AC%E8%99%AB%E6%9D%A5%E7%88%AC%E5%8F%96%E7%BD%91%E9%A1%B5%E4%BF%A1%E6%81%AF/8.png" alt="示例"></li>
</ul>
</li>
<li>利用js文件搜寻</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mysql = <span class="built_in">require</span>(<span class="string">'./mysql_coffee.js'</span>);</span><br><span class="line"><span class="keyword">var</span> title = <span class="string">'咖啡'</span>;</span><br><span class="line"><span class="keyword">var</span> select_Sql = <span class="string">"select  interface_format,url,crawltime  from fetches where interface_format like '%"</span> + title + <span class="string">"%'"</span>;</span><br><span class="line"></span><br><span class="line">mysql.query(select_Sql, <span class="function"><span class="keyword">function</span>(<span class="params">qerr, vals, fields</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(vals);</span><br><span class="line">&#125;);</span><br><span class="line">------------------------------------------------------------------------------</span><br><span class="line"><span class="keyword">var</span> mysql = <span class="built_in">require</span>(<span class="string">'./mysql.js'</span>);</span><br><span class="line"><span class="keyword">var</span> title = <span class="string">'新冠'</span>;</span><br><span class="line"><span class="keyword">var</span> select_Sql = <span class="string">"select title,author,publish_date from fetches where title like '%"</span> + title + <span class="string">"%'"</span>;</span><br><span class="line"></span><br><span class="line">mysql.query(select_Sql, <span class="function"><span class="keyword">function</span>(<span class="params">qerr, vals, fields</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(vals);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//第一部分是老师的文件，第二部分是我的搜索文件</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">首先，是引用的文件不一样，一个是引用了mysql_coffee.js，另一个是mysql.js这决定了查询的数据库不同</span></span><br><span class="line"><span class="comment">其次，我的关键词是咖啡，老师的关键词是新冠</span></span><br><span class="line"><span class="comment">再然，我搜索的是标题、链接和爬取时间，老师搜索的是标题，作者，出版时间</span></span><br><span class="line"><span class="comment">注意： 不管是前面多么不一样 最后的  '%" + title + "%' 始终是一样的，这个title不是存储类型</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<ul>
<li>来看看结果</li>
<li>老师的结果</li>
<li><img src="/2020/04/20/%E7%94%A8nodejs%E6%9D%A5%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E7%88%AC%E8%99%AB%E6%9D%A5%E7%88%AC%E5%8F%96%E7%BD%91%E9%A1%B5%E4%BF%A1%E6%81%AF/9.png" alt="示例"></li>
<li>我的结果</li>
<li><img src="/2020/04/20/%E7%94%A8nodejs%E6%9D%A5%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E7%88%AC%E8%99%AB%E6%9D%A5%E7%88%AC%E5%8F%96%E7%BD%91%E9%A1%B5%E4%BF%A1%E6%81%AF/10.png" alt="示例"></li>
</ul>
<h3 id="10-如何用网页发送请求到后端查询"><a href="#10-如何用网页发送请求到后端查询" class="headerlink" title="10.如何用网页发送请求到后端查询"></a>10.如何用网页发送请求到后端查询</h3><h4 id="起因："><a href="#起因：" class="headerlink" title="起因："></a>起因：</h4><ul>
<li>怎么样在网页上查询关键词，并在我的后端返回结果呢？</li>
</ul>
<h4 id="解决方法："><a href="#解决方法：" class="headerlink" title="解决方法："></a>解决方法：</h4><ul>
<li>首先，我们创建一个html前端</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"http://127.0.0.1:8080/7.02.html"</span> <span class="attr">method</span>=<span class="string">"GET"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span> 标题：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"title"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"Submit"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>具体样式如下</li>
</ul>
<p><img src="/2020/04/20/%E7%94%A8nodejs%E6%9D%A5%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E7%88%AC%E8%99%AB%E6%9D%A5%E7%88%AC%E5%8F%96%E7%BD%91%E9%A1%B5%E4%BF%A1%E6%81%AF/11.png" alt="示例"></p>
<ul>
<li>随后，我们建立一个后端，这里用了http模块，而没有用其他框架</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">var</span> url = <span class="built_in">require</span>(<span class="string">'url'</span>);</span><br><span class="line"><span class="keyword">var</span> mysql = <span class="built_in">require</span>(<span class="string">'./mysql.js'</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http.createServer(<span class="function"><span class="keyword">function</span>(<span class="params">request, response</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> pathname = url.parse(request.url).pathname;</span><br><span class="line">    <span class="keyword">var</span> params = url.parse(request.url, <span class="literal">true</span>).query; </span><br><span class="line">    <span class="comment">//先去读取文件</span></span><br><span class="line">    fs.readFile(pathname.substr(<span class="number">1</span>), <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">        response.writeHead(<span class="number">200</span>, &#123; <span class="string">'Content-Type'</span>: <span class="string">'text/html; charset=utf-8'</span> &#125;);</span><br><span class="line">        <span class="comment">//如果文件非空，那么先把文件给打印出来</span></span><br><span class="line">        <span class="keyword">if</span> ((params.title === <span class="literal">undefined</span>) &amp;&amp; (data !== <span class="literal">undefined</span>))</span><br><span class="line">            response.write(data.toString());</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//否则，我们去数据库寻找，并打印出来</span></span><br><span class="line">            response.write(<span class="built_in">JSON</span>.stringify(params));</span><br><span class="line">            <span class="comment">//数据库查找语言：title,author,publish_date这些都是存储的数据类型</span></span><br><span class="line">            <span class="comment">//where title like title就是要查询的关键词所在的数据类型，一般都是title</span></span><br><span class="line">            <span class="comment">// params.title 就是我们在网站上搜寻的关键词</span></span><br><span class="line">            <span class="keyword">var</span> select_Sql = <span class="string">"select title,author,publish_date from fetches where title like '%"</span> +</span><br><span class="line">                params.title + <span class="string">"%'"</span>;</span><br><span class="line">            mysql.query(select_Sql, <span class="function"><span class="keyword">function</span>(<span class="params">qerr, vals, fields</span>) </span>&#123;</span><br><span class="line">                <span class="comment">//把这些打印出来</span></span><br><span class="line">                <span class="built_in">console</span>.log(vals);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        response.end();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;).listen(<span class="number">8080</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'Server running at http://127.0.0.1:8080/7.02.html'</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>我们可以看到，老师的代码运行后，在搜索框中写入  新冠 后是这样一个结果</li>
</ul>
<p><img src="/2020/04/20/%E7%94%A8nodejs%E6%9D%A5%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E7%88%AC%E8%99%AB%E6%9D%A5%E7%88%AC%E5%8F%96%E7%BD%91%E9%A1%B5%E4%BF%A1%E6%81%AF/12.png" alt="示例"></p>
<ul>
<li>而我们对这个代码稍加修改，马上可以爬取到自己想要的文件</li>
<li>比如，我想在什么值得买 表格中搜寻 ：咖啡 </li>
</ul>
<p><img src="/2020/04/20/%E7%94%A8nodejs%E6%9D%A5%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E7%88%AC%E8%99%AB%E6%9D%A5%E7%88%AC%E5%8F%96%E7%BD%91%E9%A1%B5%E4%BF%A1%E6%81%AF/13.png" alt="示例"></p>
<ul>
<li>又比如，我想在新浪网 表格上搜寻： 切尔西</li>
</ul>
<p><img src="/2020/04/20/%E7%94%A8nodejs%E6%9D%A5%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E7%88%AC%E8%99%AB%E6%9D%A5%E7%88%AC%E5%8F%96%E7%BD%91%E9%A1%B5%E4%BF%A1%E6%81%AF/14.png" alt="示例"></p>
<ul>
<li>再比如，我想在东方财富 表格上搜寻： 股市</li>
</ul>
<p><img src="/2020/04/20/%E7%94%A8nodejs%E6%9D%A5%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E7%88%AC%E8%99%AB%E6%9D%A5%E7%88%AC%E5%8F%96%E7%BD%91%E9%A1%B5%E4%BF%A1%E6%81%AF/15.png" alt="示例"></p>
<p>可以看出，这个问题就算是解决了。</p>
<h3 id="11-如何用express构建网站访问mysql"><a href="#11-如何用express构建网站访问mysql" class="headerlink" title="11.如何用express构建网站访问mysql"></a>11.如何用express构建网站访问mysql</h3><h4 id="起因-7"><a href="#起因-7" class="headerlink" title="起因"></a>起因</h4><ul>
<li>在后端显示其实意义不大，我们要在前端显示，才能体现搜寻效果，那么怎么才能前端现实呢？</li>
</ul>
<h4 id="如何解决-4"><a href="#如何解决-4" class="headerlink" title="如何解决"></a>如何解决</h4><ul>
<li>我们用express框架来构建</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    //唯一不同的是，把7.02html改成了process_get</span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"http://127.0.0.1:8080/process_get"</span> <span class="attr">method</span>=<span class="string">"GET"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span> 标题：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"title"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"Submit"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>然后我们用express来写后端，虽然功能更丰富，但是代码更为简洁</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">var</span> mysql = <span class="built_in">require</span>(<span class="string">'./mysql.js'</span>)</span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"><span class="comment">//app.use(express.static('public'));</span></span><br><span class="line">app.get(<span class="string">'/7.03.html'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    res.sendFile(__dirname + <span class="string">"/"</span> + <span class="string">"7.03.html"</span>);</span><br><span class="line">&#125;)</span><br><span class="line">app.get(<span class="string">'/process_get'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//先设置编码</span></span><br><span class="line">    res.writeHead(<span class="number">200</span>, &#123; <span class="string">'Content-Type'</span>: <span class="string">'text/html;charset=utf-8'</span> &#125;); <span class="comment">//设置res编码为utf-8</span></span><br><span class="line">    <span class="comment">//sql字符串和参数，和上面的代码相同</span></span><br><span class="line">    <span class="keyword">var</span> fetchSql = <span class="string">"select url,source_name,title,author,publish_date from fetches where title like '%"</span> +</span><br><span class="line">        req.query.title + <span class="string">"%'"</span>;</span><br><span class="line">    <span class="comment">//然后把这些参数放到result中</span></span><br><span class="line">    mysql.query(fetchSql, <span class="function"><span class="keyword">function</span>(<span class="params">err, result, fields</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(result);</span><br><span class="line">        <span class="comment">//json字符串话</span></span><br><span class="line">        res.end(<span class="built_in">JSON</span>.stringify(result));</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> server = app.listen(<span class="number">8080</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"访问地址为 http://127.0.0.1:8080/7.03.html"</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>通过简单的修改，我们可以查询到自己想要的文件</li>
<li>比如我想再什么值得买中搜寻咖啡</li>
</ul>
<p><img src="/2020/04/20/%E7%94%A8nodejs%E6%9D%A5%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E7%88%AC%E8%99%AB%E6%9D%A5%E7%88%AC%E5%8F%96%E7%BD%91%E9%A1%B5%E4%BF%A1%E6%81%AF/16.png" alt="示例"></p>
<ul>
<li>比如我想在虎扑上搜寻球</li>
</ul>
<p><img src="/2020/04/20/%E7%94%A8nodejs%E6%9D%A5%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E7%88%AC%E8%99%AB%E6%9D%A5%E7%88%AC%E5%8F%96%E7%BD%91%E9%A1%B5%E4%BF%A1%E6%81%AF/17.png" alt="示例"></p>
<ul>
<li>到这里，这个问题也解决了</li>
</ul>
<h3 id="12-如何用表格显示查询结果"><a href="#12-如何用表格显示查询结果" class="headerlink" title="12.如何用表格显示查询结果"></a>12.如何用表格显示查询结果</h3><h4 id="起因-8"><a href="#起因-8" class="headerlink" title="起因"></a>起因</h4><p>向上面的那种显示方法，还是缺少美观性，那么我们试试用表格显示查询结果</p>
<h4 id="如何解决？-5"><a href="#如何解决？-5" class="headerlink" title="如何解决？"></a>如何解决？</h4><p>这里的空间不是很够，请移步我的子博文： <a href="https://jasonxqh.github.io/2020/04/26/如何用表格显示查询结果/">如何用表格显示查询结果</a></p>
<h3 id="13-爬虫定时工作"><a href="#13-爬虫定时工作" class="headerlink" title="13.爬虫定时工作"></a>13.爬虫定时工作</h3><h4 id="起因：-1"><a href="#起因：-1" class="headerlink" title="起因："></a>起因：</h4><p>每次手动爬取太麻烦，怎么样才能定时操控爬虫呢？</p>
<h4 id="解决方法：-1"><a href="#解决方法：-1" class="headerlink" title="解决方法："></a>解决方法：</h4><ul>
<li>引入第三方包 node-schedule;</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install node-schedule;</span><br></pre></td></tr></table></figure>
<ul>
<li>爬虫代码中引入</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> schedule = <span class="built_in">require</span>(<span class="string">'node-schedule'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//定时执行</span></span><br><span class="line"><span class="keyword">var</span> rule = <span class="keyword">new</span> schedul.RecurrenceRule();</span><br><span class="line"><span class="keyword">var</span> times = [<span class="number">0</span>,<span class="number">12</span>];<span class="comment">//每天两次自动执行</span></span><br><span class="line"><span class="keyword">var</span> times2 = <span class="number">5</span>		<span class="comment">//分钟</span></span><br><span class="line">rule.hour = times;</span><br><span class="line">rule.minute = times2;</span><br><span class="line"><span class="comment">// 定时执行httpGet()函数</span></span><br><span class="line">schedule.scheduleJob(rule,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   seedget(); </span><br><span class="line">&#125;);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">seedget</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    request(seedURL, <span class="function"><span class="keyword">function</span>(<span class="params">err, res, body</span>) </span>&#123; <span class="comment">//读取种子页面</span></span><br><span class="line"><span class="comment">//  	.........</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="13-尝试其他的扩展（留给读者，或者无限期暂停更新）"><a href="#13-尝试其他的扩展（留给读者，或者无限期暂停更新）" class="headerlink" title="13.尝试其他的扩展（留给读者，或者无限期暂停更新）"></a>13.尝试其他的扩展（留给读者，或者无限期暂停更新）</h3><ul>
<li>对查询结果进行分页显示</li>
<li>对查询结果按每个字段进行排序</li>
<li>对多个查询条件进行复合查询</li>
<li>其他功能和性能的提升</li>
</ul>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>山再高，也得往上攀。浪波涛，也得去划船。我们在学习过程中需要有程序员精神。就是不断地发现问题，解决问题，虽然水平不高，但是大佬的水平也是在一次次的解决问题中提高的。 曾经自己认为高难度的作业也会一点一点被自己征服。</p>
<p>完成一个比较大的项目，一定要把它拆分成很多小问题，这也是一种很实用的编程思维。分而治之，逐个击破。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(项目未完成) </span><br><span class="line">&#123; </span><br><span class="line">    <span class="keyword">if</span>(出现了问题)</span><br><span class="line">    &#123;</span><br><span class="line">     学习 | | 问老师； </span><br><span class="line">        问题解决了没？ 项目继续：学习+寻求更多帮助；</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="鸣谢"><a href="#鸣谢" class="headerlink" title="鸣谢"></a>鸣谢</h2><ul>
<li>我初次尝试爬虫项目的时候，是助教高瑞卿学姐热心帮我解答了很多疑难问题，还帮我检查了代码中的错误。所以在博客的最后，特此感谢学姐的无私帮助。</li>
<li><p>在了解了我们的学习进度之后，王晔老师放宽了ddl，并且在视频中加入了很多在写爬虫时候的细节。并且也解答了我一部分问题，特此感谢。</p>
</li>
<li><p>前人栽树后人乘凉。感谢我的好朋友们，是你们在一些问题上的经验帮我规避了很多难题；感谢一些同学们写的博客，是看了你们的博客之后我才有了这篇博客的思路于灵感。</p>
</li>
</ul>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/04/20/17-09%E7%AC%ACk%E4%B8%AA%E6%95%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/%5Bobject%20Object%5D">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/04/20/17-09%E7%AC%ACk%E4%B8%AA%E6%95%B0/" itemprop="url">17.09第k个数</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-04-20T18:46:16+08:00">
                2020-04-20
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2020-06-21T12:50:42+08:00">
                2020-06-21
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/bfs/" itemprop="url" rel="index">
                    <span itemprop="name">bfs</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="下面是题目"><a href="#下面是题目" class="headerlink" title="下面是题目"></a>下面是题目</h2><p><img src="/2020/04/20/17-09%E7%AC%ACk%E4%B8%AA%E6%95%B0/k.png" alt></p>
<h3 id="下面是题目给出的模板"><a href="#下面是题目给出的模板" class="headerlink" title="下面是题目给出的模板"></a>下面是题目给出的模板</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getKthMagicNumber</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">    	 </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="用BFS-set可以完美遍历，真的太爽了"><a href="#用BFS-set可以完美遍历，真的太爽了" class="headerlink" title="用BFS+set可以完美遍历，真的太爽了"></a>用BFS+set可以完美遍历，真的太爽了</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">solution</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	  <span class="function"><span class="keyword">int</span> <span class="title">getKthMagicNumber</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line"><span class="comment">//有个小细节需要注意，那就是s.begin（）返回的是迭代器     //如果要在迭代器中取物，那么就要用 *     </span></span><br><span class="line"><span class="comment">//可能数字会很大，我们用long long 存储</span></span><br><span class="line">    	  <span class="built_in">set</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span>&gt;s;</span><br><span class="line">          s.insert(<span class="number">1</span>);</span><br><span class="line">          <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">          <span class="keyword">while</span>(k--)</span><br><span class="line">          &#123;</span><br><span class="line"><span class="comment">//利用set，完美解决了去重复、小到大排序的问题              </span></span><br><span class="line">              ans = *s.<span class="built_in">begin</span>();</span><br><span class="line">              s.erase(s.<span class="built_in">begin</span>);</span><br><span class="line">              s.insert(ans*<span class="number">3</span>);</span><br><span class="line">              s.insert(ans*<span class="number">5</span>);</span><br><span class="line">              s.insert(ans*<span class="number">7</span>);</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;   </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/04/20/933%E6%9C%80%E8%BF%91%E7%9A%84%E8%AF%B7%E6%B1%82%E6%AC%A1%E6%95%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/%5Bobject%20Object%5D">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/04/20/933%E6%9C%80%E8%BF%91%E7%9A%84%E8%AF%B7%E6%B1%82%E6%AC%A1%E6%95%B0/" itemprop="url">933最近的请求次数</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-04-20T18:45:47+08:00">
                2020-04-20
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2020-05-09T23:50:42+08:00">
                2020-05-09
              </time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="933最近请求次数"><a href="#933最近请求次数" class="headerlink" title="933最近请求次数"></a>933最近请求次数</h1><h1 id="下面是题目"><a href="#下面是题目" class="headerlink" title="下面是题目"></a>下面是题目</h1><p><img src="/2020/04/20/933%E6%9C%80%E8%BF%91%E7%9A%84%E8%AF%B7%E6%B1%82%E6%AC%A1%E6%95%B0/933.png" alt></p>
<h3 id="下面是题目给出的代码"><a href="#下面是题目给出的代码" class="headerlink" title="下面是题目给出的代码"></a>下面是题目给出的代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RecentCounter</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    RecentCounter() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">ping</span><span class="params">(<span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line">       </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;;</span><br><span class="line">  </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your RecentCounter object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * RecentCounter* obj = new RecentCounter();</span></span><br><span class="line"><span class="comment"> * int param_1 = obj-&gt;ping(t);</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<h4 id="这个题目我一开始没看懂，但是说人话，就是"><a href="#这个题目我一开始没看懂，但是说人话，就是" class="headerlink" title="这个题目我一开始没看懂，但是说人话，就是"></a>这个题目我一开始没看懂，但是说人话，就是</h4><p><strong>这道题说人话就是：t代表这个员工的工号，每次新员工t加入q公司前先把工号小于t -3000的老家伙都辞退，然后再让t入职，统计q公司现有几个员工</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RecentCounter</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	RecentCounter() &#123;&#125;</span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">ping</span><span class="params">(<span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line">		q.push(t);</span><br><span class="line">		<span class="keyword">while</span> (q.front() &lt; t - <span class="number">3000</span>) q.pop();</span><br><span class="line">		<span class="keyword">return</span> q.<span class="built_in">size</span>();</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt;q;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your RecentCounter object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * RecentCounter* obj = new RecentCounter();</span></span><br><span class="line"><span class="comment"> * int param_1 = obj-&gt;ping(t);</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/04/20/622%E8%AE%BE%E8%AE%A1%E5%BE%AA%E7%8E%AF%E9%98%9F%E5%88%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/%5Bobject%20Object%5D">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/04/20/622%E8%AE%BE%E8%AE%A1%E5%BE%AA%E7%8E%AF%E9%98%9F%E5%88%97/" itemprop="url">622设计循环队列</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-04-20T18:45:30+08:00">
                2020-04-20
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2020-04-20T20:34:22+08:00">
                2020-04-20
              </time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/04/20/641%E8%AE%BE%E8%AE%A1%E5%BE%AA%E7%8E%AF%E5%8F%8C%E7%AB%AF%E9%98%9F%E5%88%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/%5Bobject%20Object%5D">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/04/20/641%E8%AE%BE%E8%AE%A1%E5%BE%AA%E7%8E%AF%E5%8F%8C%E7%AB%AF%E9%98%9F%E5%88%97/" itemprop="url">641设计循环双端队列</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-04-20T18:45:11+08:00">
                2020-04-20
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2020-04-20T20:34:26+08:00">
                2020-04-20
              </time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/04/20/621%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6%E5%99%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/%5Bobject%20Object%5D">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/04/20/621%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6%E5%99%A8/" itemprop="url">621任务调度器</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-04-20T18:44:53+08:00">
                2020-04-20
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2020-05-09T23:54:28+08:00">
                2020-05-09
              </time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="621-任务调度器"><a href="#621-任务调度器" class="headerlink" title="621 任务调度器"></a>621 任务调度器</h1><h3 id="下面是题目"><a href="#下面是题目" class="headerlink" title="下面是题目"></a>下面是题目</h3><p><img src="/2020/04/20/621%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6%E5%99%A8/621.png" alt></p>
<h3 id="下面是题目给出的代码模板"><a href="#下面是题目给出的代码模板" class="headerlink" title="下面是题目给出的代码模板"></a>下面是题目给出的代码模板</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">leastInterval</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt;&amp; tasks, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="很显然我们要把题目读透"><a href="#很显然我们要把题目读透" class="headerlink" title="很显然我们要把题目读透"></a>很显然我们要把题目读透</h4><ul>
<li>假设数组 [“A”,”A”,”A”,”B”,”B”,”C”]，n = 2，A的频率最高，记为count = 3，所以两个A之间必须间隔2个任务，才能满足题意并且是最短时间（两个A的间隔大于2的总时间必然不是最短），因此执行顺序为： A-&gt;X-&gt;X-&gt;A-&gt;X-&gt;X-&gt;A，这里的X表示除了A以外其他字母，或者是待命，不用关心具体是什么，反正用来填充两个A的间隔的。上面执行顺序的规律是： 有count - 1个A，其中每个A需要搭配n个X，再加上最后一个A，所以总时间为 (count - 1) * (n + 1) + 1</li>
<li>要注意可能会出现多个频率相同且都是最高的任务，比如 [“A”,”A”,”A”,”B”,”B”,”B”,”C”,”C”]，所以最后会剩下一个A和一个B，因此最后要加上频率最高的不同任务的个数 maxCount</li>
</ul>
<h3 id="借助桶的思维，我们可以更直观的了解这题目的思路-不是我的题解！"><a href="#借助桶的思维，我们可以更直观的了解这题目的思路-不是我的题解！" class="headerlink" title="借助桶的思维，我们可以更直观的了解这题目的思路(不是我的题解！)"></a>借助桶的思维，我们可以更直观的了解这题目的思路(不是我的题解！)</h3><p><a href="https://leetcode-cn.com/problems/task-scheduler/solution/tong-zi-by-popopop/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/task-scheduler/solution/tong-zi-by-popopop/</a>  作者：popopop</p>
<p>上面是原帖，我按照他的基础加上了自己的理解</p>
<ol>
<li>建立大小为n+1的桶子，个数为任务数量最多的那个任务，比如下图，等待时间n=2，A任务个数6个，我们建立6个桶子，每个容量为3：<br>我们可以把一个桶子看作一轮任务</li>
</ol>
<p><img src="/2020/04/20/621%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6%E5%99%A8/621_1.png" alt></p>
<p><img src="/2020/04/20/621%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6%E5%99%A8/621_2.png" alt></p>
<ol>
<li><p>第二列、第三列的空格就是用来填剩下的任务的，这样能保证每个任务之间都间隔n个长度</p>
</li>
<li><p>但是，最后一个任务A的时间后没有了其他任务，所以完成任务A所需的时间应该是（6-1）*3+1=16</p>
</li>
</ol>
<p><strong>如果添加了任务的话，会怎么样呢</strong></p>
<p><img src="/2020/04/20/621%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6%E5%99%A8/621_4.png" alt></p>
<ol>
<li>可以看到C其实并没有对总体时间产生影响，因为它被安排在了其他任务的冷却期间；<br>而B和A数量相同，这会导致最后一个桶子中，我们需要多执行一次B任务，现在我们需要的时间是（6-1）*3+2=17</li>
</ol>
<p><strong>前面两种情况，总结起来：总排队时间 = (桶个数 - 1) * (n + 1) + 最后一桶的任务数</strong></p>
<ol>
<li>当冷却时间不够任务的总数，那么怎么办呢？</li>
</ol>
<p><img src="/2020/04/20/621%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6%E5%99%A8/621_5.png" alt></p>
<p>此时我们可以临时扩充某些桶子的大小，插进任务F，对比一下插入前后的任务执行情况：<br>插入前：ABC | ABC | ABD | ABD | ABD |AB<br>插入后：ABCF | ABCF | ABD | ABD | ABD |AB<br>我们在第一个、第二个桶子里插入了任务F，不难发现无论再继续插入多少任务，我们都可以类似处理，而且新插入元素肯定满足冷却要求<br>继续思考一下，这种情况下其实每个任务之间都不存在空余时间，冷却时间已经被完全填满了。<br>也就是说，我们执行任务所需的时间，就是任务的数量</p>
<p><strong>这样按公式算出来，那么所花费的时间是17，但是因为每个任务之间已经不存在空余时间，所以这时候任务所需的时间是19，所以要返回多的</strong></p>
<p><strong>所以，当任务之间存在空闲时间的时候，肯定是公式算出来的时间多，但是当任务之间没有空暇时间，那么任务的数量&gt;=公式的结果</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">leastInterval</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt;&amp; tasks, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> p[<span class="number">26</span>] ;</span><br><span class="line">        <span class="built_in">memset</span>(p,<span class="number">0</span>, <span class="keyword">sizeof</span>(p));</span><br><span class="line">		<span class="comment">//第一步，统计各个任务种类的频率</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i&lt;tasks.<span class="built_in">size</span>();i++)</span><br><span class="line">        &#123;</span><br><span class="line">            p[tasks[i]-<span class="string">'A'</span>]++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//第二部，将这个数组进行排序</span></span><br><span class="line">        sort(p,p+<span class="number">26</span>);</span><br><span class="line">        <span class="keyword">int</span> maxCount= <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//因为sort函数默认从小到大，所以我们反向遍历，看看有多少任务种类的频率和最大频率相等，需要在最后加上maxCount</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">25</span>;i&gt;=<span class="number">0</span>;i--)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(p[i]!=p[<span class="number">25</span>])</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            maxCount++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//最后比较大小后返回</span></span><br><span class="line">        <span class="keyword">return</span> (p[<span class="number">25</span>]<span class="number">-1</span>)*(n+<span class="number">1</span>)+maxCount&gt;tasks.<span class="built_in">size</span>()?(p[<span class="number">25</span>]<span class="number">-1</span>)*(n+<span class="number">1</span>)+maxCount:tasks.<span class="built_in">size</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/04/20/206%E5%8F%8D%E8%BD%AC%E9%93%BE%E8%A1%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/%5Bobject%20Object%5D">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/04/20/206%E5%8F%8D%E8%BD%AC%E9%93%BE%E8%A1%A8/" itemprop="url">206反转链表</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-04-20T17:26:20+08:00">
                2020-04-20
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2020-05-08T17:56:58+08:00">
                2020-05-08
              </time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="206反转链表"><a href="#206反转链表" class="headerlink" title="206反转链表"></a>206反转链表</h1><p><strong>写在前面</strong></p>
<ul>
<li>这篇的原文也在搭建博客中不幸牺牲</li>
<li>但是我还会简单注释一下</li>
<li>反转链表的作用很多，可以当作别的题目的子函数，比如回文，分隔等等</li>
</ul>
<h2 id="下面是题目"><a href="#下面是题目" class="headerlink" title="下面是题目"></a>下面是题目</h2><p><img src="/2020/04/20/206%E5%8F%8D%E8%BD%AC%E9%93%BE%E8%A1%A8/206.png" alt></p>
<h3 id="下面是题目给出的代码"><a href="#下面是题目给出的代码" class="headerlink" title="下面是题目给出的代码"></a>下面是题目给出的代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode *next;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) : val(x), next(NULL) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">ListNode* <span class="title">swapPairs</span><span class="params">(ListNode* head)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li>这里我会给出三种解法，分别是迭代法，递归法和双指针法</li>
</ul>
<h4 id="1-迭代法"><a href="#1-迭代法" class="headerlink" title="1.迭代法"></a>1.迭代法</h4><p><img src="/2020/04/20/206%E5%8F%8D%E8%BD%AC%E9%93%BE%E8%A1%A8/206迭代法.gif" alt></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">ListNode* <span class="title">reverseList</span><span class="params">(ListNode* head)</span> </span>&#123;</span><br><span class="line">        ListNode *cur = <span class="literal">NULL</span>;</span><br><span class="line">        ListNode *p = head;</span><br><span class="line">        <span class="keyword">while</span>(p !=<span class="literal">NULL</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//首先令一个临时节点指向 p后面的一个节点</span></span><br><span class="line">            ListNode *temp = p-&gt;next;</span><br><span class="line">            <span class="comment">//然后改变p的指针，当p为头节点的时候，那么p指向空。最后，原来的头节点就是尾巴节点</span></span><br><span class="line">            <span class="comment">//原来的尾节点就是新链表的头节点</span></span><br><span class="line">            p-&gt;next =cur;</span><br><span class="line">            <span class="comment">//然后每次要更新cur节点和p节点</span></span><br><span class="line">            cur=p;</span><br><span class="line">            p = temp;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cur;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="2-递归法"><a href="#2-递归法" class="headerlink" title="2. 递归法"></a>2. 递归法</h4><p><img src="/2020/04/20/206%E5%8F%8D%E8%BD%AC%E9%93%BE%E8%A1%A8/206递归法.gif" alt></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">ListNode* <span class="title">reverseList</span><span class="params">(ListNode* head)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(head==<span class="literal">NULL</span>||head-&gt;next ==<span class="literal">NULL</span>)</span><br><span class="line">            <span class="keyword">return</span> head;</span><br><span class="line">        ListNode*ret = reverseList(head-&gt;next);</span><br><span class="line">        head-&gt;next-&gt;next = head;</span><br><span class="line">        head-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="3-双指针法"><a href="#3-双指针法" class="headerlink" title="3.双指针法"></a>3.双指针法</h4><p><img src="/2020/04/20/206%E5%8F%8D%E8%BD%AC%E9%93%BE%E8%A1%A8/206双指针法.gif" alt></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//双指针法比较巧妙</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">ListNode* <span class="title">reverseList</span><span class="params">(ListNode* head)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(head==<span class="literal">NULL</span>)</span><br><span class="line">        <span class="keyword">return</span> head;</span><br><span class="line">    ListNode *cur =head;</span><br><span class="line">    <span class="keyword">while</span>(head-&gt;next!=<span class="literal">NULL</span>)</span><br><span class="line">    &#123;<span class="comment">//接下来的注释是基于第一次变换的</span></span><br><span class="line">        <span class="comment">//仍然令一个临时节点，让他指向头结点的下下个节点，方便节点更新</span></span><br><span class="line">        <span class="comment">//注意，这时候原链表的结构还没有发生改变</span></span><br><span class="line">        ListNode*t =head-&gt;next-&gt;next;</span><br><span class="line">        <span class="comment">//然后这个操作是让第二个节点指向cur，在这里暂时形成了一个闭环</span></span><br><span class="line">        head-&gt;next-&gt;next = cur;</span><br><span class="line">        <span class="comment">//然后实现head指针的断裂，这时候其实是一个自环</span></span><br><span class="line">        cur = head-&gt;next;</span><br><span class="line">        <span class="comment">//最后，更新head的指针，让他指向t</span></span><br><span class="line">        head-&gt;next = t;</span><br><span class="line">    &#125;</span><br><span class="line"> <span class="comment">//接下来的每一次循环，都实现了一次链表的暂时闭环和cur节点的移动</span></span><br><span class="line"><span class="comment">//同时，head-&gt;next也一步步指向尾节点</span></span><br><span class="line"><span class="comment">//最后，cur节点成功成为尾节点，并且cur前面的所有指针都实现了反指</span></span><br><span class="line">    <span class="keyword">return</span> cur;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/04/20/160%E7%9B%B8%E4%BA%A4%E9%93%BE%E8%A1%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/%5Bobject%20Object%5D">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/04/20/160%E7%9B%B8%E4%BA%A4%E9%93%BE%E8%A1%A8/" itemprop="url">160相交lianbiao</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-04-20T17:09:11+08:00">
                2020-04-20
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2020-05-08T17:55:54+08:00">
                2020-05-08
              </time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="160-相交链表"><a href="#160-相交链表" class="headerlink" title="160 相交链表"></a>160 相交链表</h1><h2 id="下面是题目"><a href="#下面是题目" class="headerlink" title="下面是题目"></a>下面是题目</h2><p><img src="/2020/04/20/160%E7%9B%B8%E4%BA%A4%E9%93%BE%E8%A1%A8/160.png" alt></p>
<h3 id="下面是题目给出的代码"><a href="#下面是题目给出的代码" class="headerlink" title="下面是题目给出的代码"></a>下面是题目给出的代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode *next;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) : val(x), next(NULL) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">ListNode *<span class="title">getIntersectionNode</span><span class="params">(ListNode *headA, ListNode *headB)</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li>首先我们要明白一个概念，什么是题目给出的相交节点？那就是地址是一样的，而不是val值一样的节点，这点非常关键，那么我们就要去找一下地址重合的那个节点</li>
</ul>
<p><img src="/2020/04/20/160%E7%9B%B8%E4%BA%A4%E9%93%BE%E8%A1%A8/160思路.png" alt></p>
<h4 id="下面是给出的解"><a href="#下面是给出的解" class="headerlink" title="下面是给出的解"></a>下面是给出的解</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">ListNode *<span class="title">getIntersectionNode</span><span class="params">(ListNode *headA, ListNode *headB)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        ListNode *commonNode = <span class="literal">nullptr</span>;</span><br><span class="line">        <span class="keyword">int</span> countA = <span class="number">0</span>, countB = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//老样子，双指针，解法</span></span><br><span class="line">        <span class="keyword">if</span>(headA!=<span class="literal">nullptr</span>&amp;&amp;headB!= <span class="literal">nullptr</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//首先，我们要分别计算两个链表的长度</span></span><br><span class="line">            <span class="keyword">int</span> countA = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">int</span> countB = <span class="number">0</span>;</span><br><span class="line">            ListNode *ptA = headA;</span><br><span class="line">            ListNode *ptB = headB;</span><br><span class="line">            <span class="keyword">while</span>(ptA!= <span class="literal">nullptr</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                ptA=ptA-&gt;next;</span><br><span class="line">                countA++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span>(ptB!= <span class="literal">nullptr</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                ptB=ptB-&gt;next;</span><br><span class="line">                countB++;</span><br><span class="line">            &#125;</span><br><span class="line">          	<span class="comment">//计算完成后，两个都从头开始</span></span><br><span class="line">             ptA = headA;</span><br><span class="line">             ptB = headB;</span><br><span class="line">            <span class="keyword">int</span> temp = <span class="built_in">abs</span>(countA-countB);</span><br><span class="line">            <span class="keyword">if</span>(countA&gt;countB)<span class="comment">//如果A比B长，那么A先走多出来的步数</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i&lt;temp;i++)</span><br><span class="line">                &#123;</span><br><span class="line">                   ptA =ptA-&gt;next;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span><span class="comment">//否则，B先走多出来的步数</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i&lt;temp;i++)</span><br><span class="line">                &#123;</span><br><span class="line">                    ptB =ptB-&gt;next;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//现在两条链表的后续长度是一样的了，他们会同时走到commonnode，这时候我们只要</span></span><br><span class="line">            <span class="comment">//简单的做一个判断，就可以返回了！</span></span><br><span class="line">            <span class="keyword">while</span> (ptA!= <span class="literal">nullptr</span> &amp;&amp;ptB!= <span class="literal">nullptr</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                 <span class="keyword">if</span>(ptA==ptB)</span><br><span class="line">                 &#123;</span><br><span class="line">                     commonNode =ptA;</span><br><span class="line">                     <span class="keyword">break</span>;</span><br><span class="line">                 &#125;</span><br><span class="line">                 ptA=ptA-&gt;next;</span><br><span class="line">                 ptB=ptB-&gt;next;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 当然，如果上面没找到，呢么commonnode肯定是NULL了，直接返回即可</span></span><br><span class="line">            <span class="keyword">return</span> commonNode;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/36/">&lt;i class&#x3D;&quot;fa fa-angle-left&quot;&gt;&lt;&#x2F;i&gt;</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/36/">36</a><span class="page-number current">37</span><a class="page-number" href="/page/38/">38</a><span class="space">&hellip;</span><a class="page-number" href="/page/44/">44</a><a class="extend next" rel="next" href="/page/38/">&lt;i class&#x3D;&quot;fa fa-angle-right&quot;&gt;&lt;&#x2F;i&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/%5Bobject%20Object%5D"
                alt="Jason" />
            
              <p class="site-author-name" itemprop="name">Jason</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%20%7C%7C%20fa%20fa-archive">
              
                  <span class="site-state-item-count">435</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">61</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart" aria-hidden="true"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jason</span>
 <!--
  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>







-->
        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>




















  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v="></script>

  <script type="text/javascript" src="/js/src/motion.js?v="></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v="></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>

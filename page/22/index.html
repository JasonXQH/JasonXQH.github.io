<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=">


  <link rel="mask-icon" href="/images/logo.svg?v=" color="#222">














<meta property="og:type" content="website">
<meta property="og:title" content="Jason‘s Blog">
<meta property="og:url" content="https://jasonxqh.github.io/page/22/index.html">
<meta property="og:site_name" content="Jason‘s Blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Jason">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '',
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    fancybox: false,
    tabs: ,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: 'undefined',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>







  <title>Jason‘s Blog</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', '[object Object]', 'auto');
  ga('send', 'pageview');
</script>





<meta name="generator" content="Hexo 4.2.0"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">
  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>
<a href="https://github.com/JasonXQH/JasonXQH.github.io" target="_blank" rel="noopener" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Jason‘s Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/%20" rel="section">
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/%20" rel="section">
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/%20" rel="section">
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/%20" rel="section">
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/%20" rel="section">
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/%5Bobject%20Object%5D">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/" itemprop="url">离散数学之逻辑</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-07-17T13:46:36+08:00">
                2020-07-17
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2020-09-06T20:38:26+08:00">
                2020-09-06
              </time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="离散数学之逻辑"><a href="#离散数学之逻辑" class="headerlink" title="离散数学之逻辑"></a>离散数学之逻辑</h1><h2 id="Connectives"><a href="#Connectives" class="headerlink" title="Connectives"></a>Connectives</h2><p>Negation (not): $\lnot$ (unary connective)                               非</p>
<p>Conjunction (and): $\land$ (binary connective)                        与</p>
<p>Disjunction (or): $\lor$ (binary connective)                            或</p>
<p>Exclusive or: $\bigoplus$ (binary connective)                                异或</p>
<p>Implication (if … , then): $\rightarrow$ (binary connective)            </p>
<p>Biconditional (if and only if): $\leftrightarrow$ (binary connective)</p>
<h3 id="Combining-proposition"><a href="#Combining-proposition" class="headerlink" title="Combining proposition"></a>Combining proposition</h3><p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/1.png" style="zoom:80%;"></p>
<h4 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h4><p>Let two atomic propositions p and q be “It is raining” and “I am at classroom”.</p>
<p> $\lnot$ p (“not p”): It is not the case that it is raining, or it is not raining.</p>
<p>p  $\land$  q (“p and q”): It is raining and I am at classroom.</p>
<p>p $\or$ q (“p or q”): It is raining or I am at classroom.</p>
<p>p $\bigoplus$ q (“p exclusive or q”): It is raining or I am at classroom,but not both.</p>
<p>p $\rightarrow$ q (“if p, then q”): If it is raining, then I am at classroom.</p>
<p>p $\leftrightarrow$  q (“p if and only if q”): It is raining if and only if I am at classroom.</p>
<h3 id="Tautology重言式-永真式-and-contradiction-矛盾-永假式"><a href="#Tautology重言式-永真式-and-contradiction-矛盾-永假式" class="headerlink" title="Tautology重言式/永真式 and contradiction 矛盾/永假式"></a>Tautology重言式/永真式 and contradiction 矛盾/永假式</h3><h4 id="Tautology"><a href="#Tautology" class="headerlink" title="Tautology"></a>Tautology</h4><p>A tautology is a statement that is always true, i.e., a propositional form which is always true regardless of the truth values of its variables is called a tautology. Examples:<br>$r\land\lnot r$<br>$\lnot(p \land q)=\lnot p \lor \lnot q$</p>
<p>If $p \rightarrow q$ is a tautology, we write p $\Rightarrow$ q;<br>If p $\leftrightarrow$ q is a tautology, we write p $\Leftrightarrow$ q. </p>
<h4 id="Contradiction"><a href="#Contradiction" class="headerlink" title="Contradiction"></a>Contradiction</h4><p>A contradiction is a statement that is always false, i.e., a propositional form which is always false regardless of the truth values of its variables is called a contradiction.<br>Examples:<br>$r\land\lnot r$<br>$\lnot(\lnot(p\land q))\leftrightarrow\lnot p\lor\lnot q$<br>The negation of any tautology is a contradiction, and the negation of contradiction is a tautology.</p>
<h3 id="Implications-蕴含"><a href="#Implications-蕴含" class="headerlink" title="Implications 蕴含"></a>Implications 蕴含</h3><p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/3.png" style="zoom:80%;"></p>
<h3 id="if-then"><a href="#if-then" class="headerlink" title="if-then"></a>if-then</h3><p>We can write “if p, then q” for $p\rightarrow q$ , but there are other ways to say this. E.g., we can write </p>
<p>(1) q if p</p>
<p>(2) p only if q</p>
<p>(3) when p, then q.</p>
<p>For each of these statements, dene propositional variables representing each proposition inside the statement and write the proposition form of the statement.</p>
<ul>
<li>You will feel dizzy during class if you do not have enough sleep.</li>
<li>You can get A from this course, only if you work fairly hard.</li>
<li>When you eat a lot and you do not have enough exercise, then you will get fat.</li>
</ul>
<h3 id="Only-if"><a href="#Only-if" class="headerlink" title="Only-if"></a>Only-if</h3><p>Let p be “you work fairly hard.”<br>Let q be “you get A from this course.”<br>Let r be “You can get A from this course, only if you work fairly hard.”<br>Let’s think about the truth values of r .</p>
<p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/4.png"></p>
<p>Thus, r should be logically equivalent to p ! q. (We write $r\equiv p\rightarrow q$ in this case.)</p>
<h3 id="If-and-only-if"><a href="#If-and-only-if" class="headerlink" title="If and only if"></a>If and only if</h3><p>Given p and q, we denote by   $p  \leftrightarrow q$<br>the statement “p if and only if q.” It is logically equivalent to $(p \leftarrow  q) \land (p \rightarrow q)$<br>i.e.$p\leftrightarrow q  \equiv (p \leftarrow  q) \land (p \rightarrow q)$</p>
<p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/5.png"></p>
<h3 id="Precedence-of-logical-operators"><a href="#Precedence-of-logical-operators" class="headerlink" title="Precedence of logical operators"></a>Precedence of logical operators</h3><p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/6.png"></p>
<p>Because some rules may be difficult to remember, we will continue to use parentheses so that the order of the disjunction and conjunction operators is clear.</p>
<h2 id="Logic-and-Bit-Operations"><a href="#Logic-and-Bit-Operations" class="headerlink" title="Logic and Bit Operations"></a>Logic and Bit Operations</h2><p>A bit is a symbol with two possible values, namely, 0 (false) and 1 (true). A variable is called a Boolean variable if its value is either true or false.</p>
<p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/2.png" style="zoom:80%;"></p>
<h2 id="Applications-of-Propositional-Logic"><a href="#Applications-of-Propositional-Logic" class="headerlink" title="Applications of Propositional Logic"></a>Applications of Propositional Logic</h2><h3 id="Translating-sentences"><a href="#Translating-sentences" class="headerlink" title="Translating sentences"></a>Translating sentences</h3><p><strong>Example</strong><br>You cannot ride the roller coaster <strong>if</strong> you are under 4 feet tall <strong>unless</strong> you are older than 16 years old.<br>Solution:<br>p = “You can ride the roller coaster;”<br>q = “you are under 4 feet tall;”<br>r = “you are older than 16 years old.”<br>Then the sentence can be translated to<br>$(q\land\lnot r)\rightarrow \lnot p$ or $p\rightarrow(\lnot q\lor r)$ </p>
<h3 id="System-specications"><a href="#System-specications" class="headerlink" title="System specications"></a>System specications</h3><p>Determine whether these system specications are consistent?</p>
<ul>
<li>“The diagnostic message is stored in the buffer or it is retransmitted”</li>
<li>“The diagnostic message is not stored in the buffer;”</li>
<li>“If the diagnostic message is stored in the buffer, then it is retransmitted.”</li>
</ul>
<p>Let p denote The diagnostic message is stored in the buffer and q denote The diagnostic message is retransmitted.</p>
<ul>
<li><p>$p\lor q$</p>
</li>
<li><p>$\lnot p$</p>
</li>
<li><p>$p\rightarrow q$</p>
</li>
</ul>
<h2 id="作业练习剪影"><a href="#作业练习剪影" class="headerlink" title="作业练习剪影"></a>作业练习剪影</h2><p><strong>充分必要条件怎么在命题当中表示？</strong></p>
<p>A是B的充分不必要条件： $A\rightarrow B$</p>
<p>A是B的必要不充分条件：$A\leftarrow B$</p>
<p>A是B的充分必要条件：$A\leftrightarrow B$ </p>
<p>Let p, q, and r be the propositions</p>
<p>p : Grizzly bears have been seen in the area.<br>q : Hiking is safe on the trail.<br>r  : Berries are ripe along the trail.</p>
<p>For hiking on the trail to be safe, it is <strong>necessary but not sufficient</strong> that berries not be ripe along the trail and for grizzly bears not to have been seen in the area.</p>
<p> $\lnot r\land \lnot p$   是 q的必要不充分条件，所以 $q\rightarrow (\lnot r\land \lnot p)$但是这还没体现不充分性。所以 $q\rightarrow (\lnot r\land \lnot p)\land \lnot ((\lnot r\land \lnot p)\rightarrow q)$ 是完整答案。也就是既要反应A不能推出B又要反应B能推出A，中间用$\land$ 连接</p>
<p><strong>inclusive or(兼或) 和 exclusive or(异或) 的区别</strong></p>
<p>数学或者英语90分以上者，可以发奖励：这是兼或，意思是数学90分以上的人，英语不到90分;或英语80分以上的人，数学不到90分;或数学和英语都90分以上的人都可以得到奖励。</p>
<p>有2种22元套餐A、B，您可以选择一种：这是异或，意思是你花22元后，可以选择任意一种套餐，但不能同时得到A、B两种套餐，也不会A、B都得不到，这是个二选一的问题。</p>
<p><strong>if…then…的其他表示</strong></p>
<p>下面的语句都可以写成 $p \rightarrow q$</p>
<p>If p , then q</p>
<p>$p$ is sufficient for $q$ 或者 a sufficient condition for $q$ is $p$ 或者 a necessary condition for $p$ is $q$  </p>
<p>to $q$,it is sufficient that $p$</p>
<p>It is necessary to  $q$ to  $p$ 或者 $q$ is necessary for $p $</p>
<p>$p$ implies $q$</p>
<p>$q$ whenever $p$  </p>
<p>$p$ only if $q$ </p>
<p>$q$ follows from $p$</p>
<p>$q$ unless  $\lnot p$  </p>
<p><strong>If and only if 的其他表示</strong></p>
<p>If $p$ then $q$ ,if $q$ then $p$</p>
<p>For $p$ it is necessary and sufficient $q$</p>
<p>$p$ only if $q$ , $q$ only if $p$</p>
<p>$p$ excatly $q$ </p>
<p>If $p$ then $q$ ,and conversely</p>
<p><strong>converse,contrapositive,inverse</strong> </p>
<p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/7.png" style="zoom:80%;"></p>
<p><strong>判断真值表有几行</strong></p>
<p>每一个命题，p,q,r,t,s …. 都有T和F两个值可以选。</p>
<p>所以真值表的行数是由多少命题来决定的。有 n个命题，那么就有 $2^n$ 行数据。</p>
<p><strong>求比特串的AND OR XOR</strong></p>
<p>OR 有1就是1</p>
<p>AND 全1才是1</p>
<p>XOR 不一样的才是1</p>
<h2 id="Logical-Equivalences"><a href="#Logical-Equivalences" class="headerlink" title="Logical Equivalences"></a>Logical Equivalences</h2><h3 id="Definition"><a href="#Definition" class="headerlink" title="Definition"></a>Definition</h3><p>Compound propositions that have the same truth values in all possible cases are called logically equivalent.</p>
<ul>
<li>Compound propositions p and q are called logically equivalent if $p \leftrightarrow q$ is a tautology, denoted as $p \Leftrightarrow q $  or   $p \equiv q$</li>
<li>Remark: Symbol $\equiv$ is not a logical connectives, and $p \equiv q$ is not a proposition. $p \equiv q$ 不是命题！</li>
<li>One way to determine whether two compound propositions are equivalent is to use a truth table.</li>
</ul>
<h3 id="De-Morgan’s-laws"><a href="#De-Morgan’s-laws" class="headerlink" title="De Morgan’s laws"></a>De Morgan’s laws</h3><p>$\lnot (p\land q)\equiv \lnot p\lor \lnot q$ </p>
<p>$\lnot (p\lor q)\equiv \lnot p\land \lnot q$ </p>
<p>德摩根律还可以推广到 $p_n$ </p>
<p>$\lnot(p<em>1\land p_2\land\cdots\land p_n)\equiv \lnot p_1\lor\lnot p_2\lor\cdots\lnot p_n$  也就是 $\lnot\Lambda^n</em>{i=1}\equiv V_{i=1}^n\lnot p_i$ </p>
<p>$\lnot(p<em>1\lor p_2\lor\cdots\lor p_n)\equiv \lnot p_1\land\lnot p_2\land\cdots\lnot p_n$  也就是 $\lnot V^n</em>{i=1}\equiv \Lambda_{i=1}^n\lnot p_i$ </p>
<p>The truth table can be used to determine whether two compound propositions are equivalent.</p>
<p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/8.png" style="zoom:80%;"></p>
<h3 id="Table-of-logical-equivalence"><a href="#Table-of-logical-equivalence" class="headerlink" title="Table of logical equivalence"></a>Table of logical equivalence</h3><div class="table-container">
<table>
<thead>
<tr>
<th>Equivalence</th>
<th>name</th>
</tr>
</thead>
<tbody>
<tr>
<td>$p\land T\equiv p$<br>$p\lor F\equiv p$</td>
<td>Identity Laws 同一律</td>
</tr>
<tr>
<td>$p\land p\equiv p$<br>$p\lor p\equiv p$</td>
<td>idempotent Laws幂等律</td>
</tr>
<tr>
<td>$(p\land q)\land r\equiv p\land (q\land r)$</td>
<td>Associative Laws 结合律</td>
</tr>
<tr>
<td>$p\lor(p\land q)\equiv p$<br>$p\land(p\lor q)\equiv p$</td>
<td>Absorption Laws 吸收律</td>
</tr>
<tr>
<td>$p\land\lnot p \equiv F$<br>$p\lor\lnot p \equiv T$</td>
<td>Negation laws 否定律</td>
</tr>
<tr>
<td>$p\lor T\equiv T$<br>$p\land F\equiv F$</td>
<td>Domination laws 零律</td>
</tr>
<tr>
<td>$p\land q\equiv q\land p$<br>$p\lor q \equiv q\lor p$</td>
<td>Commutative laws 交换律</td>
</tr>
<tr>
<td>$(p\land q)\lor r\equiv (p\lor r)\land(q\lor r)$<br>$(p\lor q)\land r\equiv (p\land r)\lor(q\land r)$</td>
<td>Distributive laws 分配律</td>
</tr>
<tr>
<td>$\lnot (p\land q)\equiv \lnot p\lor \lnot q$ <br>$ \lnot (p\lor q)\equiv \lnot p\land \lnot q$</td>
<td>De Morgan’s laws 德摩根律</td>
</tr>
<tr>
<td>$\lnot(\lnot p)\equiv p$</td>
<td>Double negation law</td>
</tr>
</tbody>
</table>
</div>
<h3 id="Equivalence-of-implication"><a href="#Equivalence-of-implication" class="headerlink" title="Equivalence of implication"></a>Equivalence of implication</h3><p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/9.png" style="zoom:80%;"></p>
<h3 id="Logical-equivalences-involving-conditional-statements"><a href="#Logical-equivalences-involving-conditional-statements" class="headerlink" title="Logical equivalences involving conditional statements"></a>Logical equivalences involving conditional statements</h3><p>$p\rightarrow q\equiv \lnot p\lor q$ 这是最重要的，一定得记住</p>
<p>$p\rightarrow q\equiv\lnot q\rightarrow \lnot p$  </p>
<p>$\lnot p \rightarrow q \equiv p\lor q$ </p>
<p>$p\land q \equiv\lnot(p\rightarrow \lnot q)$</p>
<p>$\lnot(p\rightarrow q)\equiv p\land \lnot q$ </p>
<p>$p\rightarrow(q\land r)\equiv (p\rightarrow q)\land (p\rightarrow r)$ 这四行也是重点</p>
<p>$p\rightarrow(q\lor r)\equiv (p\rightarrow q)\lor (p\rightarrow r)$  </p>
<p>$(p\lor q)\rightarrow r \equiv (p\rightarrow r)\land(q\rightarrow r)$</p>
<p>$(p\land q)\rightarrow r \equiv (p\rightarrow r)\lor(q\rightarrow r)$ </p>
<h3 id="Logical-equivalences-involving-biconditional-statements"><a href="#Logical-equivalences-involving-biconditional-statements" class="headerlink" title="Logical equivalences involving biconditional statements"></a>Logical equivalences involving biconditional statements</h3><p>$p\leftrightarrow q\equiv(p\rightarrow q)\land(q\rightarrow p)$</p>
<p>$p\leftrightarrow q\equiv \lnot p\leftrightarrow \lnot q$ </p>
<p>$p\leftrightarrow q\equiv (p\land q)\land(\lnot p\land\lnot q)$</p>
<p>$\lnot(p\leftrightarrow q)\equiv p\leftrightarrow \lnot q$</p>
<h2 id="Propositional-satistiab-ility-可满足式"><a href="#Propositional-satistiab-ility-可满足式" class="headerlink" title="Propositional satistiab ility 可满足式"></a>Propositional satistiab ility 可满足式</h2><p>A compound proposition is satisable if there is an assignment of truth values to its variables that makes it true.</p>
<p>Determine whether each of the compound propositions</p>
<p>$(p\lor\lnot q)\land(q\lor\lnot r)\land(r\lor \lnot p)\equiv(q\rightarrow p)\land(r\rightarrow q)\land(p\rightarrow r)$ </p>
<p>Note that $(p\lor\lnot q)\land(q\lor\lnot r)\land(r\lor \lnot p)$ is true when the three variable p, q, and r have the same truth value.<br>Hence, it is satisable as there is at least one assignment of truth values for p, q, and r that makes it true.</p>
<p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/10.png" style="zoom:80%;"></p>
<h3 id="Applications-of-satisability"><a href="#Applications-of-satisability" class="headerlink" title="Applications of satisability"></a>Applications of satisability</h3><p>Sudoku puzzle</p>
<p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/11.png" style="zoom:80%;"></p>
<h2 id="Predicates-谓词"><a href="#Predicates-谓词" class="headerlink" title="Predicates 谓词"></a>Predicates 谓词</h2><p>“x is greater than 3” has two parts: variable x (the subject of the statement), and predicate P “is greater than 3”, denoted as P(x) : x &gt; 3.</p>
<ul>
<li>Statement P(x) is the value of the propositional function P at x;</li>
<li>Once variable x is fixed, statement P(x) becomes a proposition and has a truth value. e.g., P(4) (true) and P(2) (false)</li>
<li>Let A(x) denote “Computer x is under attack by an intruder”. Assume that CS2 in the campus is currently under attack by intruders. What are truth values of $A(CS_1)$, and $A(CS_2)$?</li>
<li>Let Q(x, y) denote the statement “x = y + 3”. What are the truth values of the propositions Q(1, 2) and Q(3, 0)?</li>
</ul>
<p>In general, a statement involving n variables $x1, x2,\cdots ,x_n $  can be denoted by $P(x_1, x_2, …  x_n)$, where P is also called an n-place predicate or a n-ary predicate, and $x1, x2, \cdots, x_n$ is a n-tuple.</p>
<h2 id="Quantifiers-量词"><a href="#Quantifiers-量词" class="headerlink" title="Quantifiers 量词"></a>Quantifiers 量词</h2><p>Quantication expresses the extent to which a predicate is true over a range of elements. In general, all values of a variable is called the domain of discourse (or universe of discourse), just referred to as domain.</p>
<p>The universal quantication of P(x) is the statement “P(x) for all values of x in the domain”. Notation $\forall xP(x)$ denotes the universal quantication of P(x), where $\forall$ is called the universal quantier. An element for which P(x) is false is called a counterexample of $\forall xP(x)$</p>
<p>The existential quantication of $P(x)$ is the proposition “There exists an element x in the domain such that $P(x)$”. Notation $\exists xP(x) $ denotes the existential quantication of $ P(x)$, where $\exists$ is called the existential quantier.</p>
<p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/12.png" style="zoom:80%;"></p>
<h3 id="Examples-1"><a href="#Examples-1" class="headerlink" title="Examples"></a>Examples</h3><p><strong>Universal quantication</strong></p>
<ol>
<li>Let $P(x)$ be “$x + 1 &gt; x$”. What is the truth value of $\forall xP(x)$ for $\forall x \in R$?<br>Note that if the domain is empty, then $\forall xP(x)$ is true for any propositional function $P(x)$ because there are no elements x in the domain for which $P(x)$ is false.</li>
<li>Let P(x) be “$x^2 &gt; 0$”. What is the truth value of $\forall xP(x)$ for $\forall x \in Z$? (Note that $x = 0$ is a counterexample because $x^2 = 0$)</li>
</ol>
<p><strong>Existential quantication</strong></p>
<p>Let P(x) denote “$x &gt; 3$”. What is the truth value of $\forall xP(x)$ for $\forall x\in R$ ?<br>Let P(x) be “$x^2 &gt; 0$”. What is the truth value of $\exists xP(x)$ for $\forall x \in Z$? </p>
<h3 id="Remarks"><a href="#Remarks" class="headerlink" title="Remarks"></a>Remarks</h3><p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/13.png" style="zoom:80%;"></p>
<h3 id="Quantiers-with-restricted-domains"><a href="#Quantiers-with-restricted-domains" class="headerlink" title="Quantiers with restricted domains"></a>Quantiers with restricted domains</h3><p>What do the statements $ \forall x &lt; 0(x^2 &gt; 0) $ and $\exists y &gt; 0(y^2 = 2)$ mean, where the domain in each case consists of the real numbers?</p>
<ol>
<li>The statement  $\forall x &lt; 0(x^2 &gt; 0) $ states that for every real number x with $x &lt; 0,x^2 &gt; 0$, i.e., it states “The square of a negative real number is positive”. This statement is the same as $\forall x(x &lt; 0 \rightarrow x^2 &gt; 0)$</li>
<li>The statement $\exists y &gt; 0(y^2 = 2)$ states “There is a positive square root of 2”, i.e., $\exists y(y &gt; 0 \land y^2 = 2).$</li>
</ol>
<ul>
<li>Note that the restriction of a universal quantication is the same as the universal quantication of a conditional statement.</li>
<li>On the other hand, the restriction of an existential quantication is the same as the existential quantication of a conjunction.</li>
</ul>
<h3 id="Precedence-of-quantiers-and-binding-variables"><a href="#Precedence-of-quantiers-and-binding-variables" class="headerlink" title="Precedence of quantiers and binding variables"></a>Precedence of quantiers and binding variables</h3><p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/14.png" style="zoom:80%;"></p>
<h3 id="Logical-equivalences-involving-quantiers"><a href="#Logical-equivalences-involving-quantiers" class="headerlink" title="Logical equivalences involving quantiers"></a>Logical equivalences involving quantiers</h3><p>Statements involving predicates and quantiers are logically equivalent if and only if they have the same truth value no matter which predicates are substituted into these statements and which domain of discourse is used for the variables in these propositional functions. We use the notation $S \equiv T$ to indicate that two statements S and T involving predicates and quantiers are logically equivalent.</p>
<p><strong>Table of logical equivalence</strong></p>
<p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/15.png" style="zoom:80%;"></p>
<h2 id="Applications-of-Quantifiers"><a href="#Applications-of-Quantifiers" class="headerlink" title="Applications of Quantifiers"></a>Applications of Quantifiers</h2><h3 id="Quantiers-in-system-specications"><a href="#Quantiers-in-system-specications" class="headerlink" title="Quantiers in system specications"></a>Quantiers in system specications</h3><p>Use predicates and quantiers to express the system specications “Every mail message larger than one megabyte will be compressed” and “If a user is active, at least one network link will be available.”</p>
<p>Let $S(m,y) $be “<strong>Mail message m is larger than y megabytes</strong>“ where variable x has the domain of all mail messages and variable y is a positive real number, and let $C(m)$ denote “<strong>Mail message m will be compressed.</strong>“ Then “<strong>Every mail message larger than one megabyte will be compressed</strong>“ can be represented as $\forall m(S(m, 1) \rightarrow C(m))$.<br>Let $A(u)$ represent “<strong>User u is active,</strong>“ where variable u has the domain of all users, let $S(n, x)$ denote “<strong>Network link n is in state x</strong>,” where n has the domain of all network links and x has the domain of all possible states for a network link. Then “<strong>If a user is active, at least one network link will be available</strong>“ can be represented by $\exists uA(u)\rightarrow \exists nS(n, available)$ </p>
<h2 id="Nested-Quantifiers-嵌套量词"><a href="#Nested-Quantifiers-嵌套量词" class="headerlink" title="Nested Quantifiers 嵌套量词"></a>Nested Quantifiers 嵌套量词</h2><h3 id="Nested-quantiers"><a href="#Nested-quantiers" class="headerlink" title="Nested quantiers"></a>Nested quantiers</h3><p>Nested quantiers is one quantier within the scope of another. For example, $\forall x\exists y(x + y = 0)$. Note that everything within the scope of a quantier can be thought of as a propositional function.<br>$\forall x\exists y(x + y = 0)$ is the same thing as $\forall xQ(x)$, where Q(x) is $\exists yP(x, y)$, where $P(x, y)$ is $x + y = 0$<br>Please translate following nested quantiers into statements</p>
<p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/16.png" style="zoom:100%;"></p>
<h3 id="Order-of-quantiers"><a href="#Order-of-quantiers" class="headerlink" title="Order of quantiers"></a>Order of quantiers</h3><p>It is important to note that the order of the quantiers is important, unless all the quantiers are universal quantiers or all are existential quantiers.</p>
<p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/17.png" style="zoom:80%;"></p>
<h3 id="Applications-of-nested-quantiers"><a href="#Applications-of-nested-quantiers" class="headerlink" title="Applications of nested quantiers"></a>Applications of nested quantiers</h3><p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/18.png" style="zoom:80%;"></p>
<p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/19.png" style="zoom:80%;"></p>
<h3 id="Negation-of-nested-quantiers"><a href="#Negation-of-nested-quantiers" class="headerlink" title="Negation of nested quantiers"></a>Negation of nested quantiers</h3><p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/20.png" style="zoom:80%;"></p>
<h2 id="作业剪影"><a href="#作业剪影" class="headerlink" title="作业剪影"></a>作业剪影</h2><p><strong>不利用真值表，证明永真式</strong></p>
<p>我们首先要了解这些定律</p>
<p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/21.png" style="zoom:120%;"></p>
<p>然后要规范格式</p>
<p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/22.png" style="zoom:120%;"></p>
<p>如果不限方法的话，看看命题数量。如果命题数量只有2个，那么使用真值表法更容易，如果命题数量比较多，那么使用逻辑等价，一定也能推出来。</p>
<p><strong>Determine whether each of thes compound propositions is satisfiable</strong> </p>
<p>这类题是让我们找出是否存在一种情况让下面的命题成立。</p>
<p>同样当命题数少的时候，我们可以直接利用真值表。命题数量多的时候，我们先化简，再利用真值表找出是否满足。</p>
<p>只要有一个满足，那么这个命题就是 satisfiable 的</p>
<h2 id="Rules-of-Inferences"><a href="#Rules-of-Inferences" class="headerlink" title="Rules of Inferences"></a>Rules of Inferences</h2><h3 id="Argument-论断"><a href="#Argument-论断" class="headerlink" title="Argument 论断"></a>Argument 论断</h3><p><strong>Denition</strong><br>An argument in propositional logic is a sequence of propositions. All but the final proposition in the argument are called premises or hypotheses and the final proposition is called the conclusion.</p>
<p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/23.png" style="zoom:120%;"></p>
<h3 id="Valid-argument"><a href="#Valid-argument" class="headerlink" title="Valid argument"></a>Valid argument</h3><p>Denition<br>We say that the statement is valid if when all hypotheses are true, the conclusion must be true as well. In that case, we say that the conclusion logically follows from the hypotheses.</p>
<p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/24.png" style="zoom:100%;"></p>
<h4 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h4><h2 id="Proof-Methods-and-Strategy"><a href="#Proof-Methods-and-Strategy" class="headerlink" title="Proof Methods and Strategy"></a>Proof Methods and Strategy</h2><p>我们要搞懂几个术语</p>
<p>All but the final proposition in the argument are called <strong>premises</strong>  (前提假定) or <strong>hypotheses</strong> (假定) and<br>the final proposition is called the <strong>conclusion</strong>.</p>
<p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/34.png" style="zoom:100%;"></p>
<p>We say that the statement is valid if when all hypotheses are true, the conclusion must be true as well. In that case, we say that the conclusion logically follows from the hypotheses.</p>
<p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/35.png" style="zoom:100%;"></p>
<p>几个重要的结构要熟悉：</p>
<h4 id="Modus-ponens-肯定前件式"><a href="#Modus-ponens-肯定前件式" class="headerlink" title="Modus ponens 肯定前件式"></a>Modus ponens 肯定前件式</h4><p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/36.png" style="zoom:100%;"></p>
<h4 id="Modus-tollens-否定后件式"><a href="#Modus-tollens-否定后件式" class="headerlink" title="Modus tollens 否定后件式"></a>Modus tollens 否定后件式</h4><p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/37.png" style="zoom:100%;"></p>
<h4 id="hypothelical-syllogism-假言三段论"><a href="#hypothelical-syllogism-假言三段论" class="headerlink" title="hypothelical syllogism 假言三段论"></a>hypothelical syllogism 假言三段论</h4><p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/38.png" style="zoom:100%;"></p>
<h4 id="disjunctive-syllogism-选言三段论"><a href="#disjunctive-syllogism-选言三段论" class="headerlink" title="disjunctive syllogism 选言三段论"></a>disjunctive syllogism 选言三段论</h4><p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/39.png" style="zoom:100%;"></p>
<h4 id="Addition"><a href="#Addition" class="headerlink" title="Addition"></a>Addition</h4><p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/40.png" style="zoom:100%;"></p>
<h4 id="Simplication"><a href="#Simplication" class="headerlink" title="Simplication"></a>Simplication</h4><p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/41.png" style="zoom:100%;"></p>
<h4 id="Conjunction"><a href="#Conjunction" class="headerlink" title="Conjunction"></a>Conjunction</h4><p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/42.png" style="zoom:100%;"></p>
<h4 id="Resolution"><a href="#Resolution" class="headerlink" title="Resolution"></a>Resolution</h4><p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/43.png" style="zoom:100%;"></p>
<h3 id="Inference-rules-for-quantied-statements"><a href="#Inference-rules-for-quantied-statements" class="headerlink" title="Inference rules for quantied statements"></a>Inference rules for quantied statements</h3><h4 id="Universal-instantiation"><a href="#Universal-instantiation" class="headerlink" title="Universal instantiation"></a>Universal instantiation</h4><p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/46.png" style="zoom:100%;"></p>
<h4 id="Universal-generalization"><a href="#Universal-generalization" class="headerlink" title="Universal generalization"></a>Universal generalization</h4><p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/47.png" style="zoom:100%;"></p>
<h4 id="Existential-instantiation"><a href="#Existential-instantiation" class="headerlink" title="Existential instantiation"></a>Existential instantiation</h4><p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/48.png" style="zoom:100%;"></p>
<h4 id="Existential-generalization"><a href="#Existential-generalization" class="headerlink" title="Existential generalization"></a>Existential generalization</h4><p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/49.png" style="zoom:100%;"></p>
<h4 id="Proof-by-contraposition"><a href="#Proof-by-contraposition" class="headerlink" title="Proof by contraposition"></a>Proof by contraposition</h4><p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/53.png" style="zoom:100%;"></p>
<h3 id="Proofs-by-contradiction-反证法"><a href="#Proofs-by-contradiction-反证法" class="headerlink" title="Proofs by contradiction 反证法"></a>Proofs by contradiction 反证法</h3><p>We want to prove that proposition p is true. To do so, we rst assume that p is false, and show that this logically leads to a contradiction. This means that it is impossible for p to be false; hence, p has to be true. This is called a proof by contradiction or reductio ad absurdum.</p>
<p> <img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/50.png" style="zoom:100%;"></p>
<h3 id="Proofs-by-cases"><a href="#Proofs-by-cases" class="headerlink" title="Proofs by cases"></a>Proofs by cases</h3><p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/52.png" style="zoom:100%;"></p>
<h3 id="Proofs-by-cases-in-propositional-logic"><a href="#Proofs-by-cases-in-propositional-logic" class="headerlink" title="Proofs by cases in propositional logic"></a>Proofs by cases in propositional logic</h3><p><img src="/2020/07/17/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E9%80%BB%E8%BE%91/51.png" style="zoom:100%;"></p>
<h3 id="Mathematical-Induction-数学归纳法"><a href="#Mathematical-Induction-数学归纳法" class="headerlink" title="Mathematical Induction 数学归纳法"></a>Mathematical Induction 数学归纳法</h3><h3 id="Strong-mathematical-induction-强数学归纳法"><a href="#Strong-mathematical-induction-强数学归纳法" class="headerlink" title="Strong mathematical induction 强数学归纳法"></a>Strong mathematical induction 强数学归纳法</h3><h3 id="The-induction-hypothesis"><a href="#The-induction-hypothesis" class="headerlink" title="The induction hypothesis"></a>The induction hypothesis</h3>
          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/07/12/plotly%E5%9F%BA%E7%A1%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/%5Bobject%20Object%5D">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/" itemprop="url">plotly基础</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-07-12T18:28:34+08:00">
                2020-07-12
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2023-06-12T10:02:06+08:00">
                2023-06-12
              </time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="plotly基础图画"><a href="#plotly基础图画" class="headerlink" title="plotly基础图画"></a>plotly基础图画</h1><p>学习自官方文档：<a href="https://plotly.com/python/" target="_blank" rel="noopener">https://plotly.com/python/</a></p>
<p>保存图片：下载 plotly-orca package ，fig.write_image(“images/fig1.png”) 保存</p>
<p>运用plotly画图的步骤，主要可以分成三类，我尝试归纳一下:</p>
<ol>
<li>使用 Plotly Express , 从这个名字就可以看出这个类是让我们可以快速画出基本的图并做一些自定义的。<ul>
<li>步骤：</li>
<li>import plotly.express as px</li>
<li>按照自己想要画的图选择api , px.scatter(),px.bar()</li>
</ul>
</li>
<li>使用 plotly.graph_objects  这是更普遍的画图类，可以选择的图像更多，也支持更多自定义<ul>
<li>使用 graph_objects(简称go)画图也可以分为两种范式，第一种更加方便快捷但是代码一多会造成混乱，第二种适合复杂的图形绘制，支持添加注释、添加、更新图画等，但也使得代码更庞大</li>
<li>第一种：fig = go.Figure(data= …)<ul>
<li>所有的操作都在go.Figure()中完成 ,在里面可以添加图元 ，比如go.Figure(data=go.scatter())</li>
</ul>
</li>
<li>第二种：fig = go.Figure() <ul>
<li>即我们先声明一张空白的画布，然后我们慢慢添加、修改</li>
<li>fig.add_trace() …         添加图元 比如 fig.add_trace(go.Scatter(…))</li>
<li>fig.update_trace()…    修改图元，设置图元颜色样式</li>
<li>fig.update_layout()…  渲染标题，注释等等</li>
</ul>
</li>
<li>第三种 ：fig = go.Figure(fig)<ul>
<li>首先我们用fig.add_traces 这些方法构成fig中的所有要素、</li>
<li>然后利用fig = go.Figure(fig) 把图片交给 go去渲染</li>
<li>最后fig.show()呈现</li>
</ul>
</li>
</ul>
</li>
<li>第三类就是前两种的混合<ol>
<li>先让px画出一个简单图形，然后用go来进行更新和美化布局.往往是添加一些text</li>
<li>或者先让fig = go.Figure(data= …)画出初步图形，再利用 update_traces或者update_layout 更新</li>
</ol>
</li>
</ol>
<p>我认为，若要系统的画图时，还是应该采用 go 的第二种画图范式进行。这样能让代码更好管理，容错率也会越高</p>
<p>下面提供一些 整理</p>
<p>layout()的参数：<a href="https://plotly.com/python-api-reference/generated/plotly.graph_objects.Layout.html#plotly.graph_objects.Layout" target="_blank" rel="noopener">https://plotly.com/python-api-reference/generated/plotly.graph_objects.Layout.html#plotly.graph_objects.Layout</a></p>
<p>update_layout常用参数有：</p>
<blockquote>
<p>title</p>
<p>yaxis_zeroline xaxis_zeroline</p>
<p>xaxis_title yaxis_title</p>
<p>legend</p>
<p>xaxis yaxis</p>
<p>autosize</p>
<p>margin</p>
<p>showlegend</p>
<p>plot_bgcolor</p>
<p>annotations</p>
<p>barmode bargap bargroupgap</p>
<p>uniformtext_minsize</p>
<p>uniformtext_mode</p>
<p>xaxis_tickangle yaxis_tickangle …</p>
</blockquote>
<p>各种图的Traces属性参考document：<a href="https://plotly.com/python-api-reference/plotly.graph_objects.html#simple-traces" target="_blank" rel="noopener">https://plotly.com/python-api-reference/plotly.graph_objects.html#simple-traces</a></p>
<p>update_traces 常用参数有：update_traces的参数根据不同的图标而不同，有些是公用的</p>
<blockquote>
<p>mode</p>
<p>marker_line_width marker_line_color</p>
<p>marker_size : list</p>
<p>hoverinfo : Any combination of [‘label’, ‘text’, ‘value’, ‘percent’, ‘name’] joined with ‘+’ characters</p>
<p>marker_color : list</p>
<p>opacity :float [0,1]</p>
<p>texttemplate</p>
<p> textposition :  [‘inside’, ‘outside’, ‘auto’, ‘none’]</p>
<p> textinfo  : Any combination of [‘label’, ‘text’, ‘value’, ‘percent’] joined with ‘+’ characters</p>
</blockquote>
<p>Colorscale 的选择：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">One of the following named colorscales:</span><br><span class="line">            [&#39;aggrnyl&#39;,   &#39;agsunset&#39;, &#39;algae&#39;, &#39;amp&#39;,    &#39;armyrose&#39;, &#39;balance&#39;,</span><br><span class="line">             &#39;blackbody&#39;, &#39;bluered&#39;,  &#39;blues&#39;, &#39;blugrn&#39;, &#39;bluyl&#39;,     &#39;brbg&#39;,</span><br><span class="line">             &#39;brwnyl&#39;,    &#39;bugn&#39;,     &#39;bupu&#39;,  &#39;burg&#39;,   &#39;burgyl&#39;,    &#39;cividis&#39;, </span><br><span class="line">             &#39;curl&#39;,      &#39;darkmint&#39;, &#39;deep&#39;,  &#39;delta&#39;,  &#39;dense&#39;,     &#39;earth&#39;, </span><br><span class="line">             &#39;edge&#39;,      &#39;electric&#39;,</span><br><span class="line">             &#39;emrld&#39;,     &#39;fall&#39;,     &#39;geyser&#39;,&#39;gnbu&#39;,   &#39;gray&#39;,      &#39;greens&#39;, </span><br><span class="line">             &#39;greys&#39;,     &#39;haline&#39;,   &#39;hot&#39;,   &#39;hsv&#39;,    &#39;ice&#39;,       &#39;icefire&#39;, </span><br><span class="line">             &#39;inferno&#39;,   &#39;jet&#39;,      &#39;magenta&#39;,&#39;magma&#39;, &#39;matter&#39;,    &#39;mint&#39;, </span><br><span class="line">             &#39;mrybm&#39;,     &#39;mygbm&#39;,    &#39;oranges&#39;,&#39;orrd&#39;,  &#39;oryel&#39;,     &#39;peach&#39;, </span><br><span class="line">             &#39;phase&#39;,     &#39;picnic&#39;,   &#39;pinkyl&#39;, &#39;piyg&#39;,  &#39;plasma&#39;,    &#39;plotly3&#39;, </span><br><span class="line">             &#39;portland&#39;,  &#39;prgn&#39;,     &#39;pubu&#39;,   &#39;pubugn&#39;,&#39;puor&#39;,</span><br><span class="line">             &#39;purd&#39;,      &#39;purp&#39;,     &#39;purples&#39;,&#39;purpor&#39;,&#39;rainbow&#39;,   &#39;rdbu&#39;, </span><br><span class="line">             &#39;rdgy&#39;,      &#39;rdpu&#39;,     &#39;rdylbu&#39;, &#39;rdylgn&#39;,&#39;redor&#39;,     &#39;reds&#39;,</span><br><span class="line">             &#39;solar&#39;, &#39;spectral&#39;,     &#39;speed&#39;,  &#39;sunset&#39;,&#39;sunsetdark&#39;,&#39;teal&#39;, </span><br><span class="line">             &#39;tealgrn&#39;, &#39;tealrose&#39;,   &#39;tempo&#39;,  &#39;temps&#39;, &#39;thermal&#39;,   &#39;tropic&#39;, </span><br><span class="line">             &#39;turbid&#39;, &#39;twilight&#39;,    &#39;viridis&#39;, &#39;ylgn&#39;, &#39;ylgnbu&#39;, &#39;ylorbr&#39;, </span><br><span class="line">             &#39;ylorrd&#39;].</span><br></pre></td></tr></table></figure>
<h2 id="Scatter-Plots"><a href="#Scatter-Plots" class="headerlink" title="Scatter Plots"></a>Scatter Plots</h2><p>关于一些表的参数：<a href="https://plotly.com/python-api-reference/generated/plotly.graph_objects.Scatter.html#plotly.graph_objects.Scatter" target="_blank" rel="noopener">https://plotly.com/python-api-reference/generated/plotly.graph_objects.Scatter.html#plotly.graph_objects.Scatter</a></p>
<h3 id="Plotly-Express"><a href="#Plotly-Express" class="headerlink" title="Plotly Express"></a>Plotly Express</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">fig = px.scatter(x=[<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],y=[<span class="number">0</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="number">16</span>])</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/0.png" style="zoom:100%;"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">df = px.data.iris() <span class="comment"># iris is a pandas DataFrame</span></span><br><span class="line">fig = px.scatter(df, x=<span class="string">"sepal_width"</span>, y=<span class="string">"sepal_length"</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/2.png" style="zoom:100%;"></p>
<h4 id="Set-size-and-color-with-column-names"><a href="#Set-size-and-color-with-column-names" class="headerlink" title="Set size and color with column names"></a>Set size and color with column names</h4><p>hover_data就是当我们鼠标移动到散点上会显示这个点的数据.所以我们这里令hover_data=[‘petal_width’]，就是把petal_width 这个维度的信息添加到显示信息中去</p>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/1.png" style="zoom:150%;"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">df = px.data.iris()</span><br><span class="line">fig = px.scatter(</span><br><span class="line">    	df,</span><br><span class="line">    	x=<span class="string">"sepal_width"</span>,</span><br><span class="line">    	y=<span class="string">"sepal_length"</span>,</span><br><span class="line">    	color=<span class="string">"species"</span>,</span><br><span class="line">        size=<span class="string">'petal_length'</span>,</span><br><span class="line">    	hover_data=[<span class="string">'petal_width'</span>])</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/3.png" style="zoom:100%;"></p>
<h3 id="go-Scatter"><a href="#go-Scatter" class="headerlink" title="go.Scatter"></a>go.Scatter</h3><p>此外，我们可以使用更加通用的 go.Scatter类。 和plotly.express 将line()和 scatter() 分成两个函数来使用不同， go.Scatter 可以通过设置 mode属性，用一个api就能画出 线型图和散点图。我们可以看看 <a href="https://plotly.com/python/reference/#scatter" target="_blank" rel="noopener">go.Scatter的reference page</a>.来具体了解其中属性。这里给出几个例子(go.Scatter默认画线形图)</p>
<h4 id="Simple-Scatter-Plot"><a href="#Simple-Scatter-Plot" class="headerlink" title="Simple Scatter Plot"></a>Simple Scatter Plot</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">N = <span class="number">1000</span></span><br><span class="line">t = np.linspace(<span class="number">0</span>, <span class="number">10</span>, <span class="number">100</span>)</span><br><span class="line">y = np.sin(t)</span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=go.Scatter(x=t, y=y, mode=<span class="string">'markers'</span>))</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/6.png" style="zoom:100%;"></p>
<h4 id="Line-and-Scatter-Plots"><a href="#Line-and-Scatter-Plots" class="headerlink" title="Line and Scatter Plots"></a>Line and Scatter Plots</h4><p>Use <code>mode</code> argument to choose between markers, lines, or a combination of both. For more options about line plots, see also the <a href="https://plotly.com/python/line-charts/" target="_blank" rel="noopener">line charts notebook</a> and the <a href="https://plotly.com/python/filled-area-plots/" target="_blank" rel="noopener">filled area plots notebook</a>.</p>
<p>如果是markers，那么就是散点图；如果是lines，那么就是线型图;如果 mode=’lines+markers’那么就是在线型图的基础上描点</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">np.random.seed(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">N = <span class="number">100</span></span><br><span class="line">random_x = np.linspace(<span class="number">0</span>, <span class="number">1</span>, N)</span><br><span class="line">random_y0 = np.random.randn(N) + <span class="number">5</span></span><br><span class="line">random_y1 = np.random.randn(N)</span><br><span class="line">random_y2 = np.random.randn(N) - <span class="number">5</span></span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Add traces</span></span><br><span class="line">fig.add_trace(go.Scatter(x=random_x, y=random_y0,</span><br><span class="line">                    mode=<span class="string">'markers'</span>,</span><br><span class="line">                    name=<span class="string">'markers'</span>))</span><br><span class="line">fig.add_trace(go.Scatter(x=random_x, y=random_y1,</span><br><span class="line">                    mode=<span class="string">'lines+markers'</span>,</span><br><span class="line">                    name=<span class="string">'lines+markers'</span>))</span><br><span class="line">fig.add_trace(go.Scatter(x=random_x, y=random_y2,</span><br><span class="line">                    mode=<span class="string">'lines'</span>,</span><br><span class="line">                    name=<span class="string">'lines'</span>))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/7.png" style="zoom:100%;"></p>
<h4 id="Bubble-Scatter-Plots"><a href="#Bubble-Scatter-Plots" class="headerlink" title="Bubble Scatter Plots"></a>Bubble Scatter Plots</h4><p>在气泡图中，第三维度的数据可以由气泡的大小反应，我们可以在<a href="https://plotly.com/python/bubble-charts/" target="_blank" rel="noopener">bubble chart notebook</a>一章中详细介绍</p>
<p>在这里，我们手动设置了marker的属性：传入了一个字典，让不同的scatters有着不同的size属性和color属性</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=go.Scatter(</span><br><span class="line">    x=[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">    y=[<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>],</span><br><span class="line">    mode=<span class="string">'markers'</span>,</span><br><span class="line">    marker=dict(size=[<span class="number">40</span>, <span class="number">60</span>, <span class="number">80</span>, <span class="number">100</span>],</span><br><span class="line">                color=[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">))</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/8.png" style="zoom:100%;"></p>
<h4 id="Style-Scatter-Plots"><a href="#Style-Scatter-Plots" class="headerlink" title="Style Scatter Plots"></a>Style Scatter Plots</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">t = np.linspace(<span class="number">0</span>, <span class="number">10</span>, <span class="number">100</span>)<span class="comment"># 0-10 取100个点</span></span><br><span class="line"></span><br><span class="line">fig = go.Figure()	<span class="comment"># 申请一张空白画布</span></span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Scatter( <span class="comment"># 在画布中添加 trace 第一条是sin</span></span><br><span class="line">    x=t, y=np.sin(t),</span><br><span class="line">    name=<span class="string">'sin'</span>,</span><br><span class="line">    mode=<span class="string">'markers'</span>,</span><br><span class="line">    marker_color=<span class="string">'rgba(152, 0, 0, .8)'</span></span><br><span class="line">))</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Scatter( <span class="comment"># 第二条是cos</span></span><br><span class="line">    x=t, y=np.cos(t),</span><br><span class="line">    name=<span class="string">'cos'</span>,</span><br><span class="line">    marker_color=<span class="string">'rgba(255, 182, 193, .9)'</span></span><br><span class="line">))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Set options common to all traces with fig.update_traces</span></span><br><span class="line">fig.update_traces(mode=<span class="string">'markers'</span>, marker_line_width=<span class="number">2</span>, marker_size=<span class="number">10</span>)</span><br><span class="line">fig.update_layout(title=<span class="string">'Styled Scatter'</span>,</span><br><span class="line">                  yaxis_zeroline=<span class="literal">False</span>, xaxis_zeroline=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/9.png" style="zoom:100%;"></p>
<h4 id="Data-Labels-on-Hover"><a href="#Data-Labels-on-Hover" class="headerlink" title="Data Labels on Hover"></a>Data Labels on Hover</h4><p>首先我们git clone  <a href="https://github.com/plotly/datasets.git" target="_blank" rel="noopener">https://github.com/plotly/datasets.git</a> 然后在本地操作，不然jupyter每次加载报错。</p>
<p>x轴就是 各个州的缩写，y轴就是各个州的人口数量，利用散点图形式绘制，然后设置 marker_color 属性，也就是根据人口的不同来呈现不同颜色。</p>
<p>text就是鼠标移动到点上呈现的文本 </p>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/14.png" style="zoom:100%;"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">data= pd.read_csv(<span class="string">"./datasets/2014_usa_states.csv"</span>)</span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=go.Scatter(x=data[<span class="string">'Postal'</span>],</span><br><span class="line">                                y=data[<span class="string">'Population'</span>],</span><br><span class="line">                                mode=<span class="string">'markers'</span>,</span><br><span class="line">                                marker_color=data[<span class="string">'Population'</span>],</span><br><span class="line">                                text=data[<span class="string">'State'</span>])) <span class="comment"># hover text goes here</span></span><br><span class="line"></span><br><span class="line">fig.update_layout(title=<span class="string">'Population of USA States'</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/10.png" style="zoom: 80%;"></p>
<h4 id="Scatter-with-a-Color-Dimension"><a href="#Scatter-with-a-Color-Dimension" class="headerlink" title="Scatter with a Color Dimension"></a>Scatter with a Color Dimension</h4><p>通过设置 colorscale，我们可以添加一个色阶。同时我们传入的marker信息有：点的大小，点的颜色（随机），是否显示colorscale：true</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">fig = go.Figure(data=go.Scatter(</span><br><span class="line">    y = np.random.randn(<span class="number">500</span>),</span><br><span class="line">    mode=<span class="string">'markers'</span>,</span><br><span class="line">    marker=dict(</span><br><span class="line">        size=<span class="number">16</span>,</span><br><span class="line">        color=np.random.randn(<span class="number">500</span>), <span class="comment">#set color equal to a variable</span></span><br><span class="line">        colorscale=<span class="string">'Viridis'</span>, <span class="comment"># one of plotly colorscales</span></span><br><span class="line">        showscale=<span class="literal">True</span></span><br><span class="line">    )</span><br><span class="line">))</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/11.png" style="zoom: 80%;"></p>
<h4 id="Large-Data-Sets"><a href="#Large-Data-Sets" class="headerlink" title="Large Data Sets"></a>Large Data Sets</h4><p>Now in Ploty you can implement WebGL with <code>Scattergl()</code> in place of <code>Scatter()</code><br>for increased speed, improved interactivity, and the ability to plot even more data!</p>
<p>使用Scattergl，可以比Scatter更快，交互性也更好，而且能画出更多的数据。比如下面我们用100_000级数据进行操作</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">N = <span class="number">100</span>_000</span><br><span class="line">fig = go.Figure(data=go.Scattergl(</span><br><span class="line">    x = np.random.randn(N),</span><br><span class="line">    y = np.random.randn(N),</span><br><span class="line">    mode=<span class="string">'markers'</span>,</span><br><span class="line">    marker=dict(</span><br><span class="line">        color=np.random.randn(N),</span><br><span class="line">        colorscale=<span class="string">'Viridis'</span>,</span><br><span class="line">        line_width=<span class="number">1</span></span><br><span class="line">    )</span><br><span class="line">))</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/12.png" style="zoom: 80%;"></p>
<p>上面是随机生成10万个数据，xxi安眠，我们要在一块区域当中生成10w个数据。</p>
<p>首先在一个圆里生成10w数据，</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">N = <span class="number">100000</span></span><br><span class="line">r = np.random.uniform(<span class="number">0</span>, <span class="number">1</span>, N)</span><br><span class="line">theta = np.random.uniform(<span class="number">0</span>, <span class="number">2</span>*np.pi, N)</span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=go.Scattergl(</span><br><span class="line">    x = r * np.cos(theta), <span class="comment"># non-uniform distribution</span></span><br><span class="line">    y = r * np.sin(theta), <span class="comment"># zoom to see more points at the center</span></span><br><span class="line">    mode=<span class="string">'markers'</span>,</span><br><span class="line">    marker=dict(</span><br><span class="line">        color=np.random.randn(N),</span><br><span class="line">        colorscale=<span class="string">'Viridis'</span>,</span><br><span class="line">        line_width=<span class="number">1</span></span><br><span class="line">    )</span><br><span class="line">))</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/13.png" style="zoom: 80%;"></p>
<h2 id="Line-Charts"><a href="#Line-Charts" class="headerlink" title="Line Charts"></a>Line Charts</h2><h3 id="Plotly-Express-1"><a href="#Plotly-Express-1" class="headerlink" title="Plotly Express"></a>Plotly Express</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fig = px.line(x=t, y=np.cos(t), labels=&#123;<span class="string">'x'</span>:<span class="string">'t'</span>, <span class="string">'y'</span>:<span class="string">'cos(t)'</span>&#125;)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/4.png" style="zoom:100%;"></p>
<p>这里，我们使用plotly的一个内置库 gapminder 主要记录了各个国家的情况</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df = px.data.gapminder()</span><br><span class="line">df.head()</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">country</th>
<th style="text-align:right">continent</th>
<th style="text-align:right">year</th>
<th style="text-align:right">lifeExp</th>
<th style="text-align:right">pop</th>
<th style="text-align:right">gdpPercap</th>
<th style="text-align:right">iso_alpha</th>
<th>iso_num</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">Afghanistan</td>
<td style="text-align:right">Asia</td>
<td style="text-align:right">1952</td>
<td style="text-align:right">28.801</td>
<td style="text-align:right">8425333</td>
<td style="text-align:right">779.445314</td>
<td style="text-align:right">AFG</td>
<td>4</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">Afghanistan</td>
<td style="text-align:right">Asia</td>
<td style="text-align:right">1957</td>
<td style="text-align:right">30.332</td>
<td style="text-align:right">9240934</td>
<td style="text-align:right">820.853030</td>
<td style="text-align:right">AFG</td>
<td>4</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">Afghanistan</td>
<td style="text-align:right">Asia</td>
<td style="text-align:right">1962</td>
<td style="text-align:right">31.997</td>
<td style="text-align:right">10267083</td>
<td style="text-align:right">853.100710</td>
<td style="text-align:right">AFG</td>
<td>4</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">Afghanistan</td>
<td style="text-align:right">Asia</td>
<td style="text-align:right">1967</td>
<td style="text-align:right">34.020</td>
<td style="text-align:right">11537966</td>
<td style="text-align:right">836.197138</td>
<td style="text-align:right">AFG</td>
<td>4</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">Afghanistan</td>
<td style="text-align:right">Asia</td>
<td style="text-align:right">1972</td>
<td style="text-align:right">36.088</td>
<td style="text-align:right">13079460</td>
<td style="text-align:right">739.981106</td>
<td style="text-align:right">AFG</td>
<td>4</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">df = px.data.gapminder().query(<span class="string">"continent == 'Oceania'"</span>)</span><br><span class="line">fig = px.line(df, x=<span class="string">'year'</span>, y=<span class="string">'lifeExp'</span>, color=<span class="string">'country'</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/5.png" style="zoom:100%;"></p>
<h3 id="go-Scatter-1"><a href="#go-Scatter-1" class="headerlink" title="go.Scatter"></a>go.Scatter</h3><h4 id="Simple-Line-Plot"><a href="#Simple-Line-Plot" class="headerlink" title="Simple Line Plot"></a>Simple Line Plot</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">x = np.arange(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=go.Scatter(x=x, y=x**<span class="number">2</span>))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/01.png" style="zoom:100%;"></p>
<p> Line Plot Mode  和 scatter plot一样，也是 line,markers,line+markers 三种</p>
<h4 id="Style-Line-Plots"><a href="#Style-Line-Plots" class="headerlink" title="Style Line Plots"></a>Style Line Plots</h4><p>This example styles the color and dash of the traces, adds trace names, modifies line width, and adds plot and axes titles.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Add data</span></span><br><span class="line">month = [<span class="string">'January'</span>, <span class="string">'February'</span>, <span class="string">'March'</span>, <span class="string">'April'</span>, <span class="string">'May'</span>, <span class="string">'June'</span>, <span class="string">'July'</span>,</span><br><span class="line">         <span class="string">'August'</span>, <span class="string">'September'</span>, <span class="string">'October'</span>, <span class="string">'November'</span>, <span class="string">'December'</span>]</span><br><span class="line">high_2000 = [<span class="number">32.5</span>, <span class="number">37.6</span>, <span class="number">49.9</span>, <span class="number">53.0</span>, <span class="number">69.1</span>, <span class="number">75.4</span>, <span class="number">76.5</span>, <span class="number">76.6</span>, <span class="number">70.7</span>, <span class="number">60.6</span>, <span class="number">45.1</span>, <span class="number">29.3</span>]</span><br><span class="line">low_2000 = [<span class="number">13.8</span>, <span class="number">22.3</span>, <span class="number">32.5</span>, <span class="number">37.2</span>, <span class="number">49.9</span>, <span class="number">56.1</span>, <span class="number">57.7</span>, <span class="number">58.3</span>, <span class="number">51.2</span>, <span class="number">42.8</span>, <span class="number">31.6</span>, <span class="number">15.9</span>]</span><br><span class="line">high_2007 = [<span class="number">36.5</span>, <span class="number">26.6</span>, <span class="number">43.6</span>, <span class="number">52.3</span>, <span class="number">71.5</span>, <span class="number">81.4</span>, <span class="number">80.5</span>, <span class="number">82.2</span>, <span class="number">76.0</span>, <span class="number">67.3</span>, <span class="number">46.1</span>, <span class="number">35.0</span>]</span><br><span class="line">low_2007 = [<span class="number">23.6</span>, <span class="number">14.0</span>, <span class="number">27.0</span>, <span class="number">36.8</span>, <span class="number">47.6</span>, <span class="number">57.7</span>, <span class="number">58.9</span>, <span class="number">61.2</span>, <span class="number">53.3</span>, <span class="number">48.5</span>, <span class="number">31.0</span>, <span class="number">23.6</span>]</span><br><span class="line">high_2014 = [<span class="number">28.8</span>, <span class="number">28.5</span>, <span class="number">37.0</span>, <span class="number">56.8</span>, <span class="number">69.7</span>, <span class="number">79.7</span>, <span class="number">78.5</span>, <span class="number">77.8</span>, <span class="number">74.1</span>, <span class="number">62.6</span>, <span class="number">45.3</span>, <span class="number">39.9</span>]</span><br><span class="line">low_2014 = [<span class="number">12.7</span>, <span class="number">14.3</span>, <span class="number">18.6</span>, <span class="number">35.5</span>, <span class="number">49.9</span>, <span class="number">58.0</span>, <span class="number">60.0</span>, <span class="number">58.6</span>, <span class="number">51.7</span>, <span class="number">45.2</span>, <span class="number">32.2</span>, <span class="number">29.1</span>]</span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line"><span class="comment"># Create and style traces</span></span><br><span class="line">fig.add_trace(go.Scatter(x=month, y=high_2014, name=<span class="string">'High 2014'</span>,</span><br><span class="line">                         line=dict(color=<span class="string">'firebrick'</span>, width=<span class="number">4</span>)))</span><br><span class="line"><span class="comment">#第一条是High 2014 砖红色的实线</span></span><br><span class="line">fig.add_trace(go.Scatter(x=month, y=low_2014, name = <span class="string">'Low 2014'</span>,</span><br><span class="line">                         line=dict(color=<span class="string">'royalblue'</span>, width=<span class="number">4</span>)))</span><br><span class="line"><span class="comment">#第二条是Low 2014 蓝色的实线</span></span><br><span class="line">fig.add_trace(go.Scatter(x=month, y=high_2007, name=<span class="string">'High 2007'</span>,</span><br><span class="line">                         line=dict(color=<span class="string">'firebrick'</span>, width=<span class="number">4</span>,</span><br><span class="line">                              dash=<span class="string">'dash'</span>) </span><br><span class="line"><span class="comment"># dash options include 'dash', 'dot',and 'dashdot'</span></span><br><span class="line">))</span><br><span class="line"><span class="comment">#第三条是High 2007 是一条红色的长虚线，也就是 dash = 'dash'</span></span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Scatter(x=month, y=low_2007, name=<span class="string">'Low 2007'</span>,</span><br><span class="line">                         line = dict(color=<span class="string">'royalblue'</span>, width=<span class="number">4</span>, dash=<span class="string">'dash'</span>)))</span><br><span class="line"><span class="comment">#第四条是Low 2007 是一条蓝色的长虚线</span></span><br><span class="line">fig.add_trace(go.Scatter(x=month, y=high_2000, name=<span class="string">'High 2000'</span>,</span><br><span class="line">                         line = dict(color=<span class="string">'firebrick'</span>, width=<span class="number">4</span>, dash=<span class="string">'dot'</span>)))</span><br><span class="line"><span class="comment">#第五条是High 2000 是一条红色的点虚线</span></span><br><span class="line">fig.add_trace(go.Scatter(x=month, y=low_2000, name=<span class="string">'Low 2000'</span>,</span><br><span class="line">                         line=dict(color=<span class="string">'royalblue'</span>, width=<span class="number">4</span>, dash=<span class="string">'dot'</span>)))</span><br><span class="line"><span class="comment">#第六条是Low 2000 是一条拉暗色的点虚线</span></span><br><span class="line"><span class="comment"># 其中 dashdot 是长短虚线相交的线</span></span><br><span class="line"><span class="comment"># Edit the layout</span></span><br><span class="line">fig.update_layout(title=<span class="string">'Average High and Low Temperatures in New York'</span>,</span><br><span class="line">                   xaxis_title=<span class="string">'Month'</span>,</span><br><span class="line">                   yaxis_title=<span class="string">'Temperature (degrees F)'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/15.png" style="zoom:100%;"></p>
<h4 id="Connect-Data-Gaps"><a href="#Connect-Data-Gaps" class="headerlink" title="Connect Data Gaps"></a>Connect Data Gaps</h4><p>connectgaps=True 这个属性为True的时候，plotly会自动补全线和线之间的空隙。In <a href="https://plotly.com/python/filled-area-on-mapbox/#multiple-filled-areas-with-a-scattermapbox-trace" target="_blank" rel="noopener">this tutorial</a>, we showed how to take benefit of this feature and illustrate multiple areas in mapbox.</p>
<p>我们可以通过下面的</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>]</span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x=x,</span><br><span class="line">    y=[<span class="number">10</span>, <span class="number">20</span>, <span class="literal">None</span>, <span class="number">15</span>, <span class="number">10</span>, <span class="number">5</span>, <span class="number">15</span>, <span class="literal">None</span>, <span class="number">20</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">15</span>, <span class="number">25</span>, <span class="number">20</span>, <span class="number">10</span>],</span><br><span class="line">    name = <span class="string">'&lt;b&gt;No&lt;/b&gt; Gaps'</span>, <span class="comment"># Style name/legend entry with html tags</span></span><br><span class="line">    connectgaps=<span class="literal">True</span> <span class="comment"># override default to connect the gaps</span></span><br><span class="line">))</span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x=x,</span><br><span class="line">    y=[<span class="number">5</span>, <span class="number">15</span>, <span class="literal">None</span>, <span class="number">10</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">10</span>, <span class="literal">None</span>, <span class="number">15</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">20</span>, <span class="number">15</span>, <span class="number">5</span>],</span><br><span class="line">    name=<span class="string">'Gaps'</span>,</span><br><span class="line">))</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/16.png" style="zoom:100%;"></p>
<h4 id="Interpolation-with-Line-Plots"><a href="#Interpolation-with-Line-Plots" class="headerlink" title="Interpolation with Line Plots"></a>Interpolation with Line Plots</h4><p>我们可以设置 line_shape 属性，设置线条的形状：</p>
<p>一共可以分为： hv, vh, hvh, vhv ,spline 和 linear 这几种线条。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">x = np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])</span><br><span class="line">y = np.array([<span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line">fig.add_trace(go.Scatter(x=x, y=y, name=<span class="string">"linear"</span>,</span><br><span class="line">                    line_shape=<span class="string">'linear'</span>))</span><br><span class="line">fig.add_trace(go.Scatter(x=x, y=y + <span class="number">5</span>, name=<span class="string">"spline"</span>,</span><br><span class="line">                    text=[<span class="string">"tweak line smoothness&lt;br&gt;with 'smoothing' in line object"</span>],</span><br><span class="line">                    hoverinfo=<span class="string">'text+name'</span>,</span><br><span class="line">                    line_shape=<span class="string">'spline'</span>))</span><br><span class="line">fig.add_trace(go.Scatter(x=x, y=y + <span class="number">10</span>, name=<span class="string">"vhv"</span>,</span><br><span class="line">                    line_shape=<span class="string">'vhv'</span>))</span><br><span class="line">fig.add_trace(go.Scatter(x=x, y=y + <span class="number">15</span>, name=<span class="string">"hvh"</span>,</span><br><span class="line">                    line_shape=<span class="string">'hvh'</span>))</span><br><span class="line">fig.add_trace(go.Scatter(x=x, y=y + <span class="number">20</span>, name=<span class="string">"vh"</span>,</span><br><span class="line">                    line_shape=<span class="string">'vh'</span>))</span><br><span class="line">fig.add_trace(go.Scatter(x=x, y=y + <span class="number">25</span>, name=<span class="string">"hv"</span>,</span><br><span class="line">                    line_shape=<span class="string">'hv'</span>))</span><br><span class="line"></span><br><span class="line">fig.update_traces(hoverinfo=<span class="string">'text+name'</span>, mode=<span class="string">'lines+markers'</span>)</span><br><span class="line">fig.update_layout(legend=dict(y=<span class="number">0.5</span>, traceorder=<span class="string">'reversed'</span>, font_size=<span class="number">16</span>))</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/17.png" style="zoom:100%;"></p>
<h4 id="Label-Lines-with-Annotations"><a href="#Label-Lines-with-Annotations" class="headerlink" title="Label Lines with Annotations"></a>Label Lines with Annotations</h4><p>首先做点准备工作，先设置一下标题、标签和颜色，再设置一下 线的粗细和点的大小</p>
<p>然后准备一下x和y的数据，利用np.vstack复制出四个一摸一样的列表。</p>
<p>利用一个循环，把我们的线条都渲染上去。</p>
<p>对于每一个线条，第一次渲染是渲染主体；第二次是渲染断点，也就是第一个数据的位置，标记为marker</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">title = <span class="string">'Main Source for News'</span></span><br><span class="line">labels = [<span class="string">'Television'</span>, <span class="string">'Newspaper'</span>, <span class="string">'Internet'</span>, <span class="string">'Radio'</span>]</span><br><span class="line">colors = [<span class="string">'rgb(67,67,67)'</span>, <span class="string">'rgb(115,115,115)'</span>, <span class="string">'rgb(49,130,189)'</span>, <span class="string">'rgb(189,189,189)'</span>]</span><br><span class="line"></span><br><span class="line">mode_size = [<span class="number">8</span>, <span class="number">8</span>, <span class="number">12</span>, <span class="number">8</span>]</span><br><span class="line">line_size = [<span class="number">2</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">2</span>]</span><br><span class="line"></span><br><span class="line">x_data = np.vstack((np.arange(<span class="number">2001</span>, <span class="number">2014</span>),)*<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">y_data = np.array([</span><br><span class="line">    [<span class="number">74</span>, <span class="number">82</span>, <span class="number">80</span>, <span class="number">74</span>, <span class="number">73</span>, <span class="number">72</span>, <span class="number">74</span>, <span class="number">70</span>, <span class="number">70</span>, <span class="number">66</span>, <span class="number">66</span>, <span class="number">69</span>],</span><br><span class="line">    [<span class="number">45</span>, <span class="number">42</span>, <span class="number">50</span>, <span class="number">46</span>, <span class="number">36</span>, <span class="number">36</span>, <span class="number">34</span>, <span class="number">35</span>, <span class="number">32</span>, <span class="number">31</span>, <span class="number">31</span>, <span class="number">28</span>],</span><br><span class="line">    [<span class="number">13</span>, <span class="number">14</span>, <span class="number">20</span>, <span class="number">24</span>, <span class="number">20</span>, <span class="number">24</span>, <span class="number">24</span>, <span class="number">40</span>, <span class="number">35</span>, <span class="number">41</span>, <span class="number">43</span>, <span class="number">50</span>],</span><br><span class="line">    [<span class="number">18</span>, <span class="number">21</span>, <span class="number">18</span>, <span class="number">21</span>, <span class="number">16</span>, <span class="number">14</span>, <span class="number">13</span>, <span class="number">18</span>, <span class="number">17</span>, <span class="number">16</span>, <span class="number">19</span>, <span class="number">23</span>],</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, <span class="number">4</span>):</span><br><span class="line">    fig.add_trace(go.Scatter(x=x_data[i], y=y_data[i], mode=<span class="string">'lines'</span>,</span><br><span class="line">        name=labels[i],</span><br><span class="line">        line=dict(color=colors[i], width=line_size[i]),</span><br><span class="line">        connectgaps=<span class="literal">True</span>,</span><br><span class="line">    ))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># endpoints</span></span><br><span class="line">    fig.add_trace(go.Scatter(</span><br><span class="line">        x=[x_data[i][<span class="number">0</span>], x_data[i][<span class="number">-1</span>]],</span><br><span class="line">        y=[y_data[i][<span class="number">0</span>], y_data[i][<span class="number">-1</span>]],</span><br><span class="line">        mode=<span class="string">'markers'</span>,</span><br><span class="line">        marker=dict(color=colors[i], size=mode_size[i])</span><br><span class="line">    ))</span><br></pre></td></tr></table></figure>
<p>随后设置一下layout属性，也就是美化图形</p>
<p>我们设置一下x轴： 我们保持x轴，但是去掉了x轴上的方格线，我们保留了x轴上突出的小短线，然后设置其颜色为灰白。然后我们再设置了x轴上的字体。</p>
<p>因为这个图不需要y轴，所以我们把y轴的所有基本信息都置为False</p>
<p>我们设置一下画面的页边距。： l代表左边距，r代表右边距，t代表顶边距</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">fig.update_layout(</span><br><span class="line">    xaxis=dict(</span><br><span class="line">        showline=<span class="literal">True</span>,</span><br><span class="line">        showgrid=<span class="literal">False</span>,</span><br><span class="line">        showticklabels=<span class="literal">True</span>,</span><br><span class="line">        linecolor=<span class="string">'rgb(204, 204, 204)'</span>,</span><br><span class="line">        linewidth=<span class="number">2</span>,</span><br><span class="line">        ticks=<span class="string">'outside'</span>,</span><br><span class="line">        tickfont=dict(</span><br><span class="line">            family=<span class="string">'Arial'</span>,</span><br><span class="line">            size=<span class="number">12</span>,</span><br><span class="line">            color=<span class="string">'rgb(82, 82, 82)'</span>,</span><br><span class="line">        ),</span><br><span class="line">    ),</span><br><span class="line">    yaxis=dict(</span><br><span class="line">        showgrid=<span class="literal">False</span>,</span><br><span class="line">        zeroline=<span class="literal">False</span>,</span><br><span class="line">        showline=<span class="literal">False</span>,</span><br><span class="line">        showticklabels=<span class="literal">False</span>,</span><br><span class="line">    ),</span><br><span class="line">    autosize=<span class="literal">False</span>,</span><br><span class="line">    margin=dict(</span><br><span class="line">        autoexpand=<span class="literal">False</span>,</span><br><span class="line">        l=<span class="number">100</span>,</span><br><span class="line">        r=<span class="number">20</span>,</span><br><span class="line">        t=<span class="number">110</span>,</span><br><span class="line">    ),</span><br><span class="line">    showlegend=<span class="literal">False</span>,</span><br><span class="line">    plot_bgcolor=<span class="string">'white'</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>最后我们来设置一下注释</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">annotations = []</span><br><span class="line"></span><br><span class="line"><span class="comment"># Adding labels</span></span><br><span class="line"><span class="keyword">for</span> y_trace, label, color <span class="keyword">in</span> zip(y_data, labels, colors):</span><br><span class="line">    <span class="comment"># labeling the left_side of the plot</span></span><br><span class="line">    annotations.append(dict(xref=<span class="string">'paper'</span>, x=<span class="number">0.05</span>, y=y_trace[<span class="number">0</span>],</span><br><span class="line">                                  xanchor=<span class="string">'right'</span>, yanchor=<span class="string">'middle'</span>,</span><br><span class="line">                                  text=label + <span class="string">' &#123;&#125;%'</span>.format(y_trace[<span class="number">0</span>]),</span><br><span class="line">                                  font=dict(family=<span class="string">'Arial'</span>,</span><br><span class="line">                                            size=<span class="number">16</span>),</span><br><span class="line">                                  showarrow=<span class="literal">False</span>))</span><br><span class="line">    <span class="comment"># labeling the right_side of the plot</span></span><br><span class="line">    annotations.append(dict(xref=<span class="string">'paper'</span>, x=<span class="number">0.95</span>, y=y_trace[<span class="number">11</span>],</span><br><span class="line">                                  xanchor=<span class="string">'left'</span>, yanchor=<span class="string">'middle'</span>,</span><br><span class="line">                                  text=<span class="string">'&#123;&#125;%'</span>.format(y_trace[<span class="number">11</span>]),</span><br><span class="line">                                  font=dict(family=<span class="string">'Arial'</span>,</span><br><span class="line">                                            size=<span class="number">16</span>),</span><br><span class="line">                                  showarrow=<span class="literal">False</span>))</span><br><span class="line"><span class="comment"># Title</span></span><br><span class="line">annotations.append(dict(xref=<span class="string">'paper'</span>, yref=<span class="string">'paper'</span>, x=<span class="number">0.0</span>, y=<span class="number">1.05</span>,</span><br><span class="line">                              xanchor=<span class="string">'left'</span>, yanchor=<span class="string">'bottom'</span>,</span><br><span class="line">                              text=<span class="string">'Main Source for News'</span>,</span><br><span class="line">                              font=dict(family=<span class="string">'Arial'</span>,</span><br><span class="line">                                        size=<span class="number">30</span>,</span><br><span class="line">                                        color=<span class="string">'rgb(37,37,37)'</span>),</span><br><span class="line">                              showarrow=<span class="literal">False</span>))</span><br><span class="line"><span class="comment"># Source</span></span><br><span class="line">annotations.append(dict(xref=<span class="string">'paper'</span>, yref=<span class="string">'paper'</span>, x=<span class="number">0.5</span>, y=<span class="number">-0.1</span>,</span><br><span class="line">                              xanchor=<span class="string">'center'</span>, yanchor=<span class="string">'top'</span>,</span><br><span class="line">                              text=<span class="string">'Source: PewResearch Center &amp; '</span> +</span><br><span class="line">                                   <span class="string">'Storytelling with data'</span>,</span><br><span class="line">                              font=dict(family=<span class="string">'Arial'</span>,</span><br><span class="line">                                        size=<span class="number">12</span>,</span><br><span class="line">                                        color=<span class="string">'rgb(150,150,150)'</span>),</span><br><span class="line">                              showarrow=<span class="literal">False</span>))</span><br><span class="line"></span><br><span class="line">fig.update_layout(annotations=annotations)</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/18.png" style="zoom:100%;"></p>
<h4 id="Filled-Lines"><a href="#Filled-Lines" class="headerlink" title="Filled Lines"></a>Filled Lines</h4><p>上面三条是画这个的</p>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/20.png" style="zoom:100%;"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line">x_rev = x[::<span class="number">-1</span>] <span class="comment"># x的逆排列 即为 [10, 9, 8, 7, 6, 5, 4, 3, 2, 1] </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Line 1</span></span><br><span class="line">y1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line">y1_upper = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]</span><br><span class="line">y1_lower = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]</span><br><span class="line">y1_lower = y1_lower[::<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Line 2</span></span><br><span class="line">y2 = [<span class="number">5</span>, <span class="number">2.5</span>, <span class="number">5</span>, <span class="number">7.5</span>, <span class="number">5</span>, <span class="number">2.5</span>, <span class="number">7.5</span>, <span class="number">4.5</span>, <span class="number">5.5</span>, <span class="number">5</span>]</span><br><span class="line">y2_upper = [<span class="number">5.5</span>, <span class="number">3</span>, <span class="number">5.5</span>, <span class="number">8</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">8</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">5.5</span>]</span><br><span class="line">y2_lower = [<span class="number">4.5</span>, <span class="number">2</span>, <span class="number">4.4</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">4.75</span>]</span><br><span class="line">y2_lower = y2_lower[::<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Line 3</span></span><br><span class="line">y3 = [<span class="number">10</span>, <span class="number">8</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">0</span>]</span><br><span class="line">y3_upper = [<span class="number">11</span>, <span class="number">9</span>, <span class="number">7</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">1</span>]</span><br><span class="line">y3_lower = [<span class="number">9</span>, <span class="number">7</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">-.5</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">-1</span>]</span><br><span class="line">y3_lower = y3_lower[::<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x=x+x_rev,</span><br><span class="line">    y=y1_upper+y1_lower,</span><br><span class="line">    fill=<span class="string">'toself'</span>,</span><br><span class="line">    fillcolor=<span class="string">'rgba(0,100,80,0.2)'</span>,</span><br><span class="line">    line_color=<span class="string">'rgba(255,255,255,0)'</span>,</span><br><span class="line">    showlegend=<span class="literal">False</span>,</span><br><span class="line">    name=<span class="string">'Fair'</span>,</span><br><span class="line">))</span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x=x+x_rev,</span><br><span class="line">    y=y2_upper+y2_lower,</span><br><span class="line">    fill=<span class="string">'toself'</span>,</span><br><span class="line">    fillcolor=<span class="string">'rgba(0,176,246,0.2)'</span>,</span><br><span class="line">    line_color=<span class="string">'rgba(255,255,255,0)'</span>,</span><br><span class="line">    name=<span class="string">'Premium'</span>,</span><br><span class="line">    showlegend=<span class="literal">False</span>,</span><br><span class="line">))</span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x=x+x_rev,</span><br><span class="line">    y=y3_upper+y3_lower,</span><br><span class="line">    fill=<span class="string">'toself'</span>,</span><br><span class="line">    fillcolor=<span class="string">'rgba(231,107,243,0.2)'</span>,</span><br><span class="line">    line_color=<span class="string">'rgba(255,255,255,0)'</span>,</span><br><span class="line">    showlegend=<span class="literal">False</span>,</span><br><span class="line">    name=<span class="string">'Ideal'</span>,</span><br><span class="line">))</span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x=x, y=y1,</span><br><span class="line">    line_color=<span class="string">'rgb(0,100,80)'</span>,</span><br><span class="line">    name=<span class="string">'Fair'</span>,</span><br><span class="line">))</span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x=x, y=y2,</span><br><span class="line">    line_color=<span class="string">'rgb(0,176,246)'</span>,</span><br><span class="line">    name=<span class="string">'Premium'</span>,</span><br><span class="line">))</span><br><span class="line">fig.add_trace(go.Scatter(</span><br><span class="line">    x=x, y=y3,</span><br><span class="line">    line_color=<span class="string">'rgb(231,107,243)'</span>,</span><br><span class="line">    name=<span class="string">'Ideal'</span>,</span><br><span class="line">))</span><br><span class="line"></span><br><span class="line">fig.update_traces(mode=<span class="string">'lines'</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/19.png" style="zoom:100%;"></p>
<h2 id="Bar-Charts"><a href="#Bar-Charts" class="headerlink" title="Bar Charts"></a>Bar Charts</h2><p>参数文档：<a href="https://plotly.com/python-api-reference/generated/plotly.graph_objects.Bar.html#plotly.graph_objects.Bar" target="_blank" rel="noopener">https://plotly.com/python-api-reference/generated/plotly.graph_objects.Bar.html#plotly.graph_objects.Bar</a></p>
<h3 id="Plotly-Express-2"><a href="#Plotly-Express-2" class="headerlink" title="Plotly Express"></a>Plotly Express</h3><p><a href="https://plotly.com/python/plotly-express/" target="_blank" rel="noopener">Plotly Express</a> is the easy-to-use, high-level interface to Plotly, which <a href="https://plotly.com/python/px-arguments/" target="_blank" rel="noopener">operates on a variety of types of data</a> and produces <a href="https://plotly.com/python/styling-plotly-express/" target="_blank" rel="noopener">easy-to-style figures</a>.</p>
<p>With <code>px.bar</code>, each row of the DataFrame is represented as a rectangular mark.</p>
<p>plotly Express 可以快速地帮我们画出一些基本图形</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">data_canada = px.data.gapminder().query(<span class="string">"country == 'Canada'"</span>)</span><br><span class="line">fig = px.bar(data_canada, x=<span class="string">'year'</span>, y=<span class="string">'pop'</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/21.png" style="zoom:100%;"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data_canada.head()</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">country</th>
<th style="text-align:right">continent</th>
<th style="text-align:right">year</th>
<th style="text-align:right">lifeExp</th>
<th style="text-align:right">pop</th>
<th style="text-align:right">gdpPercap</th>
<th style="text-align:right">iso_alpha</th>
<th>iso_num</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">240</td>
<td style="text-align:right">Canada</td>
<td style="text-align:right">Americas</td>
<td style="text-align:right">1952</td>
<td style="text-align:right">68.75</td>
<td style="text-align:right">14785584</td>
<td style="text-align:right">11367.16112</td>
<td style="text-align:right">CAN</td>
<td>124</td>
</tr>
<tr>
<td style="text-align:right">241</td>
<td style="text-align:right">Canada</td>
<td style="text-align:right">Americas</td>
<td style="text-align:right">1957</td>
<td style="text-align:right">69.96</td>
<td style="text-align:right">17010154</td>
<td style="text-align:right">12489.95006</td>
<td style="text-align:right">CAN</td>
<td>124</td>
</tr>
<tr>
<td style="text-align:right">242</td>
<td style="text-align:right">Canada</td>
<td style="text-align:right">Americas</td>
<td style="text-align:right">1962</td>
<td style="text-align:right">71.30</td>
<td style="text-align:right">18985849</td>
<td style="text-align:right">13462.48555</td>
<td style="text-align:right">CAN</td>
<td>124</td>
</tr>
<tr>
<td style="text-align:right">243</td>
<td style="text-align:right">Canada</td>
<td style="text-align:right">Americas</td>
<td style="text-align:right">1967</td>
<td style="text-align:right">72.13</td>
<td style="text-align:right">20819767</td>
<td style="text-align:right">16076.58803</td>
<td style="text-align:right">CAN</td>
<td>124</td>
</tr>
<tr>
<td style="text-align:right">244</td>
<td style="text-align:right">Canada</td>
<td style="text-align:right">Americas</td>
<td style="text-align:right">1972</td>
<td style="text-align:right">72.88</td>
<td style="text-align:right">22284500</td>
<td style="text-align:right">18970.57086</td>
<td style="text-align:right">CAN</td>
<td>124</td>
</tr>
</tbody>
</table>
</div>
<h4 id="Customize-bar-chart-with-Plotly-Express"><a href="#Customize-bar-chart-with-Plotly-Express" class="headerlink" title="Customize bar chart with Plotly Express"></a>Customize bar chart with Plotly Express</h4><p>plotly express 也可以做一些简单的定制：我们在 hover_data中添加 lifeExp 和 gdpPercap 两个维度的信息。然后利用lifeExp让plotly对平均寿命的长短添加颜色轴，还定制了一下图的高度 height</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">data = px.data.gapminder()</span><br><span class="line"></span><br><span class="line">data_canada = data[data.country == <span class="string">'Canada'</span>]</span><br><span class="line">fig = px.bar(data_canada,</span><br><span class="line">             x=<span class="string">'year'</span>, </span><br><span class="line">             y=<span class="string">'pop'</span>,</span><br><span class="line">             hover_data=[<span class="string">'lifeExp'</span>, <span class="string">'gdpPercap'</span>],</span><br><span class="line">             color=<span class="string">'lifeExp'</span>,</span><br><span class="line">             labels=&#123;<span class="string">'pop'</span>:<span class="string">'population of Canada'</span>&#125;,</span><br><span class="line">             height=<span class="number">400</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/22.png" style="zoom:100%;"></p>
<p>When several rows share the same value of <code>x</code> (here Female or Male), the rectangles are stacked on top of one another by default.</p>
<p>下面是一个叠加柱状图，Dinner和Lunch通过不同颜色的表现形式叠成了一个柱体。因为 barmode 默认是stack也就是堆积图。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">df = px.data.tips()</span><br><span class="line">fig = px.bar(df, x=<span class="string">"sex"</span>, y=<span class="string">"total_bill"</span>, color=<span class="string">'time'</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/23.png" style="zoom:100%;"></p>
<p>我们可以修改 barmode属性来修改图的样式： barmode有四个选项：[‘stack’, ‘group’, ‘overlay’, ‘relative’]</p>
<p>我们把 barmode改成 group，画面会直观一点：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fig = px.bar(df, </span><br><span class="line">             x=<span class="string">"sex"</span>, </span><br><span class="line">             y=<span class="string">"total_bill"</span>,</span><br><span class="line">             color=<span class="string">'smoker'</span>,</span><br><span class="line">             barmode=<span class="string">'group'</span>,</span><br><span class="line">             height=<span class="number">400</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/24.png" style="zoom:100%;"></p>
<h4 id="Facetted-subplots"><a href="#Facetted-subplots" class="headerlink" title="Facetted subplots"></a>Facetted subplots</h4><p>使用 facet_row 和 facet_col 属性，我们可以创建子图。这和 seaborn的 row 和 col原理一样。</p>
<p>Use the keyword arguments <code>facet_row</code> (resp. <code>facet_col</code>) to create facetted subplots, where different rows (resp. columns) correspond to different values of the dataframe column specified in <code>facet_row</code>.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">fig = px.bar(</span><br><span class="line">    df,</span><br><span class="line">    x=<span class="string">"sex"</span>, </span><br><span class="line">    y=<span class="string">"total_bill"</span>,</span><br><span class="line">    color=<span class="string">"smoker"</span>,</span><br><span class="line">    barmode=<span class="string">"group"</span>,</span><br><span class="line">    facet_row=<span class="string">"time"</span>, </span><br><span class="line">    facet_col=<span class="string">"day"</span>,</span><br><span class="line">    category_orders=&#123;<span class="string">"day"</span>: [<span class="string">"Thur"</span>, <span class="string">"Fri"</span>, <span class="string">"Sat"</span>, <span class="string">"Sun"</span>],<span class="string">"time"</span>: [<span class="string">"Lunch"</span>,<span class="string">"Dinner"</span>]&#125;)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/25.png" style="zoom:100%;"></p>
<h3 id="go-Bar"><a href="#go-Bar" class="headerlink" title="go.Bar"></a>go.Bar</h3><p>express仅仅是快速画图，现在使用 plotly.graph_objects 来进行画图</p>
<p>If Plotly Express does not provide a good starting point, it is also possible to use <a href="https://plotly.com/python/graph-objects/" target="_blank" rel="noopener">the more generic <code>go.Bar</code> class from <code>plotly.graph_objects</code></a>.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line">animals=[<span class="string">'giraffes'</span>, <span class="string">'orangutans'</span>, <span class="string">'monkeys'</span>]</span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=[go.Bar(x=animals, y=[<span class="number">20</span>, <span class="number">14</span>, <span class="number">23</span>])])</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/26.png" style="zoom:100%;"></p>
<h4 id="Grouped-Bar-Chart"><a href="#Grouped-Bar-Chart" class="headerlink" title="Grouped Bar Chart"></a>Grouped Bar Chart</h4><p>使用 update_layout 来自定义图像</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">animals=[<span class="string">'giraffes'</span>, <span class="string">'orangutans'</span>, <span class="string">'monkeys'</span>]</span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=[</span><br><span class="line">    go.Bar(name=<span class="string">'SF Zoo'</span>, x=animals, y=[<span class="number">20</span>, <span class="number">14</span>, <span class="number">23</span>]),</span><br><span class="line">    go.Bar(name=<span class="string">'LA Zoo'</span>, x=animals, y=[<span class="number">12</span>, <span class="number">18</span>, <span class="number">29</span>])</span><br><span class="line">])</span><br><span class="line"><span class="comment"># Change the bar mode</span></span><br><span class="line">fig.update_layout(barmode=<span class="string">'group'</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/27.png" style="zoom:100%;"></p>
<h4 id="Stacked-Bar-Chart"><a href="#Stacked-Bar-Chart" class="headerlink" title="Stacked Bar Chart"></a>Stacked Bar Chart</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">animals=[<span class="string">'giraffes'</span>, <span class="string">'orangutans'</span>, <span class="string">'monkeys'</span>]</span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=[</span><br><span class="line">    go.Bar(name=<span class="string">'SF Zoo'</span>, x=animals, y=[<span class="number">20</span>, <span class="number">14</span>, <span class="number">23</span>]),</span><br><span class="line">    go.Bar(name=<span class="string">'LA Zoo'</span>, x=animals, y=[<span class="number">12</span>, <span class="number">18</span>, <span class="number">29</span>])</span><br><span class="line">])</span><br><span class="line"><span class="comment"># Change the bar mode</span></span><br><span class="line">fig.update_layout(barmode=<span class="string">'stack'</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/28.png" style="zoom:100%;"></p>
<h4 id="Bar-Chart-with-Hover-Text"><a href="#Bar-Chart-with-Hover-Text" class="headerlink" title="Bar Chart with Hover Text"></a>Bar Chart with Hover Text</h4><p>我们利用 update_trace来更新柱状体的样式。通过marker_color 设置柱体颜色，marker_line_color设置边框颜色，marker_line_width设置边框线粗细，opacity设置透明度</p>
<p>最后把title渲染上去</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">x = [<span class="string">'Product A'</span>, <span class="string">'Product B'</span>, <span class="string">'Product C'</span>]</span><br><span class="line">y = [<span class="number">20</span>, <span class="number">14</span>, <span class="number">23</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Use the hovertext kw argument for hover text</span></span><br><span class="line">fig = go.Figure(data=[go.Bar(x=x, y=y,</span><br><span class="line">            hovertext=[<span class="string">'27% market share'</span>, <span class="string">'24% market share'</span>, <span class="string">'19% market share'</span>])])</span><br><span class="line"><span class="comment"># Customize aspect</span></span><br><span class="line">fig.update_traces(marker_color=<span class="string">'rgb(158,202,225)'</span>, marker_line_color=<span class="string">'rgb(8,48,107)'</span>,</span><br><span class="line">                  marker_line_width=<span class="number">1.5</span>, opacity=<span class="number">0.6</span>)</span><br><span class="line">fig.update_layout(title=<span class="string">'January 2013 Sales Report'</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/29.png" style="zoom:100%;"></p>
<h4 id="Bar-Chart-with-Direct-Labels"><a href="#Bar-Chart-with-Direct-Labels" class="headerlink" title="Bar Chart with Direct Labels"></a>Bar Chart with Direct Labels</h4><p>我们可以设置 go.bar() 中的text属性，把y轴对应的数据直接渲染到柱体上</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">x = [<span class="string">'Product A'</span>, <span class="string">'Product B'</span>, <span class="string">'Product C'</span>]</span><br><span class="line">y = [<span class="number">20</span>, <span class="number">14</span>, <span class="number">23</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Use textposition='auto' for direct text</span></span><br><span class="line">fig = go.Figure(data=[go.Bar(</span><br><span class="line">            x=x, y=y,</span><br><span class="line">            text=y,</span><br><span class="line">            textposition=<span class="string">'auto'</span>,</span><br><span class="line">        )])</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/30.png" style="zoom:100%;"></p>
<h4 id="Controlling-text-fontsize-with-uniformtext"><a href="#Controlling-text-fontsize-with-uniformtext" class="headerlink" title="Controlling text fontsize with uniformtext"></a>Controlling text fontsize with uniformtext</h4><p>If you want all the text labels to have the same size, you can use the <code>uniformtext</code> layout parameter. The <code>minsize</code> attribute sets the font size, and the <code>mode</code> attribute sets what happens for labels which cannot fit with the desired fontsize: either <code>hide</code> them or <code>show</code> them with overflow. In the example below we also force the text to be outside of bars with <code>textposition</code>.</p>
<p>如上图，柱子所代表的数字是被囊括在柱子中间的。但显然这并不美观。我们设置柱子上面的文字是漂浮在柱子之上的，所以我们通过 update_traces 设置textposition属性为outside(还可以选择inside，auto，none)</p>
<p>下图是选择auto的情况，plotly会根据text的长短和柱体的粗细来选择到底是outside还是inside</p>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/41.png" style="zoom:100%;"></p>
<p>然后设置 text的模板，也就是texttemplate属性，让他保留两位数，可以是整数也可以是小数</p>
<p>然后我们美化一下，设置uniformtext_minsize也就是text的字体为8，然后把 uniformtext_mode置为True(还可以设置为hide)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">df = px</span><br><span class="line">		.data</span><br><span class="line">    	.gapminder()</span><br><span class="line">		.query(<span class="string">"continent == 'Europe' and year == 2007 and pop &gt; 2.e6"</span>)</span><br><span class="line">fig = px.bar(</span><br><span class="line">    	df,</span><br><span class="line">    	y=<span class="string">'pop'</span>, </span><br><span class="line">    	x=<span class="string">'country'</span>,</span><br><span class="line">    	text=<span class="string">'pop'</span>)</span><br><span class="line">fig.update_traces(</span><br><span class="line">    	texttemplate=<span class="string">'%&#123;text:.2s&#125;'</span>,</span><br><span class="line">    	textposition=<span class="string">'outside'</span>)</span><br><span class="line">fig.update_layout(</span><br><span class="line">    	uniformtext_minsize=<span class="number">8</span>,</span><br><span class="line">    	uniformtext_mode=<span class="string">'show'</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/31.png" style="zoom:100%;"></p>
<h4 id="Rotated-Bar-Chart-Labels"><a href="#Rotated-Bar-Chart-Labels" class="headerlink" title="Rotated Bar Chart Labels"></a>Rotated Bar Chart Labels</h4><p>这个组图是“手工”一步步加上去的，但是我们的重点是 update_layout 设置的xaxis_tickangle属性</p>
<p>这其实是让 x轴的标签有一定的倾斜角度。 正值为</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">months = [<span class="string">'Jan'</span>, <span class="string">'Feb'</span>, <span class="string">'Mar'</span>, <span class="string">'Apr'</span>, <span class="string">'May'</span>, <span class="string">'Jun'</span>,</span><br><span class="line">          <span class="string">'Jul'</span>, <span class="string">'Aug'</span>, <span class="string">'Sep'</span>, <span class="string">'Oct'</span>, <span class="string">'Nov'</span>, <span class="string">'Dec'</span>]</span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line">fig.add_trace(go.Bar(</span><br><span class="line">    x=months,</span><br><span class="line">    y=[<span class="number">20</span>, <span class="number">14</span>, <span class="number">25</span>, <span class="number">16</span>, <span class="number">18</span>, <span class="number">22</span>, <span class="number">19</span>, <span class="number">15</span>, <span class="number">12</span>, <span class="number">16</span>, <span class="number">14</span>, <span class="number">17</span>],</span><br><span class="line">    name=<span class="string">'Primary Product'</span>,</span><br><span class="line">    marker_color=<span class="string">'indianred'</span></span><br><span class="line">))</span><br><span class="line">fig.add_trace(go.Bar(</span><br><span class="line">    x=months,</span><br><span class="line">    y=[<span class="number">19</span>, <span class="number">14</span>, <span class="number">22</span>, <span class="number">14</span>, <span class="number">16</span>, <span class="number">19</span>, <span class="number">15</span>, <span class="number">14</span>, <span class="number">10</span>, <span class="number">12</span>, <span class="number">12</span>, <span class="number">16</span>],</span><br><span class="line">    name=<span class="string">'Secondary Product'</span>,</span><br><span class="line">    marker_color=<span class="string">'lightsalmon'</span></span><br><span class="line">))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Here we modify the tickangle of the xaxis, resulting in rotated labels.</span></span><br><span class="line">fig.update_layout(barmode=<span class="string">'group'</span>, xaxis_tickangle=<span class="number">-45</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/32.png" style="zoom:100%;"></p>
<h4 id="Customizing-Individual-Bar-Colors"><a href="#Customizing-Individual-Bar-Colors" class="headerlink" title="Customizing Individual Bar Colors"></a>Customizing Individual Bar Colors</h4><p>我们通过设置marker_color 可以给每一个柱体分配颜色。</p>
<p>marker color 可以是一个单独的值(统一) , 也可以是一个可迭代对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">colors = [<span class="string">'lightslategray'</span>,] * <span class="number">5</span></span><br><span class="line">colors[<span class="number">1</span>] = <span class="string">'crimson'</span></span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=[go.Bar(</span><br><span class="line">    x=[<span class="string">'Feature A'</span>, <span class="string">'Feature B'</span>, <span class="string">'Feature C'</span>,</span><br><span class="line">       <span class="string">'Feature D'</span>, <span class="string">'Feature E'</span>],</span><br><span class="line">    y=[<span class="number">20</span>, <span class="number">14</span>, <span class="number">23</span>, <span class="number">25</span>, <span class="number">22</span>],</span><br><span class="line">    marker_color=colors <span class="comment"># marker color can be a single color value or an iterable</span></span><br><span class="line">)])</span><br><span class="line">fig.update_layout(title=<span class="string">'Least Used Feature'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/33.png" style="zoom:100%;"></p>
<h4 id="Customizing-Individual-Bar-Widths"><a href="#Customizing-Individual-Bar-Widths" class="headerlink" title="Customizing Individual Bar Widths"></a>Customizing Individual Bar Widths</h4><p>我们甚至可以自定义柱状体的宽度</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fig = go.Figure(data=[go.Bar(</span><br><span class="line">    x=[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5.5</span>, <span class="number">10</span>],</span><br><span class="line">    y=[<span class="number">10</span>, <span class="number">8</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">2</span>],</span><br><span class="line">    width=[<span class="number">0.8</span>, <span class="number">0.8</span>, <span class="number">0.8</span>, <span class="number">3.5</span>, <span class="number">4</span>] <span class="comment"># customize width here</span></span><br><span class="line">)])</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/34.png" style="zoom:100%;"></p>
<h4 id="Customizing-Individual-Bar-Base"><a href="#Customizing-Individual-Bar-Base" class="headerlink" title="Customizing Individual Bar Base"></a>Customizing Individual Bar Base</h4><p>我们可以手动设置 base ，也就是柱体开始的地方。下面设置了柱体的base分别是-500，-600，-700 ，柱体的高度分别是500，600，700 所以柱体从base开始生长，到y=0的时候终结。呈现了”翻转“柱体的效果</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">years = [<span class="string">'2016'</span>,<span class="string">'2017'</span>,<span class="string">'2018'</span>]</span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line">fig.add_trace(go.Bar(x=years, y=[<span class="number">500</span>, <span class="number">600</span>, <span class="number">700</span>],</span><br><span class="line">                base=[<span class="number">-500</span>,<span class="number">-600</span>,<span class="number">-700</span>],</span><br><span class="line">                marker_color=<span class="string">'crimson'</span>,</span><br><span class="line">                name=<span class="string">'expenses'</span>))</span><br><span class="line">fig.add_trace(go.Bar(x=years, y=[<span class="number">300</span>, <span class="number">400</span>, <span class="number">700</span>],</span><br><span class="line">                base=<span class="number">0</span>,</span><br><span class="line">                marker_color=<span class="string">'lightslategrey'</span>,</span><br><span class="line">                name=<span class="string">'revenue'</span></span><br><span class="line">                ))</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/35.png" style="zoom:100%;"></p>
<h4 id="Colored-and-Styled-Bar-Chart"><a href="#Colored-and-Styled-Bar-Chart" class="headerlink" title="Colored and Styled Bar Chart"></a>Colored and Styled Bar Chart</h4><p>In this example several parameters of the layout as customized, hence it is convenient to use directly the <code>go.Layout(...)</code> constructor instead of calling <code>fig.update</code>.</p>
<p>首先我们添加了 rest of world 和 China 两列个信息。然后我们设置layout</p>
<p>设置xaxis_tickfont_size也就是x轴下标注的字体</p>
<p>然后设置yaxis 的相关信息</p>
<p>接着设置图例，bgcolor和bordercolor 设置了图例的边框和底纹都是透明的。</p>
<p>最后设置了图按group编排，柱组与柱组之间的间隙，和柱组之间柱与柱的间隙</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">years = [<span class="number">1995</span>, <span class="number">1996</span>, <span class="number">1997</span>, <span class="number">1998</span>, <span class="number">1999</span>, <span class="number">2000</span>, <span class="number">2001</span>, <span class="number">2002</span>, <span class="number">2003</span>,</span><br><span class="line">         <span class="number">2004</span>, <span class="number">2005</span>, <span class="number">2006</span>, <span class="number">2007</span>, <span class="number">2008</span>, <span class="number">2009</span>, <span class="number">2010</span>, <span class="number">2011</span>, <span class="number">2012</span>]</span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line">fig.add_trace(go.Bar(x=years,</span><br><span class="line">                y=[<span class="number">219</span>, <span class="number">146</span>, <span class="number">112</span>, <span class="number">127</span>, <span class="number">124</span>, <span class="number">180</span>, <span class="number">236</span>, <span class="number">207</span>, <span class="number">236</span>, <span class="number">263</span>,</span><br><span class="line">                   <span class="number">350</span>, <span class="number">430</span>, <span class="number">474</span>, <span class="number">526</span>, <span class="number">488</span>, <span class="number">537</span>, <span class="number">500</span>, <span class="number">439</span>],</span><br><span class="line">                name=<span class="string">'Rest of world'</span>,</span><br><span class="line">                marker_color=<span class="string">'rgb(55, 83, 109)'</span></span><br><span class="line">                ))</span><br><span class="line">fig.add_trace(go.Bar(x=years,</span><br><span class="line">                y=[<span class="number">16</span>, <span class="number">13</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">28</span>, <span class="number">37</span>, <span class="number">43</span>, <span class="number">55</span>, <span class="number">56</span>, <span class="number">88</span>, <span class="number">105</span>, <span class="number">156</span>, <span class="number">270</span>,</span><br><span class="line">                   <span class="number">299</span>, <span class="number">340</span>, <span class="number">403</span>, <span class="number">549</span>, <span class="number">499</span>],</span><br><span class="line">                name=<span class="string">'China'</span>,</span><br><span class="line">                marker_color=<span class="string">'rgb(26, 118, 255)'</span></span><br><span class="line">                ))</span><br><span class="line"></span><br><span class="line">fig.update_layout(</span><br><span class="line">    title=<span class="string">'US Export of Plastic Scrap'</span>,</span><br><span class="line">    xaxis_tickfont_size=<span class="number">14</span>,</span><br><span class="line">    yaxis=dict(</span><br><span class="line">        title=<span class="string">'USD (millions)'</span>,</span><br><span class="line">        titlefont_size=<span class="number">16</span>,</span><br><span class="line">        tickfont_size=<span class="number">14</span>,</span><br><span class="line">    ),</span><br><span class="line">    legend=dict(</span><br><span class="line">        x=<span class="number">0</span>,</span><br><span class="line">        y=<span class="number">1.0</span>,</span><br><span class="line">        bgcolor=<span class="string">'rgba(255, 255, 255, 0)'</span>,</span><br><span class="line">        bordercolor=<span class="string">'rgba(255, 255, 255, 0)'</span></span><br><span class="line">    ),</span><br><span class="line">    barmode=<span class="string">'group'</span>,</span><br><span class="line">    bargap=<span class="number">0.15</span>, <span class="comment"># gap between bars of adjacent location coordinates.</span></span><br><span class="line">    bargroupgap=<span class="number">0.1</span> <span class="comment"># gap between bars of the same location coordinate.</span></span><br><span class="line">)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/36.png" style="zoom:100%;"></p>
<h4 id="Bar-Chart-with-Relative-Barmode"><a href="#Bar-Chart-with-Relative-Barmode" class="headerlink" title="Bar Chart with Relative Barmode"></a>Bar Chart with Relative Barmode</h4><p>With “relative” barmode, the bars are stacked on top of one another, with negative values below the axis, positive values above.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line">fig.add_trace(go.Bar(x=x, y=[<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>]))</span><br><span class="line">fig.add_trace(go.Bar(x=x, y=[<span class="number">6</span>, <span class="number">-8</span>, <span class="number">-4.5</span>, <span class="number">8</span>]))</span><br><span class="line">fig.add_trace(go.Bar(x=x, y=[<span class="number">-15</span>, <span class="number">-3</span>, <span class="number">4.5</span>, <span class="number">-8</span>]))</span><br><span class="line">fig.add_trace(go.Bar(x=x, y=[<span class="number">-1</span>, <span class="number">3</span>, <span class="number">-3</span>, <span class="number">-4</span>]))</span><br><span class="line"></span><br><span class="line">fig.update_layout(barmode=<span class="string">'relative'</span>, title_text=<span class="string">'Relative Barmode'</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/37.png" style="zoom:100%;"></p>
<h4 id="Bar-Chart-with-Sorted-or-Ordered-Categories"><a href="#Bar-Chart-with-Sorted-or-Ordered-Categories" class="headerlink" title="Bar Chart with Sorted or Ordered Categories"></a>Bar Chart with Sorted or Ordered Categories</h4><p>Set <code>categoryorder</code> to <code>&quot;category ascending&quot;</code> or <code>&quot;category descending&quot;</code> for the alphanumerical order of the category names or <code>&quot;total ascending&quot;</code> or <code>&quot;total descending&quot;</code> for numerical order of values. <a href="https://plotly.com/python/reference/#layout-xaxis-categoryorder" target="_blank" rel="noopener">categoryorder</a> for more information. Note that sorting the bars by a particular trace isn’t possible right now - it’s only possible to sort by the total values. Of course, you can always sort your data <em>before</em> plotting it if you need more customization.</p>
<p>This example orders the bar chart alphabetically with <code>categoryorder: &#39;category ascending&#39;</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line">x=[<span class="string">'b'</span>, <span class="string">'a'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>]</span><br><span class="line">fig = go.Figure(go.Bar(x=x, y=[<span class="number">2</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">9</span>], name=<span class="string">'Montreal'</span>))</span><br><span class="line">fig.add_trace(go.Bar(x=x, y=[<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>], name=<span class="string">'Ottawa'</span>))</span><br><span class="line">fig.add_trace(go.Bar(x=x, y=[<span class="number">6</span>, <span class="number">8</span>, <span class="number">4.5</span>, <span class="number">8</span>], name=<span class="string">'Toronto'</span>))</span><br><span class="line"></span><br><span class="line">fig.update_layout(barmode=<span class="string">'stack'</span>, xaxis=&#123;<span class="string">'categoryorder'</span>:<span class="string">'category ascending'</span>&#125;)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/38.png" style="zoom:100%;"></p>
<p> This example shows how to customise sort ordering by defining <code>categoryorder</code> to “array” to derive the ordering from the attribute <code>categoryarray</code>.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line">x=[<span class="string">'b'</span>, <span class="string">'a'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>]</span><br><span class="line">fig = go.Figure(go.Bar(x=x, y=[<span class="number">2</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">9</span>], name=<span class="string">'Montreal'</span>))</span><br><span class="line">fig.add_trace(go.Bar(x=x, y=[<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>], name=<span class="string">'Ottawa'</span>))</span><br><span class="line">fig.add_trace(go.Bar(x=x, y=[<span class="number">6</span>, <span class="number">8</span>, <span class="number">4.5</span>, <span class="number">8</span>], name=<span class="string">'Toronto'</span>))</span><br><span class="line"></span><br><span class="line">fig.update_layout(barmode=<span class="string">'stack'</span>, xaxis=&#123;<span class="string">'categoryorder'</span>:<span class="string">'array'</span>, <span class="string">'categoryarray'</span>:[<span class="string">'d'</span>,<span class="string">'a'</span>,<span class="string">'c'</span>,<span class="string">'b'</span>]&#125;)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/39.png" style="zoom:100%;"></p>
<p>This example orders the bar chart by descending value with <code>categoryorder: &#39;total descending&#39;</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line">x=[<span class="string">'b'</span>, <span class="string">'a'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>]</span><br><span class="line">fig = go.Figure(go.Bar(x=x, y=[<span class="number">2</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">9</span>], name=<span class="string">'Montreal'</span>))</span><br><span class="line">fig.add_trace(go.Bar(x=x, y=[<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>], name=<span class="string">'Ottawa'</span>))</span><br><span class="line">fig.add_trace(go.Bar(x=x, y=[<span class="number">6</span>, <span class="number">8</span>, <span class="number">4.5</span>, <span class="number">8</span>], name=<span class="string">'Toronto'</span>))</span><br><span class="line"></span><br><span class="line">fig.update_layout(barmode=<span class="string">'stack'</span>, xaxis=&#123;<span class="string">'categoryorder'</span>:<span class="string">'total descending'</span>&#125;)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/40.png" style="zoom:100%;"></p>
<h2 id="Pie-Charts"><a href="#Pie-Charts" class="headerlink" title="Pie Charts"></a>Pie Charts</h2><p>接下来我们来介绍饼图。饼图的参数：<a href="https://plotly.com/python-api-reference/generated/plotly.graph_objects.Pie.html#plotly.graph_objects.Pie" target="_blank" rel="noopener">https://plotly.com/python-api-reference/generated/plotly.graph_objects.Pie.html#plotly.graph_objects.Pie</a></p>
<h3 id="plotly-express"><a href="#plotly-express" class="headerlink" title="plotly express"></a>plotly express</h3><p>我们首先用 plotly express来画饼图。只要传入dataset，values，names，px会自动计算各个值占的比例，然后names代表了旁边的一排图例上的名字。不设置图例就没有名字。</p>
<p>In <code>px.pie</code>, data visualized by the sectors of the pie is set in <code>values</code>. The sector labels are set in <code>names</code>.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">df = px.data.gapminder().query(<span class="string">"year == 2007"</span>).query(<span class="string">"continent == 'Europe'"</span>)</span><br><span class="line">df.loc[df[<span class="string">'pop'</span>] &lt; <span class="number">2.e6</span>, <span class="string">'country'</span>] = <span class="string">'Other countries'</span> </span><br><span class="line"><span class="comment"># Represent only large countries</span></span><br><span class="line">fig = px.pie(</span><br><span class="line">    df,</span><br><span class="line">    values=<span class="string">'pop'</span>,</span><br><span class="line">    names=<span class="string">'country'</span>, </span><br><span class="line">    title=<span class="string">'Population of European continent'</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/02.png" style="zoom:100%;"></p>
<h4 id="Pie-chart-with-repeated-labels"><a href="#Pie-chart-with-repeated-labels" class="headerlink" title="Pie chart with repeated labels"></a>Pie chart with repeated labels</h4><p>Lines of the dataframe with the same value for <code>names</code> are grouped together in the same sector.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># This dataframe has 244 lines, but 4 distinct values for `day`</span></span><br><span class="line">df = px.data.tips()</span><br><span class="line">fig = px.pie(df, values=<span class="string">'tip'</span>, names=<span class="string">'day'</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/42.png" style="zoom:100%;"></p>
<h4 id="Setting-the-color-of-pie-sectors"><a href="#Setting-the-color-of-pie-sectors" class="headerlink" title="Setting the color of pie sectors"></a>Setting the color of pie sectors</h4><p>我们可以设置color_discrete_sequence 属性给饼状图设置不同的色系</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">df = px.data.tips()</span><br><span class="line">fig = px.pie(df, values=<span class="string">'tip'</span>, names=<span class="string">'day'</span>, color_discrete_sequence=px.colors.sequential.RdBu)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/43.png" style="zoom:100%;"></p>
<h4 id="Using-an-explicit-mapping-for-discrete-colors"><a href="#Using-an-explicit-mapping-for-discrete-colors" class="headerlink" title="Using an explicit mapping for discrete colors"></a>Using an explicit mapping for discrete colors</h4><p>For more information about discrete colors, see the <a href="https://plotly.com/python/discrete-color" target="_blank" rel="noopener">dedicated page</a>.</p>
<p>我们还可以设置 color_discrete_map 传入一个字典，为不同的day值设置不同的颜色</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">df = px.data.tips()</span><br><span class="line">fig = px.pie(df, values=<span class="string">'tip'</span>, names=<span class="string">'day'</span>, color=<span class="string">'day'</span>,</span><br><span class="line">             color_discrete_map=&#123;<span class="string">'Thur'</span>:<span class="string">'lightcyan'</span>,</span><br><span class="line">                                 <span class="string">'Fri'</span>:<span class="string">'cyan'</span>,</span><br><span class="line">                                 <span class="string">'Sat'</span>:<span class="string">'royalblue'</span>,</span><br><span class="line">                                 <span class="string">'Sun'</span>:<span class="string">'darkblue'</span>&#125;)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/44.png" style="zoom:100%;"></p>
<h4 id="Customizing-a-pie-chart-created-with"><a href="#Customizing-a-pie-chart-created-with" class="headerlink" title="Customizing a pie chart created with"></a>Customizing a pie chart created with</h4><p>In the example below, we first create a pie chart with <code>px,pie</code>, using some of its options such as <code>hover_data</code> (which columns should appear in the hover) or <code>labels</code> (renaming column names). </p>
<p>For further tuning, we call <code>fig.update_traces</code> to set other parameters of the chart (you can also use <code>fig.update_layout</code> for changing the layout).</p>
<p>我们首先用 px.pie创建一张初始图片，设置一下标题，hover_data,和label，</p>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/75.png" style="zoom:100%;"></p>
<p>这就是我们设置的 hover_data，因为在信息库中列名为lifeExp，但是这有点晦涩，所以我们设置<br>labels={‘lifeExp’:’life expectancy’}) 这样我们得到的 lifeExp会被替换成 life expectancy</p>
<p>最后利用update_traces方法在饼图上添加文字和百分比。textinfo可以是下面四个选择的任意组合</p>
<p>textinfo： - Any combination of [‘label’, ‘text’, ‘value’, ‘percent’] joined with ‘+’ characters</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">df = px.data.gapminder().query(<span class="string">"year == 2007"</span>).query(<span class="string">"continent == 'Americas'"</span>)</span><br><span class="line">fig = px.pie(</span><br><span class="line">    df, </span><br><span class="line">    values=<span class="string">'pop'</span>, </span><br><span class="line">    names=<span class="string">'country'</span>,</span><br><span class="line">    title=<span class="string">'Population of American continent'</span>,</span><br><span class="line">    hover_data=[<span class="string">'lifeExp'</span>], </span><br><span class="line">    labels=&#123;<span class="string">'lifeExp'</span>:<span class="string">'life expectancy'</span>&#125;)</span><br><span class="line">fig.update_traces(textposition=<span class="string">'inside'</span>, textinfo=<span class="string">'percent+label'</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/45.png" style="zoom:100%;"></p>
<h3 id="go-Pie"><a href="#go-Pie" class="headerlink" title="go.Pie"></a>go.Pie</h3><h4 id="Basic-Pie-Chart-with-go-Pie"><a href="#Basic-Pie-Chart-with-go-Pie" class="headerlink" title="Basic Pie Chart with go.Pie"></a>Basic Pie Chart with go.Pie</h4><p>In <code>go.Pie</code>, data visualized by the sectors of the pie is set in <code>values</code>. The sector labels are set in <code>labels</code>. The sector colors are set in <code>marker.colors</code>.</p>
<p>If you’re looking instead for a multilevel hierarchical pie-like chart, go to the <a href="https://plotly.com/python/sunburst-charts/" target="_blank" rel="noopener">Sunburst tutorial</a>.</p>
<p>下面我们使用go来画饼状图。最基本的就是设置labels和 values</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line">labels = [<span class="string">'Oxygen'</span>,<span class="string">'Hydrogen'</span>,<span class="string">'Carbon_Dioxide'</span>,<span class="string">'Nitrogen'</span>]</span><br><span class="line">values = [<span class="number">4500</span>, <span class="number">2500</span>, <span class="number">1053</span>, <span class="number">500</span>]</span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=[go.Pie(labels=labels, values=values)])</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/46.png" style="zoom:100%;"></p>
<h4 id="Styled-Pie-Chart"><a href="#Styled-Pie-Chart" class="headerlink" title="Styled Pie Chart"></a>Styled Pie Chart</h4><p>Colors can be given as RGB triplets or hexadecimal strings, or with <a href="https://www.w3schools.com/cssref/css_colors.asp" target="_blank" rel="noopener">CSS color names</a> as below.</p>
<p>此外，我们可以通过update_traces 来手添加 hoverinfo和textinfo 并且添加marker来设置颜色、边界线属性</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">colors = [<span class="string">'gold'</span>, <span class="string">'mediumturquoise'</span>, <span class="string">'darkorange'</span>, <span class="string">'lightgreen'</span>]</span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=[go.Pie(</span><br><span class="line">    labels=[<span class="string">'Oxygen'</span>,<span class="string">'Hydrogen'</span>,<span class="string">'Carbon_Dioxide'</span>,<span class="string">'Nitrogen'</span>],</span><br><span class="line">    values=[<span class="number">4500</span>,<span class="number">2500</span>,<span class="number">1053</span>,<span class="number">500</span>])])</span><br><span class="line">fig.update_traces(</span><br><span class="line">    hoverinfo=<span class="string">'label+percent'</span>, </span><br><span class="line">    textinfo=<span class="string">'value'</span>,</span><br><span class="line">    textfont_size=<span class="number">20</span>,</span><br><span class="line">    marker=dict(colors=colors, line=dict(color=<span class="string">'#000000'</span>, width=<span class="number">2</span>)))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/47.png" style="zoom:100%;"></p>
<h4 id="Controlling-text-fontsize-with-uniformtext-1"><a href="#Controlling-text-fontsize-with-uniformtext-1" class="headerlink" title="Controlling text fontsize with uniformtext"></a>Controlling text fontsize with uniformtext</h4><p>If you want all the text labels to have the same size, you can use </p>
<p>the <code>uniformtext</code> layout parameter. </p>
<p>The <code>minsize</code> attribute sets the font size</p>
<p>the <code>mode</code> attribute sets what happens for labels which cannot fit with the desired fontsize: either <code>hide</code> them or <code>show</code> them with overflow. </p>
<p>In the example below we also force the text to be inside with <code>textposition</code>, otherwise text labels which do not fit are displayed outside of pie sectors.</p>
<p>我们通过设置textposition 可以设置文本在饼状图的外面还是里面 </p>
<p>然后通过设置layout 来让画面更加美观。当 uniformtext_mode 为hide时，plotly会选择性地给饼图添加文字，如果该部分面积太小，就会被隐藏。而如果uniformtext_mode  = ’show‘ 那么一律标出。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">df = px.data.gapminder().query(<span class="string">"continent == 'Asia'"</span>)</span><br><span class="line">fig = px.pie(df, values=<span class="string">'pop'</span>, names=<span class="string">'country'</span>)</span><br><span class="line">fig.update_traces(textposition=<span class="string">'inside'</span>)</span><br><span class="line">fig.update_layout(uniformtext_minsize=<span class="number">12</span>, uniformtext_mode=<span class="string">'hide'</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/48.png" style="zoom:100%;"></p>
<p>我们可以通过 设置 textposition = ‘auto’ ,uniformtext_mode  = ’show‘  达到这样的效果</p>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/76.png" style="zoom:70%;"></p>
<h4 id="Controlling-text-orientation-inside-pie-sectors"><a href="#Controlling-text-orientation-inside-pie-sectors" class="headerlink" title="Controlling text orientation inside pie sectors"></a>Controlling text orientation inside pie sectors</h4><p>The <code>insidetextorientation</code> attribute controls the orientation of text inside sectors. With “auto” the texts may automatically be rotated to fit with the maximum size inside the slice. Using “horizontal” (resp. “radial”, “tangential”) forces text to be horizontal (resp. radial or tangential)</p>
<p>For a figure <code>fig</code> created with plotly express, use <code>fig.update_traces(insidetextorientation=&#39;...&#39;)</code> to change the text orientation.(如果使用plotly express 画的话，需要用update_traces修改这个属性，如果使用go可以直接设置)</p>
<p>radial: 辐射状，也就是饼状图中的文字朝向圆心辐射状分布，那么如果选择了horizontal 那么就始终是水平分布的。还可以选择 tangential 和 auto</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">labels = [<span class="string">'Oxygen'</span>,<span class="string">'Hydrogen'</span>,<span class="string">'Carbon_Dioxide'</span>,<span class="string">'Nitrogen'</span>]</span><br><span class="line">values = [<span class="number">4500</span>, <span class="number">2500</span>, <span class="number">1053</span>, <span class="number">500</span>]</span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=[go.Pie(</span><br><span class="line">    labels=labels,</span><br><span class="line">    values=values,</span><br><span class="line">    textinfo=<span class="string">'label+percent'</span>,</span><br><span class="line">    insidetextorientation=<span class="string">'radial'</span>)])</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/49.png" style="zoom:100%;"></p>
<p><strong>horizontal 的效果：</strong></p>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/77.png" style="zoom:100%;"></p>
<p><strong>tangential 的效果</strong></p>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/78.png" style="zoom:100%;"></p>
<h4 id="Donut-Chart"><a href="#Donut-Chart" class="headerlink" title="Donut Chart"></a>Donut Chart</h4><p>通过设置hole 属性，可以设置中空的圆，从而实现 甜甜圈图的效果</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">labels = [<span class="string">'Oxygen'</span>,<span class="string">'Hydrogen'</span>,<span class="string">'Carbon_Dioxide'</span>,<span class="string">'Nitrogen'</span>]</span><br><span class="line">values = [<span class="number">4500</span>, <span class="number">2500</span>, <span class="number">1053</span>, <span class="number">500</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Use `hole` to create a donut-like pie chart</span></span><br><span class="line">fig = go.Figure(data=[go.Pie(labels=labels, values=values, hole=<span class="number">.3</span>)])</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/50.png" style="zoom:100%;"></p>
<h4 id="Pulling-sectors-out-from-the-center"><a href="#Pulling-sectors-out-from-the-center" class="headerlink" title="Pulling sectors out from the center"></a>Pulling sectors out from the center</h4><p>For a “pulled-out” or “exploded” layout of the pie chart, use the <code>pull</code> argument. It can be a scalar for pulling all sectors or an array to pull only some of the sectors.</p>
<p>设置pull属性，可以实现把一块区域 “拉出来” 的效果</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">labels = [<span class="string">'Oxygen'</span>,<span class="string">'Hydrogen'</span>,<span class="string">'Carbon_Dioxide'</span>,<span class="string">'Nitrogen'</span>]</span><br><span class="line">values = [<span class="number">4500</span>, <span class="number">2500</span>, <span class="number">1053</span>, <span class="number">500</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># pull is given as a fraction of the pie radius</span></span><br><span class="line">fig = go.Figure(data=[go.Pie(</span><br><span class="line">    labels=labels, </span><br><span class="line">    values=values, </span><br><span class="line">    pull=[<span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>, <span class="number">0</span>])])</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/51.png" style="zoom:100%;"></p>
<h4 id="Pie-Charts-in-subplots"><a href="#Pie-Charts-in-subplots" class="headerlink" title="Pie Charts in subplots"></a>Pie Charts in subplots</h4><p>下面来介绍一下子图的用法</p>
<p>首先我们要了解一下 plotly.subplots ：<a href="https://plotly.com/python/subplots/" target="_blank" rel="noopener">https://plotly.com/python/subplots/</a></p>
<p>然后了解一下这些sub plots 的种类：</p>
<p>specs是可选的参数。specs可以规定每一个子图的种类，表现为一个二维数组，其中各个子图利用键值对表示</p>
<p>By default, the <code>make_subplots</code> function assumes that the traces that will be added to all subplots are 2-dimensional cartesian traces (e.g. <code>scatter</code>, <code>bar</code>, <code>histogram</code>, <code>violin</code>, etc.). Traces with other subplot types (e.g. <code>scatterpolar</code>, <code>scattergeo</code>, <code>parcoords</code>, etc.) are supporteed by specifying the <code>type</code> subplot option in the <code>specs</code> argument to <code>make_subplots</code>.</p>
<p>Here are the possible values for the <code>type</code> option:</p>
<ul>
<li><code>&quot;xy&quot;</code>: 2D Cartesian subplot type for scatter, bar, etc. This is the default if no <code>type</code> is specified.</li>
<li><code>&quot;scene&quot;</code>: 3D Cartesian subplot for scatter3d, cone, etc.</li>
<li><code>&quot;polar&quot;</code>: Polar subplot for scatterpolar, barpolar, etc.</li>
<li><code>&quot;ternary&quot;</code>: Ternary subplot for scatterternary.</li>
<li><code>&quot;mapbox&quot;</code>: Mapbox subplot for scattermapbox.</li>
<li><code>&quot;domain&quot;</code>: Subplot type for traces that are individually positioned. pie, parcoords, parcats, etc.</li>
<li>trace type: A trace type name (e.g. <code>&quot;bar&quot;</code>, <code>&quot;scattergeo&quot;</code>, <code>&quot;carpet&quot;</code>, <code>&quot;mesh&quot;</code>, etc.) which will be used to determine the appropriate subplot type for that trace.</li>
</ul>
<p>然后我们向划分好的子图区域中添加图元。</p>
<p>最后通过 annotations 向甜甜圈的中心添加注释文字</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">from</span> plotly.subplots <span class="keyword">import</span> make_subplots</span><br><span class="line"></span><br><span class="line">labels = [<span class="string">"US"</span>, </span><br><span class="line">          <span class="string">"China"</span>,</span><br><span class="line">          <span class="string">"European Union"</span>,</span><br><span class="line">          <span class="string">"Russian Federation"</span>,</span><br><span class="line">          <span class="string">"Brazil"</span>,</span><br><span class="line">          <span class="string">"India"</span>,</span><br><span class="line">          <span class="string">"Rest of World"</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create subplots: use 'domain' type for Pie subplot</span></span><br><span class="line">fig = make_subplots(</span><br><span class="line">    rows=<span class="number">1</span>,</span><br><span class="line">    cols=<span class="number">2</span>,</span><br><span class="line">    specs=[[&#123;<span class="string">'type'</span>:<span class="string">'domain'</span>&#125;, &#123;<span class="string">'type'</span>:<span class="string">'domain'</span>&#125;]])</span><br><span class="line">fig.add_trace(go.Pie(</span><br><span class="line">    labels=labels, </span><br><span class="line">    values=[<span class="number">16</span>, <span class="number">15</span>, <span class="number">12</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">42</span>], </span><br><span class="line">    name=<span class="string">"GHG Emissions"</span>),<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">fig.add_trace(go.Pie(</span><br><span class="line">    labels=labels, </span><br><span class="line">    values=[<span class="number">27</span>, <span class="number">11</span>, <span class="number">25</span>, <span class="number">8</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">25</span>],</span><br><span class="line">    name=<span class="string">"CO2 Emissions"</span>),<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Use `hole` to create a donut-like pie chart</span></span><br><span class="line">fig.update_traces(hole=<span class="number">.4</span>, hoverinfo=<span class="string">"label+percent+name"</span>)</span><br><span class="line"></span><br><span class="line">fig.update_layout(</span><br><span class="line">    title_text=<span class="string">"Global Emissions 1990-2011"</span>,</span><br><span class="line">    <span class="comment"># Add annotations in the center of the donut pies.</span></span><br><span class="line">    annotations=[dict(text=<span class="string">'GHG'</span>, x=<span class="number">0.18</span>, y=<span class="number">0.5</span>, font_size=<span class="number">20</span>, showarrow=<span class="literal">False</span>),</span><br><span class="line">                 dict(text=<span class="string">'CO2'</span>, x=<span class="number">0.82</span>, y=<span class="number">0.5</span>, font_size=<span class="number">20</span>, showarrow=<span class="literal">False</span>)])</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/52.png" style="zoom:100%;"></p>
<h4 id="Plot-chart-with-area-proportional-to-total-count"><a href="#Plot-chart-with-area-proportional-to-total-count" class="headerlink" title="Plot chart with area proportional to total count"></a>Plot chart with area proportional to total count</h4><p>首先我们来规划子图区域，这里是2行2列，</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">from</span> plotly.subplots <span class="keyword">import</span> make_subplots</span><br><span class="line"></span><br><span class="line">labels = [<span class="string">'1st'</span>, <span class="string">'2nd'</span>, <span class="string">'3rd'</span>, <span class="string">'4th'</span>, <span class="string">'5th'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Define color sets of paintings</span></span><br><span class="line">night_colors = [<span class="string">'rgb(56, 75, 126)'</span>, </span><br><span class="line">                <span class="string">'rgb(18, 36, 37)'</span>,</span><br><span class="line">                <span class="string">'rgb(34, 53, 101)'</span>,</span><br><span class="line">                <span class="string">'rgb(36, 55, 57)'</span>,</span><br><span class="line">                <span class="string">'rgb(6, 4, 4)'</span>]</span><br><span class="line">sunflowers_colors = [<span class="string">'rgb(177, 127, 38)'</span>, </span><br><span class="line">                     <span class="string">'rgb(205, 152, 36)'</span>,</span><br><span class="line">                     <span class="string">'rgb(99, 79, 37)'</span>,</span><br><span class="line">                     <span class="string">'rgb(129, 180, 179)'</span>, </span><br><span class="line">                     <span class="string">'rgb(124, 103, 37)'</span>]</span><br><span class="line">irises_colors = [<span class="string">'rgb(33, 75, 99)'</span>, </span><br><span class="line">                 <span class="string">'rgb(79, 129, 102)'</span>, </span><br><span class="line">                 <span class="string">'rgb(151, 179, 100)'</span>,</span><br><span class="line">                 <span class="string">'rgb(175, 49, 35)'</span>,</span><br><span class="line">                 <span class="string">'rgb(36, 73, 147)'</span>]</span><br><span class="line">cafe_colors =  [<span class="string">'rgb(146, 123, 21)'</span>, </span><br><span class="line">                <span class="string">'rgb(177, 180, 34)'</span>, </span><br><span class="line">                <span class="string">'rgb(206, 206, 40)'</span>,</span><br><span class="line">                <span class="string">'rgb(175, 51, 21)'</span>, </span><br><span class="line">                <span class="string">'rgb(35, 36, 21)'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create subplots, using 'domain' type for pie charts</span></span><br><span class="line">specs = [</span><br><span class="line">    [&#123;<span class="string">'type'</span>:<span class="string">'domain'</span>&#125;, &#123;<span class="string">'type'</span>:<span class="string">'domain'</span>&#125;],</span><br><span class="line">    [&#123;<span class="string">'type'</span>:<span class="string">'domain'</span>&#125;, &#123;<span class="string">'type'</span>:<span class="string">'domain'</span>&#125;]</span><br><span class="line">]</span><br><span class="line">fig = make_subplots(rows=<span class="number">2</span>, cols=<span class="number">2</span>, specs=specs)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Define pie charts</span></span><br><span class="line">fig.add_trace(go.Pie(</span><br><span class="line">    labels=labels,</span><br><span class="line">    values=[<span class="number">38</span>, <span class="number">27</span>, <span class="number">18</span>, <span class="number">10</span>, <span class="number">7</span>], </span><br><span class="line">    name=<span class="string">'Starry Night'</span>,</span><br><span class="line">    marker_colors=night_colors), <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">fig.add_trace(go.Pie(</span><br><span class="line">    labels=labels,</span><br><span class="line">    values=[<span class="number">28</span>, <span class="number">26</span>, <span class="number">21</span>, <span class="number">15</span>, <span class="number">10</span>],</span><br><span class="line">    name=<span class="string">'Sunflowers'</span>,</span><br><span class="line">    marker_colors=sunflowers_colors), <span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">fig.add_trace(go.Pie(</span><br><span class="line">    labels=labels, </span><br><span class="line">    values=[<span class="number">38</span>, <span class="number">19</span>, <span class="number">16</span>, <span class="number">14</span>, <span class="number">13</span>],</span><br><span class="line">    name=<span class="string">'Irises'</span>,</span><br><span class="line">    marker_colors=irises_colors), <span class="number">2</span>, <span class="number">1</span>)</span><br><span class="line">fig.add_trace(go.Pie(</span><br><span class="line">    labels=labels,</span><br><span class="line">    values=[<span class="number">31</span>, <span class="number">24</span>, <span class="number">19</span>, <span class="number">18</span>, <span class="number">8</span>],</span><br><span class="line">    name=<span class="string">'The Night Café'</span>,</span><br><span class="line">    marker_colors=cafe_colors), <span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Tune layout and hover info</span></span><br><span class="line">fig.update_traces(hoverinfo=<span class="string">'label+percent+name'</span>, textinfo=<span class="string">'none'</span>)</span><br><span class="line">fig.update(</span><br><span class="line">    layout_title_text=<span class="string">'Van Gogh: 5 Most Prominent Colors Shown Proportionally'</span>,</span><br><span class="line">    layout_showlegend=<span class="literal">False</span>)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">注: fig.update 可以写成下面的形式</span></span><br><span class="line"><span class="string">fig.update_layout(</span></span><br><span class="line"><span class="string">	title='Van Gogh: 5 Most Prominent Colors Shown Proportionally',</span></span><br><span class="line"><span class="string">	showlegend=False</span></span><br><span class="line"><span class="string">)</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">fig = go.Figure(fig)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/53.png" style="zoom:100%;"></p>
<h2 id="Bubble-Charts"><a href="#Bubble-Charts" class="headerlink" title="Bubble Charts"></a>Bubble Charts</h2><h3 id="plotly-express-1"><a href="#plotly-express-1" class="headerlink" title="plotly.express"></a>plotly.express</h3><p>A <a href="https://en.wikipedia.org/wiki/Bubble_chart" target="_blank" rel="noopener">bubble chart</a> is a scatter plot in which a third dimension of the data is shown through the size of markers.</p>
<p>We first show a bubble chart example using Plotly Express. <a href="https://plotly.com/python/plotly-express/" target="_blank" rel="noopener">Plotly Express</a> is the easy-to-use, high-level interface to Plotly, which <a href="https://plotly.com/python/px-arguments/" target="_blank" rel="noopener">operates on a variety of types of data</a> and produces <a href="https://plotly.com/python/styling-plotly-express/" target="_blank" rel="noopener">easy-to-style figures</a>. The size of markers is set from the dataframe column given as the <code>size</code> parameter.</p>
<p>首先我们用plotly express 来画一个气泡图，操作非常方便。我们只需要向size 传入一个维度的信息即可。px会自动帮我们渲染</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">df = px.data.gapminder()</span><br><span class="line"></span><br><span class="line">fig = px.scatter(</span><br><span class="line">    	df.query(<span class="string">"year==2007"</span>),</span><br><span class="line">    	x=<span class="string">"gdpPercap"</span>,</span><br><span class="line">    	y=<span class="string">"lifeExp"</span>,</span><br><span class="line">	    size=<span class="string">"pop"</span>, </span><br><span class="line">    	color=<span class="string">"continent"</span>,</span><br><span class="line">        hover_name=<span class="string">"country"</span>, </span><br><span class="line">    	log_x=<span class="literal">True</span>, </span><br><span class="line">    	size_max=<span class="number">60</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/54.png" style="zoom:100%;"></p>
<h3 id="go-Scatter-2"><a href="#go-Scatter-2" class="headerlink" title="go.Scatter"></a>go.Scatter</h3><p>当然我们也可以用 go.Scatter ，并手动设置大小</p>
<h4 id="Simple-Bubble-Chart"><a href="#Simple-Bubble-Chart" class="headerlink" title="Simple Bubble Chart"></a>Simple Bubble Chart</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=[go.Scatter(</span><br><span class="line">    x=[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], </span><br><span class="line">    y=[<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>],</span><br><span class="line">    mode=<span class="string">'markers'</span>,</span><br><span class="line">    marker_size=[<span class="number">40</span>, <span class="number">60</span>, <span class="number">80</span>, <span class="number">100</span>])</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/55.png" style="zoom:100%;"></p>
<h4 id="Setting-Marker-Size-and-Color"><a href="#Setting-Marker-Size-and-Color" class="headerlink" title="Setting Marker Size and Color"></a>Setting Marker Size and Color</h4><p>我们也可以手动设置颜色。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">fig = go.Figure(data=[go.Scatter(</span><br><span class="line">    x=[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], y=[<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>],</span><br><span class="line">    mode=<span class="string">'markers'</span>,</span><br><span class="line">    marker=dict(</span><br><span class="line">        color=[<span class="string">'rgb(93, 164, 214)'</span>, <span class="string">'rgb(255, 144, 14)'</span>,</span><br><span class="line">               <span class="string">'rgb(44, 160, 101)'</span>, <span class="string">'rgb(255, 65, 54)'</span>],</span><br><span class="line">        opacity=[<span class="number">1</span>, <span class="number">0.8</span>, <span class="number">0.6</span>, <span class="number">0.4</span>],</span><br><span class="line">        size=[<span class="number">40</span>, <span class="number">60</span>, <span class="number">80</span>, <span class="number">100</span>],</span><br><span class="line">    )</span><br><span class="line">)])</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/56.png" style="zoom:100%;"></p>
<h4 id="Scaling-the-Size-of-Bubble-Charts"><a href="#Scaling-the-Size-of-Bubble-Charts" class="headerlink" title="Scaling the Size of Bubble Charts"></a>Scaling the Size of Bubble Charts</h4><p>To scale the bubble size, use the attribute <code>sizeref</code>. We recommend using the following formula to calculate a <code>sizeref</code> value:<br><code>sizeref = 2. * max(array of size values) / (desired maximum marker size ** 2)</code><br>Note that setting ‘sizeref’ to a value greater than 1, decreases the rendered marker sizes, while setting ‘sizeref’ to less than 1, increases the rendered marker sizes. See <a href="https://plotly.com/python/reference/#scatter-marker-sizeref" target="_blank" rel="noopener">https://plotly.com/python/reference/#scatter-marker-sizeref</a> for more information. Additionally, we recommend setting the sizemode attribute: <a href="https://plotly.com/python/reference/#scatter-marker-sizemode" target="_blank" rel="noopener">https://plotly.com/python/reference/#scatter-marker-sizemode</a> to area.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">size = [<span class="number">20</span>, <span class="number">40</span>, <span class="number">60</span>, <span class="number">80</span>, <span class="number">100</span>, <span class="number">80</span>, <span class="number">60</span>, <span class="number">40</span>, <span class="number">20</span>, <span class="number">40</span>]</span><br><span class="line">fig = go.Figure(data=[go.Scatter(</span><br><span class="line">    x=[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>],</span><br><span class="line">    y=[<span class="number">11</span>, <span class="number">12</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">12</span>, <span class="number">11</span>],</span><br><span class="line">    mode=<span class="string">'markers'</span>,</span><br><span class="line">    marker=dict(</span><br><span class="line">        size=size,</span><br><span class="line">        sizemode=<span class="string">'area'</span>,</span><br><span class="line">        sizeref=<span class="number">2.</span>*max(size)/(<span class="number">40.</span>**<span class="number">2</span>),</span><br><span class="line">        sizemin=<span class="number">4</span></span><br><span class="line">    )</span><br><span class="line">)])</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/57.png" style="zoom:100%;"></p>
<h4 id="Hover-Text-with-Bubble-Charts"><a href="#Hover-Text-with-Bubble-Charts" class="headerlink" title="Hover Text with Bubble Charts"></a>Hover Text with Bubble Charts</h4><p>我们可以添加向每个图元添加Hover Text</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">fig = go.Figure(data=[go.Scatter(</span><br><span class="line">    x=[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], y=[<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>],</span><br><span class="line">    text=[<span class="string">'A&lt;br&gt;size: 40'</span>, <span class="string">'B&lt;br&gt;size: 60'</span>, <span class="string">'C&lt;br&gt;size: 80'</span>, <span class="string">'D&lt;br&gt;size: 100'</span>],</span><br><span class="line">    mode=<span class="string">'markers'</span>,</span><br><span class="line">    marker=dict(</span><br><span class="line">        color=[<span class="string">'rgb(93, 164, 214)'</span>, </span><br><span class="line">               <span class="string">'rgb(255, 144, 14)'</span>,</span><br><span class="line">               <span class="string">'rgb(44, 160, 101)'</span>,</span><br><span class="line">               <span class="string">'rgb(255, 65, 54)'</span>],</span><br><span class="line">        size=[<span class="number">40</span>, <span class="number">60</span>, <span class="number">80</span>, <span class="number">100</span>],</span><br><span class="line">    )</span><br><span class="line">)])</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/58.png" style="zoom:100%;"></p>
<h4 id="Bubble-Charts-with-Colorscale"><a href="#Bubble-Charts-with-Colorscale" class="headerlink" title="Bubble Charts with Colorscale"></a>Bubble Charts with Colorscale</h4><p>在marker中设置 showscale=True 可以添加一个 colorscale</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">fig = go.Figure(data=[go.Scatter(</span><br><span class="line">    x=[<span class="number">1</span>, <span class="number">3.2</span>, <span class="number">5.4</span>, <span class="number">7.6</span>, <span class="number">9.8</span>, <span class="number">12.5</span>],</span><br><span class="line">    y=[<span class="number">1</span>, <span class="number">3.2</span>, <span class="number">5.4</span>, <span class="number">7.6</span>, <span class="number">9.8</span>, <span class="number">12.5</span>],</span><br><span class="line">    mode=<span class="string">'markers'</span>,</span><br><span class="line">    marker=dict(</span><br><span class="line">        color=[<span class="number">120</span>, <span class="number">125</span>, <span class="number">130</span>, <span class="number">135</span>, <span class="number">140</span>, <span class="number">145</span>],</span><br><span class="line">        size=[<span class="number">15</span>, <span class="number">30</span>, <span class="number">55</span>, <span class="number">70</span>, <span class="number">90</span>, <span class="number">110</span>],</span><br><span class="line">        showscale=<span class="literal">True</span></span><br><span class="line">        )</span><br><span class="line">)])</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/59.png" style="zoom:100%;"></p>
<h4 id="Categorical-Bubble-Charts"><a href="#Categorical-Bubble-Charts" class="headerlink" title="Categorical Bubble Charts"></a>Categorical Bubble Charts</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"></span><br><span class="line"><span class="comment"># Load data, define hover text and bubble size</span></span><br><span class="line">data = px.data.gapminder()</span><br><span class="line">df_2007 = data[data[<span class="string">'year'</span>]==<span class="number">2007</span>]</span><br><span class="line">df_2007 = df_2007.sort_values([<span class="string">'continent'</span>, <span class="string">'country'</span>])</span><br><span class="line"></span><br><span class="line">hover_text = []</span><br><span class="line">bubble_size = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> index, row <span class="keyword">in</span> df_2007.iterrows():</span><br><span class="line">    hover_text.append((<span class="string">'Country: &#123;country&#125;&lt;br&gt;'</span>+</span><br><span class="line">                      <span class="string">'Life Expectancy: &#123;lifeExp&#125;&lt;br&gt;'</span>+</span><br><span class="line">                      <span class="string">'GDP per capita: &#123;gdp&#125;&lt;br&gt;'</span>+</span><br><span class="line">                      <span class="string">'Population: &#123;pop&#125;&lt;br&gt;'</span>+</span><br><span class="line">                      <span class="string">'Year: &#123;year&#125;'</span>).format(country=row[<span class="string">'country'</span>],</span><br><span class="line">                                            lifeExp=row[<span class="string">'lifeExp'</span>],</span><br><span class="line">                                            gdp=row[<span class="string">'gdpPercap'</span>],</span><br><span class="line">                                            pop=row[<span class="string">'pop'</span>],</span><br><span class="line">                                            year=row[<span class="string">'year'</span>]))</span><br><span class="line">    bubble_size.append(math.sqrt(row[<span class="string">'pop'</span>]))</span><br><span class="line"></span><br><span class="line">df_2007[<span class="string">'text'</span>] = hover_text</span><br><span class="line">df_2007[<span class="string">'size'</span>] = bubble_size</span><br><span class="line">sizeref = <span class="number">2.</span>*max(df_2007[<span class="string">'size'</span>])/(<span class="number">100</span>**<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Dictionary with dataframes for each continent</span></span><br><span class="line">continent_names = [<span class="string">'Africa'</span>, <span class="string">'Americas'</span>, <span class="string">'Asia'</span>, <span class="string">'Europe'</span>, <span class="string">'Oceania'</span>]</span><br><span class="line">continent_data = &#123;continent:df_2007.query(<span class="string">"continent == '%s'"</span> %continent)</span><br><span class="line">                              <span class="keyword">for</span> continent <span class="keyword">in</span> continent_names&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create figure</span></span><br><span class="line">fig = go.Figure()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> continent_name, continent <span class="keyword">in</span> continent_data.items():</span><br><span class="line">    fig.add_trace(go.Scatter(</span><br><span class="line">        x=continent[<span class="string">'gdpPercap'</span>], y=continent[<span class="string">'lifeExp'</span>],</span><br><span class="line">        name=continent_name,</span><br><span class="line">        text=continent[<span class="string">'text'</span>],</span><br><span class="line">        marker_size=continent[<span class="string">'size'</span>],</span><br><span class="line">        ))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Tune marker appearance and layout</span></span><br><span class="line">fig.update_traces(mode=<span class="string">'markers'</span>, marker=dict(sizemode=<span class="string">'area'</span>,</span><br><span class="line">                                              sizeref=sizeref, </span><br><span class="line">                                              line_width=<span class="number">2</span>))</span><br><span class="line"></span><br><span class="line">fig.update_layout(</span><br><span class="line">    title=<span class="string">'Life Expectancy v. Per Capita GDP, 2007'</span>,</span><br><span class="line">    xaxis=dict(</span><br><span class="line">        title=<span class="string">'GDP per capita (2000 dollars)'</span>,</span><br><span class="line">        gridcolor=<span class="string">'white'</span>,</span><br><span class="line">        type=<span class="string">'log'</span>,</span><br><span class="line">        gridwidth=<span class="number">2</span>,</span><br><span class="line">    ),</span><br><span class="line">    yaxis=dict(</span><br><span class="line">        title=<span class="string">'Life Expectancy (years)'</span>,</span><br><span class="line">        gridcolor=<span class="string">'white'</span>,</span><br><span class="line">        gridwidth=<span class="number">2</span>,</span><br><span class="line">    ),</span><br><span class="line">    paper_bgcolor=<span class="string">'rgb(243, 243, 243)'</span>,</span><br><span class="line">    plot_bgcolor=<span class="string">'rgb(243, 243, 243)'</span>,</span><br><span class="line">)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/60.png" style="zoom:100%;"></p>
<h1 id="Sunburst-Plots"><a href="#Sunburst-Plots" class="headerlink" title="Sunburst Plots"></a>Sunburst Plots</h1><p>Sunburst Plots 是比较酷炫的一类图了，他可以说是 Pie Plots 的加强版。</p>
<p>Sunburst plots visualize hierarchical data spanning outwards radially from root to leaves. The sunburst sector hierarchy is determined by the entries in <code>labels</code> (<code>names</code> in <code>px.sunburst</code>) and in <code>parents</code>. The root starts from the center and children are added to the outer rings.</p>
<p>Main arguments: 最重要的三个参数： labels，也就是Sunburst 上面的文字；parents，如果B是A的外环，A是B的内环，那么A就是B的parents。values用来计算比例</p>
<ol>
<li><code>labels</code> (<code>names</code> in <code>px.sunburst</code> since <code>labels</code> is reserved for overriding columns names): sets the labels of sunburst sectors.</li>
<li><code>parents</code>: sets the parent sectors of sunburst sectors. An empty string <code>&#39;&#39;</code> is used for the root node in the hierarchy. In this example, the root is “Eve”.</li>
<li><code>values</code>: sets the values associated with sunburst sectors, determining their width (See the <code>branchvalues</code> section below for different modes for setting the width).</li>
</ol>
<h3 id="plotly-express-2"><a href="#plotly-express-2" class="headerlink" title="plotly.express"></a>plotly.express</h3><p>With <code>px.sunburst</code>,<strong>each row of the DataFrame is represented as a sector of the sunburst</strong>.</p>
<p>为了更好的理解 Parents，我们下面再写几个例子：</p>
<p>Eve 的 parents : “”  因为Eve是最内环，没有parents</p>
<p>Cain 的 parents: “Eve” 因为Chain 是 Eve的外环</p>
<p>Noam的parents 是Seth，因为Noam是 parents的外环</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">data = dict(</span><br><span class="line">    character=[<span class="string">"Eve"</span>, <span class="string">"Cain"</span>, <span class="string">"Seth"</span>, <span class="string">"Enos"</span>, <span class="string">"Noam"</span>, <span class="string">"Abel"</span>, <span class="string">"Awan"</span>, <span class="string">"Enoch"</span>, <span class="string">"Azura"</span>],</span><br><span class="line">    parent=[<span class="string">""</span>, <span class="string">"Eve"</span>, <span class="string">"Eve"</span>, <span class="string">"Seth"</span>, <span class="string">"Seth"</span>, <span class="string">"Eve"</span>, <span class="string">"Eve"</span>, <span class="string">"Awan"</span>, <span class="string">"Eve"</span> ],</span><br><span class="line">    value=[<span class="number">10</span>, <span class="number">14</span>, <span class="number">12</span>, <span class="number">10</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">4</span>])</span><br><span class="line"></span><br><span class="line">fig =px.sunburst(</span><br><span class="line">    data,</span><br><span class="line">    names=<span class="string">'character'</span>,</span><br><span class="line">    parents=<span class="string">'parent'</span>,</span><br><span class="line">    values=<span class="string">'value'</span>,</span><br><span class="line">)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/61.png" style="zoom:100%;"></p>
<h4 id="Sunburst-of-a-rectangular-DataFrame"><a href="#Sunburst-of-a-rectangular-DataFrame" class="headerlink" title="Sunburst of a rectangular DataFrame"></a>Sunburst of a rectangular DataFrame</h4><p>Hierarchical data are often stored as a rectangular dataframe, with different columns corresponding to different levels of the hierarchy. <code>px.sunburst</code> can take a <code>path</code> parameter corresponding to a list of columns. Note that <code>id</code> and <code>parent</code> should not be provided if <code>path</code> is given.</p>
<p>这是一个更简单的方法，设置 path属性也就是说，path属性是一个可迭代的对象，依次从内环到外环。</p>
<p>比如下图的数据源是tips, 我们选取了三个维度：day，time和sex</p>
<p>所以我们看到最内环是 day：分成 Thur，Fri，Sat，Sun四个部分，中环是Time，分为Dinner和Lunch两个部分</p>
<p>外环是sex,分为 Female和Male两个部分</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">df = px.data.tips()</span><br><span class="line">fig = px.sunburst(</span><br><span class="line">    df,</span><br><span class="line">    path=[<span class="string">'day'</span>, <span class="string">'time'</span>, <span class="string">'sex'</span>], </span><br><span class="line">    values=<span class="string">'total_bill'</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/62.png" style="zoom:100%;"></p>
<h4 id="Sunburst-of-a-rectangular-DataFrame-with-continuous-color-argument"><a href="#Sunburst-of-a-rectangular-DataFrame-with-continuous-color-argument" class="headerlink" title="Sunburst of a rectangular DataFrame with continuous color argument"></a>Sunburst of a rectangular DataFrame with continuous color argument</h4><p>If a <code>color</code> argument is passed, the color of a node is computed as the average of the color values of its children, weighted by their values.</p>
<p>color_continuous_midpoint 即为颜色条分界点，这里取了世界平均寿命，也就是图中白色区域，大概是70岁左右</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">df = px.data.gapminder().query(<span class="string">"year == 2007"</span>)</span><br><span class="line">fig = px.sunburst(</span><br><span class="line">    df,</span><br><span class="line">    path=[<span class="string">'continent'</span>, <span class="string">'country'</span>], </span><br><span class="line">    values=<span class="string">'pop'</span>,</span><br><span class="line">    color=<span class="string">'lifeExp'</span>, </span><br><span class="line">    hover_data=[<span class="string">'iso_alpha'</span>],</span><br><span class="line">    color_continuous_scale=<span class="string">'RdBu'</span>,</span><br><span class="line">    color_continuous_midpoint=np.average(df[<span class="string">'lifeExp'</span>], weights=df[<span class="string">'pop'</span>]))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/63.png" style="zoom:100%;"></p>
<h4 id="Sunburst-of-a-rectangular-DataFrame-with-discrete-color-argument-in"><a href="#Sunburst-of-a-rectangular-DataFrame-with-discrete-color-argument-in" class="headerlink" title="Sunburst of a rectangular DataFrame with discrete color argument in"></a>Sunburst of a rectangular DataFrame with discrete color argument in</h4><p>官方文档是如何定义color属性的:</p>
<p>When the argument of <code>color</code> corresponds to non-numerical data, discrete colors are used. If a sector has the same value of the <code>color</code> column for all its children, then the corresponding color is used, otherwise the first color of the discrete color sequence is used.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">df = px.data.tips()</span><br><span class="line">fig = px.sunburst(</span><br><span class="line">    df,</span><br><span class="line">    path=[<span class="string">'sex'</span>, <span class="string">'day'</span>, <span class="string">'time'</span>], </span><br><span class="line">    values=<span class="string">'total_bill'</span>,</span><br><span class="line">    color=<span class="string">'day'</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/64.png" style="zoom:100%;"></p>
<p>In the example below the color of <code>Saturday</code> and <code>Sunday</code> sectors is the same as <code>Dinner</code> because there are only Dinner entries for Saturday and Sunday. However, for Female -&gt; Friday there are both lunches and dinners, hence the “mixed” color (blue here) is used.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">df = px.data.tips()</span><br><span class="line">fig = px.sunburst(</span><br><span class="line">    df,</span><br><span class="line">    path=[<span class="string">'sex'</span>, <span class="string">'day'</span>, <span class="string">'time'</span>], </span><br><span class="line">    values=<span class="string">'total_bill'</span>,</span><br><span class="line">    color=<span class="string">'time'</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/65.png" style="zoom:100%;"></p>
<h4 id="Using-an-explicit-mapping-for-discrete-colors-1"><a href="#Using-an-explicit-mapping-for-discrete-colors-1" class="headerlink" title="Using an explicit mapping for discrete colors"></a>Using an explicit mapping for discrete colors</h4><p>For more information about discrete colors, see the <a href="https://plotly.com/python/discrete-color" target="_blank" rel="noopener">dedicated page</a>.</p>
<p>我们还可以用color_discrete_map 传入一个字典，规定什么维度应该用什么颜色</p>
<p>(?) 就代表如果没有规定好的字段。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">df = px.data.tips()</span><br><span class="line">fig = px.sunburst(</span><br><span class="line">    df,</span><br><span class="line">    path=[<span class="string">'sex'</span>, <span class="string">'day'</span>, <span class="string">'time'</span>],</span><br><span class="line">    values=<span class="string">'total_bill'</span>,</span><br><span class="line">    color=<span class="string">'time'</span>,</span><br><span class="line">    color_discrete_map=&#123;<span class="string">'(?)'</span>:<span class="string">'black'</span>, <span class="string">'Lunch'</span>:<span class="string">'gold'</span>, <span class="string">'Dinner'</span>:<span class="string">'darkblue'</span>&#125;)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/66.png" style="zoom:100%;"></p>
<h4 id="Rectangular-data-with-missing-values"><a href="#Rectangular-data-with-missing-values" class="headerlink" title="Rectangular data with missing values"></a>Rectangular data with missing values</h4><p>If the dataset is not fully rectangular, missing values should be supplied as <code>None</code>. Note that the parents of <code>None</code> entries must be a leaf, i.e. it cannot have other children than <code>None</code> (otherwise a <code>ValueError</code> is raised).</p>
<p>如果有一部分空缺了，那么在这部分空缺的值为None</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">vendors = [<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>, <span class="string">"D"</span>, <span class="literal">None</span>, <span class="string">"E"</span>, <span class="string">"F"</span>, <span class="string">"G"</span>, <span class="string">"H"</span>, <span class="literal">None</span>]</span><br><span class="line">sectors = [<span class="string">"Tech"</span>, <span class="string">"Tech"</span>, <span class="string">"Finance"</span>, <span class="string">"Finance"</span>, <span class="string">"Other"</span>,</span><br><span class="line">           <span class="string">"Tech"</span>, <span class="string">"Tech"</span>, <span class="string">"Finance"</span>, <span class="string">"Finance"</span>, <span class="string">"Other"</span>]</span><br><span class="line">regions = [<span class="string">"North"</span>, <span class="string">"North"</span>, <span class="string">"North"</span>, <span class="string">"North"</span>, <span class="string">"North"</span>,</span><br><span class="line">           <span class="string">"South"</span>, <span class="string">"South"</span>, <span class="string">"South"</span>, <span class="string">"South"</span>, <span class="string">"South"</span>]</span><br><span class="line">sales = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">1</span>]</span><br><span class="line">df = pd.DataFrame(</span><br><span class="line">    dict(vendors=vendors, sectors=sectors, regions=regions, sales=sales)</span><br><span class="line">)</span><br><span class="line">print(df)</span><br><span class="line">fig = px.sunburst(df, path=[<span class="string">'regions'</span>, <span class="string">'sectors'</span>, <span class="string">'vendors'</span>], values=<span class="string">'sales'</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/67.png" style="zoom:100%;"></p>
<h3 id="go-Sunburst"><a href="#go-Sunburst" class="headerlink" title="go.Sunburst"></a>go.Sunburst</h3><p>If Plotly Express does not provide a good starting point, it is also possible to use <a href="https://plotly.com/python/graph-objects/" target="_blank" rel="noopener">the more generic <code>go.Sunburst</code> class from <code>plotly.graph_objects</code></a>.</p>
<p>我们接下来使用 go.Suburst作图</p>
<p>同样的我们需要规定 labels parents 和values这三个基本的参数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line">fig =go.Figure(go.Sunburst(</span><br><span class="line">    labels=[<span class="string">"Eve"</span>, <span class="string">"Cain"</span>, <span class="string">"Seth"</span>, <span class="string">"Enos"</span>, <span class="string">"Noam"</span>, <span class="string">"Abel"</span>, <span class="string">"Awan"</span>, <span class="string">"Enoch"</span>, <span class="string">"Azura"</span>],</span><br><span class="line">    parents=[<span class="string">""</span>, <span class="string">"Eve"</span>, <span class="string">"Eve"</span>, <span class="string">"Seth"</span>, <span class="string">"Seth"</span>, <span class="string">"Eve"</span>, <span class="string">"Eve"</span>, <span class="string">"Awan"</span>, <span class="string">"Eve"</span> ],</span><br><span class="line">    values=[<span class="number">10</span>, <span class="number">14</span>, <span class="number">12</span>, <span class="number">10</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">4</span>],</span><br><span class="line">))</span><br><span class="line"><span class="comment"># Update layout for tight margin</span></span><br><span class="line"><span class="comment"># See https://plotly.com/python/creating-and-updating-figures/</span></span><br><span class="line">fig.update_layout(margin = dict(t=<span class="number">0</span>, l=<span class="number">0</span>, r=<span class="number">0</span>, b=<span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/68.png" style="zoom:100%;"></p>
<h4 id="Sunburst-with-Repeated-Labels"><a href="#Sunburst-with-Repeated-Labels" class="headerlink" title="Sunburst with Repeated Labels"></a>Sunburst with Repeated Labels</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">fig =go.Figure(go.Sunburst(</span><br><span class="line"> ids=[</span><br><span class="line">    <span class="string">"North America"</span>, <span class="string">"Europe"</span>, <span class="string">"Australia"</span>, <span class="string">"North America - Football"</span>, <span class="string">"Soccer"</span>,</span><br><span class="line">    <span class="string">"North America - Rugby"</span>, <span class="string">"Europe - Football"</span>, <span class="string">"Rugby"</span>,</span><br><span class="line">    <span class="string">"Europe - American Football"</span>,<span class="string">"Australia - Football"</span>, <span class="string">"Association"</span>,</span><br><span class="line">    <span class="string">"Australian Rules"</span>, <span class="string">"Autstralia - American Football"</span>, <span class="string">"Australia - Rugby"</span>,</span><br><span class="line">    <span class="string">"Rugby League"</span>, <span class="string">"Rugby Union"</span></span><br><span class="line">  ],</span><br><span class="line">  labels= [</span><br><span class="line">    <span class="string">"North&lt;br&gt;America"</span>, <span class="string">"Europe"</span>, <span class="string">"Australia"</span>, <span class="string">"Football"</span>, <span class="string">"Soccer"</span>, <span class="string">"Rugby"</span>,</span><br><span class="line">    <span class="string">"Football"</span>, <span class="string">"Rugby"</span>, <span class="string">"American&lt;br&gt;Football"</span>, <span class="string">"Football"</span>, <span class="string">"Association"</span>,</span><br><span class="line">    <span class="string">"Australian&lt;br&gt;Rules"</span>, <span class="string">"American&lt;br&gt;Football"</span>, <span class="string">"Rugby"</span>, <span class="string">"Rugby&lt;br&gt;League"</span>,</span><br><span class="line">    <span class="string">"Rugby&lt;br&gt;Union"</span></span><br><span class="line">  ],</span><br><span class="line">  parents=[</span><br><span class="line">    <span class="string">""</span>, <span class="string">""</span>, <span class="string">""</span>, <span class="string">"North America"</span>, <span class="string">"North America"</span>, <span class="string">"North America"</span>, <span class="string">"Europe"</span>,</span><br><span class="line">    <span class="string">"Europe"</span>, <span class="string">"Europe"</span>,<span class="string">"Australia"</span>, <span class="string">"Australia - Football"</span>, <span class="string">"Australia - Football"</span>,</span><br><span class="line">    <span class="string">"Australia - Football"</span>, <span class="string">"Australia - Football"</span>, <span class="string">"Australia - Rugby"</span>,</span><br><span class="line">    <span class="string">"Australia - Rugby"</span></span><br><span class="line">  ],</span><br><span class="line">))</span><br><span class="line">fig.update_layout(margin = dict(t=<span class="number">0</span>, l=<span class="number">0</span>, r=<span class="number">0</span>, b=<span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/69.png" style="zoom:100%;"></p>
<h4 id="Branchvalues"><a href="#Branchvalues" class="headerlink" title="Branchvalues"></a>Branchvalues</h4><p>With branchvalues “total”, the value of the parent represents the width of its wedge. In the example below, “Enoch” is 4 and “Awan” is 6 and so Enoch’s width is 4/6ths of Awans. With branchvalues “remainder”, the parent’s width is determined by its own value plus those of its children. So, Enoch’s width is 4/10ths of Awan’s (4 / (6 + 4)).</p>
<p>Note that this means that the sum of the values of the children cannot exceed the value of their parent when branchvalues is set to “total”. When branchvalues is set to “remainder” (the default), children will not take up all of the space below their parent (unless the parent is the root and it has a value of 0).</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">fig =go.Figure(go.Sunburst(</span><br><span class="line">    labels=[ <span class="string">"Eve"</span>, <span class="string">"Cain"</span>, <span class="string">"Seth"</span>, <span class="string">"Enos"</span>, <span class="string">"Noam"</span>, <span class="string">"Abel"</span>, <span class="string">"Awan"</span>, <span class="string">"Enoch"</span>, <span class="string">"Azura"</span>],</span><br><span class="line">    parents=[<span class="string">""</span>,    <span class="string">"Eve"</span>,  <span class="string">"Eve"</span>,  <span class="string">"Seth"</span>, <span class="string">"Seth"</span>, <span class="string">"Eve"</span>,  <span class="string">"Eve"</span>,  <span class="string">"Awan"</span>,  <span class="string">"Eve"</span> ],</span><br><span class="line">    values=[  <span class="number">65</span>,    <span class="number">14</span>,     <span class="number">12</span>,     <span class="number">10</span>,     <span class="number">2</span>,      <span class="number">6</span>,      <span class="number">6</span>,      <span class="number">4</span>,       <span class="number">4</span>],</span><br><span class="line">    branchvalues=<span class="string">"total"</span>,</span><br><span class="line">))</span><br><span class="line">fig.update_layout(margin = dict(t=<span class="number">0</span>, l=<span class="number">0</span>, r=<span class="number">0</span>, b=<span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/70.png" style="zoom:100%;"></p>
<h4 id="Large-Number-of-Slices"><a href="#Large-Number-of-Slices" class="headerlink" title="Large Number of Slices"></a>Large Number of Slices</h4><p>This example uses a <a href="https://plotly.com/python/reference/#layout-grid" target="_blank" rel="noopener">plotly grid attribute</a> for the suplots. Reference the row and column destination using the <a href="https://plotly.com/python/reference/#sunburst-domain" target="_blank" rel="noopener">domain</a> attribute.</p>
<p>下面我们导入两个csv文件进行画图</p>
<p>规定ids ,labels 和 parents，并利用domain属性规划子图所在区域。 </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">df1 = pd.read_csv(<span class="string">'https://raw.githubusercontent.com/plotly/datasets/718417069ead87650b90472464c7565dc8c2cb1c/sunburst-coffee-flavors-complete.csv'</span>)</span><br><span class="line">df2 = pd.read_csv(<span class="string">'https://raw.githubusercontent.com/plotly/datasets/718417069ead87650b90472464c7565dc8c2cb1c/coffee-flavors.csv'</span>)</span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Sunburst(</span><br><span class="line">    ids=df1.ids,</span><br><span class="line">    labels=df1.labels,</span><br><span class="line">    parents=df1.parents,</span><br><span class="line">    domain=dict(column=<span class="number">0</span>)</span><br><span class="line">))</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Sunburst(</span><br><span class="line">    ids=df2.ids,</span><br><span class="line">    labels=df2.labels,</span><br><span class="line">    parents=df2.parents,</span><br><span class="line">    domain=dict(column=<span class="number">1</span>),</span><br><span class="line">    maxdepth=<span class="number">2</span></span><br><span class="line">))</span><br><span class="line"></span><br><span class="line">fig.update_layout(</span><br><span class="line">    grid= dict(columns=<span class="number">2</span>, rows=<span class="number">1</span>),</span><br><span class="line">    margin = dict(t=<span class="number">0</span>, l=<span class="number">0</span>, r=<span class="number">0</span>, b=<span class="number">0</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/71.png" style="zoom:100%;"></p>
<h4 id="Controlling-text-orientation-inside-sunburst-sectors"><a href="#Controlling-text-orientation-inside-sunburst-sectors" class="headerlink" title="Controlling text orientation inside sunburst sectors"></a>Controlling text orientation inside sunburst sectors</h4><p>The <code>insidetextorientation</code> attribute controls the orientation of text inside sectors. With “auto” the texts may automatically be rotated to fit with the maximum size inside the slice. Using “horizontal” (resp. “radial”, “tangential”) forces text to be horizontal (resp. radial or tangential). Note that <code>plotly</code> may reduce the font size in order to fit the text with the requested orientation.</p>
<p>For a figure <code>fig</code> created with plotly express, use <code>fig.update_traces(insidetextorientation=&#39;...&#39;)</code> to change the text orientation.</p>
<p>现在我们对右上图进行美化，我们设置insidetextorientation=’horizontal’ 让文字水平排列。增强可读性</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">df = pd.read_csv(<span class="string">'https://raw.githubusercontent.com/plotly/datasets/718417069ead87650b90472464c7565dc8c2cb1c/coffee-flavors.csv'</span>)</span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Sunburst(</span><br><span class="line">    ids=df.ids,</span><br><span class="line">    labels=df.labels,</span><br><span class="line">    parents=df.parents,</span><br><span class="line">    domain=dict(column=<span class="number">1</span>),</span><br><span class="line">    maxdepth=<span class="number">2</span>,</span><br><span class="line">    insidetextorientation=<span class="string">'horizontal'</span></span><br><span class="line">))</span><br><span class="line"></span><br><span class="line">fig.update_layout(</span><br><span class="line">    margin = dict(t=<span class="number">10</span>, l=<span class="number">10</span>, r=<span class="number">10</span>, b=<span class="number">10</span>),</span><br><span class="line">    uniformtext=dict(minsize=<span class="number">16</span>, mode=<span class="string">'hide'</span>),height=<span class="number">1000</span>,width=<span class="number">1000</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/72.png" style="zoom:100%;"></p>
<h4 id="Controlling-text-fontsize-with-uniformtext-2"><a href="#Controlling-text-fontsize-with-uniformtext-2" class="headerlink" title="Controlling text fontsize with uniformtext"></a>Controlling text fontsize with uniformtext</h4><p>If you want all the text labels to have the same size, you can use the <code>uniformtext</code> layout parameter. The <code>minsize</code> attribute sets the font size, and the <code>mode</code> attribute sets what happens for labels which cannot fit with the desired fontsize: either <code>hide</code> them or <code>show</code> them with overflow.</p>
<p>上面那张咖啡风味图密密麻麻，我们可以设置其uniformtext 属性，令其mode = ‘hide’ 这样只有可以显示的文字才能显示出来，不能显示的就暂时隐藏。等有足够空间以后再显示</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">df = pd.read_csv(<span class="string">'https://raw.githubusercontent.com/plotly/datasets/718417069ead87650b90472464c7565dc8c2cb1c/sunburst-coffee-flavors-complete.csv'</span>)</span><br><span class="line"></span><br><span class="line">fig = go.Figure(go.Sunburst(</span><br><span class="line">        ids = df.ids,</span><br><span class="line">        labels = df.labels,</span><br><span class="line">        parents = df.parents))</span><br><span class="line">fig.update_layout(uniformtext=dict(minsize=<span class="number">10</span>, mode=<span class="string">'hide'</span>))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">ids</th>
<th style="text-align:right">labels</th>
<th>parents</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">Aromas</td>
<td style="text-align:right">Aromas</td>
<td>NaN</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">Tastes</td>
<td style="text-align:right">Tastes</td>
<td>NaN</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">Aromas-Enzymatic</td>
<td style="text-align:right">Enzymatic</td>
<td>Aromas</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">Aromas-Sugar Browning</td>
<td style="text-align:right">Sugar Browning</td>
<td>Aromas</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">Aromas-Dry Distillation</td>
<td style="text-align:right">Dry Distillation</td>
<td>Aromas</td>
</tr>
<tr>
<td style="text-align:right">…</td>
<td style="text-align:right">…</td>
<td style="text-align:right">…</td>
<td>…</td>
</tr>
<tr>
<td style="text-align:right">91</td>
<td style="text-align:right">Pungent-Thyme</td>
<td style="text-align:right">Thyme</td>
<td>Spicy-Pungent</td>
</tr>
<tr>
<td style="text-align:right">92</td>
<td style="text-align:right">Smokey-Tarry</td>
<td style="text-align:right">Tarry</td>
<td>Carbony-Smokey</td>
</tr>
<tr>
<td style="text-align:right">93</td>
<td style="text-align:right">Smokey-Pipe Tobacco</td>
<td style="text-align:right">Pipe Tobacco</td>
<td>Carbony-Smokey</td>
</tr>
<tr>
<td style="text-align:right">94</td>
<td style="text-align:right">Ashy-Burnt</td>
<td style="text-align:right">Burnt</td>
<td>Carbony-Ashy</td>
</tr>
<tr>
<td style="text-align:right">95</td>
<td style="text-align:right">Ashy-Charred</td>
<td style="text-align:right">Charred</td>
<td>Carbony-Ashy</td>
</tr>
</tbody>
</table>
</div>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/73.png" style="zoom:100%;"></p>
<h4 id="Sunburst-chart-with-a-continuous-colorscale"><a href="#Sunburst-chart-with-a-continuous-colorscale" class="headerlink" title="Sunburst chart with a continuous colorscale"></a>Sunburst chart with a continuous colorscale</h4><p>The example below visualizes a breakdown of sales (corresponding to sector width) and call success rate (corresponding to sector color) by region, county and salesperson level. For example, when exploring the data you can see that although the East region is behaving poorly, the Tyler county is still above average — however, its performance is reduced by the poor success rate of salesperson GT.</p>
<p>In the right subplot which has a <code>maxdepth</code> of two levels, click on a sector to see its breakdown to lower levels.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> plotly.subplots <span class="keyword">import</span> make_subplots</span><br><span class="line"></span><br><span class="line">df = pd.read_csv(<span class="string">'https://raw.githubusercontent.com/plotly/datasets/master/sales_success.csv'</span>)</span><br><span class="line">print(df.head())</span><br><span class="line"></span><br><span class="line">levels = [<span class="string">'salesperson'</span>, <span class="string">'county'</span>, <span class="string">'region'</span>]</span><br><span class="line"><span class="comment"># levels used for the hierarchical chart</span></span><br><span class="line">color_columns = [<span class="string">'sales'</span>, <span class="string">'calls'</span>]</span><br><span class="line">value_column = <span class="string">'calls'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">build_hierarchical_dataframe</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    df,</span></span></span><br><span class="line"><span class="function"><span class="params">    levels, </span></span></span><br><span class="line"><span class="function"><span class="params">    value_column,</span></span></span><br><span class="line"><span class="function"><span class="params">    color_columns=None)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    Build a hierarchy of levels for Sunburst or Treemap charts.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Levels are given starting from the bottom to the top of the hierarchy,</span></span><br><span class="line"><span class="string">    ie the last level corresponds to the root.</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    df_all_trees = pd.DataFrame(columns=[<span class="string">'id'</span>, <span class="string">'parent'</span>, <span class="string">'value'</span>, <span class="string">'color'</span>])</span><br><span class="line">    <span class="keyword">for</span> i, level <span class="keyword">in</span> enumerate(levels):</span><br><span class="line">        df_tree = pd.DataFrame(columns=[<span class="string">'id'</span>, <span class="string">'parent'</span>, <span class="string">'value'</span>, <span class="string">'color'</span>])</span><br><span class="line">        dfg = df.groupby(levels[i:]).sum()</span><br><span class="line">        dfg = dfg.reset_index()</span><br><span class="line">        df_tree[<span class="string">'id'</span>] = dfg[level].copy()</span><br><span class="line">        <span class="keyword">if</span> i &lt; len(levels) - <span class="number">1</span>:</span><br><span class="line">            df_tree[<span class="string">'parent'</span>] = dfg[levels[i+<span class="number">1</span>]].copy()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            df_tree[<span class="string">'parent'</span>] = <span class="string">'total'</span></span><br><span class="line">        df_tree[<span class="string">'value'</span>] = dfg[value_column]</span><br><span class="line">        df_tree[<span class="string">'color'</span>] = dfg[color_columns[<span class="number">0</span>]] / dfg[color_columns[<span class="number">1</span>]]</span><br><span class="line">        df_all_trees = df_all_trees.append(df_tree, ignore_index=<span class="literal">True</span>)</span><br><span class="line">    total = pd.Series(dict(</span><br><span class="line">        id=<span class="string">'total'</span>, </span><br><span class="line">        parent=<span class="string">''</span>,</span><br><span class="line">        value=df[value_column].sum(),</span><br><span class="line">        color=df[color_columns[<span class="number">0</span>]].sum() / df[color_columns[<span class="number">1</span>]].sum()))</span><br><span class="line">    df_all_trees = df_all_trees.append(total, ignore_index=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">return</span> df_all_trees</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">df_all_trees = build_hierarchical_dataframe(df, levels, value_column, color_columns)</span><br><span class="line">average_score = df[<span class="string">'sales'</span>].sum() / df[<span class="string">'calls'</span>].sum()</span><br><span class="line"></span><br><span class="line">fig = make_subplots(<span class="number">1</span>, <span class="number">2</span>, specs=[[&#123;<span class="string">"type"</span>: <span class="string">"domain"</span>&#125;, &#123;<span class="string">"type"</span>: <span class="string">"domain"</span>&#125;]],)</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Sunburst(</span><br><span class="line">    labels=df_all_trees[<span class="string">'id'</span>],</span><br><span class="line">    parents=df_all_trees[<span class="string">'parent'</span>],</span><br><span class="line">    values=df_all_trees[<span class="string">'value'</span>],</span><br><span class="line">    branchvalues=<span class="string">'total'</span>,</span><br><span class="line">    marker=dict(</span><br><span class="line">        colors=df_all_trees[<span class="string">'color'</span>],</span><br><span class="line">        colorscale=<span class="string">'RdBu'</span>,</span><br><span class="line">        cmid=average_score),</span><br><span class="line">    hovertemplate=<span class="string">'&lt;b&gt;%&#123;label&#125; &lt;/b&gt; &lt;br&gt; Sales: %&#123;value&#125;&lt;br&gt; Success rate: %&#123;color:.2f&#125;'</span>,</span><br><span class="line">    name=<span class="string">''</span></span><br><span class="line">    ), <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">fig.add_trace(go.Sunburst(</span><br><span class="line">    labels=df_all_trees[<span class="string">'id'</span>],</span><br><span class="line">    parents=df_all_trees[<span class="string">'parent'</span>],</span><br><span class="line">    values=df_all_trees[<span class="string">'value'</span>],</span><br><span class="line">    branchvalues=<span class="string">'total'</span>,</span><br><span class="line">    marker=dict(</span><br><span class="line">        colors=df_all_trees[<span class="string">'color'</span>],</span><br><span class="line">        colorscale=<span class="string">'RdBu'</span>,</span><br><span class="line">        cmid=average_score),</span><br><span class="line">    hovertemplate=<span class="string">'&lt;b&gt;%&#123;label&#125; &lt;/b&gt; &lt;br&gt; Sales: %&#123;value&#125;&lt;br&gt; Success rate: %&#123;color:.2f&#125;'</span>,</span><br><span class="line">    maxdepth=<span class="number">2</span></span><br><span class="line">    ), <span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">fig.update_layout(margin=dict(t=<span class="number">10</span>, b=<span class="number">10</span>, r=<span class="number">10</span>, l=<span class="number">10</span>))</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/plotly%E5%9F%BA%E7%A1%80/74.png" style="zoom:100%;"></p>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/%5Bobject%20Object%5D">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/" itemprop="url">seaborn基础</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-07-11T12:34:32+08:00">
                2020-07-11
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2021-09-29T10:00:32+08:00">
                2021-09-29
              </time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Seaborn基础"><a href="#Seaborn基础" class="headerlink" title="Seaborn基础"></a>Seaborn基础</h1><p>seaborn 是数据可视化中一个很重要的库。Seaborn是基于matplotlib的图形可视化python包。它提供了一种高度交互式界面，便于用户能够做出各种有吸引力的统计图表。</p>
<p>Seaborn是在matplotlib的基础上进行了更高级的API封装，从而使得作图更加容易，在大多数情况下使用seaborn能做出很具有吸引力的图，而使用matplotlib就能制作具有更多特色的图。应该把Seaborn视为matplotlib的补充，而不是替代物。同时它能高度兼容numpy与pandas数据结构以及scipy与statsmodels等统计模式。</p>
<p>seaborn图标的背景：style must be one of white, dark, whitegrid, darkgrid, ticks</p>
<p>依次是：ticks,dark,white,darkgrid 和 whitegrid</p>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/0.png" style="zoom:120%;"></p>
<p>设置色系palettes：<a href="http://seaborn.pydata.org/api.html#color-palettes" target="_blank" rel="noopener">http://seaborn.pydata.org/api.html#color-palettes</a></p>
<h2 id="Relational-plots"><a href="#Relational-plots" class="headerlink" title="Relational plots"></a>Relational plots</h2><h3 id="Relplot中的scatterplot"><a href="#Relplot中的scatterplot" class="headerlink" title="Relplot中的scatterplot"></a>Relplot中的scatterplot</h3><p>学习自博客：<a href="https://blog.csdn.net/u013317445/article/details/88175366" target="_blank" rel="noopener">https://blog.csdn.net/u013317445/article/details/88175366</a></p>
<p>Relplot就是关系图，</p>
<ul>
<li>sns.replot(kind=“scatter”)，相当于scatterplot() 用来绘制散点图</li>
<li>sns.replot(kind=“line”)，相当于lineplot()  用来绘制曲线图</li>
</ul>
<p><strong>本例中，我们的数据集采用库自带的小费数据集tips。</strong><br> tips小费数据集：<br> 是一个餐厅服务员收集的小费数据集，包含了7个变量：<br> 总账单、小费、顾客性别、是否吸烟、日期、吃饭时间、顾客人数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">%matplotlib inline</span><br><span class="line"></span><br><span class="line">tips = sns.load_dataset(<span class="string">'tips'</span>)</span><br><span class="line">tips.head()</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">total_bill</th>
<th style="text-align:right">tip</th>
<th style="text-align:right">sex</th>
<th style="text-align:right">smoker</th>
<th style="text-align:right">day</th>
<th style="text-align:right">time</th>
<th>size</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">16.99</td>
<td style="text-align:right">1.01</td>
<td style="text-align:right">Female</td>
<td style="text-align:right">No</td>
<td style="text-align:right">Sun</td>
<td style="text-align:right">Dinner</td>
<td>2</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">10.34</td>
<td style="text-align:right">1.66</td>
<td style="text-align:right">Male</td>
<td style="text-align:right">No</td>
<td style="text-align:right">Sun</td>
<td style="text-align:right">Dinner</td>
<td>3</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">21.01</td>
<td style="text-align:right">3.50</td>
<td style="text-align:right">Male</td>
<td style="text-align:right">No</td>
<td style="text-align:right">Sun</td>
<td style="text-align:right">Dinner</td>
<td>3</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">23.68</td>
<td style="text-align:right">3.31</td>
<td style="text-align:right">Male</td>
<td style="text-align:right">No</td>
<td style="text-align:right">Sun</td>
<td style="text-align:right">Dinner</td>
<td>2</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">24.59</td>
<td style="text-align:right">3.61</td>
<td style="text-align:right">Female</td>
<td style="text-align:right">No</td>
<td style="text-align:right">Sun</td>
<td style="text-align:right">Dinner</td>
<td>4</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">tips.dtypestotal_bill     </span><br><span class="line">float64</span><br><span class="line">tip            float64</span><br><span class="line">sex           category</span><br><span class="line">smoker        category</span><br><span class="line">day           category</span><br><span class="line">time          category</span><br><span class="line">size             int64</span><br><span class="line">dtype: object</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th>replot常用参数</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>x</td>
<td>x轴</td>
</tr>
<tr>
<td>y</td>
<td>y轴</td>
</tr>
<tr>
<td>hue</td>
<td>在某一维度上用颜色区分</td>
</tr>
<tr>
<td>style</td>
<td>在某一维度上, 用线的不同表现形式区分, 如 点线, 虚线等</td>
</tr>
<tr>
<td>size</td>
<td>控制数据点大小或者线条粗细</td>
</tr>
<tr>
<td>col</td>
<td>列上的子图</td>
</tr>
<tr>
<td>row</td>
<td>行上的子图</td>
</tr>
<tr>
<td>kind</td>
<td>kind= ‘scatter’(默认值) <br>kind=’line’时候，可以通过参数ci：(confidence interval)参数，来控制阴影部分，如，ci=‘sd’ （一个x有多个y值）<br>也可以关闭数据聚合功能(urn off aggregation altogether), 设置estimator=None即可data</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.relplot(x&#x3D;&#39;total_bill&#39;, y&#x3D;&#39;tip&#39;, data&#x3D;tips)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/1.png" style="zoom:120%;"></p>
<h4 id="参数-hue"><a href="#参数-hue" class="headerlink" title="参数 hue"></a>参数 hue</h4><p><strong>hue</strong><br> <strong>用不同的颜色区分出来</strong><br> <strong>在smoker维度，smoker:取值有：No、Yes 蓝yes橙no</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.relplot(x=<span class="string">'total_bill'</span>, y=<span class="string">'tip'</span>,  data=tips, hue=<span class="string">'smoker'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/2.png" style="zoom:120%;"></p>
<p>图上有3个维度的信息：<br> total_bill（x）、tip（y）、smoker（不同颜色）</p>
<p>周末给的小费要比工作日更多一点</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.relplot(x=<span class="string">'total_bill'</span>, y=<span class="string">'tip'</span>,  data=tips, hue=<span class="string">'day'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/3.png" style="zoom:120%;"></p>
<p>同样的，我们把day改成dinner，seaborn会自动切换维度</p>
<p>看起晚饭时间给的小费要高一些</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.relplot(x=<span class="string">'total_bill'</span>, y=<span class="string">'tip'</span>,  data=tips, hue=<span class="string">'time'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/4.png" style="zoom:120%;"></p>
<h4 id="hue-hue-order"><a href="#hue-hue-order" class="headerlink" title="hue+ hue_order"></a>hue+ hue_order</h4><p>可以通过hue_order（一个list）来控制图例中hue的顺序。如果不设置的话，就会自动根据data来进行设定。<br> 如果hue是数字型连续值，hue_order就没有什么关系了。</p>
<h4 id="hue-palette"><a href="#hue-palette" class="headerlink" title="hue+palette"></a>hue+palette</h4><p>palette自定义颜色范围</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.relplot(x=<span class="string">'total_bill'</span>, y=<span class="string">'tip'</span>,  data=tips, hue=<span class="string">"day"</span>, palette=<span class="string">"ch:r=-.5,l=.75"</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/5.png" style="zoom:120%;"></p>
<h4 id="参数style"><a href="#参数style" class="headerlink" title="参数style"></a>参数style</h4><p><strong>style</strong><br> <strong>不同的表示形状上区分</strong><br> <strong>性别维度上，不同的性别， 原点：Male  叉叉：Female</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.relplot(x=<span class="string">'total_bill'</span>, y=<span class="string">'tip'</span>,  data=tips, style=<span class="string">'sex'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/6.png" style="zoom:120%;"></p>
<p>图上有3个维度的信息:<br> total_bill、tip、sex<br> x、y、不同形状</p>
<p>可以看出，给小费的男性多，男性给的小费高一点</p>
<p>我们把style设置成就餐人数</p>
<p>这样有六种形状</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.relplot(x=<span class="string">'total_bill'</span>, y=<span class="string">'tip'</span>,  data=tips, style=<span class="string">'size'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/11.png" style="zoom:120%;"></p>
<h4 id="hue-style"><a href="#hue-style" class="headerlink" title="hue+style"></a>hue+style</h4><p>当然我们可以同时规定hue和style，这样我们就增加了两个维度</p>
<p><strong>吃晚饭的男性：蓝色+叉叉</strong></p>
<p><strong>吃晚饭的女性：蓝色+圈圈</strong></p>
<p><strong>吃中饭的男性：黄色+叉叉</strong></p>
<p><strong>吃中饭的女性：黄色+圈圈</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.relplot(x=<span class="string">'total_bill'</span>, y=<span class="string">'tip'</span>,  data=tips, style=<span class="string">'sex'</span>,hue=<span class="string">'time'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/7.png" style="zoom:120%;"></p>
<p>图上有4个维度的信息:<br> total_bill、tip、sex、time<br> 在晚饭时间，男人给的小费会多一点。</p>
<p> <strong>抽烟的女性:蓝色+叉叉</strong><br> <strong>抽烟的男性：蓝色+原点</strong><br> <strong>不抽烟的女性：橘色+叉叉</strong><br> <strong>不抽烟的男性：橘色+原点</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.relplot(x=<span class="string">'total_bill'</span>, y=<span class="string">'tip'</span>,  data=tips, hue=<span class="string">'smoker'</span>, style=<span class="string">'sex'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/8.png" style="zoom:120%;"></p>
<p>我们看出来愿意给高小费的男士基本都是不抽烟的男士</p>
<h4 id="参数size"><a href="#参数size" class="headerlink" title="参数size"></a>参数size</h4><p><strong>控制点的大小或者线条粗细</strong><br> <strong>巧妙引入size维度（顾客人数）信息</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sns.relplot(</span><br><span class="line">    x=<span class="string">'total_bill'</span>,</span><br><span class="line">    y=<span class="string">'tip'</span>, </span><br><span class="line">    data=tips,</span><br><span class="line">    hue=<span class="string">'smoker'</span>,</span><br><span class="line">    style=<span class="string">'sex'</span>,</span><br><span class="line">    size=<span class="string">'size'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/9.png" style="zoom:120%;"></p>
<p>图上有5个维度的信息了</p>
<p>可以看出，人多消费大，消费大小费高 展示的信息量太多了，太丰富了，这个图反而太复杂而让我们不好解析它了</p>
<p>我们可以控制size的范围 <strong>如用size=（20,200）控制size的范围</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.relplot(x=<span class="string">'total_bill'</span>, y=<span class="string">'tip'</span>, data=tips, size=<span class="string">"size"</span>, sizes=(<span class="number">20</span>, <span class="number">200</span>))</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/10.png" style="zoom:120%;"></p>
<p>我们可以直接用value_counts()来计算各个size的个数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">tips[<span class="string">'size'</span>].value_counts()</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>    <span class="number">156</span></span><br><span class="line"><span class="number">3</span>     <span class="number">38</span></span><br><span class="line"><span class="number">4</span>     <span class="number">37</span></span><br><span class="line"><span class="number">5</span>      <span class="number">5</span></span><br><span class="line"><span class="number">6</span>      <span class="number">4</span></span><br><span class="line"><span class="number">1</span>      <span class="number">4</span></span><br><span class="line">Name: size, dtype: int64</span><br></pre></td></tr></table></figure>
<p>我们也可以更直观的看看餐厅中午饭和晚饭的消费情况</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.relplot(x=<span class="string">'total_bill'</span>, y=<span class="string">'tip'</span>, data=tips, size=<span class="string">"time"</span>, sizes=(<span class="number">20</span>, <span class="number">200</span>))</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/12.png" style="zoom:120%;"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tips[<span class="string">'time'</span>].value_counts()</span><br><span class="line"></span><br><span class="line">Dinner    <span class="number">176</span></span><br><span class="line">Lunch      <span class="number">68</span></span><br><span class="line">Name: time, dtype: int64</span><br></pre></td></tr></table></figure>
<p>看来这家餐厅午餐消费集中在30$之下</p>
<h3 id="Relplot中的lineplot"><a href="#Relplot中的lineplot" class="headerlink" title="Relplot中的lineplot"></a>Relplot中的lineplot</h3><p>我们采用的数据集是 fmri</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fmri= sns.load_dataset(<span class="string">"fmri"</span>)</span><br><span class="line">fmri.head()</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">subject</th>
<th style="text-align:right">timepoint</th>
<th style="text-align:right">event</th>
<th style="text-align:right">region</th>
<th>signal</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">s13</td>
<td style="text-align:right">18</td>
<td style="text-align:right">stim</td>
<td style="text-align:right">parietal</td>
<td>-0.017552</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">s5</td>
<td style="text-align:right">14</td>
<td style="text-align:right">stim</td>
<td style="text-align:right">parietal</td>
<td>-0.080883</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">s12</td>
<td style="text-align:right">18</td>
<td style="text-align:right">stim</td>
<td style="text-align:right">parietal</td>
<td>-0.081033</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">s11</td>
<td style="text-align:right">18</td>
<td style="text-align:right">stim</td>
<td style="text-align:right">parietal</td>
<td>-0.046134</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">s10</td>
<td style="text-align:right">18</td>
<td style="text-align:right">stim</td>
<td style="text-align:right">parietal</td>
<td>-0.037970</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fmri.dtypes</span><br><span class="line">subject       object</span><br><span class="line">timepoint      int64</span><br><span class="line">event         object</span><br><span class="line">region        object</span><br><span class="line">signal       float64</span><br><span class="line">dtype: object</span><br></pre></td></tr></table></figure>
<p>先用散点图看一下它的数据分布情况</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.relplot(x=<span class="string">"timepoint"</span>, y=<span class="string">"signal"</span>, data=fmri)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/13.png" style="zoom:120%;"></p>
<h4 id="kind-“line”"><a href="#kind-“line”" class="headerlink" title="kind=“line”"></a>kind=“line”</h4><p><strong>kind=“line” 就是lineplot()</strong></p>
<p>那么散点图显然不是函数，因为一个x对应了多个y，那么seaborn是怎么把他们聚合的呢？默认取平均值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.relplot(x=<span class="string">"timepoint"</span>, y=<span class="string">"signal"</span>, data=fmri, kind=<span class="string">"line"</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/14.png" style="zoom:120%;"></p>
<h4 id="ci-None-控制不显示聚合的阴影"><a href="#ci-None-控制不显示聚合的阴影" class="headerlink" title="ci=None 控制不显示聚合的阴影"></a>ci=None 控制不显示聚合的阴影</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.relplot(x=<span class="string">"timepoint"</span>, y=<span class="string">"signal"</span>, data=fmri, kind=<span class="string">"line"</span>, ci=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/15.png" style="zoom:120%;"></p>
<h4 id="ci-控制聚合的算法"><a href="#ci-控制聚合的算法" class="headerlink" title="ci 控制聚合的算法"></a>ci 控制聚合的算法</h4><p><strong><code>ci</code>（float）</strong>：统计学上的置信区间（在0-100之间）,若填写<code>&quot;sd&quot;</code>,则误差棒用标准误差。(默认为95)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.relplot(x=<span class="string">"timepoint"</span>, y=<span class="string">"signal"</span>, data=fmri, kind=<span class="string">"line"</span>, ci=<span class="string">"sd"</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/16.png" style="zoom:120%;"></p>
<h4 id="关闭聚合：estimator-None"><a href="#关闭聚合：estimator-None" class="headerlink" title="关闭聚合：estimator= None"></a>关闭聚合：estimator= None</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.relplot(x=<span class="string">"timepoint"</span>, y=<span class="string">"signal"</span>, data=fmri, kind=<span class="string">"line"</span>,estimator=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/17.png" style="zoom:120%;"></p>
<h4 id="hue：利用颜色区分"><a href="#hue：利用颜色区分" class="headerlink" title="hue：利用颜色区分"></a>hue：利用颜色区分</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.relplot(x=<span class="string">"timepoint"</span>, y=<span class="string">"signal"</span>, data=fmri, kind=<span class="string">"line"</span>,hue=<span class="string">"event"</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/18.png" style="zoom:120%;"></p>
<h4 id="style-利用形状区分"><a href="#style-利用形状区分" class="headerlink" title="style:利用形状区分"></a>style:利用形状区分</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.relplot(x=<span class="string">"timepoint"</span>, y=<span class="string">"signal"</span>, style=<span class="string">"region"</span>, kind=<span class="string">"line"</span>, data=fmri)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/19.png" style="zoom:120%;"></p>
<h4 id="hue-style-1"><a href="#hue-style-1" class="headerlink" title="hue+ style"></a>hue+ style</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sns.relplot(</span><br><span class="line">    x=<span class="string">"timepoint"</span>, </span><br><span class="line">    y=<span class="string">"signal"</span>, </span><br><span class="line">    hue=<span class="string">"event"</span>, </span><br><span class="line">    style=<span class="string">"region"</span>,</span><br><span class="line">    kind=<span class="string">"line"</span>, </span><br><span class="line">    data=fmri)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/20.png" style="zoom:120%;"></p>
<h4 id="style结合dashes-markers"><a href="#style结合dashes-markers" class="headerlink" title="style结合dashes+markers"></a>style结合dashes+markers</h4><p>style结合dashes+markers可设置不同分类的标记样式 </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sns.relplot(x=<span class="string">"timepoint"</span>, </span><br><span class="line">            y=<span class="string">"signal"</span>, </span><br><span class="line">            hue=<span class="string">"event"</span>, </span><br><span class="line">            style=<span class="string">"region"</span>, </span><br><span class="line">            kind=<span class="string">"line"</span>, </span><br><span class="line">            dashes=<span class="literal">False</span>, </span><br><span class="line">            markers=<span class="literal">True</span>, </span><br><span class="line">            data=fmri)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/21.png" style="zoom:120%;"></p>
<h4 id="units"><a href="#units" class="headerlink" title="units"></a>units</h4><p>当有多次的采样单位时，可以单独绘制每个采样单位，而无需通过语义区分它们。这可以避免使图例混乱</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sns.relplot(kind=<span class="string">"line"</span>,</span><br><span class="line">			data=fmri.query(<span class="string">"event=='stim'"</span>), </span><br><span class="line">			x=<span class="string">"timepoint"</span>,</span><br><span class="line">            y=<span class="string">"signal"</span>,</span><br><span class="line">            hue=<span class="string">"region"</span>,</span><br><span class="line">            units=<span class="string">"subject"</span>,</span><br><span class="line">            estimator=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/22.png" style="zoom:120%;"></p>
<p><strong>lineplot色调和图例的处理还取决于hue是分类型数据or连续型数据</strong></p>
<h4 id="hue为连续型数值"><a href="#hue为连续型数值" class="headerlink" title="hue为连续型数值"></a>hue为连续型数值</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dots= sns.load_dataset(<span class="string">"dots"</span>).query(<span class="string">"align== 'dots'"</span>)</span><br><span class="line">dots</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">align</th>
<th style="text-align:right">choice</th>
<th style="text-align:right">time</th>
<th style="text-align:right">coherence</th>
<th>firing_rate</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">dots</td>
<td style="text-align:right">T1</td>
<td style="text-align:right">-80</td>
<td style="text-align:right">0.0</td>
<td>33.189967</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">dots</td>
<td style="text-align:right">T1</td>
<td style="text-align:right">-80</td>
<td style="text-align:right">3.2</td>
<td>31.691726</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">dots</td>
<td style="text-align:right">T1</td>
<td style="text-align:right">-80</td>
<td style="text-align:right">6.4</td>
<td>34.279840</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">dots</td>
<td style="text-align:right">T1</td>
<td style="text-align:right">-80</td>
<td style="text-align:right">12.8</td>
<td>32.631874</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">dots</td>
<td style="text-align:right">T1</td>
<td style="text-align:right">-80</td>
<td style="text-align:right">25.6</td>
<td>35.060487</td>
</tr>
<tr>
<td style="text-align:right">…</td>
<td style="text-align:right">…</td>
<td style="text-align:right">…</td>
<td style="text-align:right">…</td>
<td style="text-align:right">…</td>
<td>…</td>
</tr>
<tr>
<td style="text-align:right">389</td>
<td style="text-align:right">dots</td>
<td style="text-align:right">T2</td>
<td style="text-align:right">680</td>
<td style="text-align:right">3.2</td>
<td>37.806267</td>
</tr>
<tr>
<td style="text-align:right">390</td>
<td style="text-align:right">dots</td>
<td style="text-align:right">T2</td>
<td style="text-align:right">700</td>
<td style="text-align:right">0.0</td>
<td>43.464959</td>
</tr>
<tr>
<td style="text-align:right">391</td>
<td style="text-align:right">dots</td>
<td style="text-align:right">T2</td>
<td style="text-align:right">700</td>
<td style="text-align:right">3.2</td>
<td>38.994559</td>
</tr>
<tr>
<td style="text-align:right">392</td>
<td style="text-align:right">dots</td>
<td style="text-align:right">T2</td>
<td style="text-align:right">720</td>
<td style="text-align:right">0.0</td>
<td>41.987121</td>
</tr>
<tr>
<td style="text-align:right">393</td>
<td style="text-align:right">dots</td>
<td style="text-align:right">T2</td>
<td style="text-align:right">720</td>
<td style="text-align:right">3.2</td>
<td>41.716057</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">print(dots.dtypes)</span><br><span class="line">align           object</span><br><span class="line">choice          object</span><br><span class="line">time             int64</span><br><span class="line">coherence      float64</span><br><span class="line">firing_rate    float64</span><br><span class="line">dtype: object</span><br></pre></td></tr></table></figure>
<p>先来看看离散分布和聚合曲线：</p>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/25.png" style="zoom:120%;"></p>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/24.png" style="zoom:120%;"></p>
<p><strong>相关性coherence是连续型数值</strong><br>看看图例看看颜色：<br>颜色越重的相关性越强</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sns.relplot(x=<span class="string">"time"</span>,</span><br><span class="line">			y=<span class="string">"firing_rate"</span>,</span><br><span class="line">            hue=<span class="string">"coherence"</span>,</span><br><span class="line">            style=<span class="string">"choice"</span>,</span><br><span class="line">            kind=<span class="string">"line"</span>,</span><br><span class="line">            data=dots)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/23.png" style="zoom:120%;"></p>
<p>我们可以设置pallete属性，自定义color</p>
<p>主要，这里是6种颜色，n_colors一定要等于6，light值越高，线的对比度就越明显。我把它设置成0.3,就很难分辨了，设置成0就都成黑色了</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">pallete =  sns.cubehelix_palette(light=<span class="number">0.3</span>,n_colors=<span class="number">6</span>)</span><br><span class="line">sns.relplot(x=<span class="string">"time"</span>,</span><br><span class="line">         y=<span class="string">"firing_rate"</span>,</span><br><span class="line">            hue=<span class="string">"coherence"</span>,</span><br><span class="line">            style=<span class="string">"choice"</span>,</span><br><span class="line">            kind=<span class="string">"line"</span>,</span><br><span class="line">            palette=pallete,</span><br><span class="line">            data=dots)</span><br><span class="line">plt.savefig(<span class="string">'26'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/26.png" style="zoom:120%;"></p>
<p>设置了一下size，那么choice既有粗细之分了</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sns.relplot(x=<span class="string">"time"</span>,</span><br><span class="line">         y=<span class="string">"firing_rate"</span>,</span><br><span class="line">            hue=<span class="string">"coherence"</span>,</span><br><span class="line">            style=<span class="string">"choice"</span>,</span><br><span class="line">            kind=<span class="string">"line"</span>,</span><br><span class="line">            size=<span class="string">"choice"</span>,</span><br><span class="line">            data=dots)</span><br><span class="line">plt.savefig(<span class="string">'27'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/27.png" style="zoom:120%;"></p>
<h3 id="使用子图展示多重关系"><a href="#使用子图展示多重关系" class="headerlink" title="使用子图展示多重关系"></a>使用子图展示多重关系</h3><p>参数col、row可以帮助我们实现。</p>
<p><strong>col=“time” 有几种time，就有几列图（dinner和lunch)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.relplot(x=<span class="string">'total_bill'</span>,y=<span class="string">'tip'</span>,hue=<span class="string">'smoker'</span>,col=<span class="string">'time'</span>,data=tips)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/28.png" style="zoom:120%;"></p>
<p><strong>col=’smoker’，hue=’smoker’</strong> </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.relplot(x=<span class="string">'total_bill'</span>,y=<span class="string">'tip'</span>,hue=<span class="string">'smoker'</span>,col=<span class="string">'smoker'</span>,data=tips)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/33.png" style="zoom:120%;"></p>
<p><strong>col=“sex” 有几种sex，就有几列图（2种male和female，2列图）</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.relplot(x=<span class="string">"total_bill"</span>, y=<span class="string">"tip"</span>, col=<span class="string">"sex"</span>, data=tips)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/29.png" style="zoom:120%;"></p>
<p><strong>row=“smoker” 有几种smoker，就有几行图</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.relplot(x=<span class="string">"total_bill"</span>, y=<span class="string">"tip"</span>, row=<span class="string">"smoker"</span>, col=<span class="string">"sex"</span>, data=tips)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/30.png" style="zoom:100%;"></p>
<p>令列是按照性别划分的，行是按照是否为烟民划分的，这就是一个2x2的图</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.relplot(x=<span class="string">"total_bill"</span>, y=<span class="string">"tip"</span>, row=<span class="string">"smoker"</span>, col=<span class="string">"sex"</span>, data=tips)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/31.png" style="zoom:100%;"></p>
<p><strong>令col=’tips’,row=’size’，可以分析出各个时间段来餐厅就餐的每桌人数和吸烟情况</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.relplot(x=<span class="string">'total_bill'</span>,y=<span class="string">'tip'</span>,hue=<span class="string">'smoker'</span>,col=<span class="string">'time'</span>,data=tips,row=<span class="string">'size'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/34.png" style="zoom:100%;"></p>
<p><strong>col=“subject”, col_wrap=3 subject特别多，可以控制显示的图片的行数.col_wrap就代表有三列</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sns.relplot(x=<span class="string">"timepoint"</span>, y=<span class="string">"signal"</span>,</span><br><span class="line">            hue=<span class="string">"event"</span>, style=<span class="string">"event"</span>,</span><br><span class="line">            col=<span class="string">"subject"</span>, col_wrap=<span class="number">3</span>,</span><br><span class="line">            data=fmri.query(<span class="string">"region=='frontal'"</span>),</span><br><span class="line">            kind=<span class="string">"line"</span>,</span><br><span class="line">            linewidth=<span class="number">2.5</span>,</span><br><span class="line">            aspect=<span class="number">1</span>, <span class="comment">#长宽比，该值越大图片越方</span></span><br><span class="line">            height=<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/32.png" style="zoom:100%;"></p>
<h3 id="lineplot-and-scatterplot"><a href="#lineplot-and-scatterplot" class="headerlink" title="lineplot() and scatterplot()"></a>lineplot() and scatterplot()</h3><p>ci = 68 是统计偏差条的长度。err_style 是偏差条的形状，这里是bars所以是条形</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sns.lineplot(x=<span class="string">'timepoint'</span>,</span><br><span class="line">             y=<span class="string">'signal'</span>,</span><br><span class="line">             style=<span class="string">'event'</span>,</span><br><span class="line">             hue=<span class="string">'region'</span>,</span><br><span class="line">             data=fmri,</span><br><span class="line">             markers=<span class="literal">True</span>,</span><br><span class="line">             ci=<span class="number">68</span>,</span><br><span class="line">             err_style= <span class="string">'bars'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/35.png" style="zoom:100%;"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sns.lineplot(x=<span class="string">'timepoint'</span>,</span><br><span class="line">             y=<span class="string">'signal'</span>,</span><br><span class="line">             hue=<span class="string">'event'</span>,</span><br><span class="line">             data=fmri.query(<span class="string">"region == 'frontal'"</span>),</span><br><span class="line">             markers=<span class="literal">True</span>,</span><br><span class="line">             ci=<span class="number">68</span>,</span><br><span class="line">             err_style= <span class="string">'bars'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/36.png" style="zoom:100%;"></p>
<p><strong>lw属性能让线条的明度更加亮一点</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sns.lineplot(x=<span class="string">'timepoint'</span>,</span><br><span class="line">             y=<span class="string">'signal'</span>,</span><br><span class="line">             hue=<span class="string">'event'</span>,</span><br><span class="line">             data=fmri.query(<span class="string">"region == 'frontal'"</span>),</span><br><span class="line">             estimator=<span class="literal">None</span>,</span><br><span class="line">             err_style= <span class="string">'bars'</span>,</span><br><span class="line">           	 lw=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/37.png" style="zoom:100%;"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sns.scatterplot(x=<span class="string">'total_bill'</span>,</span><br><span class="line">                y=<span class="string">'tip'</span>,</span><br><span class="line">                data=tips,</span><br><span class="line">                hue=<span class="string">'smoker'</span>,</span><br><span class="line">                size=<span class="string">'size'</span>,</span><br><span class="line">                style=<span class="string">'time'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/38.png" style="zoom:100%;"></p>
<h2 id="Categorical-plots"><a href="#Categorical-plots" class="headerlink" title="Categorical plots"></a>Categorical plots</h2><p>在关系图教程中，我们了解了如何使用不同的可视化表示来显示数据集中多个变量之间的关系。在这些例子中，我们关注的主要关系是两个数值变量之间的情况。如果其中一个主要变量是“分类”（分为不同的组），那么使用更专业的可视化方法可能会有所帮助。</p>
<p>下面所有函数的最高级别的整合接口</p>
<ul>
<li><p><strong>Categorical scatterplots:</strong></p>
<ul>
<li>stripplot() (with kind=“strip”; the default)</li>
<li>swarmplot() (with kind=“swarm”)</li>
</ul>
</li>
<li><p><strong>Categorical distribution plots:</strong></p>
<ul>
<li>boxplot() (with kind=“box”)</li>
<li>violinplot() (with kind=“violin”)</li>
<li>boxenplot() (with kind=“boxen”)</li>
</ul>
</li>
<li><p><strong>Categorical estimate plots:</strong></p>
<ul>
<li>pointplot() (with kind=“point”)</li>
<li>barplot() (with kind=“bar”) </li>
<li>countplot() (with kind=“count”)</li>
</ul>
</li>
</ul>
<h2 id="分类散点图"><a href="#分类散点图" class="headerlink" title="分类散点图"></a>分类散点图</h2><h3 id="catplot-kind-“strip”"><a href="#catplot-kind-“strip”" class="headerlink" title="catplot(kind=“strip”)"></a>catplot(kind=“strip”)</h3><p>当在同一个类别中出现大量取值相同或接近的观测数据时，他们会挤到一起。seaborn中有两种分类散点图，分别以不同的方式处理了这个问题。<br> catplot()使用的默认方式是stripplot()，它给这些散点增加了一些随机的偏移量，更容易观察：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.catplot(x=<span class="string">"day"</span>, y=<span class="string">"total_bill"</span>, data=tips)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/39.png" style="zoom:100%;"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.catplot(x=<span class="string">"total_bill"</span>, y=<span class="string">"day"</span>, data=tips)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/54.png" style="zoom:100%;"></p>
<p><strong>jitter参数控制着偏移量的大小，或者我们可以直接禁止他们偏移：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.catplot(x=<span class="string">"day"</span>, y=<span class="string">"tip"</span>, jitter=<span class="literal">False</span>,data=tips)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/40.png" style="zoom:100%;"></p>
<h3 id="catplot-kind-“swarm”-蜂群图"><a href="#catplot-kind-“swarm”-蜂群图" class="headerlink" title="catplot(kind=“swarm”)  蜂群图"></a>catplot(kind=“swarm”)  蜂群图</h3><p>相当于swarmplot()<br> 避免了散点之间的重合，提供更好的方式来呈现观测点的分布。<br> 但仅适用于较小的数据集。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.catplot(kind=<span class="string">"swarm"</span>, x=<span class="string">"day"</span>, y=<span class="string">"tip"</span>, data=tips)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/41.png" style="zoom:100%;"></p>
<p><strong>hue参数：利用不同颜色区分</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.catplot(kind=<span class="string">"swarm"</span>, x=<span class="string">"day"</span>, y=<span class="string">"tip"</span>, hue=<span class="string">"sex"</span>, data=tips)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/42.png" style="zoom:100%;"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.catplot(kind=<span class="string">"swarm"</span>, x=<span class="string">"day"</span>, y=<span class="string">"total_bill"</span>, hue=<span class="string">"size"</span>, data=tips)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/55.png" style="zoom:100%;"></p>
<blockquote>
<p>关于x（分类型数据）轴的分类值的顺序，函数会自己推断。<br>如果数据是pandas的Categorical类型，那么默认的分类顺序可以在pandas中设置；<br>如果数据看起来是数值型的（比如1，2，3…），那他们也会被排序。<br>即使我们使用数字作为不同分类的标签，它们仍然是被当做分类型数据按顺序绘制在分类变量对应的坐标轴上的：</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 注意，2和4之间的距离与1和2之间的距离是一样的，它们是不同的分类，只会排序，但是并不会改变它们在坐标轴上的距离</span></span><br><span class="line">sns.catplot(x=<span class="string">"size"</span>, y=<span class="string">"tip"</span>, kind=<span class="string">"swarm"</span>, data=tips.query(<span class="string">"size!=3"</span>))</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/43.png" style="zoom:100%;"></p>
<p><strong>order参数：指定分类值顺序</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sns.catplot(</span><br><span class="line">    		kind=<span class="string">"swarm"</span>,</span><br><span class="line">            x=<span class="string">"size"</span>, </span><br><span class="line">            y=<span class="string">"tip"</span>, </span><br><span class="line">            order=[<span class="number">6</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>],</span><br><span class="line">            data=tips.query(<span class="string">"size!=3"</span>)</span><br><span class="line">           )</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/44.png" style="zoom:100%;"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sns.catplot(</span><br><span class="line">    		kind=<span class="string">"swarm"</span>, </span><br><span class="line">    		x=<span class="string">"smoker"</span>,</span><br><span class="line">    		y=<span class="string">"tip"</span>,</span><br><span class="line">    		order=[<span class="string">"No"</span>,<span class="string">"Yes"</span>],</span><br><span class="line">    		data=tips)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/45.png" style="zoom:100%;"></p>
<p><strong>有些时候把分类变量放在垂直坐标轴上会更有帮助（尤其是当分类名称较长或者分类较多时）</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sns.catplot(x=<span class="string">"total_bill"</span>, </span><br><span class="line">            y=<span class="string">"day"</span>, </span><br><span class="line">            hue=<span class="string">"time"</span>, </span><br><span class="line">            kind=<span class="string">"swarm"</span>, </span><br><span class="line">            data=tips)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/46.png" style="zoom:100%;"></p>
<h2 id="分类分布图"><a href="#分类分布图" class="headerlink" title="分类分布图"></a>分类分布图</h2><h3 id="catplot-kind-“box”-箱线图"><a href="#catplot-kind-“box”-箱线图" class="headerlink" title="catplot(kind=“box”) : 箱线图"></a>catplot(kind=“box”) : 箱线图</h3><p><a href="https://www.cnblogs.com/zhhfan/p/11344310.html" target="_blank" rel="noopener">https://www.cnblogs.com/zhhfan/p/11344310.html</a></p>
<p>又称为盒须图、盒式图或箱线图，是一种用作显示一组数据分散情况资料的统计图，因形状如箱子而得名。它能显示出一组数据的最大值、最小值、中位数、及上下四分位数。</p>
<p>箱形图绘制须使用常用的统计量，能提供有关数据位置和分散情况的关键信息，尤其在比较不同的母体数据时更可表现其差异。</p>
<p>箱形图的绘制主要包含六个数据节点，需要先将数据从大到小进行排列，然后分别计算出它的上边缘，上四分位数，中位数，下四分位数，下边缘，还有一个异常值。</p>
<p><strong>计算过程：</strong></p>
<ol>
<li>计算上四分位数（Q3），中位数，下四分位数（Q1）</li>
<li>计算上四分位数和下四分位数之间的差值，即四分位数差（IQR, interquartile range）Q3-Q1</li>
<li>绘制箱线图的上下范围，上限为上四分位数，下限为下四分位数。在箱子内部中位数的位置绘制横线。</li>
<li><strong>大于上四分位数1.5倍四分位数差的值，或者小于下四分位数1.5倍四分位数差的值，划为异常值</strong>（outliers）。</li>
<li>异常值之外，最靠近上边缘和下边缘的两个值处，画横线，作为箱线图的触须。</li>
<li>极端异常值，即超出四分位数差3倍距离的异常值，用实心点表示；较为温和的异常值，即处于1.5倍-3倍四分位数差之间的异常值，用空心点表示。</li>
<li>为箱线图添加名称，数轴等</li>
</ol>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/1.jpg" style="zoom:100%;"></p>
<p><strong>展现了：离群点、上界、上四分位数、均值、中位数、下四分位数、下界、离群点</strong></p>
<h4 id="第一个例子"><a href="#第一个例子" class="headerlink" title="第一个例子:"></a>第一个例子:</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.catplot(kind=<span class="string">"box"</span>, x=<span class="string">"day"</span>, y=<span class="string">"total_bill"</span>, data=tips)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/47.png" style="zoom:100%;"></p>
<p><strong>增加一个维度的信息</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sns.catplot(kind=<span class="string">"box"</span>,</span><br><span class="line">			x=<span class="string">"day"</span>,</span><br><span class="line">            y=<span class="string">"total_bill"</span>,</span><br><span class="line">            hue=<span class="string">"smoker"</span>,</span><br><span class="line">            data=tips)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/48.png" style="zoom:100%;"></p>
<p>上面的图中，默认了hue参数对应的变量smoker与坐标轴上的分类变量day是相互嵌套的（如，周四吸烟、周四不吸烟），这种操作叫<strong>“dodging”</strong>。<br> <strong>如果不是这种情形，应该禁用dodging，看下面的例子: hue的Weekend和day不是相互嵌套的</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">tips[<span class="string">"Weekend"</span>]= tips[<span class="string">"day"</span>].isin([<span class="string">"Sat"</span>,<span class="string">"Sun"</span>])</span><br><span class="line">sns.catplot(kind=<span class="string">"box"</span>, x=<span class="string">"day"</span>, y=<span class="string">"total_bill"</span>, hue=<span class="string">"Weekend"</span>, data=tips)</span><br><span class="line"></span><br><span class="line">sns.catplot(</span><br><span class="line">			kind=<span class="string">"box"</span>,</span><br><span class="line">            x=<span class="string">"day"</span>,</span><br><span class="line">            y=<span class="string">"total_bill"</span>,</span><br><span class="line">            hue=<span class="string">"Weekend"</span>,</span><br><span class="line">            dodge=<span class="literal">False</span>,</span><br><span class="line">            data=tips</span><br><span class="line">            )</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/52.png" style="zoom:100%;"></p>
<h4 id="第二个例子："><a href="#第二个例子：" class="headerlink" title="第二个例子："></a>第二个例子：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">diamonds &#x3D; sns.load_dataset(&#39;diamonds&#39;)</span><br><span class="line">diamonds.head()</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">carat</th>
<th style="text-align:right">cut</th>
<th style="text-align:right">color</th>
<th style="text-align:right">clarity</th>
<th style="text-align:right">depth</th>
<th style="text-align:right">table</th>
<th style="text-align:right">price</th>
<th style="text-align:right">x</th>
<th style="text-align:right">y</th>
<th style="text-align:right">z</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">0.23</td>
<td style="text-align:right">Ideal</td>
<td style="text-align:right">E</td>
<td style="text-align:right">SI2</td>
<td style="text-align:right">61.5</td>
<td style="text-align:right">55.0</td>
<td style="text-align:right">326</td>
<td style="text-align:right">3.95</td>
<td style="text-align:right">3.98</td>
<td style="text-align:right">2.43</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">0.21</td>
<td style="text-align:right">Premium</td>
<td style="text-align:right">E</td>
<td style="text-align:right">SI1</td>
<td style="text-align:right">59.8</td>
<td style="text-align:right">61.0</td>
<td style="text-align:right">326</td>
<td style="text-align:right">3.89</td>
<td style="text-align:right">3.84</td>
<td style="text-align:right">2.31</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">0.23</td>
<td style="text-align:right">Good</td>
<td style="text-align:right">E</td>
<td style="text-align:right">VS1</td>
<td style="text-align:right">56.9</td>
<td style="text-align:right">65.0</td>
<td style="text-align:right">327</td>
<td style="text-align:right">4.05</td>
<td style="text-align:right">4.07</td>
<td style="text-align:right">2.31</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">0.29</td>
<td style="text-align:right">Premium</td>
<td style="text-align:right">I</td>
<td style="text-align:right">VS2</td>
<td style="text-align:right">62.4</td>
<td style="text-align:right">58.0</td>
<td style="text-align:right">334</td>
<td style="text-align:right">4.20</td>
<td style="text-align:right">4.23</td>
<td style="text-align:right">2.63</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">0.31</td>
<td style="text-align:right">Good</td>
<td style="text-align:right">J</td>
<td style="text-align:right">SI2</td>
<td style="text-align:right">63.3</td>
<td style="text-align:right">58.0</td>
<td style="text-align:right">335</td>
<td style="text-align:right">4.34</td>
<td style="text-align:right">4.35</td>
<td style="text-align:right">2.75</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.catplot(x=<span class="string">'color'</span>,y=<span class="string">'price'</span>,kind = <span class="string">'boxen'</span>,data=diamonds)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/56.png" style="zoom:100%;"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.catplot(x=<span class="string">'color'</span>,y=<span class="string">'price'</span>,kind = <span class="string">'boxen'</span>,data=diamonds,hue=<span class="string">'cut'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/57.png" style="zoom:100%;"></p>
<h3 id="catplot-kind-“boxen”-箱线图进阶"><a href="#catplot-kind-“boxen”-箱线图进阶" class="headerlink" title="catplot(kind=“boxen”) : 箱线图进阶"></a>catplot(kind=“boxen”) : 箱线图进阶</h3><p>与箱线图相似但是<strong>能展示更多关于数据分布形状的信息，它对大数据更加友好</strong>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.catplot(kind&#x3D;&quot;boxen&quot;, x&#x3D;&quot;day&quot;, y&#x3D;&quot;total_bill&quot;, data&#x3D;tips)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/49.png" style="zoom:100%;"></p>
<h3 id="catplot-kind-“violin”-小提琴图"><a href="#catplot-kind-“violin”-小提琴图" class="headerlink" title="catplot(kind=“violin”): 小提琴图"></a>catplot(kind=“violin”): 小提琴图</h3><p><strong>它将箱线图和核密度估计(kde: kernel density estimation)结合起来</strong></p>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/53.png" style="zoom:80%;"></p>
<p>小提琴图 (Violin Plot)是用来展示多组数据的分布状态以及概率密度。这种图表结合了箱形图和密度图的特征，主要用来显示数据的分布形状。跟箱形图类似，但是在密度层面展示更好。在数据量非常大不方便一个一个展示的时候小提琴图特别适用。</p>
<p>中间的黑色粗条表示四分位数范围，从其延伸的幼细黑线代表 95% 置信区间，而白点则为中位数。</p>
<p>箱形图在数据显示方面受到限制，简单的设计往往隐藏了有关数据分布的重要细节。例如使用箱形图时，我们不能了解数据分布是双模还是多模。虽然小提琴图可以显示更多详情，但它们也可能包含较多干扰信息</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.catplot(x=<span class="string">"total_bill"</span>, y=<span class="string">"day"</span>, kind=<span class="string">"violin"</span>,data=tips,hue=<span class="string">"time"</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/50.png" style="zoom:100%;"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.catplot(x=<span class="string">'total_bill'</span>,y=<span class="string">'day'</span>,kind = <span class="string">'violin'</span>,data=tips,hue=<span class="string">'sex'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/58.png" style="zoom:100%;"></p>
<h4 id="参数split-Ture"><a href="#参数split-Ture" class="headerlink" title="参数split=Ture"></a>参数split=Ture</h4><p>当一个额外的分类变量仅有2个水平时，我们也可以将它赋给hue参数，并且设置split=True，这样我们可以更加充分地利用空间来表达更多信息：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sns.catplot(kind=<span class="string">"violin"</span>,</span><br><span class="line">            x=<span class="string">"total_bill"</span>,</span><br><span class="line">			y=<span class="string">"day"</span>,</span><br><span class="line">            hue=<span class="string">"time"</span>,</span><br><span class="line">            split=<span class="literal">True</span>, </span><br><span class="line">            data=tips)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/51.png" style="zoom:100%;"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sns.catplot(kind=<span class="string">"violin"</span>,</span><br><span class="line">            x=<span class="string">"total_bill"</span>,</span><br><span class="line">			y=<span class="string">"day"</span>,</span><br><span class="line">            hue=<span class="string">"sex"</span>,</span><br><span class="line">            split=<span class="literal">True</span>, </span><br><span class="line">            data=tips)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/59.png" style="zoom:100%;"></p>
<h2 id="分类统计估计图"><a href="#分类统计估计图" class="headerlink" title="分类统计估计图"></a>分类统计估计图</h2><p>学习博客：<a href="https://www.jianshu.com/p/8bb06d3fd21b" target="_blank" rel="noopener">https://www.jianshu.com/p/8bb06d3fd21b</a></p>
<h3 id="条形图：catplot-kind-“bar”"><a href="#条形图：catplot-kind-“bar”" class="headerlink" title="条形图：catplot(kind=“bar”)"></a>条形图：catplot(kind=“bar”)</h3><p>条形图表示数值变量与每个矩形高度的中心趋势的估计值，并使用误差线提供关于该估计值附近的不确定性的一些指示。具体用法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">seaborn.barplot(</span><br><span class="line">    x=<span class="literal">None</span>,</span><br><span class="line">    y=<span class="literal">None</span>,</span><br><span class="line">    hue=<span class="literal">None</span>,<span class="comment"># 按照列名中的值分类形成分类的条形图</span></span><br><span class="line">    data=<span class="literal">None</span>,</span><br><span class="line">    order=<span class="literal">None</span>,<span class="comment">#(lists of strings)用于控制条形图的顺序</span></span><br><span class="line">    hue_order=<span class="literal">None</span>,<span class="comment">#(lists of strings)用于控制条形图的顺序</span></span><br><span class="line">    estimator=(function mean),<span class="comment"># &lt;function name&gt;控制条形图的取整列数据的什么值</span></span><br><span class="line">    ci=<span class="number">95</span>,<span class="comment"># 统计学上的置信区间（在0-100之间）,若填写"sd",则误差棒用标准误差。 </span></span><br><span class="line">    n_boot=<span class="number">1000</span>,</span><br><span class="line">    units=<span class="literal">None</span>,</span><br><span class="line">    orient=<span class="literal">None</span>,</span><br><span class="line">    color=<span class="literal">None</span>,</span><br><span class="line">    palette=<span class="literal">None</span>, <span class="comment">#调色板，控制不同的颜色style</span></span><br><span class="line">    saturation=<span class="number">0.75</span>,</span><br><span class="line">    errcolor=<span class="string">'.26'</span>,</span><br><span class="line">    errwidth=<span class="literal">None</span>,</span><br><span class="line">    capsize=<span class="literal">None</span>,  <span class="comment">#  设置误差棒帽条（上下两根横线）的宽度</span></span><br><span class="line">    dodge=<span class="literal">True</span>, </span><br><span class="line">    ax=<span class="literal">None</span>, </span><br><span class="line">    **kwargs)</span><br></pre></td></tr></table></figure>
<p>我们采用Titanic数据集</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">titanic = sns.load_dataset(<span class="string">'titanic'</span>)</span><br><span class="line">titanic.head()</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">survived</th>
<th style="text-align:right">pclass</th>
<th style="text-align:right">sex</th>
<th style="text-align:right">age</th>
<th style="text-align:right">sibsp</th>
<th style="text-align:right">parch</th>
<th style="text-align:right">fare</th>
<th style="text-align:right">embarked</th>
<th style="text-align:right">class</th>
<th style="text-align:right">who</th>
<th style="text-align:right">adult_male</th>
<th style="text-align:right">deck</th>
<th style="text-align:right">embark_town</th>
<th style="text-align:right">alone</th>
<th>alive</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">3</td>
<td style="text-align:right">male</td>
<td style="text-align:right">22.0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">7.2500</td>
<td style="text-align:right">S</td>
<td style="text-align:right">Third</td>
<td style="text-align:right">man</td>
<td style="text-align:right">True</td>
<td style="text-align:right">NaN</td>
<td style="text-align:right">Southampton</td>
<td style="text-align:right">no</td>
<td>False</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">female</td>
<td style="text-align:right">38.0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">71.2833</td>
<td style="text-align:right">C</td>
<td style="text-align:right">First</td>
<td style="text-align:right">woman</td>
<td style="text-align:right">False</td>
<td style="text-align:right">C</td>
<td style="text-align:right">Cherbourg</td>
<td style="text-align:right">yes</td>
<td>False</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">1</td>
<td style="text-align:right">3</td>
<td style="text-align:right">female</td>
<td style="text-align:right">26.0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">7.9250</td>
<td style="text-align:right">S</td>
<td style="text-align:right">Third</td>
<td style="text-align:right">woman</td>
<td style="text-align:right">False</td>
<td style="text-align:right">NaN</td>
<td style="text-align:right">Southampton</td>
<td style="text-align:right">yes</td>
<td>True</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">female</td>
<td style="text-align:right">35.0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">53.1000</td>
<td style="text-align:right">S</td>
<td style="text-align:right">First</td>
<td style="text-align:right">woman</td>
<td style="text-align:right">False</td>
<td style="text-align:right">C</td>
<td style="text-align:right">Southampton</td>
<td style="text-align:right">yes</td>
<td>False</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">0</td>
<td style="text-align:right">3</td>
<td style="text-align:right">male</td>
<td style="text-align:right">35.0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">8.0500</td>
<td style="text-align:right">S</td>
<td style="text-align:right">Third</td>
<td style="text-align:right">man</td>
<td style="text-align:right">True</td>
<td style="text-align:right">NaN</td>
<td style="text-align:right">Southampton</td>
<td style="text-align:right">no</td>
<td>True</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.catplot(x=<span class="string">'sex'</span>,y=<span class="string">'survived'</span>,kind=<span class="string">'bar'</span>,data=titanic,hue=<span class="string">'class'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/60.png" style="zoom:100%;"></p>
<p>从中我们可以很明显的看到女性幸存者明现多于男性幸存者，且头等舱的幸存率比二等舱、三等舱的幸存率都要大</p>
<p>修改 palette ，我们可以获得多种配色：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sns.catplot(</span><br><span class="line">			x=<span class="string">'sex'</span>,</span><br><span class="line">			y=<span class="string">'survived'</span>,</span><br><span class="line">			kind=<span class="string">'bar'</span>,</span><br><span class="line">			data=titanic,</span><br><span class="line">			hue=<span class="string">'class'</span>,</span><br><span class="line">			palette=<span class="string">'ch:0.95'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/61.png" style="zoom:100%;"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">sns.catplot(</span><br><span class="line">			x=<span class="string">'sex'</span>,</span><br><span class="line">			y=<span class="string">'survived'</span>,</span><br><span class="line">			kind=<span class="string">'bar'</span>,</span><br><span class="line">			data=titanic,</span><br><span class="line">			hue=<span class="string">'class'</span>,</span><br><span class="line">			capsize=<span class="number">.2</span>)</span><br><span class="line">sns.catplot(</span><br><span class="line">			x=<span class="string">'sex'</span>,</span><br><span class="line">			y=<span class="string">'survived'</span>,</span><br><span class="line">			kind=<span class="string">'bar'</span>,</span><br><span class="line">			data=titanic,</span><br><span class="line">			hue=<span class="string">'class'</span>,</span><br><span class="line">			capsize=<span class="number">.5</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/64.png" style="zoom:100%;"></p>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/63.png" style="zoom:100%;"></p>
<h3 id="点图：catplot-kind-“point”"><a href="#点图：catplot-kind-“point”" class="headerlink" title="点图：catplot(kind=“point”)"></a>点图：catplot(kind=“point”)</h3><p>点图代表散点图位置的数值变量的中心趋势估计，并使用<strong>误差线</strong>提供关于该估计的不确定性的一些指示。点图可能<strong>比条形图更有用于聚焦一个或多个分类变量的不同级别之间的比较</strong>。他们尤其善于表现交互作用：<strong>一个分类变量的层次之间的关系如何在第二个分类变量的层次之间变化</strong>。连接来自<strong>相同色调等级</strong>的每个点的线允许交互作用通过<strong>斜率的差异</strong>进行判断，这比对几组点或条的高度比较容易。具体用法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">seaborn.pointplot(</span><br><span class="line">	x=<span class="literal">None</span>,</span><br><span class="line">	y=<span class="literal">None</span>,</span><br><span class="line">    hue=<span class="literal">None</span>,</span><br><span class="line">    data=<span class="literal">None</span>,</span><br><span class="line">    order=<span class="literal">None</span>,</span><br><span class="line">    hue_order=<span class="literal">None</span>,</span><br><span class="line">    estimator=(function mean),</span><br><span class="line">    ci=<span class="number">95</span>,</span><br><span class="line">    n_boot=<span class="number">1000</span>, </span><br><span class="line">    units=<span class="literal">None</span>, </span><br><span class="line">    markers=<span class="string">'o'</span>, </span><br><span class="line">    linestyles=<span class="string">'-'</span>, </span><br><span class="line">    dodge=<span class="literal">False</span>, </span><br><span class="line">    join=<span class="literal">True</span>,</span><br><span class="line">    scale=<span class="number">1</span>,</span><br><span class="line">    orient=<span class="literal">None</span>, </span><br><span class="line">    color=<span class="literal">None</span>,</span><br><span class="line">    palette=<span class="literal">None</span>, </span><br><span class="line">    errwidth=<span class="literal">None</span>, </span><br><span class="line">    capsize=<span class="literal">None</span>, </span><br><span class="line">    ax=<span class="literal">None</span>,</span><br><span class="line">    **kwargs)</span><br></pre></td></tr></table></figure>
<p>比如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">sns.set_style(<span class="string">"white"</span>)</span><br><span class="line">sns.catplot(</span><br><span class="line">			x=<span class="string">'sex'</span>,</span><br><span class="line">			y=<span class="string">'survived'</span>,</span><br><span class="line">			kind=<span class="string">'point'</span>,</span><br><span class="line">			data=titanic,</span><br><span class="line">			hue=<span class="string">'class'</span>,</span><br><span class="line">			)</span><br><span class="line">sns.set_style(<span class="string">"darkgrid"</span>)</span><br><span class="line">sns.catplot(</span><br><span class="line">			x=<span class="string">'sex'</span>,</span><br><span class="line">			y=<span class="string">'survived'</span>,</span><br><span class="line">			kind=<span class="string">'point'</span>,</span><br><span class="line">			data=titanic,</span><br><span class="line">			hue=<span class="string">'class'</span>,</span><br><span class="line">			)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/62.png" style="zoom:130%;"></p>
<h3 id="直方图：catplot-kind-“count”"><a href="#直方图：catplot-kind-“count”" class="headerlink" title="直方图：catplot(kind=“count”)"></a>直方图：catplot(kind=“count”)</h3><p>一个计数图可以被认为是一个<strong>分类直方图</strong>，而不是定量的变量。基本的api和选项与<code>barplot()</code>相同，因此您可以比较嵌套变量中的<strong>计数</strong>。（工作原理就是<strong>对输入的数据分类</strong>，条形图显示<strong>各个分类的数量</strong>）具体用法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">seaborn.countplot(</span><br><span class="line">	x=<span class="literal">None</span>,</span><br><span class="line">    y=<span class="literal">None</span>,</span><br><span class="line">    hue=<span class="literal">None</span>,</span><br><span class="line">    data=<span class="literal">None</span>, </span><br><span class="line">    order=<span class="literal">None</span>,</span><br><span class="line">    hue_order=<span class="literal">None</span>,</span><br><span class="line">    orient=<span class="literal">None</span>, </span><br><span class="line">    color=<span class="literal">None</span>, </span><br><span class="line">    palette=<span class="literal">None</span>, </span><br><span class="line">    saturation=<span class="number">0.75</span>, </span><br><span class="line">    dodge=<span class="literal">True</span>,</span><br><span class="line">    ax=<span class="literal">None</span>, </span><br><span class="line">    **kwargs)</span><br></pre></td></tr></table></figure>
<p><strong>注：countplot参数和barplot基本差不多，可以对比着记忆，有一点不同的是countplot中不能同时输入x和y，且countplot没有误差棒。因为countplot的x或y轴就是count，是用来计算数量的</strong></p>
<p>这里我直接使用了 countplot()而不是 catplot(kind=’count’)是因为catplot无法画子图。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">plt.subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line">sns.countplot(x=<span class="string">'sex'</span>,</span><br><span class="line">			data=titanic,</span><br><span class="line">			hue=<span class="string">'class'</span>,</span><br><span class="line">      )</span><br><span class="line">plt.subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">sns.countplot(y=<span class="string">'survived'</span>,</span><br><span class="line">			data=titanic,</span><br><span class="line">			hue=<span class="string">'class'</span>,</span><br><span class="line">      )</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/65.png" style="zoom:100%;"></p>
<p>同样，我们修改palette可以修改配色</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">plt.subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line">sns.countplot(x=<span class="string">'sex'</span>,</span><br><span class="line">			data=titanic,</span><br><span class="line">			hue=<span class="string">'class'</span>,</span><br><span class="line">            palette=<span class="string">"Set2"</span></span><br><span class="line">      )</span><br><span class="line">plt.subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">sns.countplot(y=<span class="string">'survived'</span>,</span><br><span class="line">			data=titanic,</span><br><span class="line">			hue=<span class="string">'class'</span>,</span><br><span class="line">            palette=<span class="string">"Set3"</span></span><br><span class="line">      )</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/66.png" style="zoom:100%;"></p>
<h2 id="Distribution-plots"><a href="#Distribution-plots" class="headerlink" title="Distribution plots"></a>Distribution plots</h2><p>学习博客：<a href="https://www.jianshu.com/p/844f66d00ac1" target="_blank" rel="noopener">https://www.jianshu.com/p/844f66d00ac1</a></p>
<h3 id="kdeplot"><a href="#kdeplot" class="headerlink" title="kdeplot()"></a>kdeplot()</h3><p>核密度估计(kernel density estimation)是在<strong>概率论</strong>中用来估计未知的<strong>密度函数</strong>，属于非参数检验方法之一。通过核密度估计图可以比较直观的看出数据样本本身的分布特征。具体用法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">seaborn.kdeplot(</span><br><span class="line">		data,</span><br><span class="line">		data2=<span class="literal">None</span>,</span><br><span class="line">		shade=<span class="literal">False</span>,</span><br><span class="line">		vertical=<span class="literal">False</span>,<span class="comment"># 表示以X轴进行绘制还是以Y轴进行绘制</span></span><br><span class="line">		kernel=<span class="string">'gau'</span>,</span><br><span class="line">		bw=<span class="string">'scott'</span>,</span><br><span class="line">		gridsize=<span class="number">100</span>,</span><br><span class="line">		cut=<span class="number">3</span>,<span class="comment"># 参数表示绘制的时候，切除带宽往数轴极限数值的多少(默认为3)</span></span><br><span class="line">		clip=<span class="literal">None</span>,</span><br><span class="line">		legend=<span class="literal">True</span>,</span><br><span class="line">		cumulative=<span class="literal">False</span>, <span class="comment"># 是否绘制累积分布</span></span><br><span class="line">		shade_lowest=<span class="literal">True</span>, <span class="comment"># 若为True，则在kde曲线下面的区域中进行阴影处理</span></span><br><span class="line">    	color: <span class="comment"># color控制曲线及阴影的颜色</span></span><br><span class="line">		cbar=<span class="literal">False</span>,<span class="comment"># 参数若为True，则会添加一个颜色棒(颜色帮在二元kde图像中才有)</span></span><br><span class="line">		cbar_ax=<span class="literal">None</span>,</span><br><span class="line">		cbar_kws=<span class="literal">None</span>, </span><br><span class="line">		ax=<span class="literal">None</span>, </span><br><span class="line">		**kwargs)</span><br></pre></td></tr></table></figure>
<p><strong>绘制简单的一维kde图像 </strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np </span><br><span class="line">x=np.random.randn(<span class="number">100</span>)  </span><br><span class="line">sns.kdeplot(x)</span><br><span class="line">plt.savefig(<span class="string">'67'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/67.png" style="zoom:100%;"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.kdeplot(x,cut=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/68.png" style="zoom:100%;"></p>
<p><strong>进行阴影处理</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.kdeplot(x,shade=<span class="literal">True</span>,color=<span class="string">"g"</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/69.png" style="zoom:100%;"></p>
<p><strong>vertical</strong></p>
<p>vertical为true时，x轴y轴交换</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.kdeplot(x,vertical=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/70.png" style="zoom:100%;"></p>
<p><strong>二维kde图</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">y=np.random.randn(<span class="number">100</span>)</span><br><span class="line">sns.kdeplot(x,y,shade=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/71.png" style="zoom:100%;"></p>
<p><strong>添加一个颜色棒</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.kdeplot(x,y,shade=<span class="literal">True</span>,cbar=<span class="literal">True</span>,color=<span class="string">'r'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/72.png" style="zoom:100%;"></p>
<h3 id="distplot"><a href="#distplot" class="headerlink" title="distplot()"></a>distplot()</h3><p>displot()集合了matplotlib的hist()与核函数估计kdeplot的功能，增加了rugplot分布观测条显示与利用scipy库fit拟合参数分布的新颖用途。具体用法如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">seaborn.distplot(</span><br><span class="line">	a, </span><br><span class="line">	bins=<span class="literal">None</span>, <span class="comment"># int或list，控制直方图的划分</span></span><br><span class="line">    hist=<span class="literal">True</span>, <span class="comment"># 调节是否显示直方图</span></span><br><span class="line">    kde=<span class="literal">True</span>, <span class="comment">#  调节是否显示核密度估计</span></span><br><span class="line">    rug=<span class="literal">False</span>,<span class="comment"># 控制是否生成观测数值的小细条</span></span><br><span class="line">    fit=<span class="literal">None</span>, <span class="comment"># 控制拟合的参数分布图形,能够直观地评估它与观察数据的对应关系 </span></span><br><span class="line">    hist_kws=<span class="literal">None</span>,<span class="comment"># 参数接收字典类型，可以自行定义更多高级的样式</span></span><br><span class="line">    kde_kws=<span class="literal">None</span>,</span><br><span class="line">    rug_kws=<span class="literal">None</span>, </span><br><span class="line">    fit_kws=<span class="literal">None</span>, </span><br><span class="line">    color=<span class="literal">None</span>, </span><br><span class="line">    vertical=<span class="literal">False</span>, </span><br><span class="line">    norm_hist=<span class="literal">False</span>, <span class="comment">#若为True, 则直方图高度显示密度而非计数(含有kde图像中默认为True) </span></span><br><span class="line">    axlabel=<span class="literal">None</span>,</span><br><span class="line">    label=<span class="literal">None</span>,</span><br><span class="line">    ax=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>
<p>先介绍一下直方图(Histograms)：</p>
<p>直方图又称<strong>质量分布图</strong>，它是表示资料变化情况的一种主要工具。用直方图可以解析出资料的规则性，比较直观地看出产品质量特性的分布状态，对于资料分布状况一目了然，便于判断其总体质量分布情况。直方图表示通过沿数据范围<strong>形成分箱</strong>，然后绘制条以<strong>显示落入每个分箱的观测次数</strong>的数据分布。</p>
<p>通过具体的例子来体验一下distplot的用法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.distplot(x,color=<span class="string">"g"</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/73.png" style="zoom:100%;"></p>
<p>通过<strong>hist</strong>和<strong>kde</strong>参数调节是否显示直方图及核密度估计(默认hist,kde均为True)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">fig,axes=plt.subplots(<span class="number">1</span>,<span class="number">3</span>) <span class="comment">#创建一个一行三列的画布</span></span><br><span class="line">sns.distplot(x,ax=axes[<span class="number">0</span>]) <span class="comment">#左图</span></span><br><span class="line">sns.distplot(x,hist=<span class="literal">False</span>,ax=axes[<span class="number">1</span>]) <span class="comment">#中图</span></span><br><span class="line">sns.distplot(x,kde=<span class="literal">False</span>,ax=axes[<span class="number">2</span>]) <span class="comment">#右图</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/74.png" style="zoom:100%;"></p>
<p><strong>bins：int或list，控制直方图的划分</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fig,axes=plt.subplots(<span class="number">1</span>,<span class="number">2</span>) </span><br><span class="line">sns.distplot(x,kde=<span class="literal">False</span>,bins=<span class="number">20</span>,ax=axes[<span class="number">0</span>]) </span><br><span class="line"><span class="comment">#左图：分成20个区间</span></span><br><span class="line">sns.distplot(x,kde=<span class="literal">False</span>,bins=[x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">4</span>)],ax=axes[<span class="number">1</span>]) </span><br><span class="line"><span class="comment">#右图：以0,1,2,3为分割点，形成区间[0,1],[1,2],[2,3]，区间外的值不计入。</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/75.png" style="zoom:100%;"></p>
<p><strong>rag：控制是否生成观测数值的小细条</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fig,axes=plt.subplots(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">sns.distplot(x,rug=<span class="literal">True</span>,ax=axes[<span class="number">0</span>]) <span class="comment">#左图</span></span><br><span class="line">sns.distplot(x,ax=axes[<span class="number">1</span>]) <span class="comment">#右图</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/76.png" style="zoom:100%;"></p>
<p>fit：控制拟合的参数分布图形，能够直观地评估它与观察数据的对应关系(黑色线条为确定的分布)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy.stats <span class="keyword">import</span> *</span><br><span class="line">sns.distplot(x,hist=<span class="literal">False</span>,fit=norm) <span class="comment">#拟合标准正态分布</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/77.png" style="zoom:100%;"></p>
<p>hist_kws, kde_kws, rug_kws, fit_kws参数接收字典类型，可以自行定义更多高级的样式</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.distplot(x,kde_kws=&#123;<span class="string">"label"</span>:<span class="string">"KDE"</span>&#125;,vertical=<span class="literal">True</span>,color=<span class="string">"y"</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/78.png" style="zoom:100%;"></p>
<p>norm_hist：若为True, 则直方图高度显示密度而非计数(含有kde图像中默认为True)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fig,axes=plt.subplots(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">sns.distplot(x,norm_hist=<span class="literal">True</span>,kde=<span class="literal">False</span>,ax=axes[<span class="number">0</span>]) <span class="comment">#左图</span></span><br><span class="line">sns.distplot(x,kde=<span class="literal">False</span>,ax=axes[<span class="number">1</span>]) <span class="comment">#右图</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/79.png" style="zoom:100%;"></p>
<h3 id="jointplot"><a href="#jointplot" class="headerlink" title="jointplot()"></a>jointplot()</h3><p>学习自官方文档：<a href="http://seaborn.pydata.org/generated/seaborn.jointplot.html" target="_blank" rel="noopener">http://seaborn.pydata.org/generated/seaborn.jointplot.html</a></p>
<p> joint axes   联合分布 轴</p>
<p>marginal axes  边缘分布 轴</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">seaborn.jointplot(</span><br><span class="line">x,</span><br><span class="line">y,</span><br><span class="line"><span class="comment"># strings or vectors Data or names of variables in data.</span></span><br><span class="line">data=<span class="literal">None</span>, </span><br><span class="line"><span class="comment"># DataFrame, optional :DataFrame when x and y are variable names.</span></span><br><span class="line">kind=<span class="string">'scatter'</span>, </span><br><span class="line"><span class="comment"># &#123; “scatter” | “reg” | “resid” | “kde” | “hex” &#125;, optional :Kind of plot to draw.</span></span><br><span class="line">color=<span class="literal">None</span>, </span><br><span class="line"><span class="comment"># Color used for the plot elements.    </span></span><br><span class="line">height=<span class="number">6</span>, </span><br><span class="line"><span class="comment"># numeric, optional :Size of the figure (it will be square).</span></span><br><span class="line">ratio=<span class="number">5</span>, </span><br><span class="line"><span class="comment">#numeric, optional :Ratio of joint axes height to marginal axes height.</span></span><br><span class="line">space=<span class="number">0.2</span>, </span><br><span class="line"><span class="comment">#numeric, optional :Space between the joint and marginal axes  </span></span><br><span class="line">dropna=<span class="literal">True</span>,</span><br><span class="line"><span class="comment">#bool, optional :If True, remove observations that are missing from x and y.</span></span><br><span class="line">xlim=<span class="literal">None</span>, </span><br><span class="line">ylim=<span class="literal">None</span>, </span><br><span class="line"><span class="comment">#two-tuples, optional  :Axis limits to set before plotting.</span></span><br><span class="line">joint_kws=<span class="literal">None</span>,</span><br><span class="line">marginal_kws=<span class="literal">None</span>,</span><br><span class="line">annot_kws=<span class="literal">None</span>,</span><br><span class="line"><span class="comment">#dicts, optional : Additional keyword arguments for the plot components.</span></span><br><span class="line">**kwargs</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>先从最简单的开始：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sns.set(style=<span class="string">"white"</span>, color_codes=<span class="literal">True</span>)</span><br><span class="line">tips = sns.load_dataset(<span class="string">"tips"</span>)</span><br><span class="line">sns.jointplot(x=<span class="string">"total_bill"</span>, y=<span class="string">"tip"</span>, data=tips)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/80.png" style="zoom:100%;"></p>
<p>kind = ‘reg’</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.jointplot(<span class="string">"total_bill"</span>, <span class="string">"tip"</span>, data=tips, kind=<span class="string">"reg"</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/81.png" style="zoom:100%;"></p>
<p>把原来的scatter散点图换成六边形 </p>
<p>kind=’hex’</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.jointplot(<span class="string">"total_bill"</span>, <span class="string">"tip"</span>, data=tips, kind=<span class="string">"hex"</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/82.png" style="zoom:100%;"></p>
<p>kind = ‘kde’ 。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">iris = sns.load_dataset(<span class="string">"iris"</span>)</span><br><span class="line">sns.jointplot(</span><br><span class="line">			<span class="string">"sepal_width"</span>, </span><br><span class="line">			<span class="string">"petal_length"</span>,</span><br><span class="line">            data=iris,</span><br><span class="line">            kind=<span class="string">"kde"</span>,</span><br><span class="line">            space=<span class="number">0</span>,</span><br><span class="line">            color=<span class="string">"g"</span></span><br><span class="line">            )</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/83.png" style="zoom:100%;"></p>
<p>kind = ‘resid’</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.jointplot(<span class="string">"total_bill"</span>, <span class="string">"tip"</span>, data=tips, kind=<span class="string">"resid"</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/88.png" style="zoom:100%;"></p>
<p>在上图的基础上再加入散点图</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sns.jointplot(</span><br><span class="line">		<span class="string">"sepal_length"</span>,</span><br><span class="line">        <span class="string">"sepal_width"</span>,</span><br><span class="line">		data=iris, </span><br><span class="line">		color=<span class="string">"r"</span>).plot_joint(sns.kdeplot, zorder=<span class="number">0</span>, n_levels=<span class="number">6</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/84.png" style="zoom:100%;"></p>
<p>给x、y轴命名</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x, y = np.random.randn(<span class="number">2</span>, <span class="number">300</span>)</span><br><span class="line">sns.jointplot(x, y, kind=<span class="string">"hex"</span>).set_axis_labels(<span class="string">"x"</span>, <span class="string">"y"</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/85.png" style="zoom:100%;"></p>
<p>利用 height和ratio将更多空间给 边际图</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sns.jointplot(<span class="string">"total_bill"</span>, </span><br><span class="line">				<span class="string">"tip"</span>,</span><br><span class="line">               data=tips,</span><br><span class="line">               height=<span class="number">5</span>, </span><br><span class="line">               ratio=<span class="number">3</span>,</span><br><span class="line">               color=<span class="string">"g"</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/86.png" style="zoom:100%;"></p>
<p>传入一些字典，自定义图画：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sns.jointplot(</span><br><span class="line">			<span class="string">"petal_length"</span>,</span><br><span class="line">			<span class="string">"sepal_length"</span>,</span><br><span class="line">            data=iris,</span><br><span class="line">            marginal_kws=dict(bins=<span class="number">15</span>, rug=<span class="literal">True</span>),</span><br><span class="line">            annot_kws=dict(stat=<span class="string">"r"</span>),</span><br><span class="line">            s=<span class="number">40</span>, </span><br><span class="line">            edgecolor=<span class="string">"w"</span>,</span><br><span class="line">            linewidth=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/87.png" style="zoom:100%;"></p>
<h2 id="Pair-grids"><a href="#Pair-grids" class="headerlink" title="Pair grids"></a>Pair grids</h2><h3 id="pairplot-二元分布图"><a href="#pairplot-二元分布图" class="headerlink" title="pairplot() 二元分布图"></a>pairplot() 二元分布图</h3><p>pairplot中pair是成对的意思，pairplot主要展现的是变量两两之间的关系（线性或非线性，有无较为明显的相关关系）</p>
<p><strong>主对角线是数据集中每一个数值型数据列的直方图（反映数量）。所以说，这个函数只对数值型的列应用。还有，上图中每一个列的其他图都代表数据集中的一个变量跟其他每一个变量的分布情况。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">seaborn.pairplot(</span><br><span class="line">	data,</span><br><span class="line">	hue=<span class="literal">None</span>, </span><br><span class="line">	hue_order=<span class="literal">None</span>,</span><br><span class="line">    palette=<span class="literal">None</span>,</span><br><span class="line">    vars=<span class="literal">None</span>,   </span><br><span class="line">    x_vars=<span class="literal">None</span>,</span><br><span class="line">    y_vars=<span class="literal">None</span>,  </span><br><span class="line">    kind=<span class="string">'scatter'</span>,</span><br><span class="line">    diag_kind=<span class="string">'auto'</span>,</span><br><span class="line">    markers=<span class="literal">None</span>, </span><br><span class="line">    height=<span class="number">2.5</span>,</span><br><span class="line">    aspect=<span class="number">1</span>,</span><br><span class="line">    corner=<span class="literal">False</span>, </span><br><span class="line">    dropna=<span class="literal">True</span>,</span><br><span class="line">    plot_kws=<span class="literal">None</span>,</span><br><span class="line">    diag_kws=<span class="literal">None</span>,</span><br><span class="line">    grid_kws=<span class="literal">None</span>,</span><br><span class="line">    size=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>
<p><strong>data</strong>: DataFrame</p>
<p>Tidy (long-form) dataframe where each column is a variable and each row is an observation.</p>
<p><strong>hue</strong>: string (variable name), optional 针对某一字段进行分类</p>
<p>Variable in <code>data</code> to map plot aspects to different colors.</p>
<p><strong>hue_order</strong>: list of strings</p>
<p>Order for the levels of the hue variable in the palette</p>
<p><strong>palette</strong>: dict or seaborn color palette</p>
<p>Set of colors for mapping the <code>hue</code> variable. If a dict, keys should be values  in the <code>hue</code> variable.</p>
<p><strong>vars</strong>: list of variable names, optional 选择数据中的特定字段，以<code>list</code>形式传入</p>
<p>Variables within <code>data</code> to use, otherwise use every column with a numeric datatype.</p>
<p><strong>{x, y}_vars</strong>: lists of variable names, optional 选择数据中的特定字段，以<code>list</code>形式传入</p>
<p>Variables within <code>data</code> to use separately for the rows and columns of the figure; i.e. to make a non-square plot.</p>
<p><strong>kind</strong>: {‘scatter’, ‘reg’}, optional 用于控制非对角线上的图的类型</p>
<p>Kind of plot for the non-identity relationships.</p>
<p>将 <code>kind</code> 参数设置为 <code>&quot;reg&quot;</code> 会为非对角线上的散点图拟合出一条回归直线，更直观地显示变量之间的关系</p>
<p><strong>diag_kind</strong>: {‘auto’, ‘hist’, ‘kde’, None}, optional 控制对角线上的图的类型</p>
<p>Kind of plot for the diagonal subplots. The default depends on whether <code>&quot;hue&quot;</code> is used or not.</p>
<p><strong>markers</strong>: single matplotlib marker code or list, optional 控制散点的样式</p>
<p>Either the marker to use for all datapoints or a list of markers with a length the same as the number of levels in the hue variable so that differently colored points will also have different scatterplot markers.</p>
<p><strong>height</strong>: scalar, optional</p>
<p>Height (in inches) of each facet.</p>
<p><strong>aspect</strong>: scalar, optional</p>
<p>Aspect * height gives the width (in inches) of each facet.</p>
<p><strong>corner</strong>: bool, optional</p>
<p>If True, don’t add axes to the upper (off-diagonal) triangle of the grid, making this a “corner” plot.</p>
<p><strong>dropna</strong>: boolean, optional</p>
<p>Drop missing values from the data before plotting.</p>
<p><strong>{plot, diag, grid}_kws</strong>: dicts, optional plot_kws用于控制非对角线上的图的样式 diag_kws用于控制对角线上图的样式</p>
<p>Dictionaries of keyword arguments. <code>plot_kws</code> are passed to the bivariate plotting function, <code>diag_kws</code> are passed to the univariate plotting function, and <code>grid_kws</code> are passed to the <a href="http://seaborn.pydata.org/generated/seaborn.PairGrid.html#seaborn.PairGrid" target="_blank" rel="noopener"><code>PairGrid</code></a> constructor.</p>
<p>这次我们选择鸢尾花数据集。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">sepal_length</th>
<th style="text-align:right">sepal_width</th>
<th style="text-align:right">petal_length</th>
<th style="text-align:right">petal_width</th>
<th>species</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">5.1</td>
<td style="text-align:right">3.5</td>
<td style="text-align:right">1.4</td>
<td style="text-align:right">0.2</td>
<td>setosa</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">4.9</td>
<td style="text-align:right">3.0</td>
<td style="text-align:right">1.4</td>
<td style="text-align:right">0.2</td>
<td>setosa</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">4.7</td>
<td style="text-align:right">3.2</td>
<td style="text-align:right">1.3</td>
<td style="text-align:right">0.2</td>
<td>setosa</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">4.6</td>
<td style="text-align:right">3.1</td>
<td style="text-align:right">1.5</td>
<td style="text-align:right">0.2</td>
<td>setosa</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">5.0</td>
<td style="text-align:right">3.6</td>
<td style="text-align:right">1.4</td>
<td style="text-align:right">0.2</td>
<td>setosa</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns  </span><br><span class="line">sns.set(style=<span class="string">"ticks"</span>, color_codes=<span class="literal">True</span>)</span><br><span class="line">iris = sns.load_dataset(<span class="string">"iris"</span>)</span><br><span class="line">sns.pairplot(iris)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/89.png" style="zoom:100%;"></p>
<p>我们给hue传入参数，那么pairplot就会根据species自动分类</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.pairplot(iris, hue=<span class="string">"species"</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/90.png" style="zoom:100%;"></p>
<p>切换配色</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.pairplot(iris, hue=<span class="string">"species"</span>, palette=<span class="string">"husl"</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/91.png" style="zoom:100%;"></p>
<p>给不同种类的花卉用上不同种类的标记：圆形，正方形，菱形</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.pairplot(iris, hue=<span class="string">"species"</span>, markers=[<span class="string">"o"</span>, <span class="string">"s"</span>, <span class="string">"D"</span>])</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/92.png" style="zoom:100%;"></p>
<p>只选择四个维度中的两个维度来画一个子图</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.pairplot(iris, vars=[<span class="string">"sepal_width"</span>, <span class="string">"sepal_length"</span>])</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/93.png" style="zoom:100%;"></p>
<p>用height属性设置图画的大小</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.pairplot(iris, height=<span class="number">3</span>,vars=[<span class="string">"sepal_width"</span>, <span class="string">"sepal_length"</span>])</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/94.png" style="zoom:100%;"></p>
<p> 选择数据中的特定字段进行绘图</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sns.pairplot(</span><br><span class="line">iris,</span><br><span class="line">x_vars=[<span class="string">"sepal_width"</span>, <span class="string">"sepal_length"</span>],</span><br><span class="line">y_vars=[<span class="string">"petal_width"</span>, <span class="string">"petal_length"</span>])</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/95.png" style="zoom:100%;"></p>
<p>只画出下三角</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.pairplot(iris, corner=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/96.png" style="zoom:100%;"></p>
<p>将diag_kind 设置成核密度图，改变对角线上的图形样式</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.pairplot(iris, diag_kind=<span class="string">"kde"</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/97.png" style="zoom:100%;"></p>
<p>把非对角线上的图形改成 regplot，也就是绘画出一条回归直线</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sns.pairplot(iris, kind=<span class="string">"reg"</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/98.png" style="zoom:100%;"></p>
<p>Pass keyword arguments down to the underlying functions (it may be easier to use <a href="http://seaborn.pydata.org/generated/seaborn.PairGrid.html#seaborn.PairGrid" target="_blank" rel="noopener"><code>PairGrid</code></a> directly):</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sns.pairplot(</span><br><span class="line">iris, </span><br><span class="line">diag_kind=<span class="string">"kde"</span>, </span><br><span class="line">markers=<span class="string">"+"</span>,</span><br><span class="line">plot_kws=dict(s=<span class="number">50</span>, edgecolor=<span class="string">"b"</span>, linewidth=<span class="number">1</span>),</span><br><span class="line">diag_kws=dict(shade=<span class="literal">True</span>))</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/99.png" style="zoom:100%;"></p>
<h2 id="Regression-plots"><a href="#Regression-plots" class="headerlink" title="Regression plots"></a>Regression plots</h2><h3 id="regplot-可视化线性回归关系"><a href="#regplot-可视化线性回归关系" class="headerlink" title="regplot: 可视化线性回归关系"></a>regplot: 可视化线性回归关系</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">seaborn.regplot(</span><br><span class="line">	x,</span><br><span class="line">    y,</span><br><span class="line">    data=<span class="literal">None</span>,</span><br><span class="line">    x_estimator=<span class="literal">None</span>, </span><br><span class="line">    x_bins=<span class="literal">None</span>, </span><br><span class="line">    x_ci=<span class="string">'ci'</span>, </span><br><span class="line">    scatter=<span class="literal">True</span>, </span><br><span class="line">    fit_reg=<span class="literal">True</span>,</span><br><span class="line">    ci=<span class="number">95</span>,</span><br><span class="line">    n_boot=<span class="number">1000</span>,</span><br><span class="line">    units=<span class="literal">None</span>,</span><br><span class="line">    seed=<span class="literal">None</span>, </span><br><span class="line">    order=<span class="number">1</span>, </span><br><span class="line">    logistic=<span class="literal">False</span>,</span><br><span class="line">    lowess=<span class="literal">False</span>,</span><br><span class="line">    robust=<span class="literal">False</span>, </span><br><span class="line">    logx=<span class="literal">False</span>,</span><br><span class="line">    x_partial=<span class="literal">None</span>, </span><br><span class="line">    y_partial=<span class="literal">None</span>, </span><br><span class="line">    truncate=<span class="literal">True</span>,</span><br><span class="line">    dropna=<span class="literal">True</span>,</span><br><span class="line">    x_jitter=<span class="literal">None</span>,</span><br><span class="line">    y_jitter=<span class="literal">None</span>,</span><br><span class="line">    label=<span class="literal">None</span>, </span><br><span class="line">    color=<span class="literal">None</span>,</span><br><span class="line">    marker=<span class="string">'o'</span>,</span><br><span class="line">    scatter_kws=<span class="literal">None</span>,</span><br><span class="line">    line_kws=<span class="literal">None</span>,</span><br><span class="line">    ax=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>x, y: string, series, or vector array</strong></p>
<p>Input variables. If strings, these should correspond with column names in <code>data</code>. When pandas objects are used, axes will be labeled with the series name.</p>
</li>
<li><p><strong>data : </strong> DataFrame</p>
<p>Tidy (“long-form”) dataframe where each column is a variable and each row is an observation.</p>
</li>
<li><p><strong>x_estimator : </strong>callable that maps vector -&gt; scalar, optional 传入一个函数</p>
<p>Apply this function to each unique value of <code>x</code> and plot the resulting estimate. This is useful when <code>x</code> is a discrete variable. If <code>x_ci</code> is given, this estimate will be bootstrapped and a confidence interval will be drawn.</p>
<p>这个函数对每一个x计算估计值并绘制。</p>
</li>
<li><p><strong>x_bins : </strong>int or vector, optional</p>
<p>将<code>x</code>变量分为离散的bin，然后估计中心趋势和置信区间。这种操作仅影响散点图的绘制方式；回归仍然适合原始数据。  This parameter is interpreted either as the number of evenly-sized (not necessary spaced) bins or the positions of the bin centers. When this parameter is used, it implies that the default of <code>x_estimator</code> is <code>numpy.mean</code>.</p>
</li>
<li><p><strong>x_ci : </strong>“ci”, “sd”, int in [0, 100] or None, optional</p>
<p>Size of the confidence interval used when plotting a central tendency for discrete values of <code>x</code>. If <code>&quot;ci&quot;</code>, defer to the value of the <code>ci</code> parameter. </p>
<p>If <code>&quot;sd&quot;</code>, skip bootstrapping and show the standard deviation of the observations in each bin.</p>
</li>
<li><p><strong>scatter : </strong>bool, optional</p>
<p>If <code>True</code>, draw a scatterplot with the underlying observations (or the <code>x_estimator</code> values).</p>
</li>
<li><p><strong>fit_reg : </strong>bool, optional</p>
<p>如果为<code>True</code>，则估计并绘制与<code>x</code> 和<code>y</code>变量相关的回归模型。</p>
</li>
<li><p><strong>ci : </strong> int in [0, 100] or None, optional</p>
<p>Size of the <strong>confidence interval</strong> for the regression estimate. This will be drawn using translucent bands around the regression line. The confidence interval is estimated using a bootstrap; for large datasets, it may be advisable to avoid that computation by setting this parameter to None.</p>
</li>
<li><p><strong>n_boot : </strong>int, optional</p>
<p>Number of bootstrap resamples used to estimate the <code>ci</code>. The default value attempts to balance time and stability; you may want to increase this value for “final” versions of plots.</p>
</li>
<li><p><strong>units : </strong>variable name in <code>data</code>, optional</p>
<p>If the <code>x</code> and <code>y</code> observations are nested within sampling units, those can be specified here. This will be taken into account when computing the confidence intervals by performing a multilevel bootstrap that resamples both units and observations (within unit). This does not otherwise influence how the regression is estimated or drawn.</p>
</li>
<li><p><strong>seed : </strong>int, numpy.random.Generator, or numpy.random.RandomState, optional</p>
<p>随机数生成器</p>
</li>
<li><p><strong>order : </strong>int, optional</p>
<p>If <code>order</code> is greater than 1, use <code>numpy.polyfit</code> to estimate a polynomial regression.</p>
</li>
<li><p><strong>logistic: </strong>bool, optional</p>
<p>If <code>True</code>, assume that <code>y</code> is a binary variable and use <code>statsmodels</code> to estimate a logistic regression model. Note that this is substantially more computationally intensive than linear regression, so you may wish to decrease the number of bootstrap resamples (<code>n_boot</code>) or set <code>ci</code> to None.</p>
</li>
<li><p><strong>lowess : </strong>bool, optional</p>
<p>If <code>True</code>, use <code>statsmodels</code> to estimate a nonparametric lowess model (locally weighted linear regression). Note that confidence intervals cannot currently be drawn for this kind of model.</p>
</li>
<li><p><strong>robust : </strong>bool, optional</p>
<p>If <code>True</code>, use <code>statsmodels</code> to estimate a robust regression. This will de-weight outliers. Note that this is substantially more computationally intensive than standard linear regression, so you may wish to decrease the number of bootstrap resamples (<code>n_boot</code>) or set <code>ci</code> to None.</p>
</li>
<li><p><strong>logx : </strong>bool, optional</p>
<p>如果为<code>True</code>，则估计形式为y〜log（x）的线性回归，但在输入空间中绘制散点图和回归模型。请注意，这 <code>x</code>必须是正的。</p>
</li>
<li><p><strong>{x,y}_partial : </strong>strings in <code>data</code> or matrices</p>
<p>Confounding variables to regress out of the <code>x</code> or <code>y</code> variables before plotting.</p>
</li>
<li><p><strong>truncate : </strong>bool, optional</p>
<p>If <code>True</code>, the regression line is bounded by the data limits. If <code>False</code>, it extends to the <code>x</code> axis limits.</p>
</li>
<li><p><strong>{x,y}_jitter : </strong>floats, optional</p>
<p>Add uniform random noise of this size to either the <code>x</code> or <code>y</code> variables. The noise is added to a copy of the data after fitting the regression, and only influences the look of the scatterplot. This can be helpful when plotting variables that take discrete values.</p>
</li>
<li><p><strong>label : </strong>string</p>
<p>应用于散点图或回归线（如果<code>scatter</code>为<code>False</code>）的标签，以用于图例。</p>
</li>
<li><p><strong>color : </strong>matplotlib color</p>
<p>Color to apply to all plot elements; will be superseded by colors passed in <code>scatter_kws</code> or <code>line_kws</code>.</p>
</li>
<li><p><strong>marker : </strong>matplotlib marker code</p>
<p>Marker to use for the scatterplot glyphs.</p>
</li>
<li><p><strong>{scatter,line}_kws  : </strong>dictionaries</p>
<p>Additional keyword arguments to pass to <code>plt.scatter</code> and <code>plt.plot</code>.</p>
</li>
<li><p><strong>ax : </strong>matplotlib Axes, optional</p>
<p>Axes object to draw the plot onto, otherwise uses the current Axes.</p>
</li>
</ul>
<p>Plot the relationship between two variables in a DataFrame:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns; sns.set(color_codes=<span class="literal">True</span>)</span><br><span class="line">tips = sns.load_dataset(<span class="string">"tips"</span>)</span><br><span class="line">ax = sns.regplot(x=<span class="string">"total_bill"</span>, y=<span class="string">"tip"</span>, data=tips)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/100.png" style="zoom:100%;"></p>
<p>Plot with two variables defined as numpy arrays; use a different color:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np; np.random.seed(<span class="number">8</span>)</span><br><span class="line">mean, cov = [<span class="number">4</span>, <span class="number">6</span>], [(<span class="number">1.5</span>, <span class="number">.7</span>), (<span class="number">.7</span>, <span class="number">1</span>)]</span><br><span class="line">x, y = np.random.multivariate_normal(mean, cov, <span class="number">80</span>).T</span><br><span class="line">ax = sns.regplot(x=x, y=y, color=<span class="string">"g"</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/101.png" style="zoom:100%;"></p>
<p>Plot with two variables defined as pandas Series; use a different marker:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">x, y = pd.Series(x, name=<span class="string">"x_var"</span>), pd.Series(y, name=<span class="string">"y_var"</span>)</span><br><span class="line">ax = sns.regplot(x=x, y=y, marker=<span class="string">"+"</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/102.png" style="zoom:100%;"></p>
<p>Use a 68% confidence interval, which corresponds with the standard error of the estimate, and extend the regression line to the axis limits:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ax = sns.regplot(x=x, y=y, ci=<span class="number">68</span>, truncate= <span class="literal">False</span> )</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/103.png" style="zoom:100%;"></p>
<p>Plot with a discrete <code>x</code> variable and add some jitter:加入一些偏移量</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ax = sns.regplot(x=<span class="string">"size"</span>, y=<span class="string">"total_bill"</span>, data=tips, x_jitter=<span class="number">.1</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/104.png" style="zoom:100%;"></p>
<p>Plot with a discrete <code>x</code> variable showing means and confidence intervals for unique values:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ax = sns.regplot(</span><br><span class="line">	x=<span class="string">"size"</span>,</span><br><span class="line">    y=<span class="string">"total_bill"</span>,</span><br><span class="line">    data=tips,</span><br><span class="line">    x_estimator=np.mean)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/105.png" style="zoom:100%;"></p>
<p>把连续的变量转到离散的bins中</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ax = sns.regplot(x=x, y=y, x_bins=<span class="number">4</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/106.png" style="zoom:100%;"></p>
<p>Fit a higher-order polynomial regression:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ans = sns.load_dataset(<span class="string">"anscombe"</span>)</span><br><span class="line">ax = sns.regplot(</span><br><span class="line">    x=<span class="string">"x"</span>, </span><br><span class="line">	y=<span class="string">"y"</span>,</span><br><span class="line">    data=ans.loc[ans.dataset == <span class="string">"II"</span>],</span><br><span class="line">    scatter_kws=&#123;<span class="string">"s"</span>: <span class="number">80</span>&#125;,</span><br><span class="line">    order=<span class="number">2</span>, ci=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/107.png" style="zoom:100%;"></p>
<p>Fit a robust regression and don’t plot a confidence interval:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ax = sns.regplot(</span><br><span class="line">    x=<span class="string">"x"</span>, </span><br><span class="line">    y=<span class="string">"y"</span>, </span><br><span class="line">    data=ans.loc[ans.dataset == <span class="string">"III"</span>],</span><br><span class="line">    scatter_kws=&#123;<span class="string">"s"</span>: <span class="number">80</span>&#125;,</span><br><span class="line">    robust=<span class="literal">True</span>, ci=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/108.png" style="zoom:100%;"></p>
<p>Fit a logistic regression; jitter the y variable and use fewer bootstrap iterations:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">tips[<span class="string">"big_tip"</span>] = (tips.tip / tips.total_bill) &gt; <span class="number">.175</span></span><br><span class="line">ax = sns.regplot(</span><br><span class="line">	x=<span class="string">"total_bill"</span>,</span><br><span class="line">    y=<span class="string">"big_tip"</span>, </span><br><span class="line">    data=tips,</span><br><span class="line">    logistic=<span class="literal">True</span>,</span><br><span class="line">    n_boot=<span class="number">500</span>,</span><br><span class="line">    y_jitter=<span class="number">.03</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/109.png" style="zoom:100%;"></p>
<p>Fit the regression model using log(x):</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ax = sns.regplot(</span><br><span class="line">	x=<span class="string">"size"</span>,</span><br><span class="line">    y=<span class="string">"total_bill"</span>,</span><br><span class="line">    data=tips,</span><br><span class="line">    x_estimator=np.mean, </span><br><span class="line">    logx=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/110.png" style="zoom:100%;"></p>
<h2 id="Matrix-plots"><a href="#Matrix-plots" class="headerlink" title="Matrix plots"></a>Matrix plots</h2><p>热力图在实际中常用于展示一组变量的相关系数矩阵，在展示列联表的数据分布上也有较大的用途，通过热力图我们可以非常直观地感受到数值大小的差异状况。heatmap的API如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">seaborn.heatmap(</span><br><span class="line">	data,</span><br><span class="line">    vmin=<span class="literal">None</span>, </span><br><span class="line">    vmax=<span class="literal">None</span>,</span><br><span class="line">    cmap=<span class="literal">None</span>,</span><br><span class="line">    center=<span class="literal">None</span>, </span><br><span class="line">    robust=<span class="literal">False</span>, </span><br><span class="line">    annot=<span class="literal">None</span>,</span><br><span class="line">    fmt=<span class="string">'.2g'</span>, </span><br><span class="line">    annot_kws=<span class="literal">None</span>, </span><br><span class="line">    linewidths=<span class="number">0</span>, </span><br><span class="line">    linecolor=<span class="string">'white'</span>,</span><br><span class="line">    cbar=<span class="literal">True</span>,</span><br><span class="line">    cbar_kws=<span class="literal">None</span>, </span><br><span class="line">    cbar_ax=<span class="literal">None</span>,</span><br><span class="line">    square=<span class="literal">False</span>, </span><br><span class="line">    xticklabels=<span class="string">'auto'</span>, </span><br><span class="line">    yticklabels=<span class="string">'auto'</span>,</span><br><span class="line">    mask=<span class="literal">None</span>, </span><br><span class="line">    ax=<span class="literal">None</span>,</span><br><span class="line">    **kwargs)</span><br></pre></td></tr></table></figure>
<p>Parameters</p>
<ul>
<li><p><strong>data ： </strong>rectangular dataset</p>
<p>2D dataset that can be coerced into an ndarray. If a Pandas DataFrame is provided, the index/column information will be used to label the columns and rows.</p>
</li>
<li><p><strong>vmin, vmax ：</strong>floats, optional <strong>设置颜色带的最大值、最小值</strong></p>
<p>Values to anchor the colormap, otherwise they are inferred from the data and other keyword arguments.</p>
</li>
<li><p><strong>cmap ：</strong>matplotlib colormap name or object, or list of colors, optional  <strong>设置颜色带的色系</strong></p>
<p>The mapping from data values to color space. If not provided, the default will depend on whether <code>center</code> is set.</p>
</li>
<li><p><strong>center ：</strong>float, optional <strong>设置颜色带的分界线</strong></p>
<p>The value at which to center the colormap when plotting divergant data. Using this parameter will change the default <code>cmap</code> if none is specified.</p>
</li>
<li><p><strong>robust：</strong>bool, optional</p>
<p>If True and <code>vmin</code> or <code>vmax</code> are absent, the colormap range is computed with robust quantiles instead of the extreme values.</p>
</li>
<li><p><strong>annot ：</strong>bool or rectangular dataset, optional <strong>是否显示数值注释</strong></p>
<p>If True, write the data value in each cell. If an array-like with the same shape as <code>data</code>, then use this to annotate the heatmap instead of the data. Note that DataFrames will match on position, not index.</p>
</li>
<li><p><strong>fmt ：</strong>string, optional <strong>format的缩写，设置数值的格式化形式</strong></p>
<p>String formatting code to use when adding annotations.</p>
</li>
<li><p><strong>annot_kws :</strong>dict of key, value mappings, optional</p>
<p>Keyword arguments for <code>ax.text</code> when <code>annot</code> is True.</p>
</li>
<li><p><strong>linewidths : </strong>float, optional <strong>控制每个小方格之间的间距</strong></p>
<p>Width of the lines that will divide each cell.</p>
</li>
<li><p><strong>linecolor : </strong>color, optional <strong>控制分割线的颜色</strong></p>
<p>Color of the lines that will divide each cell.</p>
</li>
<li><p><strong>cbar : </strong>boolean, optional <strong>是否需要画颜色带</strong></p>
<p>Whether to draw a colorbar.</p>
</li>
<li><p><strong>cbar_kws : </strong>dict of key, value mappings, optional <strong>关于颜色带的设置</strong></p>
<p>Keyword arguments for fig.colorbar.</p>
</li>
<li><p><strong>cbar_ax :</strong>matplotlib Axes, optional</p>
<p>Axes in which to draw the colorbar, otherwise take space from the main Axes.</p>
</li>
<li><p><strong>square : </strong>boolean, optional</p>
<p>If True, set the Axes aspect to “equal” so each cell will be square-shaped.</p>
</li>
<li><p><strong>xticklabels, yticklabels : </strong>“auto”, bool, list-like, or int, optional</p>
<p>If True, plot the column names of the dataframe. If False, don’t plot the column names. If list-like, plot these alternate labels as the xticklabels. If an integer, use the column names but plot only every n label. If “auto”, try to densely plot non-overlapping labels.</p>
</li>
<li><p><strong>mask : </strong>boolean array or DataFrame, optional </p>
<p>传入布尔型矩阵，若为矩阵内为True，则热力图相应的位置的数据将会被屏蔽掉（常用在绘制相关系数矩阵图）</p>
</li>
<li><p><strong>ax : </strong>matplotlib Axes, optional</p>
<p>Axes in which to draw the plot, otherwise use the currently-active Axes.</p>
</li>
<li><p><strong>kwargs :</strong>other keyword arguments</p>
<p>All other keyword arguments are passed to <code>matplotlib.axes.Axes.pcolormesh()</code>.</p>
</li>
</ul>
<p>Plot a heatmap for a numpy array:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np; np.random.seed(<span class="number">0</span>)</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns; sns.set()</span><br><span class="line">uniform_data = np.random.rand(<span class="number">10</span>, <span class="number">12</span>)</span><br><span class="line">ax = sns.heatmap(uniform_data)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/y.png" style="zoom:100%;"></p>
<p>Change the limits of the colormap:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ax = sns.heatmap(uniform_data, vmin=<span class="number">0</span>, vmax=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/x.png" style="zoom:100%;"></p>
<p>Plot a heatmap for data centered on 0 with a diverging colormap:</p>
<p>center 改变，颜色带上的颜色也会随之改变，所以热力图上的方块颜色也会随之改变。和 cmap 不同，cmap是切换颜色带，但是center是在同一个颜色带上滑动</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">normal_data = np.random.randn(<span class="number">10</span>, <span class="number">12</span>)</span><br><span class="line">ax = sns.heatmap(normal_data, center=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/112.png" style="zoom:100%;"></p>
<p>我们使用数据集 flights 来做下面的热力图</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:right">year</th>
<th style="text-align:right">1949</th>
<th style="text-align:right">1950</th>
<th style="text-align:right">1951</th>
<th style="text-align:right">1952</th>
<th style="text-align:right">1953</th>
<th style="text-align:right">1954</th>
<th style="text-align:right">1955</th>
<th style="text-align:right">1956</th>
<th style="text-align:right">1957</th>
<th style="text-align:right">1958</th>
<th style="text-align:right">1959</th>
<th style="text-align:right">1960</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">month</td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">January</td>
<td style="text-align:right">112</td>
<td style="text-align:right">115</td>
<td style="text-align:right">145</td>
<td style="text-align:right">171</td>
<td style="text-align:right">196</td>
<td style="text-align:right">204</td>
<td style="text-align:right">242</td>
<td style="text-align:right">284</td>
<td style="text-align:right">315</td>
<td style="text-align:right">340</td>
<td style="text-align:right">360</td>
<td style="text-align:right">417</td>
</tr>
<tr>
<td style="text-align:right">February</td>
<td style="text-align:right">118</td>
<td style="text-align:right">126</td>
<td style="text-align:right">150</td>
<td style="text-align:right">180</td>
<td style="text-align:right">196</td>
<td style="text-align:right">188</td>
<td style="text-align:right">233</td>
<td style="text-align:right">277</td>
<td style="text-align:right">301</td>
<td style="text-align:right">318</td>
<td style="text-align:right">342</td>
<td style="text-align:right">391</td>
</tr>
<tr>
<td style="text-align:right">March</td>
<td style="text-align:right">132</td>
<td style="text-align:right">141</td>
<td style="text-align:right">178</td>
<td style="text-align:right">193</td>
<td style="text-align:right">236</td>
<td style="text-align:right">235</td>
<td style="text-align:right">267</td>
<td style="text-align:right">317</td>
<td style="text-align:right">356</td>
<td style="text-align:right">362</td>
<td style="text-align:right">406</td>
<td style="text-align:right">419</td>
</tr>
<tr>
<td style="text-align:right">April</td>
<td style="text-align:right">129</td>
<td style="text-align:right">135</td>
<td style="text-align:right">163</td>
<td style="text-align:right">181</td>
<td style="text-align:right">235</td>
<td style="text-align:right">227</td>
<td style="text-align:right">269</td>
<td style="text-align:right">313</td>
<td style="text-align:right">348</td>
<td style="text-align:right">348</td>
<td style="text-align:right">396</td>
<td style="text-align:right">461</td>
</tr>
<tr>
<td style="text-align:right">May</td>
<td style="text-align:right">121</td>
<td style="text-align:right">125</td>
<td style="text-align:right">172</td>
<td style="text-align:right">183</td>
<td style="text-align:right">229</td>
<td style="text-align:right">234</td>
<td style="text-align:right">270</td>
<td style="text-align:right">318</td>
<td style="text-align:right">355</td>
<td style="text-align:right">363</td>
<td style="text-align:right">420</td>
<td style="text-align:right">472</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">flights = sns.load_dataset(<span class="string">"flights"</span>)</span><br><span class="line">flights = flights.pivot(<span class="string">"month"</span>, <span class="string">"year"</span>, <span class="string">"passengers"</span>)</span><br><span class="line">ax = sns.heatmap(flights)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/113.png" style="zoom:100%;"></p>
<p>Annotate each cell with the numeric value using integer formatting:</p>
<p>如果不把fmt设置为d，那么方格中的数据就会使密密麻麻的科学计数法了</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ax = sns.heatmap(flights, annot=<span class="literal">True</span>, fmt=<span class="string">"d"</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/114.png" style="zoom:100%;"></p>
<p>Add lines between each cell:控制每个小方格之间的间距</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ax = sns.heatmap(flights, linewidths=<span class="number">.5</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/115.png" style="zoom:100%;"></p>
<p>Use a different colormap: 设置颜色带的色系</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ax = sns.heatmap(flights, cmap=<span class="string">"YlGnBu"</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/116.png" style="zoom:100%;"></p>
<p>Center the colormap at a specific value:</p>
<p>这里，把center颜色带的中间颜色设置成 July，1955 这个坐标上的颜色</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ax = sns.heatmap(flights, center=flights.loc[<span class="string">"July"</span>, <span class="number">1955</span>])</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/117.png" style="zoom:100%;"></p>
<p>Plot every other column label and don’t plot row labels:  不画y轴标签</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data = np.random.randn(<span class="number">50</span>, <span class="number">20</span>)</span><br><span class="line">ax = sns.heatmap(data, xticklabels=<span class="number">2</span>, yticklabels=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/118.png" style="zoom:100%;"></p>
<p>Don’t draw a colorbar: 让颜色条消失</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ax = sns.heatmap(flights, cbar=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/119.png" style="zoom:100%;"></p>
<p>Use different axes for the colorbar: 横向显示颜色帮</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">grid_kws = &#123;<span class="string">"height_ratios"</span>: (<span class="number">.9</span>, <span class="number">.05</span>), <span class="string">"hspace"</span>: <span class="number">.3</span>&#125;</span><br><span class="line">f, (ax, cbar_ax) = plt.subplots(<span class="number">2</span>, gridspec_kw=grid_kws)</span><br><span class="line">ax = sns.heatmap(flights, ax=ax,</span><br><span class="line">                 cbar_ax=cbar_ax,</span><br><span class="line">                 cbar_kws=&#123;<span class="string">"orientation"</span>: <span class="string">"horizontal"</span>&#125;)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/120.png" style="zoom:100%;"></p>
<p>传入布尔型矩阵，若为矩阵内为True，则热力图相应的位置的数据将会被屏蔽掉（常用在绘制相关系数矩阵图）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">corr = np.corrcoef(np.random.randn(<span class="number">10</span>, <span class="number">200</span>))</span><br><span class="line">mask = np.zeros_like(corr)<span class="comment">#以corr的形状生成一个全为0的矩阵 </span></span><br><span class="line">mask[np.triu_indices_from(mask)] = <span class="literal">True</span> <span class="comment">#将mask的对角线及以上设置为True 下三角为0</span></span><br><span class="line"><span class="keyword">with</span> sns.axes_style(<span class="string">"white"</span>):</span><br><span class="line">    f, ax = plt.subplots(figsize=(<span class="number">7</span>, <span class="number">5</span>))</span><br><span class="line">    ax = sns.heatmap(corr, mask=mask, vmax=<span class="number">.3</span>, square=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/111.png" style="zoom:100%;"></p>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/121.png" style="zoom:100%;"></p>
<p>设置 linecolor ,让小方格之间的缝隙呈现灰色</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sns.heatmap(</span><br><span class="line">	data=data,</span><br><span class="line">	annot=<span class="literal">True</span>,</span><br><span class="line">	fmt=<span class="string">"d"</span>,</span><br><span class="line">	linewidths=<span class="number">0.3</span>,</span><br><span class="line">	linecolor=<span class="string">"grey"</span>,</span><br><span class="line">	cmap=<span class="string">"RdBu_r"</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/11/seaborn%E5%9F%BA%E7%A1%80/122.png" style="zoom:100%;"></p>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/07/10/numpy%E5%9F%BA%E7%A1%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/%5Bobject%20Object%5D">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/07/10/numpy%E5%9F%BA%E7%A1%80/" itemprop="url">numpy基础</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-07-10T14:55:36+08:00">
                2020-07-10
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2020-07-13T14:38:30+08:00">
                2020-07-13
              </time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="numpy基础"><a href="#numpy基础" class="headerlink" title="numpy基础"></a>numpy基础</h1><p>教程: <a href="https://www.youtube.com/watch?v=QUT1VHiLmmI" target="_blank" rel="noopener">https://www.youtube.com/watch?v=QUT1VHiLmmI</a></p>
<p>numpy documentation: <a href="https://numpy.org/doc/stable/numpy-user.pdf" target="_blank" rel="noopener">https://numpy.org/doc/stable/numpy-user.pdf</a></p>
<h3 id="What-is-NumPy"><a href="#What-is-NumPy" class="headerlink" title="What is NumPy"></a>What is NumPy</h3><p>NumPy（Numerical Python）是Python的一种开源的数值计算扩展。这种工具可用来存储和处理大型矩阵，比Python自身的嵌套列表（nested list structure)结构要<strong>高效</strong>的多（该结构也可以用来表示矩阵（matrix）），支持大量的维度数组与矩阵运算，此外也针对数组运算提供大量的数学函数库</p>
<h3 id="NumPy-vs-Lists-speed-functionality"><a href="#NumPy-vs-Lists-speed-functionality" class="headerlink" title="NumPy vs Lists (speed, functionality)"></a>NumPy vs Lists (speed, functionality)</h3><p>Numpy 和 python的Lists比起来要快得多</p>
<p>为什么 Numpy更快呢？</p>
<ol>
<li>numpy的许多函数不仅是用C和Fortran实现了，还使用了BLAS（一般Windows下link到MKL的，Linux下link到OpenBLAS）。基本上那些BLAS实现在每种操作上都进行了高度优化.</li>
<li>而且，我们在把一个数字转换成Numpy 和Lists的时候，Numpy只要转换成4bytes，但是转换成list却要生成：Size,Reference Count,Object Type 和Object Value，所以相比起来list占用了更多的空间，numpy读取更少的内存<img src="/2020/07/10/numpy%E5%9F%BA%E7%A1%80/1.png" style="zoom: 67%;"></li>
<li>在Numpy中，遍历时没有对数据的类型检查</li>
<li>在 Numpy中使用连续的内存来存储，但是lists中存储的数据是离散的，以哈希表的方式存储<img src="/2020/07/10/numpy%E5%9F%BA%E7%A1%80/2.png" style="zoom: 67%;">    这样做的好处是：1.SIMD vector Processing (向量编程)2.Effective Cache Utilization(有效的缓存利用率)</li>
</ol>
<h4 id="Differences-Between-Lists-and-Numpy"><a href="#Differences-Between-Lists-and-Numpy" class="headerlink" title="Differences Between Lists and Numpy"></a>Differences Between Lists and Numpy</h4><div class="table-container">
<table>
<thead>
<tr>
<th>Lists</th>
<th>Numpy</th>
</tr>
</thead>
<tbody>
<tr>
<td>Insertion</td>
<td>Insertion</td>
</tr>
<tr>
<td>deletion</td>
<td>deletion</td>
</tr>
<tr>
<td>appending</td>
<td>appending</td>
</tr>
<tr>
<td>concatenation</td>
<td>concatenation</td>
</tr>
<tr>
<td>…</td>
<td><strong>Lots More than Lists!!!</strong></td>
</tr>
</tbody>
</table>
</div>
<p>比如，我们可以对numpy的两个数组进行乘法，但是对两个list进行乘法就会报错：</p>
<p><img src="/2020/07/10/numpy%E5%9F%BA%E7%A1%80/3.png" style="zoom: 110%;"></p>
<p><img src="/2020/07/10/numpy%E5%9F%BA%E7%A1%80/4.png" style="zoom: 140%;"></p>
<h3 id="Applications-of-NumPy"><a href="#Applications-of-NumPy" class="headerlink" title="Applications of NumPy"></a>Applications of NumPy</h3><ul>
<li>我们可以对Numpy进行数学上的操作，用来当作Matlab的替代</li>
<li>我们可以和Matplotlib进行画图操作</li>
<li>用作 Pandas ，Connect 4  这些库的核心</li>
<li>机器学习(神经网络)</li>
</ul>
<h3 id="The-Basics-creating-arrays-shape-size-data-type"><a href="#The-Basics-creating-arrays-shape-size-data-type" class="headerlink" title="The Basics (creating arrays, shape, size, data type)"></a>The Basics (creating arrays, shape, size, data type)</h3><h4 id="creating-arrays"><a href="#creating-arrays" class="headerlink" title="creating arrays"></a>creating arrays</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a = np.array([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>], dtype=<span class="string">'int32'</span>)</span><br><span class="line">print(a)</span><br></pre></td></tr></table></figure>
<pre><code>[1 2 3]
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">b = np.array([[<span class="number">9.0</span>,<span class="number">8.0</span>,<span class="number">7.0</span>],[<span class="number">6.0</span>,<span class="number">5.0</span>,<span class="number">4.0</span>]])</span><br><span class="line">print(b)</span><br></pre></td></tr></table></figure>
<pre><code>[[9. 8. 7.]
[6. 5. 4.]]
</code></pre><h4 id="Get-Dimension"><a href="#Get-Dimension" class="headerlink" title="Get Dimension"></a>Get Dimension</h4><p>用 ndim 获取 numpy array 的维度</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a.ndim</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">b.ndim</span><br><span class="line">2</span><br></pre></td></tr></table></figure>
<h4 id="Get-Shape"><a href="#Get-Shape" class="headerlink" title="Get Shape"></a>Get Shape</h4><p>用 shape 获取当前数组的大小：b是 2x3，2行3列 是二维数组  。a是 (3,) 是一维数组</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">b.shape</span><br><span class="line">(<span class="number">2</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a.shape</span><br><span class="line">(<span class="number">3</span>,)</span><br></pre></td></tr></table></figure>
<h4 id="Get-Type"><a href="#Get-Type" class="headerlink" title="Get Type"></a>Get Type</h4><p>用 dtype 来获取数组中的数据类型</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a.dtype</span><br><span class="line">dtype(<span class="string">'int32'</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">b.dtype</span><br><span class="line">dtype(<span class="string">'float64'</span>)</span><br></pre></td></tr></table></figure>
<h4 id="Get-size"><a href="#Get-size" class="headerlink" title="Get size"></a>Get size</h4><p>itemsize获取数组中每一个元素占了几个字节</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a.itemsize</span><br><span class="line"><span class="number">4</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">b.itemsize</span><br><span class="line"><span class="number">8</span></span><br></pre></td></tr></table></figure>
<h4 id="Get-total-size"><a href="#Get-total-size" class="headerlink" title="Get total size"></a>Get total size</h4><p>nbytes 获取整个数组占用的字节</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a.nbytes</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">b.nbytes</span><br><span class="line"><span class="number">48</span></span><br></pre></td></tr></table></figure>
<h4 id="Get-number-of-elements"><a href="#Get-number-of-elements" class="headerlink" title="Get number of elements"></a>Get number of elements</h4><p>size获取数组当中的元素个数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a.size</span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>
<pre><code>b.size
6
</code></pre><h3 id="Accessing-Changing-Specific-Elements-Rows-Columns-etc-slicing"><a href="#Accessing-Changing-Specific-Elements-Rows-Columns-etc-slicing" class="headerlink" title="Accessing/Changing Specific Elements, Rows, Columns, etc (slicing)"></a>Accessing/Changing Specific Elements, Rows, Columns, etc (slicing)</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a = np.array([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>],[<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>]])</span><br><span class="line">print(a)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[[ <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>]</span><br><span class="line"> [ <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span> <span class="number">11</span> <span class="number">12</span> <span class="number">13</span> <span class="number">14</span>]]</span><br></pre></td></tr></table></figure>
<h4 id="Get-a-specific-element-r-c"><a href="#Get-a-specific-element-r-c" class="headerlink" title="Get a specific element [r, c]"></a>Get a specific element [r, c]</h4><p>我们可以用一个坐标定位一个目标元素</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a[<span class="number">1</span>, <span class="number">5</span>]</span><br><span class="line"><span class="number">13</span></span><br></pre></td></tr></table></figure>
<h4 id="Get-a-specific-row"><a href="#Get-a-specific-row" class="headerlink" title="Get a specific row"></a>Get a specific row</h4><p>用下面这种语法来获取目标行</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a[<span class="number">0</span>, :]</span><br><span class="line">array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>])</span><br></pre></td></tr></table></figure>
<h4 id="Get-a-specific-column"><a href="#Get-a-specific-column" class="headerlink" title="Get a specific column"></a>Get a specific column</h4><p>同样的我们可以获得目标列</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a[:, <span class="number">2</span>]</span><br><span class="line">array([ <span class="number">3</span>, <span class="number">10</span>])</span><br></pre></td></tr></table></figure>
<h4 id="Getting-a-little-more-fancy-startindex-endindex-stepsize"><a href="#Getting-a-little-more-fancy-startindex-endindex-stepsize" class="headerlink" title="Getting a little more fancy [startindex:endindex:stepsize]"></a>Getting a little more fancy [startindex:endindex:stepsize]</h4><p>第一个参数代表第一行，1：-1：2 代表起始点为a[1]，终点为a[6],步长为2 </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a[<span class="number">0</span>, <span class="number">1</span>:<span class="number">-1</span>:<span class="number">2</span>]</span><br><span class="line">array([<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>])</span><br></pre></td></tr></table></figure>
<p>把第二行第六列改成20</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a[<span class="number">1</span>,<span class="number">5</span>] = <span class="number">20</span></span><br><span class="line">[[ <span class="number">1</span>  <span class="number">2</span>  <span class="number">5</span>  <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>]</span><br><span class="line"> [ <span class="number">8</span>  <span class="number">9</span>  <span class="number">5</span> <span class="number">11</span> <span class="number">12</span> <span class="number">20</span> <span class="number">14</span>]]</span><br></pre></td></tr></table></figure>
<p>把第三列改成 [1,2]</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a[:,<span class="number">2</span>] = [<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line">[[ <span class="number">1</span>  <span class="number">2</span>  <span class="number">1</span>  <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>]</span><br><span class="line"> [ <span class="number">8</span>  <span class="number">9</span>  <span class="number">2</span> <span class="number">11</span> <span class="number">12</span> <span class="number">20</span> <span class="number">14</span>]]</span><br></pre></td></tr></table></figure>
<h4 id="三维数组"><a href="#三维数组" class="headerlink" title="三维数组"></a>三维数组</h4><p>我们嵌套两层数组，得到了三维数组</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">b = np.array([[[<span class="number">1</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">4</span>]],[[<span class="number">5</span>,<span class="number">6</span>],[<span class="number">7</span>,<span class="number">8</span>]]])</span><br><span class="line">print(b)</span><br><span class="line">[[[<span class="number">1</span> <span class="number">2</span>]</span><br><span class="line">  [<span class="number">3</span> <span class="number">4</span>]]</span><br><span class="line"></span><br><span class="line"> [[<span class="number">5</span> <span class="number">6</span>]</span><br><span class="line">  [<span class="number">7</span> <span class="number">8</span>]]]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">b = np.array([[[<span class="number">1</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">4</span>]],[[<span class="number">5</span>,<span class="number">6</span>],[<span class="number">7</span>,<span class="number">8</span>]],[[<span class="number">9</span>,<span class="number">10</span>],[<span class="number">10</span>,<span class="number">11</span>]]])</span><br><span class="line">print(b)</span><br><span class="line">[[[ <span class="number">1</span>  <span class="number">2</span>]</span><br><span class="line">  [ <span class="number">3</span>  <span class="number">4</span>]]</span><br><span class="line"></span><br><span class="line"> [[ <span class="number">5</span>  <span class="number">6</span>]</span><br><span class="line">  [ <span class="number">7</span>  <span class="number">8</span>]]</span><br><span class="line"></span><br><span class="line"> [[ <span class="number">9</span> <span class="number">10</span>]</span><br><span class="line">  [<span class="number">10</span> <span class="number">11</span>]]]</span><br></pre></td></tr></table></figure>
<p>获得三维数组中的特定元素</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">b[<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>]</span><br><span class="line"><span class="number">4</span></span><br></pre></td></tr></table></figure>
<p>获取一个维度的元素</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">b[:,<span class="number">1</span>,:]</span><br><span class="line">array([[ <span class="number">3</span>,  <span class="number">4</span>],</span><br><span class="line">       [ <span class="number">7</span>,  <span class="number">8</span>],</span><br><span class="line">       [<span class="number">10</span>, <span class="number">11</span>]])</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">b[:,<span class="number">0</span>,<span class="number">0</span>]</span><br><span class="line">array([<span class="number">1</span>, <span class="number">5</span>, <span class="number">9</span>])</span><br></pre></td></tr></table></figure>
<p>替换一个维度的元素</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">b[:,<span class="number">1</span>,:] = [[<span class="number">9</span>,<span class="number">9</span>],[<span class="number">8</span>,<span class="number">8</span>],[<span class="number">7</span>,<span class="number">7</span>]]</span><br><span class="line">b</span><br><span class="line">array([[[ <span class="number">1</span>,  <span class="number">2</span>],</span><br><span class="line">        [ <span class="number">9</span>,  <span class="number">9</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">5</span>,  <span class="number">6</span>],</span><br><span class="line">        [ <span class="number">8</span>,  <span class="number">8</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">9</span>, <span class="number">10</span>],</span><br><span class="line">        [ <span class="number">7</span>,  <span class="number">7</span>]]])</span><br></pre></td></tr></table></figure>
<h3 id="Initializing-Different-Arrays-1s-0s-full-random-etc…"><a href="#Initializing-Different-Arrays-1s-0s-full-random-etc…" class="headerlink" title="Initializing Different Arrays (1s, 0s, full, random, etc…)"></a>Initializing Different Arrays (1s, 0s, full, random, etc…)</h3><h4 id="All-zeros-matrix"><a href="#All-zeros-matrix" class="headerlink" title="All zeros matrix"></a>All zeros matrix</h4><p>创建一个全是0的矩阵，利用zeros()方法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">np.zeros((<span class="number">2</span>,<span class="number">3</span>))</span><br><span class="line">array([[<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">       [<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>]])</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">np.zeros((<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>))</span><br><span class="line">array([[[<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">        [<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">        [<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">        [<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">        [<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>]]])</span><br></pre></td></tr></table></figure>
<h4 id="All-1s-matrix"><a href="#All-1s-matrix" class="headerlink" title="All 1s matrix"></a>All 1s matrix</h4><p>创建全是1的矩阵</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># </span></span><br><span class="line">np.ones((<span class="number">4</span>,<span class="number">2</span>,<span class="number">2</span>), dtype=<span class="string">'int32'</span>)</span><br><span class="line">array([[[<span class="number">1</span>, <span class="number">1</span>],</span><br><span class="line">        [<span class="number">1</span>, <span class="number">1</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">1</span>, <span class="number">1</span>],</span><br><span class="line">        [<span class="number">1</span>, <span class="number">1</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">1</span>, <span class="number">1</span>],</span><br><span class="line">        [<span class="number">1</span>, <span class="number">1</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">1</span>, <span class="number">1</span>],</span><br><span class="line">        [<span class="number">1</span>, <span class="number">1</span>]]])</span><br></pre></td></tr></table></figure>
<h4 id="Any-other-number"><a href="#Any-other-number" class="headerlink" title="Any other number"></a>Any other number</h4><p>创建全是指定数据的矩阵</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">np.full((<span class="number">2</span>,<span class="number">2</span>), <span class="number">99</span>)</span><br><span class="line">array([[<span class="number">99.</span>, <span class="number">99.</span>],</span><br><span class="line">       [<span class="number">99.</span>, <span class="number">99.</span>]], dtype=float32)</span><br></pre></td></tr></table></figure>
<p><strong>full_like </strong>第一个参数是已经建立的一个数组，然后新建一个大小相同的数组把所有的数据都替换成第二个参数</p>
<p>np.full_like(a,4) = np.full(a.shape,4)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = np.array([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>],[<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>]])</span><br><span class="line">np.full_like(a, <span class="number">4</span>)</span><br><span class="line">array([[<span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>]])</span><br></pre></td></tr></table></figure>
<h4 id="Random-decimal-numbers"><a href="#Random-decimal-numbers" class="headerlink" title="Random decimal numbers"></a>Random decimal numbers</h4><h5 id="random-rand"><a href="#random-rand" class="headerlink" title="random.rand"></a>random.rand</h5><p>创建一个随机的数组 随机数取 0-1</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">np.random.rand(<span class="number">4</span>,<span class="number">2</span>)</span><br><span class="line">array([[<span class="number">0.07805642</span>, <span class="number">0.53385716</span>],</span><br><span class="line">       [<span class="number">0.02494273</span>, <span class="number">0.99955252</span>],</span><br><span class="line">       [<span class="number">0.48588042</span>, <span class="number">0.91247437</span>],</span><br><span class="line">       [<span class="number">0.27779213</span>, <span class="number">0.16597751</span>]])</span><br></pre></td></tr></table></figure>
<h5 id="random-random-sample"><a href="#random-random-sample" class="headerlink" title="random.random_sample"></a>random.random_sample</h5><p>我们利用random_sample 方法，传入一个矩阵的shape，然后numpy会我们往这个shape中填充随机数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">np.random.random_sample(a.shape)</span><br><span class="line">array([[<span class="number">0.92880174</span>, <span class="number">0.99699795</span>, <span class="number">0.48302062</span>, <span class="number">0.30241305</span>, <span class="number">0.99854465</span>,</span><br><span class="line">        <span class="number">0.66126378</span>, <span class="number">0.46142038</span>],</span><br><span class="line">       [<span class="number">0.26466749</span>, <span class="number">0.89392165</span>, <span class="number">0.73333993</span>, <span class="number">0.75751601</span>, <span class="number">0.02252249</span>,</span><br><span class="line">        <span class="number">0.26214715</span>, <span class="number">0.9163327</span> ]])</span><br></pre></td></tr></table></figure>
<h5 id="np-random-randint"><a href="#np-random-randint" class="headerlink" title="np.random.randint"></a>np.random.randint</h5><p>随机整数值，如果只有两个参数，那么就是0 - i-1中的随机数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">np.random.randint(8, size&#x3D;(3,3))</span><br><span class="line">array([[2, 0, 7],</span><br><span class="line">       [2, 4, 4],</span><br><span class="line">       [0, 1, 6]])</span><br></pre></td></tr></table></figure>
<p>如果有三个参数，前面两个参数是整数范围，第三个参数是矩阵大小</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">np.random.randint(<span class="number">-4</span>,<span class="number">8</span>, size=(<span class="number">3</span>,<span class="number">3</span>))</span><br><span class="line">array([[<span class="number">-2</span>, <span class="number">-4</span>, <span class="number">-4</span>],</span><br><span class="line">       [ <span class="number">6</span>,  <span class="number">6</span>,  <span class="number">3</span>],</span><br><span class="line">       [ <span class="number">3</span>,  <span class="number">2</span>,  <span class="number">2</span>]])</span><br></pre></td></tr></table></figure>
<h5 id="random-seed"><a href="#random-seed" class="headerlink" title="random.seed()"></a>random.seed()</h5><p>使随即数据可预测，对于同一个seed，生成的随机数相同</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">np.random.seed(<span class="number">0</span>)</span><br><span class="line">np.random.rand(<span class="number">1</span>)</span><br><span class="line">array([<span class="number">0.5488135</span>])</span><br><span class="line">np.random.seed(<span class="number">1</span>)</span><br><span class="line">np.random.rand(<span class="number">1</span>)</span><br><span class="line">array([<span class="number">0.4359949</span>])</span><br><span class="line">np.random.seed(<span class="number">1</span>)</span><br><span class="line">np.random.rand(<span class="number">1</span>)</span><br><span class="line">array([<span class="number">0.4359949</span>])</span><br></pre></td></tr></table></figure>
<h5 id="random-randn"><a href="#random-randn" class="headerlink" title="random.randn()"></a>random.randn()</h5><p>生成指定维度的服从标准正态分布的随机数，输入参数为维度</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.random.randn(<span class="number">2</span>,<span class="number">4</span>) <span class="comment">#返回一个shape为[2,4]的array，array中的元素服从标准正态分布</span></span><br></pre></td></tr></table></figure>
<h5 id="random-uniform"><a href="#random-uniform" class="headerlink" title="random.uniform()"></a>random.uniform()</h5><p>方法将随机生成下一个实数，它在 <strong>[x, y]</strong> 范围内。第三个参数可选，是生成数据的数量</p>
<h4 id="The-identity-matrix"><a href="#The-identity-matrix" class="headerlink" title="The identity matrix"></a>The identity matrix</h4><p>创建一个标准矩阵，也就是我们说的 $E$ 或者 $I$</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">np.identity(<span class="number">5</span>)</span><br><span class="line">array([[<span class="number">1.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">       [<span class="number">0.</span>, <span class="number">1.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">       [<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">1.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">       [<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">1.</span>, <span class="number">0.</span>],</span><br><span class="line">       [<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>, <span class="number">1.</span>]])</span><br></pre></td></tr></table></figure>
<h4 id="Repeat-an-array"><a href="#Repeat-an-array" class="headerlink" title="Repeat an array"></a>Repeat an array</h4><p>重复一个数组</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">arr = np.array([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]])</span><br><span class="line">r1 = np.repeat(arr,<span class="number">3</span>, axis=<span class="number">0</span>)</span><br><span class="line">print(r1)</span><br><span class="line">[[<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>]</span><br><span class="line"> [<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>]</span><br><span class="line"> [<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>]]</span><br></pre></td></tr></table></figure>
<h3 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h3><p>怎么初始化一个这样的矩阵？？？</p>
<p><img src="/2020/07/10/numpy%E5%9F%BA%E7%A1%80/5.png" style="zoom: 70%;"></p>
<p>首先我们初始化一个 5x5 的全为1的矩阵output</p>
<p>其次我们初始化一个3x3全是0的矩阵z，并把z的中心元素改成9</p>
<p>最后我们把output矩阵中从output[1,1]到output<a href="不包含">-1,-1\</a> 这个 3x3 的子矩阵替换成z</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">output = np.ones((<span class="number">5</span>,<span class="number">5</span>))</span><br><span class="line">print(output)</span><br><span class="line">[[<span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span>]</span><br><span class="line"> [<span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span>]</span><br><span class="line"> [<span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span>]</span><br><span class="line"> [<span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span>]</span><br><span class="line"> [<span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span>]]</span><br><span class="line">z = np.zeros((<span class="number">3</span>,<span class="number">3</span>))</span><br><span class="line">z[<span class="number">1</span>,<span class="number">1</span>] = <span class="number">9</span></span><br><span class="line">print(z)</span><br><span class="line">[[<span class="number">0.</span> <span class="number">0.</span> <span class="number">0.</span>]</span><br><span class="line"> [<span class="number">0.</span> <span class="number">9.</span> <span class="number">0.</span>]</span><br><span class="line"> [<span class="number">0.</span> <span class="number">0.</span> <span class="number">0.</span>]]</span><br><span class="line">output[<span class="number">1</span>:<span class="number">-1</span>,<span class="number">1</span>:<span class="number">-1</span>] = z</span><br><span class="line">print(output)</span><br><span class="line">[[<span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span>]</span><br><span class="line"> [<span class="number">1.</span> <span class="number">0.</span> <span class="number">0.</span> <span class="number">0.</span> <span class="number">1.</span>]</span><br><span class="line"> [<span class="number">1.</span> <span class="number">0.</span> <span class="number">9.</span> <span class="number">0.</span> <span class="number">1.</span>]</span><br><span class="line"> [<span class="number">1.</span> <span class="number">0.</span> <span class="number">0.</span> <span class="number">0.</span> <span class="number">1.</span>]</span><br><span class="line"> [<span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span>]]</span><br></pre></td></tr></table></figure>
<p>框框中的数据的索引怎么有效的表示???</p>
<p><img src="/2020/07/10/numpy%E5%9F%BA%E7%A1%80/6.png" style="zoom: 70%;"></p>
<h4 id="Be-careful-when-copying-arrays"><a href="#Be-careful-when-copying-arrays" class="headerlink" title="Be careful when copying arrays!!!"></a>Be careful when copying arrays!!!</h4><p>如果我们做一个浅拷贝，那么当修改了b之后，a也会随之改变，因为复制给b的是a的地址。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a = np.array([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line">b = a </span><br><span class="line">b[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line">print(a)</span><br><span class="line">[<span class="number">100</span> <span class="number">2</span> <span class="number">3</span>]</span><br></pre></td></tr></table></figure>
<p>所以我们需要用到copy()方法，这是一个深拷贝，也就是另外申请一段内存给b，然后把a中的值拷贝给b</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a = np.array([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line">b = a.copy()</span><br><span class="line">b[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line">print(a)</span><br><span class="line">[<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>]</span><br></pre></td></tr></table></figure>
<h3 id="Basic-Mathematics-arithmetic-trigonometry-etc"><a href="#Basic-Mathematics-arithmetic-trigonometry-etc" class="headerlink" title="Basic Mathematics (arithmetic, trigonometry, etc.)"></a>Basic Mathematics (arithmetic, trigonometry, etc.)</h3><p><a href="https://blog.csdn.net/marukoheart/article/details/88091409?utm_medium=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.compare&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.compare" target="_blank" rel="noopener">Numpy中的行列维度，axis=0，1，2判断</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">A &#x3D; np.array([1, 2, 3, 4, 5, 6])</span><br><span class="line">print(A.sum(axis &#x3D; 0))</span><br><span class="line">&gt;&gt;&gt;21</span><br><span class="line"></span><br><span class="line">B &#x3D; np.array([[1, 2], [3, 4], [5, 6]])</span><br><span class="line">print(B.sum(axis &#x3D; 0))</span><br><span class="line">&gt;&gt;&gt;[ 9 12]		# [1,2] + [3, 4] +[5, 6] &#x3D; [9, 12]  每一行的和</span><br><span class="line">print(B.sum(axis &#x3D; 1))</span><br><span class="line">&gt;&gt;&gt;[ 3  7 11]		#[1, 3, 5] + [2, 4, 6] &#x3D; [3, 7, 11] 每一列的和</span><br><span class="line"></span><br><span class="line">C &#x3D; np.array([[[1], [2]], [[3], [4]], [[5], [6]]])</span><br><span class="line">print(C.sum(axis &#x3D; 0))</span><br><span class="line">&gt;&gt;&gt;[[ 9] [12]]</span><br></pre></td></tr></table></figure>
<p>axis是轴的意思，跟维度一样，是<strong>从0开始索引。</strong><br> 二维数组中有两个轴：</p>
<ol>
<li>0轴沿着0行到1行的方向垂直向下（纵向）</li>
<li>1轴沿着0列到1列的方向水平延伸（横向）</li>
</ol>
<p>由于行列没有方向的属性，所以这里用0行到1行的向量来表示方向加强记忆， 这样就又符合<strong>行列习惯</strong>了 （0对应行，1对应列）</p>
<p>更多方法见 Numpy的文档(<a href="https://docs.scipy.org/doc/numpy/reference/routines.math.html" target="_blank" rel="noopener">https://docs.scipy.org/doc/numpy/reference/routines.math.html</a>)</p>
<p>对一些数组进行操作:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = np.array([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line">print(a)</span><br><span class="line">[<span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span>]</span><br></pre></td></tr></table></figure>
<p>a中所有的元素都加上2，以此类推</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a + <span class="number">2</span></span><br><span class="line">array([<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>])</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a - <span class="number">2</span></span><br><span class="line">array([<span class="number">-1</span>,  <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>])</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a * <span class="number">2</span></span><br><span class="line">array([<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>])</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a / <span class="number">2</span></span><br><span class="line">array([<span class="number">0.5</span>, <span class="number">1.</span> , <span class="number">1.5</span>, <span class="number">2.</span> ])</span><br></pre></td></tr></table></figure>
<p>a+b 就是a和b数组中对应的元素相加</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = np.array([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line">b = np.array([<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>])</span><br><span class="line">a + b</span><br><span class="line">array([<span class="number">2</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">4</span>])</span><br></pre></td></tr></table></figure>
<p>a中所有元素的平方</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a ** <span class="number">2</span></span><br><span class="line">array([ <span class="number">1</span>,  <span class="number">4</span>,  <span class="number">9</span>, <span class="number">16</span>], dtype=int32)</span><br></pre></td></tr></table></figure>
<p>显示a中所有元素的sin值/cos值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Take the cos</span></span><br><span class="line">np.cos(a)</span><br><span class="line">array([ <span class="number">0.54030231</span>, <span class="number">-0.41614684</span>, <span class="number">-0.9899925</span> , <span class="number">-0.65364362</span>])</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Take the sin</span></span><br><span class="line">np.sin(a)</span><br><span class="line">array([ <span class="number">0.84147098</span>,  <span class="number">0.90929743</span>,  <span class="number">0.14112001</span>, <span class="number">-0.7568025</span> ])</span><br></pre></td></tr></table></figure>
<h4 id="Linear-Algebra"><a href="#Linear-Algebra" class="headerlink" title="Linear Algebra"></a>Linear Algebra</h4><p>Reference docs (<a href="https://docs.scipy.org/doc/numpy/reference/routines.linalg.html" target="_blank" rel="noopener">https://docs.scipy.org/doc/numpy/reference/routines.linalg.html</a>)</p>
<p>Determinant、Trace、Singular Vector Decomposition、Eigenvalues、Matrix Norm、Inverse   Etc…</p>
<p>matmul()方法，matrix multiply的缩写，就是将两个矩阵相乘的方法。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">a = np.ones((<span class="number">2</span>,<span class="number">3</span>))</span><br><span class="line">print(a)</span><br><span class="line">[[<span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span>]</span><br><span class="line"> [<span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span>]]</span><br><span class="line">b = np.full((<span class="number">3</span>,<span class="number">2</span>), <span class="number">2</span>)</span><br><span class="line">print(b)</span><br><span class="line">[[<span class="number">2</span> <span class="number">2</span>]</span><br><span class="line"> [<span class="number">2</span> <span class="number">2</span>]</span><br><span class="line"> [<span class="number">2</span> <span class="number">2</span>]]</span><br><span class="line">np.matmul(a,b)</span><br><span class="line">array([[<span class="number">6.</span>, <span class="number">6.</span>],</span><br><span class="line">       [<span class="number">6.</span>, <span class="number">6.</span>]])</span><br></pre></td></tr></table></figure>
<h5 id="Find-the-determinant"><a href="#Find-the-determinant" class="headerlink" title="Find the determinant"></a>Find the determinant</h5><p>也就是计算矩阵的行列式的值，这里我们先新建一个3x3的E，然后计算它的值，显然为1</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">c = np.identity(<span class="number">3</span>)</span><br><span class="line">np.linalg.det(c)</span><br><span class="line"><span class="number">1.0</span></span><br></pre></td></tr></table></figure>
<h4 id="Statistics"><a href="#Statistics" class="headerlink" title="Statistics"></a>Statistics</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">stats = np.array([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]])</span><br><span class="line">stats</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]])</span><br></pre></td></tr></table></figure>
<p>获得整个矩阵当中的最小值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">np.min(stats)</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>axis = 1代表行就是每一行中的最小值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">np.min(stats, axis&#x3D;1)</span><br><span class="line">array([1, 4])</span><br></pre></td></tr></table></figure>
<p>获得最大值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">np.max(stats)</span><br><span class="line"><span class="number">6</span></span><br></pre></td></tr></table></figure>
<p>获得整个矩阵当中的最最大，也就是每一行中的最大值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">np.max(stats, axis=<span class="number">1</span>)</span><br><span class="line">array([<span class="number">3</span>, <span class="number">6</span>])</span><br></pre></td></tr></table></figure>
<p>获得</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">np.sum(stats, axis=<span class="number">0</span>)</span><br><span class="line">array([<span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>])</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">np.sum(stats, axis=<span class="number">1</span>)</span><br><span class="line">array([<span class="number">6</span>, <span class="number">15</span>])</span><br></pre></td></tr></table></figure>
<h3 id="Reorganizing-Arrays-reshape-vstack-hstack"><a href="#Reorganizing-Arrays-reshape-vstack-hstack" class="headerlink" title="Reorganizing Arrays (reshape, vstack, hstack)"></a>Reorganizing Arrays (reshape, vstack, hstack)</h3><p><a href="https://blog.csdn.net/csdn15698845876/article/details/73380803?utm_medium=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.compare&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.compare" target="_blank" rel="noopener">stack(),hstack(),vstack()详解</a></p>
<h4 id="reshape"><a href="#reshape" class="headerlink" title="reshape()"></a>reshape()</h4><p>reshape()就是改变当前矩阵的结构，也就是说本来是2x4的矩阵，现在我可以把它变成 4x2 的矩阵</p>
<p>注意了，变换前后，数据个数是无法改变的，我们不能把2x4的矩阵变成3x2的矩阵！</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">before = np.array([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],[<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>]])</span><br><span class="line">print(before)</span><br><span class="line">[[<span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span>]</span><br><span class="line"> [<span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span>]]</span><br><span class="line"></span><br><span class="line">after = before.reshape((<span class="number">4</span>,<span class="number">2</span>))</span><br><span class="line">print(after)</span><br><span class="line">[[<span class="number">1</span> <span class="number">2</span>]</span><br><span class="line"> [<span class="number">3</span> <span class="number">4</span>]</span><br><span class="line"> [<span class="number">5</span> <span class="number">6</span>]</span><br><span class="line"> [<span class="number">7</span> <span class="number">8</span>]]</span><br></pre></td></tr></table></figure>
<h4 id="vstack"><a href="#vstack" class="headerlink" title="vstack()"></a>vstack()</h4><p>vstack()是一种拼接数组的方法</p>
<p><strong>语法</strong></p>
<p>numpy.vstack(tup)<br>垂直堆叠数组（行方式）。</p>
<p><strong>参数：</strong></p>
<p>除了第一个轴（行）之外，数组必须具有相同的形状。<br> <strong>一维数组必须具有相同的长度。</strong></p>
<p><strong>返回：</strong><br> 返回堆叠的数组<br> <strong>通过堆叠给定的数组最后形成的数组将至少为二维的</strong>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Vertically stacking vectors</span></span><br><span class="line">v1 = np.array([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line">v2 = np.array([<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>])</span><br><span class="line"></span><br><span class="line">np.vstack([v1,v2,v1,v2])</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">       [<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>],</span><br><span class="line">       [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">       [<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]])</span><br></pre></td></tr></table></figure>
<h4 id="hstack"><a href="#hstack" class="headerlink" title="hstack()"></a>hstack()</h4><p>按顺序堆叠数组（列式）</p>
<p>除了第二轴（列）之外的所有阵列必须具有相同的形状。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Horizontal  stack</span></span><br><span class="line">h1 = np.ones((<span class="number">2</span>,<span class="number">4</span>))</span><br><span class="line">print(h1)</span><br><span class="line">[[<span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span>]</span><br><span class="line"> [<span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span> <span class="number">1.</span>]]</span><br><span class="line">h2 = np.zeros((<span class="number">2</span>,<span class="number">2</span>))</span><br><span class="line">print(h2)</span><br><span class="line">[[<span class="number">0.</span> <span class="number">0.</span>]</span><br><span class="line"> [<span class="number">0.</span> <span class="number">0.</span>]]</span><br><span class="line">np.hstack((h1,h2))</span><br><span class="line">array([[<span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">       [<span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">0.</span>, <span class="number">0.</span>]])</span><br></pre></td></tr></table></figure>
<h3 id="Miscellaneous"><a href="#Miscellaneous" class="headerlink" title="Miscellaneous"></a>Miscellaneous</h3><h4 id="Load-data-in-from-a-file"><a href="#Load-data-in-from-a-file" class="headerlink" title="Load data in from a file"></a>Load data in from a file</h4><p>data.txt:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1,13,21,11,196,75,4,3,34,6,7,8,0,1,2,3,4,5</span><br><span class="line">3,42,12,33,766,75,4,55,6,4,3,4,5,6,7,0,11,12</span><br><span class="line">1,22,33,11,999,11,2,1,78,0,1,2,9,8,7,1,76,88</span><br></pre></td></tr></table></figure>
<p>我们从这个文件中读入信息并进行整理：</p>
<p>按照分隔符把txt中的数据分开，然后把字符串都转换成int型</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">filedata = np.genfromtxt(<span class="string">'data.txt'</span>, delimiter=<span class="string">','</span>)</span><br><span class="line">filedata = filedata.astype(<span class="string">'int32'</span>)</span><br><span class="line">print(filedata)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[[  <span class="number">1</span>  <span class="number">13</span>  <span class="number">21</span>  <span class="number">11</span> <span class="number">196</span>  <span class="number">75</span>   <span class="number">4</span>   <span class="number">3</span>  <span class="number">34</span>   <span class="number">6</span>   <span class="number">7</span>   <span class="number">8</span>   <span class="number">0</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span>   <span class="number">5</span>]</span><br><span class="line"> [  <span class="number">3</span>  <span class="number">42</span>  <span class="number">12</span>  <span class="number">33</span> <span class="number">766</span>  <span class="number">75</span>   <span class="number">4</span>  <span class="number">55</span>   <span class="number">6</span>   <span class="number">4</span>   <span class="number">3</span>   <span class="number">4</span>   <span class="number">5</span>   <span class="number">6</span>   <span class="number">7</span>   <span class="number">0</span>  <span class="number">11</span>  <span class="number">12</span>]</span><br><span class="line"> [  <span class="number">1</span>  <span class="number">22</span>  <span class="number">33</span>  <span class="number">11</span> <span class="number">999</span>  <span class="number">11</span>   <span class="number">2</span>   <span class="number">1</span>  <span class="number">78</span>   <span class="number">0</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">9</span>   <span class="number">8</span>   <span class="number">7</span>   <span class="number">1</span>  <span class="number">76</span>  <span class="number">88</span>]]</span><br></pre></td></tr></table></figure>
<h4 id="Advanced-Indexing-and-Boolean-Masking"><a href="#Advanced-Indexing-and-Boolean-Masking" class="headerlink" title="Advanced Indexing and Boolean Masking"></a>Advanced Indexing and Boolean Masking</h4><p>对数据进行筛选，50-100 之间的数给 False，此外给True，~符号代表取反</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(~((filedata &gt; <span class="number">50</span>) &amp; (filedata &lt; <span class="number">100</span>)))</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">array([[ <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>, <span class="literal">False</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,</span><br><span class="line">         <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>],</span><br><span class="line">       [ <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>, <span class="literal">False</span>,  <span class="literal">True</span>, <span class="literal">False</span>,  <span class="literal">True</span>,</span><br><span class="line">         <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>],</span><br><span class="line">       [ <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>, <span class="literal">False</span>,</span><br><span class="line">         <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>, <span class="literal">False</span>, <span class="literal">False</span>]])</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/07/07/%E5%BA%A6%E9%87%8F%E5%92%8C%E6%8A%95%E5%BD%B1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/%5Bobject%20Object%5D">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/07/07/%E5%BA%A6%E9%87%8F%E5%92%8C%E6%8A%95%E5%BD%B1/" itemprop="url">度量和投影</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-07-07T23:16:55+08:00">
                2020-07-07
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2020-07-07T23:16:56+08:00">
                2020-07-07
              </time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/07/05/Java%E5%9F%BA%E7%A1%802/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/%5Bobject%20Object%5D">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/07/05/Java%E5%9F%BA%E7%A1%802/" itemprop="url">Java基础2</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-07-05T18:26:43+08:00">
                2020-07-05
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2025-04-10T13:37:32+08:00">
                2025-04-10
              </time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Java基础2"><a href="#Java基础2" class="headerlink" title="Java基础2"></a>Java基础2</h1><h2 id="Classes"><a href="#Classes" class="headerlink" title="Classes"></a>Classes</h2><h3 id="Classes-and-Objects"><a href="#Classes-and-Objects" class="headerlink" title="Classes and Objects"></a>Classes and Objects</h3><p>我们常常混淆 类和对象的概念。我们可见简单的将类看作是一个模板。比如说我定义了一个车的类。这个类里面有一些属性(Fields)和一些方法(Methods)：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/1.png" style="zoom: 100%;"></p>
<p>而 Object 是 Class的实例。比如说 Car1，Car2，Car3.这些对象都有 Car Class的属性和方法，但是它们之间又是相互独立的。</p>
<h3 id="Creating-Classes"><a href="#Creating-Classes" class="headerlink" title="Creating Classes"></a>Creating Classes</h3><p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/2.png" style="zoom: 100%;"></p>
<p>注意，这里我把text初始化为了 “” 这是因为如果不初始化，那么新建对象的时候如果不调用setText, TextBox中的text就会被设置为null，而当我们对null进行字符串操作的时候，整个程序就会down掉</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TextBox</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String text = <span class="string">""</span>; <span class="comment">//field</span></span><br><span class="line">	<span class="comment">//method</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setText</span><span class="params">(String text)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.text = text;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span></span>&#123;</span><br><span class="line">        text = <span class="string">""</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Creating-Objects"><a href="#Creating-Objects" class="headerlink" title="Creating Objects"></a>Creating Objects</h3><p>回到 Main.java 我们可以对刚才创建的类示例化，也就是创建对象</p>
<p>我们不需要 用 TextBox textBox1来新建一个对象，直接 var textBox1 = new TextBox()即可，java会自动判断新建的对象是属于什么类的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> textBox1 = <span class="keyword">new</span> TextBox();</span><br><span class="line">        textBox1.setText(<span class="string">"Box 1"</span>);</span><br><span class="line">        System.out.println(textBox1.text.toUpperCase());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> textBox2 = <span class="keyword">new</span> TextBox();</span><br><span class="line">        textBox2.setText(<span class="string">"Box 2"</span>);</span><br><span class="line">        System.out.println(textBox1.text);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Memory-Allocation"><a href="#Memory-Allocation" class="headerlink" title="Memory Allocation"></a>Memory Allocation</h3><p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/3.png" style="zoom: 60%;"></p>
<p><a href="https://www.jianshu.com/p/ef0c80d1782c" target="_blank" rel="noopener">https://www.jianshu.com/p/ef0c80d1782c</a></p>
<ul>
<li><h5 id="Java-的内存管理就是对象的分配和释放的处理"><a href="#Java-的内存管理就是对象的分配和释放的处理" class="headerlink" title="Java 的内存管理就是对象的分配和释放的处理"></a>Java 的内存管理就是对象的分配和释放的处理</h5></li>
</ul>
<p>1.分配：通过关键字new创建对象分配内存空间，对象存在堆中。<br>2.释放 ：对象的释放是由垃圾回收机制决定和执行的。如果发现某一对象一段时间没有使用过后，就会被自动回收，不需要我们用C++的方法手动释放内存。</p>
<ul>
<li><h5 id="Java内存泄漏："><a href="#Java内存泄漏：" class="headerlink" title="Java内存泄漏："></a>Java内存泄漏：</h5></li>
</ul>
<p>当对象存在内存的引用，却不会再继续使用，对象会占用内存无法被GC回收，这些对象就会判定为内存泄漏。</p>
<ul>
<li><h5 id="Java内存区域划分："><a href="#Java内存区域划分：" class="headerlink" title="Java内存区域划分："></a>Java内存区域划分：</h5></li>
</ul>
<p>1.栈：<br> 在函数中定义的基本类型变量和对象的引用变量都在函数的栈内存中分配。栈数据可以共享。但缺点是，存在栈中的数据大小与生存期必须是确定的，缺乏灵活性。</p>
<p>2.堆：<br> 通过new生成的对象都存放在堆中，对于堆中的对象生命周期的管理由Java虚拟机的垃圾回收机制GC进行回收和统一管理。优点是可以动态分配内存大小，缺点是由于动态分配内存导致存取速度慢。</p>
<p>3.方法区：<br> 是各个线程共享的内存区域，它用于存储class二进制文件，包含了虚拟机加载的类信息、常量(常量池)、静态变量(静态域)、即时编译后的代码等数据。</p>
<p>1.常量池：<br> 常量池在编译期间就将一部分数据存放于该区域，包含以final修饰的基本数据类型的常量值、String字符串。</p>
<p>2.静态域：<br> 存放类中以static声明的静态成员变量。</p>
<p>3.程序计数器<br> 当前线程所执行的行号指示器。通过改变计数器的值来确定下一条指令，比如循环，分支，跳转，异常处理，线程恢复等都是依赖计数器来完成。 </p>
<h3 id="Procedural-Programming"><a href="#Procedural-Programming" class="headerlink" title="Procedural Programming"></a>Procedural Programming</h3><p>这段代码看起来是面向对象的编程，但是还是属于面向过程的编程。</p>
<p>面向过程的编程会有这样的特点，一个method和class中有很多很多的变量</p>
<p>这样的代码一旦出现了bug就会很难维护</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> baseSalary = <span class="number">50_000</span>;</span><br><span class="line">        <span class="keyword">int</span> extraHours = <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">int</span> hourlyRate = <span class="number">20</span>;</span><br><span class="line">        <span class="keyword">int</span> wage = calculateWage(baseSalary,extraHours,hourlyRate);</span><br><span class="line">        System.out.println(wage);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">calculateWage</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">int</span> baseSalary,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">int</span> extraHours,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">int</span> hourlyRate</span></span></span><br><span class="line"><span class="function"><span class="params">    )</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> baseSalary+(extraHours*hourlyRate);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Encapsulation"><a href="#Encapsulation" class="headerlink" title="Encapsulation"></a>Encapsulation</h3><p>为了避免类中成员暴露在外，使得类成员变量被随意赋值或者更改。所以我们需要封装来实现数据的隐藏。应禁止直接访问一个对象中数据的实际表示。</p>
<p>我们把变量和方法都放在了一个类当中，在main类中创建Employee实例。</p>
<p>因为extraHours每个月可能都会不一样，所以我们可以把他作为方法中的一个变量传入。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Emoloyee</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> baseSalary;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> hourlyRate;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">calculateWage</span><span class="params">(<span class="keyword">int</span> extraHours)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> baseSalary+(hourlyRate*extraHours);</span><br><span class="line">    &#125;</span><br><span class="line">        </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们看到，一个职员的基本薪资、公式都是public的，这属于商业机密，不能公开，因此需要用private来修饰。如果不用的话，我们在Main类中就可以随意修改Employee的敏感信息了</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> employee = <span class="keyword">new</span> Emoloyee();</span><br><span class="line">        employee.baseSalary = <span class="number">50_000</span>;</span><br><span class="line">        employee.hourlyRate = <span class="number">20</span>;</span><br><span class="line">        <span class="keyword">int</span> wage = employee.calculateWage(<span class="number">10</span>);</span><br><span class="line">        System.out.println(wage);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>因此，我们需要用到 getter和setter，来获取和设置类中的private变量</p>
<h3 id="Getters-and-Setters-Title"><a href="#Getters-and-Setters-Title" class="headerlink" title="Getters and Setters - Title"></a>Getters and Setters - Title</h3><p>但是像上面那样程序会存在bug，因为我如果把baseSalary =-1，这会出现错误。所以我们在程序当中需要用到一些验证手段。</p>
<p>我们把baseSalary 和hourlyRate</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/4.png" style="zoom: 100%;"></p>
<p>我们可以点击 hourlyRate 这个变量 alt+enter 唤出 encapsulate field hourlyRate 然后出现上面的界面。我们可以把这个变量设置为可读或者可改的。然后idea就会帮我们自己生成这个变量的getter和setter，我们只需要添加我们想要的验证代码即可。</p>
<p>更美妙的是，回到Main.java 我们发现：idea已经自动把刚才的 employee.hourlyRate = 20 替换成了employee.setHourlyRate(20); 美哉</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Emoloyee</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> baseSalary;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> hourlyRate;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Emoloyee</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">calculateWage</span><span class="params">(<span class="keyword">int</span> extraHours)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> baseSalary+(getHourlyRate() *extraHours);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBaseSalary</span><span class="params">(<span class="keyword">int</span> baseSalary)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(baseSalary &lt;= <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Salary cannot be 0 or less"</span>);</span><br><span class="line">        <span class="keyword">this</span>.baseSalary = baseSalary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getBaseSalary</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> baseSalary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getHourlyRate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> hourlyRate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHourlyRate</span><span class="params">(<span class="keyword">int</span> hourlyRate)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(hourlyRate&lt;=<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"hourlyRate cannot be 0 or less"</span>);</span><br><span class="line">        <span class="keyword">this</span>.hourlyRate = hourlyRate;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Abstraction"><a href="#Abstraction" class="headerlink" title="Abstraction"></a>Abstraction</h3><p>Reduce complexity by hiding unnecessary details</p>
<p><a href="https://jasonxqh.github.io/2020/05/26/OOP-in-JavaScript/#Abstraction">见JavaScript中的Abstraction</a></p>
<h3 id="Coupling-耦合度"><a href="#Coupling-耦合度" class="headerlink" title="Coupling 耦合度"></a>Coupling 耦合度</h3><p>Coupling is the level of dependency between classes</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/5.png" style="zoom: 60%;"></p>
<p>我们可以将一些没有必要的方法设置为private，把一些必要的methods 暴露出去，这样就可以降低类和类之间的耦合度。</p>
<h3 id="Reducing-Coupling"><a href="#Reducing-Coupling" class="headerlink" title="Reducing Coupling"></a>Reducing Coupling</h3><p>下面是降低耦合度的例子，我们新建一个<code>Browser.java</code>类，我们把没必要暴露的 <code>sendHttpRequest</code> 和 <code>findIpAddress</code> 这两个 Methods ，所以我们把它设置为 private，这样它们只能在类内被调用，在其它类中无法被调用。只把最重要的 <code>navigate()</code>方法设置为public，这样在 Main class 当中，实例化一个类的时候只能用 navigate这个方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Browser</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">navigate</span><span class="params">(String address)</span></span>&#123;</span><br><span class="line">        String ip = findIpAddress(address);</span><br><span class="line">        String html = sendHttpRequest(ip);</span><br><span class="line">        System.out.println(html);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">sendHttpRequest</span><span class="params">(String ip)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"&lt;html&gt;&lt;/html&gt;"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">findIpAddress</span><span class="params">(String address )</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"127.0.0.1"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> browser = <span class="keyword">new</span> Browser();</span><br><span class="line">        browser.navigate(<span class="string">"..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Constructors"><a href="#Constructors" class="headerlink" title="Constructors"></a>Constructors</h3><p>我们发现，现在的main.java 是这样的：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> employee = <span class="keyword">new</span> Emoloyee();</span><br><span class="line">        employee.setBaseSalary(<span class="number">50_000</span>);</span><br><span class="line">        employee.setHourlyRate(<span class="number">20</span>); </span><br><span class="line">        <span class="keyword">int</span> wage = employee.calculateWage(<span class="number">10</span>);</span><br><span class="line">        System.out.println(wage);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这是一个bad design，因为我们如果要使用employee类，我们就必须要依次调用setBaseSalary和setHourRate方法，否则baseSalary和HourlyRate就是0。</p>
<p>所以我们要简化这个类的接口，这样我们操作起来就比较方便。所以我们就要用到构造函数<strong>Constructor</strong>，在我们声明新对象的时候就把数据传入。</p>
<p>在Employee类中，我们这样修改：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> baseSalary;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> hourlyRate;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(<span class="keyword">int</span> baseSalary, <span class="keyword">int</span> hourlyRate)</span> </span>&#123;</span><br><span class="line">        setBaseSalary(baseSalary);</span><br><span class="line">        setHourlyRate(hourlyRate);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">calculateWage</span><span class="params">(<span class="keyword">int</span> extraHours)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> baseSalary+(getHourlyRate() *extraHours);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setBaseSalary</span><span class="params">(<span class="keyword">int</span> baseSalary)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(baseSalary &lt;= <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Salary cannot be 0 or less"</span>);</span><br><span class="line">        <span class="keyword">this</span>.baseSalary = baseSalary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">getBaseSalary</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> baseSalary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">getHourlyRate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> hourlyRate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setHourlyRate</span><span class="params">(<span class="keyword">int</span> hourlyRate)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(hourlyRate&lt;=<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"hourlyRate cannot be 0 or less"</span>);</span><br><span class="line">        <span class="keyword">this</span>.hourlyRate = hourlyRate;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>也就是说我们新建一个构造函数 Employee ,然后在这个构造函数中传入两个参数 baseSalary和hourlyRate，再调用setter方法(因为setter会做一个合法性判断，比直接赋值来的安全)将两个参数的值赋给类中两个成员。此外，我们还需要把两个setter改成private，以防止在调用constructor之后再对baseSalary和hourlyRate两个值进行修改，这样暴露在外的接口就只剩下calculateWage了。</p>
<p>这样在main函数中代码可以变得更为精简</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> employee = <span class="keyword">new</span> Employee(</span><br><span class="line">                <span class="number">50_000</span>,</span><br><span class="line">                <span class="number">20</span>);</span><br><span class="line">        <span class="keyword">int</span> wage = employee.calculateWage(<span class="number">10</span>);</span><br><span class="line">        System.out.println(wage);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>和C++一样，如果我们不声明一个构造函数，那么java会自动帮我们创建一个缺省的构造函数。他会帮我们初始化成员值：int 类型的都设置为0 ，Boolean类型的都设置为False等。</p>
<h3 id="Method-Overloading"><a href="#Method-Overloading" class="headerlink" title="Method Overloading"></a>Method Overloading</h3><p>方法重载，我们可以用这种办法定义很多方法名字相同但是参数不同的方法，比如说现在我受伤的calculateWage方法，通过重载，我可以既传入一个extraHours参数，也可以什么都不传，代表着extraHours=0。代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">calculateWage</span><span class="params">(<span class="keyword">int</span> extraHours)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> baseSalary+(getHourlyRate() *extraHours);</span><br><span class="line">&#125;   </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">calculateWage</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> baseSalary;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当然我们不建议多次重载，这样会让软件很难维护。通常一个方法需要接受多种不同类型的参数的时候才会用到重载。</p>
<h3 id="Constructor-Overloading"><a href="#Constructor-Overloading" class="headerlink" title="Constructor Overloading"></a>Constructor Overloading</h3><p>我们也可以重载构造函数。如下：</p>
<p>利用this(),直接调用构造函数。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(<span class="keyword">int</span> baseSalary, <span class="keyword">int</span> hourlyRate)</span> </span>&#123;</span><br><span class="line">    setBaseSalary(baseSalary);</span><br><span class="line">    setHourlyRate(hourlyRate);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(<span class="keyword">int</span> baseSalary )</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>(baseSalary,<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Static-Members"><a href="#Static-Members" class="headerlink" title="Static Members"></a>Static Members</h3><p>静态成员，包括静态方法和静态变量，是只能在类中实现的，它们不属于任何一个实例对象。</p>
<p>比如我可以新建一个 Employee.numberOfEmplotees和printNumberOfEmployees方法来计算和输出Employee的个数，但这个属性不属于任何一个实例Employee对象而是属于这个Employee类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> numberOfEmployees;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printNumberOfEmployees</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(numberOfEmployees);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(<span class="keyword">int</span> baseSalary, <span class="keyword">int</span> hourlyRate)</span> </span>&#123;</span><br><span class="line">    setBaseSalary(baseSalary);</span><br><span class="line">    setHourlyRate(hourlyRate);</span><br><span class="line">    numberOfEmployees++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但是要注意，我们在static 方法当中不能调用类中的出static方法以外的其他方法，如calculateWage().这也是为什么我们一开始在Main类当中添加的方法都被声明为static方法，这是为了在main方法中能够调用他们(都是static可以调用)</p>
<p>那么为什么main方法是静态的呢？这是为了能让Java能不创建一个新的对象，而直接调用这个main方法</p>
<p>我们同样可以发现，System 类中也有很多很多的静态方法：System.out,System.in 又比如说 Interger.parseInt()(转换为整数)也属于静态方法</p>
<h3 id="Classes-Quiz"><a href="#Classes-Quiz" class="headerlink" title="Classes Quiz"></a>Classes Quiz</h3><p>1- A class is a blueprint or template for creating objects. An object is an instance of a class.<br>2- Instantiating means creating an instance of a class: new Customer()<br>3- Stack is used for storing primitive types (numbers, boolean and character) and variables that store references to objects in the heap. Variables stored in the stack are immediately cleared when they go out of scope (eg when a method finishes execution). Objects stored in the heap get removed later on when they’re no longer references. This is done by Java’s garbage collector.<br>4- Big classes with several unrelated methods focusing on different concerns and responsibilities. These methods often have several parameters. You often see the same group of parameters repeated across these methods. All you see is procedures calling each other passing arguments around.<br>By applying object-oriented programming techniques, we extract these repetitive parameters and declare them as fields in our classes. Our classes will then encapsulate both the data and the operations on the data (methods). As a result, our methods will have fewer parameters and our code will be cleaner and more reusable.<br>5- Encapsulation is the first principle of object-oriented programming. It suggests that we should bundle the data and operations on the data inside a single unit (class).<br>6- How we store data in an object is considered an implementation detail. We may change how we store the data internally. Plus, we don’t want our objects to go into a bad state (hold bad data). That’s why we should declare fields as private and provide getters and or setters only if required. These setters can ensure our objects don’t go into a bad state by validating the values that are passed to them.<br>7- Abstraction is the second principle of object-oriented programming. It suggests that we should reduce complexity by hiding the unnecessary implementation details. As a metaphor, think of the remote control of your TV. All the complexity inside the remote control is hidden from you. It’s abstracted away. You just work with a simple interface to control your TV. We want our objects to be like our remote controls.<br>8- Coupling represents the level of dependency between software entities (eg classes). The more our classes are dependent on each other, the harder it is to change them. Changing one class may result in several cascading and breaking changes.<br>9- By hiding the implementation details, we prevent other classes from getting affected when we change these details. For example, if the logic board and transistors inside a remote control change from one model to another, we’re not affected. We still use the same interface to work with our TV. Also, reducing these details and exposing fewer methods makes<br>our classes easier to use. For example, remote controls with fewer buttons are easier to use.<br>10- Constructors are called when we instantiate our class. We use them to initialize our objects. Initialization means putting an object into an early or initial state (eg giving it initial values).<br>11- Method overloading means declaring a method with the same name but with different signatures. The number, type and order of its parameters will be different.<br>12- Static methods are accessible via classes, not objects</p>
<h2 id="Refactoring-Towards-an-Object-oriented-Design"><a href="#Refactoring-Towards-an-Object-oriented-Design" class="headerlink" title="Refactoring Towards an Object-oriented Design"></a>Refactoring Towards an Object-oriented Design</h2><h3 id="The-Problem"><a href="#The-Problem" class="headerlink" title="The Problem"></a>The Problem</h3><p>我们看到这个程序：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">package com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.<span class="built_in">text</span>.NumberFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> &#123;</span></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">byte</span> MONTHS_IN_YEAR = <span class="number">12</span>;</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">byte</span> PERCENT = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">String</span>[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">int</span> principal = (<span class="keyword">int</span>) readNumber(<span class="string">"Principal: "</span>,<span class="number">1000</span>,<span class="number">1000000</span>);</span><br><span class="line">        <span class="keyword">float</span> annualInterest = (<span class="keyword">float</span>)readNumber(<span class="string">"Annual Interest Rate: "</span>,<span class="number">1</span>,<span class="number">30</span>);</span><br><span class="line">        <span class="keyword">byte</span> years = (<span class="keyword">byte</span>)readNumber(<span class="string">"Period (Years): "</span>,<span class="number">1</span>,<span class="number">30</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">double</span> mortgage = calculateMortage(principal,annualInterest,years);</span><br><span class="line">        <span class="keyword">String</span> mortgageFormatted =</span><br><span class="line">                NumberFormat.getCurrencyInstance().format(mortgage);</span><br><span class="line">        System.out.<span class="built_in">println</span>();</span><br><span class="line">        System.out.<span class="built_in">println</span>(<span class="string">"MORTAGE"</span>);</span><br><span class="line">        System.out.<span class="built_in">println</span>(<span class="string">"------"</span>);</span><br><span class="line">        System.out.<span class="built_in">println</span>(<span class="string">"Mortgage: "</span> + mortgageFormatted);</span><br><span class="line"></span><br><span class="line">        System.out.<span class="built_in">println</span>();</span><br><span class="line">        System.out.<span class="built_in">println</span>(<span class="string">"PAYMENT SCHEDULE"</span>);</span><br><span class="line">        System.out.<span class="built_in">println</span>(<span class="string">"------"</span>);</span><br><span class="line">        <span class="keyword">for</span>(short month = <span class="number">1</span>;month&lt;= years*MONTHS_IN_YEAR;month++)&#123;</span><br><span class="line">            <span class="keyword">double</span> balance = calculateBalance(principal,annualInterest,years,month);</span><br><span class="line">            System.out.<span class="built_in">println</span>(NumberFormat.getCurrencyInstance().format(balance));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">readNumber</span><span class="params">(<span class="keyword">String</span> prompt,<span class="keyword">double</span> <span class="built_in">min</span>,<span class="keyword">double</span> <span class="built_in">max</span>)</span></span>&#123;</span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">double</span> value;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            System.out.<span class="built_in">print</span>(prompt);</span><br><span class="line">            value = scanner.nextInt();</span><br><span class="line">            <span class="keyword">if</span> (value &gt;= <span class="built_in">min</span> &amp;&amp; value &lt;= <span class="built_in">max</span>)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            System.out.<span class="built_in">println</span>(<span class="string">"Enter a value between "</span>+<span class="built_in">min</span>+<span class="string">" and "</span>+<span class="built_in">max</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">calculateBalance</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">int</span> principal,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">float</span> annualInterest,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">byte</span> years,</span></span></span><br><span class="line"><span class="function"><span class="params">            short numberOfPaymentMade)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        short numberOfPayments = (short)(years * MONTHS_IN_YEAR);</span><br><span class="line">        <span class="keyword">float</span> monthlyInterest = annualInterest / PERCENT / MONTHS_IN_YEAR;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">double</span> balance = principal*(Math.<span class="built_in">pow</span>(<span class="number">1</span>+monthlyInterest,numberOfPayments)-Math.<span class="built_in">pow</span>(<span class="number">1</span>+monthlyInterest,numberOfPaymentMade))/(Math.<span class="built_in">pow</span>(<span class="number">1</span>+monthlyInterest,numberOfPayments)<span class="number">-1</span>);</span><br><span class="line">        <span class="keyword">return</span> balance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">calculateMortage</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">int</span> principal,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">float</span> annualInterest,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">byte</span> years)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        short numberOfPayments = (short)(years * MONTHS_IN_YEAR);</span><br><span class="line">        <span class="keyword">float</span> monthlyInterest = annualInterest / PERCENT / MONTHS_IN_YEAR;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> principal</span><br><span class="line">                * (monthlyInterest * Math.<span class="built_in">pow</span>(<span class="number">1</span> + monthlyInterest, numberOfPayments))</span><br><span class="line">                / (Math.<span class="built_in">pow</span>(<span class="number">1</span> + monthlyInterest, numberOfPayments) - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>虽然这个程序可以正常运行，但是可以发现这个程序非常过程化，里面的methods都是互不联系的。我们既没有encapsulation，也没有abstraction 。我们现在我们需要把它重构成面向对象的代码。</p>
<h3 id="What-Classes-Do-We-Need"><a href="#What-Classes-Do-We-Need" class="headerlink" title="What Classes Do We Need?"></a>What Classes Do We Need?</h3><p>对于这个程序，我们需要设一个什么类呢？</p>
<p>比如 principal、annualInterest、years 这三个需要被读入的数据，我们可以建一个console class, 专门从命令行中读取数据。我们还有printMortgage、printPaymentSchedule这些用来打印数据的方法，我们可以新建一个 Mortgage report类来把这些方法放在那。注意，这两个方法不要放到console class当中去，因为console class只管读入数据，对于内部程序的运行尽量不要参与。</p>
<p>对于calculatebalance和calculateMortage这两个方法，传入的参数有三个相同，所以我们可以把他们放到一个类中，并由类来管理这三个相同的数据。</p>
<h3 id="Extracting-the-Console-Class"><a href="#Extracting-the-Console-Class" class="headerlink" title="Extracting the Console Class"></a>Extracting the Console Class</h3><p>我们利用Idea给的重构工具可以很方便的将一个method变成一个类。点击readNumber这个方法，然后点击Refactor，选Move Members，选择public</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/6.png" style="zoom: 110%;"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Console</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">readNumber</span><span class="params">(String prompt, <span class="keyword">double</span> min, <span class="keyword">double</span> max)</span></span>&#123;</span><br><span class="line">       	<span class="keyword">private</span> <span class="keyword">static</span>  Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">double</span> value;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            System.out.print(prompt);</span><br><span class="line">            value = scanner.nextInt();</span><br><span class="line">            <span class="keyword">if</span> (value &gt;= min &amp;&amp; value &lt;= max)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            System.out.println(<span class="string">"Enter a value between "</span>+min+<span class="string">" and "</span>+max);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Overloading-Methods"><a href="#Overloading-Methods" class="headerlink" title="Overloading Methods"></a>Overloading Methods</h3><p>我们对Console类进行重载，因为我们想要一个仅仅返回一个数字的readNumber方法。因为两个readNumber 都需Scanner，所以直接将Scanner提出</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Console</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span>  Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">readNumber</span><span class="params">(String prompt)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> scanner.nextDouble();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">readNumber</span><span class="params">(String prompt, <span class="keyword">double</span> min, <span class="keyword">double</span> max)</span></span>&#123;</span><br><span class="line">        <span class="keyword">double</span> value;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            System.out.print(prompt);</span><br><span class="line">            value = scanner.nextInt();</span><br><span class="line">            <span class="keyword">if</span> (value &gt;= min &amp;&amp; value &lt;= max)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            System.out.println(<span class="string">"Enter a value between "</span>+min+<span class="string">" and "</span>+max);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Extracting-the-MortgageReport-Class"><a href="#Extracting-the-MortgageReport-Class" class="headerlink" title="Extracting the MortgageReport Class"></a>Extracting the MortgageReport Class</h3><p>现在我们要将main函数中打印利息和每月还剩余代还金额的代码提出来单独成一个类。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printMortgage</span><span class="params">(<span class="keyword">int</span> principal,<span class="keyword">float</span> annualInterest,<span class="keyword">byte</span> years)</span></span>&#123;</span><br><span class="line">      <span class="keyword">double</span> mortgage = calculateMortage(principal,annualInterest,years);</span><br><span class="line">      String mortgageFormatted =</span><br><span class="line">              NumberFormat.getCurrencyInstance().format(mortgage);</span><br><span class="line">      System.out.println();</span><br><span class="line">      System.out.println(<span class="string">"MORTAGE"</span>);</span><br><span class="line">      System.out.println(<span class="string">"------"</span>);</span><br><span class="line">      System.out.println(<span class="string">"Monthly Payments: "</span> + mortgageFormatted);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printPaymentShedule</span><span class="params">(<span class="keyword">int</span> principal,<span class="keyword">float</span> annualInterest,<span class="keyword">byte</span> years)</span></span>&#123;</span><br><span class="line">      System.out.println();</span><br><span class="line">      System.out.println(<span class="string">"PAYMENT SCHEDULE"</span>);</span><br><span class="line">      System.out.println(<span class="string">"------"</span>);</span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">short</span> month = <span class="number">1</span>;month&lt;= years*MONTHS_IN_YEAR;month++)&#123;</span><br><span class="line">          <span class="keyword">double</span> balance = calculateBalance(principal,annualInterest,years,month);</span><br><span class="line">          System.out.println(NumberFormat.getCurrencyInstance().format(balance));</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>选中这两个方法后，我们选择重构中的  Convert to instance method ，如下图：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/7.png" style="zoom: 67%;"></p>
<p>然后我们创建一个新的 Class并将这两个方法选中，设置为Public</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/8.png" style="zoom: 80%;"></p>
<p>结果如下图所示：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/9.png" style="zoom: 67%;"></p>
<p>但是我们注意到 printMortage 中 calculateMortage函数是引用的Main class中的方法，这是不应该出现的。我们需要将Mainclass中的两个计算方法独立出来成为一个类。</p>
<h3 id="Extracting-the-MortgageCalculator-Class"><a href="#Extracting-the-MortgageCalculator-Class" class="headerlink" title="Extracting the MortgageCalculator Class"></a>Extracting the MortgageCalculator Class</h3><p>现在我们选中两个 calculate方法并新建一个 MortgageCalculator 类。</p>
<p>新建完成后，结果如下：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/10.png" style="zoom: 67%;"></p>
<p>这还没完，我们之前学了encapsulation，也就是将方法中的变量放到类中，并设置 constructor或者getter/setter .而不是在引用方法的时候将参数传入。因此我们可以对代码进行如下修改：</p>
<p>首先我们将方法中需要的变量 <code>principal</code> ，<code>annualInterest</code> ，<code>years</code> 定义在class当中，设置为 <code>private</code></p>
<p>然后我们可以选择快捷方式：在code菜单中下拉到generate，然后点击 <code>constructor</code></p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/11.png" style="zoom: 80%;"></p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/12.png" style="zoom: 80%;"></p>
<p>然后，Java就自动为我们创建好了 这个类的构造器：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MortgageReport</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">int</span> principal;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> annualInterest;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">byte</span> year;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MortgageReport</span><span class="params">(<span class="keyword">int</span> principal, <span class="keyword">float</span> annualInterest, <span class="keyword">byte</span> year)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.principal = principal;</span><br><span class="line">        <span class="keyword">this</span>.annualInterest = annualInterest;</span><br><span class="line">        <span class="keyword">this</span>.year = year;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>紧接着，我们可以通过 Idea的快捷方法将calculateBalance这些方法中使用到的变量改为本地变量。在 <code>Refactor</code>中选择 <code>Change Signature</code></p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/13.png" style="zoom: 80%;"></p>
<p>在界面中，我们将这三个由构造器固定下来的参数删除即可</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/14.png" style="zoom: 80%;"></p>
<p>删除之后我们发现，这些变量无法被识别。这是因为我们的 <code>calculateBalance</code>是 静态函数，静态函数只能识别出静态的 <code>Fields</code> ,因此，我们还需要重构一下，将方法转换成 Instance Method，也就是将 static关键字删除。</p>
<p>结果如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MortgageCalculator</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">int</span> principal;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> annualInterest;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">byte</span> years;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MortgageCalculator</span><span class="params">(<span class="keyword">int</span> principal, <span class="keyword">float</span> annualInterest, <span class="keyword">byte</span> years)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.principal = principal;</span><br><span class="line">        <span class="keyword">this</span>.annualInterest = annualInterest;</span><br><span class="line">        <span class="keyword">this</span>.years = years;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">calculateBalance</span><span class="params">(<span class="keyword">short</span> numberOfPaymentMade)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">short</span> numberOfPayments = (<span class="keyword">short</span>)(years * Main.MONTHS_IN_YEAR);</span><br><span class="line">        <span class="keyword">float</span> monthlyInterest = annualInterest / Main.PERCENT / Main.MONTHS_IN_YEAR;</span><br><span class="line">        <span class="keyword">double</span> balance = principal*(Math.pow(<span class="number">1</span>+monthlyInterest,numberOfPayments)-Math.pow(<span class="number">1</span>+monthlyInterest,numberOfPaymentMade))/(Math.pow(<span class="number">1</span>+monthlyInterest,numberOfPayments)-<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> balance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">double</span> <span class="title">calculateMortage</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">short</span> numberOfPayments = (<span class="keyword">short</span>)(years * Main.MONTHS_IN_YEAR);</span><br><span class="line">        <span class="keyword">float</span> monthlyInterest = annualInterest / Main.PERCENT / Main.MONTHS_IN_YEAR;</span><br><span class="line">        <span class="keyword">return</span> principal</span><br><span class="line">                * (monthlyInterest * Math.pow(<span class="number">1</span> + monthlyInterest, numberOfPayments))</span><br><span class="line">                / (Math.pow(<span class="number">1</span> + monthlyInterest, numberOfPayments) - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Moving-Away-from-Static-Members"><a href="#Moving-Away-from-Static-Members" class="headerlink" title="Moving Away from Static Members"></a>Moving Away from Static Members</h3><p>但是问题又出现了，我们删除了 static关键字之后，我们就不能直接用 <code>类名.方法</code> 的形式来引用我们的<code>calculateBalance</code>和<code>calculateMortage</code>方法了。因此我们必须找出这两个方法在别的类中的引用，并修改。</p>
<p>我们可以通过右键方法名称，Find usages快速找到方法在其它类中被引用的地方。发现是在 <code>MortgageReport</code>中。不能直接用 <code>.</code> 来访问，那么我们就不得不新建一个MortgageCalculator实例。</p>
<p>问题又出现了，我不想在两个方法中都新建一个MortagageCalculator实例，因此我希望直接将其定义成类中的 Field</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/17.png" style="zoom: 80%;"></p>
<p>结果如下：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/18.png" style="zoom: 80%;"></p>
<p>但我还是不满意，因为这样子我们还是不得不将我们的<code>calculator</code>对象放在 <code>printMortage</code>方法当中.</p>
<p>在这个 <code>MortgageReport</code> 类当中，两个方法只用到了一次 <code>years</code>变量，因此我们只需要为years设置一个 <code>getter</code>, 然后将 calculator作为一个参数传入到MortageReport这个类当中去。 因此我们可以为这个class设置一个 Constructor。然后将两个方法从static method 改成 instance method.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.text.NumberFormat;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MortgageReport</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> MortgageCalculator calculator;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MortgageReport</span><span class="params">(MortgageCalculator calculator)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.calculator = calculator;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printPaymentShedule</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println();</span><br><span class="line">        System.out.println(<span class="string">"PAYMENT SCHEDULE"</span>);</span><br><span class="line">        System.out.println(<span class="string">"------"</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">short</span> month = <span class="number">1</span>; month&lt;= calculator.getYears()* Main.MONTHS_IN_YEAR; month++)&#123;</span><br><span class="line">            <span class="keyword">double</span> balance = calculator.calculateBalance(month);</span><br><span class="line">            System.out.println(NumberFormat.getCurrencyInstance().format(balance));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printMortgage</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">double</span> mortgage = calculator.calculateMortage();</span><br><span class="line">        String mortgageFormatted =</span><br><span class="line">                NumberFormat.getCurrencyInstance().format(mortgage);</span><br><span class="line">        System.out.println();</span><br><span class="line">        System.out.println(<span class="string">"MORTAGE"</span>);</span><br><span class="line">        System.out.println(<span class="string">"------"</span>);</span><br><span class="line">        System.out.println(<span class="string">"Monthly Payments: "</span> + mortgageFormatted);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>将这里的方法改成实例方法(Instance method)之后，Main class中的代码也需要随之更改了：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/20.png" style="zoom: 80%;"></p>
<h3 id="Moving-Static-Fields"><a href="#Moving-Static-Fields" class="headerlink" title="Moving Static Fields"></a>Moving Static Fields</h3><p>现在我们的程序结构变得越来越严谨和简洁了。但是我们发现Main CLass中还是有噪音。那就是 开头的两个 静态变量。很显然，这两个静态变量是不属于Main函数的，放在这里很突兀。因此我们需要给它们找到合适的归宿。</p>
<p>查看这个MONTHS_IN_YEAR 的用法，我们发现，在MortageCalculator类中用到两次，在MortageReport类中用到一次。</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/21.png" style="zoom: 80%;"></p>
<p>因此我们应该将这两个静态变量移动到 <code>MortageCalculator</code> 类当中去，然后让<code>MortageReport</code>引用它。注意，这里要设置<code>public</code> </p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/22.png" style="zoom: 80%;"></p>
<p>结果如下：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/23.png" style="zoom: 80%;"></p>
<h3 id="Extracting-Duplicate-Logic"><a href="#Extracting-Duplicate-Logic" class="headerlink" title="Extracting Duplicate Logic"></a>Extracting Duplicate Logic</h3><p>现在，我们将焦点放到 MortgageCalculator 类上。</p>
<p>我们发现， calculateBalance和 calculateMortgage 这两个方法的内部逻辑都差不多。比如，<code>numberOfPayments</code>和<code>monthlyInterest</code> 都是重复计算的。因此我们可以通过一些方法来简化这两个函数</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/24.png" style="zoom: 80%;"></p>
<p>因此，将这两个变量的计算抽象成单独的 Private Method是一个不错的方法。</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/25.png" style="zoom: 80%;"></p>
<p>将两个变量都操作完之后，我们得到了两个类似于getter的函数(因为是private的，所以和public的getter还是有区别的)。一般，我们把getter和setter都放到整个类的最底部。如下图所示：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/26.png" style="zoom: 80%;"></p>
<p>这样设计的好处，是分工特别明确。 MortagageCalculator只需要负责计算就可以了，当参数进行修改之后，不需要再通过复杂的传入就能实现计算。</p>
<h3 id="Extracting-getRemainingBalances-Title"><a href="#Extracting-getRemainingBalances-Title" class="headerlink" title="Extracting getRemainingBalances - Title"></a>Extracting getRemainingBalances - Title</h3><p>现在还有一个问题，就是 在 <code>MortgageReport</code> 类中的 <code>printPaymentShedule()</code>方法</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/27.png" style="zoom: 80%;"></p>
<p>我们发现这个for循环在这里就显得比较突兀。因为这个方法 <code>printPaymentShedule</code>的功能只是打印结果，而不应该有计算功能。因此我需要将这段代码抽象出来，放到负责计算的<code>MortgageCalculator</code>类当中去</p>
<p>在<code>MortagageCalculator</code> 中我们创建一个这样的方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">double</span>[] getRemainingBalances()&#123;</span><br><span class="line">       <span class="keyword">double</span>[] balances = <span class="keyword">new</span> <span class="keyword">double</span>[getNumberOfPayments()];</span><br><span class="line">       <span class="keyword">for</span>(<span class="keyword">short</span> month = <span class="number">1</span>; month&lt;= balances.length; month++)&#123;</span><br><span class="line">           balances[month-<span class="number">1</span>] = calculateBalance(month);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> balances;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>这个方法返回一个double类型的数组。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printPaymentShedule</span><span class="params">()</span></span>&#123;</span><br><span class="line">    System.out.println();</span><br><span class="line">    System.out.println(<span class="string">"PAYMENT SCHEDULE"</span>);</span><br><span class="line">    System.out.println(<span class="string">"------"</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">double</span> balance: calculator.getRemainingBalances())</span><br><span class="line">        System.out.println(NumberFormat.getCurrencyInstance().format(balance));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>因为在 <code>printPaymentShedule</code>中没有用到 getYears方法了，我们在calculator类中删除这个方法。</p>
<p>此外，我们也没有在<code>MortgageReport</code>类中用到 <code>MONTHS_IN_YEAR</code>和<code>PERCENT</code>这两个变量，因此我们可以将其改为private，以将Calculator类变得更加鲁棒。</p>
<h3 id="One-Last-Touch"><a href="#One-Last-Touch" class="headerlink" title="One Last Touch"></a>One Last Touch</h3><p> 最后，我们发现， <code>MortgageReport</code>类中的 NumberFormat.getCurrencyInstance()还可以变得更简单一些，于是，我们将其定义为这个类中的一个变量。如下图所示</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/28.png" style="zoom: 80%;"></p>
<h2 id="Inheritance"><a href="#Inheritance" class="headerlink" title="Inheritance"></a>Inheritance</h2><h3 id="Inheritance-1"><a href="#Inheritance-1" class="headerlink" title="Inheritance"></a>Inheritance</h3><p>继承，顾名思义就是能让我们重复利用一些代码。比如说我们要设计一组表单。那么我们可以参考这样的设计语言：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/29.png"></p>
<p>首先我们新建一个java类  <code>UIControl</code>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UIControl</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> isEnabled = <span class="keyword">true</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">enable</span><span class="params">()</span></span>&#123;</span><br><span class="line">        isEnabled = <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">disable</span><span class="params">()</span></span>&#123;</span><br><span class="line">        isEnabled = <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEnsabled</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> isEnabled;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>现在我们再新建一个<code>TextBox</code> 类：我们用 <strong>子类 extends 父类</strong>  来表示继承语法</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/30.png"></p>
<p>然后，这个子类就拥有了父类中的三个public方法： <code>enable(),disable(), isEnsabled()</code></p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/31.png"></p>
<h3 id="The-Object-Class"><a href="#The-Object-Class" class="headerlink" title="The Object Class"></a>The Object Class</h3><p>我记得在 <a href="https://jasonxqh.github.io/2020/05/26/OOP-in-JavaScript/">https://jasonxqh.github.io/2020/05/26/OOP-in-JavaScript/</a> 中讲过， 在Javascript中所有的对象都有一个对象的子对象。这个对象就叫做 <code>Object Class</code>  .在 Java中也是这样。Java中的任何一个类都是由Object类扩展而来，但不用写<code>class a extends Object</code>，无论是否指出，Object都被认为是此类的直接超类或间接超类。所以任何类都可以调用Object类中方法</p>
<p>比如说 <code>hashcode()</code>方法</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/32.png"></p>
<p>注意了，hashcode是每一个类专属的编码。如果我们直接用<code>equals</code> 方法比较 两个 <code>TextBox</code>实例，发现是false的。以后我们会将怎么通过比较类中的方法、参数来判断它们是否会向等。</p>
<h3 id="Constructors-and-Inheritance"><a href="#Constructors-and-Inheritance" class="headerlink" title="Constructors and Inheritance"></a>Constructors and Inheritance</h3><p>Java类中的布局一般是： 前面放参数，然后放构造函数，最后放一些 方法。</p>
<p>和C++、Javascript中一样，创建一个子类的实例对象的时候，会先调用其父类的构造函数，然后调用子类的构造函数。</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/33.png"></p>
<p>结果是先打印 UIControl，再打印TextBox。</p>
<p>但是如果我们再UIControl的构造器中加入一个setter：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/34.png"></p>
<p>那么这时候在 TextBox中的构造器就会报错。因为这时候父类已经不是默认构造函数了，而是有参构造函数。因此，我们想要调用子类的构造函数 ，就要手动调用父类中的构造函数，语法如下：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/35.png"></p>
<p>注意，这里 <code>super(参数)</code> 一定要写在构造器的第一行，位置改变就会报错。</p>
<h3 id="Access-Modifiers"><a href="#Access-Modifiers" class="headerlink" title="Access Modifiers"></a>Access Modifiers</h3><p>我们只要深刻了解这张表格就可以了，基本上和 C++ 是一样的。</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/36.png" style="zoom:150%;"></p>
<p>但是Protected不建议使用，因为界定不明确，容易误用。</p>
<h3 id="Overriding-Methods"><a href="#Overriding-Methods" class="headerlink" title="Overriding Methods"></a>Overriding Methods</h3><p>在java中，方法覆盖(重写)的实现是在子类中对从父类中继承过来的<strong>非私有方法</strong>的内容进行修改的一个动作。比如说我想在 TextBox中写一个函数 <code>toString()</code>  而这个函数其实是Object 类中的一个方法。因此我们就要使用 Method Overriding</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/37.png" style="zoom:150%;"></p>
<h3 id="Upcasting-and-Downcasting"><a href="#Upcasting-and-Downcasting" class="headerlink" title="Upcasting and Downcasting"></a>Upcasting and Downcasting</h3><p>Upcasting就是向上转型，Downcasting就是向下转型</p>
<p>在C++中我们提到过向上转型和向下转型。向上转型，就是java多态中的<strong>父类引用</strong>指向<strong>子类对象</strong>。但要注意的是 父类引用不可以访问子类新增加的成员(属性和方法)。换句话说，就是把子类类型转换为父类类型</p>
<p>向下转型则是相反，将一个对象”下放”成它的一个子类对象。</p>
<p>这里有一个例子，我们创建了一个 UIControl对象和TextBox对象。然后对其使用 <code>show()</code>  函数，我们发现堆textBox这个对象，使用 println()方法是无法打印出东西的。这是为什么？</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/38.png" style="zoom:150%;"></p>
<p>因为show函数传入的参数是一个Object对象，打印需要使用到对象的<code>toString()</code>函数，但是我们之前将textBox类中的<code>toString()</code>函数给重写了，并让其返回textBox中的参数text，然而此时我们仅仅是声明了textBox对象，并未设置其text属性，因此打印出来的是一个空字符串</p>
<p>然而我们要么在show方法的外面通过<code>textBox.setText(&quot;&quot;)</code>来设置text，要么在<code>show</code>函数里面设置text。但是问题又出现了。如果我们在show方法中直接使用 <code>control.</code>来访问，发现并没有<code>setText(&quot;&quot;)</code>函数，因为Object是 TextBox class的祖先对象，TextBox class中的方法并不会出现在Object class当中 。这时候我们就需要选择向下转型了：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/39.png" style="zoom: 80%;"></p>
<p>但是注意了，这边我们可以使用<code>show(textBox)</code>吗？ 答案是不行的：因为每一个textBox都是一个Object对象，但是不一定每个Object的对象都是textBox. 所以这里如果传进去一个非TextBox的实例，就会报错。</p>
<p>报错信息：<code>class com.company.UIControl cannot be cast to class com.company.TextBox</code></p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/40.png"></p>
<h3 id="Comparing-Objects"><a href="#Comparing-Objects" class="headerlink" title="Comparing Objects"></a>Comparing Objects</h3><p>现在我新建一个类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> x;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> y;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Point</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.x = x;</span><br><span class="line">        <span class="keyword">this</span>.y = y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>同时，我们在 main函数中新建两个 Point对象,它们有相同的x、y值，然后我们可以通过 == 或者 equals()来比较它们是否相等。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> point1 = <span class="keyword">new</span> Point(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line">    <span class="keyword">var</span> point2 = <span class="keyword">new</span> Point(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line">    System.out.println(point1==point2);</span><br><span class="line">    System.out.println(point1.equals(point2));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果是两个 false，因为不管是 == 还是默认的 equals() 都是比较这两个对象的引用。所以我们希望重写这个类的 equals() 方法，然后将其改为比较两个对象的 x、y值是否相等。</p>
<p>我们可以这样重写 equals函数。注意了，首先我们需要将Object类的参数obj 向下转型成当前的TextBox类，因为传入的参数是无法改变的(否则就是重载函数了)。 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> other = (Point)obj;</span><br><span class="line">    <span class="keyword">return</span> other.x==x &amp;&amp; other.y==y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>现在再运行 <code>point1.equals(point2)</code> ，结果为true</p>
<p>但这样写，是有一个bug的，那就是如果我 <code>point1.equals(new TextBox())</code> 的话 ，TextBox显然不能被强制转换成 Point类，因此，整个程序就crush了。</p>
<p>为了解决这个问题，我们还是可以选择条件语句：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">     <span class="keyword">if</span> (!(obj <span class="keyword">instanceof</span> Point))</span><br><span class="line">         <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">     <span class="keyword">var</span> other = (Point)obj;</span><br><span class="line">     <span class="keyword">return</span> other.x==x &amp;&amp; other.y==y;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>那么问题来了，如果我直接 <code>point1.equal(point1)</code> 会怎么样？毫无疑问是返回true的，但还是通过比较<code>other.x==x &amp;&amp; other.y==y;</code> 来实现的，这样程序的性能就会变差。</p>
<p>我们可以先比较一下他们的reference是否相同。如果相同就直接返回true。</p>
<p>此外，我们在重写 equals()的同时也要重写hashcode方法。</p>
<p>我们先来看一下Object.hashCode的通用约定<br>　　1.在一个应用程序执行期间，如果一个对象的equals方法做比较所用到的信息没有被修改的话，那么，对该对象调用hashCode方法多次，它必须始终如一地返回同一个整数。在同一个应用程序的多次执行过程中，这个整数可以不同，即这个应用程序这次执行返回的整数与下一次执行返回的整数可以不一致。<br>　　2.如果两个对象根据equals(Object)方法是相等的，那么调用这<strong>两个对象中任一个对象的hashCode方法必须产生同样的整数</strong>结果。<br>　　3.如果两个对象根据equals(Object)方法是不相等的，那么调用这两个对象中任一个对象的hashCode方法，<strong>不要求必须产生不同的整数结果 </strong>。然而，程序员应该意识到这样的事实，<strong>对于不相等的对象产生截然不同的整数结果 </strong>，有可能提高散列表（hash table）的性能。</p>
<p>　　如果只重写了equals方法而没有重写hashCode方法的话，则会违反约定的第二条：相等的对象必须具有相等的散列码（hashCode）</p>
<p>因为：两个对象相等，hashcode一定相等</p>
<p>　　    两个对象不等，hashcode不一定不等</p>
<p>　　    hashcode相等，两个对象不一定相等</p>
<p>　　    hashcode不等，两个对象一定不等</p>
<p>我们可以直接通过 Idea内置的方法来帮我们生成这两个函数：在generate中点击 equals和hashCode ，就可以生成了：Java帮我们自动生成的代码覆盖面更广，更全面。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (<span class="keyword">this</span> == o) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">       <span class="keyword">if</span> (o == <span class="keyword">null</span> || getClass() != o.getClass()) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">       Point point = (Point) o;</span><br><span class="line">       <span class="keyword">return</span> x == point.x &amp;&amp;</span><br><span class="line">               y == point.y;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       <span class="keyword">return</span> Objects.hash(x, y);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h3 id="Polymorphism"><a href="#Polymorphism" class="headerlink" title="Polymorphism"></a>Polymorphism</h3><p>Polymorphism就是多态。所谓多态，就是同一个行为具有多个不同表现形式或形态的能力。比如说下面这个例子，<code>TextBox()</code> <code>CheckBox()</code>  都是继承自 UIControl 的，但是我们希望当controls数组中的元素是TextBox()时，就渲染出TextBox的内容，反之，如果时CheckBox，那么就渲染出CheckBox。这样我们就可以不使用 if语句。</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/41.png"></p>
<p>为了实现这个方法，我们首先在 UIControl 中新建一个 render方法。然后我们分别在TextBox和CheckBox中重写这个render方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CheckBox</span> <span class="keyword">extends</span> <span class="title">UIControl</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">render</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Render CheckBox"</span>);<span class="comment">//System.out.println("Render TextBox");</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最后我们在main函数中这样写，结果是我们想见到的。：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/42.png"></p>
<h3 id="Abstract-Classes-and-Methods"><a href="#Abstract-Classes-and-Methods" class="headerlink" title="Abstract Classes and Methods"></a>Abstract Classes and Methods</h3><p>抽象类和抽象方法就是不能被实例化的类。比如说这里的 UIControl 方法。UIControl 是一种概念，一种共同属性的抽象几何，因此我们可以用<code>abstract</code> 关键字来定义抽象类。抽象类的作用仅仅是表达一个接口，并不是写具体的实现细节。抽象类中可以存在抽象方法，抽象方法也是使用 <code>abstract</code> 关键字来修饰的。抽象的method是不完全的，他只有声明，没有 大括号{}</p>
<p>这里我们堆UIControl类进行一个改造</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/43.png"></p>
<p>当我们声明了一个类为 抽象类，并在这里声明了一个抽象函数的时候。他的子类要么是继承这个抽象类的，要么是将这个类中的抽象方法进行重写。否则会报错</p>
<h3 id="Final-Classes-and-Methods"><a href="#Final-Classes-and-Methods" class="headerlink" title="Final Classes and Methods"></a>Final Classes and Methods</h3><p>我们知道 抽象类是不能实例化的，他们只能被继承。 Final则相反。当我们声明一个类是final class的时候，他就不能再被继承了。</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/44.png"></p>
<p>一般来说我们不要轻易得用 final去修饰一个类。因为这就堵住了这个类被继承的可能性。</p>
<p>当我们 将一个 方法定成 final method的时候，这个方法就不能再被重写了</p>
<h3 id="Deep-Inheritance-Hierarchies"><a href="#Deep-Inheritance-Hierarchies" class="headerlink" title="Deep Inheritance Hierarchies"></a>Deep Inheritance Hierarchies</h3><p>注意，不要一直使用继承结构！</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/45.png"></p>
<p>比如说这个情况，这样一直继承很多代就会导致代码的耦合度非常非常高，后期维护起来异常困难。</p>
<p>所以这里 虽然 Instructor和Student之间可能存在相同的逻辑，但是他们也不应该通过继承联系起来。</p>
<h3 id="Multiple-Inheritance"><a href="#Multiple-Inheritance" class="headerlink" title="Multiple Inheritance"></a>Multiple Inheritance</h3><p>在Java中，不像C++，可能有多个 Parent对象。 菱形继承在Java中是不可行的。</p>
<h2 id="Interfaces"><a href="#Interfaces" class="headerlink" title="Interfaces"></a>Interfaces</h2><h3 id="What-are-Interfaces"><a href="#What-are-Interfaces" class="headerlink" title="What are Interfaces"></a>What are Interfaces</h3><p>Interfaces (接口) 在 JAVA中是一个抽象类型。它可以帮助我们构建低耦合的、易继承的、易测试的软件。</p>
<p>因为我们希望类与类之间的耦合度降到最低，这样我们就可以尽可能少的“牵一发而动全身”</p>
<p>原来A、B两个类可能是这样的：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/47.png"></p>
<p>但是使用了 Interface之后，他们的关系就成了这样：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/46.png"></p>
<p>也就是说，现在修改B甚至替换B，不会对A造成任何影响</p>
<p><strong>接口与类相似点：</strong></p>
<ul>
<li>一个接口可以有多个方法。</li>
<li>接口文件保存在 .java 结尾的文件中，文件名使用接口名。</li>
<li>接口的字节码文件保存在 .class 结尾的文件中。</li>
<li>接口相应的字节码文件必须在与包名称相匹配的目录结构中。</li>
</ul>
<p><strong>接口与类的区别：</strong> </p>
<ul>
<li>接口<strong>不能用于实例化对象</strong>。</li>
<li>接口<strong>没有构造方法</strong>。</li>
<li>接口中所有的方法必须是<strong>抽象方法</strong>。</li>
<li>接口不能包含成员变量，除了 static 和 final 变量。</li>
<li>接口<strong>不是被类继承</strong>了，而是要<strong>被类实现</strong>。</li>
<li>接口是说：应该做<strong>什么</strong> ，而类是说：应该<strong>怎么</strong>做</li>
<li>接口<strong>支持多继承</strong>。</li>
</ul>
<p>比如说，我在接口中定义了一个 Sorting，那么我们就可以在不同的类中实现不同的排序算法。</p>
<p>又比如说，税率计算器，我在接口中定义了一个计算器，但是每年税务政策不同，我就要用不同的 类来实现不同的计算方法</p>
<h3 id="Tightly-coupled-Code"><a href="#Tightly-coupled-Code" class="headerlink" title="Tightly-coupled Code"></a>Tightly-coupled Code</h3><p>现在我声明两个类：<code>TaxCalculator</code>和<code>TaxReport</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TaxCalculator</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> taxableIncome;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TaxCalculator</span><span class="params">(<span class="keyword">double</span> taxableIncome)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.taxableIncome = taxableIncome;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">calculateTax</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> taxableIncome*<span class="number">0.3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TaxReport</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> TaxCalculator calculator;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TaxReport</span><span class="params">()</span></span>&#123;</span><br><span class="line">        calculator = <span class="keyword">new</span> TaxCalculator(<span class="number">100_000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">var</span> tax = calculator.calculateTax();</span><br><span class="line">        System.out.println(tax);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们发现这两个类实际上是高耦合的。</p>
<p>比如说， <code>TaxReport</code> 中新建了 TaxCalculator 实例，导致当 <code>TaxCalculator</code>修改变量个数时，<code>TaxReport</code> 就会报错。</p>
<h3 id="Creating-an-Interface"><a href="#Creating-an-Interface" class="headerlink" title="Creating an Interface"></a>Creating an Interface</h3><p>现在我们新建一个 <code>Interface</code></p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/48.png"></p>
<p>然后将原来的 <code>TaxCalculator</code> 改为 <code>TaxCalculator2020</code> </p>
<p>一般来说，Interface的命名规则是加上一个 前缀 <code>can</code> 或者 <code>I</code>, 或者是 <code>**able</code> 之类的词语。</p>
<p>因为这是一个接口，只做方法声明，并且这个方法是要被其他的类实现的，必然是public的。所以，在声明方法的时候并不需要加 public。</p>
<p>在 <code>TaxCalculator2020</code>这个类中调用 接口，我们需要这样来写：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TaxCalculator2020</span> <span class="keyword">implements</span> <span class="title">TaxCalculator</span></span>&#123;...&#125;</span><br></pre></td></tr></table></figure>
<p>如果还有继承，那么 我们一般把继承写在引入接口的前面：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TaxCalculator2020</span> <span class="keyword">extends</span> <span class="title">Object</span> <span class="keyword">implements</span> <span class="title">TaxCalculator</span></span>&#123;...&#125;</span><br></pre></td></tr></table></figure>
<p>在实现接口中的函数的时候(这里时 <code>calculateTax</code>) 我们最好在前面写一个 <code>@Override</code> ，这样，当接口中这个方法被删除的时候，@Override 就会报错，作为一个提醒。</p>
<p>接下来，我们要在 <code>TaxReport</code> 类中使用接口</p>
<h3 id="Dependency-Injection"><a href="#Dependency-Injection" class="headerlink" title="Dependency Injection"></a>Dependency Injection</h3><p>现在我们来讲一个很重要的概念： 依赖嵌入(Dependency Injection)</p>
<p>这个意思是说，我们的类不应该实例化他们的依赖项(dependencies)</p>
<p>也就是说 TaxReport这个类不应该去创建一个实例化的Calculator对象出来，而是仅仅使用它。Injection的意思时注射，这非常形象，我们要做的就是通过某种方法来给<code>TaxReport</code> <strong>注射</strong>一个Calculator实例化对象。</p>
<p>我们有很多的方法来实现这一想法：下面会一一介绍 Constructor Injection，Setter Injection以及 Method Injection</p>
<h3 id="Constructor-Injection"><a href="#Constructor-Injection" class="headerlink" title="Constructor Injection"></a>Constructor Injection</h3><p>我们先用 Constructor 来实现 Dependency Injection.</p>
<p>对于刚才耦合度很高的 TaxReport 代码，我们做出如下修改:</p>
<p>我们将实例化的 <code>TaxCalculator2020</code>改成了调用一个接口 <code>TaxCalculator</code> ,然后直接调用 <code>TaxCalculator</code>中的 <code>calculateTax()</code> 代码。</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/49.png"></p>
<p>这样我们在main中可以声明一个  <code>TaxCalculator2020</code> 的实例化对象，然后传入到 <code>TaxReport</code> 的构造函数中去，但是完全没有报错。</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/54.png"></p>
<p>这就叫 <code>Programming against interface</code></p>
<p>通过这样的技巧，当<code>TaxCalculator</code> 中的方法进行修改，或者新创建了一个实现接口的类<code>TaxCalculator2019</code> ，都不会影响到 <code>TaxReport</code> ,这个类不需要重新编译了，因为他引用的只是一个接口罢了。</p>
<p>在这个简单的程序中我们只有2个类，但是在大型的项目中，可能有成百上千的类。并且这些类可能都含有很多的 <code>dependency</code> 那么这时候在main函数中自己申明这么多对象就显得不现实了。因此，spring等框架就是帮我们减少这部分的工作量的。</p>
<h3 id="Setter-Injection"><a href="#Setter-Injection" class="headerlink" title="Setter Injection"></a>Setter Injection</h3><p>同样的，我们可以通过setter来 给 TaxReport类<strong>注射</strong>实例化对象，首先我们必须在<code>TaxReport</code> 中创建一个setter</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/51.png"></p>
<p>然后，我新建了一个 <code>TaxCalculator2019</code> 的类，并将其通过 setter注射给了report</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/50.png"></p>
<p>相比于 setter Injection ，Constructor Injection是一种更加普遍的方法。</p>
<h3 id="Method-Injection"><a href="#Method-Injection" class="headerlink" title="Method Injection"></a>Method Injection</h3><p>Method相比于前两种方法更为精简。也就是将 <strong>实例化对象</strong> 直接通过一个方法注射进 <code>TaxReport</code>类当中去。</p>
<p>比如说，我这样修改我的 <code>show()</code>函数：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/52.png"></p>
<p>然后在 <code>Main()</code>函数中，我们就直接通过 show()传对象就行了。</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/53.png"></p>
<p>对于Method Injection ，Constructor Injection 可以更明显的告诉我们两个类之间的 dependency,因为我们是通类的构造函数传入的，非常直观。</p>
<p>虽然现在我们的耦合度已经很低了，但是class或多或少还是和 Interface存在着一些关联性。所以在设计接口的时候，我们要尽量轻量化、简洁化，不要搞一个很重型的接口。</p>
<h3 id="Interface-Segregation-Principle"><a href="#Interface-Segregation-Principle" class="headerlink" title="Interface Segregation Principle"></a>Interface Segregation Principle</h3><p>接口分离原则，简单来说就是将“大(函数多、复杂)” 的接口拆分成一些更小、更轻量化的接口</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/55.png" style="zoom:67%;"></p>
<p>比如说我这里新建了一个 <code>UIWidget</code> 类，主要是一些窗口小部件之类的(如 text boxes) ，然后在其中声明三个方法： <code>drag</code>, <code>resize</code>,<code>render</code> </p>
<p>然后我又去新建了一个 <code>Dragger</code> 类，然后我们要用到UIWidget接口中的 drag方法。如下图所示：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/56.png" style="zoom:80%;"></p>
<p>但是这样的话，就会显得耦合度过高。比如说，我在 <code>UIWidget</code> 中修改 <code>resize()</code> ,那么即使我们没有修改任何关于<code>drag()</code>中的内容，<code>drag()</code>以及 <code>Dragger</code> 中的也会重新编译一遍。这还是只有三个方法的接口，那么当一个接口中有十几二十个方法的时候，修改接口中的一个方法，波及到用到接口的所有的类以及类的子类们，这个代价恐怕是非常大的。因此我们可以将接口拆封成几个更小的接口,如下图所示：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/57.png" style="zoom:80%;"></p>
<p>我们将<code>Drag()</code> 单独拉出来成立一个 接口。然后在<code>Dragger</code>类中只使用<code>Draggable</code>接口，这样就降低了很多耦合的情况。</p>
<p>如果我觉得一定要将这三个功能(drag,resize,render)放在一起，我们可以使用 <code>接口 extends 接口</code>的操作：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/58.png" style="zoom:80%;"></p>
<p>这样 <code>UIWidget</code> 就会继承 <code>Draggable</code> 接口，并且我在<code>Dragger</code>中传入<code>UIWidget</code>对象也不会报错。</p>
<p>接下来我们使用 <code>Idea</code>的内置方法来帮助我们自动生成接口：</p>
<p>选中 resize 方法，用 <code>control+t</code> 快捷键打开Refactor菜单，向下找到 <code>Extract Interface</code>选项，点击并重命名新的接口名称为 <code>Resizable</code> </p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/59.png" style="zoom:80%;"></p>
<p>然后IDEA会提醒我们说： IDEA可以分析UIWidget的用法，并在可能的情况下将其替换为Resizable的用法，我们选择不需要。结果如下：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/60.png" style="zoom:80%;"></p>
<p>但是 Interface segregation 并不是要求我们将每一个函数都独立成一个接口。而是让我们要将不同功能的方法给区分开来。比如说在这个例子里，对一个对象来说，resizing和redragging 是两种不同的操作。但是在resize中我们有可能存在很多不同的方法：比如<code>void  resize(int x,int y)(通过坐标修改)</code>,<code>resizeTo(UIWidget widget) 将一个对象的形状赋值给另一个对象等</code> 这些都可以放到同一个接口当中。</p>
<p>我们还注意到一个接口可以继承多个接口，而在类中这是不能实现的。</p>
<h3 id="Fields-in-Interfaces"><a href="#Fields-in-Interfaces" class="headerlink" title="Fields in Interfaces"></a>Fields in Interfaces</h3><p>最近几年，Java的接口多了很多新的特性。但是这并不是一个很好的发展方向。我们在使用这些新的特性的时候，必须清楚自己到底在干什么，合不合理，否则不要滥用。</p>
<p>第一个特性就是在接口中定义参数。</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/61.png" style="zoom:80%;"></p>
<p>这时候的参数，默认是一个常数，是不能被改变的。但这个功能比较鸡肋，尽量不要使用。因为如果修改了这个参数，所有与其相关的类都会受到影响。</p>
<h3 id="Static-Methods"><a href="#Static-Methods" class="headerlink" title="Static Methods"></a>Static Methods</h3><p>还是一样的道理，我们如果修改了method内部的逻辑，就会影响到与接口相关的所有类。</p>
<h3 id="Private-Methods"><a href="#Private-Methods" class="headerlink" title="Private Methods"></a>Private Methods</h3><p>私有方法在接口中就显得更加突兀了。这应该是细节，并不是要在接口这么抽象的东西中实现。</p>
<h3 id="Interfaces-and-Abstract-Classes"><a href="#Interfaces-and-Abstract-Classes" class="headerlink" title="Interfaces and Abstract Classes"></a>Interfaces and Abstract Classes</h3><p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/_posts/Java基础2/62.png" alt="62" style="zoom:67%;"></p>
<p>现在我们来谈谈 接口和抽象类之间的区别。以前，接口只做声明、没有具体代码和执行操作。我们用其实现低耦合的、易继承的、易测试的软件。但是抽象类 则是在不同的类之间共享一段相似的代码。两者的区别是十分清晰的。但是现在，接口中出现了很多不好的特性：静态函数、私有函数、变量等。让他越来越像是一个类了，此外，由于接口的多继承特性，它常常被用来hack 掉java不能多继承的原则。如下图：</p>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/_posts/Java基础2/63.png" alt="62" style="zoom:67%;"></p>
<p>再说一遍，接口不要和类混为一谈！</p>
<h3 id="When-to-Use-Interfaces"><a href="#When-to-Use-Interfaces" class="headerlink" title="When to Use Interfaces"></a>When to Use Interfaces</h3><ul>
<li>Swap Implementations:  自从利用了接口之后，我们就降低了类与类之间的耦合度。对于一个app来说可以很容易的切换它所需要用到的服务。比如这里，当使用不同的 VideoEncoder的服务，我们就可以直接修改Encoder当中的内置算法，但对VideoProcessor并不会产生影响，对于 <code>VideoProcessor</code>来说，接口好像是一个黑匣子，只要把一个对象传进去就可以了。</li>
</ul>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/_posts/Java基础2/64.png" alt="62" style="zoom:67%;"></p>
<ul>
<li>Extend Your Applications: 当我们设计了一套框架，想给别人用的时候，也需要用到接口。比如说我们有这样一个逻辑：我们的框架应该有一个 模板引擎来处理客户端发来的http请求。这时候我们就可以使用接口，来让我们的http反馈通过接口传给用户。这样，用户也能通过其他的模板引擎处理http请求。</li>
</ul>
<p><img src="/2020/07/05/Java%E5%9F%BA%E7%A1%802/_posts/Java基础2/65.png" alt="62" style="zoom:67%;"></p>
<ul>
<li>Test Your Class in Isolation</li>
</ul>
<p>如果我们的类在使用 邮箱服务或者是存储引擎，我们可以通过接口来单独测试这个类。这就是我们所说的 单元测试。</p>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/07/03/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/%5Bobject%20Object%5D">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/07/03/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE4/" itemprop="url">离散数学之图4</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-07-03T10:51:14+08:00">
                2020-07-03
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2020-07-06T13:14:20+08:00">
                2020-07-06
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%9B%BE/" itemprop="url" rel="index">
                    <span itemprop="name">图</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="离散数学之图4"><a href="#离散数学之图4" class="headerlink" title="离散数学之图4"></a>离散数学之图4</h1><p>我们在购物的时候，常常会收到宝贝推荐，那么网站是根据什么原理来推送给我们的呢？</p>
<p>我们需要了解<strong>协同过滤</strong>的概念. 也就是我们需要衡量两个对象之间的距离、亲和度</p>
<h2 id="Community-Structures"><a href="#Community-Structures" class="headerlink" title="Community Structures"></a>Community Structures</h2><h3 id="Definition"><a href="#Definition" class="headerlink" title="Definition"></a>Definition</h3><p>Community structure indicates that the network divides naturally into groups of nodes with dense connections internally and sparser connections between groups.</p>
<p>Community structure  就是说把一些节点分成几个部分，在每一个部分中节点之间连接比较紧密；但是在组和组之间的连接比较稀疏。比如根据国家与国家之间的关系网络，分成几大阵营</p>
<ul>
<li>Global community structures: clustering-based approach,spectral clustering, modularity-based approach, etc. 把每一个节点至少划分到一个社团当中</li>
<li>Local community structures: node-centric community, group-centric community 只关心一小部分<ul>
<li>Traditional network: clique完全图, quasi-clique接近完全图, k-clique, k-core, etc. </li>
<li>Bipartite network: bi-clique二分完全图, quasi-bi-clique, etc.</li>
<li>Signed network: antagonistic community, quasi-antagonistic community, etc. Signed network就是节点和节点之间有一条边，边可以是negative或者positive的：negative代表敌对，positive代表联合<ul>
<li>敌人的敌人就是朋友</li>
<li><img src="/2020/07/03/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE4/1.png" style="zoom:80%;"></li>
<li>只有当三个符号相乘为正号的时候，才能说这个三角关系是稳定的，如果这三个符号相乘为符号，最终也会通过一个符号的改变趋于稳定。如果全是负号，说明三者都不对付，那么两个势必联合起来对服实力较强的一方从而转化成 - - +；又比如仅有一个负号，那么这两方就会劝另一方进入自己的阵营。变成—+或者两方和解称为+++</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="Global-Structure"><a href="#Global-Structure" class="headerlink" title="Global Structure"></a>Global Structure</h3><p>我们可以利用Global Structure 进行可视化：可以把社交圈分成几个部分</p>
<p>经过community detection之后，我们可以看到相同的圈子里，建立一条边非常容易。但是不同圈子里的人就很难联系上。所以利用这个可以做好友推荐。</p>
<p><img src="/2020/07/03/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE4/2.png" style="zoom:90%;"></p>
<h4 id="Clustering-based-on-vertex-similarity"><a href="#Clustering-based-on-vertex-similarity" class="headerlink" title="Clustering based on vertex similarity"></a>Clustering based on vertex similarity</h4><p>K-means是一种无监督的方法，也就是说不需要训练数据。给我一堆数据就可以挑选出什么是一类的，什么不是一类的。 K就代表 cluster（类）的数量</p>
<p>首先把点放到一个高维的空间当中，然后不断地计算点和点之间的距离，距离相近地归类，然后重新计算类中心。</p>
<p>经过多次 K-means的运算，一直到类的中心不再变化。完成聚类。</p>
<p><img src="/2020/07/03/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE4/3.png" style="zoom:90%;"></p>
<p><img src="/2020/07/03/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE4/1.jpg" style="zoom:80%;"></p>
<h4 id="Spectral-clustering"><a href="#Spectral-clustering" class="headerlink" title="Spectral clustering"></a>Spectral clustering</h4><p>Let $L$ be normalized Laplacian of graph $G$, the algorithm partitions nodes into two sets $(B1, B2) $based on the eigenvector <strong>v</strong> corresponding to the second-smallest eigenvalue of $L$. Partitioning may be done in<br>various ways:</p>
<ul>
<li>Assign all nodes whose component in <strong>v</strong> satises certain condition in $B_1$, and $B_2$ otherwise, e.g., larger than median, the sign of each entry of <strong>v</strong>.</li>
<li>The algorithm can be used for hierarchical clustering by repeatedly partitioning the subsets in this fashion.</li>
</ul>
<h4 id="Modularity-模块度"><a href="#Modularity-模块度" class="headerlink" title="Modularity 模块度"></a>Modularity 模块度</h4><p><img src="/2020/07/03/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE4/4.png" style="zoom:90%;"></p>
<h4 id="Louvain-method"><a href="#Louvain-method" class="headerlink" title="Louvain method"></a>Louvain method</h4><p><img src="/2020/07/03/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE4/2.jpg" style="zoom: 67%;"></p>
<h4 id="Clique"><a href="#Clique" class="headerlink" title="Clique"></a>Clique</h4><p><img src="/2020/07/03/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE4/5.png" style="zoom: 80%;"></p>
<h4 id="Extensions-of-clique"><a href="#Extensions-of-clique" class="headerlink" title="Extensions of clique"></a>Extensions of clique</h4><p><img src="/2020/07/03/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE4/6.png" style="zoom: 80%;"></p>
<h3 id="local-Structure"><a href="#local-Structure" class="headerlink" title="local Structure"></a>local Structure</h3><p><img src="/2020/07/03/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE4/7.png" style="zoom: 80%;"></p>
<h2 id="Node-Proximity-顶点亲和度"><a href="#Node-Proximity-顶点亲和度" class="headerlink" title="Node Proximity 顶点亲和度"></a>Node Proximity 顶点亲和度</h2><p>Node proximity (= similarity or closeness, but $\not=$ distance) measures:</p>
<ul>
<li>Information exchange</li>
<li>Latency/speed of information exchange</li>
<li>Likelihood of future link</li>
<li>Propagation of a product/idea/service/ disease</li>
<li>Relevance: ranking</li>
</ul>
<p>通过顶点和顶点之间的亲和度，我们可以计算出信息之间交换可能性的大小，信息传递速率的快慢，两点之间未来产生一条边的概率,产品、idea、服务、疾病的扩散情况,。</p>
<h3 id="Simple-Approaches"><a href="#Simple-Approaches" class="headerlink" title="Simple Approaches"></a>Simple Approaches</h3><p>Jaccard比Common neighbors计算出来的相似度更准确</p>
<p>Adamic/Adar：公共好友的neighbors越多，那么做出的贡献越小。</p>
<p><img src="/2020/07/03/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE4/8.png" style="zoom: 90%;"></p>
<p>缺点就是把这张图看成了集合，没有考虑朋友的朋友</p>
<h3 id="Graph-theoretic-Approaches"><a href="#Graph-theoretic-Approaches" class="headerlink" title="Graph-theoretic Approaches"></a>Graph-theoretic Approaches</h3><p><img src="/2020/07/03/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE4/9.png" style="zoom: 90%;"></p>
<p><img src="/2020/07/03/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE4/10.png" style="zoom: 90%;"></p>
<h3 id="SimRank"><a href="#SimRank" class="headerlink" title="SimRank"></a>SimRank</h3><p>SimRank假设每两个点之间都有一个相似度。然后迭代来算，每一轮计算a与b的相似度的时候，根据上一轮的结果来计算。如果a!=b,那么根据这个公式，通过c和d（ab的好友）的相似度加权集合来计算a和b的相似度</p>
<p><img src="/2020/07/03/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE4/11.png" style="zoom: 90%;"></p>
<h3 id="Random-Walk-based-Approaches"><a href="#Random-Walk-based-Approaches" class="headerlink" title="Random Walk based Approaches"></a>Random Walk based Approaches</h3><p><img src="/2020/07/03/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE4/12.png" style="zoom: 90%;"></p>
<p><img src="/2020/07/03/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E4%B9%8B%E5%9B%BE4/13.png" style="zoom: 90%;"></p>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/%5Bobject%20Object%5D">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/" itemprop="url">数据科学与工程数学基础1</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-07-01T23:23:08+08:00">
                2020-07-01
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2021-05-04T20:12:42+08:00">
                2021-05-04
              </time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="第二章-向量与矩阵基础"><a href="#第二章-向量与矩阵基础" class="headerlink" title="第二章:向量与矩阵基础"></a>第二章:向量与矩阵基础</h1><p> 课程 :<a href="http://mooc1.chaoxing.com/nodedetailcontroller/visitnodedetail?courseId=208843967&amp;knowledgeId=282612421" target="_blank" rel="noopener">http://mooc1.chaoxing.com/nodedetailcontroller/visitnodedetail?courseId=208843967&amp;knowledgeId=282612421</a></p>
<h2 id="第二讲-向量与矩阵的基本概念与运算"><a href="#第二讲-向量与矩阵的基本概念与运算" class="headerlink" title="第二讲:向量与矩阵的基本概念与运算"></a>第二讲:向量与矩阵的基本概念与运算</h2><h3 id="2-1向量与矩阵的基本概念"><a href="#2-1向量与矩阵的基本概念" class="headerlink" title="2.1向量与矩阵的基本概念"></a>2.1向量与矩阵的基本概念</h3><p>点的平面、空间坐标；球在空间当中的位置；力、加速度等，需要多个数字来刻画</p>
<p>在数据科学，模式分析，人工智能领域，我们也需要刻画来自网络世界中的对象：一副图像，一段文字，一条记录等等。为了准确理解这些传感器中的数值以及数据，我们也需要根据一定的顺序来排列这些数据，让他形成有序的数组来避免混淆。</p>
<p>我们把数组抽象出来，那么就会形成向量的概念。数组中每个数据由n个索引来确定，那么这个数组就被称为n元有序数组，也会称其为数表。如果这个数表是 nXm 的，那么将其抽象出来就得到了矩阵的概念。</p>
<p>比如，我们用词袋模型来解释一下：</p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/1.png" style="zoom:80%;"></p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/2.png" style="zoom:80%;"></p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/3.png" style="zoom:80%;"></p>
<h4 id="向量的定义："><a href="#向量的定义：" class="headerlink" title="向量的定义："></a>向量的定义：</h4><p>在给出响亮的形式化定义之前，我们先给出数组中的数值定义一个所属的范围，以方便向量进行代数运算，也就是数域</p>
<h5 id="定义一："><a href="#定义一：" class="headerlink" title="定义一："></a>定义一：</h5><p>设 $\mathbb K$ 是由一些数组成的集合，如果 $\mathbb K$ 中包含0与1 ，并且$\mathbb K$ 中任意两个数的和，差，积，商（除数不为0）仍在$\mathbb K$中，则称 $\mathbb K$是一个数域</p>
<p>有理数集，实数集和复数集都是数域，他们分别称为有理数域$\mathbb Q$ 实数域 $\mathbb R$ 和 复数域 $\mathbb C$</p>
<h5 id="定义二："><a href="#定义二：" class="headerlink" title="定义二："></a>定义二：</h5><p>由数域  $\mathbb K$ 中的n个数 组城的有序数组$(a_1,a_2,….a_n)$称为 $\mathbb K$ 上的n维向量，记为 <strong>a</strong>$=(a_1,a_2,….a_n)$ ,其中第i个数$a_i$ 称为 <strong>a</strong> 的第i个分量</p>
<p>当 <strong>a</strong> 的每个分量是实数时，则称 <strong>a</strong> 为<strong>实向量</strong>。所有n维实向量构成的集合记为 $\mathbb R^n$ </p>
<p>当 <strong>a</strong> 的每个分量是复数时，则称 <strong>a</strong> 为<strong>复向量</strong>。所有n维复向量构成的集合记为 $\mathbb C^n$ </p>
<p>上述定义的是行向量。在实际使用中，我们通常使用列向量。我们可以使用转置把列向量转换成行向量，或者把行向量转换成列向量        </p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/4.png" style="zoom:80%;"></p>
<p>根据上述定义，例一中的四个数组用向量表示即为：</p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/5.png" style="zoom:80%;"></p>
<p>在科学和工程中遇到的向量可以分为以下三种：</p>
<p>1）<strong>物理向量</strong>：泛指既有幅值，又有方向的物理量：如速度、加速度、位移等</p>
<p>2）<strong>几何向量</strong>：为了把物理向量可视化，常用带方向的线段表示。这种有向线段被称为集合向量。例如：$v=\vec{AB}$ 表示的有向线段。起点为 A，终点为B。</p>
<p>3）<strong>代数向量</strong>：几何向量可以用代数形式表示。例如，若平面上的几何向量 $v=\vec{AB}$ 的起点坐标为$A=(a_1,a_2)$ 终点坐标为$B= (b_1,b_2)$ 则该集合向量可以表示为代数形式 $\left(\begin{matrix}b_1-a_1\b_2-a_2\end{matrix}\right)$  .这种代数形式表示的集合向量成为代数向量。</p>
<p>可以这样细分：</p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/6.png" style="zoom:80%;"></p>
<p>根据取值种类不同，代数向量又可以分为下面三种：</p>
<p>1) 常数向量： 向量的元素全部为实常数或者复常数，如 <strong>a</strong> = $[1,5,4]^T$ 等</p>
<p>2) 函数向量： 向量的元素包含了函数，如 $x = [1,x^2,x^3,…,x^n]^T$ 等</p>
<p>3) 随机向量： 向量的元素为随机变量或者随机过程 如 $x(n) = [x_1(n),…,x_m(n)]^T$ 其中  $x_1(n),…x_m(n)$是m个随机过程或者随机信号（概率基础部分会讨论）</p>
<h4 id="文本向量集的表示"><a href="#文本向量集的表示" class="headerlink" title="文本向量集的表示"></a>文本向量集的表示</h4><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/7.png" style="zoom:80%;"></p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/8.png" style="zoom:80%;"></p>
<h4 id="矩阵的定义："><a href="#矩阵的定义：" class="headerlink" title="矩阵的定义："></a>矩阵的定义：</h4><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/9.png" style="zoom:67%;"></p>
<ul>
<li>矩阵是一个二元数组，二向量是矩阵的一种特殊形式，当 m = 1 或者 n= 1的时候，矩阵退化为向量<ul>
<li>1Xn 的矩阵称之为行向量</li>
<li>mX1的矩阵称之为列向量</li>
</ul>
</li>
<li>当A的每个元素是是实数，则称A是实矩阵。所有n维实矩阵构成的集合为 $\mathbb R^{mxn}$</li>
<li>当A的每个元素是是复数，则称A是复矩阵。所有n维复矩阵构成的集合为 $\mathbb C^{mxn}$</li>
</ul>
<p>在例二中，6X4 的 而原数组被称为一个词项-文档矩阵，这个矩阵的每一列表示一个新闻提要的词频向量，每一行表示每个词项在各个新闻中出现的权重。</p>
<p>在例三中，15X14 的而原数组被称为一个灰度图像矩阵，这个矩阵的每一行代表水平像素，每一列代表垂直像素</p>
<h3 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h3><p>一元数组：向量</p>
<p>二元数组:  矩阵</p>
<p>三元数组及以上的高维数组：</p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/10.png" style="zoom:80%;"></p>
<p><strong>更好的表示</strong></p>
<ul>
<li>寻找原始特征向量的低维近似： 主成分分析和奇异值分解</li>
<li>寻找原始特征向量的高维表示:    利用特征映射构造原始特征向量的高维非线性组合。</li>
</ul>
<h3 id="2-2向量和矩阵的运算"><a href="#2-2向量和矩阵的运算" class="headerlink" title="2.2向量和矩阵的运算"></a>2.2向量和矩阵的运算</h3><h4 id="向量的线性运算"><a href="#向量的线性运算" class="headerlink" title="向量的线性运算"></a>向量的线性运算</h4><p>向量之间的基本代数运算有两种:加法和数乘，统称为向量的线性运算</p>
<h5 id="定义4"><a href="#定义4" class="headerlink" title="定义4"></a>定义4</h5><p>设向量 $a = (a_1,a_2…,a_n),b=(b_1,b_2…,b_n)$则向量 $(a_1+b_1,a_2+b_2,…,a_n+b_n)$称为 向量a和向量b的和，记作 <strong>a+b</strong> 即 <strong>a+b</strong> = $(a_1+b_1,a_2+b_2,…,a_n+b_n)$</p>
<h5 id="定义-5"><a href="#定义-5" class="headerlink" title="定义 5"></a>定义 5</h5><p>设向量 $a = (a_1,a_2…,a_n)$ k 是数域 $\mathbb K$ 中的数，则向量 $(ka_1,ka_2,…,ka_n)$称为 数k与向量a的乘积，简称数乘。记作 k<strong>a</strong> 即 k<strong>a</strong> = $(ka_1,ka_2,…,ka_n)$</p>
<h5 id="定理"><a href="#定理" class="headerlink" title="定理"></a>定理</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/11.png" style="zoom:80%;"></p>
<h4 id="矩阵的加法"><a href="#矩阵的加法" class="headerlink" title="矩阵的加法"></a>矩阵的加法</h4><h5 id="定义6"><a href="#定义6" class="headerlink" title="定义6"></a>定义6</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/12.png" style="zoom:80%;"></p>
<h5 id="定理2"><a href="#定理2" class="headerlink" title="定理2"></a>定理2</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/13.png" style="zoom:80%;"></p>
<h4 id="矩阵的乘法"><a href="#矩阵的乘法" class="headerlink" title="矩阵的乘法"></a>矩阵的乘法</h4><h5 id="定义7"><a href="#定义7" class="headerlink" title="定义7"></a>定义7</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/14.png" style="zoom:80%;"></p>
<h5 id="定理3"><a href="#定理3" class="headerlink" title="定理3"></a>定理3</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/15.png" style="zoom:80%;"></p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/16.png" style="zoom:80%;"></p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/17.png" style="zoom:80%;"></p>
<h5 id="定义8"><a href="#定义8" class="headerlink" title="定义8"></a>定义8</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/18.png" style="zoom:80%;"></p>
<h5 id="定义9"><a href="#定义9" class="headerlink" title="定义9"></a>定义9</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/19.png" style="zoom:80%;"></p>
<h5 id="定理4"><a href="#定理4" class="headerlink" title="定理4"></a>定理4</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/20.png" style="zoom:80%;"></p>
<h4 id="矩阵的分块乘法"><a href="#矩阵的分块乘法" class="headerlink" title="矩阵的分块乘法"></a>矩阵的分块乘法</h4><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/21.png" style="zoom:80%;"></p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/22.png" style="zoom:80%;"></p>
<p>例如： </p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/23.png" style="zoom:80%;"></p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/24.png" style="zoom:80%;"></p>
<h4 id="初等矩阵"><a href="#初等矩阵" class="headerlink" title="初等矩阵"></a>初等矩阵</h4><h5 id="定义10"><a href="#定义10" class="headerlink" title="定义10"></a>定义10</h5><p>所谓数域$\mathbb K$ 上的矩阵的初等行（列） 变换是指下列三种变换:</p>
<p>1) 以$\mathbb K$ 中一个非零的数乘矩阵的某一行（列）</p>
<p>2）把矩阵的某一行(列)的c倍加到另一行（列），这里c是 $\mathbb K$ 的任意一个数字</p>
<p>3） 呼唤矩阵中两行（列）的位置</p>
<h5 id="定义11"><a href="#定义11" class="headerlink" title="定义11"></a>定义11</h5><p>由单位矩阵I经过一次初等行(列)变换得到的 矩阵被称为初等矩阵</p>
<h5 id="定理5"><a href="#定理5" class="headerlink" title="定理5"></a>定理5</h5><p>对一个m x n 的矩阵 A 作一初等变换就相当于在A左边呈上相应的mXm 的初等矩阵；对A作一初等列变换就相当于在A右边乘上相应的 nxn 的初等矩阵</p>
<p>例题：</p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/26.png" style="zoom:80%;"></p>
<h4 id="矩阵的逆"><a href="#矩阵的逆" class="headerlink" title="矩阵的逆"></a>矩阵的逆</h4><h5 id="定义12"><a href="#定义12" class="headerlink" title="定义12"></a>定义12</h5><p>设 A是 数域$\mathbb K$ 上的 nxn 矩阵，如果存在 $\mathbb K$上的nxn矩阵 B，使得 $AB = BA = I $，则称 A 为可逆矩阵，简称A 可逆，而B则称为 A的逆矩阵，记作 A^-1^ </p>
<p>并不是每个 nxn的举证都可逆，如果A可逆，我们称A是可逆的或正规的或非奇异的，否则称A 是奇异的或非可逆的</p>
<h5 id="定理6"><a href="#定理6" class="headerlink" title="定理6"></a>定理6</h5><p>n 阶矩阵 A 可逆的充分必要条件是它能表示成一些初等矩阵 $Q_1,Q_2,…,Q_m$ 的乘积： $A= Q_1Q_2…Q_m$ </p>
<p>例题：</p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/27.png" style="zoom:80%;"></p>
<h4 id="矩阵的转置"><a href="#矩阵的转置" class="headerlink" title="矩阵的转置"></a>矩阵的转置</h4><h5 id="定义13"><a href="#定义13" class="headerlink" title="定义13"></a>定义13</h5><p>设 $A=(a<em>{ij})</em>{m<em>n}$ , 把 A 的 行列互换所得到的矩阵称为A的转置，记作$A^T$ 或者 $A’$ ,即 $A^T=A = (a<em>{ij})</em>{m</em>n}$</p>
<p>对于一个方阵A, $A^T$相当于我们把A沿着它的对角线做一个镜像，而且如果A是对称的 ，则 $A=A^T$</p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/28.png" style="zoom:80%;"></p>
<h4 id="用矩阵表示线性方程组"><a href="#用矩阵表示线性方程组" class="headerlink" title="用矩阵表示线性方程组"></a>用矩阵表示线性方程组</h4><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/30.png" style="zoom:80%;"></p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/31.png" style="zoom:80%;"></p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/32.png" style="zoom:80%;"></p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/33.png" style="zoom:80%;"></p>
<h3 id="小结："><a href="#小结：" class="headerlink" title="小结："></a>小结：</h3><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/29.png" style="zoom:80%;"></p>
<h2 id="第三讲-向量空间与子空间"><a href="#第三讲-向量空间与子空间" class="headerlink" title="第三讲:向量空间与子空间"></a>第三讲:向量空间与子空间</h2><h3 id="3-1向量空间的基本概念"><a href="#3-1向量空间的基本概念" class="headerlink" title="3.1向量空间的基本概念"></a>3.1向量空间的基本概念</h3><h4 id="引例"><a href="#引例" class="headerlink" title="引例"></a>引例</h4><p>这是一个鸢尾花数据集，这是一个四维的数据集。我们希望把它降维来变成二维或者三维的数据，这样就可以进行数据可视化了。横坐标和纵坐标是原特征的一些线性组和，通过这两个坐标可以反应原向量的性质。所以向量空间和子空间是数据科学、人工智能、机器学习领域的出发点。一些基本的处理任务，都可以放到向量空间以及子空间来考虑。</p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/34.png" style="zoom:80%;"></p>
<p>向量空间是数据处理空间的出发点</p>
<h4 id="定义1"><a href="#定义1" class="headerlink" title="定义1"></a>定义1</h4><p>设 $\mathbb V$ 是由n维向量组成的非空集合，$\mathbb K$ 是一个数域。在 $\mathbb V$ 上定义了加法，在 $\mathbb K$ 与集合 $\mathbb V$上定义了数乘，并且 $\forall a,b\in \mathbb V$ 及任意数 $k\in\mathbb K$ ，由 $a+b,ka\in \mathbb V$,则称$\mathbb V$ 对于向量的加法和数乘两种运算封闭，$\mathbb V$ 为数域$\mathbb K$ 上 n维向量空间或者线性空间。</p>
<h4 id="例1"><a href="#例1" class="headerlink" title="例1"></a>例1</h4><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/35.png" style="zoom:80%;"></p>
<p>同样的我们把 $\mathbb R^n$和 $\mathbb C^n$ 命名为实向量空间和复向量空间</p>
<h4 id="例2"><a href="#例2" class="headerlink" title="例2"></a>例2</h4><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/36.png" style="zoom:80%;"></p>
<h4 id="例3"><a href="#例3" class="headerlink" title="例3"></a>例3</h4><p>刚才我们假设 $\mathbb {V,K}$ 都是相等的，那么下面这个例子  $\mathbb {V,K}$  是不相等的。</p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/37.png" style="zoom:80%;"></p>
<h4 id="例4"><a href="#例4" class="headerlink" title="例4"></a>例4</h4><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/38.png" style="zoom:80%;"></p>
<p>所以我们可以看出向量空间中的元素不一定是数字向量，可以是矩阵也可以是多项式。向量空间的本质就是集合对加法和数乘运算封闭。这两个运算是线性运算，所以我们也称向量空间为线性空间。</p>
<h3 id="3-2向量子空间"><a href="#3-2向量子空间" class="headerlink" title="3.2向量子空间"></a>3.2向量子空间</h3><p>在数据科学当中，我们常常得到海量的高维数据。但这些数据经常是只有几个维度和我们的预测问题有关。也就是说我们只要考虑高维空间中的低维子空间就能解决问题。</p>
<h4 id="定义2"><a href="#定义2" class="headerlink" title="定义2"></a>定义2</h4><p>设$\mathbb X$ 是 $\mathbb K$上的n维线性空间，$\mathbb Y$ 是$\mathbb X$ 的子集，且满足： 若 $x,y\in \mathbb Y $,则 $x+y\in \mathbb Y$ ;若 $a\in \mathbb K,x\in \mathbb Y$ 则 $ax\in \mathbb Y$ ,则称$\mathbb Y$是$\mathbb X$ 的线性子空间，简称子空间</p>
<h4 id="例5"><a href="#例5" class="headerlink" title="例5"></a>例5</h4><p>非空线性空间一定会有的子空间： 自身和{0}. 我们把只含零向量的子集称为零子空间。零子空间和线性空间本身统称为平凡子空间。其他的子空间叫做非平凡子空间。</p>
<h4 id="例6"><a href="#例6" class="headerlink" title="例6"></a>例6</h4><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/39.png" style="zoom:80%;"></p>
<p>ABC都不是子空间，只有D是子空间。</p>
<h4 id="例7"><a href="#例7" class="headerlink" title="例7"></a>例7</h4><ol>
<li>线性方程组 Ax=0的解空间是 $\mathbb R^n$ 中常见的子空间</li>
<li>线性方程组Ax = b的解空间，当 b不等于0的时候，不是子空间<ol>
<li>令$ Ax_1=b Ax_2=b A(x_1+x_2) = Ax_1+Ax_2 = 2b \not=  b$</li>
</ol>
</li>
<li>线性方程组Ax = 0的解空间和Bx=0的解空间的交集也是$\mathbb R^n$ 中的子空间<ol>
<li>$Ax=0$的解为$V_1, Bx=0$ 的解为$V_2$ 那么 令 $x_1,x_2\in V_1\cap V_2,Ax_1=Ax_2=0,Bx_1=Bx_2=0,A(x_1+x_2)=B(x_1+x_2)=0$说明对加法封闭。同理对数乘也是封闭的。</li>
</ol>
</li>
</ol>
<h4 id="子空间的交、和、直和"><a href="#子空间的交、和、直和" class="headerlink" title="子空间的交、和、直和"></a>子空间的交、和、直和</h4><h5 id="定理1"><a href="#定理1" class="headerlink" title="定理1"></a>定理1</h5><p>设$\mathbb Y_1$ 与$\mathbb Y_2$  都是数域$\mathbb K$上的线性空间 $\mathbb X$ 的子空间。若用$\mathbb Y_1\cap \mathbb Y_2$ 表示 $\mathbb Y_1$ 与$\mathbb Y_2$中$\mathbb Y_1\cap \mathbb Y_2$的公共元素集合，则$\mathbb Y_1\cap \mathbb Y_2$也是$\mathbb X$ 的子空间。且称 $\mathbb Y_1\cap \mathbb Y_2$ 为 $\mathbb Y_1$ 与 $ \mathbb Y_2$ 的交</p>
<h5 id="定理2-1"><a href="#定理2-1" class="headerlink" title="定理2"></a>定理2</h5><p>设$\mathbb Y_1$ 与$\mathbb Y_2$  都是数域$\mathbb K$上的线性空间 $\mathbb X$ 的子空间。若用$\mathbb Y_1 + \mathbb Y_2$ 表示全体形如$y_1+y_2(y_1\in\mathbb Y_1,y_2\in \mathbb Y_2)$  的向量组成的集合，则$\mathbb Y_1 + \mathbb Y_2$ 也是 $\mathbb X$ 的子空间，且称 $\mathbb Y_1 + \mathbb Y_2$ 为 $\mathbb Y_1$和 $\mathbb Y_2$ 的和</p>
<h5 id="定义3"><a href="#定义3" class="headerlink" title="定义3"></a>定义3</h5><p>如果 $\mathbb Y$ 中的每个向量x可<strong>唯一</strong>地表成 $x=y_1+y_2(y_1\in\mathbb Y_1,y_2\in \mathbb Y_2)$ 地形式，则称$\mathbb Y$ 为$\mathbb Y_1$ 与$\mathbb Y_2$ 的直和，记作 $\mathbb Y = \mathbb {Y_1+Y_2}$或者$\mathbb Y_1 \bigoplus \mathbb Y_2$  </p>
<h5 id="定理3-1"><a href="#定理3-1" class="headerlink" title="定理3"></a>定理3</h5><p>如果 $\mathbb Y$ 中的每个向量x可唯一地表成 $x=y_1+y_2(y_1\in\mathbb Y_1,y_2\in \mathbb Y_2)$ 可推出$y_1=y_2=0$ </p>
<h5 id="推论"><a href="#推论" class="headerlink" title="推论"></a>推论</h5><p>$\mathbb Y_1 + \mathbb Y_2$ 为直和地充分必要条件是 ：有$\mathbb Y_1\cap \mathbb Y_2 = {0}$</p>
<p>注意，子空间的并集不一定是子空间。假设$\mathbb X$是由 $R^2$构成的，那么令 x,y轴为连个子空间，那么这两个子空间的和就是整个平面上的点，但是这两个集合的并仅仅是x、y轴上的点，不能构成子空间</p>
<h3 id="3-3线性无关性"><a href="#3-3线性无关性" class="headerlink" title="3.3线性无关性"></a>3.3线性无关性</h3><h4 id="线性表出定义"><a href="#线性表出定义" class="headerlink" title="线性表出定义"></a>线性表出定义</h4><h5 id="定义4-1"><a href="#定义4-1" class="headerlink" title="定义4"></a>定义4</h5><p>设向量$a_1,a_2…,a_s$是数域$\mathbb K$ 上的n维向量组。 $k_1,k_2,…,k_s$是数域$\mathbb K$上的一组数，那么表达式 $k_1a_1+k_2a_2+…+k_sa_s$ 称为向量组$a_1,a_2…,a_s$的一个线性组合，而$k_1,k_2,…,k_s$称为组合系数</p>
<h5 id="定义5"><a href="#定义5" class="headerlink" title="定义5"></a>定义5</h5><p>若向量b是向量组 $a_1,a_2…,a_s$ 的一个线性组合，即 $b =k_1a_1+k_2a_2+…+k_sa_s$ 则称 b可以由向量组$a_1,a_2…,a_s$ 线性表出</p>
<h5 id="例8"><a href="#例8" class="headerlink" title="例8"></a>例8</h5><p>零向量0总可以写成其他一些向量的线性组合</p>
<h5 id="例9"><a href="#例9" class="headerlink" title="例9"></a>例9</h5><p>例如，设向量组</p>
<p>$a_1=(2,-1,3,1)$</p>
<p>$a_2=(4,-2,5,4)$</p>
<p>$a_3 = (2,-1,4,-1)$</p>
<p>则有$a_3 = 3a_1-a_2$ ，这表示$a_3$可以由$a_1,a_2$线性表出</p>
<h4 id="线性相关-无关"><a href="#线性相关-无关" class="headerlink" title="线性相关/无关"></a>线性相关/无关</h4><h5 id="定义-6"><a href="#定义-6" class="headerlink" title="定义 6"></a>定义 6</h5><p>设$a<em>i\in \mathbb K^n$ (i=1,2,….r) 若在$\mathbb K$ 中存在r个不全为零的数 $\lambda_i (i=1,2,…,r)$使$\sum</em>{i=1}^r\lambda<em>ia_i=0$ ， 则称向量组 $a_1,a_2,…a_r$ 线性相关。反之，如果向量组$a_1,a_2,…,a_r$ 不线性相关，即只有当$\lambda_1,\lambda _2,…,\lambda_r$ 全为0时，才能使得 $\sum</em>{i=0}^r\lambda_ia_i=0$ 则称向量组 $a_1,a_2,…,a_r$ 线性无关</p>
<h5 id="定义7-1"><a href="#定义7-1" class="headerlink" title="定义7"></a>定义7</h5><p>向量组的一部分组 称为一个极大线性无关组，如果这个部分组本身线性无关，但从原向量组的其余向量中任取一个添加进去后，所得的部分组都线性相关。</p>
<h5 id="例10"><a href="#例10" class="headerlink" title="例10"></a>例10</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/40.png" style="zoom:80%;"></p>
<p>这三对信息中，任意两对构成了极大线性无关组</p>
<h5 id="例11"><a href="#例11" class="headerlink" title="例11"></a>例11</h5><p>在向量组：</p>
<p>$a_1 = (2,-1,3,1) ,a_2=(4,-2,5,4),a_3=(2,-1,2,3)$</p>
<p>中，由$a_1,a_2$组成的部分组 就是一个极大的线性无关组。首先，$a_1,a_2$线性无关，因为由</p>
<p>$k_1a_1+k_2a_2=k_1(2,-1,3,1)+k_2(4,-2,5,4) = (2k_1+4k_2,-k_1-2k_2,3k_1+5k_2,k_1+4k_2)=(0,0,0,0)$</p>
<p>就有 $k_1=k_2=0$同时，$a_1,a_2,a_3$线性相关($a_2=a_1+a_3$) </p>
<p>不难看出，$a_2,a_3$也是一个极大线性无关组</p>
<h4 id="等价"><a href="#等价" class="headerlink" title="等价"></a>等价</h4><h5 id="定义8-1"><a href="#定义8-1" class="headerlink" title="定义8"></a>定义8</h5><p>设 $a_1,a_2…,a_s$ 和 $b_1,b_2,…,b_t$ 时数域$\mathbb K$ 上的两个向量组，如果向量组 $a_1,a_2,…,a_s$中<strong>每一个向量</strong> $a_i(i=1,2,3…,s)$ 都可以用向量 $b_1,b_2,…,b_t$ 线性表出，那么称向量组  $a_1,a_2,…,a_s$可以用向量组$b_1,b_2,…,b_t$线性表出。<strong>如果两个向量组可以互相线性表出</strong>，则称他们为等价。</p>
<h5 id="例12"><a href="#例12" class="headerlink" title="例12"></a>例12</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/41.png" style="zoom:80%;"></p>
<h3 id="3-4生成集、基底、坐标"><a href="#3-4生成集、基底、坐标" class="headerlink" title="3.4生成集、基底、坐标"></a>3.4生成集、基底、坐标</h3><h4 id="生成集"><a href="#生成集" class="headerlink" title="生成集"></a>生成集</h4><h5 id="定义9-1"><a href="#定义9-1" class="headerlink" title="定义9"></a>定义9</h5><p>设 $a<em>1,a_2,…,a_r$ 是$\mathbb V$ 的一组向量，则这组向量所有可能的线性组合 $\sum</em>{k=1}^{r}\lambda_ka_k$ <strong>所成的集合</strong> 是$\mathbb V$的一个子空间，称为由 $a_1,a_2,…,a_r$ 张成的子空间，记作 $L(a_1,a_2,…,a_r)$ 或 $span(a_1,a_2,…,a_r)$ 。 ${a_1,a_2,…,a_r}$ 叫做 $\mathbb V$的一个生成集。</p>
<h5 id="定理4-1"><a href="#定理4-1" class="headerlink" title="定理4"></a>定理4</h5><p>两个向量组张成相同的子空间的充要条件是：这两个向量组等价。</p>
<h4 id="基地与维数"><a href="#基地与维数" class="headerlink" title="基地与维数"></a>基地与维数</h4><h5 id="定义10-1"><a href="#定义10-1" class="headerlink" title="定义10"></a>定义10</h5><p>如果在向量空间$\mathbb V$中由n个线性无关的向量 $a_1,a_2,…a_n$ 且$\mathbb V$ 中任一向量都可以用它们线性表出，则称 $\mathbb V$ 为 $ \mathbb K$上的n维线性空间，n称为$\mathbb V$ 的维数，记作 $dim(\mathbb V)=n$。 而 $a_1,a_2,…a_n$ 就是 $\mathbb V $ 的一组基</p>
<p>注意：基可以作为生成集，但是生成集不一定是一组基，因为生成集不一定是线性无关的，但是基一定是线性无关的。</p>
<h5 id="例13"><a href="#例13" class="headerlink" title="例13"></a>例13</h5><p>复数域 $\mathbb C$ 在$\mathbb C$ 上和 $\mathbb R$ 上是两个不同的向量空间 </p>
<ul>
<li>因为在 $\mathbb C$ 上 他是一维的，所以数1就是一组基</li>
<li>而在$\mathbb R$ 上是二维的，数1和i是一组基</li>
</ul>
<p>这个例子告诉我们维数和所考虑的数域是有关的</p>
<h5 id="定理5-1"><a href="#定理5-1" class="headerlink" title="定理5"></a>定理5</h5><p>令$\mathbb V$ 是一向量空间 $\mathbb B\in \mathbb V$ ,$\mathbb B \not= \emptyset$ 下列命题等价：</p>
<ul>
<li>$\mathbb B$是 $\mathbb V$ 的一个基</li>
<li>$\mathbb B$ 是最小生成集</li>
<li>$\mathbb B$ 是 $\mathbb V$ 中的极大线性无关组</li>
<li>$\mathbb V$ 中的每一个向量都能被 $\mathbb B$ 线性表出</li>
</ul>
<h4 id="标准基"><a href="#标准基" class="headerlink" title="标准基"></a>标准基</h4><h5 id="定义11-1"><a href="#定义11-1" class="headerlink" title="定义11"></a>定义11</h5><p>如果一组基中的每一个向量长度均为1，我们称其为标准基</p>
<p>在后面的课程中，我们将会严格说明向量的长度</p>
<h5 id="例4-1"><a href="#例4-1" class="headerlink" title="例4"></a>例4</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/42.png" style="zoom:80%;"></p>
<h4 id="确定一组基"><a href="#确定一组基" class="headerlink" title="确定一组基"></a>确定一组基</h4><p>对于一个由向量$x_1,x_2,x_3$张成的向量空间 $\mathbb U \subseteq \mathbb R^4$</p>
<p>$x_1 =$  $\left(\begin{matrix}1\0\1\0\end{matrix}\right)$ , $x_2 = $  $\left(\begin{matrix}0\1\1\1\end{matrix}\right)$ , $x_3=$  $\left(\begin{matrix}1\1\2\1\end{matrix}\right)$ </p>
<p>我们关心$x<em>1,x_2,x_3$是否是$\mathbb U$的一组基。为此，我们需要确认 $x_1,x_2,x_3$是否线性无关。因此，我们需要解 $\sum</em>{i=1}^3\lambda_ix_i = 0$ </p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/43.png" style="zoom:80%;"></p>
<p>也就是子空间可以通过基底扩张变成一个新的空间。</p>
<h4 id="子空间的扩张"><a href="#子空间的扩张" class="headerlink" title="子空间的扩张"></a>子空间的扩张</h4><h5 id="定理6-1"><a href="#定理6-1" class="headerlink" title="定理6"></a>定理6</h5><p>设 $\mathbb Y = L(a<em>1,a_2,…,a_m)$ 是n维空间 $\mathbb X$ 的一个m维子空间，则向量组 $a_1,a_2,…,a_m$可扩张为  $a_1,a_2,…,a_m,a</em>{m+1},…,a<em>n$ 使得 $\mathbb X= L(a_1,a_2,…,a_m,a</em>{m+1},…,a_n) $</p>
<p>注意： 其中 $L(a_{m+1},…,a_n)$ 也是 $\mathbb X$ 的一个子空间。</p>
<p>$L(a<em>{m+1},…,a_n)\bigoplus  L(a_1,a_2,…,a_m) =  L(a_1,a_2,…,a_m,a</em>{m+1},…,a_n) $</p>
<h5 id="定理7"><a href="#定理7" class="headerlink" title="定理7"></a>定理7</h5><p>维数公式： $dim(\mathbb {Y_1+Y_2}) = dim\mathbb Y_1+dim\mathbb Y_2 - dim(\mathbb {Y_1\cap\mathbb Y_2})$ </p>
<p>对于直和：$dim(\mathbb Y_1 \bigoplus\mathbb Y_2) =dim\mathbb Y_1+dim\mathbb Y_2$ </p>
<h5 id="定义12-1"><a href="#定义12-1" class="headerlink" title="定义12"></a>定义12</h5><p>如果一个向量空间 $\mathbb V$ 中任一向量都能被n个线性无关的向量线性表出的时候，$\mathbb V$ 称为有限维线性空间，否则称为无限维线性空间。</p>
<p><strong>有限维线性空间</strong></p>
<ol>
<li>n维向量空间</li>
<li>nxm维矩阵空间</li>
<li>最高次为 n次的多项式空间</li>
<li>复数域</li>
</ol>
<p><strong>无限维线性空间</strong></p>
<ol>
<li>所有的多项式构成的空间</li>
<li>一阶可导函数空间</li>
<li>傅里叶变换后的频域空间</li>
</ol>
<h4 id="坐标"><a href="#坐标" class="headerlink" title="坐标"></a>坐标</h4><p>在n维向量空间 $\mathbb V$中，n个线性无关的向量 $\epsilon_1,\epsilon_2,…,\epsilon_n$称为$\mathbb V$的一组基。设 $\alpha$ 是$\mathbb V$中任一向量，于是 $\epsilon_1,\epsilon_2,…,\epsilon_n \alpha $线性相关，因此$\alpha$可以被基$\epsilon_1,\epsilon_2,…,\epsilon_n$ 线性表出：</p>
<p>$\alpha = a_1\epsilon_1+a_2\epsilon_2+…+a_n\epsilon_n$</p>
<p>其中 系数 $a_1,a_2,…,a_n$是被向量 $\alpha $和基$\epsilon_1,\epsilon_2,…,\epsilon_n$唯一确定的，这组数就称为$\alpha$在$\epsilon_1,\epsilon_2,…,\epsilon_n$ 下的坐标，记为 $(a_1,a_2,…,a_n)$</p>
<h5 id="例16"><a href="#例16" class="headerlink" title="例16"></a>例16</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/44.png" style="zoom:80%;"></p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/45.png" style="zoom:80%;"></p>
<h5 id="例17"><a href="#例17" class="headerlink" title="例17"></a>例17</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/46.png" style="zoom:80%;"></p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/47.png" style="zoom:80%;"></p>
<h3 id="3-5秩、矩阵的秩"><a href="#3-5秩、矩阵的秩" class="headerlink" title="3.5秩、矩阵的秩"></a>3.5秩、矩阵的秩</h3><h4 id="定义14"><a href="#定义14" class="headerlink" title="定义14"></a>定义14</h4><p>向量组 $a_1,a_2,…,a_r$的极大线性无关组中，所含向量的个数称为这个向量组的秩，记作 $rank{a_1,a_2,…,a_r}$ </p>
<h4 id="定义15"><a href="#定义15" class="headerlink" title="定义15"></a>定义15</h4><p>矩阵A的行（列）向量组的秩称为A的行秩（列秩），其中矩阵的行秩和列秩相等，他们都成为矩阵A的秩，记作$rank(A)$</p>
<h4 id="定理8"><a href="#定理8" class="headerlink" title="定理8"></a>定理8</h4><p>$dimL(a_1,a_2,…,a_r) = rank{a_1,a_2,…,a_r}$</p>
<h4 id="例18"><a href="#例18" class="headerlink" title="例18"></a>例18</h4><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/48.png" style="zoom:80%;"></p>
<h4 id="例19"><a href="#例19" class="headerlink" title="例19"></a>例19</h4><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/49.png" style="zoom:80%;"></p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/50.png" style="zoom:80%;"></p>
<h3 id="3-6仿射子空间"><a href="#3-6仿射子空间" class="headerlink" title="3.6仿射子空间"></a>3.6仿射子空间</h3><h4 id="定义16"><a href="#定义16" class="headerlink" title="定义16"></a>定义16</h4><p>令 $\mathbb V$ 是一线性空间，$x_0\in V$ 且 $\mathbb U\subseteq \mathbb V$ 是一线性子空间，则子集 </p>
<p>$\mathbb L = x_0+\mathbb U:={x_0+u|u\in\mathbb U}\subseteq \mathbb V$ 是一仿射子空间。</p>
<p>我们定义仿射子空间的维数为线性子空间的维数</p>
<ul>
<li>注意：如果 $x_0\notin \mathbb U$,则仿射子空间 $\mathbb L$ 不是一个子空间</li>
<li>若 $\mathbb U$ 有一基底 $a_1,a_2,…,a_m$ 则 $\mathbb L$中的每一个元素x均可写成$x_0+k_1a_1+k_2a_2+…+k_ma_m$ 这一结论通过定义是容易知道的</li>
</ul>
<h4 id="例20"><a href="#例20" class="headerlink" title="例20"></a>例20</h4><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/51.png" style="zoom:80%;"></p>
<h4 id="例21"><a href="#例21" class="headerlink" title="例21"></a>例21</h4><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/52.png" style="zoom:80%;"></p>
<p>仿射空间在数据科学当中有重要的应用，特别是在优化问题求解当中，很多优化问题的解集是定义在仿射空间上的。</p>
<h3 id="向量空间小结"><a href="#向量空间小结" class="headerlink" title="向量空间小结"></a>向量空间小结</h3><h4 id="向量空间上的运算封闭性："><a href="#向量空间上的运算封闭性：" class="headerlink" title="向量空间上的运算封闭性："></a>向量空间上的运算封闭性：</h4><ul>
<li>加法</li>
<li>数乘</li>
<li>…</li>
</ul>
<h4 id="“非严格”向量空间"><a href="#“非严格”向量空间" class="headerlink" title="“非严格”向量空间"></a>“非严格”向量空间</h4><ul>
<li>输入空间</li>
<li>输出空间</li>
<li>特征空间</li>
</ul>
<p>如何把数据向量从高维向量空间“拉回”到低维子空间？ -映射和投影</p>
<p>机器学习中输入和输出空间以及特征空间可以考虑为向量空间， 要实现运算任务，还需要附加额外的数据结构。在第三章中会考虑</p>
<h2 id="第四讲-线性映射与线性变换"><a href="#第四讲-线性映射与线性变换" class="headerlink" title="第四讲:线性映射与线性变换"></a>第四讲:线性映射与线性变换</h2><h3 id="4-1线性映射"><a href="#4-1线性映射" class="headerlink" title="4.1线性映射"></a>4.1线性映射</h3><h4 id="引例：手写数字识别"><a href="#引例：手写数字识别" class="headerlink" title="引例：手写数字识别"></a>引例：手写数字识别</h4><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/53.png" style="zoom:80%;"></p>
<h4 id="集合之间的映射"><a href="#集合之间的映射" class="headerlink" title="集合之间的映射"></a>集合之间的映射</h4><h5 id="定义1-1"><a href="#定义1-1" class="headerlink" title="定义1"></a>定义1</h5><p>设 $\mathbb {V,W}$是两个非空集合，如果存在一个法则$f$ ,使得3对 $\mathbb V$中的每个元素$v$ ，按法则$f$ ，在$\mathbb W$ 中有唯一确定的元素$w$与之对应，则称$f$为从$\mathbb V$到$\mathbb W$ 的映射，记作</p>
<p>$f:\mathbb V-&gt;\mathbb W$ </p>
<p>其中 $w$ 称为元素$v$ （在映射$f$ 下)的<strong>像</strong>。并记作$f(v)$,即</p>
<p>$w = f(v)$</p>
<p>而元素 $v$ 称为元素 $w$ (在映射$f$下)的一个<strong>原像</strong> 。集合$\mathbb V$称为映射 $f$ 的定义域，记作 $D_f$ ，而$D_f=\mathbb V$; $\mathbb V$中的所有元素的像所组成的集合称为映射 $f$ 的值域 ，记作$R_f$ 或者 $f(\mathbb V)$ 即</p>
<p>$R_f = f(\mathbb V) = {f(v)|v\in\mathbb V}$</p>
<h5 id="定义2-1"><a href="#定义2-1" class="headerlink" title="定义2"></a>定义2</h5><p>设$\mathbb {V,W}$ 是任意两个集合， $\varphi: \mathbb V \rightarrow \mathbb W$ 是一个映射，如果$\varphi $满足</p>
<ol>
<li>$\forall x,y \in \mathbb V$ :  $\varphi(x)=\varphi(y) \Rightarrow x=y$ 则称$\varphi $ 为<strong>单射</strong>;</li>
<li>$\varphi(\mathbb V) = \mathbb W$则称 $\varphi $ 为满射</li>
<li>既满足单射又满足满射，则称 $\varphi $ 为双射，也称一一对应</li>
</ol>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/55.png" style="zoom:80%;"></p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/54.png" style="zoom:80%;"></p>
<h5 id="例1-1"><a href="#例1-1" class="headerlink" title="例1"></a>例1</h5><p>下列映射中</p>
<ol>
<li>$\Phi_1 :\mathbb R^n \rightarrow \mathbb R^n,\Phi_1(x)=2x$ 既是单射又是满射，所以是双射</li>
<li>$\Phi_2:\mathbb R^n \rightarrow \mathbb R ,\Phi_2(x) = max(x_i)$ 只是满射，不是单射。</li>
<li>$\Phi_2:\mathbb R^n \rightarrow \mathbb R ,\Phi_3 = max(|x_i|)$ 既不是单射也不是满射</li>
</ol>
<h4 id="向量空间之间的线性映射"><a href="#向量空间之间的线性映射" class="headerlink" title="向量空间之间的线性映射"></a>向量空间之间的线性映射</h4><h5 id="定义3-1"><a href="#定义3-1" class="headerlink" title="定义3"></a>定义3</h5><p>设$\mathbb {V,W}$是数域$\mathbb K$ 上的两个有限维的向量空间 ,$\varphi$  是$\mathbb V$ 到$\mathbb W$ 的一个映射 $\varphi: \mathbb V \rightarrow \mathbb W$. 如果对任何向量 $x,y \in \mathbb V$ 以及任意的 $\alpha,\beta \in \mathbb K$ 有</p>
<p>$\varphi (\alpha x+\beta y)=\alpha\varphi(x)+\beta\varphi(y)$</p>
<p>则称 $\varphi $ 为 $\mathbb V$ 到 $\mathbb W$ 的线性映射</p>
<h5 id="例2-1"><a href="#例2-1" class="headerlink" title="例2"></a>例2</h5><p>考虑映射 $\epsilon :\mathbb V \rightarrow \mathbb V,\epsilon(x)=x$ 我们称 这种映射为<strong>恒等映射</strong></p>
<p>$\epsilon(\alpha x+\beta y) = \alpha x+\beta y = \alpha\epsilon(x)+\beta\epsilon(y)$</p>
<p>恒等映射自然是线性映射。</p>
<h5 id="例3-1"><a href="#例3-1" class="headerlink" title="例3"></a>例3</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/56.png" style="zoom:80%;"></p>
<h5 id="例4-2"><a href="#例4-2" class="headerlink" title="例4"></a>例4</h5><p>考虑映射 $T_Q(A) = Q^{-1}AQ$ 其中 $Q$ 为可逆矩阵</p>
<p>$T_Q(\alpha A+\beta B) = Q^{-1}(\alpha A+\beta B)Q$</p>
<p>$=\alpha Q^{-1}AQ +\beta Q^{-1}BQ$</p>
<p>$= \alpha T_Q(A)+\beta T_Q(B)$</p>
<h4 id="向量空间之间的特殊映射"><a href="#向量空间之间的特殊映射" class="headerlink" title="向量空间之间的特殊映射"></a>向量空间之间的特殊映射</h4><p>接下来，我么可以给出一些两个向量空间之间的特殊映射。</p>
<p>设 $\mathbb {V,W}$ 是数域 $\mathbb K$ 上的两个有限维的向量空间：</p>
<ol>
<li>$\varphi : \mathbb V\rightarrow \mathbb W$ 是线性映射，则  $\mathbb {V,W}$ 同态(Homomorphism),$\varphi $称为同态映射</li>
<li>$\varphi : \mathbb V\rightarrow \mathbb W$ 是线性映射且是双射，则  $\mathbb {V,W}$ 同构(Isomorphism),$\varphi $称为同构映射；</li>
<li>$\varphi : \mathbb V\rightarrow \mathbb V$ 是线性映射, 则 $\mathbb V$ 自同态(Endomorphism) , $\varphi $ 称为自同态映射</li>
<li>$\varphi : \mathbb V\rightarrow \mathbb V$ 是线性映射且是双射, 则 $\mathbb V$ 自同构(Automorphism) , $\varphi $ 称为自同构映射。</li>
</ol>
<h5 id="例5-1"><a href="#例5-1" class="headerlink" title="例5"></a>例5</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/57.png" style="zoom:80%;"></p>
<h5 id="定理1-1"><a href="#定理1-1" class="headerlink" title="定理1"></a>定理1</h5><p>设 $\mathbb {X_1,X_2} $是数域$\mathbb K$ 上的两个有限维度向量空间，$\mathbb {X_1,X_2}$ 同构，当且仅当 $dim(X_1)=dim(X_2)$ </p>
<p>定理1 表明了两个<strong>维数相同</strong>的向量空间之间存在一个满足双射的线性映射，从这个观点看，同构的向量空间是可以不加去别的，维数是有限维向量空间的唯一本质特征</p>
<p>也就是说对$\mathbb R^{m<em>n}$(一个 m</em>n 维的矩阵的线性空间) 和 $\mathbb R^{m *n}$ (一个长度为 mn 的向量的线性空间)， 其本质都是一样的。我们可以通过一个同构映射建立它们之间的关系</p>
<h5 id="定义5-1"><a href="#定义5-1" class="headerlink" title="定义5"></a>定义5</h5><p>设 $\mathbb {V,W}$ 是数域$\mathbb K$ 上的两个有限维的向量空间，如果$\varphi$ ：$\mathbb V\rightarrow \mathbb W$ 是一个双射，则可定义他的逆映射， 记作 $\varphi ^{-1} :\mathbb W \rightarrow \mathbb V$, 对于 $\forall x\in \mathbb V$ 和 $\forall y\in \mathbb W$ 使得</p>
<p>$\varphi^{-1}(\varphi(x)) = \xi(x) = x,\varphi(\varphi^{-1}(y)) = \xi(y) = y$</p>
<h5 id="例6-1"><a href="#例6-1" class="headerlink" title="例6"></a>例6</h5><ul>
<li>恒等映射的逆映射是其本身</li>
<li>在例4 中定义了 映射 $T<em>Q(A) = Q^{-1}AQ$ 的逆映射为 $T</em>{Q^{-1}} = QAQ^{-1}$</li>
</ul>
<h5 id="定理2-2"><a href="#定理2-2" class="headerlink" title="定理2"></a>定理2</h5><p>考虑向量空间 $\mathbb {V,W,X}$ 则有</p>
<ul>
<li>对于线性映射$\varphi :\mathbb {V} \rightarrow \mathbb W, \phi:\mathbb {W} \rightarrow \mathbb X$  则 $\phi(\varphi)$也是一个线性映射</li>
<li>如果$\varphi :\mathbb {V} \rightarrow \mathbb W$ 是同构映射，则 $\varphi^{-1}: \mathbb W\rightarrow\mathbb V$ 也是一个同构映射</li>
<li>如果$\varphi :\mathbb {V} \rightarrow \mathbb W, \phi:\mathbb {W} \rightarrow \mathbb X$ 是线性映射，且$\lambda \in \mathbb R$ 则 $\varphi+\phi $ 和 $\lambda\varphi$ 也是线性映射 也就是说，线性映射 对加法和数乘是封闭的</li>
</ul>
<h4 id="用线性映射分类手写数字"><a href="#用线性映射分类手写数字" class="headerlink" title="用线性映射分类手写数字"></a>用线性映射分类手写数字</h4><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/58.png" style="zoom:80%;"></p>
<h4 id="线性映射复合分类手写数字"><a href="#线性映射复合分类手写数字" class="headerlink" title="线性映射复合分类手写数字"></a>线性映射复合分类手写数字</h4><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/59.png" style="zoom:80%;"></p>
<p>所以仅仅是通过线性映射来复合并不会提高准确率。所以这就是为什么 在机器学习中用线性映射和非线性映射来符合提高准确率</p>
<h3 id="4-2线性映射的矩阵表示"><a href="#4-2线性映射的矩阵表示" class="headerlink" title="4.2线性映射的矩阵表示"></a>4.2线性映射的矩阵表示</h3><h4 id="变换矩阵"><a href="#变换矩阵" class="headerlink" title="变换矩阵"></a>变换矩阵</h4><p>考虑一个n维向量空间 $\mathbb V$ 的基底 ${b_1,…,b_n}$ ，并为基向量规定一个顺序。</p>
<h5 id="定义6-1"><a href="#定义6-1" class="headerlink" title="定义6"></a>定义6</h5><p>考虑一个n维向量空间 $\mathbb V$ 的基底 ${b_1,…,b_n}$ 是有序的，那么我们称 n元数组 $B = (b_1,…,b_n)$ 为向量空间 $\mathbb V$ 的一组有序基</p>
<p>同一个向量，对于不同的基，对应的坐标也不相同</p>
<h5 id="例7-1"><a href="#例7-1" class="headerlink" title="例7"></a>例7</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/60.png" style="zoom:80%;"></p>
<h5 id="定义7-2"><a href="#定义7-2" class="headerlink" title="定义7"></a>定义7</h5><p>考虑向量空间 $\mathbb {V,W}$的有序基 $B = (b_1,…,b_n)$ 和 $C = (c_1,…,c_m)$ 然后考虑一个线性映射 $\Phi:\mathbb V \rightarrow \mathbb W$ ，对于 $j\in {1,…,m}$</p>
<p>$\Phi(b<em>j) = a</em>{1j}c<em>1 + …+a</em>{mj}c<em>m = \sum</em>{i=1}^m a_{ij}c_i$</p>
<p>$\Phi(b<em>j)$ 是关于 C 的唯一标识，那么我们称这个 m*n 的矩阵为 $A</em>{\Phi}$ 它的元素为：$A<em>{\Phi}(i,j) = a</em>{ij}$</p>
<p>是$\Phi$ 的变换矩阵， $\Phi(b<em>j)$ 在$\mathbb W$ 的有序基 C 下的坐标是 $A</em>{\Phi}$ 的第j列</p>
<p>记$\Phi(B) = (\Phi(b<em>1),\Phi(b_2),…,\Phi(b_n))$ ,则  $\Phi (B) = CA</em>{\Phi}$ </p>
<p>设向量空间 $\mathbb {V,W}$ 的有序基分别为 B，C。线性映射 $\Phi:\mathbb V \rightarrow\mathbb W$ 的 变换矩阵为 $A_{\Phi}$ ，如果 $x\in \mathbb V$ 关于 B的坐标是 $\hat x,y = \Phi(x)\in\mathbb W$ 关于C的坐标是 $\hat y$ 。 也就是说 $x =B\hat x,y = C\hat y$</p>
<p>那么 $A<em>\Phi \hat x$ 就是$\Phi(x)$ 关于 C的坐标，由此得到坐标的映射关系： $\hat y = A</em>\Phi \hat x$</p>
<p>这意味着这个变换矩阵可以用来计算在两个空间各自基下坐标的映射关系</p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/62.png" style="zoom:80%;"></p>
<h5 id="例8-1"><a href="#例8-1" class="headerlink" title="例8"></a>例8</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/61.png" style="zoom:80%;"></p>
<h4 id="基变换"><a href="#基变换" class="headerlink" title="基变换"></a>基变换</h4><p> 考虑 $\mathbb V$ 的两个有序基底: $B = (b_1,…,b_n),\hat B=(\hat {b_1},…,\hat b_n)$</p>
<p>和 $\mathbb W$ 的两个有序基底: $C = (c_1,…,c_n),\hat C=(\hat {c_1},…,\hat c_n)$</p>
<p>$A_\Phi \in R^{m*n}$ 是线性映射 $\Phi: \mathbb V \rightarrow \mathbb W$关于基底$ B,C$的变换矩阵</p>
<p>$\hat A_\Phi \in R^{m*n}$ 是线性映射 $\Phi: \mathbb V \rightarrow \mathbb W$关于基底 $\hat B,\hat C$ 的变换矩阵</p>
<p> 我们接下来考察 $A<em>\Phi$ 和 $\hat A</em>\Phi$ 的关系是什么，也即当我们把基从 B，C变换到 $\hat B,\hat C$ 时，$A<em>\Phi$ 能否变换到 $\hat A</em>\Phi$，怎么变换到 $\hat A_\Phi$ ?</p>
<p>我们为什么要考察矩阵的变换呢？因为有时候变换后的矩阵能容易处理</p>
<h5 id="例9-1"><a href="#例9-1" class="headerlink" title="例9"></a>例9</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/63.png" style="zoom:80%;"></p>
<h5 id="定理3-2"><a href="#定理3-2" class="headerlink" title="定理3"></a>定理3</h5><p> 考虑 $\mathbb V$ 的两个有序基底: $B = (b_1,…,b_n),\hat B=(\hat {b_1},…,\hat b_n)$</p>
<p>和 $\mathbb W$ 的两个有序基底: $C = (c_1,…,c_n),\hat C=(\hat {c_1},…,\hat c_n)$</p>
<p>以及在基 B,C 下关于$\Phi$ 的变换矩阵 $A<em>\Phi$ ，则在基 $\hat B,\hat C$ 下的关于 $\Phi$ 的变换矩阵 $\hat {A</em>\Phi}$ 可以表示为 $\hat A<em>\Phi = T^{-1}A</em>\Phi S$ ，这里 $S\in\mathbb R^{n<em>n}$  是 $\mathbb V$ 中自同态映射的坐标变换矩阵，(从 $B$ 到 $\hat B$) ，$T\in\mathbb R^{m</em>m}$  是 $\mathbb W$ 中自同态映射的坐标变换矩阵(从 $C$ 到 $\hat C$)</p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/64.png" style="zoom:80%;"></p>
<h5 id="定义8-2"><a href="#定义8-2" class="headerlink" title="定义8"></a>定义8</h5><p>如果对于两个矩阵 $A,B\in \mathbb R^{m<em>n}$ ，存在可逆矩阵 $S\in \mathbb R^{n</em>n},T\in\mathbb R^{m*m}$ 使得 $A = T^{-1}BS$ 成立，则称 A，B等价</p>
<h5 id="定义9-2"><a href="#定义9-2" class="headerlink" title="定义9"></a>定义9</h5><p>如果对于两个矩阵 $A,B\in \mathbb R^{n<em>n}$ ，存在可逆矩阵 $S\in \mathbb R^{n</em>n} $  使得 $A = S^{-1}BS$ 成立，则称 A,B 相似</p>
<p>所以两个相似矩阵必定等价，反之则不然</p>
<h5 id="例10-1"><a href="#例10-1" class="headerlink" title="例10"></a>例10</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/65.png" style="zoom:80%;"></p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/66.png" style="zoom:80%;"></p>
<h4 id="复合线性映射的变换矩阵"><a href="#复合线性映射的变换矩阵" class="headerlink" title="复合线性映射的变换矩阵"></a>复合线性映射的变换矩阵</h4><p>考虑向量空间 $\mathbb {V,W,X}$ 我们知道线性映射的符合仍是线性映射</p>
<p>两个映射的复合对应的变换矩阵就是两个映射对应的变换矩阵的乘积</p>
<p>$\Phi: \mathbb V \rightarrow \mathbb W$ </p>
<p>$\Psi: \mathbb W \rightarrow \mathbb X$ </p>
<p>$\Psi\circ \Phi: \mathbb V \rightarrow \mathbb X$ </p>
<p>记 $A<em>\Phi,A</em>\Psi$ 是对应的变换矩阵，则 $A<em>{\Psi\circ\Phi} = A</em>\Phi A_\Psi$</p>
<h5 id="例11-1"><a href="#例11-1" class="headerlink" title="例11"></a>例11</h5><p>令</p>
<p>$\Phi :\mathbb R^n \rightarrow \mathbb R^n,\Phi(x) = 3x,\Psi:\mathbb R^n\rightarrow\mathbb R,\Psi = \sum_{i=1}^nx_i$ </p>
<p>则</p>
<p>$A_\Phi = 3I$</p>
<p>$A_\Psi = (1,1,…,1)$</p>
<p>而 $\Psi(x)\circ\Phi(x) = \sum_{i=1}^{n} 3x_i$</p>
<p>$A<em>{\Psi \circ\Phi} = (3,3,…,3)=(1,1,…,1)3I = A</em>\Phi A_\Psi$ </p>
<p>基变换可以用于后面的矩阵分解，也可以用于数据压缩问题</p>
<h4 id="核与像"><a href="#核与像" class="headerlink" title="核与像"></a>核与像</h4><p>线性映射的像与核两个重要的线性子空间。</p>
<h5 id="定义10-2"><a href="#定义10-2" class="headerlink" title="定义10"></a>定义10</h5><p>对于 $\Phi:\mathbb V\rightarrow \mathbb W$ 我们定义核空间(零空间)：</p>
<p>$ker(\Phi):=\Phi^{-1}(0w) = {v\in\mathbb V:\Phi(v) = 0w}$</p>
<p>像空间(值域)：</p>
<p>$Im(\Phi):=\Phi(\mathbb V) = {w\in\mathbb W|\exist v\in\mathbb V:\Phi(v) = w}$</p>
<p>那些映射结果为0的元素就组成了核空间</p>
<p>而所有可能被映射到的元素组成的空间就是像空间</p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/67.png" style="zoom:80%;"></p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/68.png" style="zoom:90%;"></p>
<h5 id="定义11-2"><a href="#定义11-2" class="headerlink" title="定义11"></a>定义11</h5><p>A的列向量张成空间叫做列空间</p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/69.png" style="zoom:90%;"></p>
<h5 id="例12-1"><a href="#例12-1" class="headerlink" title="例12"></a>例12</h5><p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/70.png" style="zoom:90%;"></p>
<p><img src="/2020/07/01/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%801/72.png" style="zoom:90%;"></p>
<h3 id="4-3线性变换"><a href="#4-3线性变换" class="headerlink" title="4.3线性变换"></a>4.3线性变换</h3><h3 id="4-4仿射映射"><a href="#4-4仿射映射" class="headerlink" title="4.4仿射映射"></a>4.4仿射映射</h3><h2 id="第五讲-行列式"><a href="#第五讲-行列式" class="headerlink" title="第五讲:行列式"></a>第五讲:行列式</h2><h3 id="5-1行列式"><a href="#5-1行列式" class="headerlink" title="5.1行列式"></a>5.1行列式</h3><h3 id="5-2迹和二次型"><a href="#5-2迹和二次型" class="headerlink" title="5.2迹和二次型"></a>5.2迹和二次型</h3><h3 id="5-3特征值和特征向量"><a href="#5-3特征值和特征向量" class="headerlink" title="5.3特征值和特征向量"></a>5.3特征值和特征向量</h3>
          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/07/01/Java%E5%9F%BA%E7%A1%801/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/%5Bobject%20Object%5D">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/07/01/Java%E5%9F%BA%E7%A1%801/" itemprop="url">Java基础1</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-07-01T14:06:30+08:00">
                2020-07-01
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2025-04-10T13:37:28+08:00">
                2025-04-10
              </time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Java基础1"><a href="#Java基础1" class="headerlink" title="Java基础1"></a>Java基础1</h1><h2 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h2><h3 id="Anatomy-of-a-Java-Program"><a href="#Anatomy-of-a-Java-Program" class="headerlink" title="Anatomy of a Java Program"></a>Anatomy of a Java Program</h3><p>Java的 函数 我们常常把第一个花括号与函数声明放在一行。但是C,C#常常是另起一行</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sendEmail</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>每一个Java程序都必须有一个main函数，也就是主函数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Java中，这些函数不会单独存在，他们都在类里面。当函数放在类中时，我们称其为类的方法。在Java中，类和方法都应该具有访问修饰符(access modifier)，访问修饰符是private，public之类的.</p>
<p>在Java中，我们用不同的方法来命名我们的类和我们的方法。</p>
<p>PascalNamingConvention : 用于类命名。特征就是每个单词首字母大写 </p>
<p>camelNamingComvention: 用于方法命名，也就是驼峰命名法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Your-First-Java-Program"><a href="#Your-First-Java-Program" class="headerlink" title="Your First Java Program"></a>Your First Java Program</h3><p><img src="/2020/07/01/Java%E5%9F%BA%E7%A1%801/1.png" style="zoom:67%;"></p>
<p><img src="/2020/07/01/Java%E5%9F%BA%E7%A1%801/2.png" style="zoom:167%;"></p>
<p><img src="/2020/07/01/Java%E5%9F%BA%E7%A1%801/3.png" style="zoom:167%;"></p>
<p>package com.company 代表着这个类所属的包</p>
<p>这个包下面有Main类，类中有一个静态的main方法</p>
<p>我们现在输出Hello World</p>
<p>在这里使用系统类 System ； System.out 是一个PrintStream 类型，也就是输出字符串的。然后在System.out中我们运用 printIn方法，他是printLine的缩写。点击运行，我们即可看到终端打印Hello World了 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">   <span class="comment">// write your code here</span></span><br><span class="line">        System.out.println(<span class="string">"Hello World"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="How-Java-Code-Gets-Executed"><a href="#How-Java-Code-Gets-Executed" class="headerlink" title="How Java Code Gets Executed"></a>How Java Code Gets Executed</h3><p>当我们跑Java程序的时候，是怎么运作的。</p>
<p>在编译步骤中，Intellij 使用Java编译器把代码编译成Java bytecode的形式。编译完成后，Java bytecode可以在Windows ，Mac，Linux或任何有JRE（Java runtime environment）的操作系统上运行。 JRE中各个操作系统都有一个软件叫做JVM(Java Virtual Machine) .JVM 会把Java byte code 转换成 Windows可以理解并架构的Native Code。这就是所谓的 一次编译，到处运行</p>
<p><img src="/2020/07/01/Java%E5%9F%BA%E7%A1%801/4.png" style="zoom: 80%;"></p>
<p>java有4个版本：Java SE，Java EE，Java ME ,Java Card</p>
<p>Java SE 是Java Standard Edition的缩写，这是Java的核心平台，包含了Java的每一个库</p>
<p>Java EE 是Java Enterprise Edition的缩写，用于构建超大型、分布式系统。它建立在SE之上</p>
<p>Java ME是Java Micro Edition的缩写，这是专门为移动设备设计的Java标准版的子集</p>
<p>Java Card是在智能卡中使用的</p>
<h2 id="Types"><a href="#Types" class="headerlink" title="Types"></a>Types</h2><h3 id="Primitive-Types"><a href="#Primitive-Types" class="headerlink" title="Primitive Types"></a>Primitive Types</h3><p>Primitive Types是存储simple value的，也就是下面的八种基本类型</p>
<p>Java语言提供了八种基本类型。六种数字类型（四个整数型，两个浮点型），一种字符类型，还有一种布尔型。</p>
<p>byte：</p>
<ul>
<li>byte数据类型是8位、有符号的，以二进制补码表示的整数；</li>
<li>最小值是-128$(-2^7)$；</li>
<li>最大值是127$(2^7-1)$；</li>
<li>默认值是0；</li>
<li>byte类型用在大型数组中节约空间，主要代替整数，因为byte变量占用的空间只有int类型的四分之一；</li>
<li>例子：byte a = 100，byte b = -50。</li>
</ul>
<p>short：</p>
<ul>
<li>short数据类型是16位、有符号的以二进制补码表示的整数</li>
<li>最小值是-32768$(-2^{15})$；</li>
<li>最大值是32767 $(2^{15} - 1)$；</li>
<li>Short数据类型也可以像byte那样节省空间。一个short变量是int型变量所占空间的二分之一；</li>
<li>默认值是0；</li>
<li>例子：short s = 1000，short r = -20000。</li>
</ul>
<p>int：</p>
<ul>
<li>int数据类型是32位、有符号的以二进制补码表示的整数；</li>
<li>最小值是-2,147,483,648 $(-2^{31})$；</li>
<li>最大值是2,147,483,647 $(2^{31} - 1)$；</li>
<li>一般地整型变量默认为int类型；</li>
<li>默认值是0；</li>
<li>例子：int a = 100000, int b = -200000。</li>
</ul>
<p>long：</p>
<ul>
<li>long数据类型是64位、有符号的以二进制补码表示的整数；</li>
<li>最小值是-9,223,372,036,854,775,808 $(-2^{63})$；</li>
<li>最大值是9,223,372,036,854,775,807 $(2^{63} -1)$；</li>
<li>这种类型主要使用在需要比较大整数的系统上；</li>
<li>默认值是0L；</li>
<li>例子： </li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">long</span> viewsCount = <span class="number">3_123_456_789L</span>;</span><br></pre></td></tr></table></figure>
<p>float：</p>
<ul>
<li>float数据类型是单精度、32位、符合IEEE 754标准的浮点数；</li>
<li>float在储存大型浮点数组的时候可节省内存空间；</li>
<li>默认值是0.0f；</li>
<li>浮点数不能用来表示精确的值，如货币；</li>
<li>例子：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">float</span> f1 = <span class="number">234.5F</span>;</span><br></pre></td></tr></table></figure>
<p>double：</p>
<ul>
<li>double数据类型是双精度、64位、符合IEEE 754标准的浮点数；</li>
<li>浮点数的默认类型为double类型；</li>
<li>double类型同样不能表示精确的值，如货币；</li>
<li>默认值是0.0d；</li>
<li>例子：double d1 = 123.4。</li>
</ul>
<p>boolean：</p>
<ul>
<li>boolean数据类型表示一位的信息；</li>
<li>只有两个取值：true和false；</li>
<li>这种类型只作为一种标志来记录true/false情况；</li>
<li>默认值是false；</li>
<li>例子：boolean one = true。</li>
</ul>
<p>char：</p>
<ul>
<li>char类型是一个单一的16位Unicode字符；</li>
<li>最小值是’\u0000’（即为0）；</li>
<li>最大值是’\uffff’（即为65,535）；</li>
<li>char数据类型可以储存任何字符；</li>
<li>例子：char letter = ‘A’。</li>
</ul>
<h3 id="Reference-Types"><a href="#Reference-Types" class="headerlink" title="Reference Types"></a>Reference Types</h3><p>Reference Types是存储复杂的对象的 ,比如说Date类 ，mail message 类 </p>
<p>在使用Reference Types 时，我们必须手动分配内存</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Date now = <span class="keyword">new</span> Date();</span><br><span class="line">        System.out.println(now);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Wed Jul 01 16:33:52 GMT+08:00 2020</span></span><br></pre></td></tr></table></figure>
<h3 id="Primitive-vs-Reference-Types"><a href="#Primitive-vs-Reference-Types" class="headerlink" title="Primitive vs Reference Types"></a>Primitive vs Reference Types</h3><p>Primitive Types 中，我们声明两个变量，让他们相等，那么只是数值上相等，它们的存储地址是不一样的</p>
<p>但是Reference Types ，里面存储的时地址，所以让 point2 = point1之后，point1，point2中存储的有相同的地址。当对point1中修改时，point2也会相应修改。</p>
<p><img src="/2020/07/01/Java%E5%9F%BA%E7%A1%801/5.png" style="zoom: 40%;"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"><span class="keyword">import</span> java.awt.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Point point1 = <span class="keyword">new</span> Point(<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">        Point point2 = point1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Strings"><a href="#Strings" class="headerlink" title="Strings"></a>Strings</h3><p>在java当中，我们String是一个 <code>Reference Type</code>，但是我们使用 String 不需要引入Java的库，也不需要用new来声明（用new也可以，只是简便声明不需要使用new Sring) </p>
<p>我们也可以通过加号直接连接两个字符串。</p>
<p>因为字符串是 <code>Reference Type</code>，所以我们可以通过 . 来使用String类中的方法</p>
<p>区分<code>arguments</code>和 <code>parameter</code> ： <code>parameter</code>可以理解为占位符，只是申请了一段空间的容器。但是<code>arguments</code>是我们传入的值</p>
<p><code>endsWith()</code>用来判断字符串是否以某一字符串结束的</p>
<p><code>startsWith()</code>用来判断字符串是否以某一字符串开始的</p>
<p><code>length()</code>计算字符串的长度</p>
<p><code>indexOf()</code>计算目标字符串第一个字符在查询字符串中的索引，如果不是该查询字符串的子串，那么返回-1</p>
<p><code>replace()</code>是替换，前一个参数是被替换的字符串；后一个参数是需要替换进去的字符串</p>
<p><code>toLowerCase()</code>和<code>toUpperCase()</code>是让字符串全部变小写或者大写</p>
<p><code>trim()</code>是让字符串去掉头尾的空格，这在用户输入一些</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String message = <span class="string">"  Hello World"</span> + <span class="string">"!!"</span>;</span><br><span class="line">        System.out.println(message.endsWith(<span class="string">"!!"</span>));</span><br><span class="line">        System.out.println(message.startsWith(<span class="string">"!!"</span>));</span><br><span class="line">        System.out.println(message.length());</span><br><span class="line">        System.out.println(message.indexOf(<span class="string">"lw"</span>));</span><br><span class="line">        System.out.println(message.replace(<span class="string">"!"</span>,<span class="string">"*"</span>));</span><br><span class="line">        System.out.println(message.toLowerCase());</span><br><span class="line">        System.out.println(message.toUpperCase());</span><br><span class="line">        System.out.println(message.trim());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">true</span></span><br><span class="line"><span class="comment">false</span></span><br><span class="line"><span class="comment">15</span></span><br><span class="line"><span class="comment">-1</span></span><br><span class="line"><span class="comment">  Hello World**</span></span><br><span class="line"><span class="comment">  hello world!!</span></span><br><span class="line"><span class="comment">  HELLO WORLD!!</span></span><br><span class="line"><span class="comment">Hello World!!</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h3 id="Escape-Sequences-转义序列"><a href="#Escape-Sequences-转义序列" class="headerlink" title="Escape Sequences 转义序列"></a>Escape Sequences 转义序列</h3><p>双引号的转义 就是 <code>\&quot;</code></p>
<p>反斜杠的转义就是 <code>\\</code></p>
<p>换行的转义就是 <code>\n</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Hello World \"Jason\" "</span>);</span><br><span class="line">        System.out.println(<span class="string">"c\\windows\\..."</span>);</span><br><span class="line">        System.out.println(<span class="string">"c:\nWindows\\..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Hello World "Jason" </span></span><br><span class="line"><span class="comment">c\windows\...</span></span><br><span class="line"><span class="comment">c:</span></span><br><span class="line"><span class="comment">Windows\...</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h3 id="Arrays"><a href="#Arrays" class="headerlink" title="Arrays"></a>Arrays</h3><p>用繁琐且老旧的语法来声明一个数组的语法是这样的：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] numbers = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">5</span>];</span><br><span class="line">        numbers[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        numbers[<span class="number">1</span>] = <span class="number">2</span>;</span><br><span class="line">        System.out.println(Arrays.toString(numbers));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当我们提前知道了数组中的元素的时候，我们可以更简单的声明一个数组</p>
<p>用花括号声明即可</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] numbers =  &#123;<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">1</span>&#125;;</span><br><span class="line">        System.out.println(numbers.length);</span><br><span class="line">        System.out.println(Arrays.toString(numbers));</span><br><span class="line">        Arrays.sort(numbers);</span><br><span class="line">        System.out.println(Arrays.toString(numbers));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">5</span></span><br><span class="line"><span class="comment">[2, 3, 4, 5, 1]</span></span><br><span class="line"><span class="comment">[1, 2, 3, 4, 5]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>我们不能直接 <code>System.out.printIn(number)</code> 因为这样java引擎会根据每个数字存储的地址计算得出一个我们看不懂的字符串。所以需要<code>System.out.println(Arrays.toString(numbers));</code></p>
<h3 id="Multi-dimensional-Arrays"><a href="#Multi-dimensional-Arrays" class="headerlink" title="Multi-dimensional Arrays"></a>Multi-dimensional Arrays</h3><p>我们可以定义多维数组，但是多维数组需要<code>deepToString()</code>而不是 <code>toString()</code>才能正常打印</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> [][][] numbers = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>][<span class="number">3</span>][<span class="number">5</span>];</span><br><span class="line">    numbers [<span class="number">0</span>][<span class="number">0</span>][<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    System.out.println(Arrays.deepToString(numbers));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> [][] numbers = &#123;&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;,&#123;<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;&#125;;</span><br><span class="line">    System.out.println(Arrays.deepToString(numbers));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Constants-常量-final关键词"><a href="#Constants-常量-final关键词" class="headerlink" title="Constants 常量(final关键词)"></a>Constants 常量(final关键词)</h3><p> 我们想定义 pi为常量，所以我们希望它一经申明就不能再改变，我们需要用<code>final</code>来声明一个<strong>常量</strong>。常量的所有字母需要大写。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">float</span> PI = <span class="number">3.14F</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>此外，final还可以用来修室类和方法。<a href="https://www.cnblogs.com/xiaoxi/p/6392154.html" target="_blank" rel="noopener">浅谈Java中的final关键字 - 平凡希 - 博客园 (cnblogs.com)</a></p>
<p>当用final修饰一个类时，表明这个类不能被继承。也就是说，如果一个类你永远不会让他被继承，就可以用final进行修饰。final类中的成员变量可以根据需要设为final，但是要注意final类中的所有成员方法都会被隐式地指定为final方法。<strong>在使用final修饰类的时候，要注意谨慎选择，除非这个类真的在以后不会用来继承或者出于安全的考虑，尽量不要将类设计为final类。</strong></p>
<p><strong>如果只有在想明确禁止 该方法在子类中被覆盖的情况下才将方法设置为final的。即父类的final方法是不能被子类所覆盖的，也就是说子类是不能够存在和父类一模一样的方法的。</strong></p>
<h3 id="Arithmetic-Expressions"><a href="#Arithmetic-Expressions" class="headerlink" title="Arithmetic Expressions"></a>Arithmetic Expressions</h3><p>和C++一样，不讲了</p>
<h3 id="Order-of-Operations"><a href="#Order-of-Operations" class="headerlink" title="Order of Operations"></a>Order of Operations</h3><p>和C++一样，不讲了</p>
<h3 id="Casting"><a href="#Casting" class="headerlink" title="Casting"></a>Casting</h3><p>java中的类型转换</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">short</span> x = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> y = x+<span class="number">2</span>;</span><br><span class="line">System.out.println(y);</span><br></pre></td></tr></table></figure>
<p>我们这样会做一个隐式类型转换。short是短整型，int是整型。int中可以存储所有short变量当中的值</p>
<p>在java中，是这样操作隐式类型转换的 ：在 int y = x+2 这句话中，java看见x，会在内存中某个地方申明一个匿名变量，那个匿名变量是整数，然后java将x的值复制到那个匿名变量中。再执行加法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> x = <span class="number">1.1</span>;</span><br><span class="line"><span class="keyword">double</span> y = x+<span class="number">2</span>;</span><br><span class="line">System.out.println(y);</span><br></pre></td></tr></table></figure>
<p>在整型、浮点数之间转换，java也会按照这个规则。 首先会把2 转换为2.0 ,其次执行加法</p>
<p><code>byte&gt;short&gt;int&gt;long&gt;float&gt;double</code>  java中的数据类型可以根据这个链转换。如果不丢失数据的话，都会发生隐式转换。</p>
<p>我们也可以进行强制类型转换，这时候会丢失一些数据</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> x = <span class="number">1.1</span>;</span><br><span class="line"><span class="keyword">int</span> y = (<span class="keyword">int</span>)x +<span class="number">1</span>;</span><br><span class="line">System.out.println(y);</span><br><span class="line"><span class="comment">//结果为2</span></span><br></pre></td></tr></table></figure>
<p>现在，我们想把<strong>string 转为数字</strong>，无论用隐式转换还是显示转换都无法达成。需要引用一个类</p>
<p>用 <code>Short.parseShort()</code>，<code>Integer.parseInt()</code>，<code>Double.parseDouble()</code> 等来把字符串转换成整数、浮点数</p>
<p>注意： 如果 <code>String x = &quot;1.1&quot;</code>  那么转换成 整数的时候，就会发生报错</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String x = <span class="string">"1"</span>;</span><br><span class="line"><span class="keyword">int</span> y = Short.parseShort(x)+<span class="number">2</span> ;</span><br><span class="line">System.out.println(y);</span><br></pre></td></tr></table></figure>
<h3 id="The-Math-Class"><a href="#The-Math-Class" class="headerlink" title="The Math Class"></a>The Math Class</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> result = Math.round(<span class="number">1.1F</span>);</span><br><span class="line"><span class="keyword">int</span> result2 = (<span class="keyword">int</span>) Math.ceil(<span class="number">1.1F</span>);</span><br><span class="line"><span class="keyword">int</span> result3 = (<span class="keyword">int</span>) Math.max(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">int</span> result4 = (<span class="keyword">int</span>) Math.min(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">int</span> result5 = (<span class="keyword">int</span>) Math.random();</span><br></pre></td></tr></table></figure>
<p>注意，我们<strong>不能</strong> 这样来得到一个0-100的随机整数：<code>int result = (int) Math.random()*100;</code> 因为<code>Math.random()</code>产生一个0-1的小数，int转换之后变成0了，0*100 还是等于0，所以我们<strong>必须要把整个表达式包裹:</strong> <code>int result = (int) (Math.random()*100);</code></p>
<h3 id="Formatting-Numbers"><a href="#Formatting-Numbers" class="headerlink" title="Formatting Numbers"></a>Formatting Numbers</h3><p>注意：<code>NumberFormat</code>是一个<strong>抽象类，无法实例化</strong>，我们不能直接 <code>NumberFormat currency = new NumberFormat()</code></p>
<p>我们需要用到<code>NumberFormat</code>这个类。其中<code>getCurrencyInstance</code>是把数字转换成钱币的格式，<code>getPercentInstance</code>则是把数字转换成百分比的形式。</p>
<p>我们可以简单的使用<code>NumberFormat.getCurrencyInstance().format()</code> 来格式化字符串</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"><span class="keyword">import</span> java.text.NumberFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        NumberFormat currency = NumberFormat.getCurrencyInstance();</span><br><span class="line">        String result = currency.format(<span class="number">1234567.891</span>);</span><br><span class="line">        System.out.println(result);</span><br><span class="line">        NumberFormat percent = NumberFormat.getPercentInstance();</span><br><span class="line">        String result2 = percent.format(<span class="number">0.2</span>);</span><br><span class="line">        System.out.println(result2);</span><br><span class="line">        String result3 = NumberFormat.getCurrencyInstance().format(<span class="number">1213.39</span>);</span><br><span class="line">        System.out.println(result3);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/01/Java%E5%9F%BA%E7%A1%801/8.png" style="zoom: 140%;"></p>
<h3 id="Reading-Input"><a href="#Reading-Input" class="headerlink" title="Reading Input"></a>Reading Input</h3><p>要读取字符串或者数字，我们需要用到scanner</p>
<p>首先新建一个 Scanner对象，我们要确定信息是从终端获取的还是从文件当中获取的。我们这里是从终端获取的，所以选择 <code>System.in</code></p>
<p>然后用<code>scanner.nextByte()</code>读取一个byte 或者 <code>scanner.nextline()</code>是读取一行信息,以此类推，有<br><code>nextBoolean()</code> ,<code>nextDouble()</code> ,<code>nextFloat()</code>等等</p>
<p>因为<code>System.out.println();</code>是<strong>打印一行信息</strong>， 我们希望 是 Age: 后输入年龄，不用换行。所以使用 <code>System.out.print()</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        System.out.print(<span class="string">"Age: "</span>);</span><br><span class="line">        <span class="keyword">byte</span> age = scanner.nextByte();</span><br><span class="line">        System.out.println(<span class="string">"Your age is "</span>+age);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Project-Mortgage-Calculator-按揭"><a href="#Project-Mortgage-Calculator-按揭" class="headerlink" title="Project- Mortgage Calculator  按揭"></a>Project- Mortgage Calculator  按揭</h3><p><strong>等额本息</strong>公式： $P = L[c(1+c)^n]/[(1+c)^n-1] $ </p>
<p>每月还款金额 = [贷款本金×月利率×(1+月利率)\^还款月数]÷[(1+月利率)\^还款月数－1]</p>
<p>其中 L 代表 principal，即本金</p>
<p>c 代表 monthly Interest ，月利率</p>
<p>n 代表 月数</p>
<p>相对于<strong>等额本金还款法 </strong>的劣势在于支出利息较多，还款初期利息占每月供款的大部分，随本金逐渐返还供款中本金比重增加。但该方法每月的还款额固定，可以有计划地控制家庭收入的支出，也便于每个家庭根据自己的收入情况，确定还贷能力。</p>
<p>最终计算得到的 Mortage就是每月需要支付的按揭金额</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.text.NumberFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">byte</span> MONTHS_IN_YEAR = <span class="number">12</span>;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">byte</span> PERCENT = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line"></span><br><span class="line">        System.out.print(<span class="string">"Principal: "</span>);</span><br><span class="line">        <span class="keyword">int</span> principal = scanner.nextInt();</span><br><span class="line"></span><br><span class="line">        System.out.print(<span class="string">"Annual Interest Rate: "</span>);</span><br><span class="line">        <span class="keyword">float</span> annualInterest = scanner.nextFloat();</span><br><span class="line">        <span class="keyword">float</span> monthlyInterest = annualInterest / PERCENT / MONTHS_IN_YEAR;</span><br><span class="line"></span><br><span class="line">        System.out.print(<span class="string">"Period (Years): "</span>);</span><br><span class="line">        <span class="keyword">byte</span> years = scanner.nextByte();</span><br><span class="line">        <span class="keyword">int</span> numberOfPayments = years * MONTHS_IN_YEAR;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">double</span> mortgage = principal</span><br><span class="line">       	* (monthlyInterest * Math.pow(<span class="number">1</span> + monthlyInterest, numberOfPayments))</span><br><span class="line">        / (Math.pow(<span class="number">1</span> + monthlyInterest, numberOfPayments) - <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        String mortgageFormatted = </span><br><span class="line">            NumberFormat.getCurrencyInstance().format(mortgage);</span><br><span class="line">        System.out.println(<span class="string">"Mortgage: "</span> + mortgageFormatted);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/01/Java%E5%9F%BA%E7%A1%801/9.png" style="zoom: 140%;"></p>
<h2 id="Control-Flow"><a href="#Control-Flow" class="headerlink" title="Control Flow"></a>Control Flow</h2><h3 id="Comparison-Operators"><a href="#Comparison-Operators" class="headerlink" title="Comparison Operators"></a>Comparison Operators</h3><p>和C++一样</p>
<h3 id="Logical-Operators"><a href="#Logical-Operators" class="headerlink" title="Logical Operators"></a>Logical Operators</h3><p>在C中布尔变量用bool声明，但是在java中用 boolean声明，其他一样</p>
<p>||, &amp;&amp;,! 和C++一样</p>
<h3 id="If-Statements"><a href="#If-Statements" class="headerlink" title="If Statements"></a>If Statements</h3><p>和C++一样</p>
<h3 id="The-Ternary-Operator"><a href="#The-Ternary-Operator" class="headerlink" title="The Ternary Operator"></a>The Ternary Operator</h3><p>也就是 ?: 运算符，和C++一样</p>
<h3 id="Switch-Statements"><a href="#Switch-Statements" class="headerlink" title="Switch Statements"></a>Switch Statements</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String role = <span class="string">"admin"</span>;</span><br><span class="line">        <span class="keyword">switch</span> (role)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"admin"</span>:</span><br><span class="line">                System.out.println(<span class="string">"You're an admin"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"moderator"</span>:</span><br><span class="line">                System.out.println(<span class="string">"You're a moderator"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                System.out.println(<span class="string">"You're a guest"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Exercise-FizzBuzz"><a href="#Exercise-FizzBuzz" class="headerlink" title="Exercise- FizzBuzz"></a>Exercise- FizzBuzz</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        System.out.print(<span class="string">"Number : "</span>);</span><br><span class="line">        <span class="keyword">int</span> x = scanner.nextInt();</span><br><span class="line">        <span class="keyword">if</span>(x%<span class="number">15</span>==<span class="number">0</span>)</span><br><span class="line">            System.out.println(<span class="string">"FizzBuzz"</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(x%<span class="number">3</span>==<span class="number">0</span>)</span><br><span class="line">            System.out.println(<span class="string">"Buzz"</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(x%<span class="number">5</span>==<span class="number">0</span>)</span><br><span class="line">            System.out.println(<span class="string">"Fizz"</span>);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            System.out.println(x);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="For-Loops"><a href="#For-Loops" class="headerlink" title="For Loops"></a>For Loops</h3><p>和C++一样</p>
<h3 id="While-Loops"><a href="#While-Loops" class="headerlink" title="While Loops"></a>While Loops</h3><p>和C++一样</p>
<h3 id="Do-While-Loops"><a href="#Do-While-Loops" class="headerlink" title="Do..While Loops"></a>Do..While Loops</h3><p>和C++一样</p>
<h3 id="Break-and-Continue-Statements"><a href="#Break-and-Continue-Statements" class="headerlink" title="Break and Continue Statements"></a>Break and Continue Statements</h3><p>和C++一样</p>
<h3 id="For-Each-Loop"><a href="#For-Each-Loop" class="headerlink" title="For-Each Loop"></a>For-Each Loop</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String[] fruits = &#123;<span class="string">"Apple"</span>,<span class="string">"Mango"</span>,<span class="string">"Orange"</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span>(String i:fruits)</span><br><span class="line">            System.out.println(i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>还是和C++一样</p>
<h3 id="Project-Mortgage-Calculator"><a href="#Project-Mortgage-Calculator" class="headerlink" title="Project- Mortgage Calculator"></a>Project- Mortgage Calculator</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.text.NumberFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">byte</span> MONTHS_IN_YEAR = <span class="number">12</span>;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">byte</span> PERCENT = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> principal = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">float</span> monthlyInterest = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> numberOfPayments = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            System.out.print(<span class="string">"Principal: "</span>);</span><br><span class="line">            principal = scanner.nextInt();</span><br><span class="line">            <span class="keyword">if</span> (principal &gt;= <span class="number">1000</span> &amp;&amp; principal &lt;= <span class="number">1_000_000</span>)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            System.out.println(<span class="string">"Enter a value between 1000 and 1000000"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            System.out.print(<span class="string">"Annual Interest Rate: "</span>);</span><br><span class="line">            <span class="keyword">float</span> annualInterest = scanner.nextFloat();</span><br><span class="line">            <span class="keyword">if</span> (annualInterest &gt;= <span class="number">1</span> &amp;&amp; annualInterest &lt;= <span class="number">30</span>) &#123;</span><br><span class="line">                monthlyInterest = annualInterest / PERCENT / MONTHS_IN_YEAR;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">"Enter a value between 1 and 30"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            System.out.print(<span class="string">"Period (Years): "</span>);</span><br><span class="line">            <span class="keyword">byte</span> years = scanner.nextByte();</span><br><span class="line">            <span class="keyword">if</span> (years &gt;= <span class="number">1</span> &amp;&amp; years &lt;= <span class="number">30</span>) &#123;</span><br><span class="line">                numberOfPayments = years * MONTHS_IN_YEAR;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">"Enter a value between 1 and 30."</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">double</span> mortgage = principal</span><br><span class="line">                * (monthlyInterest * Math.pow(<span class="number">1</span> + monthlyInterest, numberOfPayments))</span><br><span class="line">                / (Math.pow(<span class="number">1</span> + monthlyInterest, numberOfPayments) - <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        String mortgageFormatted = </span><br><span class="line">            NumberFormat.getCurrencyInstance().format(mortgage);</span><br><span class="line">        System.out.println(<span class="string">"Mortgage: "</span> + mortgageFormatted);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Clean-Coding"><a href="#Clean-Coding" class="headerlink" title="Clean Coding"></a>Clean Coding</h2><p>对上面的代码进行优化、重构</p>
<h3 id="Creating-Methods-新建方法"><a href="#Creating-Methods-新建方法" class="headerlink" title="Creating Methods 新建方法"></a>Creating Methods 新建方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        greetUser(<span class="string">"Jason"</span>,<span class="string">"Ball"</span>);</span><br><span class="line">        greetUser2(<span class="string">"John"</span>,<span class="string">"Snow"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">greetUser</span><span class="params">(String firstName,String lastName)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Hello "</span>+firstName+<span class="string">" "</span>+lastName);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">greetUser2</span><span class="params">(String firstName,String lastName)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span>  <span class="string">"Hello "</span>+firstName+<span class="string">" "</span>+lastName;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/01/Java%E5%9F%BA%E7%A1%801/7.png" style="zoom: 140%;"></p>
<h3 id="Extracting-Methods"><a href="#Extracting-Methods" class="headerlink" title="Extracting Methods"></a>Extracting Methods</h3><p>就像上面写的简单的方法一样，现在我们把计算Mortage写成一个方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.text.NumberFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> principal = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">float</span> annualInterest = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">byte</span> years = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            System.out.print(<span class="string">"Principal: "</span>);</span><br><span class="line">            principal = scanner.nextInt();</span><br><span class="line">            <span class="keyword">if</span> (principal &gt;= <span class="number">1000</span> &amp;&amp; principal &lt;= <span class="number">1_000_000</span>)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            System.out.println(<span class="string">"Enter a value between 1000 and 1000000"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            System.out.print(<span class="string">"Annual Interest Rate: "</span>);</span><br><span class="line">            annualInterest = scanner.nextFloat();</span><br><span class="line">            <span class="keyword">if</span> (annualInterest &gt;= <span class="number">1</span> &amp;&amp; annualInterest &lt;= <span class="number">30</span>)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            System.out.println(<span class="string">"Enter a value between 1 and 30"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            System.out.print(<span class="string">"Period (Years): "</span>);</span><br><span class="line">            years = scanner.nextByte();</span><br><span class="line">            <span class="keyword">if</span> (years &gt;= <span class="number">1</span> &amp;&amp; years &lt;= <span class="number">30</span>)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            System.out.println(<span class="string">"Enter a value between 1 and 30."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">double</span> mortgage = calculateMortage(principal,annualInterest,years);</span><br><span class="line">        String mortgageFormatted =</span><br><span class="line">                NumberFormat.getCurrencyInstance().format(mortgage);</span><br><span class="line">        System.out.println(<span class="string">"Mortgage: "</span> + mortgageFormatted);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">calculateMortage</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">int</span> principal,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">float</span> annualInterest,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">byte</span> years)</span></span>&#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">byte</span> MONTHS_IN_YEAR = <span class="number">12</span>;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">byte</span> PERCENT = <span class="number">100</span>;</span><br><span class="line">        <span class="keyword">short</span> numberOfPayments = (<span class="keyword">short</span>)(years * MONTHS_IN_YEAR);</span><br><span class="line">        <span class="keyword">float</span> monthlyInterest = annualInterest / PERCENT / MONTHS_IN_YEAR;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> principal</span><br><span class="line">                * (monthlyInterest * Math.pow(<span class="number">1</span> + monthlyInterest, numberOfPayments))</span><br><span class="line">                / (Math.pow(<span class="number">1</span> + monthlyInterest, numberOfPayments) - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Refactoring-Repetitive-Patterns"><a href="#Refactoring-Repetitive-Patterns" class="headerlink" title="Refactoring Repetitive Patterns"></a>Refactoring Repetitive Patterns</h3><p>然后，我们继续把输入数字的语句抽象出来成为一个函数，readByte,readInt,readFloat</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.text.NumberFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">int</span> principal = (<span class="keyword">int</span>) readNumber(<span class="string">"Principal: "</span>,<span class="number">1000</span>,<span class="number">1000000</span>);</span><br><span class="line">        <span class="keyword">float</span> annualInterest = (<span class="keyword">float</span>)readNumber(<span class="string">"Annual Interest Rate: "</span>,<span class="number">1</span>,<span class="number">30</span>);</span><br><span class="line">        <span class="keyword">byte</span> years = (<span class="keyword">byte</span>)readNumber(<span class="string">"Period (Years): "</span>,<span class="number">1</span>,<span class="number">30</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">double</span> mortgage = calculateMortage(principal,annualInterest,years);</span><br><span class="line">        String mortgageFormatted =</span><br><span class="line">                NumberFormat.getCurrencyInstance().format(mortgage);</span><br><span class="line">        System.out.println(<span class="string">"Mortgage: "</span> + mortgageFormatted);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">readNumber</span><span class="params">(String prompt,<span class="keyword">double</span> min,<span class="keyword">double</span> max)</span></span>&#123;</span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">double</span> value;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            System.out.print(prompt);</span><br><span class="line">            value = scanner.nextInt();</span><br><span class="line">            <span class="keyword">if</span> (value &gt;= min &amp;&amp; value &lt;= max)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            System.out.println(<span class="string">"Enter a value between "</span>+min+<span class="string">" and "</span>+max);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">calculateMortage</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">int</span> principal,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">float</span> annualInterest,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">byte</span> years)</span></span>&#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">byte</span> MONTHS_IN_YEAR = <span class="number">12</span>;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">byte</span> PERCENT = <span class="number">100</span>;</span><br><span class="line">        <span class="keyword">short</span> numberOfPayments = (<span class="keyword">short</span>)(years * MONTHS_IN_YEAR);</span><br><span class="line">        <span class="keyword">float</span> monthlyInterest = annualInterest / PERCENT / MONTHS_IN_YEAR;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> principal</span><br><span class="line">                * (monthlyInterest * Math.pow(<span class="number">1</span> + monthlyInterest, numberOfPayments))</span><br><span class="line">                / (Math.pow(<span class="number">1</span> + monthlyInterest, numberOfPayments) - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Project-Payment-Schedule"><a href="#Project-Payment-Schedule" class="headerlink" title="Project- Payment Schedule"></a>Project- Payment Schedule</h3><p>计算每期付款后剩下需要还款余额</p>
<p>公式：$B =L[(1+c)^n-(1+c)^p]/[(1+c)^n-1]$ </p>
<p>B 代表 Balance,即需要还款的余额</p>
<p> p代表当前还款进行到第几个月</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.text.NumberFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">byte</span> MONTHS_IN_YEAR = <span class="number">12</span>;</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">byte</span> PERCENT = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">int</span> principal = (<span class="keyword">int</span>) readNumber(<span class="string">"Principal: "</span>,<span class="number">1000</span>,<span class="number">1000000</span>);</span><br><span class="line">        <span class="keyword">float</span> annualInterest = (<span class="keyword">float</span>)readNumber(<span class="string">"Annual Interest Rate: "</span>,<span class="number">1</span>,<span class="number">30</span>);</span><br><span class="line">        <span class="keyword">byte</span> years = (<span class="keyword">byte</span>)readNumber(<span class="string">"Period (Years): "</span>,<span class="number">1</span>,<span class="number">30</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">double</span> mortgage = calculateMortage(principal,annualInterest,years);</span><br><span class="line">        String mortgageFormatted =</span><br><span class="line">                NumberFormat.getCurrencyInstance().format(mortgage);</span><br><span class="line">        System.out.println();</span><br><span class="line">        System.out.println(<span class="string">"MORTAGE"</span>);</span><br><span class="line">        System.out.println(<span class="string">"------"</span>);</span><br><span class="line">        System.out.println(<span class="string">"Mortgage: "</span> + mortgageFormatted);</span><br><span class="line"></span><br><span class="line">        System.out.println();</span><br><span class="line">        System.out.println(<span class="string">"PAYMENT SCHEDULE"</span>);</span><br><span class="line">        System.out.println(<span class="string">"------"</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">short</span> month = <span class="number">1</span>;month&lt;= years*MONTHS_IN_YEAR;month++)&#123;</span><br><span class="line">            <span class="keyword">double</span> balance = calculateBalance(principal,annualInterest,years,month);</span><br><span class="line">            System.out.println(NumberFormat.getCurrencyInstance().format(balance));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// readNumber 是读取信息并做安全性判断的函数</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">readNumber</span><span class="params">(String prompt,<span class="keyword">double</span> min,<span class="keyword">double</span> max)</span></span>&#123;</span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">double</span> value;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            System.out.print(prompt);</span><br><span class="line">            value = scanner.nextInt();</span><br><span class="line">            <span class="keyword">if</span> (value &gt;= min &amp;&amp; value &lt;= max)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            System.out.println(<span class="string">"Enter a value between "</span>+min+<span class="string">" and "</span>+max);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// calculateBalance 是计算当前仍需还款余额的函数</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">calculateBalance</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">int</span> principal,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">float</span> annualInterest,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">byte</span> years,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">short</span> numberOfPaymentMade)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">short</span> numberOfPayments = (<span class="keyword">short</span>)(years * MONTHS_IN_YEAR);</span><br><span class="line">        <span class="keyword">float</span> monthlyInterest = annualInterest / PERCENT / MONTHS_IN_YEAR;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">double</span> balance = principal*(Math.pow(<span class="number">1</span>+monthlyInterest,numberOfPayments)-Math.pow(<span class="number">1</span>+monthlyInterest,numberOfPaymentMade))/(Math.pow(<span class="number">1</span>+monthlyInterest,numberOfPayments)-<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> balance;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// calculateMortage 是计算每月需要还款的金额的函数</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">calculateMortage</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">int</span> principal,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">float</span> annualInterest,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">byte</span> years)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">short</span> numberOfPayments = (<span class="keyword">short</span>)(years * MONTHS_IN_YEAR);</span><br><span class="line">        <span class="keyword">float</span> monthlyInterest = annualInterest / PERCENT / MONTHS_IN_YEAR;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> principal</span><br><span class="line">                * (monthlyInterest * Math.pow(<span class="number">1</span> + monthlyInterest, numberOfPayments))</span><br><span class="line">                / (Math.pow(<span class="number">1</span> + monthlyInterest, numberOfPayments) - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们可以利用idea自带的 Refactory-&gt;Extract-&gt;Method来自动生成方法十分方便。</p>
<h2 id="Debugging-and-Deploying-Applications"><a href="#Debugging-and-Deploying-Applications" class="headerlink" title="Debugging and Deploying Applications"></a>Debugging and Deploying Applications</h2><h3 id="Types-of-Errors"><a href="#Types-of-Errors" class="headerlink" title="Types of Errors"></a>Types of Errors</h3><p><img src="/2020/07/01/Java%E5%9F%BA%E7%A1%801/6.png" style="zoom: 40%;"></p>
<p>Compile-time Errors Idea可以帮我们提示</p>
<p>Run-time Errors 可以通过Debugger来调试</p>
<h3 id="Debugging-Java-Applications"><a href="#Debugging-Java-Applications" class="headerlink" title="Debugging Java Applications"></a>Debugging Java Applications</h3><p><a href="https://www.bilibili.com/video/BV19J411t7dD?p=15" target="_blank" rel="noopener">https://www.bilibili.com/video/BV19J411t7dD?p=15</a></p>
<h3 id="Packaging-Java-Applications"><a href="#Packaging-Java-Applications" class="headerlink" title="Packaging Java Applications"></a>Packaging Java Applications</h3><p><a href="https://www.bilibili.com/video/BV19J411t7dD?p=16" target="_blank" rel="noopener">https://www.bilibili.com/video/BV19J411t7dD?p=16</a></p>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/06/30/Linux%E5%9F%BA%E7%A1%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/%5Bobject%20Object%5D">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/" itemprop="url">Linux基础</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-06-30T16:04:55+08:00">
                2020-06-30
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified&#58;</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2021-05-08T09:37:32+08:00">
                2021-05-08
              </time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Linux基础"><a href="#Linux基础" class="headerlink" title="Linux基础"></a>Linux基础</h1><h2 id="System-Access-and-File-System"><a href="#System-Access-and-File-System" class="headerlink" title="System Access and File System"></a>System Access and File System</h2><h3 id="Command-Prompts-命令提示符"><a href="#Command-Prompts-命令提示符" class="headerlink" title="Command Prompts 命令提示符"></a>Command Prompts 命令提示符</h3><p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/31.png" style="zoom: 67%;"></p>
<p>当我们的终端没有出现命令提示符的时候，说明终端在运作或者卡住了，这时候我们需要用 ctrl+c 来 get our prompt back.就像下面这张图。当我们ctrl+c的时候，命令提示符又会出来。</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/32.png" style="zoom: 167%;"></p>
<h3 id="Accessing-to-Linux-System"><a href="#Accessing-to-Linux-System" class="headerlink" title="Accessing to Linux System"></a>Accessing to Linux System</h3><p>利用一些工具，我们可以远程链接一些系统，比如Windows我们可以用 RDP，Linux可以用putty，putty来远程管理 Linux 十分好用.</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/33.png" style="zoom: 67%;"></p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/34.png" style="zoom: 67%;"></p>
<h3 id="Download-and-install-Putty"><a href="#Download-and-install-Putty" class="headerlink" title="Download and install Putty"></a>Download and install Putty</h3><p><a href="https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html" target="_blank" rel="noopener">https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html</a></p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/35.png" style="zoom: 67%;"></p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/36.png" style="zoom: 100%;"></p>
<h3 id="New-Network-Command-ifconfig-and-ip"><a href="#New-Network-Command-ifconfig-and-ip" class="headerlink" title="New Network Command (ifconfig and ip)"></a>New Network Command (ifconfig and ip)</h3><p><a href="https://www.cnblogs.com/0to9/p/9591315.html" target="_blank" rel="noopener">https://www.cnblogs.com/0to9/p/9591315.html</a></p>
<p>  如今很多系统管理员依然通过组合使用诸如ifconfig、route、arp和netstat等命令行工具（统称为net-tools）来配置网络功能，解决网络故障。net-tools起源于BSD的TCP/IP工具箱，后来成为老版本Linux内核中配置网络功能的工具。但自2001年起，Linux社区已经对其停止维护。同时，一些Linux发行版比如Arch Linux和CentOS/RHEL 7则已经完全抛弃了net-tools，只支持iproute2。</p>
<p>​    作为网络配置工具的一份子，iproute2是linux下管理控制TCP/IP网络和流量控制的新一代工具包，旨在替代老派的工具链net-tools，即大家比较熟悉的ifconfig，arp，route，netstat等命令。。net-tools通过procfs(/proc)和ioctl系统调用去访问和改变内核网络配置，而iproute2则通过netlink套接字接口与内核通讯。抛开性能而言，net-tools的用法给人的感觉是比较乱，而iproute2的用户接口相对net-tools来说相对来说，更加直观。比如，各种网络资源（如link、IP地址、路由和隧道等）均使用合适的对象抽象去定义，使得用户可使用一致的语法去管理不同的对象。。更重要的是，到目前为止，iproute2仍处在持续开发中。</p>
<p>​    所以，net-tools和iproute2都需要去学习掌握了。</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/39.png" style="zoom: 50%;"></p>
<p>这里我选择了host-only internet</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/37.png" style="zoom: 100%;"></p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/38.png" style="zoom: 100%;"></p>
<h3 id="Connect-Linux-VM-via-Putty"><a href="#Connect-Linux-VM-via-Putty" class="headerlink" title="Connect Linux VM via Putty"></a>Connect Linux VM via Putty</h3><p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/42.png" style="zoom: 100%;"></p>
<p>点击确认：</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/40.png" style="zoom: 100%;"></p>
<p>输入账户和密码：</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/41.png" style="zoom: 100%;"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">login as: jxu</span><br><span class="line">jxu@192.168.56.101&#39;s password:</span><br><span class="line">Last login: Thu Jul  2 14:24:41 2020</span><br><span class="line">[jxu@MyFirstLinuxVM ~]$ hostname</span><br><span class="line">MyFirstLinuxVM</span><br><span class="line">[jxu@MyFirstLinuxVM ~]$</span><br></pre></td></tr></table></figure>
<p>我们看到putty链接和virtual box链接都是一样的。只是putty是在windows系统下远程链接linux，而virtualbox则是直接在linux环境之下启动的。 </p>
<h3 id="Important-Things-to-Remember-in-Linux"><a href="#Important-Things-to-Remember-in-Linux" class="headerlink" title="Important Things to Remember in Linux"></a>Important Things to Remember in Linux</h3><p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/43.png" style="zoom: 67%;"></p>
<h3 id="Introduction-to-Linux-File-System"><a href="#Introduction-to-Linux-File-System" class="headerlink" title="Introduction to Linux File System"></a>Introduction to Linux File System</h3><p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/44.png" style="zoom: 67%;"></p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/45.png" style="zoom: 67%;"></p>
<p>root / 就代表了windows中的C盘，/下有很多分文件夹</p>
<p>首先我们进入 root ，然后 ls -l 列出root目录下的文件夹</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/46.png" style="zoom: 100%;"></p>
<h3 id="FileSystem-Structure-and-Description"><a href="#FileSystem-Structure-and-Description" class="headerlink" title="FileSystem Structure and Description"></a>FileSystem Structure and Description</h3><p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/47.png" style="zoom: 100%;"></p>
<p>在命令行中，我们可以用 cd /boot  cd /opt在这些文件夹中自由切换，回到主目录使用cd命令行</p>
<p>在目录中我们使用 ls -l 查看目录下面所有的文件 </p>
<h3 id="File-System-Navigation-Commands-cd-ls-and-pwd"><a href="#File-System-Navigation-Commands-cd-ls-and-pwd" class="headerlink" title="File System Navigation Commands (cd , ls and pwd)"></a>File System Navigation Commands (cd , ls and pwd)</h3><p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/48.png" style="zoom: 80%;"></p>
<p>cd是用来切换目录的，pwd是用来显示当前所在的目录的，ls是列出目录中的文件信息的</p>
<p>在windows中，我们只需要双击就可以进入子文件夹了。而且是自动列出文件夹中的信息，并且将当前的文件夹信息显示在导航栏当中。但是linux中我们需要用命令行来操作：</p>
<p>我们先切换用户：<code>su -</code></p>
<p>输入密码后，我们的用户切换到了root</p>
<p><code>cd /</code> 从/root 切换到 / </p>
<p>ls -l 显示/文件夹下的信息：</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/49.png" style="zoom: 100%;"></p>
<p>然后我们可以切换到boot文件夹之下： cd boot/ </p>
<p>我们返回 / 文件夹的时候既可以 cd ..(代表回到上级目录) 也可以 cd /</p>
<p>如果直接写 cd 那么就会进入root文件夹，也就是根文件夹 </p>
<h3 id="Absolute-and-Relative-Paths"><a href="#Absolute-and-Relative-Paths" class="headerlink" title="Absolute and Relative Paths"></a>Absolute and Relative Paths</h3><p>绝对路径和相对路径</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/50.png" style="zoom: 60%;"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@MyFirstLinuxVM ~]# cd &#x2F;var&#x2F;log&#x2F;samba&#x2F;</span><br><span class="line">[root@MyFirstLinuxVM samba]# pwd</span><br><span class="line">&#x2F;var&#x2F;log&#x2F;samba</span><br><span class="line">[root@MyFirstLinuxVM samba]# cd &#x2F;</span><br><span class="line">[root@MyFirstLinuxVM &#x2F;]# cd var&#x2F;</span><br><span class="line">[root@MyFirstLinuxVM var]# cd log&#x2F;</span><br><span class="line">[root@MyFirstLinuxVM log]# cd samba&#x2F;</span><br><span class="line">[root@MyFirstLinuxVM samba]# pwd</span><br><span class="line">&#x2F;var&#x2F;log&#x2F;samba</span><br></pre></td></tr></table></figure>
<h3 id="Directory-Listing-Attributes"><a href="#Directory-Listing-Attributes" class="headerlink" title="Directory Listing Attributes"></a>Directory Listing Attributes</h3><p><a href="https://blog.csdn.net/sjzs5590/article/details/8254527?utm_medium=distribute.pc_relevant_t0.none-task-blog-OPENSEARCH-1.compare&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-OPENSEARCH-1.compare" target="_blank" rel="noopener">详解出自这篇博客</a></p>
<p>当我们 ls -l 的时候会列举出所有文件的具体属性。</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/51.png" style="zoom: 60%;"></p>
<h4 id="第一字段：文件属性字段"><a href="#第一字段：文件属性字段" class="headerlink" title="第一字段：文件属性字段"></a>第一字段：文件属性字段</h4><p>字母<strong>“-”</strong>表示该文件是一个普通文件</p>
<p>字母<strong>“d”</strong>表示该文件是一个目录，字母”d”，是dirtectory(目录)的缩写</p>
<p><strong>注意：</strong>目录或者是特殊文件，这个特殊文件存放其他文件或目录的相关信息</p>
<p>字母<strong>“l”</strong>表示该文件是一个链接文件。字母”l”是link(链接)的缩写，类似于windows下的快捷方式</p>
<p>字母<strong>“b”</strong>的表示块设备文件(block)，一般置于/dev目录下，设备文件是普通文件和程序访问硬件设备的入口，是很特殊的文件。没有文件大小，只有一个主设备号和一个辅设备号。一次传输数据为一整块的被称为块设备，如硬盘、光盘等。最小数据传输单位为一个数据块(通常一个数据块的大小为512字节)</p>
<p>字母为<strong>“c”</strong>表示该文件是一个字符设备文件(character)，一般置于/dev目录下，一次传输一个字节的设备被称为字符设备，如键盘、字符终端等，传输数据的最小单位为一个字节。</p>
<p>字母为<strong>“p”</strong>表示该文件为命令管道文件。与shell编程有关的文件。</p>
<p>字母<strong>“s”</strong>表示该文件为sock文件。与shell编程有关的文件。</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/52.png" style="zoom: 60%;"></p>
<h4 id="第2字段：文件硬链接数"><a href="#第2字段：文件硬链接数" class="headerlink" title="第2字段：文件硬链接数"></a>第2字段：文件硬链接数</h4><p>-rw-r—r— <strong>1</strong> root root 762 07-29 18:19 exit</p>
<p>如果一个文件不是目录，此时这一字段表示这个文件所具有的硬链接数，</p>
<p>第2字段的值为1，说明这个文件只有exit这一个文件名。即只有一个指向该链接的硬链接。</p>
<p>第1字符的后面9个字母表示该文件或目录的权限位。</p>
<p>r表是读 (Read) 、w表示写 (Write) 、x表示执行 (execute)/对目录来说代表能不能进入这个目录</p>
<p>其中前三个表示文件拥有者的权限，中间三个表示文件所属组拥有的权限，最后三个表示其他用户拥有的权限。</p>
<p>比如：</p>
<p>-rw-r—r— 1 root root 762 07-29 18:19 exit</p>
<p>表示文件的拥有者root对文件有读写权限，其他人(同组用户和其他用户只有读的权限)</p>
<p>另外，权限组还有一些特殊的表示法：</p>
<p>[root@localhost ~]# ll /usr/X11R6/bin/XFree86</p>
<p>-rws—x—x 1 root root 1960262 2003-02-28 /usr/X11R6/bin/XFree86</p>
<p>s表示这个是网络接口程序”s”是socket的缩写。该程序在运行过程中会打开一个网络接口。</p>
<p>其他UNIX类系统如FreeBSD中还有t权限，表示一个临时(temporary)文件</p>
<p>#ls -l /tmp可以看到这样的权限：drwxrwxrwt 它的最后一位是字母”t”</p>
<h4 id="第3字段：文件（目录）拥有者"><a href="#第3字段：文件（目录）拥有者" class="headerlink" title="第3字段：文件（目录）拥有者"></a>第3字段：文件（目录）拥有者</h4><p>lrwxrwxrwx 1 <strong>root</strong> root 4 08-03 08:27 bexit -&gt; exit</p>
<p>该字段表示此文件是属于哪个用户。linux类系统都是多用户系统，每个文件都有它的拥有者。只有文件的拥有者才具有改动文件属性的权利。当然， root用户具有改动任何文件属性的权利。对于一个目录来说，只有拥有该目录的用户，或者具有写权限的用户才有在目录下创建文件的权利</p>
<p>如果某一个用户因为某种原因，被删除，而该用户的文件还存在，那么用ls -l 查看该文件将显示一个代表用户存在前ID号的数字。</p>
<h4 id="第4字段：文件（目录）拥有者所在的组"><a href="#第4字段：文件（目录）拥有者所在的组" class="headerlink" title="第4字段：文件（目录）拥有者所在的组"></a>第4字段：文件（目录）拥有者所在的组</h4><p>lrwxrwxrwx 1 root <strong>root</strong> 4 08-03 08:27 bexit -&gt; exit</p>
<p>一个用户可以加入很多个组，但是其中有一个是主组，就是显示在第4字段的名称。</p>
<p>可以在useradd的时候用-g指定该用户所在的主组，用-G指定其他组</p>
<p>格式如下：Useradd –g 组名 用户名</p>
<h4 id="第5字段-文件所占用的空间-以字节为单位"><a href="#第5字段-文件所占用的空间-以字节为单位" class="headerlink" title="第5字段: 文件所占用的空间(以字节为单位)"></a>第5字段: 文件所占用的空间(以字节为单位)</h4><p>lrwxrwxrwx 1 root root <strong>4</strong> 08-03 08:27 bexit -&gt; exit</p>
<p>第5字段表示文件大小，如果是一个文件夹（目录），则表示该文件夹的大小。请<strong>注意</strong>是文件夹本身的大小，而不是文件夹以及它下面的文件的总大小。</p>
<p>很多人不能理解文件夹是一个特殊的文件的含义，这样的话理解文件夹大小的含义就比较困难了。</p>
<h4 id="第6字段：文件（目录）最近访问（修改）时间"><a href="#第6字段：文件（目录）最近访问（修改）时间" class="headerlink" title="第6字段：文件（目录）最近访问（修改）时间"></a>第6字段：文件（目录）最近访问（修改）时间</h4><p>lrwxrwxrwx 1 root root 4 <strong>08-03 08:27</strong> bexit -&gt; exit</p>
<p>文件创建的时间可以通过touch命令来修改。如：</p>
<p>[root@localhost ~]# touch exit</p>
<p>可以把exit的创建时间修改为当前时间，另外，一个文件还有最后访问时间，最后修改时间等属性。</p>
<p>这些属性可以用ls 的其它参数显示出来。</p>
<h4 id="第7字段：文件名"><a href="#第7字段：文件名" class="headerlink" title="第7字段：文件名"></a>第7字段：文件名</h4><p>lrwxrwxrwx 1 root root 4 08-03 08:27 bexit -&gt; exit</p>
<p>如果是一个符号链接，那么会有一个 “-&gt;” 箭头符号，后面根一个它指向的文件名</p>
<h3 id="Creating-Files-and-Directories-touch-cp-vi-mkdir"><a href="#Creating-Files-and-Directories-touch-cp-vi-mkdir" class="headerlink" title="Creating Files and Directories (touch, cp, vi, mkdir)"></a>Creating Files and Directories (touch, cp, vi, mkdir)</h3><p><a href="http://www.baidu.com/link?url=5fGjJuVb9ygvJXqtQC0p3uq7O60MRlvR9irUX6AAerbuiSg_nGQUl6PrztEWbvFrjD-LtXnybEGmHgoQqRPGFa&amp;wd=&amp;eqid=b89b724e00036bde000000065efed7c7" target="_blank" rel="noopener">http://www.baidu.com/link?url=5fGjJuVb9ygvJXqtQC0p3uq7O60MRlvR9irUX6AAerbuiSg_nGQUl6PrztEWbvFrjD-LtXnybEGmHgoQqRPGFa&amp;wd=&amp;eqid=b89b724e00036bde000000065efed7c7</a></p>
<h4 id="Creating-Files"><a href="#Creating-Files" class="headerlink" title="Creating Files"></a>Creating Files</h4><h5 id="touch"><a href="#touch" class="headerlink" title="touch"></a>touch</h5><p>建立一个空文档，但是不进入编辑模式</p>
<h5 id="cp"><a href="#cp" class="headerlink" title="cp"></a>cp</h5><p>copy的简称 是复制命令，用来复制文件的，它可以将文件或者目录复制到其他目录中。</p>
<h5 id="vi"><a href="#vi" class="headerlink" title="vi"></a>vi</h5><p>建立一个空文档，进入编辑模式</p>
<h4 id="Creating-Directories"><a href="#Creating-Directories" class="headerlink" title="Creating Directories"></a>Creating Directories</h4><h5 id="mkdir"><a href="#mkdir" class="headerlink" title="mkdir"></a>mkdir</h5><p>建立一个空目录</p>
<h4 id="实践"><a href="#实践" class="headerlink" title="实践"></a>实践</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">[jxu@MyFirstLinuxVM ~]$ ls -ltr</span><br><span class="line">总用量 0</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 桌面</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 音乐</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 文档</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 图片</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 视频</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 模板</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 公共</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 7月   3 00:31 下载</span><br><span class="line">-rw-rw-r--. 1 jxu jxu 0 7月   3 15:06 jerry</span><br><span class="line">[jxu@MyFirstLinuxVM ~]$ cp jerry lex</span><br><span class="line">[jxu@MyFirstLinuxVM ~]$ ls -ltr</span><br><span class="line">总用量 0</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 桌面</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 音乐</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 文档</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 图片</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 视频</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 模板</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 公共</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 7月   3 00:31 下载</span><br><span class="line">-rw-rw-r--. 1 jxu jxu 0 7月   3 15:06 jerry</span><br><span class="line">-rw-rw-r--. 1 jxu jxu 0 7月   3 15:08 lex</span><br><span class="line">[jxu@MyFirstLinuxVM ~]$ touch george</span><br><span class="line">[jxu@MyFirstLinuxVM ~]$ ls -ltr</span><br><span class="line">总用量 0</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 桌面</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 音乐</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 文档</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 图片</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 视频</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 模板</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 公共</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 7月   3 00:31 下载</span><br><span class="line">-rw-rw-r--. 1 jxu jxu 0 7月   3 15:06 jerry</span><br><span class="line">-rw-rw-r--. 1 jxu jxu 0 7月   3 15:08 lex</span><br><span class="line">-rw-rw-r--. 1 jxu jxu 0 7月   3 15:08 george</span><br></pre></td></tr></table></figure>
<p>我们也可以一下子创建三个文件。就像这样：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[jxu@MyFirstLinuxVM ~]$ touch bart lisa marge</span><br><span class="line">[jxu@MyFirstLinuxVM ~]$ ls -ltr</span><br><span class="line">总用量 0</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 桌面</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 音乐</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 文档</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 图片</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 视频</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 模板</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 6月  30 17:42 公共</span><br><span class="line">drwxr-xr-x. 2 jxu jxu 6 7月   3 00:31 下载</span><br><span class="line">-rw-rw-r--. 1 jxu jxu 0 7月   3 15:06 jerry</span><br><span class="line">-rw-rw-r--. 1 jxu jxu 0 7月   3 15:08 lex</span><br><span class="line">-rw-rw-r--. 1 jxu jxu 0 7月   3 15:08 george</span><br><span class="line">-rw-rw-r--. 1 jxu jxu 0 7月   3 15:12 marge</span><br><span class="line">-rw-rw-r--. 1 jxu jxu 0 7月   3 15:12 lisa</span><br><span class="line">-rw-rw-r--. 1 jxu jxu 0 7月   3 15:12 bart</span><br></pre></td></tr></table></figure>
<p>用mkdir来创建一个文件夹：或者一下子创建好几个文件夹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[jxu@MyFirstLinuxVM ~]$ mkdir seinfeld</span><br></pre></td></tr></table></figure>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/54.png" style="zoom: 100%;"></p>
<p>vi 命令比较特殊, 打开文件后按 i 开始插入，按 Esc 退出编辑模式， 输入 <code>:wq</code> 退出vim</p>
<h3 id="Finding-Files-and-Directories-find-locate"><a href="#Finding-Files-and-Directories-find-locate" class="headerlink" title="Finding Files and Directories (find, locate)"></a>Finding Files and Directories (find, locate)</h3><p><a href="https://www.cnblogs.com/huangcy/p/7593518.html" target="_blank" rel="noopener">https://www.cnblogs.com/huangcy/p/7593518.html</a></p>
<p>当我们在windows搜寻文件时，需要在窗口左上角的搜索框中查询（或者借助一些软件）。但是linux中会很方便：</p>
<p>find查找磁盘空间，相较于locate和whereis速度较慢。<br>find和locate的查找单位为文件或者目录，locate其实是find -name的另一种写法。<br>locate和whereis都是在数据库中查找，所以新增文件无法查找到，必须先updatedb。</p>
<h4 id="find"><a href="#find" class="headerlink" title="find"></a>find</h4><p> find<br>　　find是最常见和最强大的查找命令，你可以用它找到任何你想找的文件。与查询数据库(/var/lib/locatedb)文件不同，find查找磁盘空间。<br>　　$find [指定目录] [选项] [指定动作]（不可调换位置）</p>
<p>-[指定目录]： 所要搜索的目录及其所有子目录。默认为当前目录。<br>-[选项]： 所要搜索的文件的特征。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;常用选项　　　　　　</span><br><span class="line">-name    filename    查找名为filename的文件</span><br><span class="line">-user    username    按文件属主来查找</span><br><span class="line">-group   groupname   按组来查找</span><br><span class="line">-mtime   -n +n       按文件更改时间来查找文件，-n指n天以内，+n指n天以前</span><br><span class="line">-atime   -n +n       按文件访问时间来查找文件</span><br><span class="line">-ctime   -n +n       按文件创建时间来查找文件，-n指n天以内，+n指n天以前</span><br><span class="line">-nogroup             查无有效属组的文件，即文件的属组在&#x2F;etc&#x2F;groups中不存在</span><br><span class="line">-type    b&#x2F;d&#x2F;c&#x2F;p&#x2F;l&#x2F;f 查是块设备、目录、字符设备、管道、符号链接、普通文件</span><br><span class="line">-size    n[c]        查长度为n块[或n字节]的文件也可查找一个大小范围内的文件，用-n,+n</span><br></pre></td></tr></table></figure>
<p>实例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">  &#x2F;&#x2F;查找当前目录下以“1”开头的文件</span><br><span class="line">　find . -name &quot;1*&quot;　　</span><br><span class="line">　&#x2F;&#x2F;.代表当前目录下　　</span><br><span class="line">　　</span><br><span class="line">　&#x2F;&#x2F;查找etc目录下以字母(不区分大小写）开头，.sh结尾的文件</span><br><span class="line">  find &#x2F;etc -iname &quot;[a-z]*.sh&quot;　</span><br><span class="line">  &#x2F;&#x2F;*表示任意多个字符　　</span><br><span class="line">  </span><br><span class="line">  &#x2F;&#x2F;查找etc目录下大于20k，十天前创建的文件</span><br><span class="line">  find &#x2F;etc -size +20k -a -mtime +10</span><br><span class="line">  &#x2F;&#x2F;-a表示and，-o表示or　　</span><br><span class="line">  </span><br><span class="line">  &#x2F;&#x2F;查找当前目录下的普通文件，并列出他们的完整路径　　</span><br><span class="line">  find . -type f -exec ls -l &#123;&#125; \;　　</span><br><span class="line">  &#x2F;&#x2F;反斜杠表示转义，&#123;&#125;表示当前find查找出来的文件名</span><br><span class="line">  &#x2F;&#x2F;如果报find: missing argument to &#96;-exec&#39;的错就是&#123;&#125;和\之间没有加空格</span><br><span class="line">  </span><br><span class="line">[root@MyFirstLinuxVM &#x2F;]# find &#x2F; -name &quot;ifcfg-enp0s3&quot;</span><br><span class="line">find: ‘&#x2F;run&#x2F;user&#x2F;1000&#x2F;gvfs’: 权限不够</span><br><span class="line">&#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-enp0s3</span><br></pre></td></tr></table></figure>
<h4 id="locate"><a href="#locate" class="headerlink" title="locate"></a>locate</h4><p>locate命令<strong>其实是“find -name”的另一种写法</strong>，但是要比后者快得多，原因在于它不搜索具体目录，而是<strong>搜索一个数据库</strong>(/var/lib/locatedb)，这个数据库中含有本地所有文件信息。Linux系统自动创建这个数据库，并且<strong>每天自动更新一次</strong>，所以使用locate命令查不到最新变动过的文件。为了避免这种情况，可以在使用locate之前，先使用updatedb命令，手动更新数据库。</p>
<p>$locate [指定目录] [选项]（可调换位置）</p>
<p>　　　　[指定目录]：所要查找的任意文件名称或者查找任意目录下的任意文件。</p>
<p>　　　　-[选项]：筛选文件的条件。</p>
<blockquote>
<p>-e  将排除在寻找的范围之外。<br>-1  如果是1，则启动安全模式。在安全模式下，使用者不会看到权限无法看到的档案。这会始速度减慢，因为 locate 必须至实际的档案系统中取得档案的权限资料。<br>-f  将特定的档案系统排除在外，例如我们没有到理要把 proc 档案系统中的档案放在资料库中。<br>-q  安静模式，不会显示任何错误讯息。<br>-n  至多显示n个输出。<br>-r  使用正规运算式 做寻找的条件。<br>-o  指定资料库存的名称。<br>-d  指定资料库的路径<br>-h  显示辅助讯息<br>-V  显示程式的版本讯息<br>-i  忽略字母大小写</p>
</blockquote>
<p>locate实例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;查找etc目录下以sh开头的文件</span><br><span class="line">　　locate etc&#x2F;sh</span><br><span class="line">　　&#x2F;&#x2F;在根目录下新建文件，并查找</span><br><span class="line">　　cd</span><br><span class="line">　　touch text.log</span><br><span class="line">　　locate &#x2F;根目录&#x2F;text</span><br><span class="line">　　&#x2F;&#x2F;发现查找不到刚刚新建的文件，需要updatedb</span><br><span class="line">　　updatedb</span><br><span class="line">　　locate &#x2F;根目录&#x2F;text</span><br><span class="line">　　&#x2F;&#x2F;发现可以查找到文件</span><br></pre></td></tr></table></figure>
<h3 id="Changing-Password"><a href="#Changing-Password" class="headerlink" title="Changing Password"></a>Changing Password</h3><p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/55.png" style="zoom: 70%;"></p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/56.png" style="zoom: 70%;"></p>
<h3 id="WildCards"><a href="#WildCards" class="headerlink" title="WildCards (, , ^, [])"></a>WildCards (<em>, </em>, ^, [])</h3><p>就像扑克牌中的大小王一样， wildcards在查询中可以代替一些字符</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* - represents zero or more characters</span><br><span class="line">? - represents a single character</span><br><span class="line">[] - represents a range of characters</span><br><span class="line">\ - as an escape character</span><br><span class="line">^ - the beginning of the line</span><br><span class="line">$ - the end of the line</span><br></pre></td></tr></table></figure>
<p>用在删除当中：<code>rm abc*</code>删除所有以abc为开头的文件<code>rm ?bcd*</code>删除bcd之前有一个字符，bcd后面随便的所有文件</p>
<p>用在创建当中： <code>touch abcd{1..9}-xyz</code></p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/57.png" style="zoom: 100%;"></p>
<h3 id="Hard-and-Soft-Links-ln"><a href="#Hard-and-Soft-Links-ln" class="headerlink" title="Hard and Soft Links (ln)"></a>Hard and Soft Links (ln)</h3><p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/58.png" style="zoom: 100%;"></p>
<p>链接文件的概念类似于windows里的<strong>快捷方式</strong>。多个链接文件同时指向一个“源文件”。链接文件分为<strong>硬链接</strong>或<strong>符号链接（软链接）</strong>两种。</p>
<p>在Linux的文件系统中，保存在磁盘分区中的文件不管是什么类型都给它分配一个编号，称为索引节点号inode 。软连接，其实就是新建立一个文件，这个文件就是专门用来指向别的文件的（那就和windows 下的快捷方式的那个文件有很接近的意味）。软连接产生的是一个新的文件，但这个文件的作用就是专门指向某个文件的，<strong>删了软连接文件</strong>，那就等于不需要这个连接，和原来的存在的实体原文件<strong>没有任何关系</strong>，但<strong>删除原来的文件</strong>，则相应的<strong>软连接不可用</strong>（cat那个软链接文件，则提示“没有该文件或目录“）</p>
<p>硬连接是不会建立inode的，他只是在文件原来的inode link count域再增加1而已，也因此硬链接是不可以跨越文件系统的。相反都是软连接会重新建立一个inode，当然inode的结构跟其他的不一样，他只是一个指明源文件的字符串信息。一旦删除源文件，那么软连接将变得毫无意义。而硬链接删除源文件的时候，系统调用会检查inode link count的数值，如果他大于等于1，那么inode不会被回收，因此文件的内容不会被删除，相当于删除了一个索引。</p>
<p><strong>硬链接实际上是为文件建一个别名</strong>，链接文件和原文件实际上是同一个文件。可以通过ls -i来查看一下，这两个文件的inode号是同一个，说明它们是同一个文件；<strong>而软链接建立的是一个指向</strong>，即链接文件内的内容是指向原文件的指针，它们是两个文件。</p>
<p><strong>软链接可以跨文件系统，硬链接不可以</strong>；软链接可以对一个不存在的文件名(filename)进行链接（当然此时如果你vi这个软链接文件，linux会自动新建一个文件名为filename的文件）,硬链接不可以（其文件必须存在，inode必须存在）；软链接可以对目录进行连接，硬链接不可以。<strong>两种链接都可以通过命令 ln 来创建。ln 默认创建的是硬链接。使用 -s 开关可以创建软链接</strong></p>
<p>软链接实例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">touch hulk</span><br><span class="line">cd &#x2F;tmp&#x2F;</span><br><span class="line">ln -s &#x2F;home&#x2F;jxu&#x2F;hulk</span><br><span class="line">ls -ltr</span><br><span class="line">在最后显示: </span><br><span class="line">...... hulk&gt;&#x2F;home&#x2F;jxu&#x2F;hulk</span><br></pre></td></tr></table></figure>
<p>也就是说，我们在tmp文件夹下新建了一个链接名为hulk，这个链接是连接到/home/jxu/hulk的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[jxu@MyFirstLinuxVM ~]$ echo &quot;hulk is a superhero&quot;&gt;hulk</span><br><span class="line">[jxu@MyFirstLinuxVM ~]$ cat hulk </span><br><span class="line">hulk is a superhero</span><br><span class="line">[jxu@MyFirstLinuxVM ~]$ cd &#x2F;tmp&#x2F;</span><br><span class="line">[jxu@MyFirstLinuxVM tmp]$ cat hulk </span><br><span class="line">hulk is a superhero</span><br></pre></td></tr></table></figure>
<p>当我们删除hulk文件时，tmp文件夹下的hulk就会变成这样：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[jxu@MyFirstLinuxVM ~]$ rm hulk </span><br><span class="line">[jxu@MyFirstLinuxVM ~]$ cd &#x2F;tmp&#x2F;</span><br><span class="line">[jxu@MyFirstLinuxVM tmp]$ cat hulk</span><br><span class="line">cat: hulk: 没有那个文件或目录</span><br></pre></td></tr></table></figure>
<p>硬链接实例：</p>
<p>我们看到创建的hulk并不是一个链接</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[jxu@MyFirstLinuxVM ~]$ echo &quot;hulk is a superhero&quot; &gt;hulk </span><br><span class="line">[jxu@MyFirstLinuxVM ~]$ cat hulk</span><br><span class="line">hulk is a superhero</span><br><span class="line">[jxu@MyFirstLinuxVM ~]$ cd &#x2F;tmp</span><br><span class="line">[jxu@MyFirstLinuxVM tmp]$ rm hulk </span><br><span class="line">[jxu@MyFirstLinuxVM tmp]$ ln &#x2F;home&#x2F;jxu&#x2F;hulk</span><br><span class="line">[jxu@MyFirstLinuxVM tmp]$ ls -ltr</span><br><span class="line">...</span><br><span class="line">-rw-rw-r--. 2 jxu  jxu     20 7月   3 16:08 hulk</span><br></pre></td></tr></table></figure>
<p>而且当我删除home文件夹下的hulk时，tmp文件夹下的hulk仍然不会变的。还是有内容的</p>
<h2 id="Linux-Fundamentals"><a href="#Linux-Fundamentals" class="headerlink" title="Linux Fundamentals"></a>Linux Fundamentals</h2><h3 id="Linux-Command-Syntax"><a href="#Linux-Command-Syntax" class="headerlink" title="Linux Command Syntax"></a>Linux Command Syntax</h3><p>Commands typically have the syntax:</p>
<p><strong>command options arguments</strong></p>
<h4 id="Options"><a href="#Options" class="headerlink" title="Options:"></a>Options:</h4><p>e.g ls -l</p>
<p>e.g man -ls</p>
<p>Modify the way that a command works</p>
<p>Usually consist of a hyphen(连字符) or dash  followed by a single letter</p>
<p>some commands accept multiple options which canusually be grouped together after a single hyphen</p>
<h4 id="Arguments"><a href="#Arguments" class="headerlink" title="Arguments :"></a>Arguments :</h4><p>eg. ls -l bart</p>
<p>eg. rm -r seinfeld/</p>
<p>eg. mkdir seinfeld</p>
<p>Most commands are used together with one or moe arguments</p>
<p>Some commands  assume a default argument if none is supplied </p>
<p>Argument are optional for some commands and required by others</p>
<h3 id="Files-and-Directory-Permissions-chmod"><a href="#Files-and-Directory-Permissions-chmod" class="headerlink" title="Files and Directory Permissions (chmod)"></a>Files and Directory Permissions (chmod)</h3><p>UNIX是一个<strong>多用户系统</strong>。帐户中的每个文件和目录都可以通过更改其访问权限来防止其他用户访问。每个用户都有责任控制对其文件的访问</p>
<ul>
<li>文件或目录的权限可能会受到类型的限制</li>
<li>权限分为三种类型：读、写、运行<ul>
<li>r - read</li>
<li>w - write</li>
<li>x - execute = running a program</li>
</ul>
</li>
<li>Each permission (rwx) can be controlled at three levels:<ul>
<li>u - user = yourself</li>
<li>g - group = can be people in the same project</li>
<li>o - other = everyone on the system</li>
</ul>
</li>
<li>File or Directory permission can be displayed by running ls –l command<ul>
<li>-rwxrwxrwx</li>
<li>Command to change permission</li>
<li>chmod</li>
</ul>
</li>
</ul>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/59.png" style="zoom: 120%;"></p>
<p>当我们新学习一个命令行的时候，可以利用man+option的方法来获得这个命令行的用法</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/60.png" style="zoom: 100%;"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[jxu@MyFirstLinuxVM ~]$ chmod g-w jerry</span><br><span class="line">-rw-r--r--. 1 jxu jxu  0 7月   3 15:23 jerry</span><br></pre></td></tr></table></figure>
<p>上面的指令就是让group中的write属性关闭</p>
<p>同样的，我们进行下面的操作 a 代表了all，也就是对user，everyone，group所有对象</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[jxu@MyFirstLinuxVM ~]$ chmod a-r jerry</span><br><span class="line">[jxu@MyFirstLinuxVM ~]$ chmod u-w jerry</span><br><span class="line">----------. 1 jxu jxu  0 7月   3 15:23 jerry</span><br></pre></td></tr></table></figure>
<p>当我们把所有的权限全部关闭之后，我们就不能再读取或者删除jerry了</p>
<p>恢复权限，我们需要这样写</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[jxu@MyFirstLinuxVM ~]$ chmod u+rw jerry</span><br><span class="line">[jxu@MyFirstLinuxVM ~]$ chmod g+rw jerry </span><br><span class="line">[jxu@MyFirstLinuxVM ~]$ chmod o+r jerry </span><br><span class="line">-rw-rw-r--. 1 jxu jxu 0 7月   3 15:23 jerry</span><br></pre></td></tr></table></figure>
<p>如果directory 有 x 权限，那么说明可以通过 cd来访问这个文件夹。如果我们移除这个权限，那么我们就没有办法访问这个文件夹了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[jxu@MyFirstLinuxVM ~]$ chmod a-x seinfeld&#x2F;</span><br><span class="line">[jxu@MyFirstLinuxVM ~]$ cd seinfeld&#x2F;</span><br><span class="line">-bash: cd: seinfeld&#x2F;: 权限不够</span><br></pre></td></tr></table></figure>
<h3 id="File-Permissions-Using-Numeric-Mode"><a href="#File-Permissions-Using-Numeric-Mode" class="headerlink" title="File Permissions Using Numeric Mode"></a>File Permissions Using Numeric Mode</h3><p>我们可以直接用数字代替上面的操作：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Number</th>
<th>Permission Type</th>
<th>Symbol</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>No Permission</td>
<td>—-</td>
</tr>
<tr>
<td>1</td>
<td>Execute</td>
<td>—x</td>
</tr>
<tr>
<td>2</td>
<td>Write</td>
<td>-w-</td>
</tr>
<tr>
<td>3</td>
<td>Execu</td>
<td>-wx</td>
</tr>
<tr>
<td>4</td>
<td>Read</td>
<td>r—</td>
</tr>
<tr>
<td>5</td>
<td>Read+Execute</td>
<td>r-x</td>
</tr>
<tr>
<td>6</td>
<td>Read+Write</td>
<td>rw-</td>
</tr>
<tr>
<td>7</td>
<td>Read+Write+Execute</td>
<td>rwx</td>
</tr>
</tbody>
</table>
</div>
<p>e.g </p>
<p>chmod 764 FILE :  rwx rw- r—</p>
<p>chmod 000 FILE :  —- —- —-</p>
<p>chmod 604 FILE :  rw- —- r—</p>
<p>chmod 111 FILE :  —x —x —x</p>
<p><a href="https://wow.techbrood.com/fiddle/6986" target="_blank" rel="noopener">chmod numeric calculators</a></p>
<h3 id="File-Ownership-Commands-chown-chgrp"><a href="#File-Ownership-Commands-chown-chgrp" class="headerlink" title="File Ownership Commands (chown, chgrp)"></a>File Ownership Commands (chown, chgrp)</h3><p>现在我们要来研究怎么改变一个文件(夹)的拥有权。因为对于一个文件夹来说，有创建它的人(owner)和它所属的团队(group).我们分别使用 chown 和 chgrp来实现修改这两个权限的操作</p>
<ul>
<li>下面两个是<strong>更改文件所有权</strong>的命令<ul>
<li>chown and chgrp<ul>
<li>chown changes the ownership of a file    改变个人权限</li>
<li>chgrp changes the group ownership of a file 改变组权限</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>当我们对一个文件夹使用了 -R时(recursive) 那么我们将对这个文件夹下的所有文件(夹)都进行切换所有权</p>
<ul>
<li>Recursive ownership change option (Cascade)<ul>
<li>-R</li>
</ul>
</li>
</ul>
<p>在windows下，查看一个文件的属性就可以看出他的拥有者，和它对拥有者开放的权限。</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/61.png" style="zoom: 120%;"></p>
<p>在linux下，我们使用<code>ls -ltr</code> 来查看文件的所属信息。其中第三列是owner，第四列是group，这里都是 jxu ，因为这台虚拟机只有我一个人用。</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/62.png" style="zoom: 200%;"></p>
<p>现在我们的身份是jxu，也就是一个普通用户，是没有办法修改所属的。于是我们要用 <code>su -</code> 切换到管理员再进行修改。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd home&#x2F;jxu&#x2F;</span><br><span class="line">chown root lisa&#x2F;</span><br></pre></td></tr></table></figure>
<p>两行命令就能将lisa的owner修改成了root</p>
<p>现在lisa的权限就变成了：drwxrwxr-x. 2 root jxu 6 10月 13 13:28 lisa</p>
<p>同理，我们可以改变lisa所属的group <code>chgrp root lisa/</code></p>
<p>现在我们将用户切换回jxu，将lisa文件夹删除，发现我们仍然是可以删除lisa的，这是因为我们对jxu文件夹可读可写可修改。但是如果我这时候想删除root用户下的某个文件，那么我们就没有权限了。</p>
<h3 id="Access-Control-List-ACL"><a href="#Access-Control-List-ACL" class="headerlink" title="Access Control List (ACL)"></a>Access Control List (ACL)</h3><p>访问控制列表为文件系统提供了额外的、更灵活的权限机制。它的目的是帮助您获得UNIX文件权限。ACL允许您授予任何用户或组对任何盘资源的权限.</p>
<p>ACL 的用处：</p>
<ul>
<li>想象一个场景，其中一个特定的用户不是我们组的成员。但是我还是想要给他读写的权利。那么我们怎么在不把他归化为我们组的情况下仍然给他这个权限呢？ 答案就是ACL</li>
<li>一般的，在Linux中，ACL指令被用来实现灵活的权限机制。</li>
<li>在Linux手册页中，acl用于为文件和目录定义更细粒度的自主访问权限</li>
<li>设置ACL 权限的指令是： <code>setfacl</code> 和 <code>getfacl</code></li>
</ul>
<p>通用公式：  setfacl [-bkdR]  [{-m|-x}]<acl规则>  文件|目录</acl规则></p>
<h5 id="给一个用户加权限"><a href="#给一个用户加权限" class="headerlink" title="给一个用户加权限"></a>给一个用户加权限</h5><p><code>setfacl -m u:username:rwx /path/to/file</code></p>
<h5 id="给一个组加权限"><a href="#给一个组加权限" class="headerlink" title="给一个组加权限"></a>给一个组加权限</h5><p><code>setfact -m g:groupname:rw /path/to/file</code></p>
<h5 id="继承权限"><a href="#继承权限" class="headerlink" title="继承权限"></a>继承权限</h5><p><code>setfacl -dm &quot;entry&quot; /path/to/dir</code>对目录有效，使用此参数设置权限后，再在该目录下创建的文件，会默认继承该目录的权限</p>
<h5 id="删除某个权限"><a href="#删除某个权限" class="headerlink" title="删除某个权限"></a>删除某个权限</h5><p><code>setfacl -x u:user /path/to/file</code> (For a specific user)</p>
<h5 id="删除所有人权限"><a href="#删除所有人权限" class="headerlink" title="删除所有人权限"></a>删除所有人权限</h5><p><code>setfacl -b path/to/file</code></p>
<p>现在我们通过实战来演示这些指令,首先我们创建一个名叫 tx 的文件，然后我们通过 <code>getfacl</code> 指令来获得它的一些权限信息</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/63.png" style="zoom: 100%;"></p>
<p>现在我们在相同目录下用另一个账户 jason来访问这个文件，<code>vi tx</code> ，在底部发现这是只读的：</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/64.png" style="zoom: 100%;"></p>
<p>现在我们给tx文件设置acl，也就是给jason用户加上读写权限。再次使用<code>getacl</code>会发现 user多了一行给jason的权限。</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/65.png" style="zoom: 100%;"></p>
<p>现在再用jason登录，就可以读写 tx 文件了：</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/66.png" style="zoom: 100%;"></p>
<p>同样的，如果我使用 <code>setfacl -m g:jason:rw /tmp/tx</code> 这样对于jason这一组的用户都有权限读写 tx文件了</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/67.png" style="zoom: 100%;"></p>
<p>现在我们试验一下移除权限的操作：</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/68.png" style="zoom: 100%;"></p>
<p>需要注意的是，及时我们给某个用户读写的权利，但是该用户还是没有办法删除该文件的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[jason@VM-4-8-centos tmp]$ rm tx</span><br><span class="line">rm: cannot remove ‘tx’: Operation not permitted</span><br></pre></td></tr></table></figure>
<h3 id="Help-Commands"><a href="#Help-Commands" class="headerlink" title="Help Commands"></a>Help Commands</h3><p>当我们对某一命令陌生时，可以使用下面三种 求助命令：</p>
<p><code>whatis command</code> 提供简短的介绍</p>
<p><code>commad --help</code> 更多、更长的介绍，有着更多的细节 </p>
<p><code>man command</code> man 代表Manuel，这时候linux将会展示所有的关于该命令的手册。</p>
<p>其中command 就是我们想要咨询的命令</p>
<h3 id="TAB-Completion-and-Up-Arrow-Keys"><a href="#TAB-Completion-and-Up-Arrow-Keys" class="headerlink" title="TAB Completion and Up Arrow Keys"></a>TAB Completion and Up Arrow Keys</h3><p>使用 TAB 可以自动补全一些文件、目录的名字。</p>
<p>比如： <code>ls j&lt;TAB&gt;</code> 就会显示已 j 开头的文件</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/1.png" style="zoom: 120%;"></p>
<p>或者打一半指令，然后按tab 会补齐指令</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/2.png" style="zoom: 120%;"></p>
<h3 id="Adding-Text-to-Files"><a href="#Adding-Text-to-Files" class="headerlink" title="Adding Text to Files"></a>Adding Text to Files</h3><p>编写文件有三种方法</p>
<ul>
<li>vi</li>
<li>重定向符号： 覆盖写 <code>&gt;</code> , 追加写 <code>&gt;&gt;</code> </li>
<li><code>echo &gt;</code> 或者 <code>echo &gt;&gt;</code> </li>
</ul>
<p>下面我们试一下 echo 命令。</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/3.png" style="zoom: 120%;"></p>
<p>当我们想查看一个文件的时候，可以使用 <code>cat+ 文件名命令</code> 如下：</p>
<p> <img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/4.png" style="zoom: 120%;"></p>
<p><code>echo &quot;文字&quot; &gt;&gt; 文件名</code> 是追加写，如下：</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/5.png" style="zoom: 120%;"></p>
<p>我们还可以通过 <code>&gt;</code> 将一个命令的执行结果写到某一个文件当中：</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/6.png" style="zoom: 120%;"></p>
<h3 id="Standard-Output-to-a-File-tee-command"><a href="#Standard-Output-to-a-File-tee-command" class="headerlink" title="Standard Output to a File (tee command)"></a>Standard Output to a File (tee command)</h3><p>tee命令用于读取标准输入的数据，并将其内容输出成文件。</p>
<p>tee指令会从标准输入设备(Standard input)读取数据，将其内容输出到标准输出设备(Standard output )，同时保存成文件。它中断了一个程序的输出，这样它就可以显示且保存在一个文件中。命令同时执行复制和显示这两个任务：将结果复制到指定的文件或变量中，并显示结果。</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/7.png" style="zoom: 120%;"></p>
<p><strong>语法：</strong><code>tee [-ai][--help][--version][文件...]</code> </p>
<p>参数：</p>
<ul>
<li>-a或—append 　附加到既有文件的后面，而非覆盖它．</li>
<li>-i或—ignore-interrupts 　忽略中断信号。</li>
<li>—help 　在线帮助。</li>
<li>—version 　显示版本信息。 </li>
</ul>
<p>如果我们使用重定向符号，在终端并不会输出这些信息。但是如果我使用 <code>|+tee</code>  之后，我们即可以在终端中输出信息，又可以吧信息写入到文件当中。</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/8.png" style="zoom: 120%;"></p>
<p>如果我们要追加写，可以<code>echo &quot;David and Eliane&quot; | tee -a elaine-david2</code> 即可</p>
<p>我们还可以将信息写到多个文件当中去：比如 <code>ls -l | tee file1 file2 file3</code></p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/9.png" style="zoom: 120%;"></p>
<p>file1,file2和file3 都有相同的内容</p>
<h3 id="Pipes"><a href="#Pipes" class="headerlink" title="Pipes ( _ )"></a>Pipes ( _ )</h3><p>Pipe 作用就是用来连接若干个(&gt;=2)命令的。 前面一个命令的输出即是下一个命令的输入：管道的符号是<code>|</code> </p>
<p>语法： <code>command1 [arguments] | command2 [arguments]</code> </p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/10.png" style="zoom: 120%;"></p>
<p>比如说：<img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/11.png" style="zoom: 120%;"></p>
<p>第一个命令是 ls -ltr 列出当前目录下的所有文件，然后利用管道将输出作为 <code>tail -1</code> 的输入，这个命令会返回输入的最后一条信息，并作为标准输出打印在终端。</p>
<h3 id="File-Maintenance-Commands-cp-rm-mv-mkdir-rmdir"><a href="#File-Maintenance-Commands-cp-rm-mv-mkdir-rmdir" class="headerlink" title="File Maintenance Commands (cp, rm, mv, mkdir, rmdir)"></a>File Maintenance Commands (cp, rm, mv, mkdir, rmdir)</h3><h4 id="cp-1"><a href="#cp-1" class="headerlink" title="cp"></a>cp</h4><p>cp是copy 的缩写, 命令主要用于复制文件或目录。</p>
<p><strong>语法</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp [options] <span class="built_in">source</span> dest</span><br></pre></td></tr></table></figure>
<p>Options 有很多可以选择：</p>
<ul>
<li>-a：此选项通常在<strong>复制目录时使用</strong>，它<strong>保留链接、文件属性</strong>，并<strong>复制目录下的所有内容</strong>。其作用等于dpR参数组合。</li>
<li>-d：复制时<strong>保留链接</strong>。这里所说的链接相当于Windows系统中的快捷方式。</li>
<li>-f：覆盖已经存在的目标文件而<strong>不给出提示</strong>。</li>
<li>-i：与-f选项相反，在<strong>覆盖目标文件</strong>之前<strong>给出提示</strong>，要求用户<strong>确认是否覆盖</strong>，回答”y”时目标文件将被覆盖。</li>
<li>-p：除复制文件的内容外，还把<strong>修改时间和访问权限</strong>也<strong>复制到新文件</strong>中。</li>
<li>-r：若给出的源文件是一个目录文件，此时将复制该目录下所有的子目录和文件。(recursion)</li>
<li>-l：不复制文件，<strong>只是生成链接文件</strong>。</li>
</ul>
<h4 id="rm"><a href="#rm" class="headerlink" title="rm"></a>rm</h4><p>rm 是删除命令</p>
<p><strong>语法</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm [options] name...</span><br></pre></td></tr></table></figure>
<p><strong>参数</strong>：</p>
<ul>
<li>-i 删除前逐一询问确认。</li>
<li>-f 即使原档案属性设为唯读，亦直接删除，无需逐一确认。</li>
<li>-r 将目录及以下之档案亦逐一删除。</li>
</ul>
<h4 id="mv命令"><a href="#mv命令" class="headerlink" title="mv命令"></a>mv命令</h4><p>用来为文件或目录改名、或将文件或目录移入其它位置。</p>
<p><strong>语法</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mv [options] <span class="built_in">source</span> dest</span><br><span class="line">mv [options] <span class="built_in">source</span>... directory</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">命令格式</th>
<th style="text-align:left">运行结果</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>mv source_file(文件) dest_file(文件)</code></td>
<td style="text-align:left">将源文件名 source_file 改为目标文件名 dest_file</td>
</tr>
<tr>
<td style="text-align:left"><code>mv source_file(文件) dest_directory(目录)</code></td>
<td style="text-align:left">将文件 source_file 移动到目标目录 dest_directory 中</td>
</tr>
<tr>
<td style="text-align:left"><code>mv source_directory(目录) dest_directory(目录)</code></td>
<td style="text-align:left">目录名 dest_directory 已存在，将 source_directory 移动到目录名 dest_directory 中；目录名 dest_directory 不存在则 source_directory 改名为目录名 dest_directory</td>
</tr>
<tr>
<td style="text-align:left"><code>mv source_directory(目录) dest_file(文件)</code></td>
<td style="text-align:left">出错</td>
</tr>
</tbody>
</table>
</div>
<h3 id="File-Display-Commands-cat-less-more-head-tail"><a href="#File-Display-Commands-cat-less-more-head-tail" class="headerlink" title="File Display Commands (cat, less, more, head, tail)"></a>File Display Commands (cat, less, more, head, tail)</h3><h4 id="cat命令"><a href="#cat命令" class="headerlink" title="cat命令"></a>cat命令</h4><p><strong>语法</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat [-AbeEnstTuv] [--help] [--version] fileName</span><br></pre></td></tr></table></figure>
<p>把 textfile1 的文档内容加上行号后输入 textfile2 这个文档里：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat -n textfile1 &gt; textfile2</span><br></pre></td></tr></table></figure>
<p>把 textfile1 和 textfile2 的文档内容加上行号（空白行不加）之后将内容附加到 textfile3 文档里：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat -b textfile1 textfile2 &gt;&gt; textfile3</span><br></pre></td></tr></table></figure>
<p>清空 /etc/test.txt 文档内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat &#x2F;dev&#x2F;null &gt; &#x2F;etc&#x2F;test.txt</span><br></pre></td></tr></table></figure>
<h4 id="less-more-命令"><a href="#less-more-命令" class="headerlink" title="less/more 命令"></a>less/more 命令</h4><p>less 与 more 类似，less 可以随意浏览文件，支持翻页和搜索，支持向上翻页和向下翻页。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">less [参数] 文件</span><br></pre></td></tr></table></figure>
<p><a href="https://www.runoob.com/linux/linux-comm-less.html" target="_blank" rel="noopener">https://www.runoob.com/linux/linux-comm-less.html</a></p>
<p>1、查看文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">less log2013.log</span><br></pre></td></tr></table></figure>
<p>2、ps查看进程信息并通过less分页显示</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef |less</span><br></pre></td></tr></table></figure>
<p>3、查看命令历史使用记录并通过less分页显示</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost test]# history | less</span><br><span class="line">22  scp -r tomcat6.0.32 root@192.168.120.203:&#x2F;opt&#x2F;soft</span><br><span class="line">23  cd ..</span><br><span class="line">24  scp -r web root@192.168.120.203:&#x2F;opt&#x2F;</span><br><span class="line">25  cd soft</span><br><span class="line">26  ls</span><br><span class="line">……省略……</span><br></pre></td></tr></table></figure>
<h4 id="head-tail"><a href="#head-tail" class="headerlink" title="head/tail"></a>head/tail</h4><p>head 命令可用于查看文件的开头部分的内容，有一个常用的参数 <strong>-n</strong> 用于显示行数，默认为 10，即显示 10 行的内容。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">head [参数] [文件]</span><br></pre></td></tr></table></figure>
<p><strong>参数：</strong></p>
<ul>
<li>-q 隐藏文件名</li>
<li>-v 显示文件名</li>
<li>-c&lt;数目&gt; 显示的字节数。</li>
<li>-n&lt;行数&gt; 显示的行数。</li>
</ul>
<p>tail 命令可用于查看文件的内容，有一个常用的参数 <strong>-f</strong> 常用于查阅正在改变的日志文件。</p>
<p><a href="https://www.runoob.com/linux/linux-comm-tail.html" target="_blank" rel="noopener">https://www.runoob.com/linux/linux-comm-tail.html</a></p>
<h3 id="Text-Processing-Commands"><a href="#Text-Processing-Commands" class="headerlink" title="Text Processing Commands"></a>Text Processing Commands</h3><p>接下来我们要介绍几种文字处理命令</p>
<h4 id="cut"><a href="#cut" class="headerlink" title="cut"></a>cut</h4><p>Linux cut命令用于显示每行从开头算起 num1 到 num2 的文字。</p>
<p>cut 命令从文件的每一行剪切字节、字符和字段并将这些字节、字符和字段写至标准输出。</p>
<p>如果不指定 File 参数，cut 命令将读取标准输入。必须指定 -b、-c 或 -f 标志之一。</p>
<p><strong>参数:</strong></p>
<ul>
<li>-b ：以字节为单位进行分割。这些字节位置将忽略多字节字符边界，除非也指定了 -n 标志。</li>
<li>-c ：以字符为单位进行分割。</li>
<li>-d ：自定义分隔符，默认为制表符。</li>
<li>-f ：与-d一起使用，指定显示哪个区域。</li>
<li>-n ：取消分割多字节字符。仅和 -b 标志一起使用。如果字符的最后一个字节落在由 -b 标志的 List 参数指示的<br>范围之内，该字符将被写出；否则，该字符将被排除</li>
</ul>
<p><strong>实例</strong></p>
<p>当你执行who命令时，会输出类似如下的内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ who</span><br><span class="line">rocrocket :0           2009-01-08 11:07</span><br><span class="line">rocrocket pts&#x2F;0        2009-01-08 11:23 (:0.0)</span><br><span class="line">rocrocket pts&#x2F;1        2009-01-08 14:15 (:0.0)</span><br></pre></td></tr></table></figure>
<p>如果我们想提取每一行的第3个字节，就这样：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ who|cut -b 3</span><br><span class="line">c</span><br><span class="line">c</span><br></pre></td></tr></table></figure>
<p>上面是对指令来讲的，对一个文件执行cut命令：</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/12.png" style="zoom: 120%;"></p>
<p>如果要截取多个字符，可以这样写：<code>cut -c1,3,5,7 result</code> </p>
<p>截取连续的几个字符： <code>cut -c1-5 result</code></p>
<p>截取两段字符： <code>cut -c1-3,6-8 result</code>  段与段之间用逗号隔开</p>
<p>如果操作类型是 <code>-d</code> 那么就是自定义分隔符，默认为制表符  ,我们以<code>/etc/passwd</code>为例：</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/13.png" style="zoom: 120%;"></p>
<p>发现每行的每个字段之间都是由冒号隔开的。那么我们可以这么写：<code>cut -d: -f 6 /etc/passwd</code> 就是说我们以<code>:</code> 为分隔符，并且跳过前面六个冒号，直接显示后面的内容，结果如下：</p>
<p><img src="/2020/06/30/Linux%E5%9F%BA%E7%A1%80/14.png" style="zoom: 120%;"></p>
<h4 id="awk"><a href="#awk" class="headerlink" title="awk"></a>awk</h4><p>AWK 是一种处理文本文件的语言，是一个强大的文本分析工具。</p>
<p><strong>语法</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">awk [选项参数] &#39;script&#39; var&#x3D;value file(s)</span><br><span class="line">或</span><br><span class="line">awk [选项参数] -f scriptfile var&#x3D;value file(s)</span><br></pre></td></tr></table></figure>
<h4 id="grep-and-egrep"><a href="#grep-and-egrep" class="headerlink" title="grep and egrep"></a>grep and egrep</h4><p><strong>awk、sed、grep更适合的方向：</strong></p>
<ul>
<li>grep 更适合单纯的查找或匹配文本</li>
<li>sed 更适合编辑匹配到的文本</li>
<li>awk 更适合格式化文本，对文本进行较复杂格式处理</li>
</ul>
<h4 id="sort-uniq"><a href="#sort-uniq" class="headerlink" title="sort_uniq"></a>sort_uniq</h4><h4 id="wc"><a href="#wc" class="headerlink" title="wc"></a>wc</h4><p>Linux wc命令用于计算字数。</p>
<p>利用wc指令我们可以计算文件的Byte数、字数、或是列数，若不指定文件名称、或是所给予的文件名为”-“，则wc指令会从标准输入设备读取数据。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wc [-clw][--help][--version][文件...]</span><br></pre></td></tr></table></figure>
<p><strong>参数</strong>：</p>
<ul>
<li>-c或—bytes或—chars 只显示Bytes数。</li>
<li>-l或—lines 显示行数。</li>
<li>-w或—words 只显示字数。</li>
<li>—help 在线帮助。</li>
<li>—version 显示版本信息。</li>
</ul>
<p>使用 wc统计，结果如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ wc testfile           # testfile文件的统计信息  </span><br><span class="line">3 92 598 testfile       # testfile文件的行数为3、单词数92、字节数598</span><br></pre></td></tr></table></figure>
<p>其中，3 个数字分别表示testfile文件的行数、单词数，以及该文件的字节数。</p>
<p>如果想同时统计多个文件的信息，例如同时统计testfile、testfile_1、testfile_2，可使用如下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wc testfile testfile_1 testfile_2   #统计三个文件的信息</span><br></pre></td></tr></table></figure>
<p>输出结果如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ wc testfile testfile_1 testfile_2  #统计三个文件的信息  </span><br><span class="line">3 92 598 testfile                    #第一个文件行数为3、单词数92、字节数598  </span><br><span class="line">9 18 78 testfile_1                   #第二个文件的行数为9、单词数18、字节数78  </span><br><span class="line">3 6 32 testfile_2                    #第三个文件的行数为3、单词数6、字节数32  </span><br><span class="line">15 116 708 总用量                    #三个文件总共的行数为15、单词数116、字节数708</span><br></pre></td></tr></table></figure>
<h3 id="Truncate-File-Size-truncate"><a href="#Truncate-File-Size-truncate" class="headerlink" title="Truncate File Size (truncate)"></a>Truncate File Size (truncate)</h3><h3 id="Combining-and-Splitting-Files"><a href="#Combining-and-Splitting-Files" class="headerlink" title="Combining and Splitting Files"></a>Combining and Splitting Files</h3>
          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/21/">&lt;i class&#x3D;&quot;fa fa-angle-left&quot;&gt;&lt;&#x2F;i&gt;</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/21/">21</a><span class="page-number current">22</span><a class="page-number" href="/page/23/">23</a><span class="space">&hellip;</span><a class="page-number" href="/page/44/">44</a><a class="extend next" rel="next" href="/page/23/">&lt;i class&#x3D;&quot;fa fa-angle-right&quot;&gt;&lt;&#x2F;i&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/%5Bobject%20Object%5D"
                alt="Jason" />
            
              <p class="site-author-name" itemprop="name">Jason</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%20%7C%7C%20fa%20fa-archive">
              
                  <span class="site-state-item-count">435</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">61</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart" aria-hidden="true"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jason</span>
 <!--
  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>







-->
        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>




















  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v="></script>

  <script type="text/javascript" src="/js/src/motion.js?v="></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v="></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"jasonxqh.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Jason‘s Blog">
<meta property="og:url" content="https://jasonxqh.github.io/page/16/index.html">
<meta property="og:site_name" content="Jason‘s Blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Jason">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://jasonxqh.github.io/page/16/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Jason‘s Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Jason‘s Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2021/01/29/shell-lab/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/29/shell-lab/" class="post-title-link" itemprop="url">shell-lab</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-29 15:52:13" itemprop="dateCreated datePublished" datetime="2021-01-29T15:52:13+08:00">2021-01-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-01-31 21:18:52" itemprop="dateModified" datetime="2021-01-31T21:18:52+08:00">2021-01-31</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Shell-Lab"><a href="#Shell-Lab" class="headerlink" title="Shell Lab"></a>Shell Lab</h1><p>在这个 <code>tsh.c</code> 文件里面，我们需要完成7个函数的编写：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">eval</span><span class="params">(<span class="keyword">char</span> *cmdline)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">builtin_cmd</span><span class="params">(<span class="keyword">char</span> **argv, <span class="keyword">char</span> *cmdline)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">do_bgfg</span><span class="params">(<span class="keyword">char</span> **argv, <span class="keyword">char</span> *cmdline)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">waitfg</span><span class="params">(<span class="keyword">pid_t</span> pid)</span></span>;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sigchld_handler</span><span class="params">(<span class="keyword">int</span> sig)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sigtstp_handler</span><span class="params">(<span class="keyword">int</span> sig)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sigint_handler</span><span class="params">(<span class="keyword">int</span> sig)</span></span>;</span><br></pre></td></tr></table></figure>
<h2 id="eval-char-cmdline"><a href="#eval-char-cmdline" class="headerlink" title="eval(char * cmdline)"></a>eval(char * cmdline)</h2><p>在调用<code>parseline</code>解析输出后，我们首先判断这是一个内置命令（shell实现）还是一个程序（本地文件）。</p>
<p>fg %jobnumber 将后台的任务拿到前台来处理<br>bg %jobnumber 将任务放到后台中去处理</p>
<p>setpgid的用法：</p>
<p>1.如果pgid设置为0，该进程的进程组ID会被设置为该进程的ID </p>
<p>2.如果pid和pgid都指向同一个进程，那么就会重新创建一个进程组，该进程会成为该进程组的首进程 </p>
<p>3.如果pid与pgid不一样，那么就会把pid指向的进程移动到另外一个进程组</p>
<p>4.如果pid设置为0，那么调用进程的进程组ID就会发生变化</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">eval</span><span class="params">(<span class="keyword">char</span> *cmdline)</span><span class="comment">//evaluation </span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> *argv[MAXARGS];</span><br><span class="line">    <span class="keyword">int</span> bg_flag;</span><br><span class="line"></span><br><span class="line">    bg_flag = parseline(cmdline, argv);<span class="comment">/* BG job的话为1，FG job为0 */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (builtin_cmd(argv, cmdline)) <span class="comment">/* built-in command */</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span>;<span class="comment">//如果是内置命令，就进入builtin_cmd</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="comment">/* program (file) 否则创建子进程并在job列表里完成添加*/</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//注意先要用access来判断是否存在这个文件，不然fork以后是无法回收的。</span></span><br><span class="line">        <span class="keyword">if</span> (access(argv[<span class="number">0</span>], F_OK)) <span class="comment">/* do not fork and addset! */</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"%s: Command not found\n"</span>, argv[<span class="number">0</span>]);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">		<span class="comment">//添加到job列表。</span></span><br><span class="line">        <span class="keyword">pid_t</span> pid;</span><br><span class="line">        <span class="keyword">sigset_t</span> mask, prev;</span><br><span class="line">        sigemptyset(&amp;mask);</span><br><span class="line">        sigaddset(&amp;mask, SIGCHLD);</span><br><span class="line">        <span class="comment">//防止add_job和delete_job竞争</span></span><br><span class="line">        sigprocmask(SIG_BLOCK, &amp;mask, &amp;prev); <span class="comment">/* block SIG_CHLD */</span></span><br><span class="line">		<span class="comment">//fork子进程 </span></span><br><span class="line">        <span class="keyword">if</span> ((pid=fork()) == <span class="number">0</span>) <span class="comment">/* child */</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//如果是子进程就要先解锁</span></span><br><span class="line">            sigprocmask(SIG_SETMASK, &amp;prev, <span class="literal">NULL</span>); <span class="comment">/* unblock SIG_CHLD */</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (!setpgid(<span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//这里如果fork子进程出现了错误应该使用_exit()</span></span><br><span class="line">                <span class="keyword">if</span> (execve(argv[<span class="number">0</span>], argv, environ))<span class="comment">//运行这个可执行文件</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"%s: Failed to execve\n"</span>, argv[<span class="number">0</span>]);</span><br><span class="line">                    _exit(<span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">/* context changed */</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"Failed to invoke setpgid(0, 0)\n"</span>);</span><br><span class="line">                _exit(<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (pid &gt; <span class="number">0</span>)<span class="comment">/* 父进程就是当前的shell ， tsh */</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (!bg_flag) <span class="comment">/*执行前端任务,立刻执行，结束后才进行下一个 */</span></span><br><span class="line">            &#123;</span><br><span class="line">                fg_pid = pid;</span><br><span class="line">                fg_pid_reap = <span class="number">0</span>;</span><br><span class="line">                addjob(jobs, pid, FG, cmdline);<span class="comment">//把这个进程状态设置为FG</span></span><br><span class="line">                sigprocmask(SIG_SETMASK, &amp;prev, <span class="literal">NULL</span>); <span class="comment">/* unblock SIG_CHLD */</span></span><br><span class="line">                waitfg(pid);<span class="comment">//忙等，只有当子进程回收之后才能进行下一个</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="comment">/* 执行后端任务，后端直接加工作，打印信息后就结束了，等有空再做后端 */</span></span><br><span class="line">            &#123;</span><br><span class="line">                addjob(jobs, pid, BG, cmdline);<span class="comment">//把进程状态设置为BG</span></span><br><span class="line">                sigprocmask(SIG_SETMASK, &amp;prev, <span class="literal">NULL</span>); <span class="comment">/* unblock SIG_CHLD */</span></span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"[%d] (%d) %s"</span>, maxjid(jobs), pid, cmdline);<span class="comment">//打印</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            unix_error(<span class="string">"Failed to fork child"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>另外要注意一个线程并行竞争（race）的问题：<code>fork</code>以后会在job列表里添加job，信号处理函数<code>sigchld_handler</code> 回收进程后会在job列表中删除，如果信号来的比较早，那么就可能会发生先删除后添加的情况。这样这个job永远不会在列表中消失了（内存泄露），所以我们要先block <code>SIGCHLD</code> 这个信号，添加以后再还原。</p>
<h2 id="builtin-cmd-char-argv-char-cmdline"><a href="#builtin-cmd-char-argv-char-cmdline" class="headerlink" title="builtin_cmd(char **argv,char *cmdline)"></a>builtin_cmd(char **argv,char *cmdline)</h2><p>这个函数分情况判断是哪一个内置命令。如果用户仅仅按下回车键，那么<code>argv</code> 的第一个变量将是一个空指针。如果用这个空指针去调用 <code>strcmp</code>函数会引发 segmentation fault</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">builtin_cmd</span><span class="params">(<span class="keyword">char</span> **argv, <span class="keyword">char</span> *cmdline)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> *first_arg = argv[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (first_arg == <span class="literal">NULL</span>) <span class="comment">//直接敲空格的情况</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">strcmp</span>(first_arg, <span class="string">"quit"</span>))<span class="comment">//如果第一个参数是quit，那就直接退出</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (!<span class="built_in">strcmp</span>(first_arg, <span class="string">"jobs"</span>))<span class="comment">//如果第一个参数是jobs，那就列出当前的jobs</span></span><br><span class="line">    &#123;</span><br><span class="line">        listjobs(jobs);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (!<span class="built_in">strcmp</span>(first_arg, <span class="string">"bg"</span>) || !<span class="built_in">strcmp</span>(first_arg, <span class="string">"fg"</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//如果是bg和fg中的一种，就交个 do_bgfg这个函数去单独处理</span></span><br><span class="line">        do_bgfg(argv, cmdline);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="do-bgfg-char-argv-char-cmdline"><a href="#do-bgfg-char-argv-char-cmdline" class="headerlink" title="do_bgfg(char *argv, char cmdline);"></a>do_bgfg(char <em>*argv, char </em>cmdline);</h2><p>这个函数单独处理了<code>bg</code>和<code>fg</code>这两个内置命令。这个函数的核心就两点：</p>
<ol>
<li><p>区分bg和fg命令，以及传入pid或者jid参数对应的进程的状态。前者if，后者switch就可以包括所用的情况</p>
</li>
<li><p>注意用户输入错误处理，比如参数数量不够或者参数传入错误的情况</p>
</li>
</ol>
<p>要注意<code>fg</code>有两个对应的情况：</p>
<ol>
<li><p>后台程序是stopped的状态，这时我们需要设置相关变量，然后发送继续的信号。</p>
</li>
<li><p>如果这个进程本身就在运行，我们就只需要改变job的状态，设置相关变量，然后进入<code>waitfg</code>等待这个新的前台进程执行完毕。</p>
</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">void</span> <span class="title">do_bgfg</span><span class="params">(<span class="keyword">char</span> **argv, <span class="keyword">char</span> *cmdline)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> *first_arg = argv[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">strcmp</span>(first_arg, <span class="string">"bg"</span>))<span class="comment">//如果是后端的工作</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (argv[<span class="number">1</span>] == <span class="literal">NULL</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"bg command requires PID or %%jobid argument\n"</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (argv[<span class="number">1</span>][<span class="number">0</span>] == <span class="string">'%'</span>) <span class="comment">/* JID是%+数字的格式 */</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> jid = atoi(argv[<span class="number">1</span>] + <span class="number">1</span>);<span class="comment">//跳过百分号读取JID</span></span><br><span class="line">            <span class="keyword">if</span> (jid)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//获取当前job的指针</span></span><br><span class="line">            	<span class="class"><span class="keyword">struct</span> <span class="title">job_t</span> *<span class="title">job_tmp</span> = <span class="title">getjobjid</span>(<span class="title">jobs</span>, <span class="title">jid</span>);</span></span><br><span class="line">                <span class="keyword">if</span> (job_tmp != <span class="literal">NULL</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                	job_tmp-&gt;state = BG;<span class="comment">//将当前job状态换成BG</span></span><br><span class="line">                	<span class="built_in">printf</span>(<span class="string">"[%d] (%d) %s"</span>, jid, job_tmp-&gt;pid, job_tmp-&gt;cmdline);</span><br><span class="line">                    <span class="comment">//打印当前jid, job的pid和cmdline</span></span><br><span class="line">                	stopped_resume_child = job_tmp-&gt;pid;</span><br><span class="line">                    <span class="comment">//获取当前job的pid之后，给进程发送一个SIGCONT的信号</span></span><br><span class="line">                    <span class="comment">//因为之前这个进程可能处于停止的状态。</span></span><br><span class="line">                    killpg(job_tmp-&gt;pid, SIGCONT);</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"%%%s: No such job\n"</span>, argv[<span class="number">1</span>] + <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span><span class="comment">//如果只打了一个百分号，没有数字。</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"%%%s: No such job\n"</span>, argv[<span class="number">1</span>] + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="comment">/* PID */</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//获取pid</span></span><br><span class="line">            <span class="keyword">pid_t</span> pid = atoi(argv[<span class="number">1</span>]);</span><br><span class="line">            <span class="keyword">if</span>(pid)</span><br><span class="line">            &#123;</span><br><span class="line">            	<span class="class"><span class="keyword">struct</span> <span class="title">job_t</span> *<span class="title">job_tmp</span> = <span class="title">getjobpid</span>(<span class="title">jobs</span>, <span class="title">pid</span>);</span><span class="comment">//获取job的指针</span></span><br><span class="line">                <span class="keyword">if</span> (job_tmp != <span class="literal">NULL</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                	job_tmp-&gt;state = BG;<span class="comment">//状态设为BG</span></span><br><span class="line">                	<span class="built_in">printf</span>(<span class="string">"[%d] (%d) %s"</span>, job_tmp-&gt;jid, pid, job_tmp-&gt;cmdline);</span><br><span class="line">                	stopped_resume_child = job_tmp-&gt;pid;</span><br><span class="line">                    killpg(pid, SIGCONT);</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"(%s): No such process\n"</span>, argv[<span class="number">1</span>]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"bg: argument must be a PID or %%jobid\n"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span><span class="comment">//如果是前端的工作</span></span><br><span class="line">    &#123;</span><br><span class="line">    	<span class="comment">/* there are two case when using fg:</span></span><br><span class="line"><span class="comment">    	1. the job stopped </span></span><br><span class="line"><span class="comment">    	2. the job is running</span></span><br><span class="line"><span class="comment">    	*/</span></span><br><span class="line"></span><br><span class="line">    	<span class="keyword">if</span> (argv[<span class="number">1</span>] == <span class="literal">NULL</span>)<span class="comment">//第二个参数没有的话，就直接返回</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"fg command requires PID or %%jobid argument\n"</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (argv[<span class="number">1</span>][<span class="number">0</span>] == <span class="string">'%'</span>) <span class="comment">/* JID */</span></span><br><span class="line">        <span class="comment">//如果第二个参数的第一个字符是%，就代表着是个JID</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> jid = atoi(argv[<span class="number">1</span>] + <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">if</span> (jid)</span><br><span class="line">            &#123;</span><br><span class="line">            	<span class="class"><span class="keyword">struct</span> <span class="title">job_t</span> *<span class="title">job_tmp</span> = <span class="title">getjobjid</span>(<span class="title">jobs</span>, <span class="title">jid</span>);</span></span><br><span class="line">                <span class="keyword">if</span> (job_tmp != <span class="literal">NULL</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                	<span class="keyword">int</span> state = job_tmp-&gt;state;</span><br><span class="line">                	fg_pid = job_tmp-&gt;pid; </span><br><span class="line">                    <span class="comment">/* this is the new foreground process */</span></span><br><span class="line">                	fg_pid_reap = <span class="number">0</span>;</span><br><span class="line">                	job_tmp-&gt;state = FG;</span><br><span class="line">                	<span class="keyword">if</span> (state == ST)<span class="comment">//如果当前处于暂停状态</span></span><br><span class="line">                	&#123;</span><br><span class="line">                		stopped_resume_child = job_tmp-&gt;pid; </span><br><span class="line">                        <span class="comment">/* set the global var in case of wait in SIGCHLD handler */</span></span><br><span class="line">                    	killpg(job_tmp-&gt;pid, SIGCONT);</span><br><span class="line">                	&#125;</span><br><span class="line">                	<span class="comment">//等待前台进程结束，进行下一个命令</span></span><br><span class="line">                    waitfg(job_tmp-&gt;pid); </span><br><span class="line">                    <span class="comment">/* wait until the foreground terminate/stop */</span></span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"%%%s: No such job\n"</span>, argv[<span class="number">1</span>] + <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"%%%s: No such job\n"</span>, argv[<span class="number">1</span>] + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="comment">/* PID */</span></span><br><span class="line">            <span class="comment">//否则就是个PID</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">pid_t</span> pid = atoi(argv[<span class="number">1</span>]);</span><br><span class="line">            <span class="keyword">if</span>(pid)</span><br><span class="line">            &#123;</span><br><span class="line">            	<span class="class"><span class="keyword">struct</span> <span class="title">job_t</span> *<span class="title">job_tmp</span> = <span class="title">getjobpid</span>(<span class="title">jobs</span>, <span class="title">pid</span>);</span></span><br><span class="line">                <span class="keyword">if</span> (job_tmp != <span class="literal">NULL</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                	<span class="keyword">int</span> state = job_tmp-&gt;state;</span><br><span class="line">                	fg_pid = job_tmp-&gt;pid; <span class="comment">/* this is the new foreground process */</span></span><br><span class="line">                	fg_pid_reap = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">                	job_tmp-&gt;state = FG;</span><br><span class="line"></span><br><span class="line">                	<span class="keyword">if</span> (state == ST)</span><br><span class="line">                	&#123;</span><br><span class="line">                		stopped_resume_child = job_tmp-&gt;pid;</span><br><span class="line">                        <span class="comment">/* set the global var in case of wait in SIGCHLD handler */</span></span><br><span class="line">                    	killpg(pid, SIGCONT);</span><br><span class="line">                	&#125;</span><br><span class="line">                	</span><br><span class="line">                    waitfg(job_tmp-&gt;pid); </span><br><span class="line">                    <span class="comment">/* wait until the foreground terminate/stop */</span></span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"(%s): No such process\n"</span>, argv[<span class="number">1</span>]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"fg: argument must be a PID or %%jobid\n"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="void-waitfg-pid-t-pid"><a href="#void-waitfg-pid-t-pid" class="headerlink" title="void waitfg(pid_t pid)"></a>void waitfg(pid_t pid)</h2><p>之前声明了一个<code>volatile sig_atomic_t</code>的全局变量<code>fg_pid_reap</code> ，只要信号处理函数回收了前台进程，它就会将<code>fg_pid_reap</code> 置1，这样我们的<code>waitfg</code>函数就会退出，接着读取用户的下一个输入。在这里我们使用busy sleep,会导致一定的延迟</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">waitfg</span><span class="params">(<span class="keyword">pid_t</span> pid)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (!fg_pid_reap)<span class="comment">//如果没有回收前台进程，就一直在问回收了没，回收了没</span></span><br><span class="line">    &#123;</span><br><span class="line">        sleep(<span class="number">1</span>);<span class="comment">//休眠 </span></span><br><span class="line">    &#125;</span><br><span class="line">    fg_pid_reap = <span class="number">0</span>;<span class="comment">//回收以后，就</span></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="void-sigchld-handler-int-sig"><a href="#void-sigchld-handler-int-sig" class="headerlink" title="void sigchld_handler(int sig)"></a>void sigchld_handler(int sig)</h2><p>从这里开始，是3个信号处理程序函数。</p>
<p>首先是 sigchld_handler ,也就是当一个子进程终止或者结束的时候,父进程会发送一个SIGCHLD给子进程，然后回收它</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sigchld_handler</span><span class="params">(<span class="keyword">int</span> sig)</span> </span></span><br><span class="line"><span class="function"><span class="comment">/* When a child process stops or terminates, SIGCHLD is sent to the parent process. */</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 回收子进程之前先保留之前的错误信息</span></span><br><span class="line">	<span class="keyword">int</span> olderrno = errno;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (stopped_resume_child)</span><br><span class="line">	&#123;</span><br><span class="line">		stopped_resume_child = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> status;</span><br><span class="line">    <span class="keyword">pid_t</span> pid;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//如果任何一个子进程暂停/结束了，然后用这个函数来回收</span></span><br><span class="line">    <span class="keyword">if</span> ((pid = waitpid(<span class="number">-1</span>, &amp;status, WUNTRACED)) &gt; <span class="number">0</span>) <span class="comment">/* don't use while! */</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (pid == fg_pid)<span class="comment">//如果返回的是当前的前端进程的pid</span></span><br><span class="line">        &#123;</span><br><span class="line">            fg_pid_reap = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">		<span class="comment">//如果子进程是正常结束的，那么就将这个子进程删除。</span></span><br><span class="line">        <span class="keyword">if</span> (WIFEXITED(status)) <span class="comment">/* returns true if the child terminated normally */</span></span><br><span class="line">        &#123;</span><br><span class="line">            deletejob(jobs, pid);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (WIFSIGNALED(status)) </span><br><span class="line">        <span class="comment">/*如果这个子进程是收到一个信号之后结束的，就会返回true,打印SIGNAL之后再删除 */</span></span><br><span class="line">        <span class="comment">/* since job start from zero, we add it one */</span></span><br><span class="line">        &#123;</span><br><span class="line">         <span class="built_in">printf</span>(<span class="string">"Job [%d] (%d) terminated by signal %d\n"</span>, pid2jid(pid), pid, WTERMSIG(status));</span><br><span class="line">         deletejob(jobs, pid);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="comment">//如果是暂停的,就不删除,而是将这个进程的状态改成ST(stop),并打印</span></span><br><span class="line">        &#123;</span><br><span class="line">            struct <span class="keyword">job_t</span> *p = getjobpid(jobs, pid);</span><br><span class="line">            p-&gt;state = ST; <span class="comment">/* Stopped */</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"Job [%d] (%d) stopped by signal 20\n"</span>, pid2jid(pid), pid);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    errno = olderrno;<span class="comment">//将errno复原,保持回收子进程前后错误信息不能变.</span></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="void-sigint-handler-int-sig"><a href="#void-sigint-handler-int-sig" class="headerlink" title="void sigint_handler (int sig)"></a>void sigint_handler (int sig)</h2><p>这个函数是说 当我们使用 ctrl+c 的时候，kernel会使用kill函数给shell发一个 SIGINT信号给前台进程组。注意，这里是群发，因此要使用 <code>killpg</code> </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sigint_handler</span><span class="params">(<span class="keyword">int</span> sig)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> olderrno = errno;</span><br><span class="line">    <span class="keyword">pid_t</span> pgid = fgpid(jobs);</span><br><span class="line">    <span class="keyword">if</span> (pgid)</span><br><span class="line">        killpg(pgid, SIGINT);</span><br><span class="line"></span><br><span class="line">    errno = olderrno;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="void-sigtstp-handler-int-sig"><a href="#void-sigtstp-handler-int-sig" class="headerlink" title="void sigtstp_handler(int sig)"></a>void sigtstp_handler(int sig)</h2><p>和 sigint一样，这次发送的信号是 SIGTSTP</p>
<p>输入<code>Ctrl+Z</code>会发送一个SIGTSTP信号到前台进程组中的每个进程。默认情况下，结果是<strong>停止(挂起suspend)前台作业</strong>。在博客的这一章节 <a href="https://jasonxqh.github.io/2021/01/06/异常控制流（ECF）2/#从键盘发送信号">从键盘发送信号</a> 有说过 </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sigtstp_handler</span><span class="params">(<span class="keyword">int</span> sig)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> olderrno = errno;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">pid_t</span> pgid = fgpid(jobs);</span><br><span class="line">    <span class="keyword">if</span> (pgid)</span><br><span class="line">    &#123;</span><br><span class="line">        killpg(pgid, SIGTSTP);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    errno = olderrno;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2021/01/28/matlab%E5%87%BD%E6%95%B0%E8%A1%A5%E5%85%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/28/matlab%E5%87%BD%E6%95%B0%E8%A1%A5%E5%85%85/" class="post-title-link" itemprop="url">matlab函数补充</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2021-01-28 16:50:47 / Modified: 19:43:26" itemprop="dateCreated datePublished" datetime="2021-01-28T16:50:47+08:00">2021-01-28</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Matlab-函数补充"><a href="#Matlab-函数补充" class="headerlink" title="Matlab 函数补充"></a>Matlab 函数补充</h1><h3 id="ode23-ode45-Runge-Kutta法求解微分方程"><a href="#ode23-ode45-Runge-Kutta法求解微分方程" class="headerlink" title="ode23/ode45 :Runge-Kutta法求解微分方程"></a>ode23/ode45 :Runge-Kutta法求解微分方程</h3><p>我们没有必要了解ode23和ode45的内部原理，我们</p>
<h4 id="一阶微分方程求解"><a href="#一阶微分方程求解" class="headerlink" title="一阶微分方程求解"></a>一阶微分方程求解</h4><p>比如我要求解 一阶微分方程 $y’=cost$</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">f = @(t,y) <span class="built_in">cos</span>(t); 	<span class="comment">% 定义函数 f(t,y) = cos(t)</span></span><br><span class="line">tspan = [<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">pi</span>];		<span class="comment">% 时间范围</span></span><br><span class="line">y0 = <span class="number">2</span>;					<span class="comment">% 初值</span></span><br><span class="line">[t,y] = ode23(f,tspan,y0); <span class="comment">%注意调用格式</span></span><br></pre></td></tr></table></figure>
<h4 id="高阶微分方程"><a href="#高阶微分方程" class="headerlink" title="高阶微分方程"></a>高阶微分方程</h4><p>假如微分方程为 $F(y,y’,y’’,\cdots,y^{(n)},t) = 0$</p>
<p>初始条件 $y(t<em>0)=c_0,y’(t_0)=c_1,\cdots,y^{n-1}(t_0) = c</em>{n-1}$</p>
<p>首先做变量替换 : $x(1)=y,x(2)=y’,\cdots,x(n) = y^{(n-1)}$</p>
<p><img src="/2021/01/28/matlab%E5%87%BD%E6%95%B0%E8%A1%A5%E5%85%85/1.png"></p>
<p>下面我们用转换好的微分方程组来编写 odefun函数  </p>
<p>例题：首先写出 常微分方程 $y’’ = -ty+e^ty’+3sin2t$ 的odefun函数</p>
<p>我们令$x(1)=y,x(2)=y’$那么，微分方程可以转换为 $dx(1)=y’=x(2),dx(2)=y’’ = -tx(1)+e^tx(2)+3*sin(2t)$</p>
<p>在matlab中我们可以这么写：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dx</span>=<span class="title">odefun</span><span class="params">(t,x)</span>;</span></span><br><span class="line">dx = <span class="built_in">zeros</span>(<span class="number">2</span>,<span class="number">1</span>);<span class="comment">%初始化dx，生成一个2行1列的零向量存放我们的方程组</span></span><br><span class="line">dx(<span class="number">1</span>) = x(<span class="number">2</span>);</span><br><span class="line">dx(<span class="number">2</span>) = -t*x(<span class="number">1</span>)+<span class="built_in">exp</span>(t)*x(<span class="number">2</span>)+<span class="number">3</span>*<span class="built_in">sin</span>(<span class="number">2</span>*t);</span><br></pre></td></tr></table></figure>
<p>或者也可以直接写成向量形式</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dx</span>=<span class="title">odefun</span><span class="params">(t,x)</span>;</span></span><br><span class="line">dx = [</span><br><span class="line">	x(<span class="number">2</span>);</span><br><span class="line">	-t*x(<span class="number">1</span>)+<span class="built_in">exp</span>(t)*x(<span class="number">2</span>)+<span class="number">3</span>*<span class="built_in">sin</span>(<span class="number">2</span>*t)</span><br><span class="line">];</span><br></pre></td></tr></table></figure>
<p>现在，我们要在$t = [3.9,4]$ 区间内求解微分方程 $y’’ = -ty+e^ty’+3sin2t,y<em>{|t=3}=8,y’</em>{|t=3}=2$ </p>
<p>我们现在只要在原来的odefun基础上编写主函数，然后加上求解区间和边值条件即可，需要注意的是，ode45的运行结果以列向量的形式给出。因此在本例中，x的第一列为y，第二列为y’ . 如果遇到变量不是列向量的形式，可以考虑利用reshape函数进行矩阵变换</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tspan = [<span class="number">3.9</span> <span class="number">4</span>];</span><br><span class="line">y0 = [<span class="number">8</span> <span class="number">2</span>];</span><br><span class="line">[t,x] = ode45(<span class="string">'odefun'</span>,tspan,y0);</span><br></pre></td></tr></table></figure>
<p>则，plot(t,x(:,1))画出来的是x的第一列数据，即为y；</p>
<p>​    plot(t,x(:,2))画出来的是x的第二列数据，即为y’；</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/" class="post-title-link" itemprop="url">HTMLandCSS基础2</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-28 11:43:13" itemprop="dateCreated datePublished" datetime="2021-01-28T11:43:13+08:00">2021-01-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-08-30 11:07:16" itemprop="dateModified" datetime="2021-08-30T11:07:16+08:00">2021-08-30</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="HTMLandCSS-Layout"><a href="#HTMLandCSS-Layout" class="headerlink" title="HTMLandCSS- Layout"></a>HTMLandCSS- Layout</h1><h3 id="The-Box-Model"><a href="#The-Box-Model" class="headerlink" title="The Box Model"></a>The Box Model</h3><p>在CSS中，一个很重要的概念就是Box Model，也就是当浏览器开始渲染的时候，。下图是一个简单的Box 模型。一共有4层：Content,Padding,Border和Margin。 </p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/1.png" style="zoom:80%;"></p>
<p>我们随便写一个paragraph</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在浏览器里，我们可以看到这个paragraph的Box 模型</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/2.png" style="zoom:100%;"></p>
<p>我们看到，这里只有content和margin是有内容的，padding和border都是没有内容的。Margin=16是 Chrome默认的值。现在我们可以用CSS来改变这些值，这里我为Box Model添加了padding和border两个值</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">20px</span> <span class="number">10px</span> <span class="number">20px</span>;<span class="comment">/*也可以写成 10px 20px;分别代表上下边距和左右边距*/</span></span><br><span class="line">  <span class="attribute">border</span>: <span class="number">5px</span> solid gold;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/3.png" style="zoom:100%;"></p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/4.png" style="zoom:100%;"></p>
<p>我们发现，当我们设置了left padding=20px之后，这行文字总体向右移动了20px。</p>
<h4 id="margin和padding之间的区别"><a href="#margin和padding之间的区别" class="headerlink" title="margin和padding之间的区别"></a>margin和padding之间的区别</h4><p>也许我们会问：margin和padding都是设置文字和框的距离，那么这二者又有什么区别呢？我们举一个例子：</p>
<p>假设现在我们有两个 <code>&lt;p&gt;</code> 元素：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>首先设置 padding =20px, margin = 0px; </p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/5.png" style="zoom:100%;"></p>
<p>绿色的边距就是padding，大小为20px，而且对于每个paragraph，都有20px的padding；</p>
<p>现在我们交换二者的值，padding = 0px 而 margin = 20px。黄色的代表margin，我们发现，现在两个paragraph共用一个margin，也就是它们之间的距离现在是20px。也就是说当两个paragraph相邻的时候，两个margin会合并成一个margin。</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/6.png" style="zoom:100%;"></p>
<p>所以技术上来说，我们应该使用Margin来分隔元素，应该用padding增加content和border之间的距离</p>
<h3 id="Sizing-Elements"><a href="#Sizing-Elements" class="headerlink" title="Sizing Elements"></a>Sizing Elements</h3><h4 id="box-sizing属性"><a href="#box-sizing属性" class="headerlink" title="box-sizing属性"></a>box-sizing属性</h4><p>我们现在来定义一个100X100大小的正方体，并用css为其添加padding和border</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: gold;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">10px</span> solid orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/7.png" style="zoom:100%;"></p>
<p>我们发现，本来是100X100的正方形，加了padding和border以后，变成了160X160的正方形，这是因为在每一边都加上了 20px的padding和10px的border。这和我们规定的100X100的相悖。</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/8.png" style="zoom:100%;"></p>
<p>为了规避这种情况，我们可以在css中定义这个属性：box-sizing ,默认为content-box，也就是我们设置的大小其实是<code>content</code>的大小，现在我们将其设置为<code>border-box</code>，也就是我们设置的大小是带边框都算在内的 <code>box</code> 的大小。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: gold;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">10px</span> solid orange;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Universal-selector-and-pseudo-element"><a href="#Universal-selector-and-pseudo-element" class="headerlink" title="Universal selector and pseudo element"></a>Universal selector and pseudo element</h4><p>如果我有很多的box，又不希望一直写这个属性。为了降低代码的重复性，我们可以使用<strong>全局选择器</strong> <code>*</code></p>
<p>但是这个 <code>*</code> 选择器并不适用于<code>pseudo element</code>，也就是 before , after 之类的元素。 为了囊括所有的元素，我们可以这样写：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">*,</span><br><span class="line">*<span class="selector-pseudo">::before</span>,</span><br><span class="line">*<span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="span-元素与-display-属性"><a href="#span-元素与-display-属性" class="headerlink" title="span 元素与 display 属性"></a>span 元素与 display 属性</h4><p>还有一个问题，就是 <code>div</code>和<code>span</code>之间的区别。我们之前说过 <code>div</code>是以块(block)呈现的而<code>span</code>是以行内(inline)格式呈现的。因此如果我将html中两个<code>div</code>元素改成<code>span</code>元素，虽然我规定了<code>width</code>和<code>height</code>都为100px，结果却是这样：</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/9.png" style="zoom:100%;"></p>
<p>如果我们要规避这个情况，我们可以修改<code>display</code>属性：对于<code>span</code>元素，<code>display</code>属性默认为<code>inline</code>；我们可以将其改成 <code>inline-block</code>，意思是 <code>&lt;span&gt;</code>元素仍然可以行内排列，而对于<code>block</code>使用的属性如<code>width</code>和<code>height</code>也可以作用于其上。如下图所示：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: gold;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/10.png" style="zoom:100%;"></p>
<h3 id="Overflowing"><a href="#Overflowing" class="headerlink" title="Overflowing"></a>Overflowing</h3><p>overflow顾名思义就是溢出，在css中，当content的大小超过了我们规定的box的大小，这时候就会发生溢出。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">3px</span> solid gold;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">150px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">150px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我规定了box的大小为150X150，但是字却很多，这时候就会发生溢出现象</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/11.png" style="zoom:100%;"></p>
<p>这时候我们就可以在css中设置 <code>overflow</code>这个属性了：</p>
<p>默认为visible，也就是我们上面看到的情况。我们可以将其设置为hidden，也就是放不下的就直接隐藏掉了:</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/12.png" style="zoom:100%;"></p>
<p>还可以设置为<code>scroll</code>，这时浏览器会渲染出两个滚动条，然而，在最近的mac版本，<code>scroll</code>是失效的：</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/13.png" style="zoom:100%;"></p>
<p>或者设置为 <code>auto</code>，浏览器会自动检测是否出现<code>overflow</code>现象，如果出现了就会渲染两个滚动条，否则就不设置滚动条。</p>
<p>注意，<code>overflow</code>其实是 <code>overflow-x</code>和<code>overflow-y</code>二者的统一，为其赋值相当于在x和y轴都设置了值。如果我们希望对x和y分别设值，我们可以为overflow设置两个值：<strong>前者代表水平轴，后者代表垂直轴</strong>。</p>
<p>如：<code>overflow: hidden auto</code></p>
<h3 id="Measurement-Units"><a href="#Measurement-Units" class="headerlink" title="Measurement Units"></a>Measurement Units</h3><p>距离单位可以分为 Absolute 和 Relative两种， Absolute就是绝对的，固定的，比如说 px，in之类的单位。 Relative就是相对的。比如：</p>
<p><code>%</code> Relative to the size of the container</p>
<p><code>vw</code>和 <code>vh</code> ,Relative to the viewport</p>
<p><code>em</code>和<code>rem</code> Relative to the font size</p>
<p> 对于Absolute measurement units,不管怎么调整我们的浏览器，它定义的对象的大小，都是不会变化的。这种单位常常用于顶端边框。这样边框的厚度就不会随着浏览器窗口的大小而变粗或者变细。</p>
<h4 id><a href="#" class="headerlink" title="%"></a>%</h4><p>现在我们来看 relative value，首先我们看看 <code>%</code>,它让我们的元素属性是其父元素的百分之多少</p>
<p>这样来写css：已经知道body是div的父元素了</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: gold;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们规定了 body的宽度，然后再把 <code>width</code> 设置为50%，这时候因为窗口的大小是被固定的：300px；因此box的宽度为150px。 当我们去掉 body的<code>width</code>属性之后，box的宽度就随着浏览器的宽度变化而变化了，且始终占据浏览器窗口边框长度的一半。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: gold;</span><br><span class="line">  <span class="attribute">border-top</span>: <span class="number">3px</span> solid orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/14.png" style="zoom:100%;"></p>
<h4 id="vw-vh"><a href="#vw-vh" class="headerlink" title="vw vh"></a>vw vh</h4><p>当我们把height 改成100%之后，神奇的事情发生了，按理说我们希望这个框框能占满窗口所有的垂直距离。但是事实上却出现了这种情况，我们发现框框消失了！这是为什么？</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/15.png" style="zoom:100%;"></p>
<p>因为 我们的body并没有 height这一个属性，因此默认body的height属性为0，而%又是跟着父元素的对应属性走的，因此我们看到这个div的高度为0。</p>
<p>为了达到我们说的那种垂直占满窗口效果，我们可以使用 vh(viewport height)以及 vw(viewport weight)</p>
<p>比如我们这样来修改css:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50vw</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: gold;</span><br><span class="line">  <span class="attribute">border-top</span>: <span class="number">3px</span> solid orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>效果如下：</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/16.png" style="zoom:100%;"></p>
<h4 id="em-rem"><a href="#em-rem" class="headerlink" title="em,rem"></a>em,rem</h4><p>em是相对于字体来说的一个单位，10em代表了 10倍的当前元素中字体的大小。这里div元素没有font-size属性，那么它就会去父元素中查找，如果一直没有，那么他就会默认使用HTML元素中的字体大小,也就是16px。</p>
<p>10em = 10 * 16px = 160px </p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">10em</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">10em</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: gold;</span><br><span class="line">  <span class="attribute">border-top</span>: <span class="number">3px</span> solid orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/17.png" style="zoom:100%;"></p>
<p>em有缺点，就是不太方便，因为如果当前元素没有定义 font-size的话，就要去它的父元素或者祖辈元素寻找，比较麻烦。这时候我们可以选用rem，也就是 root element,一般来说就是HTML元素的字体大小： 16px</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">62.5%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">15rem</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">15rem</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: gold;</span><br><span class="line">  <span class="attribute">border-top</span>: <span class="number">3px</span> solid orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们可以简单做一个计算题，现在body的font-size是 16px * 62.5% = 10px, div 的宽度为15px * 10 = 150px </p>
<p>我们可以在body中修改html元素中的字体，当然也可以直接在chrome的设置中修改字体的大小。</p>
<h3 id="Positioning"><a href="#Positioning" class="headerlink" title="Positioning"></a>Positioning</h3><p>这是我们的html，注意，每一个元素可以有多个class，它们之间用空格隔开。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"boxes"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box box-one"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box box-two"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box-three"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>我的css如下：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="selector-class">.boxes</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">3px</span> solid lightgrey;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">5rem</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">5rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box-one</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: gold;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box-two</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: tomato;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box-three</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/18.png" style="zoom:100%;"></p>
<p>现在，我们希望把第二个方块稍稍向右移动，怎么办？ 我们需要用到 position属性</p>
<h4 id="相对定位"><a href="#相对定位" class="headerlink" title="相对定位"></a>相对定位</h4><ol>
<li>当开启了元素的相对定位以后，而不设置偏移量时，元素不会发生任何变化 </li>
<li>相对定位是相对于元素在文档流中原来的位置进行定位</li>
<li>相对定位的元素不会脱离文档流</li>
<li>相对定位不会改变元素的性质，块还是块，内联还是内联</li>
</ol>
<p>当开启了元素的定位（position属性值是一个非static的值）时，可以通过left right top bottom四个属性来设置元素的偏移量</p>
<blockquote>
<p>​           left：元素相对于其定位位置的左侧偏移量<br>​           right：元素相对于其定位位置的右侧偏移量<br>​           top：元素相对于其定位位置的上边的偏移量<br>​           bottom：元素相对于其定位位置下边的偏移 </p>
<p>通常偏移量只需要使用两个就可以对一个元素进行定位， 一般选择水平方向的一个偏移量和垂直方向的偏移量来为一个元素进行定位</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box-two</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: tomato;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">5rem</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里我设置了<code>left:5rem</code> ，在中间方块的左边就会多出5rem的空白，如下图所示：</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/19.png" style="zoom:100%;"></p>
<p>当然我们也可以设置 left为负值，这时候在原来方块的右边就会多出空白，而方块的一部分就会被挤到box外面去。</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/20.png" style="zoom:100%;"></p>
<p>当然 <code>left: -4rem;</code> 和 <code>right: 4rem</code> 是等价的，我们可以按照自己的喜好来定义。</p>
<p>还有 <code>top</code> <code>bottom</code> 这两个属性，用法同上。</p>
<h4 id="z-index-属性"><a href="#z-index-属性" class="headerlink" title="z-index 属性"></a>z-index 属性</h4><p>现在，红黄两个方块的堆叠方式如下：</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/21.png" style="zoom:100%;"></p>
<p>但是我想修改这两个方块的前后顺序，想让黄色覆盖红色，怎么办？</p>
<p>我们可以使用 z-index,这也很好理解，窗口是一张画布，有了x、y轴，这个z轴就是画布的深度。 默认所有的元素<code>z-index</code>属性都是0，z-index 值越大，距离我们越近，反之则越远。我们只需要设置黄色方块的<code>z-index</code>为1，或者红色方块的<code>z-index</code>为-1 ，就能达到目的：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box-two</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: tomato;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">4rem</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">4rem</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/22.png" style="zoom:100%;"></p>
<h4 id="绝对定位"><a href="#绝对定位" class="headerlink" title="绝对定位"></a>绝对定位</h4><p>绝对定位是<strong>相对于离他最近的开启了定位的祖先元素进行定位的</strong>（一般情况，开启了子元素的绝对定位都会同时开启父元素的相对定位）如果所有的祖先元素都没有开启定位，则会相对于浏览器窗口进行定位。 因此，在把第二个box的position设置成 absolute之前，我们首先要将container的position属性设置为relative。</p>
<p>原则：</p>
<ol>
<li>开启绝对定位以后，如果不设置偏移量，则元素的位置不会发生变化</li>
<li>绝对定位会使元素提升一个层级</li>
<li>绝对定位会改变元素的性质， 内联元素变成块元素，块元素的宽度和高度默认都被内容撑开</li>
</ol>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box-two</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: tomato;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">99999</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当我们设置了第二个箱子距离父元素的右下边框都为0时，发现其被移动到了box的右下角。而原来处在最下面的蓝色方框上移了一个框位。这是因为<strong>绝对定位会使元素提升一个层级</strong>，也就是说现在红色的框框和黄蓝色框框已经不是一层的了，而是和它的父元素是一个层级的。因此container中现在只有“两个”框了，红色框只是跟着container走，但并不属于container。</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/23.png" style="zoom:100%;"></p>
<h4 id="固定定位"><a href="#固定定位" class="headerlink" title="固定定位"></a>固定定位</h4><p>固定定位也是一种绝对定位，它的<strong>大部分特点都和绝对定位</strong>一样 ，不同的是： </p>
<p>固定定位永远都会<strong>相对于浏览器窗口进行定位</strong> ，固定定位会<strong>固定在浏览器窗口某个位置</strong>，不会随滚动条滚动，IE6不支持固定定位 </p>
<p>固定定位常常用于导航栏，我们希望不管浏览器滚动到哪里，顶部始终是navigation bar,首先我们设置body的margin为200vh，这样就能让窗口始终存在滚动条。然后将第二个box的top属性设置为0。这样，不管怎么滚，这个box始终固定在浏览器窗口的最上位置</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box-two</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: tomato;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>确定一个元素的长宽有两种方法，第一种是用 width和height，也是最直接的方法；第二种是利用 left，right，up和bottom，然后将width设置为auto，浏览器会根据left，right的值自动计算宽度。如下面这个例子：</p>
<p>我设置了 左右距离浏览器窗口都为2em长度，然后让width设置为auto,我们看到浏览器自动填充了这个box的宽度</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box-two</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: tomato;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">2em</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">2em</span>;</span><br><span class="line">  <span class="attribute">width</span>: auto;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">99</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/24.png" style="zoom:100%;"></p>
<h3 id="Floating-Elements"><a href="#Floating-Elements" class="headerlink" title="Floating Elements"></a>Floating Elements</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">"tweet"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"avatar"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem, ipsum dolor sit amet.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem, ipsum dolor sit amet.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.avatar</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">5rem</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">5rem</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: gold;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果我们的HTML文件和CSS文件向上面这样，那么结果如下图：文字会另起一行，因为<code>&lt;p&gt;</code>元素是block类型的元素。那么我们怎么做才能将文字放到方块旁边呢？</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/25.png" style="zoom:100%;"></p>
<p>我们可以在 <code>.avatar{}</code>中设置 float元素，<code>float: left;</code></p>
<p>当我们设置了 float为left的时候， 这个元素将会被放置到它后面所有元素的左边，如下图所示：</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/26.png" style="zoom:100%;"></p>
<p>当文字很多的时候，这些文字就会围绕在格子的周围。上面格子和字体之间没有间隔，那么我们可以再加上 <code>margin-right: 0.5rem</code>，效果如下：</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/27.png" style="zoom:100%;"></p>
<p>如果我把 left改成right，那么格子就会处于文字的右边</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/28.png" style="zoom:100%;"></p>
<h4 id="clear-属性"><a href="#clear-属性" class="headerlink" title="clear 属性"></a>clear 属性</h4><p>现在，我想把第二个paragraph移动到方格的下面，也就是跳脱出 float的影响，但是仍然保留第一个paragraph再方格的左边，我们可以这样写：</p>
<p>我们现在html中给 第二个 <code>&lt;p&gt;</code>元素加上一个<code>clear</code>的<code>class</code>属性，然后选中后令 clear的属性为both(这里是比较方便的做法，both包含了left和right，按道理说如果clear属性要和float属性保持一致)</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.avatar</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">5rem</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">5rem</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: gold;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">0.5rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.clear</span> &#123;</span><br><span class="line">  <span class="attribute">clear</span>: both;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/29.png" style="zoom:100%;"></p>
<p>现在我们给article元素添加一个边框，然后删除第二个 <code>&lt;p&gt;</code>元素，我们惊喜地发现效果是这样的</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/30.png" style="zoom:100%;"></p>
<p>现在边框之囊括了 article的子元素 p,但却并没有囊括子元素 div。这是因为 我们设置了 avatar为float element，默认情况下父元素是会忽略floated elements子元素的。因此这个div事实上并不在 article的作用范围之内。我们有好几种解决方法：</p>
<p><strong>1 : 在 <code>&lt;p&gt;</code> 元素之后再加一个div，<code>class</code>属性设为clear</strong> </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">"tweet"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"avatar"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet.<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span> = <span class="string">"clear"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>但这样只是单纯解决了问题，新添加的一行对搜索引擎的搜索工作是没有意义的</p>
<p><strong>2:使用pseudo element</strong></p>
<p>在css中新加上一段话，我们希望在tweet元素之后加上一个空白的content，但这个content默认是 inline的，因此我们还要设置其 display属性为 block， 最后将其clear属性设置为both。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.tweet</span><span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">''</span>;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">clear</span>: both;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>也就是说我们利用css在html中加入了一个 <code>div</code>元素，但这样又不会污染我们的html语言，一举两得。</p>
<p>这种技巧是可以重复使用的，因此我们最好使用一个较为通用的 class名字，一般，这种class被叫做 <code>clearfix</code>,我们需要给article元素第二个class了</p>
<h3 id="FlexBox"><a href="#FlexBox" class="headerlink" title="FlexBox"></a>FlexBox</h3><p>参考博客： <a href="http://caibaojian.com/flexbox-guide.html" target="_blank" rel="noopener">http://caibaojian.com/flexbox-guide.html</a></p>
<p>FlexBox是 Flexible Box Layout 的缩写，中文叫弹性盒子 。旨在提供一个更加有效的方式来布置，对齐和分布在容器之间的各项内容，即使它们的大小是未知或者动态变化的。它比float更加好用。</p>
<p>我们的 HTML如下:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span>A<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span>B<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span>C<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">3px</span> solid lightgrey;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">5rem</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">5rem</span>;</span><br><span class="line">  <span class="attribute">background</span>: gold;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">1rem</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/31.png" style="zoom:100%;"></p>
<h4 id="direction"><a href="#direction" class="headerlink" title="direction"></a>direction</h4><p>现在，我只要在 container中加一句 <code>display: flex</code> 就可以将三个框框由竖直排列转换为横向排列</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/32.png" style="zoom:100%;"></p>
<p>有了flex，我们不用使用float，不用再定义margin种种。是一个很方便的工具。</p>
<p>我们可以使用<code>flex-direction</code> 属性来操控排列的方向，默认为row，还有column，column-reverse(C格子排在最上面)和 row-reverse(如下图：)</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/33.png" style="zoom:100%;"></p>
<ul>
<li>row：横向从左到右排列（左对齐），默认的排列方式。</li>
<li>row-reverse：反转横向排列（右对齐，从后往前排，最后一项排在最前面。</li>
<li>column：纵向排列。</li>
<li>column-reverse：反转纵向排列，从后往前排，最后一项排在最上面。</li>
</ul>
<h4 id="justify-content-作用于父类容器上"><a href="#justify-content-作用于父类容器上" class="headerlink" title="justify-content(作用于父类容器上)"></a>justify-content(作用于父类容器上)</h4><p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/34.png" style="zoom:100%;"></p>
<p><code>justify-content</code>属性可以设置或检索弹性盒子元素在主轴方向上的对齐方式。 其中主轴的方向和direction有关，如上图所示。当弹性盒里一行上的所有子元素都不能伸缩或已经达到其最大值时，这一属性可协助<strong>对多余的空间进行分配</strong>。当元素溢出某行时，这一属性同样会在对齐上进行控制。</p>
<p>这里，我们使用direction : row 的情况来举例</p>
<ul>
<li>flex-start：弹性盒子元素将向<strong>行起始位置对齐</strong>。该行的第一个子元素的主起始位置的边界将与该行的主起始位置的边界对齐，同时所有后续的伸缩盒项目与其前一个项目对齐。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/35.png" style="zoom:100%;"></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">3px</span> solid lightgrey;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: row;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: stretch;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">90vh</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>flex-end：弹性盒子元素将向<strong>行结束位置对齐</strong>。该行的第一个子元素的主结束位置的边界将与该行的主结束位置的边界对齐，同时所有后续的伸缩盒项目与其前一个项目对齐。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/36.png" style="zoom:100%;"></p>
<ul>
<li>center：弹性盒子元素将<strong>向行中间位置对齐</strong>。该行的子元素将相互对齐并在行中居中对齐，同时第一个元素与行的主起始位置的边距等同与最后一个元素与行的主结束位置的边距（如果剩余空间是负数，则保持两端相等长度的溢出）。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/37.png" style="zoom:100%;"></p>
<ul>
<li>space-between：弹性盒子元素会<strong>平均地分布在行里</strong>。如果最左边的剩余空间是负数，或该行只有一个子元素，则该值等效于’flex-start’。在其它情况下，第一个元素的边界与行的主起始位置的边界对齐，同时最后一个元素的边界与行的主结束位置的边距对齐，而剩余的伸缩盒项目则平均分布，并确保两两之间的空白空间相等。简单来说就是<strong>两端顶牢，中间均分</strong>。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/38.png" style="zoom:100%;"></p>
<ul>
<li>space-evenly： 均分，也就是元素与元素之间的距离和元素与边框的距离相等。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/40.png" style="zoom:100%;"></p>
<ul>
<li>space-around：弹性盒子元素会<strong>平均地分布在行里</strong>，两端保留子元素与子元素之间间距大小的一半。如果最左边的剩余空间是负数，或该行只有一个伸缩盒项目，则该值等效于’center’。在其它情况下，伸缩盒项目则平均分布，并确保两两之间的空白空间相等，同时<strong>第一个元素前的空间</strong>以及<strong>最后一个元素后的空间</strong>为<strong>其他空白空间的一半</strong>。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/39.png" style="zoom:100%;"></p>
<h4 id="align-items-作用于父类容器上"><a href="#align-items-作用于父类容器上" class="headerlink" title="align-items(作用于父类容器上)"></a>align-items(作用于父类容器上)</h4><p>设置或检索弹性盒子元素在侧轴 方向上的对齐方式。</p>
<ul>
<li>flex-start：弹性盒子元素的侧轴（纵轴）起始位置的边界紧靠住该行的侧轴（纵轴）起始边界。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/42.png" style="zoom: 50%;"></p>
<ul>
<li>flex-end：弹性盒子元素的侧轴（纵轴）结束位置的边界紧靠住父容器的侧轴结束边界。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/41.png" style="zoom: 50%;"></p>
<ul>
<li>center：弹性盒子元素在该行的侧轴（纵轴）上居中放置。（如果该行的尺寸小于弹性盒子元素的尺寸，则会向两个方向溢出相同的长度）。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/43.png" style="zoom: 50%;"></p>
<ul>
<li>baseline：如弹性盒子元素的行内轴与侧轴为同一条，则该值与’flex-start’等效。其它情况下，该值将参与基线对齐。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/45.png" style="zoom: 100%;"></p>
<ul>
<li>stretch：如果指定侧轴大小的属性值为’auto’，则其值会使项目的边距盒的尺寸尽可能接近所在行的尺寸，但同时会遵照’min/max-width/height’属性的限制。</li>
</ul>
<h4 id="flex-wrap-作用于父类容器上"><a href="#flex-wrap-作用于父类容器上" class="headerlink" title="flex-wrap(作用于父类容器上)"></a>flex-wrap(作用于父类容器上)</h4><ul>
<li>nowrap：当子元素溢出父容器时不换行。如下图所示，如果子元素太多，浏览器就会自动对子元素产生形变，以让其能在一排中放置</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/46.png" style="zoom: 40%;"></p>
<ul>
<li>wrap：当子元素溢出父容器时自动换行。不会对子元素产生形变</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/47.png" style="zoom: 40%;"></p>
<ul>
<li>wrap-reverse：反转 wrap 排列。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/48.png" style="zoom: 40%;"></p>
<h4 id="align-content"><a href="#align-content" class="headerlink" title="align-content"></a>align-content</h4><p>向上面两张图，设置为wrap以后，虽然子元素分成了两行，但是他们的排版方式还是比较不协调，第一排离上边框比较近，第二排离下边框比较近，两排间隔比较远。这时候就要用到 <code>align-content</code>来设置或检索弹性盒堆叠伸缩行的对齐方式</p>
<ul>
<li>flex-start：各行向弹性盒容器的起始位置堆叠。弹性盒容器中第一行的侧轴起始边界紧靠住该弹性盒容器的侧轴起始边界，之后的每一行都紧靠住前面一行。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/49.png" style="zoom: 40%;"></p>
<ul>
<li>flex-end：各行向弹性盒容器的结束位置堆叠。弹性盒容器中最后一行的侧轴起结束界紧靠住该弹性盒容器的侧轴结束边界，之后的每一行都紧靠住前面一行。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/50.png" style="zoom: 40%;"></p>
<ul>
<li>center：各行向弹性盒容器的中间位置堆叠。各行两两紧靠住同时在弹性盒容器中居中对齐，保持弹性盒容器的<strong>侧轴起始内容边界</strong>和<strong>第一行之间的距离</strong>与该容器的<strong>侧轴结束内容边界</strong>与<strong>最后一行之间的距离</strong>相等。（如果剩下的空间是负数，则各行会向两个方向溢出的相等距离。）</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/51.png" style="zoom: 40%;"></p>
<ul>
<li>space-between：各行在弹性盒容器中平均分布。如果剩余的空间是负数或弹性盒容器中只有一行，该值等效于’flex-start’。在其它情况下，<strong>第一行的侧轴起始边界紧靠</strong>住弹性盒容器的<strong>侧轴起始内容边界</strong>，<strong>最后一行的侧轴结束边界紧靠</strong>住弹性盒容器的<strong>侧轴结束内容边界</strong>，剩余的行则按一定方式在弹性盒窗口中排列，以保持两两之间的空间相等。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/52.png" style="zoom: 40%;"></p>
<ul>
<li>space-around：各行在弹性盒容器中平均分布，<strong>两端</strong>保留<strong>子元素与子元素之间间距大小的一半</strong>。如果剩余的空间是负数或弹性盒容器中只有一行，该值等效于’center’。在其它情况下，各行会按一定方式在弹性盒容器中排列，以保持<strong>两两之间的空间相等</strong>，同时<strong>第一行前面</strong>及<strong>最后一行后面</strong>的空间是<strong>其他空间的一半</strong>。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/53.png" style="zoom: 40%;"></p>
<ul>
<li>stretch：各行将会伸展以占用剩余的空间。如果剩余的空间是负数，该值等效于’flex-start’。在其它情况下，剩余空间被所有行平分，以扩大它们的侧轴尺寸。</li>
</ul>
<h4 id="align-self-适用于弹性盒模型子元素"><a href="#align-self-适用于弹性盒模型子元素" class="headerlink" title="align-self (适用于弹性盒模型子元素)"></a>align-self (适用于弹性盒模型子元素)</h4><p>现在我们相对单一的盒子进行操作，我们就可以用align-self属性。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box box-one"</span>&gt;</span>A<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box box-two"</span>&gt;</span>B<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box box-three"</span>&gt;</span>C<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>auto：如果’align-self’的值为’auto’，则其计算值为元素的父元素的’align-items’值，如果其没有父元素，则计算值为’stretch’。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/57.png" style="zoom: 40%;"></p>
<p>这里，我对子元素 boxA进行操作，其父元素 container的align-items为center，因此这里继承了下来</p>
<ul>
<li>flex-start：弹性盒子元素的侧轴（纵轴）起始位置的边界紧靠住该行的侧轴起始边界。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/55.png" style="zoom: 40%;"></p>
<ul>
<li>flex-end：弹性盒子元素的侧轴（纵轴）起始位置的边界紧靠住该行的侧轴结束边界。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/56.png" style="zoom: 40%;"></p>
<ul>
<li>center：弹性盒子元素在该行的侧轴（纵轴）上居中放置。（如果该行的尺寸小于弹性盒子元素的尺寸，则会向两个方向溢出相同的长度）。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/54.png" style="zoom: 40%;"></p>
<ul>
<li><p>baseline：如弹性盒子元素的行内轴与侧轴为同一条，则该值与’flex-start’等效。其它情况下，该值将参与基线对齐。</p>
</li>
<li><p>stretch：如果指定侧轴大小的属性值为’auto’，则其值会使项目的边距盒的尺寸尽可能接近所在行的尺寸，但同时会遵照’min/max-width/height’属性的限制。</p>
</li>
</ul>
<h4 id="flex-basis-适用于弹性盒模型容器子元素"><a href="#flex-basis-适用于弹性盒模型容器子元素" class="headerlink" title="flex-basis (适用于弹性盒模型容器子元素)"></a>flex-basis (适用于弹性盒模型容器子元素)</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flex-basis: &lt;length&gt; | auto (default auto)</span><br></pre></td></tr></table></figure>
<p>这个属性设置或检索弹性盒伸缩基准值，默认为auto</p>
<ul>
<li>auto：无特定宽度值，取决于其它属性值</li>
<li><p><code>&lt;length&gt;</code>：用长度值来定义宽度。不允许负值</p>
</li>
<li><p><code>&lt;percentage&gt;</code>：用百分比来定义宽度。不允许负值</p>
</li>
</ul>
<p>比如说当我设置 <code>flex-basis: 10rem;</code> 的时候，效果如下图所示</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/58.png" style="zoom: 40%;"></p>
<p>作用于宽度的前提是 direction 的值为row，如果direction的值为columns，那么<code>flex-basis</code>就作用域高度上了</p>
<h4 id="flex-grow-适用于弹性盒模型容器子元素"><a href="#flex-grow-适用于弹性盒模型容器子元素" class="headerlink" title="flex-grow (适用于弹性盒模型容器子元素)"></a>flex-grow (适用于弹性盒模型容器子元素)</h4><p>设置或检索弹性盒的<strong>扩展比率</strong>。 根据弹性盒子元素所设置的扩展因子作为比率来分配剩余空间</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">flex-grow</span>: &lt;<span class="selector-tag">number</span>&gt; (<span class="selector-tag">default</span> 0)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>&lt;number&gt;</code>：用数值来定义扩展比率。不允许负值</li>
<li><code>flex-grow</code>的默认值为0，如果没有显示定义该属性，是不会拥有分配剩余空间权利的。 </li>
</ul>
<p>比如说这里有3个boxes，box1的flex-grow = 2，box2、3的flex-grow为1</p>
<p>那么，整一个行的空间就会被均匀分成4份，两份给box1，box2和box3分别得到1份。</p>
<h4 id="flex-shrink"><a href="#flex-shrink" class="headerlink" title="flex-shrink"></a>flex-shrink</h4><p>根据弹性盒子元素所设置的收缩因子作为比率来收缩空间。</p>
<h4 id="flex"><a href="#flex" class="headerlink" title="flex"></a>flex</h4><p>flex就是上面三个属性 flex-grow,flex-shrink,flex-basis三者的集合</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flex：none | [ flex-grow ] || [ flex-shrink ] || [ flex-basis ]</span><br></pre></td></tr></table></figure>
<ul>
<li>none：none关键字的计算值为: 0 0 auto</li>
<li>[ flex-grow ]：定义弹性盒子元素的扩展比率。</li>
<li>[ flex-shrink ]：定义弹性盒子元素的收缩比率。</li>
<li>[ flex-basis ]：定义弹性盒子元素的默认基准值。</li>
</ul>
<h3 id="Grid"><a href="#Grid" class="headerlink" title="Grid"></a>Grid</h3><p>参考博客： <a href="http://www.ruanyifeng.com/blog/2019/03/grid-layout-tutorial.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2019/03/grid-layout-tutorial.html</a></p>
<p>Flex 布局是轴线布局，只能指定”项目”针对轴线的位置，可以看作是<strong>一维布局</strong>。Grid 布局则是将容器划分成”行”和”列”，产生单元格，然后指定”项目所在”的单元格，可以看作是<strong>二维布局</strong>。Grid 布局远比 Flex 布局强大。</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/59.png" style="zoom: 80%;"></p>
<p>一个网格常用的场景就是图片展示：</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/60.png" style="zoom: 80%;"></p>
<h4 id="容器属性-父元素"><a href="#容器属性-父元素" class="headerlink" title="容器属性(父元素)"></a>容器属性(父元素)</h4><p>那么，grid类型的布局需要有哪些结构组成呢？我们可以这样来定义：</p>
<ul>
<li>display：grid</li>
<li>grid-template-rows</li>
<li>grid-template-columns</li>
</ul>
<h5 id="grid-template-rows-columns"><a href="#grid-template-rows-columns" class="headerlink" title="grid-template-rows/columns"></a>grid-template-rows/columns</h5><p>容器指定了网格布局以后，接着就要划分行和列。<code>grid-template-columns</code>属性定义每一列的列宽，<code>grid-template-rows</code>属性定义每一行的行高。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template-rows</span>: <span class="number">100px</span> <span class="number">100px</span> <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">grid-template-columns</span>: <span class="number">100px</span> <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里，我们就制作了一个3行2列的网格。</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/61.png" style="zoom: 80%;"></p>
<p>上面我们使用了绝对单位，事实上我们也可以使用相对单位 <code>%</code>,<code>vh,vw</code>之类的</p>
<p>当然还有一个属性是 <code>grid-template</code>, 可以这样写：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template</span>: <span class="number">100px</span> <span class="number">100px</span> <span class="number">100px</span> / <span class="number">100px</span> <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>repeat()函数</strong></p>
<p>有时候，我们重复写同样的值非常繁琐。这时候就可以使用 <code>repeat()</code>函数，简化重复的值.</p>
<p><code>repeat()</code>接受两个参数，第一个参数是重复的次数，第二个参数是所要重复的值。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template-columns</span>: <span class="built_in">repeat</span>(<span class="number">3</span>, <span class="number">100px</span>);</span><br><span class="line">  <span class="attribute">grid-template-rows</span>: <span class="built_in">repeat</span>(<span class="number">2</span>, <span class="number">100px</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>repeat()</code>重复某种模式也是可以的。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">grid-template-columns</span>: <span class="selector-tag">repeat</span>(2, 100<span class="selector-tag">px</span> 20<span class="selector-tag">px</span> 80<span class="selector-tag">px</span>);</span><br></pre></td></tr></table></figure>
<p> 上面代码定义了6列，第一列和第四列的宽度为<code>100px</code>，第二列和第五列为<code>20px</code>，第三列和第六列为<code>80px</code></p>
<p><strong>fr()</strong></p>
<p>为了方便表示比例关系，网格布局提供了<code>fr</code>关键字（fraction 的缩写，意为”片段”）。如果两列的宽度分别为<code>1fr</code>和<code>2fr</code>，就表示后者是前者的两倍。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template-rows</span>: <span class="built_in">repeat</span>(<span class="number">3</span>,<span class="number">100px</span>);</span><br><span class="line">  <span class="attribute">grid-template-columns</span>: <span class="number">1</span>fr <span class="number">2</span>fr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/71.png" style="zoom: 80%;"></p>
<p><code>fr</code>可以与绝对长度的单位结合使用，这时会比 <code>%</code>更加方便。因为 <code>%</code>是相对于整个 container而言的，而fr是相对于除去绝对长度后，剩余的空间而言的，因而不会发生溢出等现象</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template-rows</span>: <span class="built_in">repeat</span>(<span class="number">3</span>,<span class="number">100px</span>);</span><br><span class="line">  <span class="attribute">grid-template-columns</span>: <span class="number">100px</span> <span class="number">1</span>fr <span class="number">2</span>fr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/72.png" style="zoom: 80%;"></p>
<p>这里，第一列宽度为100px，第三列是第二列宽度的两倍。</p>
<p><strong>auto关键词</strong></p>
<p><code>auto</code>关键字表示由浏览器自己决定长度。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">grid-template-columns</span>: 100<span class="selector-tag">px</span> <span class="selector-tag">auto</span> 100<span class="selector-tag">px</span>;</span><br></pre></td></tr></table></figure>
<p>上面代码中，第二列的宽度，基本上等于该列单元格的最大宽度，除非单元格内容设置了<code>min-width</code>，且这个值大于最大宽度。这样当浏览器窗口变化的时候，第一列和第三列都不会发生变化，但是第二列的宽度会随之变化。</p>
<h5 id="justify-items-align-items属性"><a href="#justify-items-align-items属性" class="headerlink" title="justify-items align-items属性"></a>justify-items align-items属性</h5><p><code>justify-items</code>属性设置<strong>单元格内容的</strong>水平位置（左中右），<code>align-items</code>属性设置<strong>单元格内容</strong>的垂直位置（上中下），都作用于<strong>父元素上</strong>和flexbox中有点类似</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">justify-items</span>: start | end | center | stretch;</span><br><span class="line">  <span class="attribute">align-items</span>: start | end | center | stretch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>start：对齐单元格的起始边缘。</li>
</ul>
<p>二者都取 start的时候，效果如图：</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/62.png" style="zoom: 80%;"></p>
<ul>
<li>end：对齐单元格的结束边缘。</li>
</ul>
<p>二者取end时：</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/63.png" style="zoom: 80%;"></p>
<ul>
<li>center：单元格内部居中。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/64.png" style="zoom: 80%;"></p>
<ul>
<li>stretch：拉伸，占满单元格的整个宽度（默认值）。</li>
</ul>
<p>还有 <code>place-items</code> 属性，是二者的合并简写模式：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">place-items</span>: &lt;<span class="selector-tag">align-items</span>&gt; &lt;<span class="selector-tag">justify-items</span>&gt;;</span><br></pre></td></tr></table></figure>
<h5 id="justify-content-align-content-属性"><a href="#justify-content-align-content-属性" class="headerlink" title="justify-content  align-content 属性"></a>justify-content  align-content 属性</h5><p><code>justify-content</code>属性是<strong>整个内容区域</strong>在容器里面的水平位置（左中右）</p>
<p><code>align-content</code>属性是<strong>整个内容区域</strong>的垂直位置（上中下）。</p>
<ul>
<li>start 对齐容器的起始边框。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/65.png" style="zoom: 50%;"></p>
<ul>
<li>end 对齐容器的结束边框。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/66.png" style="zoom: 50%;"></p>
<ul>
<li>center 容器内部居中。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/67.png" style="zoom: 50%;"></p>
<ul>
<li>stretch 项目大小没有指定时(未设置长宽)，拉伸占据整个网格容器。 </li>
<li>space-around 每个项目两侧的间隔相等。所以，项目之间的间隔比项目与容器边框的间隔大一倍。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/68.png" style="zoom: 50%;"></p>
<ul>
<li>space-between  项目与项目的间隔相等，项目与容器边框之间没有间隔。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/69.png" style="zoom: 50%;"></p>
<ul>
<li>space-evenly项目与项目的间隔相等，项目与容器边框之间也是同样长度的间隔。</li>
</ul>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/70.png" style="zoom: 50%;"></p>
<p><code>place-content</code>属性则是<code>align-content</code>属性和<code>justify-content</code>属性的合并简写形式。</p>
<h5 id="row-gap-column-gap属性"><a href="#row-gap-column-gap属性" class="headerlink" title="row-gap column-gap属性"></a>row-gap column-gap属性</h5><p> <code>row-gap</code>属性设置行与行的间隔（行间距）， <code>column-gap</code>属性设置列与列的间隔（列间距）。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.container &#123;</span><br><span class="line">  display: grid;</span><br><span class="line">  grid-template: 100px auto 100px&#x2F;30fr 70fr;</span><br><span class="line">  row-gap: 10px;</span><br><span class="line">  column-gap: 10px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>中间深颜色的区域就是各个grid之间的gap间隙。</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/73.png" style="zoom: 50%;"></p>
<p><code>gap</code>属性是<code>grid-column-gap</code>和<code>grid-row-gap</code>的合并简写形式，语法如下。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">gap</span>: &lt;<span class="selector-tag">row-gap</span>&gt; &lt;<span class="selector-tag">column-gap</span>&gt;;</span><br></pre></td></tr></table></figure>
<p>当然如果我们省略了第二个值，浏览器会默认第二个值等于第一个值</p>
<h4 id="项目属性-子元素"><a href="#项目属性-子元素" class="headerlink" title="项目属性(子元素)"></a>项目属性(子元素)</h4><h5 id="grid-column-grid-row"><a href="#grid-column-grid-row" class="headerlink" title="grid-column grid-row"></a>grid-column grid-row</h5><p><code>grid-column</code>属性是<code>grid-column-start</code>和<code>grid-column-end</code>的合并简写形式，<code>grid-row</code>属性是<code>grid-row-start</code>属性和<code>grid-row-end</code>的合并简写形式。</p>
<p>首先我们看dev-tool中的网格线。正常情况下，<code>n</code>行有<code>n + 1</code>根水平网格线，<code>m</code>列有<code>m + 1</code>根垂直网格线，比如三行就有四根水平网格线。</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/74.png" style="zoom: 70%;"></p>
<p>那么<code>grid-column</code>和<code>grid-row</code>中的两个值就代表了起始网格线和结束网格线。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box-one</span> &#123;</span><br><span class="line">  <span class="attribute">grid-column</span>: &lt;start-line&gt; / &lt;end-line&gt;;</span><br><span class="line">  <span class="attribute">grid-row</span>: &lt;start-line&gt; / &lt;end-line&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box-one</span> &#123;</span><br><span class="line">  <span class="attribute">grid-column</span>: <span class="number">1</span> / <span class="number">3</span>;</span><br><span class="line">  <span class="attribute">grid-row</span>: <span class="number">1</span> / <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 等同于 */</span></span><br><span class="line"><span class="selector-class">.box-one</span>&#123;</span><br><span class="line">  <span class="attribute">grid-column-start</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">grid-column-end</span>: <span class="number">3</span>;</span><br><span class="line">  <span class="attribute">grid-row-start</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">grid-row-end</span>: <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当然，也可以取负值， -1就代表最后一行，-2代表倒数第二行以此类推</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box-one</span>&#123;</span><br><span class="line">  <span class="attribute">grid-column</span>: <span class="number">1</span> / -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/75.png" style="zoom: 70%;"></p>
<p>这两个属性之中，也可以使用<code>span</code>关键字，表示跨越多少个网格。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box-one</span>&#123;</span><br><span class="line">  <span class="attribute">grid-column</span>: <span class="number">1</span> / <span class="number">3</span>;</span><br><span class="line">  <span class="attribute">grid-row</span>: <span class="number">1</span> / <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 等同于 */</span></span><br><span class="line"><span class="selector-class">.box-one</span> &#123;</span><br><span class="line">  <span class="attribute">grid-column</span>: <span class="number">1</span> / span <span class="number">2</span>;</span><br><span class="line">  <span class="attribute">grid-row</span>: <span class="number">1</span> / span <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>grid-row 确定了这个子元素可以处于网格中的第几行</p>
<p>最后，斜杠以及后面的部分可以省略，默认跨越一个网格。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box-one</span> &#123;</span><br><span class="line">  <span class="attribute">grid-column</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">grid-row</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="grid-area-grid-template-areas"><a href="#grid-area-grid-template-areas" class="headerlink" title="grid-area grid-template-areas"></a>grid-area grid-template-areas</h5><p><code>grid-area</code> 属性指定项目放在哪一个区域。</p>
<p>但首先我们需要定义这些区域,这就需要用到 <code>grid-template-areas</code>这个属性了,这个属性作用于父元素，因此我们在container中定义</p>
<p>因为我们总共定义了一个3行2列的网格，因此在写 <code>grid-template-areas</code>的时候也要写3X2的样式。如下图所示。如果两个单元格的名字相同，那么当我们分配时就会自动将其连在一起。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template</span>: <span class="number">100px</span> auto <span class="number">100px</span>/<span class="number">30</span>fr <span class="number">70</span>fr;</span><br><span class="line">  <span class="attribute">row-gap</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">column-gap</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">3px</span> solid lightgrey;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">90vh</span>;</span><br><span class="line">  <span class="attribute">grid-template-areas</span>: </span><br><span class="line">  <span class="string">"header header"</span> </span><br><span class="line">  <span class="string">"sidebar main"</span></span><br><span class="line">  <span class="string">"footer footer"</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面代码中，顶部是页眉区域<code>header</code>，底部是页脚区域<code>footer</code>，中间部分则为<code>main</code>和<code>sidebar</code>。</p>
<p>现在我们为格子A和D分配区域</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box-one</span> &#123;</span><br><span class="line">  <span class="attribute">grid-area</span>: header;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box-four</span> &#123;</span><br><span class="line">  <span class="attribute">grid-area</span>: footer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>效果如下图所示：</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/77.png" style="zoom: 70%;"></p>
<p>如果某些区域不需要利用，则使用”点”（<code>.</code>）表示。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">grid-template-areas</span>: </span><br><span class="line">"<span class="selector-tag">header</span> <span class="selector-tag">header</span>" </span><br><span class="line">"<span class="selector-tag">sidebar</span> <span class="selector-tag">main</span>"</span><br><span class="line">". <span class="selector-tag">footer</span>" ;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/78.png" style="zoom: 70%;"></p>
<p><code>grid-area</code>属性还可用作<code>grid-row-start</code>、<code>grid-column-start</code>、<code>grid-row-end</code>、<code>grid-column-end</code>的合并简写形式，直接指定项目的位置。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">grid-area</span>: &lt;row-start&gt; / &lt;column-start&gt; / &lt;row-end&gt; / &lt;column-end&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>比如说我定义 <code>grid-area: 2/2/3/3</code>,那么A元素就会到第二行二列的那个格子去了</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box-one</span>&#123;</span><br><span class="line">  <span class="attribute">grid-area</span>: <span class="number">2</span>/<span class="number">2</span>/<span class="number">3</span>/<span class="number">3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/76.png" style="zoom: 70%;"></p>
<h5 id="justify-self-align-self"><a href="#justify-self-align-self" class="headerlink" title="justify-self align-self"></a>justify-self align-self</h5><p><code>justify-self</code>属性设置单元格内容的水平位置（左中右），跟<code>justify-items</code>属性的用法完全一致，但只作用于单个项目。</p>
<p><code>align-self</code>属性设置单元格内容的垂直位置（上中下），跟<code>align-items</code>属性的用法完全一致，也是只作用于单个项目。</p>
<p>用法也一样，都是四种取值</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">justify-self</span>: start | end | center | stretch;</span><br><span class="line">  <span class="attribute">align-self</span>: start | end | center | stretch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Hiding Elements</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span> = <span class="string">"box first"</span>&gt;</span>Box1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span> = <span class="string">"box"</span>&gt;</span>Box2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/79.png"></p>
<p>现在我们有这样一个html文件，我想隐藏 第一个 <code>&lt;div&gt;</code>元素，怎么办？有两种方法,但二者有点区别</p>
<p>第一种是使用<code>display</code>属性</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.first</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样写的结果就是第一个<code>&lt;div&gt;</code>元素所占的位置都会被隐藏，因此现在Second在第一排上。</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/80.png"></p>
<p>第二种是设置<code>visibility</code>属性,将其设置为 hidden，与visible相对。虽然Box1看不见，但是其所在的div元素仍然保留着</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.first &#123;</span><br><span class="line">  visibility: hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/81.png"></p>
<h3 id="Media-Queries"><a href="#Media-Queries" class="headerlink" title="Media Queries"></a>Media Queries</h3><p>最后我们来讲Media Queries，这能让我们的HTML网页在不同的设备上显示不同的样式</p>
<p>首先我们要决定是以电脑页面优先还是移动设备页面优先，不同的项目有着不同的需求。一般来说，很多人喜欢先开发移动设备优先。因为如果线开发电脑页面，再移植到移动设备上需要调整很多很多东西</p>
<p>拿一个很小的例子来说，我们希望两块文字，在手机这类宽度比较窄的屏幕上显示为竖直排列，而在电脑，平板这类比较宽的屏幕上为水平排列。那么我们就需要设置一个 breakpoint，也就是说当宽度大于这个breakpoint的时候，div元素的排列会从原来的竖直排列转换为水平排列。</p>
<p>那么用CSS怎么实现这一点？</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: gold;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">1rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box</span><span class="selector-pseudo">:nth-of-type(2)</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: dodgerblue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width:</span> <span class="number">768px</span>)  &#123;</span><br><span class="line">  <span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: row;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: white;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在这里，我们使用 <code>@media screen</code>，and后面加上限定条件，需要用小括号，括号中使用min-width属性。  也就是说在花括号中写上当宽度大于min-width时的css样式。浏览器会自动检测，并在符合条件的时候将花括号中的CSS覆盖之前写的CSS。</p>
<p>效果：</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/1.gif"></p>
<p>参考标准如下:</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/83.png"></p>
<p>我们还可以一直and+新的条件 ，下面意思是说当screen的大小在 768和 1000之间的时候，采用这段css</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width:</span> <span class="number">768px</span>) <span class="keyword">and</span> (<span class="attribute">max-width:</span> <span class="number">1000px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: row;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>此外，我们还可以对打印机进行设置。因为显示器(screen)和打印机(printer)是两种差别很大的设备,所以从浏览器里看到的页面,打印出来也许和你看到的样子有很大的差距。</p>
<p>screen一般使用逻辑单位比如px,而打印机则应该使用物理单位比如cm或in。我们常见的A4纸张大小在不同DPI的显示器上显示的大小是不同的。因此如果要精确的控制打印效果就应该使用print<br>css，这是跨平台兼容的标准。</p>
<p>举例如下：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@media</span> print&#123;</span><br><span class="line">  <span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>:<span class="number">12pt</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.box</span>&#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0.5cm</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h3><p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/84.png"><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/85.png"></p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/86.png"></p>
<h4 id="CheatSheet"><a href="#CheatSheet" class="headerlink" title="CheatSheet"></a>CheatSheet</h4><p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/87.png"></p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/88.png"></p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/89.png"></p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/90.png"></p>
<h2 id="Exercise"><a href="#Exercise" class="headerlink" title="Exercise"></a>Exercise</h2><h3 id="Navigation-Bar"><a href="#Navigation-Bar" class="headerlink" title="Navigation Bar"></a>Navigation Bar</h3><p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/91.png" style="zoom: 67%;"></p>
<h4 id="提示与要求"><a href="#提示与要求" class="headerlink" title="提示与要求"></a>提示与要求</h4><p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/92.png"></p>
<p>html文件如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"./css/normalize.css"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"./css/navbar.css"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">"nav"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span> <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"1"</span>&gt;</span>About<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"2"</span>&gt;</span>Courses<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"3"</span>&gt;</span>Forum<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"4"</span>&gt;</span>Learning Paths<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"5"</span>&gt;</span>Contact<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>css如下：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">62.5%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: Arial, Helvetica, sans-serif;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.6rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">nav</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#000</span>;</span><br><span class="line">  <span class="attribute">padding</span>: .<span class="number">7rem</span>;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">nav</span> <span class="selector-tag">ul</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">list-style-type</span>: none;<span class="comment">/*把列表的标识符(点)去掉*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">nav</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: .<span class="number">5rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">nav</span> <span class="selector-tag">a</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">  <span class="attribute">text-decoration</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width:</span> <span class="number">768px</span>) &#123;</span><br><span class="line">  <span class="selector-tag">nav</span> <span class="selector-tag">ul</span> &#123;</span><br><span class="line">    <span class="attribute">flex-direction</span>: row; <span class="comment">/*当宽大于768px，排布变为横状*/</span></span><br><span class="line">    <span class="attribute">justify-content</span>: flex-end; </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">nav</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">1rem</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Photo-Gallery"><a href="#Photo-Gallery" class="headerlink" title="Photo Gallery"></a>Photo Gallery</h3><p>效果图：</p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/93.png" style="zoom:67%;"></p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/94.png" style="zoom:67%;"></p>
<p><img src="/2021/01/28/HTMLandCSS%E5%9F%BA%E7%A1%802/95.png"></p>
<p>Html:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Photo Gallery<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/normalize.css"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/styles.css"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"gallery"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://source.unsplash.com/collection/190727/800x600?1"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://source.unsplash.com/collection/190727/800x600?2"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://source.unsplash.com/collection/190727/800x600?3"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://source.unsplash.com/collection/190727/800x600?4"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://source.unsplash.com/collection/190727/800x600?5"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://source.unsplash.com/collection/190727/800x600?6"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://source.unsplash.com/collection/190727/800x600?7"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://source.unsplash.com/collection/190727/800x600?8"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://source.unsplash.com/collection/190727/800x600?9"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>对于这题，我一开始想的思路是在最窄的时候使用flex，其余的时候用的是grid，其实没必要。都用grid就可以。此外，在<code>div</code>中可以直接引入<code>&lt;img&gt;</code> ，而一开始我想的是在<code>&lt;div&gt;</code>中填入<code>&lt;img&gt;</code>。所以css可以写的很简单：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.gallery</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-gap</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.gallery</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">object-fit</span>: cover;	<span class="comment">/* 对图片进行剪切，保留原始比例 */</span></span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;				<span class="comment">/* 宽度始终填满 */</span></span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width:</span> <span class="number">768px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.gallery</span> &#123;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>: <span class="built_in">repeat</span>(<span class="number">2</span>, <span class="number">1</span>fr);	<span class="comment">/* 两列，每列占一半*/</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width:</span> <span class="number">1024px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.gallery</span> &#123;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>: <span class="built_in">repeat</span>(<span class="number">3</span>, <span class="number">1</span>fr); <span class="comment">/* 三列 */</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.gallery</span> <span class="selector-tag">img</span><span class="selector-pseudo">:nth-of-type(3)</span> &#123;<span class="comment">/*采用nth-child方法选择第三个img*/</span></span><br><span class="line">    <span class="attribute">grid-column</span>: <span class="number">2</span> / <span class="number">4</span>;</span><br><span class="line">    <span class="attribute">grid-row</span>: <span class="number">1</span> / <span class="number">3</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/" class="post-title-link" itemprop="url">HTMLandCSS基础1</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-25 16:40:53" itemprop="dateCreated datePublished" datetime="2021-01-25T16:40:53+08:00">2021-01-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-09 23:25:30" itemprop="dateModified" datetime="2025-04-09T23:25:30+08:00">2025-04-09</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="HTMLandCSS基础1"><a href="#HTMLandCSS基础1" class="headerlink" title="HTMLandCSS基础1"></a>HTMLandCSS基础1</h1><p>我们使用的编辑器是VSCode，需要装prettier和Live Server这两个插件。</p>
<h2 id="HTML-Basics"><a href="#HTML-Basics" class="headerlink" title="HTML Basics"></a>HTML Basics</h2><h3 id="The-Head-Section"><a href="#The-Head-Section" class="headerlink" title="The Head Section"></a>The Head Section</h3><p>在vscode中，只要敲 <code>!+Tab</code> 就可以打出html文件的基本框架</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p> 我们看到一个html是由head部分、body部分组成的。在Head Section当中，有 <code>&lt;meta&gt;</code>标签和<code>&lt;title&gt;</code> 标签。meta标签中，会使用name属性来定义一个HTML文档的描述、关键词、作者等信息。比如说：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--charset是这个html文件的编码格式，比如ASCII,gbk,UTF-8等--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--这个属性规定了初始用户界面的一些特性，</span></span><br><span class="line"><span class="comment">	有了这个属性，我们的页面就能在不同设备上都能正常显示--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--description属性规定页面的描述。搜索引擎会把这个描述显示在搜索结果当中--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"description"</span> <span class="attr">content</span>=<span class="string">"Free Web tutorials"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--keywords属性就是这个文件中的关键词,告诉搜索引擎页面是与什么相关的--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"keywords"</span> <span class="attr">content</span>=<span class="string">"HTML,CSS,JavaScript"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--规定文档的作者的名字--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"author"</span> <span class="attr">content</span>=<span class="string">"Hege Refsnes"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>description标签后面的内容就是网页中的缩略信息，如下图所示：</p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/1.png" style="zoom:80%;"></p>
<h3 id="Text"><a href="#Text" class="headerlink" title="Text"></a>Text</h3><p>现在我们研究一下body中的文本。</p>
<p><code>&lt;p&gt;&lt;/p&gt;</code> 是paragraph的意思，我们可以把一段文字放到里面，比如说：</p>
<p><code>&lt;p&gt;I love to teach you &lt;strong&gt;HTML&lt;/strong&gt;!&lt;/p&gt;</code></p>
<p>这里，我们可以把需要强调的部分用 <code>&lt;strong&gt;&lt;/strong&gt;</code> 标签囊括起来，效果为加重；还可以用<code>&lt;i&gt;&lt;/i&gt;</code>，效果为斜体。不过这些CSS都能做，因此能用CSS做的尽量不要用HTML。比如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    strong &#123;</span><br><span class="line">      color: red;</span><br><span class="line">      font-style: normal;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>I love to teach you <span class="tag">&lt;<span class="name">strong</span>&gt;</span>HTML<span class="tag">&lt;/<span class="name">strong</span>&gt;</span>!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>还有 <code>h1,h2,h3,h4,h5,h6</code> 六级heading标签。其显示效果如下：</p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/2.png" style="zoom:80%;"></p>
<p>其中，<code>&lt;h1&gt;&lt;/h1&gt;</code>标签只能有一个，虽然html也能显示，但是会干扰到搜索引擎的检索</p>
<h3 id="Entities"><a href="#Entities" class="headerlink" title="Entities"></a>Entities</h3><p>在编写HTML页面时，需要用到”&lt;”、”&gt;”、”空格”等符号，直接输入这些符号时，会错误的把它们与标记混在一起，非常不利于编码。</p>
<p>那么就需要把这些字符进行转义，以另一种方式抒写，以相同的形式展现。</p>
<p>在HTML中，这些字符可称为HTML Entity，即HTML 字符实体。一个HTML Entity都含有2种转义格式：Entity Name 和 Entity Number。</p>
<h4 id="Entity-Name"><a href="#Entity-Name" class="headerlink" title="Entity Name"></a>Entity Name</h4><p><strong>格式</strong>： &entityName; </p>
<p><strong>说明</strong>：”<strong>&amp;</strong>“开头，”<strong>;</strong>“结尾，以<strong>语义</strong>的形式描述字符。如字符”&lt;”，英文名称为”less than”，Entity Name为”&lt;”，取自”less than”2个单词的首字母。</p>
<h4 id="Entity-Number"><a href="#Entity-Number" class="headerlink" title="Entity Number"></a>Entity Number</h4><p><strong>格式</strong>： &#entityNumber; </p>
<p><strong>说明</strong>：”<strong>&amp;#</strong>“开头，”<strong>;</strong>“结尾，以<strong>编号</strong>的形式描述字符。此编号可以为十进制或十六进制(以”<strong>&amp;#x</strong>“开头)等数字格式。</p>
<p>比如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>I love to teach you <span class="symbol">&amp;lt;</span>HTML<span class="symbol">&amp;gt;</span>!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>效果如下</p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/3.png" style="zoom:80%;"></p>
<p>又比如 版权符号 的Entity Name为 <code>&amp;copy;</code></p>
<p>我们只要记住一些常用的转义符，比如说 <code>&amp;nbsp;</code> () 这代表了一个空格，在html中，如果我们直接打10个空格，那么页面中也只显示1个空格，但是如果打10个<code>&amp;nbsp</code>,那么就可以在页面中显示10个空格。</p>
<p>比如说这种情况，也需要用 <code>&amp;nbsp;</code></p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/4.png" style="zoom:80%;"></p>
<p>我们发现下一句句子的开头dicta 和iusto 两个词换行了，我们不希望它们在不同行，因此我们可以将它们之间的空格改为<code>&amp;nbsp;</code>，出来的效果如下：</p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/5.png" style="zoom:80%;"></p>
<p>更多字符对照表可以参考：</p>
<p><a href="https://dev.w3.org/html5/html-author/charref" target="_blank" rel="noopener">https://dev.w3.org/html5/html-author/charref</a></p>
<p>或者</p>
<p><a href="https://www.freeformatter.com/html-entities.html" target="_blank" rel="noopener">https://www.freeformatter.com/html-entities.html</a></p>
<h3 id="Hyperlinks"><a href="#Hyperlinks" class="headerlink" title="Hyperlinks"></a>Hyperlinks</h3><p>如果我们要在文本中显示超链接，可以使用<code>&lt;a href=&quot;&quot;&gt;&lt;/a&gt;</code> 这一对标签。在这个标签中我们既可以使用文字，也可以使用图片。当我们点击的时候就会跳转到我们定位的网页上去。</p>
<p><code>href = &quot;&quot;</code> 中填写的是网页的相对地址或者是绝对地址。这里举的例子是相对地址，我们链接到的网站时company文件夹下的about页</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"company/about.html"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/1.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>同时，我们也可以在about页面上加一个链接到index页的链接</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"../index.html"</span>&gt;</span>Home Page<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>上面用的都是相对URL，那么我们怎么用绝对URL来链接呢？</p>
<p>就是把斜杠放在最前面，如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/index.html"</span>&gt;</span>Home Page<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>除了链接到网页之外，我们也可以链接到图片，比如：</p>
<p><code>&lt;a href=&quot;images/1.jpg&quot; download&gt; Coffee Shop &lt;/a&gt;</code></p>
<p> 那么，我们怎么做一个页内链接呢？我们可以在标签后面加一个 <code>id = &#39;section-css&#39;</code>,然后定义一个超链接 <code>&lt;a href=&quot;#section-css&quot;&gt;CSS&lt;/a&gt;</code> ,这样当我们点击CSS的时候，就会自动跳到 <code>id=section-css</code>的那个标签去了。</p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/6.png" style="zoom:80%;"></p>
<p>那么我们读完以后，怎么回到页首去？</p>
<p>在#后面什么都不加即可</p>
<p><code>&lt;a href=&quot;#&quot;&gt;Jump to the top&lt;/a&gt;</code></p>
<p>如果我们要链接到谷歌的官网，那么我们该怎么写？直接写网址即可</p>
<p><code>&lt;a href=&quot;https://google.com&quot;&gt;Google&lt;/a&gt;</code></p>
<p>但是如果这样写，是在原来的页面直接跳转的，因此如果我们希望链接能新建一页，我们可以这样写：</p>
<p><code>&lt;a href=&quot;https://google.com&quot; target =&quot;_blank&quot;&gt;Google&lt;/a&gt;</code></p>
<p>我们还可以利用 <code>&lt;a&gt;</code> 标签来定位自己的邮箱</p>
<p><code>&lt;a href=&quot;mailto:10195501423@stu.ecnu.edu.cn&quot;&gt;Email Me&lt;/a&gt;</code>‘</p>
<p>这样，点击Email Me的时候，就会跳转到给我发送邮件的页面。</p>
<h3 id="Images"><a href="#Images" class="headerlink" title="Images"></a>Images</h3><p>如果要插入图片，我们可以使用 <code>&lt;img&gt;</code>标签，注意<code>&lt;img&gt;</code>标签是相对的。</p>
<p><code>&lt;img src=&quot;images/coffee.jpg&quot; alt=&quot;Latte on a table&quot;&gt;</code></p>
<p>其中，src代表了图片的路径，alt属性是当图片因故障显示不出来的时候展示的替换文字。</p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/7.png" style="zoom:80%;"></p>
<p>我们可以用 CSS 来对我们照片的大小等进行修改。比如说上图，我设置了两个图片的属性：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">  img &#123;</span><br><span class="line">    width: 300px;</span><br><span class="line">    border-radius: 10px;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>其中width代表宽度而border-radius代表了边角弧形的半径。这里我设置了10px。因此看起来图片的四个边角是圆形弧线的。</p>
<p>但是我如果设置 宽和高都是300px，那么图片就会形变失真，如下图所示：</p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/9.png" style="zoom:80%;"></p>
<p>为了解决这个问题，我们可以再加一行代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">   img &#123;</span><br><span class="line">     width: 300px;</span><br><span class="line">     height: 300px;</span><br><span class="line">     object-fit: cover;</span><br><span class="line">     border-radius: 10px;</span><br><span class="line">   &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这样虽然会导致裁切掉了图片的一部分，但是图片中的物体都不会发生形变，如下图所示：</p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/10.png" style="zoom:80%;"></p>
<p><code>object-fit</code>属性：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">值</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>fill</code></td>
<td style="text-align:left">默认，不保证保持原有的比例，内容拉伸填充整个内容容器。</td>
</tr>
<tr>
<td style="text-align:left"><code>contain</code></td>
<td style="text-align:left">保持原有尺寸比例。内容被缩放。</td>
</tr>
<tr>
<td style="text-align:left"><code>cover</code></td>
<td style="text-align:left">保持原有尺寸比例。但部分内容可能被剪切。</td>
</tr>
<tr>
<td style="text-align:left"><code>none</code></td>
<td style="text-align:left">保留原有元素内容的长度和宽度，也就是说内容不会被重置。</td>
</tr>
<tr>
<td style="text-align:left"><code>scale-down</code></td>
<td style="text-align:left">保持原有尺寸比例。内容的尺寸与 none 或 contain 中的一个相同，取决于它们两个之间谁得到的对象尺寸会更小一些。</td>
</tr>
</tbody>
</table>
</div>
<h3 id="Video-and-Audio"><a href="#Video-and-Audio" class="headerlink" title="Video and Audio"></a>Video and Audio</h3><p>如果我们要在页面中插入视频音频，我们可以使用 <code>&lt;video&gt;&lt;/video&gt;</code>和<code>&lt;audio&gt;&lt;/audio&gt;</code>标签。</p>
<p>比如：</p>
<p><code>&lt;video src=&quot;videos/ocean.mp4&quot; controls autoplay loop&gt;您的浏览器不支持播放视频&lt;/video&gt;</code></p>
<p>在标签中我们还添加了一些属性：</p>
<p>controls  属性供添加播放、暂停和音量控件</p>
<p>autoplay 打开网页视频就会自动播放</p>
<p>loop        视频循环播放</p>
<p>当我们的浏览器不支持播放视频的时候，就会显示video标签中的文字了。</p>
<p>同理，音频也是一样的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;audio controls&gt;</span><br><span class="line">  &lt;source src&#x3D;&quot;horse.ogg&quot; type&#x3D;&quot;audio&#x2F;ogg&quot;&gt;</span><br><span class="line">  &lt;source src&#x3D;&quot;horse.mp3&quot; type&#x3D;&quot;audio&#x2F;mpeg&quot;&gt;</span><br><span class="line">您的浏览器不支持 audio 元素。</span><br><span class="line">&lt;&#x2F;audio&gt;</span><br></pre></td></tr></table></figure>
<p><code>&lt;audio&gt;</code>元素允许使用多个  <code>&lt;source&gt;</code>元素.  <code>&lt;source&gt;</code> 元素可以链接不同的音频文件，浏览器将使用第一个支持的音频文件</p>
<h3 id="Lists"><a href="#Lists" class="headerlink" title="Lists"></a>Lists</h3><p>一共有三种列表。</p>
<h4 id="ul"><a href="#ul" class="headerlink" title="ul"></a>ul</h4><p>这种是unordered list的简称，也就是列表中的元素是没有顺序的。常常用在导航栏中</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>About me<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>Courses<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>Subscribe<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>Contact me<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>如果我们不利用任何CSS，那么出来的效果如下：</p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/11.png"></p>
<p>我们可以利用CSS对前面的标记符进行修改，可以让其变成方块或者隐藏</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ul</span> &#123;</span><br><span class="line">      <span class="attribute">list-style-type</span>: <span class="built_in">none</span>(square);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>此外，我们还可以做嵌套的列表,效果如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span>About me<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span>Courses</span><br><span class="line">     <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">li</span>&gt;</span>HTML<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">li</span>&gt;</span>JavaScript<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">li</span>&gt;</span>Git<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span>Subscribe<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span>Contact me<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/12.png"></p>
<h4 id="ol"><a href="#ol" class="headerlink" title="ol"></a>ol</h4><p>ol是ordered list的缩写，也就是有序列表</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>Preheat the oven.<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>Place the ingridents on the crust.<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>put the pizza in the oven for 20 minutes.<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/13.png"></p>
<h4 id="dl"><a href="#dl" class="headerlink" title="dl"></a>dl</h4><p>dl 是 description list的缩写，顾名思义，就是对某些标签进行描述的列表。</p>
<p>在dl中， dt代表了term，也就是被描述的对象；dd代表了detail，也就是描述term的具体信息。 </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dl</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dt</span>&gt;</span>HTML<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dd</span>&gt;</span>Hypertext Markup Language<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dt</span>&gt;</span>CSS<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dd</span>&gt;</span>Cascading Stylesheets<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/14.png"></p>
<p>对于一个term可以有多个detail信息</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dl</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dt</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dd</span>&gt;</span>The Ultimate HTML and CSS Course<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dt</span>&gt;</span>Author<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dd</span>&gt;</span>Mosh Hamedani<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dt</span>&gt;</span>Skills<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dd</span>&gt;</span>HTML<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dd</span>&gt;</span>CSS<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dd</span>&gt;</span>Responsive Design<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dd</span>&gt;</span>Search Engine Optimisation<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/15.png"></p>
<h3 id="Tables"><a href="#Tables" class="headerlink" title="Tables"></a>Tables</h3><p>如果我们要在页面中使用表格，可以使用 <code>&lt;table&gt;&lt;/table&gt;</code> 标签。</p>
<p>最简单的表格可以这样表示：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>Marketing<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>$100<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>Accounting<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>$200<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/16.png"></p>
<p>但是这样一点都不像个表格，我们可以对其添加边框：这里，我们对table和td都进行css操作，否则就只有外边框，没有内边框。</p>
<p>在border属性，我们要设置3个值，分别是边框的宽度、边框的实虚(solid,dashed)、边框的颜色</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">     table,</span><br><span class="line">     td &#123;</span><br><span class="line">       border: 1px solid grey;</span><br><span class="line">     &#125;</span><br><span class="line">   <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/17.png"></p>
<p>但是这样的表格不是很好看，我们需要的并不是这种中空的边框，而且我希望表格中的文字距离边框远一点，那么我们可以这样来设置：</p>
<p>其中， border-collapse属性是将边框取消中空。padding则是设置表格中的文字和边框的距离</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">  table,</span><br><span class="line">  td &#123;</span><br><span class="line">    border: 1px solid grey;</span><br><span class="line">    border-collapse: collapse;</span><br><span class="line">    padding: 5px;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/18.png"></p>
<p>如果我们要给表格设置一个头部，那么我们可以用 <code>th</code>标签：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>Category<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>Amount<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>Marketing<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>$100<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>Accounting<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>$200<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/19.png"></p>
<p>但是这样来定义一个表格，还不是特别完善，我们需要再用 <code>&lt;thead&gt;</code>和<code>&lt;tbody&gt;</code>来标明 ：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">th</span>&gt;</span>Category<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">th</span>&gt;</span>Amount<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>Marketing<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>$100<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>Accounting<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>$200<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>如果我想合并单元格，我们可以加一个<code>colspan</code>属性</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">th</span> <span class="attr">colspan</span>=<span class="string">"2"</span>&gt;</span>Expenses<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/20.png"></p>
<p>除了 <code>thead</code>,<code>tbody</code>之外，我们还可以有 <code>tfoot</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tfoot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">th</span>&gt;</span>Total<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">th</span>&gt;</span>$300<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tfoot</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/21.png" style="zoom:80%;"></p>
<p>thead,tfoot 和tbody之间有两个区别：</p>
<ol>
<li>前者都是加粗的，后者没有</li>
<li>前者是居中的，后者是向左对齐的</li>
</ol>
<p>如果我们要设置tfoot向左对齐，可以用css：只要在text-align中设置left就行了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tfoot &#123;</span><br><span class="line">      text-align: left;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="Containers"><a href="#Containers" class="headerlink" title="Containers"></a>Containers</h3><p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/22.png" style="zoom:80%;"></p>
<p>container可以简单理解为一块区域，比如说Adobe这个网站的Navbar就是一个container，一个网站就是由许许多多的container组合而成的</p>
<p>Container可以有两个标签：<code>div</code>和<code>span</code>,其中<code>div</code> 代表了一整块区域，<code>span</code>则是行内部分区域</p>
<p>比如说：</p>
<p>这里我划分了两个<code>div</code>,然后 在CSS中设置了每个div的宽度为300px，背景颜色为金色</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.product</span> &#123;</span></span><br><span class="line">      background-color: gold;</span><br><span class="line">      width: 300px;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"product"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">      Lorem ipsum dolor, sit amet consectetur adipisicing elit. Magnam,</span><br><span class="line">      expedita.</span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>Link<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"product"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">      Lorem ipsum dolor, sit amet consectetur adipisicing elit. Magnam,</span><br><span class="line">      expedita.</span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>Link<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/23.png" style="zoom:80%;"></p>
<p>div是对整一块区域进行高亮操作，那么我如果想行内高亮，怎么办？</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-class">.highlight</span> &#123;</span></span><br><span class="line">        background-color: gold;</span><br><span class="line">      &#125; </span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"highlight"</span>&gt;</span>Lorem<span class="tag">&lt;/<span class="name">span</span>&gt;</span> ipsum dolor, sit amet consectetur</span><br><span class="line">     adipisicing elit. Magnam, expedita.</span><br><span class="line">   <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>Link<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/24.png" style="zoom:80%;"></p>
<p>还可以使用 <code>&lt;mark&gt;</code>元素来包裹我们想要高亮的文字：</p>
<p><code>&lt;mark&gt;lorem&lt;/mark&gt;</code>,默认高亮颜色为黄色</p>
<h3 id="Semantic-Elements"><a href="#Semantic-Elements" class="headerlink" title="Semantic Elements"></a>Semantic Elements</h3><p>Sementic顾名思义适合语义相关的元素。比如说：</p>
<p><code>&lt;artical&gt;</code> <code>&lt;figure&gt;</code> <code>&lt;mark&gt;</code> <code>&lt;time&gt;</code></p>
<p>比如，对于一块文字，我们可以用<code>&lt;artical&gt;</code>来替换 <code>&lt;div&gt;</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">artical</span> <span class="attr">class</span>=<span class="string">"artical"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">       Lorem ipsum dolor, sit amet consectetur adipisicing elit. Magnam,</span><br><span class="line">       expedita.</span><br><span class="line">     <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>Link<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artical</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>这里的artical不一定真的要是artical，而可以是任何独立的内容：帖子，评论， 反馈，产品卡等：</p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/25.png" style="zoom:80%;"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">artical</span> <span class="attr">class</span>=<span class="string">"artical"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">p</span>&gt;</span>Published<span class="tag">&lt;<span class="name">time</span> <span class="attr">datetime</span>=<span class="string">"2021-01-01 17:00"</span>&gt;</span> </span><br><span class="line">       January 1 2021 05:00 pm<span class="tag">&lt;/<span class="name">time</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="comment">&lt;!--日期时间信息，24小时制--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">mark</span>&gt;</span>lorem<span class="tag">&lt;/<span class="name">mark</span>&gt;</span> ipsum dolor, </span><br><span class="line">       sit amet consectetur adipisicing elit. Magnam,expedita.</span><br><span class="line">   <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">figure</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/coffee.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">figcaption</span>&gt;</span>My coffee this morning<span class="tag">&lt;/<span class="name">figcaption</span>&gt;</span><span class="comment">&lt;!--图片的描述信息--&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">figure</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">artical</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="Structuring-a-Web-Page"><a href="#Structuring-a-Web-Page" class="headerlink" title="Structuring a Web Page"></a>Structuring a Web Page</h3><p>现在我们使用HTML元素快速写一个网站的架构：</p>
<p>这只是一个示范：</p>
<p>首先，页面中有 <code>&lt;header&gt;</code> <code>&lt;main&gt;</code> <code>&lt;footer&gt;</code> 这些标签。header是用来做介绍，放置导航栏的。 main是页面的主题部分，一个html文件只有一个main元素，里面可以放一些<code>&lt;section&gt;</code>之类的模块。footer的作用和header类似</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">nav</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">main</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">section</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Products<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">article</span>&gt;</span><span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">article</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">article</span>&gt;</span><span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">section</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Testimonial<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">article</span>&gt;</span><span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">article</span>&gt;</span><span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">nav</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">ul</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>当然，header和footer并不是唯一的， section元素也可以在artical元素当中。完全是看我们想要表达什么。要以功能为主导</p>
<h3 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h3><p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/26.png"></p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/27.png"></p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/28.png"></p>
<h2 id="CSS-Basics"><a href="#CSS-Basics" class="headerlink" title="CSS Basics"></a>CSS Basics</h2><h3 id="Providing-CSS"><a href="#Providing-CSS" class="headerlink" title="Providing CSS"></a>Providing CSS</h3><p>我们一共有三种方法实现CSS</p>
<h4 id="Embedded-stylesheets"><a href="#Embedded-stylesheets" class="headerlink" title="Embedded stylesheets"></a>Embedded stylesheets</h4><p>顾名思义，就是嵌入式的CSS，这也是我们刚才一直在写的CSS：在head里面使用 <code>&lt;style&gt;</code>元素</p>
<h4 id="External-stylesheets"><a href="#External-stylesheets" class="headerlink" title="External stylesheets"></a>External stylesheets</h4><p>外部的CSS，如果我们要操纵很多html页面，但我们不希望在每一个页面中都写重复的代码，因此我们可以新建一个CSS文件，然后用链接引用进来。</p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/29.png"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"style.css"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem, ipsum dolor sit amet consectetur adipisicing elit.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem, ipsum dolor sit amet consectetur adipisicing elit.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/30.png"></p>
<p>这样的操作和直接在head里面写 style是一样的。</p>
<p>值得注意的是，嵌入的CSS优先级高于引用的CSS文件，比如，我在这里链接了 style.css文件，但是又在 style元素当中对p的文本颜色定义成灰色，那么最终网页会显示灰色的文字。</p>
<h4 id="Inline-styles"><a href="#Inline-styles" class="headerlink" title="Inline styles"></a>Inline styles</h4><p>这种CSS比较少用，而且也不推荐用，也就是在标签里面添加style属性：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"color: blue; font-weight: bold"</span>&gt;</span></span><br><span class="line">     Lorem, ipsum dolor sit amet consectetur adipisicing elit.</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>与其这样，我们不如在p这里定义一个id,然后在 <code>&lt;style&gt;</code> 中对齐进行定义，比如：</p>
<p>注意，对id进行定位，需要用 <code>#</code>  对class进行定位，需要用 . </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">   <span class="selector-id">#first</span> &#123;</span></span><br><span class="line">     color: blue;</span><br><span class="line">     font-weight: bold;</span><br><span class="line">   &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"first"</span> &gt;</span></span><br><span class="line">     Lorem, ipsum dolor sit amet consectetur adipisicing elit.</span><br><span class="line">   <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem, ipsum dolor sit amet consectetur adipisicing elit.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="Normalizing-CSS"><a href="#Normalizing-CSS" class="headerlink" title="Normalizing CSS"></a>Normalizing CSS</h3><p>因为我们有很多浏览器，不同的浏览器渲染CSS元素也是不一样的，为了解决这个问题，我们可以下载 <code>normalize.css</code> 文件，并将其引用到我们的网页中去。 下载方式是：<code>npm install normalize.css</code></p>
<p>这个<code>normalize.css</code> 文件规定了一些基本的信息，比如说html中的行高之类的：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1.15</span>; <span class="comment">/* 1 */</span></span><br><span class="line">  <span class="attribute">-webkit-text-size-adjust</span>: <span class="number">100%</span>; <span class="comment">/* 2 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们只需要在html文件中添加<code>&lt;link rel=&quot;stylesheet&quot; href=&quot;css/normalize.css&quot; /&gt;</code> 就可以使用 这个normalize.css了，注意，这里面设置的页边距为0px,如果我们要看的舒服一点，那么可以在 <code>&lt;style&gt;</code>中设置 <code>margin: 10px;</code></p>
<p>接下来，我们所有的html文件都将使用这个 <code>normalize.css</code>文件</p>
<h3 id="Basic-Selectors"><a href="#Basic-Selectors" class="headerlink" title="Basic Selectors"></a>Basic Selectors</h3><p>在CSS中，我们可以筛选元素的 Type, ID, Class 和 Attribute，并制作相应的样式</p>
<p>Selector 就是 stylesheets里面的 <code>#first</code>, .highlight, body 这类东西。它们的作用就是选择对应的元素。</p>
<p>选择Type，什么都不用加，比如说 <code>body {...;}</code></p>
<p>选择ID，需要在ID前加一个#，比如说 <code>#products{...;}</code></p>
<p>选择Class，需要在class名字前加一个 . 比如说:<code>.product{}</code> </p>
<p>id 和 class之间的区别： <strong>一个 id只能对应一个 element </strong>，假如你的页面里出现了两个ID那JS效果特性将出现逻辑错误，不知道依据哪个ID来改变其标签属性；但是一个多个elements可以拥有相同的class,选择class会对class中所有的元素都进行样式操作。</p>
<p>可以这样来理解： class可以理解为类，而ID可以理解为每个人独有的标签。</p>
<h4 id="attribute"><a href="#attribute" class="headerlink" title="attribute"></a>attribute</h4><p>选择 attribute 不太常用，需要在选择type的基础上使用方括号，在方括号中写上attribute的名称或者特定的值：比如我这里有一个链接  <code>&lt;a href=&quot;http://google.com&quot; target=&quot;_blank&quot;&gt;Google&lt;/a&gt;</code>，这里，target就是这个<code>&lt;a&gt;</code>的属性，但是还有其他的 <code>&lt;a&gt;</code> 没有这个属性。我就可以在css中这样写：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span><span class="selector-attr">[target=<span class="string">"_blank"</span>]</span>&#123;</span><br><span class="line">	<span class="attribute">color</span>: orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>或者定位href属性</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span><span class="selector-attr">[href=<span class="string">"https://google.com"</span>]</span>&#123;</span><br><span class="line">	<span class="attribute">color</span>: orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但是这样写，代码耦合性比较高，我们可以在定位href属性的时候使用模糊查找, 这样，只要href中有google出现，这个链接就会被渲染成黄色(有点类似于正则表达式）：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span><span class="selector-attr">[href*=<span class="string">"google"</span>]</span>&#123;</span><br><span class="line">	<span class="attribute">color</span>: orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们甚至可以对同一个属性进行多条件筛选</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span><span class="selector-attr">[href^=<span class="string">"https"</span>]</span><span class="selector-attr">[href$=<span class="string">"com"</span>]</span>&#123;</span><br><span class="line">	<span class="attribute">color</span>: orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其中 <code>^=https</code> 代表寻找以 <code>https</code> 开头的href属性； <code>$=&quot;com&quot;</code> 代表寻找以<code>com</code>结尾的href属性。</p>
<h3 id="Relational-Selectors"><a href="#Relational-Selectors" class="headerlink" title="Relational Selectors"></a>Relational Selectors</h3><p>刚才我们说的是最基本的选择器。我们还可以通过元素与元素之间的关系来进行选择。</p>
<p>比如现在body里面有这样两个元素：p是被包含在id=products的section元素当中的.</p>
<p>我们自然可以给p定一个class或者id然后进行选择，当然我们也可以通过id选择section元素中包含的p元素</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">id</span>=<span class="string">"products"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>语法很简单，我们首先选择 id=products 的元素，然后再跟上我们想要选择的元素 p，这样，包含在section中的所有p元素都会变成黄色</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#products</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果我们只希望选择第一个p元素，那么我们可以这样写：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#products</span> &gt; <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">section</span> <span class="attr">id</span>=<span class="string">"products"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artical</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">artical</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这样，这三句话中，只有第一句会变成黄色。</p>
<p>如果我们要选中第三句话，也就是紧邻着section的p元素。那么我们只需要把 &gt; 变成+</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#products</span> + <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果我们要选择 section之后所有的p元素，那么我们可以使用~</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#products</span> ~ <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/31.png"></p>
<p>Relational Selectors 有优点也有缺点。优点是能可以少写很多id，class；但是缺点就是比较脆弱——如果我修改了元素之间的相对位置，css很可能会就会失效。并且，使用Relational Selector 会比 Basic Selector更加慢一点：比如说 <code>#products ~ p{}</code> ， 它的搜寻模式是首先找到DOM中所有的p元素，然后看这个p元素是否在id=products的元素后面。那么如果一共有100个paragraph元素，但是只有一个paragraph是在section之后的，那么前面搜寻的99个paragraphs都浪费了。</p>
<p>因此使用relational selectors 的话，我们需要对元素的位置有十足的把握，否则选用basic selector更加保险</p>
<h3 id="Pseudo-class-Selectors"><a href="#Pseudo-class-Selectors" class="headerlink" title="Pseudo-class Selectors"></a>Pseudo-class Selectors</h3><p>现在我们来介绍 伪对象选择符。</p>
<h3 id="first-of-type-first-child"><a href="#first-of-type-first-child" class="headerlink" title="first-of-type/first-child"></a>first-of-type/first-child</h3><p>下面我来介绍几种用法，我们的html如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">article</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>如果我们想要选择第一行，我们可以这样写:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">artical</span>: <span class="selector-tag">first-child</span>&#123;</span><br><span class="line">	<span class="attribute">font-size</span>: <span class="number">140%</span>;</span><br><span class="line">	<span class="attribute">font-style</span>: italic;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>虽然这样写是可以将第一行paragraph元素修改为斜体的，但是这样的css是很脆弱的，因为如果在paragraph前面再加一个 <code>&lt;h2&gt;</code>，那变成斜体的就是 <code>&lt;h2&gt;</code>而不是<code>&lt;p&gt;</code>了。为了提高鲁棒性，我们可以将<code>first-child</code>改成<code>first-of-type</code> ，那么对于artical元素中的每一种type的第一个元素，都会进行修改。比如说：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">article</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Heading2<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/32.png"></p>
<p>但是我只想把第一个paragraph进行修改，那么我么可以这样写：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">article</span> <span class="selector-tag">p</span><span class="selector-pseudo">:first-of-type</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">140%</span>;</span><br><span class="line">  <span class="attribute">font-style</span>: italic;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果我们在 last-child 前面加一个p，而最后一个元素却是<code>&lt;a&gt;</code>，那么将不会选中任何元素</p>
<h4 id="nth-child"><a href="#nth-child" class="headerlink" title="nth-child"></a>nth-child</h4><p>现在我们希望对一个列表中的奇数位元素进行操作，比如说对于一个unordered list：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span>Item 1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span>Item 2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span>Item 3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span>Item 4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span>Item 5<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>我们要将奇数位的li选中，那么可以用 <code>nth-child</code> 这一个选择符。只要在括号里面写odd、even甚至是3n这种都可以</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ul</span> <span class="selector-tag">li</span><span class="selector-pseudo">:nth-child(odd)</span> &#123;<span class="comment">/*这里li和: 之间没有空格！*/</span></span><br><span class="line">  <span class="attribute">color</span>: deeppink;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="针对-lt-a-gt-伪对象选择符"><a href="#针对-lt-a-gt-伪对象选择符" class="headerlink" title="针对&lt;a&gt;伪对象选择符"></a>针对<code>&lt;a&gt;</code>伪对象选择符</h4><p> 比如说我现在有一个链接 <code>&lt;a href=&quot;https://whatever.com&quot;&gt;Link&lt;/a&gt;</code></p>
<p>我希望链接在点击的前后，变成我想要的蓝色。我们可以这样来写css:</p>
<p>其中，<code>:visited</code>代表了点击之后的样式；<code>:link</code> 代表所有的链接</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span> <span class="selector-pseudo">:visited</span>,</span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:link</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: dodgerblue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们还可以设置当鼠标移动到链接上和使用tab键锁定链接时的样式</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:focus</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: deeppink;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/33.png"></p>
<h3 id="Pesudo-element-Selectors"><a href="#Pesudo-element-Selectors" class="headerlink" title="Pesudo-element Selectors"></a>Pesudo-element Selectors</h3><p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/35.png"></p>
<h4 id="first-letter"><a href="#first-letter" class="headerlink" title="first-letter"></a>first-letter</h4><p>如果我们想要一段文字的第一个字加粗，最原始的方法可以用 <code>&lt;span class=&quot;...&quot;&gt;</code>来定位，但这显然过于繁琐，我们可以直接用 pesudo-element selectors</p>
<p>和pesudo-classes只需要用一个冒号不同，pesudo-element 需要用两个冒号，比如说：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">::first-letter</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">140%</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/34.png"></p>
<h4 id="first-line"><a href="#first-line" class="headerlink" title="first-line"></a>first-line</h4><p>同理，我们可以对p的第一行进行选择：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">::first-line</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>: orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="selection"><a href="#selection" class="headerlink" title="selection"></a>selection</h4><p>我们可以对文本中被选择的部分进行样式修改：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">::selection</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: deeppink;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/36.png"></p>
<p>值得注意的是我如果 写 <code>p::selection</code> 这样只会在 paragraph元素中起作用。如果我想在所有文字中都起作用，那么我们可以写 <code>::selection</code></p>
<h4 id="before-和-after"><a href="#before-和-after" class="headerlink" title="before 和 after"></a>before 和 after</h4><p>我们还可以利用before在文字前插入一些内容：</p>
<p>content后面可以是任何我们想要插入的东西；display则是这些内容的展示形式，可以是inline的也可以是block的，区别就在于是行内还是独占一行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">p::before &#123;</span><br><span class="line">  content: &quot;...&quot;;</span><br><span class="line">  display: block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/37.png"></p>
<p>同理，after就是在paragraph后面加上我们想要的内容</p>
<h3 id="Selectors-Specificity"><a href="#Selectors-Specificity" class="headerlink" title="Selectors Specificity"></a>Selectors Specificity</h3><p>当CSS选择器之间互相重复了，我们该选择哪一个？这时候我们就需要用到 Selectors Specificty(可以简单理解为权重)，下面是一个权重金字塔，越上面的权重越大。</p>
<p>比如在金字塔顶端的是ID，数量只能有一个；中层的是 Class和attribute，相同的class/attribute数量比较多；底层的是element，相同的数量最多。</p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/38.png"></p>
<p>比如说我们有一个 <code>h1</code> 元素</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1 id&#x3D;&quot;products&quot; class&#x3D;&quot;highlight&quot;&gt; Heading &lt;&#x2F;h1&gt;</span><br></pre></td></tr></table></figure>
<p>现在，我们来编写一个冲突的CSS</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: dodgerblue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.highlight</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: deeppink;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#products</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: orange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最终Heading显示的颜色为橙色。</p>
<p>如果去掉<code>#products</code> ，那么会显示为 深粉色</p>
<p>最后如果把 <code>.highlight</code> 去掉，则会显示为 宝蓝色</p>
<p>在vscode当中，我们只要将鼠标移到花括号前面的选择器，她就会自动显示出当前选择器的Specificity:</p>
<p>这是一个拥有三个元素的一维向量，id是第一位，class,attribute是第二位, element 是第三位。 比如说这里对的 <code>.highlight</code>,选择的是class，所以向量为 <code>(0,1,0)</code></p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/40.png"></p>
<p>又比如说我选择的是 <code>&lt;a&gt;</code>中的属性 <code>attribute</code>,那么这里面既有 element，又有attribute，因此向量为 <code>(0,1,1)</code>, 选择器权重的大小可以简单理解为向量中三位数的大小 如 011&gt;010&gt;001</p>
<p>如果我的选择器是这样的:</p>
<p><code>.highlight#products</code> 那么这个选择器的 specificity = (1,1,0)<br><code>a.highlight#products</code> 那么这个选择器的 specificity = (1,1,1)</p>
<p>请注意，选择器可以是嵌套的，比如我的html如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">artical</span> <span class="attr">class</span>=<span class="string">"featured"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">id</span>=<span class="string">"products"</span> <span class="attr">class</span>=<span class="string">"highlight"</span>&gt;</span>Heading<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">artical</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>而我的 css如下,其 specificity为(1,1,0):</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.featured</span> <span class="selector-id">#products</span>&#123;</span><br><span class="line">	<span class="attribute">color</span>: dodgerblue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但是请不要写出这种CSS！</p>
<p><code>html body #featured h2 #products.highlight{}</code></p>
<h4 id="important"><a href="#important" class="headerlink" title="!important"></a>!important</h4><p>如果，我们还是想让 <code>h1</code>这个选择器最优先，那么我们可以在里面的样式表后面添加 <code>! important</code>,但是请注意<code>!important</code>只作用于那一行样式，不作用于选择器中的其他样式。 比如说我这样来编写css</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: dodgerblue <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: yellow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.highlight</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: deeppink;</span><br><span class="line">  <span class="attribute">background-color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>那么最终的呈现效果就是，字体为蓝色(我们手动设置了h1优先，背景颜色为红色，因为class的specificity大于elements的)</p>
<p>但是，这样写会让css变得十分混乱因此我们不推荐这样写，而推荐通过叠加选择器的方式来增加权重</p>
<h3 id="Inheritance"><a href="#Inheritance" class="headerlink" title="Inheritance"></a>Inheritance</h3><p>什么是CSS中的继承？ 比如说我的html如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum <span class="tag">&lt;<span class="name">strong</span>&gt;</span>dolor<span class="tag">&lt;/<span class="name">strong</span>&gt;</span> sit amet.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>然后我的css如下：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: dodgerblue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果我们发现，整行文字都变成了宝蓝色。这是因为 strong元素继承了p元素的样式。因此我们没有必要再用strong选择器了</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">strong</span> &#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但是我们比较特立独行，我们希望 <code>&lt;strong&gt;</code>中的内容还是保持原来的样式，我们可以在strong选择器后面将该属性的值设置为 <code>initial</code> ：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">strong</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: initial;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意，继承并不适用于所有的属性，比如说border属性就不会继承(默认情况下),比如我的css如下：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">  <span class="attribute">color</span>: dodgerblue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/42.png"></p>
<p>因为如果这时候 strong元素继承了p元素的边框属性，那就会在dolor外面再画一个边框，很丑且没必要。但是如果我们硬要继承，也是可以的。只要在属性后面的值设为 <code>inherit</code> 即可我们可以这样修改css</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">strong</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: initial;</span><br><span class="line">	<span class="attribute">border</span>: inherit;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/43.png"></p>
<h3 id="Colors"><a href="#Colors" class="headerlink" title="Colors"></a>Colors</h3><p>在CSS中我们一共有四种方式来确定颜色：</p>
<h4 id="Named-colors"><a href="#Named-colors" class="headerlink" title="Named colors"></a>Named colors</h4><p>直接输颜色的名字即可， 比如 red ，blue，green等</p>
<h4 id="RGB，HSL-Hexadecimal"><a href="#RGB，HSL-Hexadecimal" class="headerlink" title="RGB，HSL, Hexadecimal"></a>RGB，HSL, Hexadecimal</h4><p>使用三原色RGB来定位颜色，也就是 一个长度为3的向量</p>
<p>我们可以使用 <a href="https://www.google.com/search?q=color+picker&amp;rlz=1C1SQJL_enUS890US890&amp;oq=color+picker&amp;aqs=chrome.0.0i433j0l2j0i395l7.2989j1j4&amp;sourceid=chrome&amp;ie=UTF-8" target="_blank" rel="noopener">color picker</a> 来选择一种颜色，他会给出这个颜色的RGB，HSL, Hexadecimal</p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/44.png"></p>
<p><strong>HSL</strong>是一种将RGB色彩模型中的点在圆柱坐标系中的表示法。这两种表示法试图做到比基于笛卡尔坐标系的几何结构RGB更加直观。</p>
<p>HSL即色相、饱和度、亮度（英语：Hue, Saturation, Lightness）。</p>
<p>色相（H）是色彩的基本属性，就是平常所说的颜色名称，如红色、黄色等。</p>
<p>饱和度（S）是指色彩的纯度，越高色彩越纯，低则逐渐变灰，取0-100%的数值。</p>
<p>明度（V），亮度（L），取0-100%</p>
<p>注意，如果使用RGB，或者HSL 要这样写：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">	<span class="attribute">background-color</span>: <span class="built_in">rgb</span>(<span class="number">34</span>,<span class="number">230</span>,<span class="number">86</span>);</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">hsl</span>(<span class="number">136</span>,<span class="number">79%</span>,<span class="number">52%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> 此外，如果我需要用到透明度，我们可以用 <code>rgba</code>或者 <code>hsla</code> ，然后在加上第四个参数，范围是0-1,代表了颜色的透明度</p>
<h3 id="Gradients"><a href="#Gradients" class="headerlink" title="Gradients"></a>Gradients</h3><p>现在，我们来学习渐变。 </p>
<h4 id="线性渐变"><a href="#线性渐变" class="headerlink" title="线性渐变"></a>线性渐变</h4><p>渐变很简单，我们这样写 css就可以了：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(dodgerblue,yellow)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/45.png"></p>
<p>我们可以加一个参数来改变渐变色的方向：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(to right,dodgerblue,yellow)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/46.png"></p>
<p>甚至是斜向下渐变</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(to bottom right, dodgerblue, yellow);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/47.png"></p>
<p>当然，可以把第一个参数替换成角度，比如：<code>background: linear-gradient(45deg, dodgerblue, yellow);</code></p>
<p>其实渐变色可以不止两个。我们再加一个颜色达到三色渐变：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">background: linear-gradient(to bottom right, dodgerblue, yellow,tomato);</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/48.png"></p>
<h4 id="辐射渐变"><a href="#辐射渐变" class="headerlink" title="辐射渐变"></a>辐射渐变</h4><p>除了线性渐变之外，我们还可以有辐射渐变</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">radial-gradient</span>(white, yellow);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/49.png"></p>
<p>我们发现中间是白色，外部是黄色。</p>
<p>我们可以通过第一个参数来调整中间白色的圆的位置：</p>
<p><code>background: radial-gradient(circle at top left,white, yellow);</code></p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/50.png"></p>
<p>我们可以使用 <a href="https://cssgradient.io/" target="_blank" rel="noopener">cssgradient</a> 这个网站来搭配我们的渐变色</p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/51.png"></p>
<p>调配好后，我们只需要复制文本框中的代码即可。 注意，第一行的 background只有一个颜色，是为了哪些无法显示渐变的浏览器配备的。</p>
<h3 id="Borders"><a href="#Borders" class="headerlink" title="Borders"></a>Borders</h3><p>border有三个参数： 宽度、表现形式、颜色</p>
<p>其中表现形式常用的有： solid(实线)， dotted(点)，dashed(虚线)</p>
<p>我们还可以对边框的每一条边进行操作</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">600px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background</span>: dodgerblue;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">10px</span> dashed royalblue;</span><br><span class="line">  <span class="attribute">border-top</span>: <span class="number">20px</span> solid royalblue;</span><br><span class="line">  <span class="attribute">border-bottom</span>:...;</span><br><span class="line">  <span class="attribute">border-right</span>:...;</span><br><span class="line">  <span class="attribute">border-left</span>:...;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但是请注意，这些边框的放置顺序是会向上覆盖的。所以我们要掌握好不同边的放置关系</p>
<p>当然我们也可以这样来设置边框的宽度,使用border-width这个属性，顺序依次是上右下左，是顺时针走向的</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">600px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background</span>: dodgerblue;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">10px</span> dashed royalblue;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">10px</span> <span class="number">20px</span> <span class="number">10px</span> <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当 border-width后面只有两个参数的时候，等价于四个参数，也就是说两个参数是四个参数的缩写</p>
<p>当border-width后面只有一个参数的时候，css就会把这个参数应用在所有的边上</p>
<p>同理，对 <code>border-style,border-color</code>也是这样用的。</p>
<h4 id="border-radius"><a href="#border-radius" class="headerlink" title="border-radius"></a>border-radius</h4><p>顾名思义就是边框的弧度，值得注意的是，当我这样编写css的时候，最终获得的图是一个圆形</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background</span>: dodgerblue;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">10px</span> dashed royalblue;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们可以去这个网站：<a href="https://css-tricks.com/the-shapes-of-css/" target="_blank" rel="noopener">the-shapes-of-css</a> 去找其他形状是怎么画出来的，比较全。</p>
<h3 id="Shadows"><a href="#Shadows" class="headerlink" title="Shadows"></a>Shadows</h3><p>shadows就是给我们的图形添加阴影。我们可以用 <code>box-shadow</code>这个属性</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background</span>: dodgerblue;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">10px</span> <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>属性中的第一个参数是作用在左右边框上的，正数代表在右边边框，负数代表在左边边框；第二个参数是作用在上下边框上的，正数代表了下边框，负数代表了上边框。比如说 10px,10px就是左下边框有阴影</p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/52.png"></p>
<p>当然，这个属性不止有两个参数</p>
<p>我们可以在后面加上 我们希望的阴影的颜色 比如 grey，还可以加上一个柔光的效果，比如说：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background</span>: dodgerblue;</span><br><span class="line">  <span class="attribute">box-shadow</span>:  <span class="number">10px</span> <span class="number">10px</span> <span class="number">10px</span> grey;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/53.png"></p>
<p>如果我们要达到一个垂直投影的效果，可以把box-shadow改成 <code>0 0 30px grey</code></p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/54.png"></p>
<h4 id="text-shadow"><a href="#text-shadow" class="headerlink" title="text-shadow"></a>text-shadow</h4><p>我们对文字也可以用shadow，比如说：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">3px</span> <span class="number">3px</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/55.png"></p>
<p>选择透明度为0.2，和背景色最能融合。</p>
<h3 id="Summary-1"><a href="#Summary-1" class="headerlink" title="Summary"></a>Summary</h3><p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/56.png"></p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/57.png"></p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/58.png"></p>
<h3 id="Cheat-Sheet"><a href="#Cheat-Sheet" class="headerlink" title="Cheat Sheet"></a>Cheat Sheet</h3><p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/59.png"></p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/60.png"></p>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/61.png"></p>
<h3 id="Exercise"><a href="#Exercise" class="headerlink" title="Exercise"></a>Exercise</h3><p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/62.png"></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">table</span>,</span><br><span class="line"><span class="selector-tag">td</span>,</span><br><span class="line"><span class="selector-tag">th</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#c4dcf3</span>;</span><br><span class="line">  <span class="attribute">border-left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border-right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border-collapse</span>: collapse;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">thead</span>,<span class="selector-tag">tfoot</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#427fef</span>;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">tbody</span> <span class="selector-tag">tr</span><span class="selector-pseudo">:nth-child(odd)</span>&#123;</span><br><span class="line">  <span class="attribute">background-color</span>:<span class="number">#eef7ff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">tfoot</span>&#123;</span><br><span class="line">  <span class="attribute">text-align</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们看到，这个表格中间的cell分割线是没有的，这可以通过设置 <code>border-left: 0;</code>以及 <code>border-right:0;</code> 来实现</p>
<p>表格代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">th</span>&gt;</span>Country<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">th</span>&gt;</span>OrderID<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">th</span>&gt;</span>Order Amount<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>USA<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>1000<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>$1300<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>USA<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>1001<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>$700<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>CA<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>1002<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>$2000<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>CA<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>1003<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>$1000<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tfoot</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span> <span class="attr">colspan</span>=<span class="string">"2"</span>&gt;</span>Total<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>$5000<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tfoot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/25/HTMLandCSS%E5%9F%BA%E7%A1%801/63.png"></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">height</span>:<span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: tomato;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">10px</span> <span class="number">10px</span> lightgrey;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">  <span class="attribute">margin</span>:<span class="number">10px</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个比较简单</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2021/01/22/malloc-lab/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/22/malloc-lab/" class="post-title-link" itemprop="url">malloc_lab</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-22 16:10:40" itemprop="dateCreated datePublished" datetime="2021-01-22T16:10:40+08:00">2021-01-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-01-31 21:23:20" itemprop="dateModified" datetime="2021-01-31T21:23:20+08:00">2021-01-31</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="malloc-lab"><a href="#malloc-lab" class="headerlink" title="malloc lab"></a>malloc lab</h1><h2 id="隐式空闲链表-书本"><a href="#隐式空闲链表-书本" class="headerlink" title="隐式空闲链表(书本)"></a>隐式空闲链表(书本)</h2><h3 id="基本设计"><a href="#基本设计" class="headerlink" title="基本设计"></a>基本设计</h3><p>在博客<a href="https://jasonxqh.github.io/2020/12/01/CSAPP动态内存分配/">CSAPP动态内存分配</a> 中，我们已经详细介绍了隐式空闲链表的分配原理了。那么我们这次就来手动实现一个简单的分配器</p>
<p>首先我们来介绍一下分配器需要输出给应用程序的三个函数： </p>
<p><code>extern int mm_init(void)</code>  这个函数的作用是初始化分配器，如果成功，那么就返回0；否则就返回-1</p>
<p><code>extern void *mm_malloc(size_t size)</code>  这个函数就是分配空间</p>
<p><code>extern void mm_free(void *ptr)</code>    这个函数是释放空间</p>
<p>我们要申请的块格式如下，具有头部和尾部，最小的块大小为16字节：</p>
<p><img src="/2021/01/22/malloc-lab/1.png" style="zoom:80%;"></p>
<p>整一个隐式空闲链表如下图所示：</p>
<p><img src="/2021/01/22/malloc-lab/2.png" style="zoom:80%;"></p>
<p>第一个字是一个双字边界对齐的不使用的填充字。填充后面紧跟着一个特殊的序言块。这是一个8字节的已分配块，只由头部和尾部组成。序言块是在初始化的时候创建的，并且是永不释放的。在序言块的后面紧跟着的是零个或者多个由mallock或者free调用创建的普通块。在结尾处，是一个大小为0的已分配块，只由一个头部组成。</p>
<p>序言块和结尾块是一种消除合并时边界条件的技巧。</p>
<h3 id="宏介绍"><a href="#宏介绍" class="headerlink" title="宏介绍"></a>宏介绍</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ALIGNMENT 8<span class="comment">//首先是ALIGNMENT，也就是我们要8字节对齐，向8的倍数舍入。</span></span></span><br><span class="line"><span class="comment">/* rounds up to the nearest multiple of ALIGNMENT */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ALIGN(size) (((size) + (ALIGNMENT - 1)) &amp; ~0x7)</span></span><br><span class="line"><span class="comment">//这是为size找到比它大又是最小的8的倍数</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SIZE_T_SIZE (ALIGN(sizeof(size_t)))</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> WSIZE 4				<span class="comment">//单字长度</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DSIZE 8             <span class="comment">/*Double word size*/</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CHUNKSIZE (1 &lt;&lt; 12) <span class="comment">/*the page size in bytes is 4K*/</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX(x, y) ((x) &gt; (y) ? (x) : (y))<span class="comment">//两个数中取最大值</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PACK(size, alloc) ((size) | (alloc)) <span class="comment">//将分配大小和标记位合并</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GET(p) (*(unsigned int *)(p)) <span class="comment">//读取和返回参数p引用的字</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PUT(p, val) (*(unsigned int *)(p) = (val))<span class="comment">//将val存放在p指向的字中</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GET_SIZE(p) (GET(p) &amp; ~0x7)<span class="comment">// 从地址p处的头部或者脚部返回大小</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GET_ALLOC(p) (GET(p) &amp; 0x1)<span class="comment">// 返回已分配位</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> HDRP(bp) ((char *)(bp)-WSIZE)<span class="comment">//给定块指针，返回它的头部指针</span></span></span><br><span class="line"><span class="comment">//此bp是从有效载荷开始的，因此指向块的头部，得减去一个4字节</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> FTRP(bp) ((char *)(bp) + GET_SIZE(HDRP(bp)) - DSIZE)<span class="comment">//给定快指针，返回它的脚部指针</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NEXT_BLKP(bp) ((char *)(bp) + GET_SIZE(((char *)(bp)-WSIZE)))</span></span><br><span class="line"><span class="comment">//下一个块的有效载荷处</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PREV_BLKP(bp) ((char *)(bp)-GET_SIZE(((char *)(bp)-DSIZE)))</span></span><br><span class="line"><span class="comment">//指向前面的块的块指针</span></span><br></pre></td></tr></table></figure>
<h3 id="mm-init"><a href="#mm-init" class="headerlink" title="mm_init"></a>mm_init</h3><p>mm_init函数从内存系统得到4个字，并将其初始化，创建一个<strong>空的空闲链表</strong>。然后它调用extend_heap函数。这个函数将堆扩展<code>CHUNKSIZE</code> 字节，并且创建初始的空闲块。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">mm_init</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ((heap_listp = mem_sbrk(<span class="number">4</span> * WSIZE)) == (<span class="keyword">void</span> *)<span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    PUT(heap_listp, <span class="number">0</span>); <span class="comment">//哨头</span></span><br><span class="line">    PUT(heap_listp + (<span class="number">1</span> * WSIZE), PACK(DSIZE, <span class="number">1</span>));</span><br><span class="line">    <span class="comment">//序言头块，在此地址上写上块大小的数据</span></span><br><span class="line">    PUT(heap_listp + (<span class="number">2</span> * WSIZE), PACK(DSIZE, <span class="number">1</span>));</span><br><span class="line">    <span class="comment">//序言尾块，在此地址上写上块大小的数据</span></span><br><span class="line">    PUT(heap_listp + (<span class="number">3</span> * WSIZE), PACK(<span class="number">0</span>, <span class="number">1</span>)); <span class="comment">//结束块</span></span><br><span class="line">    heap_listp += (<span class="number">2</span> * WSIZE);</span><br><span class="line">    <span class="comment">// 为我们的链表创造CHUNKSIZE的空间</span></span><br><span class="line">    <span class="keyword">if</span> (extend_heap(CHUNKSIZE / WSIZE) == <span class="literal">NULL</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>现在，分配器已经初始化了，并且准备好接受来自应用的分配和释放请求</p>
<h3 id="extend-heap"><a href="#extend-heap" class="headerlink" title="extend_heap"></a>extend_heap</h3><p>这个函数当堆被初始化的时候或者当<code>mm_malloc</code> 不能找到一个合适的分配块的时候。为了保持对齐，extend_heap会将其请求大小向上舍入为最接近的2字(8字节)的倍数，然后向内存系统请求额外的堆空间</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> *<span class="title">extend_heap</span><span class="params">(<span class="keyword">size_t</span> words)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> *bp;</span><br><span class="line">    <span class="keyword">size_t</span> <span class="built_in">size</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">size</span> = (words % <span class="number">2</span>) ? (words + <span class="number">1</span>) * WSIZE : words * WSIZE;<span class="comment">//向上舍入</span></span><br><span class="line">    <span class="keyword">if</span> ((<span class="keyword">long</span>)(bp = mem_sbrk(<span class="built_in">size</span>)) == (<span class="keyword">void</span> *)<span class="number">-1</span>)<span class="comment">//向内存要空间</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">    PUT(HDRP(bp), PACK(<span class="built_in">size</span>, <span class="number">0</span>));</span><br><span class="line">    PUT(FTRP(bp), PACK(<span class="built_in">size</span>, <span class="number">0</span>));</span><br><span class="line">    PUT(HDRP(NEXT_BLKP(bp)), PACK(<span class="number">0</span>, <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> coalesce(bp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="mm-free-函数"><a href="#mm-free-函数" class="headerlink" title="mm_free 函数"></a>mm_free 函数</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mm_free</span><span class="params">(<span class="keyword">void</span> *bp)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (bp == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">size_t</span> <span class="built_in">size</span> = GET_SIZE(HDRP(bp));</span><br><span class="line"></span><br><span class="line">    PUT(HDRP(bp), PACK(<span class="built_in">size</span>, <span class="number">0</span>));</span><br><span class="line">    PUT(FTRP(bp), PACK(<span class="built_in">size</span>, <span class="number">0</span>));</span><br><span class="line">    coalesce(bp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>free函数可以释放一个以前分配的块，这个函数释放所请求的块bp,然后我们将<strong>其与邻接的空闲块合并</strong>起来</p>
<h3 id="coalesce函数"><a href="#coalesce函数" class="headerlink" title="coalesce函数"></a>coalesce函数</h3><p>coalesce函数就是将空闲块合并起来的函数，其函数示意图如下</p>
<p><img src="/2021/01/22/malloc-lab/3.png" style="zoom:100%;"></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> *<span class="title">coalesce</span><span class="params">(<span class="keyword">void</span> *bp)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">size_t</span> prev_alloc = GET_ALLOC(FTRP(PREV_BLKP(bp)));<span class="comment">//首先我们获得前后块的分配位</span></span><br><span class="line">    <span class="keyword">size_t</span> next_alloc = GET_ALLOC(HDRP(NEXT_BLKP(bp)));</span><br><span class="line">    <span class="keyword">size_t</span> <span class="built_in">size</span> = GET_SIZE(HDRP(bp));</span><br><span class="line">	<span class="comment">//如果前面和后面都是已分配的，那么就直接返回bp</span></span><br><span class="line">    <span class="keyword">if</span> (prev_alloc &amp;&amp; next_alloc)</span><br><span class="line">        <span class="keyword">return</span> bp;</span><br><span class="line">    <span class="comment">//如果前面的块已分配，后面的块没有分配，那么Size就等于当前块加上后面的块的大小</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (prev_alloc &amp;&amp; !next_alloc)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">size</span> += GET_SIZE(HDRP(NEXT_BLKP(bp)));</span><br><span class="line">        PUT(HDRP(bp), PACK(<span class="built_in">size</span>, <span class="number">0</span>));</span><br><span class="line">        PUT(FTRP(bp), PACK(<span class="built_in">size</span>, <span class="number">0</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//如果后面的块已分配，前面的块没分配，那么size就等于当前块加上前面的块的大小</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (!prev_alloc &amp;&amp; next_alloc)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">size</span> += GET_SIZE(HDRP(PREV_BLKP(bp)));</span><br><span class="line">        PUT(FTRP(bp), PACK(<span class="built_in">size</span>, <span class="number">0</span>));</span><br><span class="line">        PUT(HDRP(PREV_BLKP(bp)), PACK(<span class="built_in">size</span>, <span class="number">0</span>));</span><br><span class="line">        bp = PREV_BLKP(bp);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//如果都是空的，那么size就等于前后中三个块的大小，然后修改指针</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">size</span> += GET_SIZE(FTRP(NEXT_BLKP(bp))) + GET_SIZE(HDRP(PREV_BLKP(bp)));</span><br><span class="line">        PUT(FTRP(NEXT_BLKP(bp)), PACK(<span class="built_in">size</span>, <span class="number">0</span>));</span><br><span class="line">        PUT(HDRP(PREV_BLKP(bp)), PACK(<span class="built_in">size</span>, <span class="number">0</span>));</span><br><span class="line">        bp = PREV_BLKP(bp);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> bp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="mm-malloc函数"><a href="#mm-malloc函数" class="headerlink" title="mm_malloc函数"></a>mm_malloc函数</h3><p>应用会通过调用<code>mm_malloc</code>函数来向内存请求大小为size字节的块。在检查完请求的真假之后，分配器必须调整请求快的大小，从而为头部和脚部留有空间并满足双字对齐的要求。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> *<span class="title">mm_malloc</span><span class="params">(<span class="keyword">size_t</span> <span class="built_in">size</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">size_t</span> asize;</span><br><span class="line">    <span class="keyword">size_t</span> extendsize;</span><br><span class="line">    <span class="keyword">char</span> *bp;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">size</span> == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">size</span> &lt;= DSIZE)<span class="comment">//强行限制了最小块大小为16字节；8字节用来满足对齐要求，8字节用来放头部尾部</span></span><br><span class="line">        asize = <span class="number">2</span> * (DSIZE);</span><br><span class="line">    <span class="keyword">else</span><span class="comment">//向上舍入到最接近8的整数倍</span></span><br><span class="line">        asize = (DSIZE) * ((<span class="built_in">size</span> + (DSIZE) + (DSIZE - <span class="number">1</span>)) / (DSIZE));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ((bp = find_fit(asize)) != <span class="literal">NULL</span>)<span class="comment">//找到合适的block存放</span></span><br><span class="line">    &#123;</span><br><span class="line">        place(bp, asize);</span><br><span class="line">        <span class="keyword">return</span> bp;</span><br><span class="line">    &#125;</span><br><span class="line">    extendsize = MAX(asize, CHUNKSIZE);<span class="comment">//如果没有合适的，那么我们就要extend_size了</span></span><br><span class="line">    <span class="keyword">if</span> ((bp = extend_heap(extendsize / WSIZE)) == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    place(bp, asize);</span><br><span class="line">    <span class="keyword">return</span> bp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="find-fit函数"><a href="#find-fit函数" class="headerlink" title="find_fit函数"></a>find_fit函数</h3><p>这里，我们采取的方法是first_fit,也就是找到第一个符合条件的block来放置。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> *<span class="title">find_fit</span><span class="params">(<span class="keyword">size_t</span> <span class="built_in">size</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">void</span> *bp;</span><br><span class="line">    <span class="keyword">for</span> (bp = heap_listp; GET_SIZE(HDRP(bp)) &gt; <span class="number">0</span>; bp = NEXT_BLKP(bp))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (!GET_ALLOC(HDRP(bp)) &amp;&amp; (<span class="built_in">size</span> &lt;= GET_SIZE(HDRP(bp))))</span><br><span class="line">            <span class="keyword">return</span> bp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="最佳适配"><a href="#最佳适配" class="headerlink" title="最佳适配"></a>最佳适配</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> *<span class="title">best_fit</span><span class="params">(<span class="keyword">size_t</span> asize)</span></span>&#123;</span><br><span class="line">	<span class="keyword">void</span> *bp = heap_listp;</span><br><span class="line">	<span class="keyword">size_t</span> <span class="built_in">size</span>;</span><br><span class="line">	<span class="keyword">void</span> *best = <span class="literal">NULL</span>;</span><br><span class="line">	<span class="keyword">size_t</span> min_size = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>((<span class="built_in">size</span> = GET_SIZE(HDRP(bp))) != <span class="number">0</span>)&#123;</span><br><span class="line">		<span class="keyword">if</span>(<span class="built_in">size</span> &gt;= asize &amp;&amp; !GET_ALLOC(HDRP(bp)) &amp;&amp; (min_size == <span class="number">0</span> || min_size&gt;<span class="built_in">size</span>))&#123;	</span><br><span class="line">            <span class="comment">//记录最小的合适的空闲块</span></span><br><span class="line">			min_size = <span class="built_in">size</span>;</span><br><span class="line">			best = bp;</span><br><span class="line">		&#125;</span><br><span class="line">		bp = NEXT_BLKP(bp);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> best;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="place函数"><a href="#place函数" class="headerlink" title="place函数"></a>place函数</h3><p>place函数就是将此适配的块的头部和尾部进行修改，如果剩下的尺寸超过16，则将其重新加入空闲块中，避免内部碎片;</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">place</span><span class="params">(<span class="keyword">void</span> *bp, <span class="keyword">size_t</span> asize)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">size_t</span> csize = GET_SIZE(HDRP(bp));</span><br><span class="line">    <span class="keyword">if</span> ((csize - asize) &gt;= (<span class="number">2</span> * DSIZE))</span><br><span class="line">    &#123; </span><br><span class="line">        PUT(HDRP(bp), PACK(asize, <span class="number">1</span>));</span><br><span class="line">        PUT(FTRP(bp), PACK(asize, <span class="number">1</span>));</span><br><span class="line">        bp = NEXT_BLKP(bp);</span><br><span class="line">        PUT(HDRP(bp), PACK(csize - asize, <span class="number">0</span>));</span><br><span class="line">        PUT(FTRP(bp), PACK(csize - asize, <span class="number">0</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        PUT(HDRP(bp), PACK(csize, <span class="number">1</span>));</span><br><span class="line">        PUT(FTRP(bp), PACK(csize, <span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="mm-realloc函数"><a href="#mm-realloc函数" class="headerlink" title="mm_realloc函数"></a>mm_realloc函数</h3><p><code>realloc</code> 函数就是将旧的块中的内容复制到新的块当中去</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> *<span class="title">mm_realloc</span><span class="params">(<span class="keyword">void</span> *ptr, <span class="keyword">size_t</span> <span class="built_in">size</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">size_t</span> oldsize;</span><br><span class="line">    <span class="keyword">void</span> *newptr;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* If size == 0 then this is just free, and we return NULL. */</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">size</span> == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        mm_free(ptr);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* If oldptr is NULL, then this is just malloc. */</span></span><br><span class="line">    <span class="keyword">if</span> (ptr == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> mm_malloc(<span class="built_in">size</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    newptr = mm_malloc(<span class="built_in">size</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* If realloc() fails the original block is left untouched  */</span></span><br><span class="line">    <span class="keyword">if</span> (!newptr)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Copy the old data. */</span></span><br><span class="line">    oldsize = GET_SIZE(HDRP(ptr));</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">size</span> &lt; oldsize)</span><br><span class="line">        oldsize = <span class="built_in">size</span>;</span><br><span class="line">    <span class="built_in">memcpy</span>(newptr, ptr, oldsize);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Free the old block. */</span></span><br><span class="line">    mm_free(ptr);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> newptr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2021/01/17/%E5%93%88%E5%A4%AB%E6%9B%BC%E7%BC%96%E7%A0%81/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/17/%E5%93%88%E5%A4%AB%E6%9B%BC%E7%BC%96%E7%A0%81/" class="post-title-link" itemprop="url">哈夫曼编码</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2021-01-17 16:08:13 / Modified: 19:59:46" itemprop="dateCreated datePublished" datetime="2021-01-17T16:08:13+08:00">2021-01-17</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="哈夫曼编码"><a href="#哈夫曼编码" class="headerlink" title="哈夫曼编码"></a>哈夫曼编码</h1><p>通常的编码方法有固定长度和不等长度编码两种。</p>
<p>最优的编码方案的目的是使总码长度最短。利用字符的使用频率来编码使不等长编码方法，使得经常使用的字符编码较短，不常使用的字符编码较长。</p>
<p>不等长编码方法需要解决的两个关键问题：</p>
<p>1） 编码尽可能的短</p>
<p>使用频率高的字符编码较短，使用频率低的编码较长，可提高压缩率，节省空间，也能提高运算和通信速率。 即出现频率越高，编码越短</p>
<p>2)  编码不能有二义性</p>
<p>解决方法是：任何一个字符的编码不能是另一个字符编码的前缀，即前缀码特性 </p>
<p>于是我们可以通过二叉树编码，频率高的可以离根近一点，频率低的就可以离根远一点。而且，每一个字符都是一个叶子结点，这样就可以避免二义性，因为叶子是绝对不会有孩子的。</p>
<p>我们可以构造一颗哈夫曼树，这是一棵将所要编码的字符作为叶子结点，该字符在文件中的使用频率作为叶子结点的权值，以自底向上的方式，通过n-1次的合并运算后构造的树。其核心思想是让权值大的叶子离根最近。</p>
<p>哈夫曼采取的贪心策略是：每次从树的集合中取出没有双亲且权值最小的两颗树作为左右子树，并一次构建一颗新的树。新书根节点的权值为其左右孩子节点权值之和，将新树插入到树的集合中</p>
<h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><p><img src="/2021/01/17/%E5%93%88%E5%A4%AB%E6%9B%BC%E7%BC%96%E7%A0%81/1.png"></p>
<p>为了方便起见，我们可以将频率同时扩大100倍。</p>
<ol>
<li>我们选择没有双亲且权值最小的两个结点，$t_1,t_2$</li>
<li>将$t_1,t_2$作为左右子树构建一颗新的树,这里是a和d</li>
<li>将他们组合成一个新的树，他们的父结点的权重为12，这个12也需要加入到集合中作比较</li>
</ol>
<p><img src="/2021/01/17/%E5%93%88%E5%A4%AB%E6%9B%BC%E7%BC%96%E7%A0%81/1.jpg" style="zoom:50%;"></p>
<ol>
<li>接下来，f 和新结点组合生成了新的树</li>
</ol>
<p><img src="/2021/01/17/%E5%93%88%E5%A4%AB%E6%9B%BC%E7%BC%96%E7%A0%81/2.jpg" style="zoom:50%;"></p>
<p>但是现在问题来了，当前的集合中，最小是c，次小为e和新的结点。我们该选哪个？ 答案是选择 e。因为新产生的结点会放在集合的后面。我们碰到一样权重的节点的时候，选择前面那个。</p>
<p>最后，我们的哈夫曼树如下：</p>
<p><img src="/2021/01/17/%E5%93%88%E5%A4%AB%E6%9B%BC%E7%BC%96%E7%A0%81/3.jpg" style="zoom:50%;"></p>
<p>一般我们在程序中将最小的元素设置成左孩子，次小的设置成右孩子。</p>
<h2 id="程序设计"><a href="#程序设计" class="headerlink" title="程序设计"></a>程序设计</h2><h3 id="确定合适的数据结构"><a href="#确定合适的数据结构" class="headerlink" title="确定合适的数据结构"></a>确定合适的数据结构</h3><ul>
<li>哈夫曼树中没有度为1的结点，则一颗n个叶子结点的哈夫曼树共有 2n-1 个结点(n-1次的合并，每次产生一个新的结点)</li>
<li>构成哈夫曼树之后，为求编码需从叶子节点出发走一条<strong>从叶子到根的路径</strong>，是左孩子就编成0，是右孩子就编成1。</li>
<li>译码需要从根出发走一条从根到叶子的路径，那么对于每个结点而言，我们要知道每个结点的权值、双亲、左孩子和右孩子和节点的信息</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">double</span> weight;</span><br><span class="line">	<span class="keyword">int</span> parent;</span><br><span class="line">	<span class="keyword">int</span> lchild;</span><br><span class="line">	<span class="keyword">int</span> rchild;</span><br><span class="line">	<span class="keyword">char</span> value;<span class="comment">//该结点表示的字符</span></span><br><span class="line">&#125;HNodeType;</span><br></pre></td></tr></table></figure>
<p>下面我们来写出哈夫曼树的构建数组</p>
<p><img src="/2021/01/17/%E5%93%88%E5%A4%AB%E6%9B%BC%E7%BC%96%E7%A0%81/2.png"></p>
<p> 最终这张表如下图所示：</p>
<p><img src="/2021/01/17/%E5%93%88%E5%A4%AB%E6%9B%BC%E7%BC%96%E7%A0%81/3.png"></p>
<p>构建哈夫曼树的过程就是填写这张表的过程</p>
<p>编写哈夫曼编码的过程就是读表的过程</p>
<p>对于编码的存储，我们可以用这样一个struct数组：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="keyword">int</span> <span class="built_in">bit</span>[MAXBIT];<span class="comment">//存储编码的数组，从后往前存</span></span><br><span class="line">	<span class="keyword">int</span> start;		<span class="comment">//编码开始下标 </span></span><br><span class="line">&#125;HCodeType;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/17/%E5%93%88%E5%A4%AB%E6%9B%BC%E7%BC%96%E7%A0%81/4.png"></p>
<h3 id="哈夫曼树带权路径长度"><a href="#哈夫曼树带权路径长度" class="headerlink" title="哈夫曼树带权路径长度"></a>哈夫曼树带权路径长度</h3><p>WPL = 每个叶子的权值X该叶子到根的路径长度之和。 哈夫曼树带权路径长度之和等于各新生成节点的权值之和 </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXBIT    100</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXVALUE  10000</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXLEAF   30</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXNODE   MAXLEAF*2 -1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">double</span> weight;</span><br><span class="line">    <span class="keyword">int</span> parent;</span><br><span class="line">    <span class="keyword">int</span> lchild;</span><br><span class="line">    <span class="keyword">int</span> rchild;</span><br><span class="line">    <span class="keyword">char</span> value;</span><br><span class="line">&#125; HNodeType;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> <span class="built_in">bit</span>[MAXBIT];</span><br><span class="line">    <span class="keyword">int</span> start;</span><br><span class="line">&#125; HCodeType;</span><br><span class="line">HNodeType HuffNode[MAXNODE];<span class="comment">//定义一个结点结构体数组</span></span><br><span class="line">HCodeType HuffCode[MAXLEAF];<span class="comment">//定义一个编码结构体数组</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">HuffmanTree</span> <span class="params">(HNodeType HuffNode[MAXNODE],  <span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i, j, x1, x2;<span class="comment">//最小值的下标和次小值得下标</span></span><br><span class="line">    <span class="keyword">double</span> m1,m2;<span class="comment">//最小值和次小值的权值</span></span><br><span class="line">    <span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;<span class="number">2</span>*n<span class="number">-1</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        HuffNode[i].weight=<span class="number">0</span>;</span><br><span class="line">        HuffNode[i].parent=<span class="number">-1</span>;</span><br><span class="line">        HuffNode[i].lchild=<span class="number">-1</span>;</span><br><span class="line">        HuffNode[i].rchild=<span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"Please input value and weight of leaf node "</span>&lt;&lt;i+<span class="number">1</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;HuffNode[i].value&gt;&gt;HuffNode[i].weight;<span class="comment">//输入值和weight</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;n<span class="number">-1</span>; i++)<span class="comment">//n-1次合并</span></span><br><span class="line">    &#123;</span><br><span class="line">        m1=m2=MAXVALUE;</span><br><span class="line">        x1=x2=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (j=<span class="number">0</span>;j&lt;n+i;j++)<span class="comment">//找最小，每次要加上新的结点</span></span><br><span class="line">        &#123;<span class="comment">//满足的条件就是比m_1还小并且还没有父亲</span></span><br><span class="line">            <span class="keyword">if</span> (HuffNode[j].weight&lt;m1&amp;&amp;HuffNode[j].parent==<span class="number">-1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                m2 = m1;</span><br><span class="line">                x2 = x1;</span><br><span class="line">                m1 = HuffNode[j].weight;</span><br><span class="line">                x1 = j;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//或者比次小值还小，并且没有父亲结点</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (HuffNode[j].weight &lt; m2 &amp;&amp; HuffNode[j].parent==<span class="number">-1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                m2=HuffNode[j].weight;</span><br><span class="line">                x2=j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//更新节点的信息</span></span><br><span class="line">        HuffNode[x1].parent  = n+i;</span><br><span class="line">        HuffNode[x2].parent  = n+i;</span><br><span class="line">        HuffNode[n+i].weight = m1+m2;</span><br><span class="line">        HuffNode[n+i].lchild = x1;</span><br><span class="line">        HuffNode[n+i].rchild = x2;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"x1.weight and x2.weight in round "</span>&lt;&lt;i+<span class="number">1</span>&lt;&lt;<span class="string">"\t"</span>&lt;&lt;HuffNode[x1].weight&lt;&lt;<span class="string">"\t"</span>&lt;&lt;HuffNode[x2].weight&lt;&lt;<span class="built_in">endl</span>; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">HuffmanCode</span><span class="params">(HCodeType HuffCode[MAXLEAF],  <span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">    HCodeType cd;<span class="comment">//定义一个临时变量来存放求解编码时候的信息</span></span><br><span class="line">    <span class="keyword">int</span> i,j,c,p;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)<span class="comment">//从0号结点开始，为n个结点依次编码</span></span><br><span class="line">    &#123;</span><br><span class="line">        cd.start=n<span class="number">-1</span>; </span><br><span class="line">        c=i;</span><br><span class="line">        p=HuffNode[c].parent;</span><br><span class="line">        <span class="keyword">while</span>(p!=<span class="number">-1</span>)<span class="comment">//从叶子向上找</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(HuffNode[p].lchild==c)</span><br><span class="line">                cd.<span class="built_in">bit</span>[cd.start]=<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                cd.<span class="built_in">bit</span>[cd.start]=<span class="number">1</span>;</span><br><span class="line">            cd.start--;<span class="comment">//start指向标前移一位</span></span><br><span class="line">            c=p;<span class="comment">//更新当前得结点以及它的父结点</span></span><br><span class="line">            p=HuffNode[c].parent;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (j=cd.start+<span class="number">1</span>; j&lt;n; j++)<span class="comment">//将cd中的数组赋值给Huffcode</span></span><br><span class="line">           HuffCode[i].<span class="built_in">bit</span>[j]=cd.<span class="built_in">bit</span>[j];</span><br><span class="line">        HuffCode[i].start=cd.start;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i,j,n;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"Please input n:"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    HuffmanTree(HuffNode,n);  </span><br><span class="line">    HuffmanCode(HuffCode,n);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;HuffNode[i].value&lt;&lt;<span class="string">": Huffman code is: "</span>;</span><br><span class="line">        <span class="keyword">for</span>(j=HuffCode[i].start+<span class="number">1</span>;j&lt;n;j++)</span><br><span class="line">            <span class="built_in">cout</span>&lt;&lt;HuffCode[i].<span class="built_in">bit</span>[j];</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2021/01/17/%E7%AE%97%E6%B3%95%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/17/%E7%AE%97%E6%B3%95%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/" class="post-title-link" itemprop="url">算法期末复习</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2021-01-17 10:41:15 / Modified: 21:47:50" itemprop="dateCreated datePublished" datetime="2021-01-17T10:41:15+08:00">2021-01-17</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="算法期末复习"><a href="#算法期末复习" class="headerlink" title="算法期末复习"></a>算法期末复习</h1><h2 id="算法基础"><a href="#算法基础" class="headerlink" title="算法基础"></a>算法基础</h2><h3 id="插入排序"><a href="#插入排序" class="headerlink" title="插入排序"></a>插入排序</h3><p><a href="https://jasonxqh.github.io/2020/08/28/%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F%E5%92%8C%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F/">https://jasonxqh.github.io/2020/08/28/%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F%E5%92%8C%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F/</a></p>
<h3 id="分治法"><a href="#分治法" class="headerlink" title="分治法"></a>分治法</h3><h2 id="渐近符号"><a href="#渐近符号" class="headerlink" title="渐近符号"></a>渐近符号</h2><p><a href="https://blog.csdn.net/so_geili/article/details/53353593" target="_blank" rel="noopener">https://blog.csdn.net/so_geili/article/details/53353593</a></p>
<p><img src="/2021/01/17/%E7%AE%97%E6%B3%95%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/1.png" style="zoom:80%;"></p>
<h3 id="渐近紧确界记号-Theta"><a href="#渐近紧确界记号-Theta" class="headerlink" title="渐近紧确界记号 $\Theta$"></a>渐近紧确界记号 $\Theta$</h3><p><img src="/2021/01/17/%E7%AE%97%E6%B3%95%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/2.png" style="zoom:80%;"></p>
<h3 id="渐近上界记号：-O"><a href="#渐近上界记号：-O" class="headerlink" title="渐近上界记号：$O$"></a>渐近上界记号：$O$</h3><p><img src="/2021/01/17/%E7%AE%97%E6%B3%95%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/3.png" style="zoom:80%;"></p>
<h3 id="渐近下界记号：-Omega"><a href="#渐近下界记号：-Omega" class="headerlink" title="渐近下界记号：$\Omega$"></a>渐近下界记号：$\Omega$</h3><p><img src="/2021/01/17/%E7%AE%97%E6%B3%95%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/4.png" style="zoom:80%;"></p>
<h3 id="非渐近紧确上界：-o"><a href="#非渐近紧确上界：-o" class="headerlink" title="非渐近紧确上界：$o$"></a>非渐近紧确上界：$o$</h3><p> 小o和大O的区别就在于：</p>
<p>$O(n^2)$可以是 n,2n,1,$2n^2$等，但是$o(n^2)$ 可以是 n,1,3n等,但不能是 $n^2$ ,是 小于号的关系</p>
<h3 id="非渐近紧确下界：-omega"><a href="#非渐近紧确下界：-omega" class="headerlink" title="非渐近紧确下界：$\omega$"></a>非渐近紧确下界：$\omega$</h3><p>和o与O的关系一样。$ω(n^2)$可以是$n^3,n^{10}$等,但不能是$n^2$。$Ω(n^2)$可以是$n^2,n^3$,$n^{10}$等。</p>
<h2 id="分治策略"><a href="#分治策略" class="headerlink" title="分治策略*"></a>分治策略*</h2><h3 id="矩阵乘法-Strassen"><a href="#矩阵乘法-Strassen" class="headerlink" title="矩阵乘法 Strassen"></a>矩阵乘法 Strassen</h3><h3 id="代入法求解递归式"><a href="#代入法求解递归式" class="headerlink" title="代入法求解递归式"></a>代入法求解递归式</h3><h3 id="递归树方法求解递归式"><a href="#递归树方法求解递归式" class="headerlink" title="递归树方法求解递归式"></a>递归树方法求解递归式</h3><h3 id="主方法求解递归式"><a href="#主方法求解递归式" class="headerlink" title="主方法求解递归式"></a>主方法求解递归式</h3><h2 id="堆排序"><a href="#堆排序" class="headerlink" title="堆排序"></a>堆排序</h2><p><a href="https://jasonxqh.github.io/2020/05/07/%E5%A0%86%E6%8E%92%E5%BA%8F/">https://jasonxqh.github.io/2020/05/07/%E5%A0%86%E6%8E%92%E5%BA%8F/</a></p>
<h2 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h2><p><a href="https://jasonxqh.github.io/2020/05/06/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/">https://jasonxqh.github.io/2020/05/06/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/</a></p>
<h2 id="线性时间排序"><a href="#线性时间排序" class="headerlink" title="线性时间排序*"></a>线性时间排序*</h2><h3 id="排序算法的下界"><a href="#排序算法的下界" class="headerlink" title="排序算法的下界"></a>排序算法的下界</h3><h3 id="记数排序与基数排序"><a href="#记数排序与基数排序" class="headerlink" title="记数排序与基数排序"></a>记数排序与基数排序</h3><h2 id="中位数和顺序统计量"><a href="#中位数和顺序统计量" class="headerlink" title="中位数和顺序统计量*"></a>中位数和顺序统计量*</h2><h3 id="期望为线性的时间"><a href="#期望为线性的时间" class="headerlink" title="期望为线性的时间"></a>期望为线性的时间</h3><h3 id="最坏为线性的时间"><a href="#最坏为线性的时间" class="headerlink" title="最坏为线性的时间"></a>最坏为线性的时间</h3><h2 id="散列表"><a href="#散列表" class="headerlink" title="散列表"></a>散列表</h2><h3 id="散列表-1"><a href="#散列表-1" class="headerlink" title="散列表"></a>散列表</h3><p><a href="https://jasonxqh.github.io/2020/05/09/hashtable/">https://jasonxqh.github.io/2020/05/09/hashtable/</a></p>
<h3 id="开放寻址法"><a href="#开放寻址法" class="headerlink" title="开放寻址法"></a>开放寻址法</h3><h4 id="线性探查"><a href="#线性探查" class="headerlink" title="线性探查"></a>线性探查</h4><p>给定一个普通的散列函数 <code>h&#39;</code>,称之为辅助散列函数，线性探查采用的散列函数为： $h(k,i)=(h’(k)+i)\mod~m$</p>
<h4 id="二次探查"><a href="#二次探查" class="headerlink" title="二次探查"></a>二次探查</h4><p>二次探查采用这种散列函数 $h(k,i)=(h’(k)+c_1i+c_2i^2)\mod m$ </p>
<p>其中 $h’$ 是一个辅助散列函数，$c_1,c_2$为正的辅助常数</p>
<h4 id="双重散列"><a href="#双重散列" class="headerlink" title="双重散列"></a>双重散列</h4><p>双重散列是用于开放寻址法最好的方法之一，因为它所产生的排列具有随机选择排列的许多特性。双重散列采用如喜爱形式的散列函数</p>
<p>$h(k,i)=(h_1(k)+ih_2(k)) \mod m$</p>
<h2 id="二叉搜索树"><a href="#二叉搜索树" class="headerlink" title="二叉搜索树"></a>二叉搜索树</h2><p><a href="https://jasonxqh.github.io/2020/06/17/BSTandAVL/">https://jasonxqh.github.io/2020/06/17/BSTandAVL/</a></p>
<h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h3><h3 id="查询、插入、删除"><a href="#查询、插入、删除" class="headerlink" title="查询、插入、删除"></a>查询、插入、删除</h3><h2 id="红黑树"><a href="#红黑树" class="headerlink" title="红黑树"></a>红黑树</h2><p><a href="https://jasonxqh.github.io/2020/11/03/%E7%BA%A2%E9%BB%91%E6%A0%91/">https://jasonxqh.github.io/2020/11/03/%E7%BA%A2%E9%BB%91%E6%A0%91/</a></p>
<h3 id="性质、旋转、插入"><a href="#性质、旋转、插入" class="headerlink" title="性质、旋转、插入"></a>性质、旋转、插入</h3><h2 id="动态规划"><a href="#动态规划" class="headerlink" title="动态规划"></a>动态规划</h2><h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><h3 id="钢条切割"><a href="#钢条切割" class="headerlink" title="钢条切割"></a>钢条切割</h3><h3 id="矩阵链乘法"><a href="#矩阵链乘法" class="headerlink" title="矩阵链乘法"></a>矩阵链乘法</h3><p><a href="https://jasonxqh.github.io/2020/11/17/%E7%9F%A9%E9%98%B5%E9%93%BE%E4%B9%98%E6%B3%95/">https://jasonxqh.github.io/2020/11/17/%E7%9F%A9%E9%98%B5%E9%93%BE%E4%B9%98%E6%B3%95/</a></p>
<h2 id="贪心算法"><a href="#贪心算法" class="headerlink" title="贪心算法"></a>贪心算法</h2><h3 id="原理-1"><a href="#原理-1" class="headerlink" title="原理"></a>原理</h3><h3 id="活动选择"><a href="#活动选择" class="headerlink" title="活动选择"></a>活动选择</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1500</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> beginTime;</span><br><span class="line">    <span class="keyword">int</span> endTime;</span><br><span class="line">    node()</span><br><span class="line">    &#123;</span><br><span class="line">        beginTime=<span class="number">0</span>;</span><br><span class="line">        endTime=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;a[maxn];</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node a,node b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(a.endTime!=b.endTime)    <span class="comment">/*如果两个活动的结束时间不相等*/</span></span><br><span class="line">        <span class="keyword">return</span> a.endTime&lt;b.endTime;</span><br><span class="line">    <span class="keyword">if</span>(a.endTime==b.endTime)</span><br><span class="line">        <span class="keyword">return</span> a.beginTime&lt;b.beginTime;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n,i;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;a[i].beginTime&gt;&gt;a[i].endTime;</span><br><span class="line">    &#125;</span><br><span class="line">    sort(a+<span class="number">1</span>,a+<span class="number">1</span>+n,cmp);<span class="comment">//按照结束时间从早到晚开始排队</span></span><br><span class="line">    <span class="keyword">int</span> cnt=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> tmp=<span class="number">-1</span>;<span class="comment">/*用于进行贪心选择的变量*/</span></span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>; i&lt;=n; i++)<span class="comment">/*进行活动选择 */</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i].beginTime &gt;= tmp)</span><br><span class="line">        &#123;</span><br><span class="line">            tmp=a[i].endTime;</span><br><span class="line">            cnt++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;cnt&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="赫夫曼编码"><a href="#赫夫曼编码" class="headerlink" title="赫夫曼编码"></a>赫夫曼编码</h3><p><a href="https://jasonxqh.github.io/2021/01/17/哈夫曼编码/">哈夫曼编码</a></p>
<h2 id="摊还分析"><a href="#摊还分析" class="headerlink" title="摊还分析*"></a>摊还分析*</h2><h3 id="聚合分析"><a href="#聚合分析" class="headerlink" title="聚合分析"></a>聚合分析</h3><h3 id="核算法"><a href="#核算法" class="headerlink" title="核算法"></a>核算法</h3><h3 id="势能法"><a href="#势能法" class="headerlink" title="势能法"></a>势能法</h3><h3 id="动态表"><a href="#动态表" class="headerlink" title="动态表"></a>动态表</h3><h2 id="图算法"><a href="#图算法" class="headerlink" title="图算法"></a>图算法</h2><h3 id="图的表示"><a href="#图的表示" class="headerlink" title="图的表示"></a>图的表示</h3><h3 id="广度优先"><a href="#广度优先" class="headerlink" title="广度优先"></a>广度优先</h3><p><a href="https://jasonxqh.github.io/2020/08/30/BFSandDFS/">https://jasonxqh.github.io/2020/08/30/BFSandDFS/</a></p>
<h3 id="深度优先"><a href="#深度优先" class="headerlink" title="深度优先"></a>深度优先</h3><p><a href="https://jasonxqh.github.io/2020/08/30/BFSandDFS/">https://jasonxqh.github.io/2020/08/30/BFSandDFS/</a></p>
<h2 id="最小生成树"><a href="#最小生成树" class="headerlink" title="最小生成树"></a>最小生成树</h2><h3 id="最小生成树的形成"><a href="#最小生成树的形成" class="headerlink" title="最小生成树的形成"></a>最小生成树的形成</h3><h3 id="Kruskal和Prim"><a href="#Kruskal和Prim" class="headerlink" title="Kruskal和Prim"></a>Kruskal和Prim</h3><p><a href="https://jasonxqh.github.io/2020/06/21/%E5%9B%BE%E4%B8%8E%E8%B4%AA%E5%BF%83%E7%AE%97%E6%B3%95/">https://jasonxqh.github.io/2020/06/21/%E5%9B%BE%E4%B8%8E%E8%B4%AA%E5%BF%83%E7%AE%97%E6%B3%95/</a></p>
<h2 id="单源最短路径"><a href="#单源最短路径" class="headerlink" title="单源最短路径"></a>单源最短路径</h2><h3 id="Dijkstra算法"><a href="#Dijkstra算法" class="headerlink" title="Dijkstra算法"></a>Dijkstra算法</h3><p><a href="https://jasonxqh.github.io/2020/06/21/%E5%9B%BE%E4%B8%8E%E8%B4%AA%E5%BF%83%E7%AE%97%E6%B3%95/">https://jasonxqh.github.io/2020/06/21/%E5%9B%BE%E4%B8%8E%E8%B4%AA%E5%BF%83%E7%AE%97%E6%B3%95/</a></p>
<h2 id="最大流"><a href="#最大流" class="headerlink" title="最大流"></a>最大流</h2><h3 id="流网络"><a href="#流网络" class="headerlink" title="流网络"></a>流网络</h3><h3 id="Ford-fulkerson方法"><a href="#Ford-fulkerson方法" class="headerlink" title="Ford-fulkerson方法"></a>Ford-fulkerson方法</h3><h2 id="NP完全性"><a href="#NP完全性" class="headerlink" title="NP完全性"></a>NP完全性</h2><h3 id="多项式时间、多项式时间的验证"><a href="#多项式时间、多项式时间的验证" class="headerlink" title="多项式时间、多项式时间的验证"></a>多项式时间、多项式时间的验证</h3><h3 id="NP完全性与可规约性"><a href="#NP完全性与可规约性" class="headerlink" title="NP完全性与可规约性"></a>NP完全性与可规约性</h3><h3 id="典型的NP完全问题"><a href="#典型的NP完全问题" class="headerlink" title="典型的NP完全问题"></a>典型的NP完全问题</h3><h3 id="团问题、顶点覆盖问题、哈密顿回路问题等"><a href="#团问题、顶点覆盖问题、哈密顿回路问题等" class="headerlink" title="团问题、顶点覆盖问题、哈密顿回路问题等"></a>团问题、顶点覆盖问题、哈密顿回路问题等</h3><h2 id="近似算法"><a href="#近似算法" class="headerlink" title="近似算法"></a>近似算法</h2><h3 id="顶点覆盖问题"><a href="#顶点覆盖问题" class="headerlink" title="顶点覆盖问题"></a>顶点覆盖问题</h3><h3 id="旅行商问题"><a href="#旅行商问题" class="headerlink" title="旅行商问题"></a>旅行商问题</h3><h3 id="集合覆盖问题"><a href="#集合覆盖问题" class="headerlink" title="集合覆盖问题"></a>集合覆盖问题</h3>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2021/01/06/%E5%BC%82%E5%B8%B8%E6%8E%A7%E5%88%B6%E6%B5%81%EF%BC%88ECF%EF%BC%892/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/06/%E5%BC%82%E5%B8%B8%E6%8E%A7%E5%88%B6%E6%B5%81%EF%BC%88ECF%EF%BC%892/" class="post-title-link" itemprop="url">异常控制流（ECF）2</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-06 21:13:24" itemprop="dateCreated datePublished" datetime="2021-01-06T21:13:24+08:00">2021-01-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-06-25 22:41:08" itemprop="dateModified" datetime="2022-06-25T22:41:08+08:00">2022-06-25</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Shells"><a href="#Shells" class="headerlink" title="Shells"></a>Shells</h1><p><img src="/2021/01/06/%E5%BC%82%E5%B8%B8%E6%8E%A7%E5%88%B6%E6%B5%81%EF%BC%88ECF%EF%BC%892/2.png" style="zoom:80%;"></p>
<h1 id="Signals"><a href="#Signals" class="headerlink" title="Signals"></a>Signals</h1><p><img src="/2021/01/06/%E5%BC%82%E5%B8%B8%E6%8E%A7%E5%88%B6%E6%B5%81%EF%BC%88ECF%EF%BC%892/1.png" style="zoom:80%;"></p>
<p>在 <a href="https://jasonxqh.github.io/2020/12/24/异常控制流（ECF）1/">异常控制流（ECF）1</a> 中，我们介绍了Interrupts，Traps，Faults和Aborts，这是硬件和软件合作以提供基本的底层异常机制。接下来我们要研究一种更高层的软件形式异常，称为 Linux信号，它允许<strong>进程和内核</strong> 中断其他进程。</p>
<p>一个信号(signal)就是一条小消息，它通知进程系统中发生了一个某种类型的事件。如下图</p>
<p><img src="/2021/01/06/%E5%BC%82%E5%B8%B8%E6%8E%A7%E5%88%B6%E6%B5%81%EF%BC%88ECF%EF%BC%892/3.png" style="zoom:80%;"></p>
<p>如果是低层的硬件异常，是由内核异常处理程序处理的，一般对用户不可见。但信号不同，信号提供了一种机制来通知用户进程发生了这 些异常。比如，一个进程试图除以0，那么内核就会发送给它一个SIGFPE信号(号码8);如果一个进程执行一条非法指令，那么内核就会发送给它一个SIGSEGV信号(号码11). Kernel是通过 kill这一个系统调用来发送指令的，发送的指令可以是 SIGKILL也可以是 其他指令<br>此外，一个进程可以通过向另一个进程发送一个 SIGKILL 信号(号码9)强制终止它。当一个子进程终止或者停止的时候，内核会发送一个SIGCHILD的信号来给父进程</p>
<h2 id="信号术语"><a href="#信号术语" class="headerlink" title="信号术语"></a>信号术语</h2><p>下面我们来简单看一下发送信号的过程：是由两个不同步骤组成的：</p>
<ul>
<li>发送信号。内核通过更新目的进程上下文中的某个状态，发送一个信号给目的进程。发送信号可以有两个原因 ：<ul>
<li>内核检测到一个系统时间，比如除零错误或者子进程终止</li>
<li>一个进程调用了kill函数，显示地要求内核发送一个信号给目的进程。一个进程也可以发送信号给它自己</li>
</ul>
</li>
</ul>
<p><img src="/2021/01/06/%E5%BC%82%E5%B8%B8%E6%8E%A7%E5%88%B6%E6%B5%81%EF%BC%88ECF%EF%BC%892/4.png" style="zoom: 67%;"></p>
<p>一个发出的，而没有被接手的信号叫做待处理信号(pending signal)，在任何时刻，一种类型最多只会有一个待处理信号。如果一个进程有一个类型为k的待处理信号，那么任何接下来发送到这个进程的类型为k的信号都不会排队等待，只是被简单的丢弃。我们可以理解为是一个“状态”而非一个队列。<br>一个进程可以选择性的阻塞接收某种信号，当一种信号被阻塞的时候，它仍然可以被发送但是产生的待处理信号不会被接收，直到进程取消对这种信号的阻塞。</p>
<p><img src="/2021/01/06/%E5%BC%82%E5%B8%B8%E6%8E%A7%E5%88%B6%E6%B5%81%EF%BC%88ECF%EF%BC%892/5.png" style="zoom: 67%;"></p>
<ul>
<li>接收信号。当目的进程被内核强迫以某种方式对信号的发送做出反应的时候，他就接受了信号，进程可以忽略这个信号，终止或者捕获这个信号。如下图所示</li>
</ul>
<p><img src="/2021/01/06/%E5%BC%82%E5%B8%B8%E6%8E%A7%E5%88%B6%E6%B5%81%EF%BC%88ECF%EF%BC%892/8.png" style="zoom:80%;"></p>
<p>一个待处理的信号只能被接收一次。内核为每个进程在<strong>pending位向量</strong>中维护<strong>待处理信号</strong>的集合。而在<strong>blocked向量</strong>中维护<strong>被阻塞的信号</strong>集合。只要传送了一个类型为k的信号，内核就会设置pending中的第k位，而只要接收了一个类型为k的信号，内核就会清除pending中的第k位</p>
<p><img src="/2021/01/06/%E5%BC%82%E5%B8%B8%E6%8E%A7%E5%88%B6%E6%B5%81%EF%BC%88ECF%EF%BC%892/7.png" style="zoom:80%;"></p>
<h2 id="发送信号"><a href="#发送信号" class="headerlink" title="发送信号"></a>发送信号</h2><p>Unix系统提供了大量向进程发送信号的机制，所有这些机制都是基于进程组这个概念的</p>
<h3 id="进程组"><a href="#进程组" class="headerlink" title="进程组"></a>进程组</h3><p>每个进程都<strong>只</strong>属于一个进程组，进程组是由一个正整数进程组ID来标识的。getpgrp函数返回当前进程的进程组ID</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">pid_t</span> <span class="title">getpgrp</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br></pre></td></tr></table></figure>
<p>默认的，一个子进程和他的父进程同属于一个进程组。一个进程可以通过使用<code>setpgid</code> 函数来改变自己或者其他进程的进程组</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#inlcude <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">setpgid</span><span class="params">(<span class="keyword">pid_t</span> pid,<span class="keyword">pid_t</span> pgid)</span></span>;<span class="comment">//若成功则返回0，否则返回-1</span></span><br></pre></td></tr></table></figure>
<p><img src="/2021/01/06/%E5%BC%82%E5%B8%B8%E6%8E%A7%E5%88%B6%E6%B5%81%EF%BC%88ECF%EF%BC%892/9.png" style="zoom:80%;"></p>
<p><code>setpgid</code> 函数将进程<code>pid</code>组改为<code>pgid</code>。如果<code>pid</code>是0，那么就使用当前进程的PID。如果<code>pgid</code>为0，那么就用<code>pid</code>指定的进程的PID作为进程组ID。例如，如果进程15213是调用进程，那么 <code>setpgid(0,0);</code> 会创建一个新的进程组，其进程组ID是15213，并且把进程15213加入到这个新的进程组中</p>
<h3 id="用-bin-kill程序发送信号"><a href="#用-bin-kill程序发送信号" class="headerlink" title="用 /bin/kill程序发送信号"></a>用 /bin/kill程序发送信号</h3><p>/bin/kill 程序可以向另外的进程发送任意的信号。</p>
<p>例如，命令 <code>linux&gt;/bin/kill -9 15213</code> 发送信号9(SIGKILL)给进程15213. </p>
<p>一个为负的PID会导致i信号被发送到进程组PID中的<strong>每个进程</strong></p>
<p>例如：<code>linux&gt;/bin/kill -9 -15213</code> 会发送一个SIGKILL信号给进程组15213中的每个进程。</p>
<h3 id="从键盘发送信号"><a href="#从键盘发送信号" class="headerlink" title="从键盘发送信号"></a>从键盘发送信号</h3><p>下图展示了一个有一个前台作业和两个后台作业的shell，前台作业中的父进程PID为20，进程组也为20.父进程创建两个子进程，每个也都是进程组20的成员。</p>
<p><img src="/2021/01/06/%E5%BC%82%E5%B8%B8%E6%8E%A7%E5%88%B6%E6%B5%81%EF%BC%88ECF%EF%BC%892/10.png" style="zoom:80%;"></p>
<p>在键盘上输入 <code>Ctrl+C</code>会导致内核发送一个 SIGINT 信号到前台进程组中的每一个进程，默认情况下，结果是<strong>终止前台作业</strong>。</p>
<p>输入<code>Ctrl+Z</code>会发送一个SIGTSTP信号到前台进程组中的每个进程。默认情况下，结果是<strong>停止(挂起suspend)前台作业</strong>。</p>
<h3 id="用kill-函数发送信号"><a href="#用kill-函数发送信号" class="headerlink" title="用kill 函数发送信号"></a>用kill 函数发送信号</h3><p>进程可以通过调用kill 函数发送信号给其他进程(包括他们自己)</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;signal.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">kill</span><span class="params">(<span class="keyword">pid_t</span> pid,<span class="keyword">int</span> sig)</span></span></span><br></pre></td></tr></table></figure>
<p>这里有三种不同的发送情况</p>
<ul>
<li>如果 $pid&gt;0$ ，那么<code>kill</code>函数就会发送信号号码 <code>sig</code>给进程 <code>pid</code>. </li>
<li>如果 $pid=0$ ，那么<code>kill</code> 发送信号<code>sig</code>给<strong>调用进程所在进程组</strong>中的<strong>每一个进程</strong>，包括调用进程自己</li>
<li>如果 $pid&lt;0$ ，那么<code>kill</code> 发送信号<code>sig</code> 给进程组 $|pid|$ <code>pid</code>的绝对值中的每一个进程。</li>
</ul>
<p>下面是一个例子</p>
<p>首先我们创建N个子进程，每一个子进程都是无限循环。然后在对每一个子进程发送SIGINT信号，终止进程运行。</p>
<p>接下来我们对每一个子进程进行回收，看到底是哪个进程退出。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fork12</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">pid_t</span> pid[N];</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">int</span> child_status;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; N; i++)</span><br><span class="line">    <span class="keyword">if</span> ((pid[i] = fork()) == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">/* Child: Infinite Loop */</span></span><br><span class="line">        <span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">        ;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Killing process %d\n"</span>, pid[i]);</span><br><span class="line">        kill(pid[i], SIGINT);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">        <span class="keyword">pid_t</span> wpid = wait(&amp;child_status);</span><br><span class="line">        <span class="keyword">if</span> (WIFEXITED(child_status))</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"Child %d terminated with exit status %d\n"</span>,wpid, WEXITSTATUS(child_status));</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">	        <span class="built_in">printf</span>(<span class="string">"Child %d terminated abnormally\n"</span>, wpid);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="用alarm函数发送信号"><a href="#用alarm函数发送信号" class="headerlink" title="用alarm函数发送信号"></a>用alarm函数发送信号</h3><p>进程可以通过调用alarm函数向它自己发送SIGALRM信号。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="title">alarm</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">int</span> secs)</span></span>;</span><br><span class="line"><span class="comment">//返回: 前一次alarm剩余的秒数，若以前没有设定alarm，则为0</span></span><br></pre></td></tr></table></figure>
<p>alarm函数安排kernel在<code>secs</code>秒之后发送一个 SIGALRM信号给调用进程。</p>
<h2 id="接收信号"><a href="#接收信号" class="headerlink" title="接收信号"></a>接收信号</h2><p>当内核把进程p从内核模式切换到用户模式的时候(例如上下文切换) 如下图：</p>
<p><img src="/2021/01/06/%E5%BC%82%E5%B8%B8%E6%8E%A7%E5%88%B6%E6%B5%81%EF%BC%88ECF%EF%BC%892/11.png" style="zoom:80%;"></p>
<p>它会检查进程p的未被阻塞的待处理信号的集合，这个集合就是 <code>pending&amp;~blocked</code>,因为pending的是合法的信号，blocked维护的是被阻塞的信号</p>
<p>如果集合为空，意味着要么信号没到，要么信号被屏蔽了 ，那么kernel将控制传递到p的逻辑控制流中的下一条指令($I_{next}$) </p>
<p>如果集合非空，那么内核选择集合中的某个信号k(通常是最小的k)，然后强制p接收信号k，并做出相应的触发。接着会对<code>pnb</code>中所有的信号做此操作。做完之后再把控制权返回给 ($I_{next}$) </p>
<h3 id="Installing-Signal-Handlers"><a href="#Installing-Signal-Handlers" class="headerlink" title="Installing Signal Handlers"></a>Installing Signal Handlers</h3><p>之前我们给出每个信号类型相关联的默认行为。例如，收到SIGKILL的默认行为是终止接收进程。但是其实我们可以通过使用<code>signal</code>函数修改和信号相关联的默认行为。唯一的例外是 <code>SIGSTOP</code> 和 <code>SIGKILL</code>，他们的默认行为是不能被修改的</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;signal.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">void</span><span class="params">(*<span class="keyword">sighandler_t</span>)</span><span class="params">(<span class="keyword">int</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">sighandler_t</span> <span class="title">signal</span><span class="params">(<span class="keyword">int</span> signum,<span class="keyword">sighandler_t</span> handler)</span></span>;</span><br><span class="line"><span class="comment">//返回：若成功则为指向前次处理程序的指针，若出错则为 SIG_ERR(不设置errno)</span></span><br></pre></td></tr></table></figure>
<p>通过这个函数我们可以用<strong>三种方法</strong>之一来改变与信号signum相关联的行为</p>
<ul>
<li>如果 handler参数 是 <strong>SIG_IGN</strong> ，那么<strong>忽略类型为 signum 的信号</strong></li>
<li>如果 handler参数 是<strong>SIG_DFL</strong> ，那么<strong>类型为 signum的信号行为恢复为默认行为</strong></li>
<li>否则，handler就是<strong>用户自定义的函数的地址</strong>，这个函数被称为<strong>信号处理程序</strong>，只要进程接收到一个类型为 signum的信号，就会调用这个程序。<ul>
<li>通过把处理程序的地址传递到 signal函数从而改变默认行为叫做 <strong>设置信号处理程序(installing the handler)</strong>。</li>
<li>调用信号处理程序被称为捕获信号。执行信号处理程序被称为处理信号</li>
</ul>
</li>
</ul>
<p>下面是一个 Signal Handling Example</p>
<p>在main函数当中，我们首先 <code>handler</code>,就是将 SIGINT这个信号和我自己写的 <code>sigint_handler</code>函数关联，然后手动终止掉。这样当我们按下 <code>Ctrl+C</code>之后，就不只是简单的退出而已，而是会说一段废话……</p>
<p>所以现在我们知道一些流氓软件的套路了，它就是不停地弹出弹框不让人退出程序。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sigint_handler</span><span class="params">(<span class="keyword">int</span> sig)</span> <span class="comment">/* SIGINT handler */</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"So you think you can stop the bomb with ctrl-c, do you?\n"</span>);</span><br><span class="line">    sleep(<span class="number">2</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Well..."</span>);</span><br><span class="line">    fflush(<span class="built_in">stdout</span>);</span><br><span class="line">    sleep(<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"OK. :-)\n"</span>);</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>** argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">/* Install the SIGINT handler */</span></span><br><span class="line">    <span class="keyword">if</span> (signal(SIGINT, sigint_handler) == SIG_ERR)</span><br><span class="line">    	unix_error(<span class="string">"signal error"</span>);</span><br><span class="line">    <span class="comment">/* Wait for the receipt of a signal */</span></span><br><span class="line">    pause();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>信号处理程序可以被其他信号处理程序中断掉，这也被称为 Nested Signal Handlers 如下图所示。</p>
<p>在这个例子当中，主程序捕获到信号s，该信号会中断主程序，并将控制转移到处理程序S。S在运行的时候，程序捕获到信号t($t\neq s$)，该信号会中断S,控制转移到处理程序T。 当T返回的时候，S从它被中断地地方继续执行，最后，S返回，控制传送回主程序，主程序从它被中断的地方继续执行</p>
<p><img src="/2021/01/06/%E5%BC%82%E5%B8%B8%E6%8E%A7%E5%88%B6%E6%B5%81%EF%BC%88ECF%EF%BC%892/12.png" style="zoom:80%;"></p>
<h2 id="阻塞和解除阻塞信号"><a href="#阻塞和解除阻塞信号" class="headerlink" title="阻塞和解除阻塞信号"></a>阻塞和解除阻塞信号</h2><h3 id="隐式阻塞机制"><a href="#隐式阻塞机制" class="headerlink" title="隐式阻塞机制"></a>隐式阻塞机制</h3><p>内核会默认阻塞任何当前处理程序正在处理信号类型的待处理信号。</p>
<p>比如说在这张图中，假设程序捕捉到了信号s，当前正在运行处理程序S。如果发送给该进程另外一个信号s，那么直到处理程序S返回，s会变成待处理而没有被接受。</p>
<p><img src="/2021/01/06/%E5%BC%82%E5%B8%B8%E6%8E%A7%E5%88%B6%E6%B5%81%EF%BC%88ECF%EF%BC%892/12.png" style="zoom:80%;"></p>
<h3 id="显式阻塞机制"><a href="#显式阻塞机制" class="headerlink" title="显式阻塞机制"></a>显式阻塞机制</h3><p>我们可以使用 <code>sigprocmask</code>函数和它的<strong>辅助函数</strong>，明确的阻塞和解除阻塞选定的信号。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;signal.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sigprocmask</span><span class="params">(<span class="keyword">int</span> how, <span class="keyword">const</span> <span class="keyword">sigset_t</span> *<span class="built_in">set</span>, <span class="keyword">sigset_t</span> *oldset)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sigemptyset</span><span class="params">(<span class="keyword">sigset_t</span> *<span class="built_in">set</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sigfillset</span><span class="params">(<span class="keyword">sigset_t</span> *<span class="built_in">set</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sigaddset</span><span class="params">(<span class="keyword">sigset_t</span> *<span class="built_in">set</span>, <span class="keyword">int</span> signum)</span></span>;<span class="comment">//把某一个特定的为加上去</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sigdelset</span><span class="params">(<span class="keyword">sigset_t</span> *<span class="built_in">set</span>, <span class="keyword">int</span> signum)</span></span>;<span class="comment">//成功则返回0，否则返回-1</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sigismember</span><span class="params">(<span class="keyword">const</span> <span class="keyword">sigset_t</span> *<span class="built_in">set</span>,<span class="keyword">int</span> signum)</span></span>;</span><br><span class="line"><span class="comment">//若signum是set的成员则为1，如果不是则为0，若出错则为-1</span></span><br></pre></td></tr></table></figure>
<p><code>sigprocmask</code> 函数改变的是 blocked 位向量。具体的行为依赖于how的值:how有三个值</p>
<ul>
<li>SIG_BLOCK: 函数把set中的信号添加到blocked当中($blocked = blocked~|set$)</li>
<li>SIG_UNBLOCK: 函数从block中删除set中的信号 ($blocked=blocked$&amp;~$set$)</li>
<li>SIG_SETMASK: block=set</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">sigset_t</span> mask, prev_mask;<span class="comment">//prev是保留原来的mask</span></span><br><span class="line">Sigemptyset(&amp;mask);<span class="comment">//创建一个空的mask</span></span><br><span class="line">Sigaddset(femask, SIGINT);<span class="comment">//将SIGINT位设置为1</span></span><br><span class="line"><span class="comment">/* Block SIGINT and	and save previous blocked set */</span></span><br><span class="line">Sigprocmask(SIG_BLOCK, &amp;mask, &amp;prev_mask);<span class="comment">// 注册这个mask，将pre_mask保存下来，把新的信号添加到blocked当中</span></span><br><span class="line"><span class="comment">// Code region that will not be interrupted by SIGINT</span></span><br><span class="line"><span class="comment">/* Restore previous blocked set, unblocking SIGINT */</span></span><br><span class="line">Sigprocmask(SIG_SETMASK, &amp;prev_mask, <span class="literal">NULL</span>);<span class="comment">//结束以后我们要回归原样</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2021/01/02/CSAPP%E4%BA%91%E8%AE%A1%E7%AE%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/02/CSAPP%E4%BA%91%E8%AE%A1%E7%AE%97/" class="post-title-link" itemprop="url">CSAPP云计算</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-02 21:15:27" itemprop="dateCreated datePublished" datetime="2021-01-02T21:15:27+08:00">2021-01-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-01-06 17:06:42" itemprop="dateModified" datetime="2021-01-06T17:06:42+08:00">2021-01-06</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="CSAPP云计算"><a href="#CSAPP云计算" class="headerlink" title="CSAPP云计算"></a>CSAPP云计算</h1><h2 id="What-is-distributed-computing"><a href="#What-is-distributed-computing" class="headerlink" title="What is distributed computing"></a>What is distributed computing</h2><p>简单来说，分布式计算就是说我们可以利用多台计算机而不是一台计算机来获取某些东西并能做的很好。分布式在当今最大的应用就是建立一些大型网站，比如 eBay，Google ，Amazon等。我们使用的几乎所有的大型网站都是分布式建立的，它们正在使用数十万台可以为数百万用户提供服务的现成计算机。</p>
<p>现在我们来回答一个问题：</p>
<p><strong>The first demonstration of how to build really large Internet sites out  of clusters of computers was done by: </strong></p>
<p>A. Stanford</p>
<p>B. Berkeley</p>
<p>C. Yahoo!</p>
<p>D. Google</p>
<p>E. IBM</p>
<p>答案是Berkeley</p>
<p>在1996年的时候，如果要建造一个大型的网站(如eBay或者Yahoo),我们可以用一台”超级计算机”,我们可以来看一下超级计算机和我们的PC之间的配置差别。 </p>
<p><img src="/2021/01/02/CSAPP%E4%BA%91%E8%AE%A1%E7%AE%97/1.png" style="zoom:80%;"></p>
<p>这样一台超级微机在当时的售价是100万美金，是一个不便宜的价格。但是eBay和其他一些非常迅速发展的大型网站，就必须使用这些设备。但是问题是，当网站不断地在发展、客流量在不断增长，有时候会超出这台机器的承受能力，这时候公司必须使用新的更大更先进的计算机来替换掉老的计算机。这样的操作模式非常烧钱，因为对于公司来说它们没有一个巨大的市场值得花数百万美元购置新的更大的计算机，但是老的计算机又不够用。</p>
<p>这时，伯克利大学有一个项目，就是说我们可以用很多很多台批量生产的PC电脑，它们虽然个体的计算能力比不上超级计算机，但是它们加起来的计算能力就有可能超过一台昂贵的超级计算机。</p>
<p><img src="/2021/01/02/CSAPP%E4%BA%91%E8%AE%A1%E7%AE%97/2.png" style="zoom:80%;"></p>
<p>就如同上图所示，我们用很多台PC组合起来，就可能拥有吞噬”大鲨鱼“的能力。这是一种更节省成本、增加效益的方式，不仅是因为各个零件都更便宜写，而且我们可以通过将它们聚集起来达到一个惊人的计算量</p>
<p> 于是，这就是分布式计算的雏形，这是1994年造出来的，没有显示器键盘和鼠标，只有四台 HP-735型号的机器</p>
<p><img src="/2021/01/02/CSAPP%E4%BA%91%E8%AE%A1%E7%AE%97/3.png" style="zoom:80%;"></p>
<p>一年以后，已经从4台变到了32台 Sun SPARC-stations，都是由Sun公司捐赠的，而且理线也正常了许多。</p>
<p><img src="/2021/01/02/CSAPP%E4%BA%91%E8%AE%A1%E7%AE%97/4.png" style="zoom:80%;"></p>
<p>从这之后，它变得越来越整齐有序了，在97年，由原来的32台变为了60台 Sun主机</p>
<p><img src="/2021/01/02/CSAPP%E4%BA%91%E8%AE%A1%E7%AE%97/5.png" style="zoom:80%;"></p>
<p>分布式系统发展的越来越大之后，挑战也越来越大：<strong>How do you program a NOW?(or: what is it good-for)</strong></p>
<p>之前在大型计算机或者是在supermini上编写程序非常方便，因为只要让一台计算机成功运行即可。这是程序员熟悉的体系，程序有变量、 内存分配云云。但是在分布式系统上，我们无法在其他计算机上命名数据，我必须明确向其发送消息并接收反馈。这种体系对于程序员来说是新颖且陌生的。</p>
<p>还有一件很难的事情，就是当这些计算机中的某一台或者某几台出现了故障该怎么办。之前在supermini上我们可以尝试重启，但现在我们不能将正在工作的好的计算机也重启了，因此我们必须合理的编写程序来让剩下的没有故障的计算机继续运行，但当时并没有这样一个model来实现这个功能</p>
<p>因此，在1990‘s中期，我们必须挑战在不同的计算机上的内存中运行程序，并进行故障管理。随着机器数量的增加，管理面临的挑战也就越多。 </p>
<h3 id="Palm设备"><a href="#Palm设备" class="headerlink" title="Palm设备"></a>Palm设备</h3><p>如果我们对移动计算机有所了解，可能会记得一个叫做Palm的设备。当时这个机器设计出来就是想要在小型设备上获取Web内容，这比智能手机要早很多很多。</p>
<p>假设现在所有的数据和服务都已经在网络上了 ，那么我就可以随时利用这个工具获得我想知道的东西，而不是必须坐在PC前面。</p>
<p><img src="/2021/01/02/CSAPP%E4%BA%91%E8%AE%A1%E7%AE%97/6.png" style="zoom:80%;"></p>
<p>这是伯克利第一次演示了具有自动扩展功能的Internet服务器架构，如果更多的人使用该系统，它将自动添加更多的计算机。如果一些人不再使用，那么系统将自动释放多余的机器并让他们返回池中，以便其他人可以使用它们。这个思想虽然一开始的目标并不是建立一个搜索引擎，而是为了展示网络服务编程的通用技术，但是却造出了一第一个以这种方式架构的搜索引擎</p>
<p><img src="/2021/01/02/CSAPP%E4%BA%91%E8%AE%A1%E7%AE%97/7.png" style="zoom:80%;"></p>
<p><strong>小练习：</strong> A Google datacenter built c.2005 would be designed to house approximately ____ computers.</p>
<p>A. 1000</p>
<p>B. 5000</p>
<p>C. 10000</p>
<p>D. 50000</p>
<p>E. 100000</p>
<p>答案是 在D和E之间的某一个数</p>
<h2 id="What-is-warehouse-scale-computing"><a href="#What-is-warehouse-scale-computing" class="headerlink" title="What is warehouse-scale computing"></a>What is warehouse-scale computing</h2><p><img src="/2021/01/02/CSAPP%E4%BA%91%E8%AE%A1%E7%AE%97/8.png" style="zoom:80%;"></p>
<p>现在我们要建造仓库级别的服务站，能容纳数以千计的电脑、存储和被和网络。来提供如搜索、邮件、GIS等软件的功能</p>
<p>中间的图是Sun公司的“黑匣子“，里面装满了可以容纳250台计算机以及超过1PB的存储空间以及7TB的RAM。像这样的集装箱，又会像叶子一样被装到右边这张图中的数据中心里面。一排中有数百辆这样的拖车。</p>
<p>现在集群已经成为了主流，但是构建这些庞大服务的唯一问题是对这些计算机集群进行变成仍然是一件非常麻烦的事。需要大公司大资本的帮助才能完成。因此这就是 RAD lab建立的初衷。</p>
<p>要拥有这样一个大数据中心，首先你必须是一家大公司。因此 Amazon首先提出了 Elastic Compute Cloud(EC2) 的概念，所以他们可能是第一个用”云“一词的公司。它们的想法是：我们公司由这些数据中心，但有时候我们不需要这么多台计算机所有的能力：比如说在圣诞节和黑五，Amazon对服务器的需求巨大，而在平常它们并不需要用这么多服务器。因此我们为什么不能将这些闲置的计算机租出去呢？而且我们可以让人们按小时租用，且基本没有最低限度的购买，因此他们的价格一开始是10美分，现在是8美分/小时。</p>
<p>对于消费者，我们只要租我们需要的计算机数量并按照时间付钱就行了，用完后计算机就会被释放回池当中，并不用再继续为其付费了。</p>
<p><img src="/2021/01/02/CSAPP%E4%BA%91%E8%AE%A1%E7%AE%97/9.png" style="zoom:80%;"></p>
<p>但是我们还没有仔细来讲怎么对这么多台计算机进行故障排查和管理。我们可以从这么多计算机中搜集信息并发现从中有趣的模式，因为这些数据可能会告诉我们一些信息。 比如说一旦一台计算机坏了，我们可以查看来自检测我们计算机的仪器的数据(在发生故障之前的那几分钟)；又或者说我们的系统速度变慢了，那么我们可以通过比较不同的计算机来找出哪个或者哪些是”罪魁祸首”——因为我们不可能手动来调试几万台计算机并找出原因</p>
<p>RAD lab在做的就是一个”机器学习”的工作，只不过这个机器学习没有像谷歌一样用在搜索引擎当中，而是用于数据中心中正在运行的任何程序上。</p>
<p>对于Amazon对”云“这一概念的提出，甲骨文的CEO拉里表示不屑。随后 RAD lab就发表了一篇论文，这篇论文提出了关于云计算的新观点，有超过六万的下载量，并对许多公司在云计算方面的战略布局产生了非常大的影响力。这也改变了 拉里对云计算的看法</p>
<p><img src="/2021/01/02/CSAPP%E4%BA%91%E8%AE%A1%E7%AE%97/10.png" style="zoom:80%;"></p>
<p> 过去的云计算的观点就是将软件服务放在云上还是放在本地上。但是新的观点就是我们可以按照时间租赁计算机，只要我们愿意付钱，我们可以向Amazon这样的公司索要上百台计算机都可以。并且我们不用计算机的时候可以直接将他们释放，也不需要再付钱了。 之前也有公司（如Sun）做过类似的云服务，但是它们没有Amazon这样的专业技术，单价也更贵。这样一个Idea，在当时给Amazon带来了数百万美元的收益，而这是接近零成本的，因为Amazon只是在出租他们空闲的计算机而已。</p>
<p> <img src="/2021/01/02/CSAPP%E4%BA%91%E8%AE%A1%E7%AE%97/11.png" style="zoom:80%;"></p>
<p>问题是，云服务从上个世纪末就开始了，为什么只有Amazon到08年才开始着手做呢？因为一开始大公司都是被迫建属于自己的数据中心的。他们的计算机基本都是为自己的客户服务的。Amazon最初也没想到会从事这项业务，这并不是他们最初的目标——Amazon买那么多计算机只是为了能让他们的线上购物平台能容纳更多的流量而已。Google买那么多计算机只是为了用户对Gmail和Google地图等需求再不断增长。</p>
<p>我们发现如果公司能数以千计地购买计算机，那么所有的硬件设备都能比单价便宜5-7倍。之前之所以不买如此大批量的计算机是因为需求跟不上。但是 在过去的十几二十年中，互联网飞速发展，个人上网的成本也越来越低，因此对互联网的服务需求也越来越多。</p>
<p>还有，随着开源软件的数量越来越多，很多用户没有必要在自己的电脑上装很多开源软件，他们只需要租一台或者几台计算机并在上面运算就行了，更不用为运行的软件付钱，只需要付租金即可。</p>
<p><img src="/2021/01/02/CSAPP%E4%BA%91%E8%AE%A1%E7%AE%97/12.png" style="zoom:80%;"></p>
<p>那么如果我们现在是一家网络创业公司，为什么我们会偏向使用云计算服务呢？因为使用云服务能节省能源和资金。当我们第一次将我们的产品上线的时候，我们很可能会高估了软件的受欢迎的程度。如左图所示，对于蓝色的需求曲线，如果我们卖如红色直线那么多的计算机的话，会发现在低谷的时候，大部分计算机都是空闲的，我们不得不为这些空闲的计算机付费(维护、电力等)。但是如果使用云服务，那么从理论上来讲，我们就可以根据产品的客流量来调整我租赁的计算机服务——在白天增加计算机，在晚上释放空闲的计算机。哦只需要为我使用的东西付款而并不需要购买固定数量的计算机。</p>
<p><img src="/2021/01/02/CSAPP%E4%BA%91%E8%AE%A1%E7%AE%97/13.png" style="zoom:80%;"></p>
<p>或者，当我的产品爆火的时候，如果购买固定数量的计算机，很有可能是带不动这么大的客流量的：久而久之，哪些觉得体验很差的客户就会因此流失。比如当时比Facebook更早的社交软件 Friendster,活跃于2005年前后，他们公司就是因为供应赶不上爆发式的需求量，从而让很多用户感到恼火，最后被抛弃。但云计算却能很好的规避这一限制。</p>
<h2 id="What-can-you-do-with-this"><a href="#What-can-you-do-with-this" class="headerlink" title="What can you do with this"></a>What can you do with this</h2><p>在没有云计算之前，我们是不能想象1000台电脑用1个小时需要花多少钱的，因为我们必须花钱买下1000台电脑才能运行。但是有了云计算之后，1000台电脑运行1小时的价格和1台电脑运行1000小时的价格是一样的，这是具有革命意义的。</p>
<p>举个例子来说吧，华盛顿邮报搜集并在网上披露了希拉里克林顿的旅行文件。这在没有云计算的时候，只有一台电脑可能需要几周的时间来完成这些工作。但是有了云计算之后，他们可以利用大约200台计算机去做文件识别等工作，他们在不到一天的时间内就完成了整个工作，而且只花了不到200美元，这就是云计算的强大之处——在短时间内能以较低的成本使用大量计算机。</p>
<p>RAD Lab的一些研究生在演示提升MapReduce的运行速度的时候，借助云计算利用了1000台服务器，这在没有云计算的情况下是不能想象的。因此云计算也给一些软件能向业界证明自己的实力和性能创造了实实在在的机会。</p>
<p><img src="/2021/01/02/CSAPP%E4%BA%91%E8%AE%A1%E7%AE%97/15.png" style="zoom:80%;"></p>
<p>这是另外一个例子，当2001年911事件发生的时候，CNN网站的访问量在十五分钟内暴增10倍，这直接导致了他们使用的 minisuper超级计算机的宕机。而在2008年，当Animoto这个软件以插件的形式出现在Facebook当中的时候，在3天内每12个小时用户就翻一倍，但这个软件却能继续运行，因为它使用了云计算，只是从50台服务器增长到了3500台服务器，等到了使用高峰期过了以后，他们又削尖了服务器的规模。</p>
<p><img src="/2021/01/02/CSAPP%E4%BA%91%E8%AE%A1%E7%AE%97/16.png" style="zoom:80%;"></p>
<p>这是另外一个例子，我们可以用机器学习算法来分类Twitter上的垃圾推文或者邮件。对于640GB的数据，在一台电脑上可能要运行270个小时，但是如果我们使用Amazon的云计算服务，我们可能只需要3小时就能训练完成，只是需要花费255美金。</p>
<p>云计算还应用于遗传学中的基因组测序</p>
<p><img src="/2021/01/02/CSAPP%E4%BA%91%E8%AE%A1%E7%AE%97/17.png" style="zoom:80%;"></p>
<p>同时我们应该也注意到云计算所面临的挑战：</p>
<p>第一个就是cloud programming,也就是云编程。如果Mapreduce能在云上运行的话，那将是一件很好的事情。但这可能会非常棘手，因为Mapreduce依赖的是 令人尴尬的<strong>并行性</strong>。</p>
<p> 在这里我们要了解以下并行计算的两种方式：1. 分布式计算机，电脑和电脑是通过网络相连接的；2. 并行式计算机，电脑和电脑是通过总线相连接的。不管怎么样，我将计算机连接起来的目的是为了增加并行度，然后我们希望编写的程序能将各台计算机的CPU都能有效地利用起来。</p>
<p>对于我们来说，大多数情况下我们的程序仅在一颗CPU上运行，但是给我32颗CPU，我能通过什么办法将这32台计算机为我服务呢？有专门做并行计算的程序员，他们会写好相关的API，对于要编写天气预测软件的专业人士来说，他们只需要调用API就行了。这就叫做“透明”，也就是说我们并不需要了解内部的具体运作原理，只需要调用API即可。</p>
<p>Mapreduce 是处于调包和自己写程序中间的一种工具，它要比自己用python写并行程序要方便很多，又有较强的自由性，能决定数据和计算机的分配。Mapreduce对程序员的要求比较高，因为并不存在一个通用的方法来讲一个普通的程序转换成Mapreduce的程序。有些程序甚至根本不能转换成Mapreduce程序。所以Mapreduce对程序员来说是一个比较大的挑战，需要对并行计算有很深入的理解才能将程序写的高效，没有经过足够多的训练是很难写的。因此，现在云计算还没有到达一个足够友好、足够易用、足够高效的一个水平，虽然已经有一些很有用的框架。</p>
<p><img src="/2021/01/02/CSAPP%E4%BA%91%E8%AE%A1%E7%AE%97/18.png" style="zoom:80%;"></p>
<p><img src="/2021/01/02/CSAPP%E4%BA%91%E8%AE%A1%E7%AE%97/19.png" style="zoom:80%;"></p>
<h3 id="Big-Data"><a href="#Big-Data" class="headerlink" title="Big Data"></a>Big Data</h3><p>另一个挑战是关于大数据的。因为建造大量的光缆网络来搭建远程传输网络是非常贵的，而且发展得也很慢。 比如说，我向复制8TB的数据到Amazon的云上，使用20Mbps的光宽带，那么就要耗时35天并支付800多美元。而事实上，如果我们使用快递将8TB的磁盘插入Amazon的电脑，进行数据传输，只要一天的时间并只要支付150的运输费即可(事实上Amazon确实在提供这样的服务)。</p>
<p><img src="/2021/01/02/CSAPP%E4%BA%91%E8%AE%A1%E7%AE%97/20.png" style="zoom:80%;"></p>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><ol>
<li>云计算能让更多人用得起”超级电脑”的计算力，我们只需要一张信用卡就行了</li>
<li>让学生和学术界在更平民化的竞争环境中对产业产生更大的影响</li>
<li>也许下一个如同Google，eBay，Amazon的大公司可能来自一个小的企业家团队，即使没有大量的资金。</li>
</ol>
<p><img src="/2021/01/02/CSAPP%E4%BA%91%E8%AE%A1%E7%AE%97/21.png" style="zoom:80%;"> </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/12/29/%E6%9C%80%E5%A4%A7%E6%B5%81/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/29/%E6%9C%80%E5%A4%A7%E6%B5%81/" class="post-title-link" itemprop="url">最大流</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-12-29 12:45:30 / Modified: 21:20:48" itemprop="dateCreated datePublished" datetime="2020-12-29T12:45:30+08:00">2020-12-29</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="最大流"><a href="#最大流" class="headerlink" title="最大流"></a>最大流</h1><h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><p>无论是电网、水管网、还是其他地一些网络，他们都有一个共同点：网络传输都有<strong>方向</strong> 和 <strong>容量</strong>。设有带权图 $G=(V,E) , V={s,v_1,v_2,v_3,\cdots,t}$ 。 在图G中有两个特殊的点s和t，s称为源点，t称为汇点。图中各边地方向表示允许的流向，边上地权值表示该边允许通过的最大可能流量cap，且$cap\geq 0$ 称为边地容量。而且如果边集合E含有一条边$(u,v)$,必然不存在反向的平行边$(v,u)$,称这样的有向带权图为网络。 因为如果存在可以直接合并掉。</p>
<p>现在有一家公司想要从工厂s运往仓库t，找到一家代理公司。代理公司安排了若干货车和运输线路，中间要经过若干城市，边上的数值代表两个城市之间每天最多运送产品的数量。</p>
<p><img src="/2020/12/29/%E6%9C%80%E5%A4%A7%E6%B5%81/1.png" style="zoom:80%;"></p>
<p>这就类似一个地下水管网络，我们看不到水在地下管道内是怎么流动的，但是直到从进水口流进多少水，就会从出水口流出来多少水。</p>
<h4 id="网络流"><a href="#网络流" class="headerlink" title="网络流"></a>网络流</h4><p>网络流即网络上的流，是定义在网络边集E上的一个非负函数$flow={flow(u,v)}$, flow(u,v)是边上的流量</p>
<h4 id="可行流："><a href="#可行流：" class="headerlink" title="可行流："></a><strong>可行流</strong>：</h4><p>满足以下两个性质的网络流flow称为可行流</p>
<p>我们要从s将货物运送到t，需要满足几个条件</p>
<ol>
<li>容量约束，每个管道的实际流量 flow 不能超过该管道的最大容量 cap</li>
<li>流量守恒，除了源点是全部汇出没有汇入、汇点是全部汇入没有汇出的，其他中间节点<strong>流入和流出的量</strong>都是一模一样的，不允许中间节点有存货</li>
</ol>
<h4 id="源点s："><a href="#源点s：" class="headerlink" title="源点s："></a>源点s：</h4><p>源点主要是流出，但也有可能流入，例如货物运出后检测出的一些不合格产品需要返厂，这对源点来说就是流入量。因此，源点的净流出值f=流出量之和-流入量之和。即： $f=\sum<em>{(s,x)\in E}flow(s,x)-\sum</em>{(y,s)\in E}flow(y,s)$</p>
<p>从下图也可以反映出流量守恒和容量约束</p>
<p><img src="/2020/12/29/%E6%9C%80%E5%A4%A7%E6%B5%81/2.png" style="zoom:80%;"></p>
<p>现在我们提出网络最大流问题：在满足容量约束和流量守恒的前提下，在流网络中找到一个净输出最大的网络流。</p>
<p>我们先来学习 Ford&amp;Fullkerson提出的<strong>方法</strong>。该方法的基本思想是在残余网络中找可增广路，然后在实流网络中沿可增广路增流，直到不存在可增广路为止。这里要注意，找可增广路的方法有很多。</p>
<h4 id="残余网络："><a href="#残余网络：" class="headerlink" title="残余网络："></a>残余网络：</h4><p>每个网络G及其上的一个流flow，都对应一个残余网络G*.G* 和 G结点集相同，而网络G中的每条边对应G*中的一条边或者两条边。在残余网络中，与网络边对应的同向边是可增量(即<strong>还可以增加多少流量</strong>)，反向边是实际流量</p>
<p><img src="/2020/12/29/%E6%9C%80%E5%A4%A7%E6%B5%81/3.png" style="zoom:80%;"></p>
<p>那么我们可以根据原来的图来画出残余网络</p>
<p><img src="/2020/12/29/%E6%9C%80%E5%A4%A7%E6%B5%81/4.png" style="zoom:80%;"></p>
<h4 id="可增广路："><a href="#可增广路：" class="headerlink" title="可增广路："></a>可增广路：</h4><p>是残余网络G* 中一条从源点s到汇点t的简单路径。例如：$s-v_1-v_3-t$ 就是一条可增广路。如下图</p>
<p><img src="/2020/12/29/%E6%9C%80%E5%A4%A7%E6%B5%81/5.png" style="zoom:80%;"></p>
<p> 然后我们可以沿着增广路径来增加我们的货物数量。但是注意这里增加的量是路径上数值最小的路段。比如说这里能增加的量是5。在增加了货物数量之后，我们还需要修改增广路上的值。比如说这$s-v_1$从9改成4，$v_1-v_3$的线路被抹去，$v_3-t$的线路从12改为7.</p>
<h4 id="可增广量"><a href="#可增广量" class="headerlink" title="可增广量"></a>可增广量</h4><p>可增广量是指在可增广路p上每条边可以增加的流量最小值。求网络G的最大流，首先在残余网络中找可增广路，然后再实流网络G‘中沿可增广路增流，直到不存在可增广路为止。这是实流网络G’就是最大流网络。</p>
<h3 id="可增广路增流"><a href="#可增广路增流" class="headerlink" title="可增广路增流"></a>可增广路增流</h3><p>增流操作可以分为两个过程：一是在实流网络中增流，二是在残余网络中减流。因为残余网络中可增广路上的边值表示可增量，在实流网络中流量增加了，那么可增量就少了。</p>
<p>直接拿给我们一个残余网络，我们是不能判断哪一条是可增量哪一条是实际流量的</p>
<h4 id="实流网络增流"><a href="#实流网络增流" class="headerlink" title="实流网络增流"></a>实流网络增流</h4><p>在实流网络中沿着可增广路增流: 可增广路上同向边增加流量d，反向边减少流量d。</p>
<h4 id="残余网络减流"><a href="#残余网络减流" class="headerlink" title="残余网络减流"></a>残余网络减流</h4><p>在残余网络中沿着可增广路减流：可增广路上的同向边减少流量d，反向边增加流量d</p>
<h3 id="增广路算法"><a href="#增广路算法" class="headerlink" title="增广路算法"></a>增广路算法</h3><p><strong>增广路定理</strong> ：设flow是网络G的一个可行流，如果不存在从源点s到汇点t关于flow的可增广路p，则flow是G的一个最大流</p>
<p><strong>增广路算法</strong>： 增广路算法的基本思想是在残余网络中找到可增广路，然后在实流网络中沿着可增广路增流，在残余网络中沿可增广路减流；继续在残余网络中找可增广路，知道不存在可增广路为止。此时实流网络中的可行流就是所求的最大流。</p>
<h3 id="最短增广路算法"><a href="#最短增广路算法" class="headerlink" title="最短增广路算法"></a>最短增广路算法</h3><p>如何找到一条可增广路呢？我们可以设置最大容量优先，也可以是最短路径(广度优先)优先。 Edmonds-Karp算法就是以广度优先的增广路算法，又称为最短增广路算法(Shortest Augument Path, SAP)</p>
<h4 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h4><ol>
<li>初始化可行流 flow为零流，$vis[]$数组为$false$，$pre[]$数组为-1,vis数组代表该节点是否已经访问过，pre数组代表该节点的前驱结点 </li>
<li>令$vis[s] = true$,并将s加入队列q</li>
<li>如果队列不空，就继续下一步，否则算法结束，并返回最大流</li>
<li>队头元素new出队，在残余网络中检查new的所有邻接结点i。 如果i未被访问，那么就访问i结点并令 $vis[i]=true,pre[i] = new$。 如果 $i=t$ ，说明已经到达汇点，找到一条可增广路，转向第（5） 步；否则结点i加入队列q，转向第3步。</li>
<li>从汇点开始，通过前驱数组$pre[]$ ，逆向找可增广路上每条边值的最小值，即可增量d。</li>
<li>在实流网络中增流，在残余网络中减流，$Maxflow+=d$ ，并转向第(2)步</li>
</ol>
<p><img src="/2020/12/29/%E6%9C%80%E5%A4%A7%E6%B5%81/1.png" style="zoom:80%;"></p>
<p>比如说这个图，我们可以先来手工计算改图的最大流。</p>
<h4 id="时间复杂度"><a href="#时间复杂度" class="headerlink" title="时间复杂度"></a>时间复杂度</h4><p>从算法的描述中可以看出，找到一条可增广路的时间是 $O(E)$,最多会执行 $O(VE)$次，因为关键边的总数为$O(VE)$.因此总的时间复杂度为 $O(VE^2)$ ，其中 V为结点个数，E为边的数量</p>
<h4 id="空间复杂度："><a href="#空间复杂度：" class="headerlink" title="空间复杂度："></a>空间复杂度：</h4><p>使用了一个二维数组表示实流网络，因此空间复杂度为 $O(V^2)$</p>
<h3 id="代码剖析"><a href="#代码剖析" class="headerlink" title="代码剖析"></a>代码剖析</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">   <span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">/*首先我们定义一些常量，N代表结点数，M代表边数*/</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M = <span class="number">10000</span>;</span><br><span class="line"><span class="keyword">int</span> cnt,d;</span><br><span class="line"><span class="comment">/*然后我们定义head数组(链式前向星需要)，前驱数组，和是否已访问的标志数组*/</span></span><br><span class="line"><span class="keyword">int</span> head[N],pre[N];</span><br><span class="line"><span class="keyword">bool</span> vis[N];</span><br><span class="line"><span class="comment">/*接下来我们定义链式前向星，并对head数组初始化为-1，但是这个链式前向星还需要包含两个数据</span></span><br><span class="line"><span class="comment">分别是边的容量和流量</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> v,next;<span class="comment">// v代表除了head之外的另一个结点，next指的是下一条边的序号</span></span><br><span class="line">    <span class="keyword">int</span> cap,flow; 	</span><br><span class="line">&#125;E[M];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(head,<span class="number">-1</span>,<span class="keyword">sizeof</span>(head));</span><br><span class="line">    cnt = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但是在建图的时候，假设cap=10，flow=3，但这只是正向边。我们我们还需要录入反向边，也就是将cap设置为0，flow设置为-3这种网络叫做混合网络，将残余网络和实流网络混合在一起了：flow为正数的就是实流网络，负数为残余网络。<br>这样也能达到残余网络的效果，因为在增广路径上查找的时候是根据cap&gt;flow走的，走反向边可以重新调整流量。</p>
<p>下面是在链式前向星中插入边的函数，这里一开始需要将flow设置为零流</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> c)</span></span>&#123;</span><br><span class="line">    E[cnt].v = v;</span><br><span class="line">    E[cnt].cap = c;</span><br><span class="line">    E[cnt].flow = <span class="number">0</span>;</span><br><span class="line">    E[cnt].next = head[u];</span><br><span class="line">    head[u] = cnt++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>下面是广搜的算法</p>
<p>首先每次广搜之前都需要对前驱数组和标志数组进行一个重置</p>
<p>然后是对链式前向星进行广搜。</p>
<p>在这里我们pop掉队列里的头节点后，我们遍历它的周围节点，符合条件的就将它加入到队列当中。条件是头结点到该结点的这条边的 cap必须大于flow，而且是未被访问过的结点。同时我们维护一个最小值d，始终记录着这条增广路的可增广量</p>
<p>如果v等于t，就说明找到了一条从s到t的增广路径，那么我们就可以进入下一步骤，即增流减流</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">bfs</span><span class="params">(<span class="keyword">int</span> s, <span class="keyword">int</span> t)</span></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(pre,<span class="number">-1</span>,<span class="keyword">sizeof</span>(pre));</span><br><span class="line">    <span class="built_in">memset</span>(vis,<span class="number">0</span>,<span class="keyword">sizeof</span>(vis));</span><br><span class="line">    d = inf;</span><br><span class="line">    <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt;q;</span><br><span class="line">    vis[s] = <span class="number">1</span>;</span><br><span class="line">    q.push(s);</span><br><span class="line">    <span class="keyword">while</span>(!q.empty())&#123;</span><br><span class="line">        <span class="keyword">int</span> u = q.front();</span><br><span class="line">        q.pop();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = head[u];~i<span class="comment">/*i!=-1*/</span>;i=E[i].next)&#123;</span><br><span class="line">            <span class="keyword">int</span> v = E[i].v;</span><br><span class="line">            <span class="keyword">if</span>(!vis[v]&amp;&amp;E[i].cap&gt;E[i].flow)&#123;</span><br><span class="line">                d = <span class="built_in">min</span>(d,E[i].cap-E[i].flow);</span><br><span class="line">                vis[v] = <span class="number">1</span>;</span><br><span class="line">                pre[v] = i;<span class="comment">//边的下标，而不是结点</span></span><br><span class="line">                q.push(v);</span><br><span class="line">                <span class="keyword">if</span>(v==t)</span><br><span class="line">                    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>接下来是EK方法，我们用while循环将所有的增广路径找出。然后通过第二个while循环对增广路径进行输出，并对实流网络增流和残余网络减流。这里有一个小技巧，对于链式前向星的对应边，只需要 $E[i\wedge1]$ 即可，因为我们录入的时候都是成对成对的。一直到输出s为止。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">EK</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> maxflow=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(bfs(s,t))&#123;<span class="comment">//可以增广</span></span><br><span class="line">        maxflow +=d;</span><br><span class="line">        <span class="keyword">int</span> v = t;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"增广路径为："</span>&lt;&lt;t;</span><br><span class="line">        <span class="keyword">while</span> (v!=s)&#123;</span><br><span class="line">            <span class="keyword">int</span> i = pre[v];</span><br><span class="line">            E[i].flow +=d;</span><br><span class="line">            E[i^<span class="number">1</span>].flow -=d;</span><br><span class="line">            v=E[i^<span class="number">1</span>].v;</span><br><span class="line">            <span class="built_in">cout</span>&lt;&lt;<span class="string">"--"</span>&lt;&lt;v;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"\t 增流："</span>&lt;&lt;d&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>&lt;&lt;<span class="string">"网络的最大流值: "</span>&lt;&lt;maxflow&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> maxflow;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出网络函数，这里我们输出了链式前向星的结构</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printg</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"----------网络(链式前向星):-------------"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"v"</span>&lt;&lt;i&lt;&lt;<span class="string">" ["</span>&lt;&lt;head[i];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = head[j];~j;j=E[j].next)</span><br><span class="line">            <span class="built_in">cout</span>&lt;&lt;<span class="string">"]--["</span>&lt;&lt;E[j].v&lt;&lt;<span class="string">"\t"</span>&lt;&lt;E[j].cap&lt;&lt;<span class="string">"\t"</span>&lt;&lt;E[j].flow&lt;&lt;<span class="string">"\t"</span>&lt;&lt;E[j].next;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"]"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>还有一个输出实流边的函数。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printflow</span><span class="params">()</span></span>&#123;<span class="comment">//输出实流边</span></span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"----------实流边：----------"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=head[i];~j;j=E[j].next)</span><br><span class="line">            <span class="keyword">if</span>(E[j].flow&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                <span class="built_in">cout</span>&lt;&lt;<span class="string">"v"</span>&lt;&lt;i&lt;&lt;<span class="string">"--"</span>&lt;&lt;<span class="string">"v"</span>&lt;&lt;E[j].v&lt;&lt;<span class="string">"\t"</span>&lt;&lt;E[j].flow;</span><br><span class="line">                <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">            &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/12/29/%E6%9C%80%E5%A4%A7%E6%B5%81/6.png" style="zoom:80%;"></p>
<p><img src="/2020/12/29/%E6%9C%80%E5%A4%A7%E6%B5%81/7.png" style="zoom:80%;"></p>
<h2 id="Dinic算法"><a href="#Dinic算法" class="headerlink" title="Dinic算法"></a>Dinic算法</h2>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/15/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/15/">15</a><span class="page-number current">16</span><a class="page-number" href="/page/17/">17</a><span class="space">&hellip;</span><a class="page-number" href="/page/44/">44</a><a class="extend next" rel="next" href="/page/17/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Jason</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">439</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">68</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jason</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->

    

  

</body>
</html>

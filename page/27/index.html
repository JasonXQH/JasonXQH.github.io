<!DOCTYPE html>
<html lang="en">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"jasonxqh.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Jason‘s Blog">
<meta property="og:url" content="https://jasonxqh.github.io/page/27/index.html">
<meta property="og:site_name" content="Jason‘s Blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Jason">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://jasonxqh.github.io/page/27/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Jason‘s Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Jason‘s Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/05/30/react%E5%9F%BA%E7%A1%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/30/react%E5%9F%BA%E7%A1%80/" class="post-title-link" itemprop="url">react基础</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-05-30 21:50:26" itemprop="dateCreated datePublished" datetime="2020-05-30T21:50:26+08:00">2020-05-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-09-30 11:03:56" itemprop="dateModified" datetime="2021-09-30T11:03:56+08:00">2021-09-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/react/" itemprop="url" rel="index"><span itemprop="name">react</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="react基础（组件-组合组件）"><a href="#react基础（组件-组合组件）" class="headerlink" title="react基础（组件+组合组件）"></a>react基础（组件+组合组件）</h1><p>这篇文章的教程</p>
<p><a href="https://www.bilibili.com/video/BV1Sb411P79t?p=23" target="_blank" rel="noopener">Mosh的react课程</a></p>
<p>假设我们已经了解一些JavaScript的基础和OOP编程思想了</p>
<p>vscode中ctrl+p 实现文件查找</p>
<p>下载自动优化插件prettier，在保存时自动优化代码增加可读性</p>
<h2 id="Component"><a href="#Component" class="headerlink" title="Component"></a>Component</h2><h3 id="Setting-Up-the-Project"><a href="#Setting-Up-the-Project" class="headerlink" title="Setting Up the Project"></a>Setting Up the Project</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">create-react-app XXXX;</span><br><span class="line">npm start;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/1.png" style="zoom:67%;"></p>
<h3 id="Your-First-React-Component"><a href="#Your-First-React-Component" class="headerlink" title="Your First React Component"></a>Your First React Component</h3><p>我们接下来想做一个类似购物车的计数器</p>
<p>在src中新建文件夹components，里面新建counter.jsx</p>
<p>JSX是一种JavaScript的语法扩展，运用于 React 架构中，其格式比较像是模版语言，但事实上完全是在 JavaScript 内部实现的。元素是构成React应用的最小单位，JSX就是用来声明React当中的元素，React使用JSX来描述用户界面。</p>
<p>JSX可以使用引号来定义以字符串为值的属性：</p>
<p>const element = \<div tabindex\="\"0\"\\">\&lt;/div>;</div></p>
<p>也可以使用大括号来定义以JavaScript表达式为值的属性：</p>
<p>const element = \<img src\="\{user\.avatarUrl\}" \>;</p>
<p>下载 simple React Snippets 插件，imrc+cc即可生成代码</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span>  <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;  &#125;</span><br><span class="line">  render() &#123; </span><br><span class="line">    <span class="keyword">return</span> (  );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> ;</span><br></pre></td></tr></table></figure>
<p>修改一下即可</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Counter;</span><br></pre></td></tr></table></figure>
<p>index.js中做如下修改</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'./index.css'</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App'</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> serviceWorker <span class="keyword">from</span> <span class="string">'./serviceWorker'</span>;</span><br><span class="line"><span class="comment">/*添加component*/</span><span class="keyword">import</span> Counter <span class="keyword">from</span> <span class="string">'./components/counter'</span>;</span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;React.StrictMode&gt;</span><br><span class="line"><span class="comment">/*修改APP*/</span>   &lt;Counter /&gt;</span><br><span class="line">  &lt;<span class="regexp">/React.StrictMode&gt;,</span></span><br><span class="line"><span class="regexp">  document.getElementById('root')</span></span><br><span class="line"><span class="regexp">);</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ If you want your app to work offline and load faster, you can change</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ unregister() to register() below. Note this comes with some pitfalls.</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ Learn more about service workers: https:/</span><span class="regexp">/bit.ly/</span>CRA-PWA</span><br><span class="line">serviceWorker.unregister();</span><br></pre></td></tr></table></figure>
<p>结果如下：</p>
<p><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/2.png" style="zoom:67%;"></p>
<h3 id="Specifying-Children"><a href="#Specifying-Children" class="headerlink" title="Specifying Children"></a>Specifying Children</h3><p>我如果想在h1后面放一个按钮，我可以这么写</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">h1</span>&gt;</span><span class="tag">&lt;<span class="name">button</span>&gt;</span>Increment<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Counter;</span><br></pre></td></tr></table></figure>
<p>Babel 会 自动React.createElement(‘div’)</p>
<p>因为下载了prettier，所以在保存时自动优化成下列代码</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;Hello World&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button&gt;Increment&lt;/</span>button&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">export default Counter;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/3.png" style="zoom:100%;"></p>
<p><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/4.png" style="zoom:100%;"></p>
<p>观察源码我们可以发现我们生成的代码和刚才写的是一样的。当然我们也可以实现移除div标签。</p>
<p>通过把原来的div改成 React.Fragment即可</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line"><span class="comment">/*修改*/</span> &lt;React.Fragment&gt;</span><br><span class="line">        &lt;h1&gt;Hello World&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">/</span>*修改*<span class="regexp">/ &lt;button&gt;Increment&lt;/</span>button&gt;</span><br><span class="line">      &lt;<span class="regexp">/React.Fragment&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/5.png" style="zoom:167%;"></p>
<h3 id="Embedding-Expressions"><a href="#Embedding-Expressions" class="headerlink" title="Embedding Expressions"></a>Embedding Expressions</h3><p>我想在原来HelloWorld基础上变为动态文字，这时候我们在Counter类中添加一个新的属性state</p>
<p>此外我们需要把原来的h1 改成span 。在花括号中可以使用任何js的变量，包括表达式，或者这个类中的某个属性</p>
<p>现在我们只要修改count的值，网页会实现动态的变化。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    count: <span class="number">10</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;React.Fragment&gt;</span><br><span class="line"><span class="comment">/*修改*/</span> &lt;span&gt;&#123;<span class="keyword">this</span>.state.count&#125;&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button&gt;Increment&lt;/</span>button&gt;</span><br><span class="line">      &lt;<span class="regexp">/React.Fragment&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default Counter;</span></span><br></pre></td></tr></table></figure>
<p>此外，花括号里还可以这样写：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;span&gt;&#123;<span class="number">2</span>+<span class="number">2</span>&#125;&lt;<span class="regexp">/span&gt;</span></span><br></pre></td></tr></table></figure>
<p>也可以传入一个<strong>函数</strong></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    count: <span class="number">10</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;React.Fragment&gt;</span><br><span class="line">        &lt;span&gt;&#123;<span class="keyword">this</span>.formatCount()&#125;&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button&gt;Increment&lt;/</span>button&gt;</span><br><span class="line">      &lt;<span class="regexp">/React.Fragment&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">  formatCount() &#123;</span></span><br><span class="line"><span class="regexp">    const &#123; count &#125; = this.state;/</span><span class="regexp">/ 对象解构</span></span><br><span class="line"><span class="regexp">    return count === 0 ? "Zero" : count; </span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default Counter;</span></span><br></pre></td></tr></table></figure>
<p>那么count改成0，显示Zero</p>
<p><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/6.png" style="zoom:167%;"></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">formatCount() &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; count &#125; = <span class="keyword">this</span>.state;<span class="comment">// 对象解构</span></span><br><span class="line">  <span class="keyword">return</span> count === <span class="number">0</span> ? <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Zero<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span> : count; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们也可以直接输出一个标题，源码则变成了span中又一对h1</p>
<p><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/7.png" style="zoom:100%;"><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/8.png" style="zoom:100%;"></p>
<h3 id="Setting-Attributes"><a href="#Setting-Attributes" class="headerlink" title="Setting Attributes"></a>Setting Attributes</h3><p>怎么样给元素设置属性？</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    count: <span class="number">0</span>,</span><br><span class="line">    imageUrl: <span class="string">"http://picsum.photos/200"</span>,<span class="comment">//一个随机获取图片的网站</span></span><br><span class="line">  &#125;;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;React.Fragment&gt;</span><br><span class="line">        &lt;img src=&#123;<span class="keyword">this</span>.state.imageUrl&#125; alt=<span class="string">""</span> /&gt;</span><br><span class="line">        &lt;span&gt;&#123;<span class="keyword">this</span>.formatCount()&#125;&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button&gt;Increment&lt;/</span>button&gt;</span><br><span class="line">      &lt;<span class="regexp">/React.Fragment&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">  formatCount() &#123;</span></span><br><span class="line"><span class="regexp">    const &#123; count &#125; = this.state;</span></span><br><span class="line"><span class="regexp">    return count === 0 ? "Zero" : count;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default Counter;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/9.png" style="zoom:100%;"></p>
<p>上面的代码放到一边，这里说一下 className 因为js中的class是关键词，所以jsx中class标签对应的名称就是className</p>
<p>利用bootstrap中的css样式我们可以做以下修改：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    count: <span class="number">0</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;React.Fragment&gt;</span><br><span class="line">        &lt;span className=<span class="string">"badge badge-primary m-2"</span>&gt;&#123;<span class="keyword">this</span>.formatCount()&#125;&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button className="btn btn-secondary btn-sm"&gt;Increment&lt;/</span>button&gt;</span><br><span class="line">      &lt;<span class="regexp">/React.Fragment&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">  formatCount() &#123;</span></span><br><span class="line"><span class="regexp">    const &#123; count &#125; = this.state;</span></span><br><span class="line"><span class="regexp">    return count === 0 ? "Zero" : count;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">export default Counter;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/10.png" style="zoom:120%;"></p>
<p>有时候我想用一些确切的有针对性地样式，那么可以使用style</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    count: <span class="number">0</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  styles = &#123;</span><br><span class="line">    fontSize: <span class="number">10</span>,</span><br><span class="line">    fontWeight: <span class="string">"bold"</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;React.Fragment&gt;</span><br><span class="line">        &lt;span style=&#123;<span class="keyword">this</span>.styles&#125; className=<span class="string">"badge badge-primary m-2"</span>&gt;</span><br><span class="line">          &#123;<span class="keyword">this</span>.formatCount()&#125;</span><br><span class="line">        &lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button style=&#123;this.styles&#125; className="btn btn-secondary btn-sm"&gt;</span></span><br><span class="line"><span class="regexp">          Increment</span></span><br><span class="line"><span class="regexp">        &lt;/</span>button&gt;</span><br><span class="line">      &lt;<span class="regexp">/React.Fragment&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">  formatCount() &#123;</span></span><br><span class="line"><span class="regexp">    const &#123; count &#125; = this.state;</span></span><br><span class="line"><span class="regexp">    return count === 0 ? "Zero" : count;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">export default Counter;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/11.png" style="zoom:120%;"></p>
<p>这就是style的修改，我们先定义一个对象，然后在jsx中引用，当然我们如果用 行内样式表 。</p>
<h3 id="Rendering-Classes-Dynamically"><a href="#Rendering-Classes-Dynamically" class="headerlink" title="Rendering Classes Dynamically"></a>Rendering Classes Dynamically</h3><p>如何动态渲染css样式呢？现在0是蓝底的，我们想要在0的时候变成黄色的，其他情况是蓝色的，怎么办呢？</p>
<p>蓝色：badge badge-primary 黄色：badge badge-warning</p>
<p>通过{}的性质，我们可以新建一个classes字符串，然后对其做一个逻辑判断。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    count: <span class="number">0</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  styles = &#123;</span><br><span class="line">    fontSize: <span class="number">10</span>,</span><br><span class="line">    fontWeight: <span class="string">"bold"</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">let</span> classes = <span class="string">"badge m-2 badge-"</span>;</span><br><span class="line">    classes += <span class="keyword">this</span>.state.count === <span class="number">0</span> ? <span class="string">"warning"</span> : <span class="string">"primary"</span>;<span class="comment">//逻辑判断</span></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;React.Fragment&gt;</span><br><span class="line">        &lt;span style=&#123;<span class="keyword">this</span>.styles&#125; className=&#123;classes&#125;&gt;</span><br><span class="line">          &#123;<span class="keyword">this</span>.formatCount()&#125;</span><br><span class="line">        &lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button style=&#123;this.styles&#125; className="btn btn-secondary btn-sm"&gt;</span></span><br><span class="line"><span class="regexp">          Increment</span></span><br><span class="line"><span class="regexp">        &lt;/</span>button&gt;</span><br><span class="line">      &lt;<span class="regexp">/React.Fragment&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">  formatCount() &#123;</span></span><br><span class="line"><span class="regexp">    const &#123; count &#125; = this.state;</span></span><br><span class="line"><span class="regexp">    return count === 0 ? "Zero" : count;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">export default Counter;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/12.png" style="zoom:120%;"></p>
<p><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/13.png" style="zoom:120%;"></p>
<p>但是上面的写法有缺点，它污染了render()方法。更好的方法是把这两行放到单独的方法当中去这样计算的细节就不会和渲染耦合了</p>
<p>通过vscode中的重构，我们可以这样。ctrl+shift+R, 把那两行新建一个方法getBadgeClasses()。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    count: <span class="number">10</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  styles = &#123;</span><br><span class="line">    fontSize: <span class="number">10</span>,</span><br><span class="line">    fontWeight: <span class="string">"bold"</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;React.Fragment&gt;</span><br><span class="line">        &lt;span style=&#123;<span class="keyword">this</span>.styles&#125; className=&#123;<span class="keyword">this</span>.getBadgeClasses()&#125;&gt;</span><br><span class="line">          &#123;<span class="keyword">this</span>.formatCount()&#125;</span><br><span class="line">        &lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button style=&#123;this.styles&#125; className="btn btn-secondary btn-sm"&gt;</span></span><br><span class="line"><span class="regexp">          Increment</span></span><br><span class="line"><span class="regexp">        &lt;/</span>button&gt;</span><br><span class="line">      &lt;<span class="regexp">/React.Fragment&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">  getBadgeClasses() &#123;</span></span><br><span class="line"><span class="regexp">    let classes = "badge m-2 badge-";</span></span><br><span class="line"><span class="regexp">    classes += this.state.count === 0 ? "warning" : "primary";</span></span><br><span class="line"><span class="regexp">    return classes;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  formatCount() &#123;</span></span><br><span class="line"><span class="regexp">    const &#123; count &#125; = this.state;</span></span><br><span class="line"><span class="regexp">    return count === 0 ? "Zero" : count;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">export default Counter;</span></span><br></pre></td></tr></table></figure>
<h3 id="Rendering-Lists"><a href="#Rendering-Lists" class="headerlink" title="Rendering Lists"></a>Rendering Lists</h3><p>怎么渲染一个列表呢？可以利用map函数。同样的，想要动态渲染利用花括号</p>
<p>但是我们在每个列表项生成的时候，需要设置它的key属性。每个key的唯一性，只在当前列表有效。这样当react中的虚拟dom改变的时候，react能够迅速反应过来什么组件改变了，然后重新渲染浏览器dom以确保同步</p>
<p>在这里，我们直接把tag作为key值即可，因为tag是两两不同的</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    count: <span class="number">0</span>,</span><br><span class="line">    tags: [<span class="string">"tag1"</span>, <span class="string">"tag2"</span>, <span class="string">"tag3"</span>],</span><br><span class="line">  &#125;;</span><br><span class="line">  styles = &#123;</span><br><span class="line">    fontSize: <span class="number">10</span>,</span><br><span class="line">    fontWeight: <span class="string">"bold"</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;React.Fragment&gt;</span><br><span class="line">        &lt;span style=&#123;<span class="keyword">this</span>.styles&#125; className=&#123;<span class="keyword">this</span>.getBadgeClasses()&#125;&gt;</span><br><span class="line">          &#123;<span class="keyword">this</span>.formatCount()&#125;</span><br><span class="line">        &lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button style=&#123;this.styles&#125; className="btn btn-secondary btn-sm"&gt;</span></span><br><span class="line"><span class="regexp">          Increment</span></span><br><span class="line"><span class="regexp">        &lt;/</span>button&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">          &#123;<span class="keyword">this</span>.state.tags.map(<span class="function">(<span class="params">tag</span>) =&gt;</span> (</span><br><span class="line">            &lt;li key=&#123;tag&#125;&gt;&#123;tag&#125;&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">          ))&#125;</span></span><br><span class="line"><span class="regexp">        &lt;/u</span>l&gt;</span><br><span class="line">      &lt;<span class="regexp">/React.Fragment&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">  getBadgeClasses() &#123;</span></span><br><span class="line"><span class="regexp">    let classes = "badge m-2 badge-";</span></span><br><span class="line"><span class="regexp">    classes += this.state.count === 0 ? "warning" : "primary";</span></span><br><span class="line"><span class="regexp">    return classes;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  formatCount() &#123;</span></span><br><span class="line"><span class="regexp">    const &#123; count &#125; = this.state;</span></span><br><span class="line"><span class="regexp">    return count === 0 ? "Zero" : count;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">export default Counter;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/14.png" style="zoom:120%;"></p>
<h3 id="Conditional-Rendering"><a href="#Conditional-Rendering" class="headerlink" title="Conditional Rendering"></a>Conditional Rendering</h3><p>条件渲染</p>
<p>如果数组列表中至少有一项，那么我们就渲染它，否则我们就输出”No Tags”</p>
<p>在jsx中没有if之类的条件判断，因为jsx不是模板化引擎。所以我们要回到js层面构建这个方法</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    count: <span class="number">0</span>,</span><br><span class="line">    <span class="comment">// tags: ["tag1", "tag2", "tag3"]</span></span><br><span class="line">    tags: [],</span><br><span class="line">  &#125;;</span><br><span class="line">  renderTags() &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.state.tags.length === <span class="number">0</span>) <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>There are No Tags!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;ul&gt;</span><br><span class="line">        &#123;<span class="keyword">this</span>.state.tags.map(<span class="function">(<span class="params">tag</span>) =&gt;</span> (</span><br><span class="line">          &lt;li key=&#123;tag&#125;&gt;&#123;tag&#125;&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">        ))&#125;</span></span><br><span class="line"><span class="regexp">      &lt;/u</span>l&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">React.Fragment</span>&gt;</span></span></span><br><span class="line"><span class="xml">        &#123;/*  我们也可以直接在这里判断，通过&amp;&amp;  */&#125;</span></span><br><span class="line"><span class="xml">       	&#123;this.state.tags.length ===0&amp;&amp;"Please create a new tag!"&#125;    </span></span><br><span class="line"><span class="xml">        &#123;this.renderTags()&#125;<span class="tag">&lt;/<span class="name">React.Fragment</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Counter;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/15.png" style="zoom:120%;"></p>
<p>在render中我们用&amp;&amp;来进行简单的逻辑运算如果tags.length===0 才可以运行下面的代码。如果下面一个条件不是是非判断，而是字符串，那么如果是空串即false，非空串即为true</p>
<h3 id="Handling-Events"><a href="#Handling-Events" class="headerlink" title="Handling Events"></a>Handling Events</h3><p>所有的react元素都有基于dom事件的属性，例如按钮元素有一个onClick属性，还有双击事件、鼠标移入事件（onKey…）。</p>
<p>处理onClick事件：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        count: <span class="number">0</span>，</span><br><span class="line">    &#125;;</span><br><span class="line">    handleIncrement() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Increment Clicked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    render() &#123; </span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;button </span><br><span class="line">                    onClick=&#123;<span class="keyword">this</span>.handleIncrement&#125; </span><br><span class="line">                    className=<span class="string">'btn btn-secondary btn-sm'</span>&gt;</span><br><span class="line">                    Increment</span><br><span class="line">                &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>div&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> 值得注意的是，我们在”onClick={this.handleIncrement()}”中并没有调用方法，只是传入了一个引用。这与在js中的处理方式不同：在写行内代码的时候，我们直接调用 js 函数。</p>
<p>和下面的调用不同，因为我们需要一个返回值来给className赋值，所以我们要调用一个方法</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;span  className=&#123;<span class="keyword">this</span>.getBadgeClasses()&#125;&gt;</span><br><span class="line">  &#123;<span class="keyword">this</span>.formatCount()&#125;</span><br><span class="line">&lt;<span class="regexp">/span&gt;</span></span><br></pre></td></tr></table></figure>
<p>现在按按钮的时候console就会显示Increment Clicked了</p>
<p>现在我们要实现当鼠标点击Increment的时候，显示\<span\>标签中的数字。</span\></p>
<p>我们不能直接这么写!这样浏览器就爆炸了。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">handleIncrement() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Increment Clicked'</span>，<span class="keyword">this</span>.state.count);</span><br></pre></td></tr></table></figure>
<p>如果我们单单显示this，那么会指向一个undefined。 </p>
<h3 id="Binding-Event-Handlers"><a href="#Binding-Event-Handlers" class="headerlink" title="Binding Event Handlers"></a>Binding Event Handlers</h3><p>回到上面的问题。为什么会出现这个问题呢？明明是在类里面啊。</p>
<p>js中，调用函数的方式不同，this指代的对象也可能不同。如果一个函数被方法调用，那么this总是返回那个对象的引用。但是因为这个函数被以独立函数的方式引用，this会返回默认的全局对象(严格模式下为undefined)</p>
<p>那你会说我tm也没独立调用啊，我onClick={this.handleIncrement} 中有this啊。。</p>
<p>但是注意，这不是调用一个方法！！！</p>
<p>如果我们改成onClick={this.handleIncrement()} 那么我们会发现确实会显示  Increment Clicked 0（或者别的数字） 。而且点击按钮是没用的，因为他会默认你已经调用了这个方法了，而不是触发调用。</p>
<p>这就很矛盾了。如何解决，我们需要用下面这篇文章提到的bind()方法</p>
<p><a href="https://jasonxqh.github.io/2020/05/26/OOP-in-JavaScript/#more">https://jasonxqh.github.io/2020/05/26/OOP-in-JavaScript/#more</a> </p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    count: <span class="number">0</span>,</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="comment">// 在这里我们定义一个 Counter 的构造函数，因为Counter继承自Component，所以我们先要super一下</span></span><br><span class="line"><span class="comment">// 我们知道当调用bind的时候，会返回一个指向括号内对象的方法，我们再用handleIncrement接收</span></span><br><span class="line"><span class="comment">// 接受好以后我们就实现了让handleIncrement中的所有的this都指向了一个对象，也就是Counter对象</span></span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">super</span>();</span><br><span class="line">    <span class="keyword">this</span>.handleIncrement = <span class="keyword">this</span>.handleIncrement.bind(<span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleIncrement() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"Increment Clicked"</span>, <span class="keyword">this</span>.state.count);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;React.Fragment&gt;</span><br><span class="line">        &lt;span className=&#123;<span class="keyword">this</span>.getBadgeClasses()&#125;&gt;&#123;<span class="keyword">this</span>.formatCount()&#125;&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button</span></span><br><span class="line"><span class="regexp">          onClick=&#123;this.handleIncrement&#125;</span></span><br><span class="line"><span class="regexp">          className="btn btn-secondary btn-sm"</span></span><br><span class="line"><span class="regexp">        &gt;</span></span><br><span class="line"><span class="regexp">          Increment</span></span><br><span class="line"><span class="regexp">        &lt;/</span>button&gt;</span><br><span class="line">      &lt;<span class="regexp">/React.Fragment&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">  getBadgeClasses() &#123;</span></span><br><span class="line"><span class="regexp">    let classes = "badge m-2 badge-";</span></span><br><span class="line"><span class="regexp">    classes += this.state.count === 0 ? "warning" : "primary";</span></span><br><span class="line"><span class="regexp">    return classes;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  formatCount() &#123;</span></span><br><span class="line"><span class="regexp">    const &#123; count &#125; = this.state;</span></span><br><span class="line"><span class="regexp">    return count === 0 ? "Zero" : count;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">export default Counter;</span></span><br></pre></td></tr></table></figure>
<p>当然，我们也可以不适用constructor来实现这个功能，那就老样子，箭头函数，箭头函数中的this就继承自构造这个函数的对象。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">handleIncrement=<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"Increment Clicked"</span>, <span class="keyword">this</span>.state.count);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>而且我认为这种方式更加直观，能更好的帮助我们理解为什么调用引用而不是直接调用方法。</p>
<h3 id="Updating-the-State"><a href="#Updating-the-State" class="headerlink" title="Updating the State"></a>Updating the State</h3><p>现在我们要学习更新状态。也就是说当我们click的时候，要实现前面的数字+1</p>
<p>我们不能想的太简单，直接这么写.这是没有用的。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">handleIncrement=<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">   <span class="keyword">this</span>.state.count++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>事实上我们代码中的count确实++ 了，但是react不知道，所以视图并没有更新。为了解决这个问题，我们需要用到继承自component对象的一个方法setState() 这个方法告诉react state已经更新了，然后让react去同步视图</p>
<p>这里我们可以向setState方法传入我们需要实时修改的参数，我们传入一个对象，对象中的this.state.count属性会和state中的合并。或者当state中有相同的属性时，就会被覆盖</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">handleIncrement = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">   <span class="keyword">this</span>.setState(&#123; <span class="attr">count</span>: <span class="keyword">this</span>.state.count + <span class="number">1</span> &#125;);</span><br><span class="line"> &#125;;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/1.gif" style="zoom:80%;"></p>
<h3 id="What-Happens-When-State-Changes"><a href="#What-Happens-When-State-Changes" class="headerlink" title="What Happens When State Changes"></a>What Happens When State Changes</h3><p>原理就是当我们点击了increment按钮的时候，调用了setState方法。这个方法告诉react，state要变化了。react会计划调用一次render方法，也许未来某个时候会调用。这就是异步调用，他将在未来发生。所以在未来某一点调用render的时候 这个方法会返回新的react元素。</p>
<p><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/16.png" style="zoom:60%;"></p>
<p>就像这样，然后react会对比他们俩修改了什么地方。在这里，它会发现是span的内容变换了，因为span调用的是count属性的值。然后react会找到真实的DOM，找到对应的span，修改它让它与虚拟的DOM同步。所以除了span标签以外的所有地方都没有发生改变</p>
<h3 id="Passing-Event-Arguments"><a href="#Passing-Event-Arguments" class="headerlink" title="Passing Event Arguments"></a>Passing Event Arguments</h3><p>如何传递事件参数？现在我们的handleIncrement 没有参数，但事实上我们在日常生活中常常需要传入参数。 比如这里我们处理了装有商品的购物车。当我们点击增加按钮的时候想传入一个商品对象的id</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    count: <span class="number">0</span>,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  handleIncrement = <span class="function">(<span class="params">product</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(product);</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; <span class="attr">count</span>: <span class="keyword">this</span>.state.count + <span class="number">1</span> &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;React.Fragment&gt;</span><br><span class="line">        &lt;span className=&#123;<span class="keyword">this</span>.getBadgeClasses()&#125;&gt;&#123;<span class="keyword">this</span>.formatCount()&#125;&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button</span></span><br><span class="line"><span class="regexp">          onClick=&#123;() =&gt; this.handleIncrement(&#123; id: 1 &#125;) &#125;</span></span><br><span class="line"><span class="regexp">          className="btn btn-secondary btn-sm"</span></span><br><span class="line"><span class="regexp">        &gt;</span></span><br><span class="line"><span class="regexp">          Increment</span></span><br><span class="line"><span class="regexp">        &lt;/</span>button&gt;</span><br><span class="line">      &lt;<span class="regexp">/React.Fragment&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">  getBadgeClasses() &#123;</span></span><br><span class="line"><span class="regexp">    let classes = "badge m-2 badge-";</span></span><br><span class="line"><span class="regexp">    classes += this.state.count === 0 ? "warning" : "primary";</span></span><br><span class="line"><span class="regexp">    return classes;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  formatCount() &#123;</span></span><br><span class="line"><span class="regexp">    const &#123; count &#125; = this.state;</span></span><br><span class="line"><span class="regexp">    return count === 0 ? "Zero" : count;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">export default Counter;</span></span><br></pre></td></tr></table></figure>
<p>这样当我们渲染一组购物车商品的时候 我们可以用map方法访问商品的对象</p>
<p>我们当然可以新建一个doHandleIncrement 方法，但是这样会让代码更加凌乱，可读性不好，我们可以直接箭头函数。</p>
<p>当然我们可以不输出id:1 那么我们就直接传入商品对象</p>
<p>onClick = {() =&gt; this.handleIncrement(product)}即可</p>
<p>所以我们如果想对一个event handler  传递一个参数的话，我们就写一个<strong>箭头函数</strong>，在箭头函数中调用event handler并传入参数即可</p>
<h3 id="Setting-Up-the-Vidly-Project-新建vidly工程"><a href="#Setting-Up-the-Vidly-Project-新建vidly工程" class="headerlink" title="Setting Up the Vidly Project    新建vidly工程"></a>Setting Up the Vidly Project    新建vidly工程</h3><p> <a href="https://www.bilibili.com/video/BV1Sb411P79t?p=36" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1Sb411P79t?p=36</a></p>
<h3 id="Exercises"><a href="#Exercises" class="headerlink" title="Exercises"></a>Exercises</h3><p>在网页中做一张类似的表格。</p>
<p><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/17.png" style="zoom:60%;">re</p>
<p>我们需要在app.js中进行修改：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> Movies <span class="keyword">from</span> <span class="string">"./components/Movies"</span>;</span><br><span class="line"><span class="comment">//把原来的&lt;app/&gt;换成新的元素&lt;Movies/&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;main role=<span class="string">"main"</span> className=<span class="string">"container"</span>&gt;</span><br><span class="line">      &lt;Movies/&gt;</span><br><span class="line">    &lt;<span class="regexp">/main&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default App;</span></span><br></pre></td></tr></table></figure>
<h3 id="Building-the-Movies-Component"><a href="#Building-the-Movies-Component" class="headerlink" title="Building the Movies Component"></a>Building the Movies Component</h3><p>和上面一样，我们先从fakeMovieService中引入getMovies()方法。</p>
<p>然后建一个state来存放movies对象</p>
<p>然后见一张表格，可以用快捷键  table.table>thead>tr>th*4 (表头)和 tbody>tr>td*4 （表身）</p>
<p>利用map函数，对movies中的每一个movie对象进行渲染，每部电影生成一行</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; getMovies &#125; <span class="keyword">from</span> <span class="string">"../services/fakeMovieService"</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Movies</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    movies: getMovies(),</span><br><span class="line">  &#125;;</span><br><span class="line">  handleDelete = <span class="function">(<span class="params">movie</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//..</span></span><br><span class="line">  &#125;;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;table className=<span class="string">"table"</span>&gt;</span><br><span class="line">        &lt;thead&gt;</span><br><span class="line">          &lt;tr&gt;</span><br><span class="line">            &lt;th&gt;Title&lt;<span class="regexp">/th&gt;</span></span><br><span class="line"><span class="regexp">            &lt;th&gt;Genre&lt;/</span>th&gt;</span><br><span class="line">            &lt;th&gt;Stock&lt;<span class="regexp">/th&gt;</span></span><br><span class="line"><span class="regexp">            &lt;th&gt;Rate&lt;/</span>th&gt;</span><br><span class="line">          &lt;<span class="regexp">/tr&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>thead&gt;</span><br><span class="line">        &lt;tbody&gt;</span><br><span class="line">          &#123;<span class="keyword">this</span>.state.movies.map(<span class="function">(<span class="params">movie</span>) =&gt;</span> (</span><br><span class="line">            &lt;tr key = &#123;movie._id&#125;&gt;</span><br><span class="line">              &lt;td&gt;&#123;movie.title&#125;&lt;<span class="regexp">/td&gt;</span></span><br><span class="line"><span class="regexp">              &lt;td&gt;&#123;movie.genre.name&#125;&lt;/</span>td&gt;</span><br><span class="line">              &lt;td&gt;&#123;movie.numberInStock&#125;&lt;<span class="regexp">/td&gt;</span></span><br><span class="line"><span class="regexp">              &lt;td&gt;&#123;movie.dailyRentalRate&#125;&lt;/</span>td&gt;</span><br><span class="line">            &lt;<span class="regexp">/tr&gt;</span></span><br><span class="line"><span class="regexp">          ))&#125;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>tbody&gt;</span><br><span class="line">      &lt;<span class="regexp">/table&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">export default Movies;</span></span><br></pre></td></tr></table></figure>
<h3 id="Deleting-a-Movie"><a href="#Deleting-a-Movie" class="headerlink" title="Deleting a Movie"></a>Deleting a Movie</h3><p>要实现删除，也就是说我们在点击的时候要新建一张表格，新的这张表格不包含被删除的那行，然后再通过setState函数实现更新</p>
<p>我们在这里通过filter函数，对movies中的每一个元素进行判断是否与被删除id相等。然后用movies来接收filter函数返回一个新的列表。<br>利用setState,传入一个对象，然后和state中重复的属性会被新的属性覆盖，达到删除效果</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; getMovies &#125; <span class="keyword">from</span> <span class="string">"../services/fakeMovieService"</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Movies</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    movies: getMovies(),</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  handleDelete = <span class="function">(<span class="params">movie</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> movies = <span class="keyword">this</span>.state.movies.filter(<span class="function">(<span class="params">m</span>) =&gt;</span> m._id !== movie._id);</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; <span class="attr">movies</span>: movies &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;table className=<span class="string">"table"</span>&gt;</span><br><span class="line">        &lt;thead&gt;</span><br><span class="line">          &lt;tr&gt;</span><br><span class="line">            &lt;th&gt;Title&lt;<span class="regexp">/th&gt;</span></span><br><span class="line"><span class="regexp">            &lt;th&gt;Genre&lt;/</span>th&gt;</span><br><span class="line">            &lt;th&gt;Stock&lt;<span class="regexp">/th&gt;</span></span><br><span class="line"><span class="regexp">            &lt;th&gt;Rate&lt;/</span>th&gt;</span><br><span class="line">          &lt;<span class="regexp">/tr&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>thead&gt;</span><br><span class="line">        &lt;tbody&gt;</span><br><span class="line">          &#123;<span class="keyword">this</span>.state.movies.map(<span class="function">(<span class="params">movie</span>) =&gt;</span> (</span><br><span class="line">            &lt;tr key=&#123;movie._id&#125;&gt;</span><br><span class="line">              &lt;td&gt;&#123;movie.title&#125;&lt;<span class="regexp">/td&gt;</span></span><br><span class="line"><span class="regexp">              &lt;td&gt;&#123;movie.genre.name&#125;&lt;/</span>td&gt;</span><br><span class="line">              &lt;td&gt;&#123;movie.numberInStock&#125;&lt;<span class="regexp">/td&gt;</span></span><br><span class="line"><span class="regexp">              &lt;td&gt;&#123;movie.dailyRentalRate&#125;&lt;/</span>td&gt;</span><br><span class="line">              &lt;td&gt;</span><br><span class="line">                &lt;button</span><br><span class="line">                  onClick=&#123;() =&gt; <span class="keyword">this</span>.handleDelete(movie)&#125;</span><br><span class="line">                  className=<span class="string">"btn btn-danger btn-sm"</span></span><br><span class="line">                &gt;</span><br><span class="line">                  Delete</span><br><span class="line">                &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">              &lt;/</span>td&gt;</span><br><span class="line">            &lt;<span class="regexp">/tr&gt;</span></span><br><span class="line"><span class="regexp">          ))&#125;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>tbody&gt;</span><br><span class="line">      &lt;<span class="regexp">/table&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default Movies;</span></span><br></pre></td></tr></table></figure>
<h3 id="Conditional-Rendering-1"><a href="#Conditional-Rendering-1" class="headerlink" title="Conditional Rendering"></a>Conditional Rendering</h3><p>怎么进行条件渲染呢？就是如果电影数是0，那么显示There are no movies in the database </p>
<p>否则显示Showing n(行数) movies in the database</p>
<p>注意，react中return一个component只能返回一个元素，如果想要把两个元素合并，需要用到\<React.Fragment\></React.Fragment\></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; getMovies &#125; <span class="keyword">from</span> <span class="string">"../services/fakeMovieService"</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Movies</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    movies: getMovies(),</span><br><span class="line">  &#125;;</span><br><span class="line">  handleDelete = <span class="function">(<span class="params">movie</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> movies = <span class="keyword">this</span>.state.movies.filter(<span class="function">(<span class="params">m</span>) =&gt;</span> m._id !== movie._id);</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; <span class="attr">movies</span>: movies &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.state.movies.length === <span class="number">0</span>)</span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>There are no movies in the database <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;React.Fragment&gt;</span><br><span class="line">        &lt;h2&gt;Showing &#123;<span class="keyword">this</span>.state.movies.length&#125; movies <span class="keyword">in</span> the database&lt;<span class="regexp">/h2&gt;</span></span><br><span class="line"><span class="regexp">        &lt;table className="table"&gt;</span></span><br><span class="line"><span class="regexp">          &lt;thead&gt;</span></span><br><span class="line"><span class="regexp">            &lt;tr&gt;</span></span><br><span class="line"><span class="regexp">              &lt;th&gt;Title&lt;/</span>th&gt;</span><br><span class="line">              &lt;th&gt;Genre&lt;<span class="regexp">/th&gt;</span></span><br><span class="line"><span class="regexp">              &lt;th&gt;Stock&lt;/</span>th&gt;</span><br><span class="line">              &lt;th&gt;Rate&lt;<span class="regexp">/th&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>tr&gt;</span><br><span class="line">          &lt;<span class="regexp">/thead&gt;</span></span><br><span class="line"><span class="regexp">          &lt;tbody&gt;</span></span><br><span class="line"><span class="regexp">            &#123;this.state.movies.map((movie) =&gt; (</span></span><br><span class="line"><span class="regexp">              &lt;tr key=&#123;movie._id&#125;&gt;</span></span><br><span class="line"><span class="regexp">                &lt;td&gt;&#123;movie.title&#125;&lt;/</span>td&gt;</span><br><span class="line">                &lt;td&gt;&#123;movie.genre.name&#125;&lt;<span class="regexp">/td&gt;</span></span><br><span class="line"><span class="regexp">                &lt;td&gt;&#123;movie.numberInStock&#125;&lt;/</span>td&gt;</span><br><span class="line">                &lt;td&gt;&#123;movie.dailyRentalRate&#125;&lt;<span class="regexp">/td&gt;</span></span><br><span class="line"><span class="regexp">                &lt;td&gt;</span></span><br><span class="line"><span class="regexp">                  &lt;button</span></span><br><span class="line"><span class="regexp">                    onClick=&#123;() =&gt; this.handleDelete(movie)&#125;</span></span><br><span class="line"><span class="regexp">                    className="btn btn-danger btn-sm"</span></span><br><span class="line"><span class="regexp">                  &gt;</span></span><br><span class="line"><span class="regexp">                    Delete</span></span><br><span class="line"><span class="regexp">                  &lt;/</span>button&gt;</span><br><span class="line">                &lt;<span class="regexp">/td&gt;</span></span><br><span class="line"><span class="regexp">              &lt;/</span>tr&gt;</span><br><span class="line">            ))&#125;</span><br><span class="line">          &lt;<span class="regexp">/tbody&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>table&gt;</span><br><span class="line">      &lt;<span class="regexp">/React.Fragment&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default Movies;</span></span><br></pre></td></tr></table></figure>
<p>效果如下：<br><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/3.gif" style="zoom:150%;"></p>
<h2 id="Composing-Components-把组键组合"><a href="#Composing-Components-把组键组合" class="headerlink" title="Composing Components 把组键组合"></a>Composing Components 把组键组合</h2><h3 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h3><p>react程序基本上就是一个组件树，我们可以将组件组合在一起，变成一个复杂的UI</p>
<h3 id="Composing-Components"><a href="#Composing-Components" class="headerlink" title="Composing Components"></a>Composing Components</h3><p>现在我们要通过一个组件来渲染一组counters<img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/18.png" style="zoom:50%;"></p>
<p>在component文件夹中新建counters.jsx</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> Counter <span class="keyword">from</span> <span class="string">"./counter"</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counters</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">      counters:[</span><br><span class="line">          &#123;<span class="attr">id</span>: <span class="number">1</span>,<span class="attr">value</span>:<span class="number">4</span>&#125;,</span><br><span class="line">          &#123;<span class="attr">id</span>: <span class="number">2</span>,<span class="attr">value</span>:<span class="number">0</span>&#125;,</span><br><span class="line">          &#123;<span class="attr">id</span>: <span class="number">3</span>,<span class="attr">value</span>:<span class="number">0</span>&#125;,</span><br><span class="line">          &#123;<span class="attr">id</span>: <span class="number">4</span>,<span class="attr">value</span>:<span class="number">0</span>&#125;</span><br><span class="line">      ]</span><br><span class="line">  &#125;;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">          &#123;<span class="keyword">this</span>.state.counters.map(<span class="function"><span class="params">counter</span>=&gt;</span><span class="xml"><span class="tag">&lt;<span class="name">Counter</span> <span class="attr">key</span> = <span class="string">&#123;counter.id&#125;/</span>&gt;</span></span>)&#125;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default Counters;</span></span><br></pre></td></tr></table></figure>
<p>但是我们现在如果修改counters列表中对象的value值，在Dom上并不会显示。接下来我们就要解决这个问题</p>
<h3 id="Passing-Data-to-Components"><a href="#Passing-Data-to-Components" class="headerlink" title="Passing Data to Components"></a>Passing Data to Components</h3><p>每个组件都有他的props属性他会用用我们向counter组件传递的所有属性,在\<Counter \> 中我们不仅可以添加key（key值不算在props属性内），还可以添加value值，selected值（默认为true），就像这样</Counter></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">          &#123;<span class="keyword">this</span>.state.counters.map(<span class="function"><span class="params">counter</span>=&gt;</span><span class="xml"><span class="tag">&lt;<span class="name">Counter</span> <span class="attr">key</span> = <span class="string">&#123;counter.id&#125;</span> <span class="attr">value</span> = <span class="string">&#123;counter.value&#125;</span> <span class="attr">selected</span> = <span class="string">&#123;true&#125;/</span>&gt;</span></span>)&#125;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br></pre></td></tr></table></figure>
<p>然后我们回到counter,把state.value改成 this.props.value,即可显示</p>
<p><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/19.png" style="zoom:70%;"></p>
<h3 id="Passing-Children传递子元素"><a href="#Passing-Children传递子元素" class="headerlink" title="Passing Children传递子元素"></a>Passing Children传递子元素</h3><p>有个很特殊的props叫做children，也就是说当我们在传递组件的时候。有时候想要传递内容，比如说对话框等等。那么我们需要把原来的但标签\<counter \> 变成双标签，然后在里面传入我们想要传入的东西</counter></p>
<p><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/20.png" style="zoom:100%;"></p>
<p>这里有value属性，是之前设置的，还有children属性，type是h4</p>
<p>在counter的return中加上{<em>this</em>.props.children}，我们看到这样的ui</p>
<p><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/21.png" style="zoom:70%;"></p>
<p>当然，我们也可以把这个变成动态的,只要把原来的 Title 变成 Counter #{counter.id}即可</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">render() &#123;</span><br><span class="line">   <span class="keyword">return</span> (</span><br><span class="line">     &lt;div&gt;</span><br><span class="line">       &#123;<span class="keyword">this</span>.state.counters.map(<span class="function">(<span class="params">counter</span>) =&gt;</span> (</span><br><span class="line">         &lt;Counter key=&#123;counter.id&#125; value=&#123;counter.value&#125; selected=&#123;<span class="literal">true</span>&#125;&gt;</span><br><span class="line">           &lt;h4&gt;Counter #&#123;counter.id&#125;&lt;/h4&gt;</span><br><span class="line">         &lt;<span class="regexp">/Counter&gt;</span></span><br><span class="line"><span class="regexp">       ))&#125;</span></span><br><span class="line"><span class="regexp">     &lt;/</span>div&gt;</span><br><span class="line">   );</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/22.png" style="zoom:70%;"></p>
<p>事实上，我们可以直接把id当作一个props放在单个\<counter \> 标签当中去</counter></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Counter key=&#123;counter.id&#125; value=&#123;counter.value&#125; selected=&#123;<span class="literal">true</span>&#125; id=&#123;counter.id&#125;/&gt;</span><br></pre></td></tr></table></figure>
<p>然后呢在counter  的render中。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h4&gt;&#123;<span class="keyword">this</span>.props.id&#125;&lt;<span class="regexp">/h4&gt;</span></span><br></pre></td></tr></table></figure>
<p>如下图</p>
<p><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/23.png" style="zoom:70%;"></p>
<h3 id="Props-vs-State"><a href="#Props-vs-State" class="headerlink" title="Props vs State"></a>Props vs State</h3><p>props 就是我们给组件的 数据。state是组件本地或者私有的数据容器，其他组件是没有办法访问的。他完全只能在组件内被访问。</p>
<p>换句话说我们在counters中给Counter标签设置的属性，都传入到了Counter的props中。但我们不能在Counters中访问Counter组建的state，因为他是私有和本地的。</p>
<p>类似的，Counters有着自己的组件state,这个state也是对其他组件完全不可见的。</p>
<p>有时候组件是没有state的，他用props处理所有的数据。</p>
<p>props 和state的区别还在于props是只读的。换句话说我们不能在组件内部改变传入的数据。如果我们想在组件声明周期 修改输入的数据，那么我们需要把输入的内容复制到state当中而不是修改props</p>
<h3 id="Raising-and-Handling-Events"><a href="#Raising-and-Handling-Events" class="headerlink" title="Raising and Handling Events"></a>Raising and Handling Events</h3><p>利用快捷键新建一个按钮  btn.btn.btn-danger.btn.m-2</p>
<p>效果如图</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">className</span>=<span class="string">"btn btn-danger m-2"</span>&gt;</span>Delete<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/24.png" style="zoom:70%;"></p>
<p>在这里我想实现点击Delete按钮，然后这行的\<Counter \>就被删除了，怎么实现？</Counter></p>
<p>这将引入一个react非常重要的原则</p>
<p>The component that owns a piece of state, should be the one modifying it</p>
<p>也就是说只有组件自己才能修改自己的state</p>
<p>所以我们没有办法在counter.jsx终实现，因为这四个\<Counter \> 是在\<Counters \>中实现的，所以我们也要在counters.jsx中实现删除操作</Counters></Counter></p>
<p>所以我们需要让Counter组件发起一个事件，我们把这个时间叫做onDelete事件。然后Counters组件将会处理这个事件，也就是说我们要在Counters组件当中实现一个handleDelete()的方法</p>
<p>理解了原理之后我们在Counters组件中添加一个方法(并非最终实现),然后通过props给Counter组件传递一个方法的引用：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counters</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    counters: [</span><br><span class="line">      &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">value</span>: <span class="number">4</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">value</span>: <span class="number">0</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">value</span>: <span class="number">0</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">id</span>: <span class="number">4</span>, <span class="attr">value</span>: <span class="number">0</span> &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  handleDelete = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"Event Handler Called"</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &#123;<span class="keyword">this</span>.state.counters.map(<span class="function">(<span class="params">counter</span>) =&gt;</span> (</span><br><span class="line">          &lt;Counter</span><br><span class="line">            key=&#123;counter.id&#125;</span><br><span class="line"><span class="comment">// 在这里加一个onDelete的prop, 我们把这个设置成&#123;this.handleDelete&#125;方法</span></span><br><span class="line">            onDelete=&#123;<span class="keyword">this</span>.handleDelete&#125;</span><br><span class="line">            value=&#123;counter.value&#125;</span><br><span class="line">            selected=&#123;<span class="literal">true</span>&#125;</span><br><span class="line">            id=&#123;counter.id&#125;</span><br><span class="line">          /&gt;</span><br><span class="line">        ))&#125;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<p>然后再Counter组件中刚刚实现的button标签中,通过this.props.onDelete来调用该方法</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;button </span><br><span class="line">    onClick=&#123;<span class="keyword">this</span>.props.onDelete&#125; </span><br><span class="line">    className=<span class="string">"btn btn-danger m-2"</span>&gt;</span><br><span class="line">    Delete</span><br><span class="line">&lt;<span class="regexp">/button&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/25.png" style="zoom:150%;"><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/26.png" style="zoom:100%;"></p>
<h3 id="Updating-the-State-1"><a href="#Updating-the-State-1" class="headerlink" title="Updating the State"></a>Updating the State</h3><p>接下来我们要正式做删除操作</p>
<p>向上文提及的，我们先测试一下handleDelete函数能不能正确打印counterID，如果能打印，那么我们可以放心删除</p>
<p>counters.jsx中做如下修改</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">handleDelete =  <span class="function"><span class="params">counterID</span>  =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"Event Handler Called"</span>,counterID);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>counter.js 如下</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onClick=&#123;()=&gt;<span class="keyword">this</span>.props.onDelete(<span class="keyword">this</span>.props.id)&#125; className=<span class="string">"btn btn-danger m-2"</span>&gt;</span><br><span class="line">	Delete</span><br><span class="line">&lt;<span class="regexp">/button&gt;</span></span><br></pre></td></tr></table></figure>
<p>看来是成功的</p>
<p><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/27.png" style="zoom:100%;"></p>
<p>现在我们回去更新Counters组件中的元素了，像以前说的，我们不直接修改state，而是重新生成一个数组然后让setState去更新原来的数组</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">handleDelete = <span class="function">(<span class="params">counterID</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> counters = <span class="keyword">this</span>.state.counters.filter(<span class="function">(<span class="params">c</span>) =&gt;</span> c.id !== counterID);</span><br><span class="line">  <span class="keyword">this</span>.setState(&#123; counters &#125;);</span><br><span class="line">    <span class="comment">//待更新的state.counters和我们新的counters 名称一样，所以可以简写</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>关于id和key，这里有一点要补充。</p>
<p>key是react组件内部的信息，我们在Counter组件的prop中是没有办法访问它的。但是id我们可以通过组件内部的props来读取。但是问题又出现了，我这里定义了很多props，每个props都是独立的，那么当随着我们传入props的增多，代码的管理会变得混乱不堪。所以我们直接把他们打包： counter = {counter} 这个counte 本来就包含了所有counter对象的数据。然后我们只需要在Counter组件中做如下修改</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">  state = &#123;</span><br><span class="line">    value: <span class="keyword">this</span>.props.counter.value,</span><br><span class="line">  &#125;;</span><br><span class="line">&lt;button</span><br><span class="line">    onClick=&#123;() =&gt; <span class="keyword">this</span>.props.onDelete(<span class="keyword">this</span>.props.counter.id)&#125;</span><br><span class="line">    className=<span class="string">"btn btn-danger m-2"</span></span><br><span class="line">&gt;</span><br><span class="line">    Delete</span><br><span class="line">&lt;<span class="regexp">/button&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="Single-Source-of-Truth"><a href="#Single-Source-of-Truth" class="headerlink" title="Single Source of Truth"></a>Single Source of Truth</h3><p>接下来我们想要做的是一个Reset按钮，按下以后所有现有的Counter的数值都会归零。那么，这时候我们就需要解决一个问题——</p>
<p>我们知道如果我们要重置，那么就要新建一个列表，把里面所有counter的value都置为0，然后setState，但是这对handleDelete和handleIncrement 都是可行的，因为Delete是直接对Counters进行修改，Increment则是通过调用Counters中\<counter \>标签对counter.value的修改。</counter></p>
<p>而对reset却不可以。</p>
<p>在counter中，他的value继承自我们传入的props属性，这个属性一旦传入就没有办法修改了，而我们一开始已经传入了四个counter的值分别是4，0，0，0 当我们尝试着重置的时候，counters中的state.counter已经被修改，但是counter中的state.value 却并没有得到修改。而当我们显示数字的时候，我们显示的是this.state.value,所以并不会改变。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">state = &#123;</span><br><span class="line">  value: <span class="keyword">this</span>.props.counter.value,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>所以问题就在这，我们对父子关系的组件（Counter是子组件，Counters是父组件）却有两套值得来源，这是万万不可的，所以我们要删除Counter的本地state数据，Counter中对本地state操作都转移到对父组件Counters操作中props的操作。</p>
<p>我们把Counter这种类型的组件 叫做受控组件，受控组件没有自己的state，他所有的数据都来自props，之后在数据需要要改变的时候发起事件。所以这种空间完全是被它的父控件控制的</p>
<p><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/28.png" style="zoom:80%;"></p>
<h3 id="Removing-the-Local-State"><a href="#Removing-the-Local-State" class="headerlink" title="Removing the Local State"></a>Removing the Local State</h3><p>修改过后的counter.jsx如下</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  	<span class="comment">//这里删去了state</span></span><br><span class="line">  	<span class="comment">//这里删去了handleIncrement方法，而改成在button中发起一个event</span></span><br><span class="line"> 	<span class="comment">//就是和onDelete一样</span></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.props);</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;React.Fragment&gt;</span><br><span class="line">        &lt;span className=&#123;<span class="keyword">this</span>.getBadgeClasses()&#125;&gt;&#123;<span class="keyword">this</span>.formatCount()&#125;&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button</span></span><br><span class="line"><span class="regexp">          onClick=&#123;() =&gt; this.props.onIncrement(this.props.counter)&#125;</span></span><br><span class="line"><span class="regexp">          className="btn btn-secondary btn-sm"</span></span><br><span class="line"><span class="regexp">        &gt;</span></span><br><span class="line"><span class="regexp">          Increment</span></span><br><span class="line"><span class="regexp">        &lt;/</span>button&gt;</span><br><span class="line">        &lt;button</span><br><span class="line">          onClick=&#123;() =&gt; <span class="keyword">this</span>.props.onDelete(<span class="keyword">this</span>.props.counter.id)&#125;</span><br><span class="line">          className=<span class="string">"btn btn-danger m-2"</span></span><br><span class="line">        &gt;</span><br><span class="line">          Delete</span><br><span class="line">        &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">        &lt;p&gt;&lt;/</span>p&gt;</span><br><span class="line">      &lt;<span class="regexp">/React.Fragment&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">  getBadgeClasses() &#123;</span></span><br><span class="line"><span class="regexp">    let classes = "badge m-2 badge-";</span></span><br><span class="line"><span class="regexp">      /</span><span class="regexp">/这里原本是this.state.value 我们把它改成了props中的value</span></span><br><span class="line"><span class="regexp">    classes += this.props.counter.value === 0 ? "warning" : "primary";</span></span><br><span class="line"><span class="regexp">    return classes;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  formatCount() &#123;</span></span><br><span class="line"><span class="regexp">    /</span><span class="regexp">/ 下面这行等于  const value = this.props.counter.value ;</span></span><br><span class="line"><span class="regexp">    const &#123; value &#125; = this.props.counter;</span></span><br><span class="line"><span class="regexp">    return value === 0 ? "Zero" : value;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">export default Counter;</span></span><br></pre></td></tr></table></figure>
<p>然后我们在counters.jsx中处理counter发起的events</p>
<p>我们先在render中添加一个reset标签和一个onIncrement 的prop</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">render() &#123;</span><br><span class="line">  return (</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">onClick</span>=<span class="string">&#123;this.handleReset&#125;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">className</span>=<span class="string">"btn btn-primary btn-sm m-2"</span></span></span><br><span class="line"><span class="tag">      &gt;</span></span><br><span class="line">        Reset</span><br><span class="line">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;/<span class="name">br</span>&gt;</span></span><br><span class="line">      &#123;this.state.counters.map((counter) =&gt; (</span><br><span class="line">        <span class="tag">&lt;<span class="name">Counter</span></span></span><br><span class="line"><span class="tag">          <span class="attr">key</span>=<span class="string">&#123;counter.id&#125;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">onDelete</span>=<span class="string">&#123;this.handleDelete&#125;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">onIncrement</span>=<span class="string">&#123;this.handleIncrement&#125;//一个onIncrement的prop</span></span></span><br><span class="line"><span class="tag">          <span class="attr">counter</span>=<span class="string">&#123;counter&#125;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">      ))&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后我们来处理 handleIncrement</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">handleIncrement = <span class="function">(<span class="params">counter</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//首先我们通过 spread运算符来克隆一个和counters一模一样的数组</span></span><br><span class="line">  <span class="keyword">const</span> counters = [...this.state.counters];</span><br><span class="line">    <span class="comment">//然后我们获得传入的counter在counters数组当中的位置</span></span><br><span class="line">  <span class="keyword">const</span> index = counters.indexOf(counter);</span><br><span class="line">    <span class="comment">//然后我们再单独克隆一个该传入的counter对象，并把它赋值给新的counters</span></span><br><span class="line">  counters[index] = &#123; ...counter &#125;;</span><br><span class="line">    <span class="comment">//最后我们把这行的counter.value++</span></span><br><span class="line">  counters[index].value++;</span><br><span class="line">  <span class="keyword">this</span>.setState(&#123; counters &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>最后我们写一个reset函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> handleReset = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line"><span class="comment">//我们通过map函数把所有的counter.value都置为0，然后 用新的counters数组接收</span></span><br><span class="line">   <span class="keyword">const</span> counters = <span class="keyword">this</span>.state.counters.map(<span class="function">(<span class="params">c</span>) =&gt;</span> &#123;</span><br><span class="line">     c.value = <span class="number">0</span>;</span><br><span class="line">     <span class="keyword">return</span> c;</span><br><span class="line">   &#125;);</span><br><span class="line">     <span class="comment">//利用setState更新</span></span><br><span class="line">   <span class="keyword">this</span>.setState(&#123; counters &#125;);</span><br><span class="line"> &#125;;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/4.gif" style="zoom:80%;"></p>
<h3 id="Multiple-Components-in-Sync-多组件同步"><a href="#Multiple-Components-in-Sync-多组件同步" class="headerlink" title="Multiple Components in Sync 多组件同步"></a>Multiple Components in Sync 多组件同步</h3><p>现在我想在网页上加一个导航栏，里面记录当前有多少的counter，这样我们就需要把组件树改成这样子</p>
<p><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/29.png" style="zoom:80%;"></p>
<p>现在我们需要把index.js中的\<Counters \>改成\<App \> 然后再App.js中把这些组件放进去</App></Counters></p>
<p>当然了我们要在component当中新建一个navbar.jsx</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NavBar</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;nav className=<span class="string">"navbar navbar-light bg-light"</span>&gt;</span><br><span class="line">        &lt;a <span class="class"><span class="keyword">class</span></span>=<span class="string">"navbar-brand"</span> href=<span class="string">"#"</span>&gt;</span><br><span class="line">          Navbar</span><br><span class="line">        &lt;<span class="regexp">/a&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>nav&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> NavBar;</span><br></pre></td></tr></table></figure>
<p>然后对App.js做如下修改</p>
<p>App.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">"./App.css"</span>;</span><br><span class="line"><span class="keyword">import</span> NavBar <span class="keyword">from</span> <span class="string">"./components/navbar"</span>;</span><br><span class="line"><span class="keyword">import</span> Counters <span class="keyword">from</span> <span class="string">"./components/counters"</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;React.Fragment&gt;</span><br><span class="line">      &lt;NavBar /&gt;</span><br><span class="line">      &lt;main className=<span class="string">"container"</span>&gt;</span><br><span class="line">        &lt;Counters /&gt;</span><br><span class="line">      &lt;<span class="regexp">/main&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>React.Fragment&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure>
<p>这就是我们结果了，我们看到组件树和我们要达到的是一致的</p>
<p><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/30.png" style="zoom:80%;"><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/31.png" style="zoom:80%;"></p>
<h3 id="Lifting-the-State-Up"><a href="#Lifting-the-State-Up" class="headerlink" title="Lifting the State Up"></a>Lifting the State Up</h3><p>我们现在想在导航栏中显示当前还有几个counter，那么问题就来了</p>
<p>之前我们是通过props的特性，把Counters组件当中的state传到Counter组件当中的，</p>
<p>因为Counters和Counter是上下层的关系。但是Counters组件和NavBar没有父子关系。怎么办呢？</p>
<p>当我们想要在两个没有上下父子级别的关系的组件中共享和同步数据的时候物品，我们就需要上移组件。在这里我们需要把Counters和NavBar组件上移到他们共同的父级App组件当中。然后我们在App的所有的子组件全部使用props。如下图</p>
<p><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/32.png" style="zoom: 67%;"></p>
<p>（奇怪，为什么app.js中的app还是function而不是class呢。。。所以我改了一下）</p>
<p>我们已经知道App.js中已经包含了我们的\<NavBar \> 那么我们现在就把Counters中的所有的方法都移到App组件当中，把Counters变成一个受控组件（就如当初Counter被变成受控组件一样） ，然后通过props来抛出一个event交给App来处理</NavBar></p>
<p>移动过后的counters.js(一滴都不剩了)</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> Counter <span class="keyword">from</span> <span class="string">"./counter"</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counters</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;button</span><br><span class="line">            <span class="comment">//原来的onReset现在变成了一个prop</span></span><br><span class="line">          onClick=&#123;<span class="keyword">this</span>.props.onReset&#125;</span><br><span class="line">          className=<span class="string">"btn btn-primary btn-sm m-2"</span></span><br><span class="line">        &gt;</span><br><span class="line">          Reset</span><br><span class="line">        &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">        &lt;br&gt;&lt;/</span>br&gt;</span><br><span class="line">            &#123;<span class="comment">/*原来的state.counters现在变成了一个prop.counters</span></span><br><span class="line"><span class="comment">            	原来的onDelete 变成了props.onDelete</span></span><br><span class="line"><span class="comment">            	....</span></span><br><span class="line"><span class="comment">            */</span>&#125;</span><br><span class="line">        &#123;<span class="keyword">this</span>.props.counters.map(<span class="function">(<span class="params">counter</span>) =&gt;</span> (</span><br><span class="line">          &lt;Counter</span><br><span class="line">            key=&#123;counter.id&#125;</span><br><span class="line">            onDelete=&#123;<span class="keyword">this</span>.props.onDelete&#125;</span><br><span class="line">            onIncrement=&#123;<span class="keyword">this</span>.props.onIncrement&#125;</span><br><span class="line">            counter=&#123;counter&#125;</span><br><span class="line">          /&gt;</span><br><span class="line">        ))&#125;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">export default Counters;</span></span><br></pre></td></tr></table></figure>
<p>同样的我们在App.js中需要接受并处理这些events</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">"./App.css"</span>;</span><br><span class="line"><span class="keyword">import</span> NavBar <span class="keyword">from</span> <span class="string">"./components/navbar"</span>;</span><br><span class="line"><span class="keyword">import</span> Counters <span class="keyword">from</span> <span class="string">"./components/counters"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; render &#125; <span class="keyword">from</span> <span class="string">"react-dom"</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;&#125;;</span><br><span class="line">  state = &#123;</span><br><span class="line">    counters: [</span><br><span class="line">      &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">value</span>: <span class="number">4</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">value</span>: <span class="number">0</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">value</span>: <span class="number">0</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">id</span>: <span class="number">4</span>, <span class="attr">value</span>: <span class="number">0</span> &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  handleDelete = <span class="function">(<span class="params">counterID</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> counters = <span class="keyword">this</span>.state.counters.filter(<span class="function">(<span class="params">c</span>) =&gt;</span> c.id !== counterID);</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; counters &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  handleIncrement = <span class="function">(<span class="params">counter</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> counters = [...this.state.counters];</span><br><span class="line">    <span class="keyword">const</span> index = counters.indexOf(counter);</span><br><span class="line">    counters[index] = &#123; ...counter &#125;;</span><br><span class="line">    counters[index].value++;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; counters &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  handleReset = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> counters = <span class="keyword">this</span>.state.counters.map(<span class="function">(<span class="params">c</span>) =&gt;</span> &#123;</span><br><span class="line">      c.value = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">return</span> c;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; counters &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="comment">//上边的，都是原来counters.js中的内容</span></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;React.Fragment&gt;</span><br><span class="line">        &lt;NavBar</span><br><span class="line"><span class="comment">//在NavBar中，我们需要传入一个totalCounters 的prop供给NavBar组件显示</span></span><br><span class="line">          totalCounters=&#123;<span class="keyword">this</span>.state.counters.filter(<span class="function"><span class="params">c</span> =&gt;</span> c.value &gt; <span class="number">0</span>).length&#125;</span><br><span class="line">        /&gt;</span><br><span class="line">        &lt;main className=<span class="string">"container"</span>&gt;</span><br><span class="line">          &lt;Counters</span><br><span class="line">        <span class="comment">//给Counters几个props行行好吧。。让Counters的events能被处理吧</span></span><br><span class="line">            counters=&#123;<span class="keyword">this</span>.state.counters&#125;</span><br><span class="line">            onReset=&#123;<span class="keyword">this</span>.handleReset&#125;</span><br><span class="line">            onIncrement=&#123;<span class="keyword">this</span>.handleIncrement&#125;</span><br><span class="line">            onDelete=&#123;<span class="keyword">this</span>.handleDelete&#125;</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;<span class="regexp">/main&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>React.Fragment&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure>
<p>最后在NavBar组件当中显示</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NavBar</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;nav className=<span class="string">"navbar navbar-light bg-light"</span>&gt;</span><br><span class="line">        &lt;a <span class="class"><span class="keyword">class</span></span>=<span class="string">"navbar-brand"</span> href=<span class="string">"#"</span>&gt;</span><br><span class="line">          Navbar&#123;<span class="string">" "</span>&#125;</span><br><span class="line">            &#123;<span class="comment">/*新建一个span标签来显示我们的数字*/</span>&#125;</span><br><span class="line">          &lt;span className=<span class="string">"badge badge-pill badge-secondary"</span>&gt;</span><br><span class="line">            &#123;<span class="keyword">this</span>.props.totalCounters&#125;</span><br><span class="line">          &lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>a&gt;</span><br><span class="line">      &lt;<span class="regexp">/nav&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default NavBar;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/5.gif" style="zoom:80%;"></p>
<h3 id="Stateless-Functional-Components"><a href="#Stateless-Functional-Components" class="headerlink" title="Stateless Functional Components"></a>Stateless Functional Components</h3><p>我们回到NavBar组件，他没有state，没有方法，他只从props中获取数据，对于这种组件我们就可以把它变成</p>
<p>Stateless Functional Components，也就是我们说的无state的功能性属性</p>
<p>这时候我们就可以用function来定义了</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> NavBar = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;nav className=<span class="string">"navbar navbar-light bg-light"</span>&gt;</span><br><span class="line">      &lt;a <span class="class"><span class="keyword">class</span></span>=<span class="string">"navbar-brand"</span> href=<span class="string">"#"</span>&gt;</span><br><span class="line">        Navbar&#123;<span class="string">" "</span>&#125;</span><br><span class="line">        &lt;span className=<span class="string">"badge badge-pill badge-secondary"</span>&gt;</span><br><span class="line">          &#123;<span class="keyword">this</span>.props.totalCounters&#125;</span><br><span class="line">        &lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>a&gt;</span><br><span class="line">    &lt;<span class="regexp">/nav&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;;</span></span><br><span class="line"><span class="regexp">export default NavBar;</span></span><br></pre></td></tr></table></figure>
<p>原来如此，这就解决了刚才为什么App是一个函数的原因了</p>
<h3 id="Destructuring-Arguments"><a href="#Destructuring-Arguments" class="headerlink" title="Destructuring Arguments"></a>Destructuring Arguments</h3><p>现在我们来简化代码，我已经不想漫天打props了，我们怎么才能解决啊？</p>
<p>可以用解构（Destructuring）</p>
<h4 id="在函数中解构props"><a href="#在函数中解构props" class="headerlink" title="在函数中解构props"></a>在函数中解构props</h4><p>在NavBar中我们直接收了一个prop</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="comment">//那么我们就可以在传入参数的时候解构</span></span><br><span class="line"><span class="keyword">const</span> NavBar = <span class="function">(<span class="params">&#123;totalCounters&#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;nav className=<span class="string">"navbar navbar-light bg-light"</span>&gt;</span><br><span class="line">      &lt;a <span class="class"><span class="keyword">class</span></span>=<span class="string">"navbar-brand"</span> href=<span class="string">"#"</span>&gt;</span><br><span class="line">        Navbar&#123;<span class="string">" "</span>&#125;</span><br><span class="line">        &lt;span className=<span class="string">"badge badge-pill badge-secondary"</span>&gt;</span><br><span class="line"> &#123;<span class="comment">/*这样在span里就可以不用打this.props.totalCounters了，直接totalCounters就完事了*/</span>&#125;</span><br><span class="line">          &#123;totalCounters&#125;</span><br><span class="line">        &lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>a&gt;</span><br><span class="line">    &lt;<span class="regexp">/nav&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;;</span></span><br><span class="line"><span class="regexp">export default NavBar;</span></span><br></pre></td></tr></table></figure>
<h4 id="在class中解构props"><a href="#在class中解构props" class="headerlink" title="在class中解构props"></a>在class中解构props</h4><p>那么在Counters组件中我们有多个props，我们也可以解构他</p>
<p>解构的顺序不要紧，只要名字对上即可</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> Counter <span class="keyword">from</span> <span class="string">"./counter"</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counters</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">      <span class="comment">//那么这时候我们就直接用解构的语法来写了</span></span><br><span class="line">    <span class="keyword">const</span> &#123; onReset, counters, onDelete, onIncrement &#125; = <span class="keyword">this</span>.props;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;button onClick=&#123;onReset&#125; <span class="comment">/*简化*/</span>className=<span class="string">"btn btn-primary btn-sm m-2"</span>&gt;</span><br><span class="line">          Reset</span><br><span class="line">        &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">        &lt;br&gt;&lt;/</span>br&gt;</span><br><span class="line">        &#123;<span class="comment">/*简化*/</span>counters.map(<span class="function">(<span class="params">counter</span>) =&gt;</span> (</span><br><span class="line">          &lt;Counter</span><br><span class="line">            key=&#123;counter.id&#125;</span><br><span class="line">            onDelete=&#123;onDelete&#125;<span class="comment">/*简化*/</span></span><br><span class="line">            onIncrement=&#123;onIncrement&#125;<span class="comment">/*简化*/</span></span><br><span class="line">            counter=&#123;counter&#125;</span><br><span class="line">          /&gt;</span><br><span class="line">        ))&#125;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default Counters;</span></span><br></pre></td></tr></table></figure>
<h3 id="Lifecycle-Hooks"><a href="#Lifecycle-Hooks" class="headerlink" title="Lifecycle Hooks"></a>Lifecycle Hooks</h3><p>一个组件会经历很多的状态，在他的生命周期中，第一个状态是mount  状态，这是组件被实例化并被创建到DOM当中。这里有一些可以加入组件的特殊方法，react会自动调用这些方法</p>
<p>我们叫这些方法为Lifecycle Hooks。它们允许我们在整个生命周期中勾住某个特定的时刻，并做一些事情。</p>
<p>在Mount 状态中有三个 Lifecycle Hooks：constructor，render，componentDidMount，react会顺序调用这些方法</p>
<p>第二个状态是Update状态，他在state或者组件的props改变的时候发生。在这个状态中有render 和 componentDidUpdate两个Lifecycle Hooks。当我们改变state或者传入新的props的时候，会依次调用这两个Lifecycle Hooks</p>
<p>第三个状态是UnMount.这个状态是当一个组件被DOM移除（删除）的时候发生，里面有componentWillUnmount一个Lifecycle Hooks，当我们要删除一个组建的时候，会被react调用</p>
<p><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/34.png" style="zoom:80%;"></p>
<p>还有很多其他的Lifecycle Hooks，我们很少用到</p>
<h3 id="Mounting-Phase"><a href="#Mounting-Phase" class="headerlink" title="Mounting Phase"></a>Mounting Phase</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line">	state = &#123;&#125;;</span><br><span class="line">	<span class="comment">//因为构造器只调用一次，所以这是设置属性的最佳时机</span></span><br><span class="line">	<span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">		<span class="keyword">super</span>(props);</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'App-Constructor'</span>);</span><br><span class="line">		<span class="keyword">this</span>.state = <span class="keyword">this</span>.props.something;</span><br><span class="line">	&#125;;</span><br><span class="line">	componentDidMount()&#123;</span><br><span class="line">		<span class="comment">//Ajax Call</span></span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'App-Mounted'</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	handleIncrement = <span class="function"><span class="params">counter</span>=&gt;</span>&#123;</span><br><span class="line">		</span><br><span class="line">	&#125;;</span><br><span class="line">	render()&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'App-Rendered'</span>);</span><br><span class="line">        <span class="comment">//....</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/33.png" style="zoom:80%;"></p>
<h3 id="Updating-Phase"><a href="#Updating-Phase" class="headerlink" title="Updating Phase"></a>Updating Phase</h3><p>//…</p>
<h3 id="Unmounting-Phase"><a href="#Unmounting-Phase" class="headerlink" title="Unmounting Phase"></a>Unmounting Phase</h3><p>//…</p>
<h3 id="Exercise-Decrement-Button"><a href="#Exercise-Decrement-Button" class="headerlink" title="Exercise- Decrement Button"></a>Exercise- Decrement Button</h3><p>加一个Decrement 按钮实现-1 操作</p>
<h3 id="Solution-Decrement-Button"><a href="#Solution-Decrement-Button" class="headerlink" title="Solution - Decrement Button"></a>Solution - Decrement Button</h3><p>在counter.jsx 中加一个按钮</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;button</span><br><span class="line">  onClick=&#123;()=&gt;<span class="keyword">this</span>.props.onDecrement(<span class="keyword">this</span>.props.counter)&#125;</span><br><span class="line">  className=<span class="string">"btn btn-secondary btn-sm m-2"</span></span><br><span class="line">&gt;</span><br><span class="line">  Decrement</span><br><span class="line">&lt;<span class="regexp">/button&gt;</span></span><br></pre></td></tr></table></figure>
<p>在counters.jsx中处理这个事件，向上(App)抛</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counters</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; onReset, counters, onDelete, onIncrement ,onDecrement &#125; = <span class="keyword">this</span>.props;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;button onClick=&#123;onReset&#125; className=<span class="string">"btn btn-primary btn-sm m-2"</span>&gt;</span><br><span class="line">          Reset</span><br><span class="line">        &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">        &lt;br&gt;&lt;/</span>br&gt;</span><br><span class="line">        &#123;counters.map(<span class="function">(<span class="params">counter</span>) =&gt;</span> (</span><br><span class="line">          &lt;Counter</span><br><span class="line">            key=&#123;counter.id&#125;</span><br><span class="line">            onDelete=&#123;onDelete&#125;</span><br><span class="line">            onIncrement=&#123;onIncrement&#125;</span><br><span class="line">            onDecrement=&#123;onDecrement&#125;</span><br><span class="line">            counter=&#123;counter&#125;</span><br><span class="line">          /&gt;</span><br><span class="line">        ))&#125;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<p>在App.js中处理这个事件</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">  handleDerement = <span class="function">(<span class="params">counter</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> counters = [...this.state.counters];</span><br><span class="line">    <span class="keyword">const</span> index = counters.indexOf(counter);</span><br><span class="line">    counters[index] = &#123; ...counter &#125;;</span><br><span class="line">    counters[index].value--;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; counters &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//....</span></span><br><span class="line">render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;React.Fragment&gt;</span><br><span class="line">        &lt;NavBar</span><br><span class="line">          totalCounters=&#123;<span class="keyword">this</span>.state.counters.filter(<span class="function">(<span class="params">c</span>) =&gt;</span> c.value &gt; <span class="number">0</span>).length&#125;</span><br><span class="line">        /&gt;</span><br><span class="line">        &lt;main className=<span class="string">"container"</span>&gt;</span><br><span class="line">          &lt;Counters</span><br><span class="line">            counters=&#123;<span class="keyword">this</span>.state.counters&#125;</span><br><span class="line">            onReset=&#123;<span class="keyword">this</span>.handleReset&#125;</span><br><span class="line">            onIncrement=&#123;<span class="keyword">this</span>.handleIncrement&#125;</span><br><span class="line">            onDecrement=&#123;<span class="keyword">this</span>.handleDerement&#125;<span class="comment">//加一个功能</span></span><br><span class="line">            onDelete=&#123;<span class="keyword">this</span>.handleDelete&#125;</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;<span class="regexp">/main&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>React.Fragment&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h3 id="Exercise-Like-Component"><a href="#Exercise-Like-Component" class="headerlink" title="Exercise- Like Component"></a>Exercise- Like Component</h3><p>设计一个接口实现点赞操作</p>
<p><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/39.png" alt></p>
<h3 id="Solution-Like-Component"><a href="#Solution-Like-Component" class="headerlink" title="Solution- Like Component"></a>Solution- Like Component</h3><p>首先我们要在<a href="https://fontawesome.com/v4.7.0/icon/heart-o" target="_blank" rel="noopener">https://fontawesome.com/v4.7.0/icon/heart-o</a> 复制 心形代码，注意，实心的和空心的差了一个-o：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-heart-o"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>然后我们在components 中新建一个common文件夹，里面包含Like组件</p>
<p>like组件声明如下,Like是一个受控组件，我们也可以把它当成funtcion来写，但这里还是class</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Input: liked:boolean</span></span><br><span class="line"><span class="comment">// Output: onClick</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Like</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">let</span> classes = <span class="string">"fa fa-heart"</span>;</span><br><span class="line"> <span class="comment">//如果不喜欢（liked=false） 那么就变成空心，这里liked是一个prop,是父组件传给Like的</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.props.liked) classes += <span class="string">"-o"</span>;</span><br><span class="line">      <span class="comment">//返回一个心型组件</span></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;i</span><br><span class="line">          <span class="comment">//组件中有onClick方法，当点击的时候会调用props中的onClick属性</span></span><br><span class="line">        onClick=&#123;<span class="keyword">this</span>.props.onClick&#125;</span><br><span class="line">          <span class="comment">//当鼠标移动到心上的时候，会变成手状</span></span><br><span class="line">        style=&#123;&#123; <span class="attr">cursor</span>: <span class="string">"pointer"</span> &#125;&#125;</span><br><span class="line">          <span class="comment">//className 就不用我多说了8</span></span><br><span class="line">        className=&#123;classes&#125;</span><br><span class="line">        aria-hidden=<span class="string">"true"</span></span><br><span class="line">      &gt;&lt;<span class="regexp">/i&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default Like;</span></span><br></pre></td></tr></table></figure>
<p>那么我们需要在Movies中添加一个onClick的props，然后新建一个handler处理这个event</p>
<p>首先新添加一列，让他囊括我Like组件，并且传入一个liked和一个onClick props</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;td&gt;</span><br><span class="line">  &lt;Like</span><br><span class="line">	liked=&#123;movie.liked&#125;</span><br><span class="line">      <span class="comment">// 其中 onClick因为是要把那行的心变成实心的，所以我们要通过箭头函数传入一个movie</span></span><br><span class="line">    onClick=&#123;() =&gt; <span class="keyword">this</span>.handleLike(movie)&#125;</span><br><span class="line">  /&gt;</span><br><span class="line">&lt;<span class="regexp">/td&gt;</span></span><br></pre></td></tr></table></figure>
<p>然后我们开始处理handleLike，一样的套路我们新建一个movies列表，然后把对应的movies的liked属性取反。（原来喜欢的变成不喜欢，原来不喜欢的变成喜欢，因为我默认liked属性是不喜欢的，所以一开始都是空心的）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">handleLike = <span class="function">(<span class="params">movie</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> movies = [...this.state.movies];</span><br><span class="line">  <span class="keyword">const</span> number = movies.indexOf(movie);</span><br><span class="line">  movies[number] = &#123; ...movies[number] &#125;;</span><br><span class="line">  movies[number].liked = !movies[number].liked;</span><br><span class="line">  <span class="keyword">this</span>.setState(&#123; movies &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/30/react%E5%9F%BA%E7%A1%80/7.gif" style="zoom:120%;"></p>
<h3 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h3><p>这一章节我们学了</p>
<p><strong>如何利用props传递数据</strong></p>
<p><strong>发起和处理时间</strong></p>
<p><strong>怎么上移state（利用这种技巧我可以让多个组件共享一个数据源）</strong></p>
<p><strong>Functional Component</strong> </p>
<p><strong>Lifecycle Hooks</strong></p>
<p>后文请移步</p>
<p><a href="https://jasonxqh.github.io/2020/06/02/react基础2/">react基础2</a></p>
<p><a href="https://jasonxqh.github.io/2020/06/04/react基础3/">react基础3表单与后端</a></p>
<p><a href="https://jasonxqh.github.io/2020/06/05/react基础4授权与部署/">react基础4授权与部署</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/05/30/sscanf%E5%92%8Csprintf/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/30/sscanf%E5%92%8Csprintf/" class="post-title-link" itemprop="url">sscanf和sprintf</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-05-30 14:25:46" itemprop="dateCreated datePublished" datetime="2020-05-30T14:25:46+08:00">2020-05-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-06-21 12:43:42" itemprop="dateModified" datetime="2020-06-21T12:43:42+08:00">2020-06-21</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="sscanf和sprintf"><a href="#sscanf和sprintf" class="headerlink" title="sscanf和sprintf"></a>sscanf和sprintf</h1><p>这两个函数其实是C中的函数，所以操作的是字符数组，不是string类型，当然C++也能用。</p>
<p>还可以用streamstring 类实现</p>
<p>文章学习自</p>
<p><a href="https://www.cnblogs.com/hujunzheng/p/5042068.html" target="_blank" rel="noopener">博客</a></p>
<h2 id="常见的格式串"><a href="#常见的格式串" class="headerlink" title="常见的格式串"></a>常见的格式串</h2><p>　    %% 印出百分比符号，不转换。<br>　　%c 整数转成对应的 ASCII 字元。<br>　　%d 整数转成十进位。<br>　　%f 倍精确度数字转成浮点数。<br>　　%o 整数转成八进位。<br>　　%s 整数转成字符串。<br>　　%x 整数转成小写十六进位。<br>　　%X 整数转成大写十六进位。<br>　　%n sscanf(str, “%d%n”, &amp;dig, &amp;n)，%n表示一共转换了多少位的字符</p>
<h2 id="sprintf函数"><a href="#sprintf函数" class="headerlink" title="sprintf函数"></a>sprintf函数</h2><p>　　 sprintf函数原型为 int sprintf(char <em>str, const char </em>format, …)。作用是格式化字符串，具体功能如下所示：</p>
<p>　　（1）将数字变量转换为字符串。</p>
<p>　　（2）得到整型变量的16进制和8进制字符串。</p>
<p>　　（3）连接多个字符串。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> str[<span class="number">256</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">    <span class="keyword">int</span> data = <span class="number">1024</span>;</span><br><span class="line">    <span class="comment">//将data转换为字符串</span></span><br><span class="line">    <span class="built_in">sprintf</span>(str,<span class="string">"%d"</span>,data);</span><br><span class="line">    <span class="comment">//获取data的十六进制</span></span><br><span class="line">    <span class="built_in">sprintf</span>(str,<span class="string">"0x%X"</span>,data);</span><br><span class="line">    <span class="comment">//获取data的八进制</span></span><br><span class="line">    <span class="built_in">sprintf</span>(str,<span class="string">"0%o"</span>,data);</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span> *s1 = <span class="string">"Hello"</span>;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span> *s2 = <span class="string">"World"</span>;</span><br><span class="line">    <span class="comment">//连接字符串s1和s2</span></span><br><span class="line">    <span class="built_in">sprintf</span>(str,<span class="string">"%s %s"</span>,s1,s2);</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;str&lt;&lt;<span class="built_in">endl</span>; </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="sscanf函数"><a href="#sscanf函数" class="headerlink" title="sscanf函数"></a>sscanf函数</h2><p>sscanf函数原型为int sscanf(const char <em>str, const char </em>format, …)。将参数str的字符串根据参数format字符串来转换并格式化数据，转换后的结果存于对应的参数内。具体功能如下：</p>
<p>　　（1）根据格式从字符串中提取数据。如从字符串中取出整数、浮点数和字符串等。</p>
<p>　　（2）取指定长度的字符串</p>
<p>　　（3）取到指定字符为止的字符串</p>
<p>　　（4）取仅包含指定字符集的字符串</p>
<p>　　（5）取到指定字符集为止的字符串</p>
<p> 例子：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> s[<span class="number">15</span>] = <span class="string">"123.432,432"</span>;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="keyword">double</span> f1;</span><br><span class="line">    <span class="keyword">int</span> f2;</span><br><span class="line">    <span class="built_in">sscanf</span>(s, <span class="string">"%lf,%d%n"</span>, &amp;f1, &amp;f2, &amp;n);</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;f1&lt;&lt;<span class="string">" "</span>&lt;&lt;f2&lt;&lt;<span class="string">" "</span>&lt;&lt;n;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> ch1[<span class="number">20</span>],ch2[<span class="number">20</span>],ch3[<span class="number">40</span>],str[<span class="number">20</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;  </span><br><span class="line">   <span class="keyword">while</span>(gets(ch3))</span><br><span class="line">   &#123;</span><br><span class="line">      <span class="keyword">if</span>(!<span class="built_in">strlen</span>(ch3))</span><br><span class="line">         <span class="keyword">break</span>;</span><br><span class="line">      <span class="built_in">sscanf</span>(ch3,<span class="string">"%s %s"</span>,ch1,ch2); </span><br><span class="line">       <span class="comment">//...</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/05/30/sstream/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/30/sstream/" class="post-title-link" itemprop="url">sstream</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-05-30 13:39:55 / Modified: 14:17:10" itemprop="dateCreated datePublished" datetime="2020-05-30T13:39:55+08:00">2020-05-30</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="C-中的ssstream"><a href="#C-中的ssstream" class="headerlink" title="C++中的ssstream"></a>C++中的ssstream</h1><p>本文学习自</p>
<p><a href="https://www.cnblogs.com/wuchanming/p/3906176.html" target="_blank" rel="noopener">博客1</a></p>
<p><a href="https://blog.csdn.net/xw20084898/article/details/21939811" target="_blank" rel="noopener">博客2</a></p>
<p>C++引入了ostringstream、istringstream、stringstream这三个类，要使用他们创建对象就必须包含sstream.h头文件。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt;</span></span></span><br></pre></td></tr></table></figure>
<p><strong>istringstream类</strong>用于执行C++风格的串流的输入操作。<br><strong>ostringstream</strong>类用于执行C风格的串流的输出操作。<br><strong>stringstream</strong>类同时可以支持C风格的串流的输入输出操作。</p>
<p>istringstream类是从istream和stringstreambase派生而来，</p>
<p>ostringstream是从ostream和 stringstreambase派生而来，</p>
<p> stringstream则是从iostream类和stringstreambase派生而来。</p>
<p>继承关系如下图</p>
<p><img src="/2020/05/30/sstream/1.gif" alt></p>
<h3 id="istringstream"><a href="#istringstream" class="headerlink" title="istringstream"></a>istringstream</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">istringstream</span> istr;</span><br><span class="line">    istr.str(<span class="string">"1 56.7"</span>);</span><br><span class="line">    <span class="comment">//上述两个过程可以简单写成 istringstream istr("1 56.7");</span></span><br><span class="line">	<span class="comment">//str()成员函数的使用可以让istringstream对象返回一个string字符串</span></span><br><span class="line">    <span class="comment">// 例如本例中的输出操作 cout&lt;&lt;istr.str(); 。</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; istr.str() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">int</span> a;</span><br><span class="line">    <span class="keyword">float</span> b;</span><br><span class="line">    istr &gt;&gt; a;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; a &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    istr &gt;&gt; b;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; b &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">输出:</span></span><br><span class="line"><span class="comment">1 56.7</span></span><br><span class="line"><span class="comment">1</span></span><br><span class="line"><span class="comment">56.7</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>上例中，构造字符串流的时候，空格会成为字符串参数的内部分界，例子中对a,b对象的输入”赋值”操作证明了这一点，字符串的空格成为了整型数据与浮点型数据的分解点，利用分界获取的方法我们事实上完成了字符串到整型对象与浮点型对象的拆分转换过程。</p>
<h3 id="ostringstream"><a href="#ostringstream" class="headerlink" title="ostringstream"></a>ostringstream</h3><p>ostringstream同样是由一个string对象构造而来，ostringstream类向一个string插入字符。<br>ostringstream的构造函数原形如下：<br>ostringstream::ostringstream(string str); </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">ostringstream</span> ostr;</span><br><span class="line">    ostr.str(<span class="string">"abc"</span>);</span><br><span class="line"><span class="comment">//如果构造的时候设置了字符串参数,那么增长操作的时候不会从结尾开始增加,而是修改原有数据  </span></span><br><span class="line">    ostr.<span class="built_in">put</span>(<span class="string">'d'</span>);</span><br><span class="line">    ostr.<span class="built_in">put</span>(<span class="string">'e'</span>);</span><br><span class="line">    ostr.<span class="built_in">put</span>(<span class="string">'f'</span>);</span><br><span class="line">    ostr.<span class="built_in">put</span>(<span class="string">'g'</span>);</span><br><span class="line">    ostr&lt;&lt;<span class="string">"hi"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">string</span> gstr = ostr.str();</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;gstr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//输出	defghi</span></span><br></pre></td></tr></table></figure>
<p>在上例代码中，我们通过put()或者左移操作符可以不断向ostr插入<strong>单个字符或者是字符串</strong>，通过str()函数返回增长过后的完整字符串数据</p>
<p>但值得注意的一点是，当构造的时候对象内已经存在字符串数据的时候，那么增长操作的时候不会从结尾开始增加,而是修改原有数据,超出的部分增长。</p>
<h3 id="stringstream"><a href="#stringstream" class="headerlink" title="stringstream"></a>stringstream</h3><p>它是用于C++风格的字符串的输入输出的。 stringstream的构造函数原形如下：</p>
<p>stringstream::stringstream(string str);</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function"><span class="built_in">stringstream</span> <span class="title">ostr</span><span class="params">(<span class="string">"ccc"</span>)</span></span>;</span><br><span class="line">ostr.<span class="built_in">put</span>(<span class="string">'d'</span>);</span><br><span class="line">ostr.<span class="built_in">put</span>(<span class="string">'e'</span>);</span><br><span class="line">ostr&lt;&lt;<span class="string">"fg"</span>;</span><br><span class="line"><span class="built_in">string</span> gstr = ostr.str();</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;gstr&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> a;</span><br><span class="line">ostr&gt;&gt;a;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">输出</span></span><br><span class="line"><span class="comment">defg</span></span><br><span class="line"><span class="comment">d</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h4 id="stringstream在题目中常常用来做字符串切割"><a href="#stringstream在题目中常常用来做字符串切割" class="headerlink" title="stringstream在题目中常常用来做字符串切割"></a>stringstream在题目中常常用来做字符串切割</h4><p>1.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//每次读取一行字符串，一直读到空串为止</span></span><br><span class="line"><span class="keyword">while</span>(getline(<span class="built_in">cin</span>,s))</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span>(!s.<span class="built_in">size</span>())</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">    <span class="comment">//假设输入每行有两个单词，那么就可以利用stringstream的特性读入两个字符串，以空格为间</span></span><br><span class="line">    <span class="function"><span class="built_in">stringstream</span> <span class="title">ss</span><span class="params">(s)</span></span>;</span><br><span class="line">	ss&gt;&gt;word1&gt;&gt;word2;</span><br><span class="line">    <span class="comment">//.....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">//可以先用 clear( )以及 str( ) 將指定字串設定成一开始的內容，再用 &gt;&gt; 把个別的资料输出，例如：</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">string</span> s;</span><br><span class="line">    <span class="built_in">stringstream</span> ss;</span><br><span class="line">    <span class="keyword">int</span> a, b, c;</span><br><span class="line">    getline(<span class="built_in">cin</span>, s);</span><br><span class="line">    ss.<span class="built_in">clear</span>();</span><br><span class="line">    ss.str(s);</span><br><span class="line">    ss &gt;&gt; a &gt;&gt; b &gt;&gt; c;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;a&lt;&lt;<span class="string">" "</span>&lt;&lt;b&lt;&lt;<span class="string">" "</span>&lt;&lt;c&lt;&lt;<span class="string">" "</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="使用stringstream对象简化类型转换"><a href="#使用stringstream对象简化类型转换" class="headerlink" title="使用stringstream对象简化类型转换"></a>使用stringstream对象简化类型转换</h4><p>1.int 到string的转换</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt; </span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">stringstream</span> stream;</span><br><span class="line">    <span class="built_in">string</span> result;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">1000</span>;</span><br><span class="line">    stream &lt;&lt; i; <span class="comment">//将int输入流</span></span><br><span class="line">    stream &gt;&gt; result; <span class="comment">//从stream中抽取前面插入的int值</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; result &lt;&lt; <span class="built_in">endl</span>; <span class="comment">// print the string "1000"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2.string到int的转换</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> result=”<span class="number">10000</span>”;</span><br><span class="line"><span class="keyword">int</span> n=<span class="number">0</span>;</span><br><span class="line">stream&lt;&lt;result;</span><br><span class="line">stream&gt;&gt;n;<span class="comment">//n等于10000</span></span><br></pre></td></tr></table></figure>
<p>3.连接string和int，使其成为一个整体</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">string</span> name = <span class="string">"Bob"</span>;</span><br><span class="line">    <span class="keyword">int</span> age = <span class="number">22</span>;</span><br><span class="line">    <span class="built_in">stringstream</span>  ss;</span><br><span class="line">    ss&lt;&lt;<span class="string">"Name is : "</span>;		<span class="comment">//把"Name is : "字符串输入到ss中去</span></span><br><span class="line">    ss&lt;&lt;name;				<span class="comment">//把name输入到ss中去</span></span><br><span class="line">    ss&lt;&lt;<span class="string">"; Age is : "</span>;		<span class="comment">//把"; Age is : "字符串输入到ss中去</span></span><br><span class="line">    ss&lt;&lt;age;				<span class="comment">//把 int类型的age加入到ss中去</span></span><br><span class="line">    <span class="built_in">string</span> info = ss.str();</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;info&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment"> 我们可以直接用+连接两个字符串，但是没用办法用+ 连接int和string类型，stringstream帮我们做到了</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//输出: 	Name is : Bob; Age is : 22</span></span><br></pre></td></tr></table></figure>
<p>4.int 转换为char</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">stringstream</span> stream;</span><br><span class="line">    <span class="keyword">char</span> result[<span class="number">8</span>];</span><br><span class="line">    <span class="keyword">int</span> number = <span class="number">8888</span>;</span><br><span class="line">    stream &lt;&lt; number; <span class="comment">//向stream中插入8888</span></span><br><span class="line">    stream &gt;&gt; result; <span class="comment">//抽取stream中的值到result</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; result &lt;&lt; <span class="built_in">endl</span>; <span class="comment">// 屏幕显示 "8888"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>5.进行多次转换，必须调用stringstream的成员函数clear()</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">stringstream</span> stream;</span><br><span class="line">    <span class="keyword">int</span> first,second;</span><br><span class="line">    stream &lt;&lt; <span class="string">"456"</span>;<span class="comment">//插入字符串</span></span><br><span class="line">    stream &gt;&gt; first;<span class="comment">//转换成int</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; first &lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    stream.<span class="built_in">clear</span>();<span class="comment">//在进行多次转换前，必须清除stream</span></span><br><span class="line">    stream &lt;&lt; <span class="literal">true</span>;<span class="comment">//插入bool值</span></span><br><span class="line">    stream &gt;&gt; second ;<span class="comment">//提取出int</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; second &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">输出:</span></span><br><span class="line"><span class="comment">456</span></span><br><span class="line"><span class="comment">1</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">如果没有clear</span></span><br><span class="line"><span class="comment">那么会出现下面的结果</span></span><br><span class="line"><span class="comment">456</span></span><br><span class="line"><span class="comment">43	//不知所云</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/05/30/Trie%E6%A0%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/30/Trie%E6%A0%91/" class="post-title-link" itemprop="url">Trie树</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-05-30 09:06:14" itemprop="dateCreated datePublished" datetime="2020-05-30T09:06:14+08:00">2020-05-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-06-21 12:44:04" itemprop="dateModified" datetime="2020-06-21T12:44:04+08:00">2020-06-21</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%A0%91/" itemprop="url" rel="index"><span itemprop="name">树</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Trie树"><a href="#Trie树" class="headerlink" title="Trie树"></a>Trie树</h1><p>​    字典树又称Trie树，是单词查找树，是一种树形结构，也是哈希书的变种。典型应用于统计中，排序和保存大量字符串（但不仅仅限于字符串），所以经常被搜索引擎系统用于文本字频统计。它的优点是：利用字符串的公共前缀来减少查询时间，最大限度地减少无所谓的字符串比较，查询效率要比哈系树高</p>
<p>Trie树地3个基本性质：</p>
<ol>
<li>根节点不包含字符，根节点外地每一个节点都只包含一个字符</li>
<li>从根节点到某一个节点，路径上经过的字符连接起来，为该点对应地字符串</li>
<li><strong>每个节点</strong>的所有子节点包含的<strong>字符都不相同</strong></li>
</ol>
<p>所以每一个节点最多可以有26个子节点，对应26个字母（假设全部都为小写）。可以利用指针存储（比较浪费空间），也可以利用孩子兄弟表示法，也就是说可以利用左孩子右兄弟（比较难以理解）。一般指针表示最简单最直观。</p>
<p><img src="/2020/05/30/Trie%E6%A0%91/1.png" style="zoom:80%;"></p>
<p>这里，我们如果只是想记录单词是否存在，那么end[]中可存放一个布尔值，如果我们想记录单词的个数，那么我们就需要存放一个数字，再次遇到的时候就++。所以我们要知道不一定是到了叶子，才是一个单词</p>
<p><img src="/2020/05/30/Trie%E6%A0%91/2.png" style="zoom:120%;"></p>
<h2 id="字典树的创建"><a href="#字典树的创建" class="headerlink" title="字典树的创建"></a>字典树的创建</h2><p><img src="/2020/05/30/Trie%E6%A0%91/3.png" style="zoom:120%;"></p>
<p><img src="/2020/05/30/Trie%E6%A0%91/4.png" style="zoom:120%;"></p>
<p>前一个[]中的数字是根的下标，后面一个是指针域。trie[1][1] = 2 的2是创建了第二个节点的意思，每个节点都是26个域。</p>
<p>然后判断第二个字符（i）s[1]-\’a\’ = 8 那么在 trie[2][8] 上判断是不是等于0，是等于0，我们把它改为3，表明创建了第三个节点</p>
<p>第三个字符（k）s[2]-‘a’ = 10 那么判断trie[3][10]  上判断是不是等于0，如果等于0，我们把它改成4，表明创建了第四个节点 </p>
<p>第四个字符（e）s[3]-‘a’ = 4 那么判断trie[4][4]  上判断是不是等于0，如果等于0，我们把它改成5，表明创建了第五个节点 </p>
<p>处理完毕后加上一个end[]标记，表示这是一个单词。</p>
<p>那么我如果再想要插入bin，那么发现trie[1][1] 不是0，那么说明b节点已经被创建过了，那么直接去找他就行了。</p>
<p>同样i也创建过了， n没创建过，那么就新建一个节点trie[3][13] = 4 ,同时加上end标记</p>
<h3 id="算法代码"><a href="#算法代码" class="headerlink" title="算法代码"></a>算法代码</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> insert(string s)</span><br><span class="line">&#123;</span><br><span class="line">    int len = s.length(),p=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(int i = <span class="number">0</span>;i&lt;len;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        int ch=s[i]-<span class="string">'a'</span>;</span><br><span class="line">        <span class="keyword">if</span>(!trie[p][ch])</span><br><span class="line">            trie[p][ch] = ++tot;</span><br><span class="line">        p=trie[p][ch];</span><br><span class="line">    &#125;</span><br><span class="line">    end[p] = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="字典树的查找"><a href="#字典树的查找" class="headerlink" title="字典树的查找"></a>字典树的查找</h2><p><img src="/2020/05/30/Trie%E6%A0%91/5.png" style="zoom:120%;"></p>
<h3 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">search</span><span class="params">(<span class="built_in">string</span> s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> len = s.length(),p=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i&lt;len;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        p = trie[p][s[i]-<span class="string">'a'</span>];</span><br><span class="line">        <span class="keyword">if</span>(!p)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">end</span>[p];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="性能分析"><a href="#性能分析" class="headerlink" title="性能分析"></a>性能分析</h2><p><img src="/2020/05/30/Trie%E6%A0%91/6.png" style="zoom:120%;"></p>
<p>树高最高是len，那么假设树都是满的，那么就有26^len^ 级别的</p>
<p>但这是最基础的解法，我们是可以优化的。</p>
<h2 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h2><p><img src="/2020/05/30/Trie%E6%A0%91/7.png" style="zoom:100%;"></p>
<p><img src="/2020/05/30/Trie%E6%A0%91/8.png" style="zoom:100%;"></p>
<ol>
<li>我们可以利用哈希，对每一个单词统计，然后找最高的100个单词。还可以创建一棵字典树，然后找频率最高的100个词，利用end[]统计</li>
<li>过</li>
<li>过</li>
<li>可以利用end[]来标记，如果end=true 的话，什么也不用做即可。然后先序遍历即可； 如果要保留原来的顺序，那么可以碰到一单词，然后立即查询有没有，有的话立即删除；如果没有就保留</li>
<li>和第一题一样</li>
<li>去重+统计（把end[]改成 int型数组）</li>
</ol>
<p><img src="/2020/05/30/Trie%E6%A0%91/9.png" style="zoom:100%;"></p>
<p><img src="/2020/05/30/Trie%E6%A0%91/10.png" style="zoom:100%;"></p>
<h2 id="构建查找Trie树代码一览"><a href="#构建查找Trie树代码一览" class="headerlink" title="构建查找Trie树代码一览"></a>构建查找Trie树代码一览</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">100005</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxz=<span class="number">26</span>;<span class="comment">//不同字符个数，例如数字10，小写字母26</span></span><br><span class="line"><span class="keyword">int</span> trie[maxn][maxz];</span><br><span class="line"><span class="keyword">bool</span> endWord[maxn];<span class="comment">//标识单词结束</span></span><br><span class="line"><span class="keyword">int</span> n,tot;<span class="comment">//字符串数,下标</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="built_in">string</span> s)</span><span class="comment">//将字符串s插入到字典树中</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> len=s.length(),p=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> ch=s[i]-<span class="string">'a'</span>;<span class="comment">//转换成数字</span></span><br><span class="line">        <span class="keyword">if</span>(!trie[p][ch])</span><br><span class="line">            trie[p][ch]=++tot;<span class="comment">//记录下标</span></span><br><span class="line">        p=trie[p][ch];</span><br><span class="line">    &#125;</span><br><span class="line">    endWord[p]=<span class="literal">true</span>;<span class="comment">//标记单词结束</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">search</span><span class="params">(<span class="built_in">string</span> s)</span><span class="comment">//在字典树中查找该字符串是否存在</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> len=s.length(),p=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        p=trie[p][s[i]-<span class="string">'a'</span>];</span><br><span class="line">        <span class="keyword">if</span>(!p)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> endWord[p];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">26</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(trie[p][i])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">cout</span>&lt;&lt;<span class="keyword">char</span>(i+<span class="string">'a'</span>);</span><br><span class="line">            dfs(trie[p][i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">string</span> s;</span><br><span class="line">    <span class="built_in">memset</span>(trie,<span class="number">0</span>,<span class="keyword">sizeof</span>(trie));</span><br><span class="line">    <span class="built_in">memset</span>(endWord,<span class="literal">false</span>,<span class="keyword">sizeof</span>(endWord));</span><br><span class="line">    tot=<span class="number">1</span>;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    <span class="keyword">while</span>(n--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;s;</span><br><span class="line">        insert(s);</span><br><span class="line">    &#125;</span><br><span class="line">    dfs(<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"输入要查询的字符串："</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;s;</span><br><span class="line">    <span class="keyword">if</span>(search(s))</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"查询成功！"</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"查询失败！"</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="例子："><a href="#例子：" class="headerlink" title="例子："></a>例子：</h2><p><img src="/2020/05/30/Trie%E6%A0%91/11.png" style="zoom:100%;"></p>
<p><img src="/2020/05/30/Trie%E6%A0%91/12.png" style="zoom:100%;"></p>
<p><img src="/2020/05/30/Trie%E6%A0%91/13.png" style="zoom:100%;"></p>
<h3 id="字典树实现"><a href="#字典树实现" class="headerlink" title="字典树实现"></a>字典树实现</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">500005</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxz=<span class="number">26</span>;<span class="comment">//不同字符个数，例如数字10，小写字母26</span></span><br><span class="line"><span class="keyword">int</span> trie[maxn][maxz];</span><br><span class="line"><span class="built_in">string</span> <span class="keyword">word</span>[maxn];<span class="comment">//翻译单词 存储英文!</span></span><br><span class="line"><span class="keyword">int</span> value[maxn];<span class="comment">//值的下标</span></span><br><span class="line"><span class="keyword">bool</span> <span class="built_in">end</span>[maxn];<span class="comment">//标记结束 </span></span><br><span class="line"><span class="keyword">int</span> n,tot;<span class="comment">//字符串数,下标 </span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="built_in">string</span> s,<span class="keyword">int</span> k)</span><span class="comment">//将字符串s插入到字典树中,k的目的是记录单词的下标</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> len=s.length(),p=<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> ch=s[i]-<span class="string">'a'</span>;<span class="comment">//转换成数字</span></span><br><span class="line">		<span class="keyword">if</span>(!trie[p][ch]) </span><br><span class="line">			trie[p][ch]=++tot;<span class="comment">//记录下标 </span></span><br><span class="line">		p=trie[p][ch];</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="comment">//插入完毕的时候，令插入的这个单词代表着第k个英语单词</span></span><br><span class="line">	value[p]=k;<span class="comment">//记录下标</span></span><br><span class="line">	<span class="built_in">end</span>[p]=<span class="number">1</span>; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="built_in">string</span> s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> len=s.length(),p=<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> ch=s[i]-<span class="string">'a'</span>;<span class="comment">//转换成数字</span></span><br><span class="line">		p=trie[p][ch];</span><br><span class="line">		<span class="keyword">if</span>(!p)</span><br><span class="line">			<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(<span class="built_in">end</span>[p])</span><br><span class="line">		<span class="keyword">return</span> value[p];<span class="comment">//返回下标 </span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">	<span class="built_in">string</span> s,s1;</span><br><span class="line">	<span class="built_in">memset</span>(trie,<span class="number">0</span>,<span class="keyword">sizeof</span>(trie));</span><br><span class="line">	tot=<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">int</span> i=<span class="number">1</span>;</span><br><span class="line">    <span class="comment">//输入一行，有两个单词，所以我们一次读一行，getline</span></span><br><span class="line">	<span class="keyword">while</span>(getline(<span class="built_in">cin</span>,s))</span><br><span class="line">	&#123;</span><br><span class="line">        <span class="comment">//如果s为空串，那么break</span></span><br><span class="line">		<span class="keyword">if</span>(!s.<span class="built_in">size</span>())</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">        <span class="comment">//从一个字符串流里面读取两个单词，一个英文单词存到数组word中，还有一个外文单词存到Trie树</span></span><br><span class="line">        <span class="comment">//还有一种办法就是判断空格，然后切分</span></span><br><span class="line">		<span class="function"><span class="built_in">stringstream</span> <span class="title">ss</span><span class="params">(s)</span></span>;</span><br><span class="line">		ss&gt;&gt;<span class="keyword">word</span>[i]&gt;&gt;s1;</span><br><span class="line">		insert(s1,i);</span><br><span class="line">		i++;</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="comment">//查询</span></span><br><span class="line">	<span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;s)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> k=query(s);</span><br><span class="line">		<span class="keyword">if</span>(k)</span><br><span class="line">			<span class="built_in">cout</span>&lt;&lt;<span class="keyword">word</span>[k]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			<span class="built_in">cout</span>&lt;&lt;<span class="string">"eh"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Map实现"><a href="#Map实现" class="headerlink" title="Map实现"></a>Map实现</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="built_in">map</span>&lt;<span class="built_in">string</span>,<span class="built_in">string</span>&gt;mp;<span class="comment">//定义两个string的映射</span></span><br><span class="line"><span class="keyword">char</span> ch1[<span class="number">20</span>],ch2[<span class="number">20</span>],ch3[<span class="number">40</span>],str[<span class="number">20</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;  </span><br><span class="line">   <span class="keyword">while</span>(gets(ch3))</span><br><span class="line">   &#123;</span><br><span class="line">      <span class="keyword">if</span>(!<span class="built_in">strlen</span>(ch3))</span><br><span class="line">         <span class="keyword">break</span>;</span><br><span class="line">      <span class="built_in">sscanf</span>(ch3,<span class="string">"%s %s"</span>,ch1,ch2);<span class="comment">//ch1是英语，ch2 是外文</span></span><br><span class="line">      mp.insert(make_pair(ch2,ch1));<span class="comment">//是根据外文查询英文的，所以ch2放前面当索引</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">while</span>(gets(str))	<span class="comment">// 读入需要查询的字符串</span></span><br><span class="line">   &#123;</span><br><span class="line">      <span class="built_in">map</span>&lt;<span class="built_in">string</span>,<span class="built_in">string</span>&gt;::iterator it;<span class="comment">//定义一个迭代器</span></span><br><span class="line">      it=mp.<span class="built_in">find</span>(str);<span class="comment">//在map中查询str，如果没查到，it = mp.end()</span></span><br><span class="line">      <span class="keyword">if</span>(it!=mp.<span class="built_in">end</span>())</span><br><span class="line">         <span class="built_in">cout</span>&lt;&lt;mp[str]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">         <span class="built_in">cout</span>&lt;&lt;<span class="string">"eh"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/" class="post-title-link" itemprop="url">常数项级数的审敛法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-05-26 23:07:13" itemprop="dateCreated datePublished" datetime="2020-05-26T23:07:13+08:00">2020-05-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-09-07 23:01:20" itemprop="dateModified" datetime="2020-09-07T23:01:20+08:00">2020-09-07</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="常数项级数的审敛法"><a href="#常数项级数的审敛法" class="headerlink" title="常数项级数的审敛法"></a>常数项级数的审敛法</h1><h2 id="正向级数及其审敛法"><a href="#正向级数及其审敛法" class="headerlink" title="正向级数及其审敛法"></a>正向级数及其审敛法</h2><p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/1.png" style="zoom:150%;"></p>
<h3 id="定理1"><a href="#定理1" class="headerlink" title="定理1"></a>定理1</h3><p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/2.png" style="zoom: 50%;"></p>
<h3 id="定理2（比较审敛法）"><a href="#定理2（比较审敛法）" class="headerlink" title="定理2（比较审敛法）"></a>定理2（比较审敛法）</h3><p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/3.png" style="zoom: 50%;"></p>
<p>注意判断什么是强级数，什么是弱级数</p>
<h3 id="定理3（比较审敛法的极限形式）"><a href="#定理3（比较审敛法的极限形式）" class="headerlink" title="定理3（比较审敛法的极限形式）"></a>定理3（比较审敛法的极限形式）</h3><p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/9.png" style="zoom: 50%;"></p>
<p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/10.png" style="zoom: 50%;"></p>
<p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/6.png" style="zoom: 50%;"></p>
<h3 id="定理4-（D’alembert-判别法）"><a href="#定理4-（D’alembert-判别法）" class="headerlink" title="定理4 （D’alembert 判别法）"></a>定理4 （D’alembert 判别法）</h3><p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/13.png" style="zoom: 67%;"></p>
<p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/14.png" style="zoom: 60%;"></p>
<h3 id="定理5（Cauchy判别法）"><a href="#定理5（Cauchy判别法）" class="headerlink" title="定理5（Cauchy判别法）"></a>定理5（Cauchy判别法）</h3><p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/16.png" style="zoom: 60%;"></p>
<p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/20.png" style="zoom: 60%;"></p>
<h3 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h3><h4 id="例一："><a href="#例一：" class="headerlink" title="例一："></a>例一：</h4><p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/4.png" style="zoom: 50%;"></p>
<p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/5.png" style="zoom: 50%;"></p>
<h4 id="例二："><a href="#例二：" class="headerlink" title="例二："></a>例二：</h4><p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/8.png" style="zoom: 60%;"></p>
<h4 id="例三："><a href="#例三：" class="headerlink" title="例三："></a>例三：</h4><p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/11.png" style="zoom: 60%;"></p>
<h4 id="例四："><a href="#例四：" class="headerlink" title="例四："></a>例四：</h4><p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/12.png" style="zoom: 60%;"></p>
<h4 id="例五："><a href="#例五：" class="headerlink" title="例五："></a>例五：</h4><p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/15.png" style="zoom: 60%;"></p>
<h4 id="例六："><a href="#例六：" class="headerlink" title="例六："></a>例六：</h4><p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/21.png" style="zoom: 60%;"></p>
<h4 id="例七："><a href="#例七：" class="headerlink" title="例七："></a>例七：</h4><p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/33.png" style="zoom: 60%;"></p>
<h4 id="例八"><a href="#例八" class="headerlink" title="例八"></a>例八</h4><p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/34.png" style="zoom: 60%;"></p>
<h4 id="例九"><a href="#例九" class="headerlink" title="例九"></a>例九</h4><p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/35.png" style="zoom: 60%;"></p>
<h3 id="解题注意"><a href="#解题注意" class="headerlink" title="解题注意"></a>解题注意</h3><p>分母中有n，或者级数中有sinn，tann，log(1+n) (n趋向于0)这类可以等价无穷小替换</p>
<h4 id="什么时候该用比较审敛法？"><a href="#什么时候该用比较审敛法？" class="headerlink" title="什么时候该用比较审敛法？"></a>什么时候该用比较审敛法？</h4><p> 且与 调和级数，p级数相比为常数（当然存在0:0的话$v_n$收敛 $u_n$也收敛，或者无穷：无穷的话$v_n$发散，$u_n$发散)</p>
<p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/38.png" style="zoom: 80%;"></p>
<p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/40.png" style="zoom: 100%;"></p>
<h4 id="什么时候该用比值审敛法？"><a href="#什么时候该用比值审敛法？" class="headerlink" title="什么时候该用比值审敛法？"></a>什么时候该用比值审敛法？</h4><p>当级数为分子分母形式，分子分母多为阶乘，幂函数。且 $\frac{u_{n+1}}{u_n}$ 是一个不为1 的常数，那么就可以用了</p>
<p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/37.png" style="zoom: 80%;"></p>
<p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/41.png" style="zoom: 100%;"></p>
<h4 id="什么时候该用根值审敛法？"><a href="#什么时候该用根值审敛法？" class="headerlink" title="什么时候该用根值审敛法？"></a>什么时候该用根值审敛法？</h4><p>分子分母为$a^n$ 的形式，这样 $\sqrt[n] n$ 刚好就可以把这个n去掉</p>
<p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/36.png" style="zoom: 100%;"></p>
<p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/41.png" style="zoom: 100%;"></p>
<h2 id="书本例题"><a href="#书本例题" class="headerlink" title="书本例题"></a>书本例题</h2><p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/1.jpg" style="zoom: 80%;"></p>
<p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/2.jpg" style="zoom: 80%;"></p>
<p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/3.jpg" style="zoom: 80%;"></p>
<p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/4.jpg" style="zoom: 80%;"></p>
<p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/5.jpg" style="zoom: 80%;"></p>
<h2 id="交错级数及其审敛法"><a href="#交错级数及其审敛法" class="headerlink" title="交错级数及其审敛法"></a>交错级数及其审敛法</h2><p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/23.png" style="zoom: 100%;"></p>
<h3 id="定理6"><a href="#定理6" class="headerlink" title="定理6"></a>定理6</h3><p>这里的$u_n$ 是没有符号的</p>
<p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/22.png" style="zoom: 60%;"> </p>
<h3 id="例题-1"><a href="#例题-1" class="headerlink" title="例题"></a>例题</h3><h4 id="例一：-1"><a href="#例一：-1" class="headerlink" title="例一："></a>例一：</h4><p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/25.png" style="zoom: 60%;"></p>
<p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/24.png" style="zoom: 65%;"></p>
<h2 id="绝对收敛与条件收敛"><a href="#绝对收敛与条件收敛" class="headerlink" title="绝对收敛与条件收敛"></a>绝对收敛与条件收敛</h2><p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/26.png" style="zoom: 65%;"></p>
<p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/27.png" style="zoom: 60%;"></p>
<h3 id="例题-2"><a href="#例题-2" class="headerlink" title="例题"></a>例题</h3><p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/28.png" style="zoom: 75%;"></p>
<p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/29.png" style="zoom: 60%;"></p>
<h3 id="解题技巧"><a href="#解题技巧" class="headerlink" title="解题技巧"></a>解题技巧</h3><p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/39.png" style="zoom: 80%;"></p>
<h2 id="绝对收敛级数的性质"><a href="#绝对收敛级数的性质" class="headerlink" title="*绝对收敛级数的性质"></a>*绝对收敛级数的性质</h2><p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/30.png" style="zoom: 60%;"></p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/31.png" style="zoom: 60%;"></p>
<p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/32.png" style="zoom: 60%;"> </p>
<h3 id="答题格式："><a href="#答题格式：" class="headerlink" title="答题格式："></a>答题格式：</h3><p>$\sum_{n=1}^{\infty}原级数$    </p>
<p>$u<em>n\geq u</em>{n+1} &gt;0$  ?  $\lim\limits<em>{n-&gt;\infty}u_n=0$ ? =&gt; <strong>根据 Leibniz 判别法</strong>，交错级数 $\sum</em>{n=1}^{\infty}原级数$   收敛</p>
<p>因为 $\sum<em>{n=1}^{\infty}|原级数|=\sum</em>{n=1}^{\infty}新级数$   </p>
<p><strong>根据比较、比值、根植判别法</strong>判别新级数是否收敛。如果收敛，那么原级数就是绝对收敛；如果发散，原级数就是条件收敛</p>
<p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/11.jpg" style="zoom: 80%;"></p>
<p><img src="/2020/05/26/%E5%B8%B8%E6%95%B0%E9%A1%B9%E7%BA%A7%E6%95%B0%E7%9A%84%E5%AE%A1%E6%95%9B%E6%B3%95/12.jpg" style="zoom: 80%;"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/05/26/OOP-in-JavaScript/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/26/OOP-in-JavaScript/" class="post-title-link" itemprop="url">OOP-in-JavaScript</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-05-26 00:06:10" itemprop="dateCreated datePublished" datetime="2020-05-26T00:06:10+08:00">2020-05-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-07-07 22:27:04" itemprop="dateModified" datetime="2020-07-07T22:27:04+08:00">2020-07-07</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="OOP-in-JavaScript"><a href="#OOP-in-JavaScript" class="headerlink" title="OOP-in-JavaScript"></a>OOP-in-JavaScript</h1><p>这篇博客我们来谈谈JavaScript 面向对象编程</p>
<p>这是为了给期末大作业打下基础，因为我打算用react来实现前端框架。而react是OOP的典形应用之一</p>
<p>学习资料：</p>
<p><a href="https://codewithmosh.com/p/object-oriented-programming-in-javascript" target="_blank" rel="noopener">Mosh老师的OOP in JavaScript</a></p>
<p><a href="https://www.bilibili.com/video/BV1gb411w7eW?p=1" target="_blank" rel="noopener">B站搬运视频</a></p>
<h2 id="Objects"><a href="#Objects" class="headerlink" title="Objects"></a>Objects</h2><h3 id="Object-Literals"><a href="#Object-Literals" class="headerlink" title="Object Literals"></a>Object Literals</h3><p>首先来看看声明一个类，可以用的关键词 var let const</p>
<ul>
<li><p><strong>var</strong>定义的变量，作用域是整个封闭函数，是全域的；<strong>let</strong>定义的变量，作用域是在块级或者字块中；</p>
</li>
<li><p>变量提升：不论通过var声明的变量处于当前作用于的第几行，都会提升到作用域的最顶部。 而let声明的变量不会在顶部初始化，凡是在let声明之前使用该变量都会报错（引用错误ReferenceError）；</p>
</li>
<li><p>只要块级作用域内存在let，它所声明的变量就会绑定在这个区域；</p>
</li>
<li><p>let不允许在相同作用域内重复声明（报错同时使用var和let，两个let）。</p>
</li>
<li><p><strong>const</strong>用来专门声明一个常量，它跟let一样作用于块级作用域，没有变量提升，重复声明会报错，不同的是<strong>const声明的常量不可改变，声明时必须初始化（赋值）</strong></p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> circle = &#123;</span><br><span class="line">    radius:<span class="number">1</span>,</span><br><span class="line">    location:&#123;</span><br><span class="line">        x: <span class="number">1</span>,</span><br><span class="line">        y: <span class="number">1</span></span><br><span class="line">    &#125;,</span><br><span class="line">    draw:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'draw'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//输出 draw</span></span><br></pre></td></tr></table></figure>
<h3 id="Factories-工厂模式"><a href="#Factories-工厂模式" class="headerlink" title="Factories 工厂模式"></a>Factories 工厂模式</h3><p>但是像上面那样生成一个对象的话，如果要声明很多对象（具有相同的性质），每个对象中又有很多方法的话。实在是太麻烦了，所以我们要用工厂模式创建。</p>
<p>对象定义规则：</p>
<p>冒号和属性值之间要用空格</p>
<p>我们把方法也当作一个对象的属性，所以定义方法的时候为 名字: function(){}</p>
<p>比如draw: function(){} 其实相当于function draw(){}，就是在对象直接量中定义的函数的时候要用到这个写法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createCircle</span>(<span class="params">radius</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span>&#123;</span><br><span class="line">        radius,	<span class="comment">// es6 的新语法，如果属性名和传入变量名称一致，不需要再做赋值，直接等于即可</span></span><br><span class="line">        location: &#123;</span><br><span class="line">            x:<span class="number">1</span>,</span><br><span class="line">            y:<span class="number">1</span></span><br><span class="line">        &#125;,	<span class="comment">//属性和属性之间要用逗号断开</span></span><br><span class="line">        draw: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'draw'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> circle = createCircle(<span class="number">1</span>);</span><br><span class="line">circle.draw();</span><br></pre></td></tr></table></figure>
<h3 id="Constructors-构造函数"><a href="#Constructors-构造函数" class="headerlink" title="Constructors 构造函数"></a>Constructors 构造函数</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Circle</span>(<span class="params">radius</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'this'</span>,<span class="keyword">this</span>)</span><br><span class="line">    <span class="keyword">this</span>.radius = radius;</span><br><span class="line">    <span class="keyword">this</span>.draw = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'draw'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> another = <span class="keyword">new</span> Circle(<span class="number">1</span>);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">如果 const another = Circle(1);</span></span><br><span class="line"><span class="comment">控制台输出：这显然变成了一个Window 对象</span></span><br><span class="line"><span class="comment">this Window &#123;parent: Window, opener: null, top: Window, length: 0, frames: Window, …&#125;</span></span><br><span class="line"><span class="comment">如果 const another = new Circle(1);</span></span><br><span class="line"><span class="comment">他就是一个Object对象</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>我们既可以用工厂模式创建对象，也可以用构造函数来创建对象，我们对两者都需要熟悉</p>
<p>对于构造函数创建对象这种方法，我们一定需要 new + 构造函数</p>
<p>对于工厂模式创建方法，直接调用创建函数即可</p>
<h3 id="Constructor-Property"><a href="#Constructor-Property" class="headerlink" title="Constructor Property"></a>Constructor Property</h3><p><img src="/2020/05/26/OOP-in-JavaScript/1.png" style="zoom:100%;"></p>
<p>我们看到由两种不同函数构造出来的两个对象的constructor也是不一样的，由构造函数构造出来的another对象是利用自己的构造函数Circle()</p>
<p>由工厂模式构造出来的circle函数，构造函数时 Object() 也就是说createCircle函数会调用new Object()并返回</p>
<h3 id="Functions-are-Objects"><a href="#Functions-are-Objects" class="headerlink" title="Functions are Objects"></a>Functions are Objects</h3><p>比较难理解的就是JavaScript中的类是通过函数的形式存在的，可以说函数即对象。</p>
<p><img src="/2020/05/26/OOP-in-JavaScript/2.png" style="zoom:100%;"></p>
<p>对上面Circle的构造函数来说 ，我们显示了他几个属性，我们同样看出来了，Circle函数是通过Function()这个构造函数构造出来的</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Circle</span>(<span class="params">radius</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'this'</span>,<span class="keyword">this</span>)</span><br><span class="line">    <span class="keyword">this</span>.radius = radius;</span><br><span class="line">    <span class="keyword">this</span>.draw = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'draw'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// AND</span></span><br><span class="line">    <span class="keyword">const</span> Circle1 = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">'radius'</span>,<span class="string">`</span></span><br><span class="line"><span class="string">       this.radius = radius;</span></span><br><span class="line"><span class="string">    this.draw = function () &#123;</span></span><br><span class="line"><span class="string">        console.log('draw')</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    `</span>);</span><br><span class="line"><span class="comment">//这两个函数表达的意思是一样的，只不过Circle自己调用了Function(),而Circle1则手动调用了Function()</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/26/OOP-in-JavaScript/3.png" style="zoom:200%;"></p>
<p>函数（类）的一些方法</p>
<h4 id="call-和-apply"><a href="#call-和-apply" class="headerlink" title="call 和 apply"></a>call 和 apply</h4><ul>
<li>call()和apply()的第一个实参都为this的值，即使传入的实参是原始值或者null或者undefined</li>
<li>call()，第一个参数之后的所有实参是要传入待调用函数的值；</li>
<li>apply()实参都放到一个数组</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Circle</span>(<span class="params">radius</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'this'</span>,<span class="keyword">this</span>)</span><br><span class="line">    <span class="keyword">this</span>.radius = radius;</span><br><span class="line">    <span class="keyword">this</span>.draw = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'draw'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">Circle.call(&#123;&#125;,<span class="number">1</span>)			 	<span class="comment">//把1传给一个空对象</span></span><br><span class="line"><span class="keyword">const</span> another =<span class="keyword">new</span> Circle(<span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<h3 id="Value-vs-Reference-Types"><a href="#Value-vs-Reference-Types" class="headerlink" title="Value vs Reference Types"></a>Value vs Reference Types</h3><p><img src="/2020/05/26/OOP-in-JavaScript/4.png" style="zoom: 50%;"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> y = x;</span><br><span class="line">x=<span class="number">20</span>;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/26/OOP-in-JavaScript/5.png" style="zoom:100%;"></p>
<p>显示如上图，我们可以看到这和python是不一样的。当我们声明两个变量x,y的时候。x和y是相互独立的</p>
<p>但是当我们这样写</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = &#123;<span class="attr">value</span>: <span class="number">10</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> y =  x;</span><br><span class="line">x.value = <span class="number">20</span>;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/26/OOP-in-JavaScript/8.png" style="zoom:100%;"></p>
<p>就会这样显示，这是因为什么呢？如下图</p>
<p><img src="/2020/05/26/OOP-in-JavaScript/6.png" style="zoom: 50%;"></p>
<p><img src="/2020/05/26/OOP-in-JavaScript/7.png" style="zoom: 50%;"></p>
<p>这是因为当我们声明一个对象的时候，value:10 并没有存储在这个变量x里，而是存储在一段内存当中，而变量x存储的只是那段内存的地址。所以当令y = x的时候，事实上赋值给y的是一段地址，而非值。所以导致x,y都指向了同一段内存。自然，当value的值改变的时候，x，y都跟着改变了</p>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p>就是：Primitives(基本类型) are copied by their Value，Objects(对象) are copied by their reference</p>
<h4 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> number = <span class="number">10</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">increase</span>(<span class="params">number</span>) </span>&#123;</span><br><span class="line">    number++;</span><br><span class="line">    <span class="keyword">return</span> number;</span><br><span class="line">&#125;</span><br><span class="line">increase(number);</span><br><span class="line"><span class="built_in">console</span>.log(number);			<span class="comment">// 10</span></span><br><span class="line"><span class="built_in">console</span>.log(increase(number));	<span class="comment">// 11</span></span><br></pre></td></tr></table></figure>
<p>从这里我们可以很清楚的看见，当调用increase(number)的时候，传入的number只是把value值赋给了函数中的number的值，但是在外面的number还是10.</p>
<p>如果把返回值输出的话，可以得到11，但这任然没有改变number = 10</p>
<p>如果我们把number换成一个对象，又会有什么变化呢？</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> number = &#123;<span class="attr">value</span> :<span class="number">10</span>&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">increase</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    obj.value++;</span><br><span class="line">&#125;</span><br><span class="line">increase(number);</span><br><span class="line"><span class="built_in">console</span>.log(number.value)<span class="comment">// 11</span></span><br></pre></td></tr></table></figure>
<p>我们得到这样的结果，原理如下，我们传进去一个number对象，然后再这个increase函数里把这个对象的地址付给了obj，随后让obj的value属性+1，因为obj和number指向的是同一块内存，所以在外面number.value 也会相应的变化</p>
<h3 id="Adding-or-Removing-Properties"><a href="#Adding-or-Removing-Properties" class="headerlink" title="Adding or Removing Properties"></a>Adding or Removing Properties</h3><p>由构造或者工厂模式创建的对象，都是动态对象，我们可以在这个对象中添加或者删除属性。</p>
<h3 id="运用-的方法"><a href="#运用-的方法" class="headerlink" title="运用 . 的方法"></a>运用 . 的方法</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Circle</span>(<span class="params">radius</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'this'</span>,<span class="keyword">this</span>)</span><br><span class="line">    <span class="keyword">this</span>.radius = radius;</span><br><span class="line">    <span class="keyword">this</span>.draw = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'draw'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> circle = <span class="keyword">new</span> Circle(<span class="number">10</span>);		</span><br><span class="line">circle.location = &#123; <span class="attr">x</span>:<span class="number">1</span> &#125;; 		<span class="comment">//利用点的方式添加属性</span></span><br><span class="line"><span class="keyword">delete</span> circle.location;			<span class="comment">//delete+ . 来删除属性</span></span><br></pre></td></tr></table></figure>
<h3 id="运用方括号"><a href="#运用方括号" class="headerlink" title="运用方括号"></a>运用方括号</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> propertyName = <span class="string">'location'</span></span><br><span class="line">circle[propertyName] = &#123;<span class="attr">x</span>:<span class="number">1</span>&#125;;</span><br></pre></td></tr></table></figure>
<p>方括号的操作比点要麻烦一点，但是可以动态访问</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> propertyName = <span class="string">'center location'</span></span><br><span class="line">circle.center location</span><br></pre></td></tr></table></figure>
<p>而且当遇到属性名称中间有特殊符号或者空格的时候，不能用点来访问，这时候需要用方括号来访问</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> circle[location];</span><br></pre></td></tr></table></figure>
<p>删除的时候也只需要在方括号中写上属性名称即可</p>
<h3 id="Enumerating-Properties"><a href="#Enumerating-Properties" class="headerlink" title="Enumerating Properties"></a>Enumerating Properties</h3><p>使用  for…in..遍历，可以打印出所有对象中的 属性，方法 的索引<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Circle</span>(<span class="params">radius</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'this'</span>,<span class="keyword">this</span>)</span><br><span class="line">    <span class="keyword">this</span>.radius = radius;</span><br><span class="line">    <span class="keyword">this</span>.draw = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'draw'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> circle = <span class="keyword">new</span> Circle(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">in</span> circle)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(key);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//打印 radius和draw</span></span><br></pre></td></tr></table></figure><br>如果希望直接输出索引存储的值，或者调用方法的话，可以这样写console.log(key,circle[key] );<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">in</span> circle)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(key,circle[key] );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><img src="/2020/05/26/OOP-in-JavaScript/9.png" style="zoom: 90%;"></p>
<p>如果只想打印属性，需要在前面利用typeof做一个判断<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">in</span> circle)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> circle[key]!== <span class="string">'function'</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(key,circle[key] );</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//只打印属性，不打印方法</span></span><br></pre></td></tr></table></figure><br>如果只想输出索引，以数组的形式呈现，那么利用Object对象的key方法<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> keys = <span class="built_in">Object</span>.keys(circle);</span><br><span class="line"><span class="built_in">console</span>.log(keys)</span><br><span class="line"><span class="comment">// 输出["radius","draw"],无法区分是属性还是方法</span></span><br></pre></td></tr></table></figure><br>可以利用 in 操作符判断一个对象中是否有该属性或方法<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="string">'radius'</span> <span class="keyword">in</span> circle)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Circle has a radius'</span>)</span><br></pre></td></tr></table></figure></p>
<h3 id="Abstraction"><a href="#Abstraction" class="headerlink" title="Abstraction"></a>Abstraction</h3><p><strong>Hide the details, Show the essentials</strong></p>
<p>我们应该隐藏我们不想让外界访问到的比较复杂的和细节的部分，我们只要显示我们认为必要的部分。就比如说DVD，dvd含有非常复杂的线路板，但是他只给我们几个按钮（公共接口)来操作，这就是我们要对对象做的事情</p>
<p>如果不这样做，外部一直调用我们对象中的方法，那么对象中的一个小小的改变，外面很多的代码都要相应的修改，这是很麻烦的事情</p>
<h3 id="Private-Properties-and-Methods"><a href="#Private-Properties-and-Methods" class="headerlink" title="Private Properties and Methods"></a>Private Properties and Methods</h3><p>如何实现上面的目标，我们需要用私有属性和私有方法。</p>
<p>那么和C++中的直接放在private:中不同，和python中两根下划线或者@property也不一样，因为JavaScript当中函数和对象是一个定义，所以我们只要把 这个方法或者属性从对象中移走，把它变成函数当中的属性或者方法就可以了。</p>
<p>也就是说，我们只要简单的把 this.属性/方法 替换成 let 属性/方法，就能实现隐藏</p>
<p>在这里我们一定要用let，因为上文说过，let声明的变量或者方法只在这个语句块中实现。但是var声明的是全局变量。所以当我们使用let声明变量和方法的时候，出了这个函数，两者就失效了。这达到了我们Abstraction的目的。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Circle</span>(<span class="params">radius</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.radius = radius;</span><br><span class="line">    <span class="keyword">let</span> computeOptimumlocation = <span class="function"><span class="keyword">function</span> (<span class="params">factor</span>) </span>&#123;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">let</span> defaultLocation= &#123;<span class="attr">x</span>:<span class="number">0</span>,<span class="attr">y</span>:<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="keyword">this</span>.draw = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> x,y;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'draw'</span>)</span><br><span class="line">        computeOptimumlocation(<span class="number">0.1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>不要把闭包和作用域混淆。作用域只是临时的，但是闭包是永恒的。 </p>
<p>就像上面在draw方法中的x,y，每次调用draw方法的时候，x,y都会重新被创建，然后当draw结束以后，两个x,y就死掉了。</p>
<p>但是闭包不一样，在调用好computeOptimumlocation之后，computeOptimumlocation任然存在在函数当中 。而且他们会保持自己的状态，因为他们是draw方法的闭包</p>
<p>现在，在外面，是没有办法访问defaultLocation和computeOptimumlocation这两个属性和方法的！</p>
<p>像上面的写法也有缺陷，因为严格意义上let声明的属性和方法并不是Circle对象的成员，他们只是Circle函数内部的局部变量而已。如果从面向对象的角度，我们仍然可以称他们为Circle对象的私有成员。因为我们没有办法去修改或者读取它</p>
<h3 id="Getters-and-Setters"><a href="#Getters-and-Setters" class="headerlink" title="Getters and Setters"></a>Getters and Setters</h3><p>那么我们怎么样能够在外面读取对象中的私有属性呢？(只读不写)</p>
<p>一般的，我们可以定义一个方法，然后方法中返回这个私有属性，但是这样在外面调用的时候，显得很麻烦，因为要调用一个方法，再返回一个属性。</p>
<p>所以我们可以用 Object.defineProperties()或者Object.defineProperty()这个方法（一个和多个属性的区别）这个方法的用处有三个参数，第一个参数是this，第二个参数是添加属性的名称，第三个参数就是一个对象，里面存放键值对， get:function(){} 和 set:function(){}</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Circle</span>(<span class="params">radius</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.radius = radius;</span><br><span class="line">    <span class="keyword">let</span> computeOptimumlocation = <span class="function"><span class="keyword">function</span> (<span class="params">factor</span>) </span>&#123;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">let</span> defaultLocation= &#123;<span class="attr">x</span>:<span class="number">0</span>,<span class="attr">y</span>:<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="keyword">this</span>.draw = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'draw'</span>)</span><br><span class="line">        computeOptimumlocation(<span class="number">0.1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">Object</span>.defineProperty(<span class="keyword">this</span>,<span class="string">'defaultLocation'</span>,&#123;</span><br><span class="line">       <span class="keyword">get</span>: function () &#123;</span><br><span class="line">            <span class="keyword">return</span> defaultLocation;</span><br><span class="line">       &#125;,</span><br><span class="line">       <span class="keyword">set</span>: function (value) &#123;</span><br><span class="line">           <span class="keyword">if</span>(!value.x||!value.y)</span><br><span class="line">               <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Invalid location.'</span>)</span><br><span class="line">           defaultLocation = value;</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> circle = <span class="keyword">new</span> Circle(<span class="number">10</span>);</span><br><span class="line"><span class="built_in">console</span>.log(circle.defaultLocation);</span><br><span class="line">circle.defaultLocation = &#123;<span class="attr">x</span>:<span class="number">2</span>,<span class="attr">y</span>:<span class="number">2</span>&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(circle.defaultLocation);</span><br></pre></td></tr></table></figure>
<p>get就是我们读取信息的方法，那么set就是我们设置这个私有属性的方法（我们如果不希望外界修改，就不要写set了）</p>
<p>当我们想要显示这个信息的时候呢console.log(circle.defaultLocation)</p>
<p><img src="/2020/05/26/OOP-in-JavaScript/11.png" style="zoom: 90%;"></p>
<p>如果我们输出的value是不合法的（比如说只输入了一个）那么就会报错。</p>
<h3 id="Exercise-Stopwatch"><a href="#Exercise-Stopwatch" class="headerlink" title="Exercise- Stopwatch"></a>Exercise- Stopwatch</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">StopWatch</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> startTime,stopTime,running,duration = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">this</span>.start = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(running)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Stopwatch has already started!'</span>);</span><br><span class="line">        running= <span class="literal">true</span>;</span><br><span class="line">        startTime =<span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">this</span>.stop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!running)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Stopwatch has already stopped!'</span>);</span><br><span class="line">        running = <span class="literal">false</span>;</span><br><span class="line">        stopTime = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">        <span class="keyword">const</span> seconds = (stopTime.getTime()-startTime.getTime())/<span class="number">1000</span>;</span><br><span class="line">        <span class="comment">//得到的是毫秒数，所以要除以1000</span></span><br><span class="line">        duration +=seconds;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">this</span>.reset = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        startTime = <span class="literal">null</span>;</span><br><span class="line">        stopTime = <span class="literal">null</span>;</span><br><span class="line">        running = <span class="literal">false</span>;</span><br><span class="line">        duration = <span class="number">0</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">Object</span>.defineProperty(<span class="keyword">this</span>,<span class="string">'duration'</span>,&#123;</span><br><span class="line">        <span class="keyword">get</span>: function () &#123;</span><br><span class="line">            <span class="keyword">return</span> duration;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Prototypes"><a href="#Prototypes" class="headerlink" title="Prototypes"></a>Prototypes</h2><h3 id="Inheritance"><a href="#Inheritance" class="headerlink" title="Inheritance"></a>Inheritance</h3><p><img src="/2020/05/26/OOP-in-JavaScript/12.png" style="zoom: 67%;"></p>
<p>有两种继承方式：Classical （类继承）和prototype（原型继承）</p>
<h3 id="Prototypes-and-Prototypical-Inheritance"><a href="#Prototypes-and-Prototypical-Inheritance" class="headerlink" title="Prototypes and Prototypical Inheritance"></a>Prototypes and Prototypical Inheritance</h3><p>在JavaScript中，没有类，只有对象。那么只有对象的话如何引入继承呢？</p>
<p>我们就把原来的shape看作是原型(prototype)，然后把属性和方法都放到这个原型中去。注意，原型其实就是一个一般的对象。每个对象(除了元对象)都会有原型</p>
<p>在Javascript中创建的对象直接或间接地继承自元对象（Object） ，元对象在JavaScript中是所有对象的根对象。Object对象没有原对象 </p>
<p><img src="/2020/05/26/OOP-in-JavaScript/14.png" style="zoom: 33%;"></p>
<p>在内存中，只有一个元对象</p>
<p><img src="/2020/05/26/OOP-in-JavaScript/16.png" style="zoom: 67%;"></p>
<p>当寻找一个方法的时候，JavaScript引擎会在这个对象里找，如果找不到，就到这个对象的原型对象去找，如果还是找不到，就继续沿着原型链往上找，一直找到元对象位置。这就是原型继承的工作原理</p>
<p>可以看到__proto__属性都是由一个对象指向一个对象，即指向它们的原型对象（也可以理解为父对象），那么这个属性的作用是什么呢？它的作用就是当访问一个对象的属性时，如果该对象内部不存在这个属性，那么就会去它的__proto__属性所指向的那个对象（可以理解为父对象）里找，如果父对象也不存在这个属性，则继续往父对象的__proto__属性所指向的那个对象（可以理解为爷爷对象）里找，如果还没找到，则继续往上找…直到原型链顶端null（可以理解为原始人。。。），再往上找就相当于在null上取值，会报错（可以理解为，再往上就已经不是“人”的范畴了，找不到了，到此结束，null为原型链的终点），由以上这种通过__proto__属性来连接对象直到null的一条链即为我们所谓的原型链。</p>
<p> 其实我们平时调用的字符串方法、数组方法、对象方法、函数方法等都是靠__proto__继承而来的。</p>
<h3 id="Multilevel-Inheritance"><a href="#Multilevel-Inheritance" class="headerlink" title="Multilevel Inheritance"></a>Multilevel Inheritance</h3><p>比如我们声明一个数组对象myArray。数组对象myArray是继承自arrayBase（数组元对象）的</p>
<p><img src="/2020/05/26/OOP-in-JavaScript/17.png" style="zoom: 67%;"></p>
<p>我们看都在最后一行，这个数组元对象的原型对象是 ObjectBase（元对象）示意图如下：</p>
<p><img src="/2020/05/26/OOP-in-JavaScript/18.png" style="zoom: 33%;"></p>
<p>我们如果自己写一个构造函数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Circle</span>(<span class="params">radius</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.radius = radius;</span><br><span class="line">    <span class="keyword">this</span>.draw = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> x,y;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'draw'</span>)</span><br><span class="line">        computeOptimumlocation(<span class="number">0.1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> circle = <span class="keyword">new</span> Circle(<span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<p>那么所有这个构造函数构造出来的对象，都具有同一个原型。比如这里的circle对象的原型对象就是CircleBase，CircleBase也有一个元对象，就是ObjectBase</p>
<p><img src="/2020/05/26/OOP-in-JavaScript/19.png" style="zoom: 33%;"></p>
<h3 id="Property-Descriptors"><a href="#Property-Descriptors" class="headerlink" title="Property Descriptors"></a>Property Descriptors</h3><p>我们虽然可以在一个对象中调用它原型对象的方法或者属性，但是我们却无法通过Objec.keys()或者 for…in…这种方法遍历 <strong>元对象</strong> 的属性。但毕竟元对象是所有对象的根对象，为什么没有办法迭代遍历呢？</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;<span class="attr">name</span>:<span class="string">'Jason'</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> objectBase = <span class="built_in">Object</span>.getPrototypeOf(person);</span><br><span class="line"><span class="keyword">let</span> descriptor = <span class="built_in">Object</span>.getOwnPropertyDescriptor(objectBase,<span class="string">'toString'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(descriptor);</span><br></pre></td></tr></table></figure>
<p>在console中</p>
<p><img src="/2020/05/26/OOP-in-JavaScript/20.png" style="zoom: 100%;"></p>
<p>我们发现他的enumerable属性是false，也就是说这个toString方法，是不可以被枚举的。writable说明这个方法可以被重写</p>
<p>我们可以对自己创造的对象的属性进行属性的定义</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;<span class="attr">name</span>:<span class="string">'Jason'</span>&#125;;</span><br><span class="line"> <span class="built_in">Object</span>.defineProperty(person,<span class="string">'name'</span>,&#123;</span><br><span class="line">     writable: <span class="literal">false</span></span><br><span class="line">     enumerable: <span class="literal">true</span></span><br><span class="line">     configurable:<span class="literal">false</span></span><br><span class="line"> &#125;);</span><br><span class="line"> person.name = <span class="string">'John '</span>;</span><br><span class="line"> <span class="built_in">console</span>.log(person.name)</span><br><span class="line"><span class="comment">//我们发现名字并没有发生改变</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.keys(person));</span><br><span class="line"><span class="comment">// ["name"],因为我们设置了这个name属性是可迭代，可枚举的</span></span><br><span class="line"><span class="keyword">delete</span> person.name;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.keys(person));</span><br><span class="line"><span class="comment">// ["name"],因为configurable 为false，是不可以被删除的</span></span><br></pre></td></tr></table></figure>
<p>在默认情况下，所有属性都是可写可枚举可配置的</p>
<h3 id="Constructor-Prototypes"><a href="#Constructor-Prototypes" class="headerlink" title="Constructor Prototypes"></a>Constructor Prototypes</h3><p><a href="https://blog.csdn.net/cc18868876837/article/details/81211729?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.nonecase&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.nonecase" target="_blank" rel="noopener">在这篇博客讲的很清楚</a></p>
<p><img src="/2020/05/26/OOP-in-JavaScript/21.png" style="zoom: 60%;"></p>
<p><strong>constructor 属性</strong>的含义就是<strong>指向该对象的构造函数</strong>，所有函数（此时看成对象了）最终的构造函数都指向<strong>Function</strong>。从上图中可以看出<strong>Function</strong>这个对象比较特殊，它的构造函数就是它自己（因为Function可以看成是一个函数，也可以是一个对象）</p>
<p><strong>prototype属性</strong>，别忘了一点 , 它是函数所独有的，它是从一个<strong>函数</strong>指向一个<strong>对象</strong>。它的含义是<strong>函数的原型对象</strong>，也就是这个函数（其实所有函数都可以作为构造函数）所创建的<strong>实例的原型对象</strong>，由此可知：f1.__proto__ === Foo.prototype，它们两个完全一样。</p>
<p>获得对象原型的方法是调用Object对象的getPrototypeOf() 方法</p>
<p>Object.prototype()是所有对象的爸爸</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Circle.prototype === circle.__proto__</span><br><span class="line"><span class="built_in">Array</span>.prototype === arr.__proto__</span><br><span class="line"><span class="keyword">let</span> x = &#123;&#125;;</span><br><span class="line"><span class="built_in">Object</span>.prototype === x.__proto__</span><br></pre></td></tr></table></figure>
<h3 id="Prototype-vs-Instance-Members"><a href="#Prototype-vs-Instance-Members" class="headerlink" title="Prototype vs Instance Members"></a>Prototype vs Instance Members</h3><p><strong>js中可以说函数就是类，类就是函数。</strong></p>
<p>①<code>__proto__</code>和<code>constructor</code>属性是<strong>对象</strong>所独有的；② <code>prototype</code>属性是<strong>函数</strong>所独有的。但是由于JS中函数也是一种对象，所以函数也拥有<code>__proto__</code>和<code>constructor</code>属性，这点是致使我们产生困惑的很大原因之一。</p>
<p>从上面我们已经知道要给MyClss类的本身增加方法，需要讲方法定义在MyClass这个函数内部，这样的话，每声明一个新的实例，就会将MyClass本身复制一遍，这显然不是最优的做法。</p>
<p>既然不能将一个类（函数）所包含的方法都定义在函数的内部，那么，如何来给一个类添加方法呢？这就需要用到函数的prototype属性了。 </p>
<p>那prototype属性的作用又是什么呢？它的作用就是<strong>包含可以由特定类型的所有实例共享的属性和方法</strong>，也就是<strong>让该函数所实例化的对象们都可以找到公用的属性和方法</strong>。<strong>任何</strong>函数在创建的时候，其实会<strong>默认同时创建该函数的prototype对象。</strong></p>
<p>所以根据prototype的属性我们知道了，虽然新创建的对象可以使用它的构造函数所指向的prototype对象的属性和方法，但不能像构造函数那样直接调用prototype对象。</p>
<p>简而言之，就是如果我们使用函数的prototype对象来给函数添加方法，那么在创建一个新的对象的时候，并不会复制这个函数的所有方法，而是指向了这函数的所有方法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Circle</span>(<span class="params">radius</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.radius = radius;</span><br><span class="line">&#125;</span><br><span class="line">Circle.prototype.draw = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'draw'</span>)</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> c1 = <span class="keyword">new</span> Circle(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">const</span> c2 = <span class="keyword">new</span> Circle(<span class="number">1</span>);</span><br><span class="line"><span class="comment">//如下图，我们发现 c1,c2中并没有发现draw属性，但是c1,c2却可以调用draw属性</span></span><br><span class="line"><span class="comment">//因为draw已经在他们的原型对象里了</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/26/OOP-in-JavaScript/22.png" style="zoom: 60%;"></p>
<h3 id="Iterating-Instance-and-Prototype-Members"><a href="#Iterating-Instance-and-Prototype-Members" class="headerlink" title="Iterating Instance and Prototype Members"></a>Iterating Instance and Prototype Members</h3><p>Object.keys()只返回实例对象的成员</p>
<p>for…in .. () 返回所有可迭代可枚举的成员（在原型链上的）</p>
<p>hasOwnProperty(‘成员名字’)，判断该成员是继承而来的还是实例本省就有的</p>
<h3 id="Avoid-Extending-the-Built-in-Objects"><a href="#Avoid-Extending-the-Built-in-Objects" class="headerlink" title="Avoid Extending the Built-in Objects"></a>Avoid Extending the Built-in Objects</h3><p>我们不应该修改JavaScript中的 Built-in Objects，比如说在Array.prototype 或者 Object.prototype中加入新的方法或者修改原有的方法。因为以后引入的外部库可能也有相同名称的方法但是实现起来却完全不同</p>
<p>Don‘t modify objects you don’t OWN!</p>
<h3 id="Exercise"><a href="#Exercise" class="headerlink" title="Exercise"></a>Exercise</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">StopWatch</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> startTime,stopTime,running,duration = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//把这些都设置成只读属性</span></span><br><span class="line">    <span class="built_in">Object</span>.defineProperty(<span class="keyword">this</span>,<span class="string">'duration'</span>,&#123;</span><br><span class="line">        <span class="keyword">get</span>: function () &#123;</span><br><span class="line">            <span class="keyword">return</span> duration;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="built_in">Object</span>.defineProperty(<span class="keyword">this</span>,<span class="string">'startTime'</span>,&#123;</span><br><span class="line">        <span class="keyword">get</span>: function () &#123;</span><br><span class="line">            <span class="keyword">return</span> startTime;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="built_in">Object</span>.defineProperty(<span class="keyword">this</span>,<span class="string">'stopTime'</span>,&#123;</span><br><span class="line">        <span class="keyword">get</span>: function () &#123;</span><br><span class="line">            <span class="keyword">return</span> stopTime;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="built_in">Object</span>.defineProperty(<span class="keyword">this</span>,<span class="string">'running'</span>,&#123;</span><br><span class="line">        <span class="keyword">get</span>: function () &#123;</span><br><span class="line">            <span class="keyword">return</span> running;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">StopWatch.prototype.start = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>.running)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Stopwatch has already started!'</span>);</span><br><span class="line">    running = <span class="literal">true</span>;</span><br><span class="line">    startTime =<span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">&#125;;</span><br><span class="line">StopWatch.prototype.stop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="keyword">this</span>.running)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Stopwatch has already stopped!'</span>);</span><br><span class="line">    running = <span class="literal">false</span>;</span><br><span class="line">    stopTime = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    <span class="keyword">const</span> seconds = (stopTime.getTime()-startTime.getTime())/<span class="number">1000</span>;</span><br><span class="line">    <span class="comment">//得到的是毫秒数，所以要除以1000</span></span><br><span class="line">    duration +=seconds;</span><br><span class="line">&#125;;</span><br><span class="line">StopWatch.prototype.reset = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.startTime = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">this</span>.stopTime = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">this</span>.running = <span class="literal">false</span>;</span><br><span class="line">    duration = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//这里要注意，duration前面不要加this,因为这duration作为对象来说是可读属性</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="Prototypical-Inheritance"><a href="#Prototypical-Inheritance" class="headerlink" title="Prototypical Inheritance"></a>Prototypical Inheritance</h2><h3 id="1-Creating-Your-Own-Prototypical-Inheritance"><a href="#1-Creating-Your-Own-Prototypical-Inheritance" class="headerlink" title="1- Creating Your Own Prototypical Inheritance"></a>1- Creating Your Own Prototypical Inheritance</h3><p>现在比如说我们有一个圆的构造函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Circle</span>(<span class="params">radius</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.radius = radius;</span><br><span class="line">&#125;</span><br><span class="line">Circle.prototype.draw = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Draw'</span>);</span><br><span class="line">&#125;;</span><br><span class="line">Circle.prototype.duplicate = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Duplicate'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>那么如果我又想要一个Square 构造函数。又想保留这两个方法，我们是不是要重写？</p>
<p>其实不是，我们可以新建一个Shape 构造函数，再Shape.prototype 中添加这两个属性，然后再让Circle和Square继承Shape即可</p>
<p><img src="/2020/05/26/OOP-in-JavaScript/23.png" style="zoom: 33%;"></p>
<p>所以在这里，我们需要用到这个函数Object.create(proto)</p>
<p>返回值：一个新对象，带着指定的原型对象和属性。</p>
<p>也就是说命令一个Circle的原型对象，让他去等于一个新的，指向ShapeBase的对象，达到了继承的功能</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Circle.prototype = <span class="built_in">Object</span>.create(Shape.prototype)</span><br></pre></td></tr></table></figure>
<p>这里，我们令Shape.prototype作为Circle的原型对象，否则</p>
<p>Circle.prototype = Object.create(Object.prototype)，直接从元对象继承过来</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Shape</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line">Shape.prototype.duplicate = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Duplicate'</span>);</span><br><span class="line">&#125;;</span><br><span class="line">Circle.prototype = <span class="built_in">Object</span>.create(Shape.prototype);<span class="comment">//让Circle继承自Shape</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Circle</span>(<span class="params">radius</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.radius = radius;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//这是在Circle的原型对象中添加方法</span></span><br><span class="line">Circle.prototype.draw = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Draw'</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> c = <span class="keyword">new</span> Circle(<span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/26/OOP-in-JavaScript/25.png" style="zoom: 100%;"></p>
<p>c是一个实例，这个实例中有一个radius =1 的属性。这个实例的原型是CircleBase对象</p>
<p>CircleBase对象中，我们有一个draw方法。</p>
<p>CircleBase也是继承来的，继承自ShapeBase对象，在ShapeBase对象中有duplicate和constructor这两个方法</p>
<p>CircleBase也是继承来的，继承自Object对象，也就是元对象。</p>
<h3 id="2-Resetting-the-Constructor"><a href="#2-Resetting-the-Constructor" class="headerlink" title="2- Resetting the Constructor"></a>2- Resetting the Constructor</h3><p>但是向上面那样的写法，我们发现Circle.prototype 没有了 constructor方法了 我们就没有办法通过new Circle(1)来创建一个Circle对象了</p>
<p>这时候如果我们这样写 new Circle.prototype.constructor(1);的话，我们发现是这样一个情况</p>
<p><img src="/2020/05/26/OOP-in-JavaScript/26.png" style="zoom: 150%;"></p>
<p>我们看到其实是创建出了一个Shape对象来，这是因为CircleBase并没有constructor,所以他按照原型链向上去找，在ShapeBase中找到了这个constructor方法，但这个方法是Shape的构造函数。所以构造了一个Shape对象出来。</p>
<p>所以，在继承的时候，我们除了需要Object.create()之外，我们还需要Circle.prototype.constructor = Circle;</p>
<p><img src="/2020/05/26/OOP-in-JavaScript/27.png" style="zoom: 150%;"></p>
<p>那么加上这句话，我们可以看到我们利用new Circle.prototype.constructor()或者直接new Circle()构造出来的，就是一个Circle对象了</p>
<h3 id="3-Calling-the-Super-Constructor"><a href="#3-Calling-the-Super-Constructor" class="headerlink" title="3- Calling the Super Constructor"></a>3- Calling the Super Constructor</h3><p>那么我如果在Shape中传入一个color，在Circle中传入一个radius，这样的话我可以直接在Circle构造函数中调用Shape() 方法吗？</p>
<p>这是不行的，因为我们直接调用Shape()而不写new的话，传入的color参数会直接放到window对象（全局对象）当中去，那么如果我们写 new Shape()这就是新建了一个对象，不是我们要的目的。</p>
<p>所以我们的要做的就是把Shape中的color值赋给this对象</p>
<p>利用 Shape.call(this, color) ，就可以对this对象调用Shape方法，并且把color赋值给this对象</p>
<p><img src="/2020/05/26/OOP-in-JavaScript/28.png" style="zoom: 100%;"></p>
<h3 id="4-Intermediate-Function-Inheritance"><a href="#4-Intermediate-Function-Inheritance" class="headerlink" title="4- Intermediate Function Inheritance"></a>4- Intermediate Function Inheritance</h3><p>如果我们要写多级继承或者一个原型对象产生多个子对象的时候，我们会产生很多这样的代码，既不美观又容易犯错，落下</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Square.prototype = <span class="built_in">Object</span>.create(Shape.prototype);</span><br><span class="line">Square.prototype.constructor = Square;</span><br></pre></td></tr></table></figure>
<p>所以我们写一个函数来封装这个继承方法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">extend</span>(<span class="params">Child,Parent</span>) </span>&#123;</span><br><span class="line">    Child.prototype = <span class="built_in">Object</span>.create(Parent.prototype);</span><br><span class="line">    Child.prototype.constructor = Child;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>接下来用这个函数代替刚才的继承代码就好了！</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">extend(Circle,Shape);</span><br><span class="line">extend(Square,Shape);</span><br></pre></td></tr></table></figure>
<h3 id="5-Method-Overriding"><a href="#5-Method-Overriding" class="headerlink" title="5- Method Overriding"></a>5- Method Overriding</h3><p>在子类中重写基类的方法，重写一定要放在继承代码之后</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">extend(Circle,Shape);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Circle</span>(<span class="params">radius,color</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.radius = radius;</span><br><span class="line">&#125;</span><br><span class="line">Circle.prototype.duplicate = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Duplicate Circle'</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>如果我们想重写基类中的方法的同时也想调用基类中的方法 </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Circle.prototype.duplicate = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//调用call，传入this</span></span><br><span class="line">    Shape.prototype.duplicate.call(<span class="keyword">this</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Duplicate Circle'</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/26/OOP-in-JavaScript/29.png" style="zoom: 100%;"></p>
<h3 id="6-Polymorphism多态"><a href="#6-Polymorphism多态" class="headerlink" title="6- Polymorphism多态"></a>6- Polymorphism多态</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Shape</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line">Shape.prototype.duplicate = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Duplicate'</span>);</span><br><span class="line">&#125;;</span><br><span class="line">extend(Circle,Shape);<span class="comment">//继承函数，上文已提及</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Circle</span>(<span class="params">radius,color</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.radius = radius;</span><br><span class="line">&#125;</span><br><span class="line">Circle.prototype.duplicate = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Duplicate Circle'</span>);</span><br><span class="line">&#125;;</span><br><span class="line">extend(Square,Shape);</span><br><span class="line"><span class="function"><span class="keyword">function</span>  <span class="title">Square</span>(<span class="params">size</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.size = size;</span><br><span class="line">&#125;</span><br><span class="line">Square.prototype.duplicate = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Duplicate Square'</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> shapes = [</span><br><span class="line">    <span class="keyword">new</span> Circle(),</span><br><span class="line">    <span class="keyword">new</span> Square()</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> shape <span class="keyword">of</span> shapes)&#123;</span><br><span class="line">    shape.duplicate();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/26/OOP-in-JavaScript/30.png" style="zoom: 100%;"></p>
<p>这就是多态的作用了</p>
<h3 id="7-When-to-Use-Inheritance"><a href="#7-When-to-Use-Inheritance" class="headerlink" title="7- When to Use Inheritance"></a>7- When to Use Inheritance</h3><p>不是所有的地方都需要用继承，之后还会提到Composition方法</p>
<p><img src="/2020/05/26/OOP-in-JavaScript/31.png" style="zoom: 50%;"></p>
<p>比如这样，就发生了逻辑错误。</p>
<p><img src="/2020/05/26/OOP-in-JavaScript/32.png" style="zoom: 50%;"></p>
<p>正确的层级应该是这样的，但是如果有很多动物，这样的写法会让代码变得脆弱</p>
<p>如果要用继承，做好保存在同一级，不要多层级</p>
<p>记住 Favor Composition over Inheritance</p>
<p>我们通过组合的方式，也就是定义几个基本对象，然后拿来一个对象，我们把适用于这个对象的基本对象放加给它。</p>
<p>听起来有点像面向函数的编程思维。</p>
<h3 id="8-Mixins"><a href="#8-Mixins" class="headerlink" title="8- Mixins"></a>8- Mixins</h3><p>我们创建了三个基本对象：canEat, can Swim, can Walk;</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> canEat = &#123;</span><br><span class="line">    eat : <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.hunger--;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'eating'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> canWalk = &#123;</span><br><span class="line">    walk: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'walking'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> canSwim = &#123;</span><br><span class="line">    swim: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'swim'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Object</span>.assign(Person.prototype,canEat,canWalk);</span><br><span class="line"><span class="keyword">const</span>  person = <span class="keyword">new</span> Person();</span><br><span class="line"><span class="built_in">console</span>.log(person);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Goldfish</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Object</span>.assign(Goldfish.prototype,canEat,canSwim);</span><br><span class="line"><span class="keyword">const</span> goldfish = <span class="keyword">new</span> Goldfish();</span><br><span class="line"><span class="built_in">console</span>.log(goldfish);</span><br></pre></td></tr></table></figure>
<p>但是这样我们还是不精简，我们可以定义一个mixin函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mixin</span>(<span class="params">target,...sources</span>)</span>&#123;<span class="comment">//...sources就是说可以传入多个参数</span></span><br><span class="line">    <span class="built_in">Object</span>.assign(target,...sources);</span><br><span class="line">&#125;</span><br><span class="line">mixin(Person.prototype,canSwim,canEat);</span><br><span class="line">mixin(GoldFish.prototype,canSwim,canEat);</span><br></pre></td></tr></table></figure>
<h3 id="9-Exercise-Prototypical-Inheritance"><a href="#9-Exercise-Prototypical-Inheritance" class="headerlink" title="9- Exercise- Prototypical Inheritance"></a>9- Exercise- Prototypical Inheritance</h3><h3 id="10-Solution-Prototypical-Inheritance"><a href="#10-Solution-Prototypical-Inheritance" class="headerlink" title="10- Solution- Prototypical Inheritance"></a>10- Solution- Prototypical Inheritance</h3><h3 id="11-Exercise-Polymorphism"><a href="#11-Exercise-Polymorphism" class="headerlink" title="11- Exercise- Polymorphism"></a>11- Exercise- Polymorphism</h3><h3 id="12-Solution-Polymorphism"><a href="#12-Solution-Polymorphism" class="headerlink" title="12- Solution- Polymorphism"></a>12- Solution- Polymorphism</h3><h2 id="ES6-Classes"><a href="#ES6-Classes" class="headerlink" title="ES6 Classes"></a>ES6 Classes</h2><p><code>注:</code> 5-10小结来自React系列教程，因为是ES6的新语法，和对象也有点关系，所以我把它记录到这里，但是没有用到class</p>
<p><a href="https://www.bilibili.com/video/BV1Sb411P79t?p=17" target="_blank" rel="noopener">React教程</a></p>
<h3 id="1-ES6-Classes"><a href="#1-ES6-Classes" class="headerlink" title="1- ES6 Classes"></a>1- ES6 Classes</h3><p>在ES6中，有一种创建对象和继承关系的新方法-类</p>
<p> 但是类本质上还是函数，只是给函数披上了一层外衣</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span></span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(radius) &#123;</span><br><span class="line">        <span class="comment">//这里是在构造函数中定义的属性和方法，实例化的对象中会进行拷贝</span></span><br><span class="line">        <span class="keyword">this</span>.radius = radius;</span><br><span class="line">        <span class="keyword">this</span>.move = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//这里是在 Circle.prototype 中定义属性和方法</span></span><br><span class="line">    draw()&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'draw'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">typeof</span> Circle; <span class="comment">// function</span></span><br></pre></td></tr></table></figure>
<p>现在如果我新建一个对象，如果不写new，就会报错</p>
<h3 id="2-Hoisting置顶"><a href="#2-Hoisting置顶" class="headerlink" title="2- Hoisting置顶"></a>2- Hoisting置顶</h3><p>在JavaScript中函数的声明有两种形式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHello</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">直接函数声明，可以不写分号</span></span><br><span class="line"><span class="comment">这种声明方式，函数会自动被抬升到代码最上面</span></span><br><span class="line"><span class="comment">所以可以声明之前调用sayHello函数，因为JavaScript引擎会自动置顶</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> sayGoodbye = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">函数表达式声明，需要以分号结束</span></span><br><span class="line"><span class="comment">函数表达式并不会提前，它的本质是常量或者变量，我们如果在前面调用，实际上是调用了未声明的量</span></span><br><span class="line"><span class="comment">所以是非法的。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>对于类来说，我们也有两种形式，类声明和类表达式，但是和函数不同的是，类声明和类表达式都不会置顶</p>
<p>所以不可以再类声明前实例化类</p>
<p>个人建议，用类声明来创建类</p>
<h3 id="3-Static-Methods"><a href="#3-Static-Methods" class="headerlink" title="3- Static Methods"></a>3- Static Methods</h3><p>我们有两种方法，实例方法和静态方法</p>
<p>实例方法只会在实例中生效</p>
<p>实例方法实在类当中起作用的，而不是在类的实例当中</p>
<p>现成的例子，就是Math对象中的函数，就是静态函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span></span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(radius) &#123;</span><br><span class="line">        <span class="keyword">this</span>.radius = radius;</span><br><span class="line">        <span class="keyword">this</span>.move = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//这里的draw()就是一个实例方法</span></span><br><span class="line">    draw()&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'draw'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//static method</span></span><br><span class="line">    <span class="comment">//这样之后，这个方法就不会再属于类的实例对象了，无法在示例化的对象中通过点来访问</span></span><br><span class="line">    <span class="comment">//但是可以同过类+点的方法来讨论，之作用在class本身</span></span><br><span class="line">  	<span class="keyword">static</span> parse(string)&#123;</span><br><span class="line">		<span class="keyword">const</span> radius = <span class="built_in">JSON</span>.parse(str).radius;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Circle(radius);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> circle = Circle.parse(<span class="string">'&#123;"radius" : 1&#125;'</span>);<span class="comment">//调用了类的静态方法，</span></span><br></pre></td></tr></table></figure>
<h3 id="4-The-This-Keyword"><a href="#4-The-This-Keyword" class="headerlink" title="4- The This Keyword"></a>4- The This Keyword</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Circle = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.draw = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> c = <span class="keyword">new</span> Circle();</span><br><span class="line">c.draw();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> draw = c.draw;</span><br><span class="line">draw();</span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/26/OOP-in-JavaScript/33.png" style="zoom: 80%;"></p>
<p>同样是调用，为什么一个是Circle对象，一个就是Window对象了呢？</p>
<p>因为我们从一个对象c上调用方法draw()，draw()中的this是指向对象本身的。</p>
<p>然而通过函数调用，也就是const draw = c.draw; draw();这种方法调用的draw()的时候</p>
<p>我们以一种独立的方式调用函数， 这种调用，draw()中的this指向一个默认的全局变量，也就是Window对象（或者node 中的Global)</p>
<h4 id="strict模式对this的影响"><a href="#strict模式对this的影响" class="headerlink" title="strict模式对this的影响"></a>strict模式对this的影响</h4><p>在JavaScript中有一个strict 模式，当我们开启这个模式的时候，JavaScript会做很多更严格的错误检查。</p>
<p>通过 use strict 启用</p>
<p>然后我们会发现，原来的Window对象变成了undefined对象。也就是说当独立调用draw()的时候，this将不再指向全局对象。他会被设置成undefined，这样会防止我们修改Window对象中的方法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span></span>&#123;</span><br><span class="line">	draw()&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> c = <span class="keyword">new</span> Circle();</span><br><span class="line">c.draw();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> draw = c.draw;</span><br><span class="line">draw();</span><br></pre></td></tr></table></figure>
<p>这时候我们会发现调用draw()还是出现undefined</p>
<p>因为在类的作用下，严格模式会自动启用。</p>
<h3 id="5-Binding-this"><a href="#5-Binding-this" class="headerlink" title="5- Binding this"></a>5- Binding this</h3><p>我们知道如果独立调用类中的函数，那么this会指向Window或者undefined</p>
<p>接下来我们让this无论何时都指向对象本身</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">	name: <span class="string">"Mosh"</span>,</span><br><span class="line">	walk()&#123;</span><br><span class="line">		console.<span class="built_in">log</span>(<span class="keyword">this</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> walk = person.walk.bind(person);</span><br><span class="line">walk();</span><br><span class="line"><span class="comment">//我们发现这时候 walk()中的this就指向了Person类</span></span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/26/OOP-in-JavaScript/40.png" style="zoom: 80%;"></p>
<h3 id="6-Arrow-Functions"><a href="#6-Arrow-Functions" class="headerlink" title="6- Arrow Functions"></a>6- Arrow Functions</h3><p>箭头函数非常有用</p>
<p>原来我们这么写一个函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> square = <span class="function"><span class="keyword">function</span>(<span class="params">number</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> number*number;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>现在我们可以这么写</p>
<p>如果没有 参数，那么直接 ()=&gt;{} 即可</p>
<p>如果有多可参数，那么需要用括号括起来；如果只有一个参数如下图，可以省略括号</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> square = <span class="function"><span class="params">number</span> =&gt;</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> number*number;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>甚至我们如果写的是单行代码，只返回一个值，我们可以这么写，（类似于python中的lambda函数）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> square = <span class="function"><span class="params">number</span> =&gt;</span> number*number;<span class="comment">//理解为 number goes to  number*number</span></span><br></pre></td></tr></table></figure>
<p>再比如：利用fileter函数的时候，简直比python都要简洁。。。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> jobs =[</span><br><span class="line">	&#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">isActive</span>: <span class="literal">true</span>&#125;;</span><br><span class="line">	&#123;<span class="attr">id</span>: <span class="number">2</span>, <span class="attr">isActive</span>: <span class="literal">true</span>&#125;;</span><br><span class="line">	&#123;<span class="attr">id</span>: <span class="number">3</span>, <span class="attr">isActive</span>: <span class="literal">false</span>&#125;;</span><br><span class="line">]</span><br><span class="line"><span class="keyword">const</span> activeJobs = jobs.filter(<span class="function"><span class="params">job</span>=&gt;</span> job.isActive  );</span><br></pre></td></tr></table></figure>
<h3 id="7-Arrow-Functions-and-this"><a href="#7-Arrow-Functions-and-this" class="headerlink" title="7- Arrow Functions and this"></a>7- Arrow Functions and this</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">	talk()&#123;</span><br><span class="line">        setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"this"</span>,<span class="keyword">this</span>);</span><br><span class="line">        &#125;，<span class="number">1000</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line">person.talk();</span><br></pre></td></tr></table></figure>
<p>我们按照上面这种写法吗，发现this指向了Window对象</p>
<p>这是因为传入的匿名回调函数，是不属于任何对象的。他和person.talk()函数没关系,是一个独立的函数，所以默认this指向了全局对象WIndow</p>
<p>那么我们怎么让回调函数中的this指向对象person呢？</p>
<p>我们可以 然后在回调函数中利用箭头符号的特性，不需要在回调函数外面声明self再让回调函数指向self</p>
<p>直接像下面这样修改即可。箭头函数中的this，是从上面定义this的地方继承下来的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const person &#x3D; &#123;</span><br><span class="line">	talk()&#123;</span><br><span class="line">        setTimeout(()&#x3D;&gt;&#123;</span><br><span class="line">            console.log(&quot;this&quot;,this);</span><br><span class="line">        &#125;，1000);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line">person.talk();</span><br></pre></td></tr></table></figure>
<h3 id="8-Array-map-Method"><a href="#8-Array-map-Method" class="headerlink" title="8- Array.map Method"></a>8- Array.map Method</h3><p>ES6中新引入了Array.map </p>
<p>当我想渲染一个列表的时候，经常要使用到map()方法</p>
<p>map()方法遍历列表中的每一个项，传入到某个函数当中，然后再返回每一个项（和python的map方法差不多）,得到一个新的列表</p>
<p>利用模板格式语法，我们可以美化代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> colors = [<span class="string">'red'</span>,<span class="string">'green'</span>,<span class="string">'blue'</span>];</span><br><span class="line"><span class="keyword">const</span> items = color.map( <span class="function"><span class="params">color</span> =&gt;</span><span class="string">`&lt;li&gt;<span class="subst">$&#123;color&#125;</span>&lt;/li&gt;`</span>);</span><br><span class="line"><span class="comment">//上面的就等于 color.map(color =&gt; "&lt;li&gt;+ color + &lt;/li&gt;")</span></span><br><span class="line"><span class="built_in">console</span>.log(items);</span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/26/OOP-in-JavaScript/42.png" style="zoom: 80%;"></p>
<h3 id="9-Object-Destructuring-解构赋值"><a href="#9-Object-Destructuring-解构赋值" class="headerlink" title="9- Object Destructuring 解构赋值"></a>9- Object Destructuring 解构赋值</h3><p>解构赋值允许你使用类似数组或对象字面量的语法将数组和对象的属性赋给各种变量。这种赋值语法极度简洁，同时还比传统的属性访问方法更为清晰。</p>
<p>通常来说，你很可能这样访问数组中的前三个元素：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> first = someArray[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">var</span> second = someArray[<span class="number">1</span>];</span><br><span class="line"><span class="keyword">var</span> third = someArray[<span class="number">2</span>];</span><br></pre></td></tr></table></figure>
<p>如果使用解构赋值的特性，将会使等效的代码变得更加简洁并且可读性更高：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> [first, second, third] = someArray;</span><br></pre></td></tr></table></figure>
<p>想要几个写几个</p>
<h3 id="10-Spread-Operator"><a href="#10-Spread-Operator" class="headerlink" title="10- Spread Operator"></a>10- Spread Operator</h3><p>就是三个点  ...</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> first = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span> second = [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>];</span><br><span class="line"><span class="keyword">const</span> combined = [...first,...second];</span><br><span class="line"><span class="comment">//利用这种语法，那么我们可以随心所欲地在数组中加些别的内容比如</span></span><br><span class="line"><span class="keyword">const</span> combined = [...first,<span class="string">'a'</span>,...second,<span class="string">'b'</span>];</span><br></pre></td></tr></table></figure>
<p>有了这种语法，我们可以很容易的复制一个数组</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> clone = [...first];</span><br></pre></td></tr></table></figure>
<p>我们也可以对对象使用这种语法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> first = &#123;<span class="attr">name</span> : <span class="string">"Mosh"</span>&#125;;</span><br><span class="line"><span class="keyword">const</span> second = &#123;<span class="attr">job</span>: <span class="string">"Instructor"</span>&#125;;</span><br><span class="line"><span class="keyword">const</span> combined = &#123;...first,...second,<span class="attr">location</span>:<span class="string">"Australia"</span>&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(combined);</span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/26/OOP-in-JavaScript/43.png" style="zoom: 80%;"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> clone = &#123;...first&#125;;</span><br><span class="line"><span class="comment">//同时也可以对对象进行赋值操作</span></span><br></pre></td></tr></table></figure>
<h3 id="11-1-Private-Members-Using-Symbols"><a href="#11-1-Private-Members-Using-Symbols" class="headerlink" title="11-1 Private Members Using Symbols"></a>11-1 Private Members Using Symbols</h3><p>如果我们直接在constructor中定义方法或者属性，那么这个属性可以在实例中被访问</p>
<p>但是利用Symbol()函数来达成 私有属性这个功能(实现了一部分私有属性的功能)</p>
<p>Symbol 值可以由程序创建，并可以作为属性名，而且不用担心属性名冲突。调用 Symbol() 方法将创建一个新的 Symbol 类型的值，并且该值不与其它任何值相等。 Symbol() === Symbol() //False</p>
<p>Symbol  一旦创建后就不可更改，不能对它们设置属性（如果在严格模式下尝试这样做，你将得到一个 TypeError）。它们可以作为属性名，这时它们和字符串的属性名没有什么区别。所以我们现在就要把这个Symbol作为属性的名称</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> _radius = <span class="built_in">Symbol</span>();</span><br><span class="line"><span class="keyword">const</span> _draw = <span class="built_in">Symbol</span>();</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span></span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(radius) &#123;</span><br><span class="line">        <span class="comment">//因为下划线加上变量名是常见的私有属性的表达方式，但是直接通过点是没有办法访问的</span></span><br><span class="line">        <span class="comment">//所以通过中括号来访问</span></span><br><span class="line">        <span class="keyword">this</span>[_radius] = radius;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//根据ES6 的新特性，就是可以计算生成属性的名称</span></span><br><span class="line">    <span class="comment">//_draw 这个独立的值就会被当作这个方法的名称</span></span><br><span class="line">    [_draw]()&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> c = <span class="keyword">new</span> Circle(<span class="number">1</span>);</span><br><span class="line">c.radius;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/26/OOP-in-JavaScript/35.png" style="zoom: 80%;"></p>
<p>这样我们就把原来的属性名称隐藏起来了（虽然外面还是显示了symbol）但是如果我们按照这种方式定义了多个变量的话，那么他们都显示为Symbol()但是在内部他们是不相同的</p>
<h3 id="11-2-Private-Members-Using-WeakMaps"><a href="#11-2-Private-Members-Using-WeakMaps" class="headerlink" title="11- 2 Private Members Using WeakMaps"></a>11- 2 Private Members Using WeakMaps</h3><p><a href="https://blog.csdn.net/weixin_33971205/article/details/87946796" target="_blank" rel="noopener">weakmap博客</a></p>
<p>利用ES6的新特性WeakMap（弱映射）,WeakMap 的键只能是对象，值可以为任意的类型</p>
<p>之所以被称为弱映射，是因为键很弱，如果键没有被引用的话，那么这个键值对就会被垃圾回收机制删除，避免了内存泄漏</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> _radius = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span></span>&#123;</span><br><span class="line">        <span class="keyword">constructor</span>(radius) &#123;</span><br><span class="line">            _radius.set(<span class="keyword">this</span><span class="comment">/*对象，即键值*/</span>,radius);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">const</span> c = <span class="keyword">new</span> Circle(<span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/26/OOP-in-JavaScript/36.png" style="zoom: 100%;"></p>
<p>我们看到这样 radius就被隐藏起来了；如果我们想要读取这个radius的值，那么我们需要再写一个方法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> _radius = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span></span>&#123;</span><br><span class="line">        <span class="keyword">constructor</span>(radius) &#123;</span><br><span class="line">            _radius.set(<span class="keyword">this</span><span class="comment">/*对象，即键值*/</span>,radius);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        draw()&#123;</span><br><span class="line">		    	<span class="built_in">console</span>.log(_radius.get(<span class="keyword">this</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">const</span> c = <span class="keyword">new</span> Circle(<span class="number">1</span>);</span><br><span class="line">c.draw();<span class="comment">//1</span></span><br></pre></td></tr></table></figure>
<p>那么我们怎么定义一个方法呢？</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> _radius = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"><span class="keyword">const</span> _move = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span></span>&#123;</span><br><span class="line">        <span class="keyword">constructor</span>(radius) &#123;</span><br><span class="line">            _radius.set(<span class="keyword">this</span><span class="comment">/*对象，即键值*/</span>,radius);</span><br><span class="line">       <span class="comment">//上面是把变量属性radius映射到this(Circle)对象中，下面的则是把一个方法映射进去</span></span><br><span class="line">            _move.set(<span class="keyword">this</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            	<span class="built_in">console</span>.log(<span class="string">'move'</span>,<span class="keyword">this</span>);</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        draw()&#123;</span><br><span class="line">		    _move.get(<span class="keyword">this</span>)();<span class="comment">//调用私有方法</span></span><br><span class="line">            <span class="built_in">console</span>.log(_radius.get(<span class="keyword">this</span>));<span class="comment">//读取私有属性</span></span><br><span class="line">            _console.log(<span class="string">'draw'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">const</span> c = <span class="keyword">new</span> Circle(<span class="number">1</span>);</span><br><span class="line">c.draw(); <span class="comment">// 显示:move undefined</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">为什么console.log('move',this)中的this指向了undefined(严格模式下)</span></span><br><span class="line"><span class="comment">原因还没搞懂。。。</span></span><br><span class="line"><span class="comment">那么如果我们要调用Circle对象中的某些成员该怎么办？要解决这个问题我们需要运用箭头函数</span></span><br><span class="line"><span class="comment">英文箭头函数会将this设置为包含它的函数，这时候console.log('move',this)中的this</span></span><br><span class="line"><span class="comment">将从调用它的构造函数中继承过来，也就是说，显示Circle</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">_move.set(<span class="keyword">this</span>, () =&gt; &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'move'</span>,<span class="keyword">this</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>我们最好对每一个属性或者方法都建立一个WeakMap</p>
<p>因为如果都放在一起，代码会变得不干净</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> privateProps = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span></span>&#123;</span><br><span class="line">	<span class="keyword">constructor</span>(radius)&#123;</span><br><span class="line">		privateProps.set(<span class="keyword">this</span>,&#123;</span><br><span class="line">			radius: radius,</span><br><span class="line">			move: <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;</span><br><span class="line">	privateProps.get(<span class="keyword">this</span>).radius;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="12-Getters-and-Setters"><a href="#12-Getters-and-Setters" class="headerlink" title="12- Getters and Setters"></a>12- Getters and Setters</h3><p>如果我们想要把radius设置成只读属性，一种方法就是向上面那样写一个在prototype里的方法getRadius()</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> _radius = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span></span>&#123;</span><br><span class="line">     <span class="keyword">constructor</span>(radius) &#123;</span><br><span class="line">         _radius.set(<span class="keyword">this</span><span class="comment">/*对象，即键值*/</span>,radius);</span><br><span class="line">     &#125; </span><br><span class="line">     getRadius()&#123;</span><br><span class="line">         <span class="keyword">return</span> _radius.get(<span class="keyword">this</span>);</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>也可以用上文提到的Object.definProperty() 这样更容易操作和访问</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> _radius = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span></span>&#123;</span><br><span class="line">     <span class="keyword">constructor</span>(radius) &#123;</span><br><span class="line">         _radius.set(<span class="keyword">this</span><span class="comment">/*对象，即键值*/</span>,radius);</span><br><span class="line">         <span class="built_in">Object</span>.defineProperty(<span class="keyword">this</span>,<span class="string">'radius'</span>,&#123;</span><br><span class="line">         	<span class="keyword">get</span>: function()&#123;</span><br><span class="line">         		<span class="keyword">return</span> _radius.get(<span class="keyword">this</span>)</span><br><span class="line">         	&#125;</span><br><span class="line">         &#125;)</span><br><span class="line">     &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但显然Object.definProperty() 也太麻烦了，ES6中的类有着更好的实现办法,直接把get 属性(){}加到prototype当中 ,这看起来像个方法，但实际上可以直接c.radius 来进行访问。</p>
<p>类似的，我们也可以设置set 属性(){} ;可以对radius进行赋值</p>
<p>ES6 中，getter和setter 变得简单多了</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> _radius = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span></span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(radius) &#123;</span><br><span class="line">        _radius.set(<span class="keyword">this</span><span class="comment">/*对象，即键值*/</span>,radius);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">get</span> radius()&#123;</span><br><span class="line">        <span class="keyword">return</span> _radius.get(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">set</span> radius(value)&#123;</span><br><span class="line">        <span class="keyword">if</span>(value&lt;=<span class="number">0</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Invalid radius'</span>);</span><br><span class="line">        _radius.set(<span class="keyword">this</span>,value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="13-Inheritance"><a href="#13-Inheritance" class="headerlink" title="13- Inheritance"></a>13- Inheritance</h3><p>在ES6中实现继承，我们只需要简简单单的extends关键词即可</p>
<p>下面的move和draw都是放在原型对象中的，而不是在constructor中的</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">	move()&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'move'</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span> <span class="keyword">extends</span> <span class="title">Shape</span></span>&#123;</span><br><span class="line">	draw()&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'draw'</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> c = <span class="keyword">new</span> Circle();</span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/26/OOP-in-JavaScript/37.png" style="zoom: 100%;"></p>
<p>我们可以在Shape中加一个constructor构造函数，让每个Shape实例都有一个color属性，但是如果在Circle中加一个constructor的话，子类的构造器中必须先调用父类的构造函数，以创建一个父类的实例。我们可以用<strong>super</strong>关键字，super()中传入父类构造函数中的属性名称</p>
<p>如果想把自己的属性也加到构造函数中去，那么直接写就行,super <strong>只管</strong>父类构造函数中的属性</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(color)&#123;</span><br><span class="line">        <span class="keyword">this</span>.color = color;</span><br><span class="line">    &#125;</span><br><span class="line">	move()&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'move'</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span> <span class="keyword">extends</span> <span class="title">Shape</span></span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(color,radius)&#123;</span><br><span class="line">        <span class="keyword">super</span>(color);</span><br><span class="line">        <span class="keyword">this</span>.radius = radius;</span><br><span class="line">    &#125;</span><br><span class="line">	draw()&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'draw'</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> c = <span class="keyword">new</span> Circle(<span class="string">'red'</span>,<span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/26/OOP-in-JavaScript/38.png" style="zoom: 100%;"></p>
<h3 id="14-Method-Overriding"><a href="#14-Method-Overriding" class="headerlink" title="14- Method Overriding"></a>14- Method Overriding</h3><p>在原型继承里提过重写函数，那么在类中呢？也是直接写就行了，JavaScript编译器会从下至上寻找这个move函数</p>
<p>如果我想要在自类中调用父类的move函数，又想要有自己的改变，利用super.move()即可；</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">	move()&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'move'</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span> <span class="keyword">extends</span> <span class="title">Shape</span></span>&#123;</span><br><span class="line">	move()&#123;</span><br><span class="line">        <span class="keyword">super</span>.move();</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'circle move'</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> c = <span class="keyword">new</span> Circle(<span class="string">'red'</span>,<span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<h3 id="15-Exercise"><a href="#15-Exercise" class="headerlink" title="15- Exercise"></a>15- Exercise</h3><h3 id="16-Solution"><a href="#16-Solution" class="headerlink" title="16- Solution"></a>16- Solution</h3><h2 id="ES6-Tooling"><a href="#ES6-Tooling" class="headerlink" title="ES6 Tooling"></a>ES6 Tooling</h2><h3 id="1-Modules"><a href="#1-Modules" class="headerlink" title="1- Modules"></a>1- Modules</h3><p>现实生活中我们不可能在一个文件中写成百上千行的脚本文件。所以我们把代码划分成很多独立的小文件，这些文件就是所谓的模块。</p>
<p>模块带来了很多好处。、</p>
<p><strong>Maintainability</strong></p>
<p>我们通过模块化增加了程序的可维护性，更加容易管理程序。</p>
<p><strong>Resuse</strong></p>
<p>我们通过模块化，可以在更多的程序中重用我们已经写好了的模块</p>
<p><strong>Abstract</strong></p>
<p>我们通过模块化, 可以隐藏模块中的细节，之向外提供必要的接口即可</p>
<h3 id="2-CommonJS-Modules"><a href="#2-CommonJS-Modules" class="headerlink" title="2- CommonJS Modules"></a>2- CommonJS Modules</h3><p><strong>Circle.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Implementation Detail </span></span><br><span class="line"><span class="keyword">const</span> _radius = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Public Interface</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(radius) &#123;</span><br><span class="line">    _radius.set(<span class="keyword">this</span>, radius);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  draw() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Circle with radius '</span> + _radius.get(<span class="keyword">this</span>));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = Circle;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">如果我们想导入多个类，也想把它们公开，我们可以这么写</span></span><br><span class="line"><span class="comment">module.exports.Circle = Circle;</span></span><br><span class="line"><span class="comment">module.exports.Shape = Shape;</span></span><br><span class="line"><span class="comment">module.exports.Square = Square;</span></span><br><span class="line"><span class="comment">这里我只想导入一个类，我们可以直接简化成</span></span><br><span class="line"><span class="comment">module.exports = Circle;</span></span><br><span class="line"><span class="comment">这样我们引入Circle模块的时候，我们其实就得到了Circle类</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p><strong>index.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Circle = <span class="built_in">require</span>(<span class="string">'./circle'</span>);</span><br><span class="line"><span class="comment">// 	引用circle，其实等于引用了Circle对象,那么我们把这个返回值存放在一个常量Circle当中</span></span><br><span class="line"><span class="comment">//	就可以用Cirle来创建对象了</span></span><br><span class="line"><span class="keyword">const</span> c = <span class="keyword">new</span> Circle(<span class="number">10</span>);</span><br><span class="line">c.draw();</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">注意：</span></span><br><span class="line"><span class="comment">	在这个模块中，我们只公开了Circle类</span></span><br><span class="line"><span class="comment">	所以这里的radius弱映射_radius是没有办法访问到的</span></span><br><span class="line"><span class="comment">	所以说，Circle是公共接口,而_radius 是实现细节</span></span><br><span class="line"><span class="comment">	这种方法不会破坏其他程序，因为没有任何其他模块可以访问到_radius属性。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>运行index.js, 得到了Circle with radius 10</p>
<h3 id="3-ES6-Modules"><a href="#3-ES6-Modules" class="headerlink" title="3- ES6 Modules"></a>3- ES6 Modules</h3><p><strong>Circle.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> _radius = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">在ES6当中，我们直接在class之前加上export即可，这样我们也可以访问Circle类但是不能访问radius</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">Circle</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(radius) &#123;</span><br><span class="line">    _radius.set(<span class="keyword">this</span>, radius);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  draw() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Circle with radius '</span> + _radius.get(<span class="keyword">this</span>));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>index.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;Circle&#125; <span class="keyword">from</span> <span class="string">'./circle.js'</span>;</span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">引入的使用大括号围住Circle，Circle就是export出来的Circle，这时候一定要写上.js</span></span><br><span class="line"><span class="comment">同时在html引入的时候注type = 'module' 才不会报错</span></span><br><span class="line"><span class="comment"> &lt;script type="module" src="index.js"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="comment">语法和python类似。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> c = <span class="keyword">new</span> Circle(<span class="number">10</span>);</span><br><span class="line">c.draw();</span><br></pre></td></tr></table></figure>
<h3 id="4-ES6-Tooling"><a href="#4-ES6-Tooling" class="headerlink" title="4- ES6 Tooling"></a>4- ES6 Tooling</h3><p>前端工作者，需要了解</p>
<p>JavaScript中我们有两类工具，分别是 Transpiler 和 Bundler</p>
<p><strong>Transpiler</strong> 是 Translator+Compiler 的结合，基本上就是将我们写的JavaScript代码翻译成所有浏览器都能读懂的代码，Babel就是现代JS代码中一种非常流行的转译器</p>
<p><strong>Bundler</strong> 就是把很多的js文件合并成一个js文件，也就是我们说的打包。最受欢迎的就是WebPack。他会去掉所有的空行，注释，并且会简化一切名称。这样有助于优化客户请求文件的过程</p>
<h3 id="5-Babel"><a href="#5-Babel" class="headerlink" title="5- Babel"></a>5- Babel</h3><p>在terminal中安装 babel</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install babel-cli@6.26.0 babel-core@6.26.0 babel-preset-env@1.6.1 --save-dev</span><br></pre></td></tr></table></figure>
<p>我们在index.js中写 const x = 1;</p>
<p><img src="/2020/05/26/OOP-in-JavaScript/39.png" style="zoom: 100%;"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设置好以后,需要创建一个build文件夹</span></span><br><span class="line">npm run babel;</span><br></pre></td></tr></table></figure>
<p>会出现以下结果</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"><span class="keyword">var</span> x= <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<h3 id="6-Webpack"><a href="#6-Webpack" class="headerlink" title="6- Webpack"></a>6- Webpack</h3><p>webpack会把所有的js文件合并</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/05/25/%E5%AE%A2%E6%88%B7%E7%AB%AFJS%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/25/%E5%AE%A2%E6%88%B7%E7%AB%AFJS%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86/" class="post-title-link" itemprop="url">客户端JS第一部分</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-05-25 15:42:50 / Modified: 18:54:00" itemprop="dateCreated datePublished" datetime="2020-05-25T15:42:50+08:00">2020-05-25</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="客户端JS第一部分"><a href="#客户端JS第一部分" class="headerlink" title="客户端JS第一部分"></a>客户端JS第一部分</h1><h2 id="Web浏览器当中的JavaScript"><a href="#Web浏览器当中的JavaScript" class="headerlink" title="Web浏览器当中的JavaScript"></a>Web浏览器当中的JavaScript</h2><p><img src="/2020/05/25/%E5%AE%A2%E6%88%B7%E7%AB%AFJS%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86/1.png" style="zoom: 50%;"></p>
<h3 id="在JavaScript中嵌入JavaScript"><a href="#在JavaScript中嵌入JavaScript" class="headerlink" title="在JavaScript中嵌入JavaScript"></a>在JavaScript中嵌入JavaScript</h3><ol>
<li>内联，放置在\<script\>和\&lt;/script> 标签对之间</script\></li>
<li>放置在由\<script\>标签的src属性指定的外部文件中</script\></li>
<li>放置在HTML事件处理程序中，该事件处理程序由onclick这样的HTML属性指定</li>
<li>放在一个URL当中，这个URL使用特殊的”javaScript:”协议（较少用)</li>
</ol>
<h4 id="内联"><a href="#内联" class="headerlink" title="内联"></a>内联</h4><p><img src="/2020/05/25/%E5%AE%A2%E6%88%B7%E7%AB%AFJS%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86/2.png" style="zoom: 70%;"></p>
<h3 id="标签的src属性"><a href="#标签的src属性" class="headerlink" title="\标签的src属性"></a>\<script\>标签的src属性</script\></h3><p>类似于导入库的概念</p>
<p><img src="/2020/05/25/%E5%AE%A2%E6%88%B7%E7%AB%AFJS%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86/3.png" style="zoom: 60%;"></p>
<h5 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h5><ul>
<li>可以把大块的JS代码从HTML文件中删除，这有助于保持内容和行为的分离，从而简化HTML文件</li>
<li>如果有多个Web页面共用相同的JavaScript代码，用src属性可以让你只管理一份diamagnetic，而不用在代码改变时编辑每个HTML文件</li>
<li>如果一个JavaScript代码由多个页面共享，就只需要下载它一次，通过使用它的一个页面，虽然有的页面可以再用浏览器缓存中检索它</li>
<li>由于src属性的值可以实任意的URL，因此来自一个Web服务器的JavaScript代码程序或者Web页面可以使用另外一个Web服务器输出的代码，很多互联网广告依赖于此</li>
<li>从其它网站注入脚本的能力可以让我们更好的利用缓存</li>
</ul>
<h4 id="HTML中的事件处理程序"><a href="#HTML中的事件处理程序" class="headerlink" title="HTML中的事件处理程序"></a>HTML中的事件处理程序</h4><p><img src="/2020/05/25/%E5%AE%A2%E6%88%B7%E7%AB%AFJS%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86/4.png" style="zoom: 60%;"></p>
<h4 id="URL中的JavaScript"><a href="#URL中的JavaScript" class="headerlink" title="URL中的JavaScript"></a>URL中的JavaScript</h4><p><img src="/2020/05/25/%E5%AE%A2%E6%88%B7%E7%AB%AFJS%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86/5.png" style="zoom: 60%;"></p>
<h4 id="书签"><a href="#书签" class="headerlink" title="书签"></a>书签</h4><p><img src="/2020/05/25/%E5%AE%A2%E6%88%B7%E7%AB%AFJS%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86/5.png" style="zoom: 60%;"></p>
<h3 id="JavaScript程序的理想执行事件线"><a href="#JavaScript程序的理想执行事件线" class="headerlink" title="JavaScript程序的理想执行事件线"></a>JavaScript程序的理想执行事件线</h3><p><img src="/2020/05/25/%E5%AE%A2%E6%88%B7%E7%AB%AFJS%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86/7.png" style="zoom: 60%;"></p>
<p><img src="/2020/05/25/%E5%AE%A2%E6%88%B7%E7%AB%AFJS%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86/10.png" style="zoom: 60%;"></p>
<h3 id="Document-write"><a href="#Document-write" class="headerlink" title="Document.write()"></a>Document.write()</h3><p><img src="/2020/05/25/%E5%AE%A2%E6%88%B7%E7%AB%AFJS%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86/8.png" style="zoom: 60%;"></p>
<h3 id="defer-async属性"><a href="#defer-async属性" class="headerlink" title="defer,async属性"></a>defer,async属性</h3><p><img src="/2020/05/25/%E5%AE%A2%E6%88%B7%E7%AB%AFJS%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86/9.png" style="zoom: 60%;"></p>
<h2 id="Window对象"><a href="#Window对象" class="headerlink" title="Window对象"></a>Window对象</h2><h3 id="计时器"><a href="#计时器" class="headerlink" title="计时器"></a>计时器</h3><p><img src="/2020/05/25/%E5%AE%A2%E6%88%B7%E7%AB%AFJS%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86/11.png" style="zoom: 60%;"></p>
<h2 id="脚本化文档"><a href="#脚本化文档" class="headerlink" title="脚本化文档"></a>脚本化文档</h2>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/05/25/94-144-145%E4%BA%8C%E5%8F%89%E6%A0%91%E4%B8%89%E5%BA%8F%E9%81%8D%E5%8E%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/25/94-144-145%E4%BA%8C%E5%8F%89%E6%A0%91%E4%B8%89%E5%BA%8F%E9%81%8D%E5%8E%86/" class="post-title-link" itemprop="url">94-144-145二叉树三序遍历</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-05-25 13:38:13 / Modified: 14:14:34" itemprop="dateCreated datePublished" datetime="2020-05-25T13:38:13+08:00">2020-05-25</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="94-144-145二叉树三序遍历"><a href="#94-144-145二叉树三序遍历" class="headerlink" title="94-144-145二叉树三序遍历"></a>94-144-145二叉树三序遍历</h1><p>所谓三序遍历，就是前序遍历，中序遍历和后序遍历。那么在之前的博客<a href="https://jasonxqh.github.io/2020/05/13/二叉树/">二叉树</a>当中我已经详细的写了二叉树的基本知识，构建，遍历。在leetcode上，也有这三道题目。</p>
<h3 id="题目给出的代码"><a href="#题目给出的代码" class="headerlink" title="题目给出的代码"></a>题目给出的代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * struct TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode *left;</span></span><br><span class="line"><span class="comment"> *     TreeNode *right;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int x) : val(x), left(NULL), right(NULL) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">inorderTraversal</span><span class="params">(TreeNode* root)</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>所以这三道题目，不仅仅要利用递归的思路解出来（简单),还要用迭代+栈的做法解。</p>
<h3 id="递归法求解"><a href="#递归法求解" class="headerlink" title="递归法求解"></a>递归法求解</h3><h4 id="先序遍历"><a href="#先序遍历" class="headerlink" title="先序遍历"></a>先序遍历</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; results;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">preorderTraversal</span><span class="params">(TreeNode* root)</span> </span>&#123;</span><br><span class="line">        traverse(root);</span><br><span class="line">        <span class="keyword">return</span> results;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">traverse</span><span class="params">(TreeNode* node)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node==<span class="literal">NULL</span>) <span class="keyword">return</span>;</span><br><span class="line">        results.push_back(node-&gt;val);</span><br><span class="line">        traverse(node-&gt;left);</span><br><span class="line">        traverse(node-&gt;right);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="中序遍历"><a href="#中序遍历" class="headerlink" title="中序遍历"></a>中序遍历</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; results;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">inorderTraversal</span><span class="params">(TreeNode* root)</span> </span>&#123;</span><br><span class="line">        traverse(root);</span><br><span class="line">        <span class="keyword">return</span> results;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">traverse</span><span class="params">(TreeNode* node)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node==<span class="literal">NULL</span>) <span class="keyword">return</span>;</span><br><span class="line">        traverse(node-&gt;left);</span><br><span class="line">        results.push_back(node-&gt;val);</span><br><span class="line">        traverse(node-&gt;right);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="后序遍历"><a href="#后序遍历" class="headerlink" title="后序遍历"></a>后序遍历</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; results;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">postorderTraversal</span><span class="params">(TreeNode* root)</span> </span>&#123;</span><br><span class="line">        traverse(root);</span><br><span class="line">        <span class="keyword">return</span> results;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">traverse</span><span class="params">(TreeNode* node)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node==<span class="literal">NULL</span>) <span class="keyword">return</span>;</span><br><span class="line">        traverse(node-&gt;left);</span><br><span class="line">        traverse(node-&gt;right);</span><br><span class="line">        results.push_back(node-&gt;val);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="迭代法求解"><a href="#迭代法求解" class="headerlink" title="迭代法求解"></a>迭代法求解</h3><p>迭代法求解我主要学习了<a href="https://leetcode-cn.com/problems/binary-tree-inorder-traversal/solution/liang-ta-lai-liao-ta-dai-zhao-san-xiong-di-lai-lia/" target="_blank" rel="noopener">leetcode 优秀题解</a> 。我认为他的方法最简明扼要。</p>
<h4 id="先序遍历-1"><a href="#先序遍历-1" class="headerlink" title="先序遍历"></a>先序遍历</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">preorderTraversal</span><span class="params">(TreeNode* root)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; res;  <span class="comment">//保存结果</span></span><br><span class="line">        <span class="built_in">stack</span>&lt;TreeNode*&gt; call;  <span class="comment">//调用栈</span></span><br><span class="line">        <span class="keyword">if</span>(root!=<span class="literal">nullptr</span>) call.push(root);  <span class="comment">//首先压入root节点</span></span><br><span class="line">        <span class="keyword">while</span>(!call.empty())&#123;</span><br><span class="line">            TreeNode *t = call.top();</span><br><span class="line">            call.pop();  <span class="comment">//访问过的节点弹出</span></span><br><span class="line">            <span class="keyword">if</span>(t!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(t-&gt;right) call.push(t-&gt;right);  <span class="comment">//右节点先压栈，最后处理</span></span><br><span class="line">                <span class="keyword">if</span>(t-&gt;left) call.push(t-&gt;left);</span><br><span class="line">                call.push(t);  <span class="comment">//当前节点重新压栈（留着以后处理），因为先序遍历所以最后压栈</span></span><br><span class="line">                call.push(<span class="literal">nullptr</span>);  <span class="comment">//在当前节点之前加入一个空节点表示已经访问过了</span></span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;  <span class="comment">//空节点表示之前已经访问过了，现在需要处理除了递归之外的内容</span></span><br><span class="line">                res.push_back(call.top()-&gt;val);  </span><br><span class="line">                <span class="comment">//call.top()是nullptr之前压栈的一个节点，也就是上面call.push(t)中的那个t</span></span><br><span class="line">                call.pop();  <span class="comment">//处理完了，第二次弹出节点（彻底从栈中移除）</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="中序遍历-1"><a href="#中序遍历-1" class="headerlink" title="中序遍历"></a>中序遍历</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">inorderTraversal</span><span class="params">(TreeNode* root)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; res;  <span class="comment">//保存结果</span></span><br><span class="line">        <span class="built_in">stack</span>&lt;TreeNode*&gt; call;  <span class="comment">//调用栈</span></span><br><span class="line">        <span class="keyword">if</span>(root!=<span class="literal">nullptr</span>) call.push(root);  <span class="comment">//首先压入root节点</span></span><br><span class="line">        <span class="keyword">while</span>(!call.empty())&#123;</span><br><span class="line">            TreeNode *t = call.top();</span><br><span class="line">            call.pop();  <span class="comment">//访问过的节点弹出</span></span><br><span class="line">            <span class="keyword">if</span>(t!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(t-&gt;right) call.push(t-&gt;right);  <span class="comment">//右节点先压栈，最后处理</span></span><br><span class="line">                call.push(t);  </span><br><span class="line">                <span class="comment">//当前节点重新压栈（留着以后处理），因为中序遍历所以根节点摆中间</span></span><br><span class="line">                call.push(<span class="literal">nullptr</span>);  <span class="comment">//在当前节点之前加入一个空节点表示已经访问过了</span></span><br><span class="line">                <span class="keyword">if</span>(t-&gt;left) call.push(t-&gt;left); <span class="comment">//左节点最后压栈，最先处理</span></span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;  <span class="comment">//空节点表示之前已经访问过了，现在需要处理除了递归之外的内容</span></span><br><span class="line">                res.push_back(call.top()-&gt;val);  </span><br><span class="line">                <span class="comment">//call.top()是nullptr之前压栈的一个节点，也就是上面call.push(t)中的那个t</span></span><br><span class="line">                call.pop();  <span class="comment">//处理完了，第二次弹出节点（彻底从栈中移除）</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="后序遍历-1"><a href="#后序遍历-1" class="headerlink" title="后序遍历"></a>后序遍历</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">postorderTraversal</span><span class="params">(TreeNode* root)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; res;  <span class="comment">//保存结果</span></span><br><span class="line">        <span class="built_in">stack</span>&lt;TreeNode*&gt; call;  <span class="comment">//调用栈</span></span><br><span class="line">        <span class="keyword">if</span>(root!=<span class="literal">nullptr</span>) call.push(root);  <span class="comment">//首先压入root节点</span></span><br><span class="line">        <span class="keyword">while</span>(!call.empty())&#123;</span><br><span class="line">            TreeNode *t = call.top();</span><br><span class="line">            call.pop();  <span class="comment">//访问过的节点弹出</span></span><br><span class="line">            <span class="keyword">if</span>(t!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">                call.push(t);  </span><br><span class="line">                <span class="comment">//当前节点重新压栈（留着以后处理），因为后序序遍历所以根节点摆最后，最先入栈</span></span><br><span class="line">                call.push(<span class="literal">nullptr</span>);  <span class="comment">//在当前节点之前加入一个空节点表示已经访问过了</span></span><br><span class="line">                <span class="keyword">if</span>(t-&gt;right) call.push(t-&gt;right);  <span class="comment">//右节点压栈，摆在第二位处理</span></span><br><span class="line">                <span class="keyword">if</span>(t-&gt;left) call.push(t-&gt;left);		<span class="comment">//左节点最后入栈，最先处理</span></span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;  <span class="comment">//空节点表示之前已经访问过了，现在需要处理除了递归之外的内容</span></span><br><span class="line">                res.push_back(call.top()-&gt;val);  </span><br><span class="line">                <span class="comment">//call.top()是nullptr之前压栈的一个节点，也就是上面call.push(t)中的那个t</span></span><br><span class="line">                call.pop();  <span class="comment">//处理完了，第二次弹出节点（彻底从栈中移除）</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/05/24/python%E7%BB%83%E4%B9%A0%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/24/python%E7%BB%83%E4%B9%A0%E9%A2%98/" class="post-title-link" itemprop="url">python练习题</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-05-24 00:12:25" itemprop="dateCreated datePublished" datetime="2020-05-24T00:12:25+08:00">2020-05-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-05-25 00:03:28" itemprop="dateModified" datetime="2020-05-25T00:03:28+08:00">2020-05-25</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="python练习题"><a href="#python练习题" class="headerlink" title="python练习题"></a>python练习题</h1><p><img src="/2020/05/24/python%E7%BB%83%E4%B9%A0%E9%A2%98/1.png" style="zoom:80%;"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">a = [random.randint(<span class="number">10</span>,<span class="number">99</span>) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>)]</span><br><span class="line">b = []</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> a:</span><br><span class="line">    <span class="keyword">if</span>(item%<span class="number">2</span>==<span class="number">0</span>):</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        b.append(item)</span><br><span class="line">print(b)</span><br></pre></td></tr></table></figure>
<p><img src="/2020/05/24/python%E7%BB%83%E4%B9%A0%E9%A2%98/2.png" style="zoom:80%;"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://jasonxqh.github.io/2020/05/22/%E6%9B%B4%E6%96%B0%E6%97%A5%E5%BF%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jason‘s Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/22/%E6%9B%B4%E6%96%B0%E6%97%A5%E5%BF%97/" class="post-title-link" itemprop="url">更新日志</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-05-22 14:23:56" itemprop="dateCreated datePublished" datetime="2020-05-22T14:23:56+08:00">2020-05-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-07-20 21:57:18" itemprop="dateModified" datetime="2020-07-20T21:57:18+08:00">2020-07-20</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="更新日志（五月）"><a href="#更新日志（五月）" class="headerlink" title="更新日志（五月）"></a>更新日志（五月）</h1><h2 id="5-22"><a href="#5-22" class="headerlink" title="5.22"></a>5.22</h2><ol>
<li>完善 <a href="https://jasonxqh.github.io/2020/05/13/二叉树/">二叉树</a> 细节</li>
<li>完善 <a href="https://jasonxqh.github.io/2020/05/15/离散概率part2/">离散数学part2</a> 贝叶斯定律部分</li>
<li>更新 <a href="https://jasonxqh.github.io/2020/05/22/%E7%A6%BB%E6%95%A3%E6%A6%82%E7%8E%87part3/">离散数学part3</a> 期望部分(未完结)</li>
<li>完善 <a href="https://jasonxqh.github.io/2020/05/16/Mysql基础/">Mysql基础</a>的1.5汇总数据部分(已完结)</li>
<li>完善<a href="https://jasonxqh.github.io/2020/05/11/格林公式/">格林公式</a>书本作业部分</li>
</ol>
<h2 id="5-23"><a href="#5-23" class="headerlink" title="5.23"></a>5.23</h2><ol>
<li>完善 <a href="https://jasonxqh.github.io/2020/05/12/对面积的曲面积分/">对面积的曲面积分</a> 中书本作业部分</li>
<li>完善<a href="https://jasonxqh.github.io/2020/05/13/对坐标的曲面积分/">对坐标的曲面积分</a>  中书本作业部分</li>
</ol>
<h2 id="5-24"><a href="#5-24" class="headerlink" title="5.24"></a>5.24</h2><ol>
<li>完善 <a href="https://jasonxqh.github.io/2020/05/16/Mysql基础/">Mysql基础</a>的1.6编写复杂查询部分(已完结)</li>
<li>更新 <a href="https://jasonxqh.github.io/2020/05/24/python练习题/">python练习题</a> 2道</li>
<li>完善 <a href="https://jasonxqh.github.io/2020/05/13/%E9%AB%98%E6%96%AF%E5%85%AC%E5%BC%8F/">高斯公式</a> 书本作业部分</li>
<li>完善 <a href="https://jasonxqh.github.io/2020/05/15/斯托克斯公式/">斯托克斯公式</a> 书本作业部分</li>
</ol>
<h2 id="5-25"><a href="#5-25" class="headerlink" title="5.25"></a>5.25</h2><ol>
<li>完善 <a href="https://jasonxqh.github.io/2020/05/16/Mysql基础/">Mysql基础</a>的 1.7Mysql 中的基本函数(已完结)</li>
<li>更新 <a href="https://jasonxqh.github.io/2020/05/25/94-144-145二叉树三序遍历/#more">94-144-145二叉树遍历</a></li>
<li>更新 <a href="https://jasonxqh.github.io/2020/04/22/331验证二叉树的前序序列化/">验证二叉树的前序序列化</a></li>
<li>更新<a href="https://jasonxqh.github.io/2020/05/08/分治算法和主定理/">分治算法和主定理</a> 作业解答部分</li>
<li>更新 <a href="https://jasonxqh.github.io/2020/05/25/客户端JS第一部分/">客户端javascript第一部分</a>（未完结）</li>
</ol>
<h2 id="5-26"><a href="#5-26" class="headerlink" title="5.26"></a>5.26</h2><ol>
<li>更新<a href="https://jasonxqh.github.io/2020/05/26/OOP-in-JavaScript/#more">OOP-in-JavaScript</a>中对象的部分（未完结）</li>
<li>更新<a href="https://jasonxqh.github.io/2020/05/22/离散概率part3/">离散数学part3</a> 中的期望部分(已完结)，方差部分（未完结）</li>
<li>完善 <a href="https://jasonxqh.github.io/2020/05/16/Mysql基础/">Mysql基础</a>的 VIEW(已完结)</li>
</ol>
<h2 id="5-27"><a href="#5-27" class="headerlink" title="5.27"></a>5.27</h2><ol>
<li>更新 <a href="https://jasonxqh.github.io/2020/05/26/常数项级数的审敛法/">常数项级数的审敛法</a> （未完结）</li>
<li>更新<a href="https://jasonxqh.github.io/2020/05/26/OOP-in-JavaScript/#more">OOP-in-JavaScript</a> 中对象的部分 （已完结）</li>
</ol>
<h2 id="5-28"><a href="#5-28" class="headerlink" title="5.28"></a>5.28</h2><ol>
<li>更新 <a href="https://jasonxqh.github.io/2020/05/26/常数项级数的审敛法/">常数项级数的审敛法</a> （已完结）</li>
<li>更新<a href="https://jasonxqh.github.io/2020/05/26/OOP-in-JavaScript/#more">OOP-in-JavaScript</a>中原型的部分 （已完结），原型继承部分（已完结），类部分（未完结）</li>
</ol>
<h2 id="5-29"><a href="#5-29" class="headerlink" title="5.29"></a>5.29</h2><ol>
<li>更新<a href="https://jasonxqh.github.io/2020/05/26/OOP-in-JavaScript/#more">OOP-in-JavaScript</a>中类部分（已完结），ES6Tooling 部分(已完结)</li>
<li>更新<a href="https://jasonxqh.github.io/2020/05/22/离散概率part3/">离散数学part3</a> 中的 方差部分（已完结），尾概率（未完结）</li>
</ol>
<h2 id="5-30"><a href="#5-30" class="headerlink" title="5.30"></a>5.30</h2><ol>
<li>更新 数据结构 ：<a href="https://jasonxqh.github.io/2020/05/30/Trie树/#more">Trie 树</a>(已完结)</li>
<li>更新 <a href="https://jasonxqh.github.io/2020/05/30/sstream/#more">C++中的sstream</a> (已完结)</li>
<li>更新 <a href="https://jasonxqh.github.io/2020/05/30/sscanf和sprintf/#more">C中的sscanf和sprintf函数</a>(已完结)</li>
<li>完善更新<a href="https://jasonxqh.github.io/2020/05/26/OOP-in-JavaScript/#more">OOP-in-JavaScript</a>中类部分（已完结），为学习react打基础</li>
</ol>
<h2 id="5-31"><a href="#5-31" class="headerlink" title="5.31"></a>5.31</h2><ol>
<li>更新<a href="https://jasonxqh.github.io/2020/05/30/react基础/#more">react基础</a> 组件部分（已完结） 组合组键部分（未完结）</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/26/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/26/">26</a><span class="page-number current">27</span><a class="page-number" href="/page/28/">28</a><span class="space">&hellip;</span><a class="page-number" href="/page/44/">44</a><a class="extend next" rel="next" href="/page/28/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Jason</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">439</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">68</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jason</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->

    

  

</body>
</html>
